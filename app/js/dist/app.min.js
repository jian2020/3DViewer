"use strict";function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var app=angular.module("app",["ui.router","routesModule","LocalStorageModule","uiGmapgoogle-maps","ngProgress","ui-notification","ngMap","ui.select","ui.select2","ngSanitize","color.picker","ui.bootstrap","datatables","ngTagsInput","ngFileUpload","infinite-scroll","ui.tree","angularMoment","btorfs.multiselect","htmlToPdfSave","dndLists","angular.chips","ui.bootstrap.contextMenu","cloudinary","FileSaver"]);function config(NotificationProvider,uiGmapGoogleMapApiProvider,treeConfig,cloudinaryProvider){uiGmapGoogleMapApiProvider.configure({key:"AIzaSyA3MIA-mKWq_60q1K0zOHguraxT-1QPxNU",v:"3.exp",libraries:"places,weather,geometry,visualization"}),NotificationProvider.setOptions({delay:3e3,startTop:20,startRight:10,verticalSpacing:20,horizontalSpacing:20,positionX:"right",positionY:"top"}),treeConfig.defaultCollapsed=!0,cloudinaryProvider.set("cloud_name","dktnhmsjx").set("upload_preset","cloudes_frontend")}function routeConfig($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/"),$stateProvider.state("preLogin",{url:"/",templateUrl:"/partials/preLogin.html",controller:"preLoginCtrl as vm"}),$stateProvider.state("dashboard",{url:"/dashboard",templateUrl:"/partials/dashboard.html",controller:"dashboardCtrl as vm"}),$stateProvider.state("createProject",{url:"/create_project",templateUrl:"/partials/createProject.html",controller:"createProjectCtrl as vm"}),$stateProvider.state("visualPlanner",{url:"/visual_planner",templateUrl:"/partials/visualPlanner.html",controller:"visualPlannerCtrl as vm"}),$stateProvider.state("projects",{url:"/projects",templateUrl:"/partials/projects.html",controller:"projectCtrl as vm"}),$stateProvider.state("materials",{url:"/materials",templateUrl:"/partials/materials.html",controller:"materialCtrl as vm"}),$stateProvider.state("materialView",{url:"/material/:id",templateUrl:"/partials/materialView.html",controller:"materialViewCtrl as vm"}),$stateProvider.state("comboMaterialView",{url:"/combo_material/:id",templateUrl:"/partials/comboMaterialView.html",controller:"comboMaterialViewCtrl as vm"}),$stateProvider.state("equipments",{url:"/equipments",templateUrl:"/partials/equipments.html",controller:"equipmentCtrl as vm"}),$stateProvider.state("equipmentView",{url:"/equipmentView/:id",templateUrl:"/partials/equipmentView.html",controller:"equipmentViewCtrl as vm"}),$stateProvider.state("fileManager",{url:"/file_manager",templateUrl:"/partials/fileManager.html",controller:"fileManagerCtrl as vm"}),$stateProvider.state("payroll",{url:"/payroll",templateUrl:"/partials/payroll.html",controller:"payrollCtrl as vm"}),$stateProvider.state("calculation",{url:"/calculation",templateUrl:"/partials/calculation.html",controller:"calculationCtrl as vm"}),$stateProvider.state("report",{url:"/report",templateUrl:"/partials/reports.html",controller:"reportsCtrl as vm"}),$stateProvider.state("issues",{url:"/issues",templateUrl:"/partials/issues.html",controller:"issuesCtrl as vm"}),$stateProvider.state("issuesDetail",{url:"/issues_details/:id",templateUrl:"/partials/issues_details.html",controller:"issueDetailCtrl as vm"}),$stateProvider.state("reportsDetail",{url:"/reports_details/:id",templateUrl:"/partials/reportsdetails.html",controller:"reportDetailCtrl as vm"}),$stateProvider.state("billingArchive",{url:"/billing_archive",templateUrl:"/partials/billingArchive.html",controller:"billingArchiveCtrl as vm"}),$stateProvider.state("reportsListing",{url:"/reports_listing",templateUrl:"/partials/reportsListing.html",controller:"reportsListingCtrl as vm"}),$stateProvider.state("3dDashboard",{url:"/3d_dashboard",templateUrl:"/partials/3d-dashboard.html",controller:"_3dDashboardCtrl as vm"}),$stateProvider.state("setPassword",{url:"/set_password",templateUrl:"/partials/set_password.html",controller:"setPasswordCtrl as vm"}),$stateProvider.state("setting",{url:"/setting",templateUrl:"/partials/setting.html",controller:"settingCtrl as vm"}),$stateProvider.state("employees",{url:"/employees",templateUrl:"/partials/employee.html",controller:"employeesCtrl as vm"}),$stateProvider.state("3dviewer",{url:"/3dviewer",templateUrl:"/partials/3d-viewer.html",controller:"_3dviewerCtrl as vm"}),$stateProvider.state("clients",{url:"/clients",templateUrl:"/partials/clients.html",controller:"clientsCtrl as vm"}),$stateProvider.state("supplier",{url:"/supplier",templateUrl:"/partials/supplier.html",controller:"supplierCtrl as vm"}),$stateProvider.state("supplierDetail",{url:"/supplier_details/:id",templateUrl:"/partials/supplierdetails.html",controller:"supplierDetailCtrl as vm"}),$stateProvider.state("subcontractor",{url:"/subcontractor",templateUrl:"/partials/subcontractor.html",controller:"subcontractorCtrl as vm"}),$stateProvider.state("subcontractorDetail",{url:"/subcontractor_details/:id",templateUrl:"/partials/subcontractordetails.html",controller:"subcontractorDetailCtrl as vm"}),$stateProvider.state("meetingroom",{url:"/meetingroom",templateUrl:"/partials/meetingRoom.html",controller:"meetingRoomCtrl as vm"}),$stateProvider.state("calender",{url:"/calender",templateUrl:"/partials/calender.html",controller:"calenderCtrl as vm"}),$stateProvider.state("todo",{url:"/todo",templateUrl:"/partials/todo.html",controller:"todoCtrl as vm"}),$stateProvider.state("todoView",{url:"/todoView/:id",templateUrl:"/partials/todoView.html",controller:"todoViewCtrl as vm"})}app.config(config),angular.module("routesModule",[]).config(routeConfig),function(){angular.module("app").factory("apiFactory",function($http,$state,$location,localStorageService,globals,Upload,Notification,$q){var _ref,url="https://api.staging.cloudes.eu",headers=function(method,token){return{"Content-Type":"GET"===method?void 0:"application/json","x-access-token":token?localStorageService.get("access-token"):void 0,platform:JSON.stringify({source:"web"})}},progress=globals.progress,logout=(globals.userStore,globals.logout);return _defineProperty(_ref={login:function(payload){var promise=this.progressify($http({url:url+"/authenticate",method:"POST",headers:headers("POST"),data:payload}));return promise},forgotPassword:function(payload){var promise=this.progressify($http({url:url+"/forgetPassword",method:"POST",headers:headers("POST"),data:payload}));return promise},registration:function(payload){var promise=this.progressify($http({url:url+"/dashboardRegistration",method:"POST",headers:headers("POST"),data:payload}));return promise},subscribe:function(payload){var promise=this.progressify($http({url:url+"/subscribe",method:"POST",headers:headers("POST"),data:payload}));return promise},getCompanyById:function(companyId){var promise=this.progressify($http({url:url+"/api/getCompanyById/"+companyId,method:"GET",headers:headers("GET",!0)}));return promise},listAllUsers:function(){var promise=this.progressify($http({url:url+"/api/getadminusers",method:"GET",headers:headers("GET",!0)}));return promise},listAllProjects:function(queryObj){var query=queryObj?Object.keys(queryObj).reduce(function(acc,v){var str=v+"="+queryObj[v]+"&";return acc+=str},"?"):"";query=query.slice(0,-1);var promise=this.progressify($http({url:url+"/api/listAllProjects"+query,method:"GET",headers:headers("GET",!0)}));return promise},listAllClients:function(queryObj){var query=queryObj?Object.keys(queryObj).reduce(function(acc,v){var str=v+"="+queryObj[v]+"&";return acc+=str},"?"):"";query=query.slice(0,-1);var promise=this.progressify($http({url:url+"/api/listAllClients"+query,method:"GET",headers:headers("GET",!0)}));return promise},listAllRoofers:function(){var promise=this.progressify($http({url:url+"/api/listAllRoofers",method:"GET",headers:headers("GET",!0)}));return promise},createProject:function(payload){var promise=this.progressify($http({url:url+"/api/createProject",method:"POST",headers:headers("POST",!0),data:payload}));return promise},createIssue:function(issueobj){console.log("in create issue api",issueobj);var promise=this.progressify(Upload.upload({url:url+"/api/createIssue",method:"POST",data:issueobj,headers:headers("POST",!0)}));return promise},createIssueS3Upload:function(issueobj){var promise=this.progressify(Upload.upload({url:url+"/api/createIssueForS3",method:"POST",data:issueobj,headers:headers("POST",!0)}));return promise},getIssueById:function(issueID){var promise=this.progressify($http({url:url+"/api/getIssueById/"+issueID,method:"GET",headers:headers("GET",!0)}));return promise},updateIssue:function(issueobj,id){var promise=this.progressify(Upload.upload({url:url+"/api/updateIssue/"+id,method:"PUT",data:issueobj,headers:headers("PUT",!0)}));return promise},getProjectRoofPlans:function(projectId){var promise=this.progressify($http({url:url+"/api/getProjectRoofPlans/"+projectId,method:"GET",headers:headers("GET",!0)}));return promise},saveRoofPlan:function(roofPlanId,payload){var promise=this.progressify($http({url:url+"/api/saveRoofPlan/"+roofPlanId,method:"PUT",headers:headers("PUT",!0),data:payload}));return promise},createMaterials:function(payload){var promise=this.progressify(Upload.upload({url:url+"/api/createMaterial",data:payload,headers:headers("POST",!0)}));return promise},createEquipment:function(payload){var promise=this.progressify(Upload.upload({url:url+"/api/createEquipment",data:payload,headers:headers("POST",!0)}));return promise},listAllMaterials:function(queryObj){var query=queryObj?Object.keys(queryObj).reduce(function(acc,v){var str=v+"="+queryObj[v]+"&";return acc+=str},"?"):"";query=query.slice(0,-1);var promise=this.progressify($http({url:url+"/api/listAllMaterials"+query,method:"GET",headers:headers("GET",!0)}));return promise},listAllComboMaterials:function(queryObj){var query=queryObj?Object.keys(queryObj).reduce(function(acc,v){var str=v+"="+queryObj[v]+"&";return acc+=str},"?"):"";query=query.slice(0,-1);var promise=this.progressify($http({url:url+"/api/listComboMaterials"+query,method:"GET",headers:headers("GET",!0)}));return promise},listAllEquipments:function(queryObj){var query=queryObj?Object.keys(queryObj).reduce(function(acc,v){var str=v+"="+queryObj[v]+"&";return acc+=str},"?"):"";query=query.slice(0,-1);var promise=this.progressify($http({url:url+"/api/listAllEquipments"+query,method:"GET",headers:headers("GET",!0)}));return promise},updateMaterialById:function(id,payload){var promise=this.progressify(Upload.upload({url:url+"/api/updateMaterialById/"+id,method:"PUT",headers:headers("PUT",!0),data:payload}));return promise},getMaterialById:function(materialID){var promise=this.progressify($http({url:url+"/api/getMaterialById/"+materialID,method:"GET",headers:headers("GET",!0)}));return promise},getComboMaterialById:function(comboId){var promise=this.progressify($http({url:url+"/api/getComboMaterialById/"+comboId,method:"GET",headers:headers("GET",!0)}));return promise},getEquipmentById:function(id){var promise=this.progressify($http({url:url+"/api/getEquipmentById/"+id,method:"GET",headers:headers("GET",!0)}));return promise},createComboMaterial:function(payload){var promise=this.progressify(Upload.upload({url:url+"/api/createComboMaterial",method:"POST",headers:headers("POST",!0),data:payload}));return promise},updateComboMaterialList:function(id,payload){var promise=this.progressify($http({url:url+"/api/updateComboMaterialList/"+id,method:"PUT",headers:headers("POST",!0),data:payload}));return promise},updateComboMaterial:function(id,payload){var promise=this.progressify(Upload.upload({url:url+"/api/updateComboMaterial/"+id,method:"PUT",headers:headers("POST",!0),data:payload}));return promise},showConversionRate:function(payload){var promise=this.progressify($http({url:url+"/api/showConversionRate",method:"POST",headers:headers("POST",!0),data:payload}));return promise}},"getMaterialById",function(id){var promise=this.progressify($http({url:url+"/api/getMaterialById/"+id,method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"progressify",function(promise){return new Promise(function(resolve,reject){progress.start(),promise.then(function(resp){progress.complete(),resolve(resp)}).catch(function(err){progress.complete(),401===err.status&&logout(),reject(err)})})}),_defineProperty(_ref,"listAllIssues",function(queryObj){var query=queryObj?Object.keys(queryObj).reduce(function(acc,v){var str=v+"="+queryObj[v]+"&";return acc+=str},"?"):"";query=query.slice(0,-1);var promise=this.progressify($http({url:url+"/api/listAllIssues"+query,method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"getIssuesList",function(){var promise=this.progressify($http({url:url+"/api/allIssues",method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"isTokenValid",function(payload){var promise=this.progressify($http({url:url+"/isTokenValid",method:"POST",headers:headers("POST",!0),data:payload}));return promise}),_defineProperty(_ref,"setPassword",function(payload){var promise=this.progressify($http({url:url+"/resetPasswordAdmin",method:"PUT",headers:headers("PUT",!0),data:payload}));return promise}),_defineProperty(_ref,"updateRoleBasedAccess",function(payload){var promise=this.progressify($http({url:url+"/api/updateRoleBasedAccess",method:"PUT",headers:headers("PUT",!0),data:payload}));return promise}),_defineProperty(_ref,"addHierarchy",function(payload){var promise=this.progressify($http({url:url+"/api/addHierarchy",method:"POST",headers:headers("POST",!0),data:payload}));return promise}),_defineProperty(_ref,"getHierarchyChildren",function(hierarchyId){var promise=this.progressify($http({url:url+"/api/getHierarchyChildren/"+hierarchyId,method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"getHierarchy",function(projectId){var promise=this.progressify($http({url:url+"/api/getHierarchy/"+projectId+"?depth=2",method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"viewProjectAssets",function(projectId){var promise=this.progressify($http({url:url+"/api/viewProjectAssets/"+projectId,method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"addFileToHierarchy",function(payload){var promise=this.progressify($http({url:url+"/api/addFileToHierarchy",method:"PUT",headers:headers("PUT",!0),data:payload}));return promise}),_defineProperty(_ref,"viewHierarchy",function(hierarchyId){var promise=this.progressify($http({url:url+"/api/viewHierarchy/"+hierarchyId,method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"cloneAssets",function(payload){var promise=this.progressify($http({url:url+"/api/cloneAssets",method:"PUT",headers:headers("PUT",!0),data:payload}));return promise}),_defineProperty(_ref,"uploadFileInFileManager",function(payload){var promise=this.progressify(Upload.upload({url:url+"/api/uploadFileInFileManager",method:"POST",data:payload,headers:headers("POST",!0)}));return promise}),_defineProperty(_ref,"dragMoveNodes",function(payload){var promise=this.progressify($http({url:url+"/api/dragMoveNodes",method:"PUT",data:payload,headers:headers("POST",!0)}));return promise}),_defineProperty(_ref,"moveAssets",function(payload){var promise=this.progressify($http({url:url+"/api/moveAssets",method:"PUT",data:payload,headers:headers("POST",!0)}));return promise}),_defineProperty(_ref,"deleteAssets",function(payload){var promise=this.progressify($http({url:url+"/api/deleteAssets",method:"PUT",data:payload,headers:headers("POST",!0)}));return promise}),_defineProperty(_ref,"get3DPage",function(){var token=localStorageService.get("access-token"),Data3D={"x-access-token":token,projectId:"5b697c030a7e97056835a94a"},promise=this.progressify($http({url:"https://cloudes-3d.com",method:"POST",data:Data3D}));return promise}),_defineProperty(_ref,"createClient",function(client){console.log("client in api factory",client);var promise=this.progressify($http({url:url+"/api/createClient",method:"POST",headers:headers("POST",!0),data:client}));return promise}),_defineProperty(_ref,"saveHierarchyTree",function(projectId,name){var promise=this.progressify($http({url:url+"/api/saveHierarchyTree/"+projectId,method:"PUT",headers:headers("POST",!0),data:name}));return promise}),_defineProperty(_ref,"getSystemTag",function(){var promise=this.progressify($http({url:url+"/api/getComboSystemTag",method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"bookMarkProject",function(id,added){var promise=this.progressify($http({url:url+"/api/bookMarkProject",method:"PUT",data:{projectId:id,added:added},headers:headers("POST",!0)}));return promise}),_defineProperty(_ref,"getBookmarks",function(){var promise=this.progressify($http({url:url+"/api/getBookmarks",method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"getHierarchyTemplate",function(){var promise=this.progressify($http({url:url+"/api/getHierarchyTemplate",method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"loadHierarchyTree",function(payload){var promise=this.progressify($http({url:url+"/api/loadHierarchyTree",method:"POST",data:payload,headers:headers("POST",!0)}));return promise}),_defineProperty(_ref,"newFileUpload",function(payload){var promise=this.progressify($http({url:url+"/api/newFileUpload",method:"POST",data:payload,headers:headers("POST",!0)}));return promise}),_defineProperty(_ref,"showProjectFiles",function(queryObj){var query=queryObj?Object.keys(queryObj).reduce(function(acc,v){var str=v+"="+queryObj[v]+"&";return acc+=str},"?"):"";query=query.slice(0,-1);var promise=this.progressify($http({url:url+"/api/showProjectFiles"+query,method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"changeProjectTemplate",function(payload){var promise=this.progressify($http({url:url+"/api/changeProjectTemplate",method:"POST",data:payload,headers:headers("POST",!0)}));return promise}),_defineProperty(_ref,"showProjectFiles",function(id,limit){var promise=this.progressify($http({url:url+"/api/showProjectFiles/"+id+"?limit="+limit,method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"getProjectById",function(id){var promise=this.progressify($http({url:url+"/api/getProjectById/"+id,method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"checkAssetDuplicate",function(payload){var promise=this.progressify($http({url:url+"/api/checkAssetDuplicate",method:"POST",headers:headers("POST",!0),data:payload}));return promise}),_defineProperty(_ref,"createNewSupplier",function(supplier){var promise=this.progressify(Upload.upload({url:url+"/api/addsupplier",method:"POST",data:supplier,headers:headers("POST",!0)}));return promise}),_defineProperty(_ref,"getAllSuppliers",function(queryObj){var query=queryObj?Object.keys(queryObj).reduce(function(acc,v){var str=v+"="+queryObj[v]+"&";return acc+=str},"?"):"";query=query.slice(0,-1);var promise=this.progressify($http({url:url+"/api/listallsuppliers"+query,method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"getAllSubcontractors",function(queryObj){var query=queryObj?Object.keys(queryObj).reduce(function(acc,v){var str=v+"="+queryObj[v]+"&";return acc+=str},"?"):"";query=query.slice(0,-1);var promise=this.progressify($http({url:url+"/api/listallsubcontractor"+query,method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"addProjectRoofPlan",function(payload,projectId){var promise=this.progressify($http({url:url+"/api/addProjectRoofPlan",method:"POST",headers:headers("POST",!0),data:payload}));return promise}),_defineProperty(_ref,"generateRoofPlans",function(payload){var promise=this.progressify($http({url:url+"/api/generateRoofPlans",method:"POST",headers:headers("POST",!0),data:payload}));return promise}),_defineProperty(_ref,"addRoofPlansFromAsset",function(payload){var promise=this.progressify($http({url:url+"/api/addRoofPlansFromAsset",method:"POST",headers:headers("POST",!0),data:payload}));return promise}),_defineProperty(_ref,"getSupplierById",function(supplierID){var promise=this.progressify($http({url:url+"/api/getsupplier/"+supplierID,method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"createNewSubcontractor",function(subcontractor){var promise=this.progressify(Upload.upload({url:url+"/api/addsubcontractor",method:"POST",data:subcontractor,headers:headers("POST",!0)}));return promise}),_defineProperty(_ref,"getSubcontractorById",function(supplierID){var promise=this.progressify($http({url:url+"/api/getsubcontractor/"+supplierID,method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"issueImage",function(payload){var promise=this.progressify(Upload.upload({url:url+"/api/issueImage",method:"POST",data:payload,headers:headers("POST",!0)}));return promise}),_defineProperty(_ref,"newIssues3FileUpload",function(payload){console.log("IN S3 ISSUE FUNCTION");var promise=this.progressify($http({url:url+"/api/newIssues3FileUpload",method:"POST",data:payload,headers:headers("POST",!0)}));return promise}),_defineProperty(_ref,"postCommentForIssue",function(id,comment){console.log("Comment: ",comment);var promise=this.progressify($http({url:url+"/api/addcomment/"+id,method:"PUT",data:comment,headers:headers("PUT",!0)}));return promise}),_defineProperty(_ref,"saveLocalIssueAsset",function(files){var promise=this.progressify(Upload.upload({url:url+"/api/localFileImages",method:"POST",headers:headers("POST",!0),data:files}));return promise}),_defineProperty(_ref,"postMarkImg",function(dt){console.log("data: ",dt);var promise=this.progressify(Upload.upload({url:url+"/api/postmarkings",method:"POST",headers:headers("POST",!0),data:dt}));return promise}),_defineProperty(_ref,"reOpenIssueStatusUpdate",function(id){var promise=this.progressify($http({url:url+"/api/reopenStatus/"+id,method:"PUT",data:{completionStatus:"OPEN"},headers:headers("PUT",!0)}));return promise}),_defineProperty(_ref,"getAllAtOnce",function(){var deferred=$q.defer(),infoPromise=$http({url:url+"/api/getadminusers",method:"GET",headers:headers("GET",!0)}),detailsPromise=$http({url:url+"/api/listAllRoofers",method:"GET",headers:headers("GET",!0)});$q.all([infoPromise,detailsPromise]).then(function(data){return deferred.resolve({fruitInfo:data[0],fruitDetails:data[1]}),deferred.promise})}),_defineProperty(_ref,"saveIssueAsComplete",function(id,object){console.log(object);var promise=this.progressify(Upload.upload({url:url+"/api/markissueascomplete/"+id,method:"PUT",data:object,headers:headers("PUT",!0)}));return promise}),_ref})}(),function(){angular.module("app").factory("authFactory",function($http,$location,localStorageService){return{checkUser:function(){var token=localStorageService.get("access-token");return!(!token||""==token)},checkPrivilege:function(type,subType){var _localStorageService$=localStorageService.get("userData"),privilege=_localStorageService$.privilege,_localStorageService$2=localStorageService.get("companyData"),privileges=_localStorageService$2.privileges;return privilege<=privileges[type][subType]}}})}(),function(){angular.module("app").factory("fileManagerFactory",function(apiFactory,Notification){return{clipBoard:(items={type:0,data:[],source:null},{copy:function(item){items.source=null,items.type=0,items.data=[item]},cut:function(item,source){items.source=source,items.type=1,items.data=[item]},paste:function(destId){return new Promise(function(resolve,reject){if(items.data.length<1)return Notification.warning("Clipboard is empty"),void resolve(!1);var apiType=0===items.type?"cloneAssets":"moveAssets",payload={assetId:items.data.map(function(x){return x._id}),sourceId:0===items.type?void 0:items.source,destId:0===items.type?void 0:destId,hierarchyId:0===items.type?destId:void 0};apiFactory[apiType](payload).then(function(resp){Notification.success(resp.data.message),items={type:0,data:[],source:null},resolve(!0)}).catch(function(e){console.log(e),reject(!1)})})}}),navigationStack:function(){var stack=[],head=stack.length-1;return{push:function(item){stack.splice(head+1,stack.length,item),head=stack.length-1},forward:function(){if(stack.length&&head!==stack.length-1)return stack[++head]?(stack[head].toggle(),stack[head]):void 0},backward:function(){if(stack.length&&!(head<0))return stack[head]?(stack[head].toggle(),stack[--head]):void 0}}},breadCrumb:function(){var breadCrumbs=[];return{set:function(val){breadCrumbs.push(val)},get:function(){return breadCrumbs}}},splitDestination:function(filesArray){return filesArray.reduce(function(acc,x){return x.size<5e7&&("application/pdf"===x.type||/image*/.test(x.type))?acc.cloudinary.push(x):acc.s3.push(x),acc},{s3:[],cloudinary:[]})},resolveDestType:function(file){return file.size<5e7&&("application/pdf"===file.type||/image*/.test(file.type))?2:1},checkUploadCompletion:function(files){var bool=!0;return files.s3.forEach(function(x){x.completed||x.aborted||!bool||(bool=!1)}),files.cloudinary.forEach(function(x){x.completed||x.aborted||!bool||(bool=!1)}),bool},checkDuplicateFiles:function(files,destId){return new Promise(function(resolve,reject){apiFactory.checkAssetDuplicate({assetNames:files.map(function(x){return x.name}),destId:destId}).then(function(resp){var duplicateFiles=files.map(function(x){return x.action="rename",x.assetName=x.name,x}).reduce(function(acc,x){return-1===resp.data.duplicates.indexOf(x.name)?acc.uploadFiles.push(x):acc.duplicates.push(x),acc},{duplicates:[],uploadFiles:[]});resolve(duplicateFiles)}).catch(function(e){reject(e)})})},checkNameChange:function(files){return files.filter(function(x){return"rename"===x.action}).reduce(function(acc,x){return acc=acc||x.assetName===x.name},!1)},generateVersion:function(fileName){return fileName+" (v"+Date.now()+")"},generateThumbnail:function(file){var reader=new FileReader;reader.onload=function(){pdfjsLib.getDocument({url:reader.result}).then(function(doc){doc.getPage(1).then(function(page){console.log("page!!!",page);var viewport=page.getViewport(1),canvas=document.createElement("canvas"),context=canvas.getContext("2d");canvas.height=viewport.height,canvas.width=viewport.width;var task=page.render({canvasContext:context,viewport:viewport});task.promise.then(function(){var dataURL=canvas.toDataURL("image/png"),link=document.createElement("a");link.download="roofplan_image_"+Date.now(),link.href=dataURL,document.body.appendChild(link),link.click(),document.body.removeChild(link)})})})},reader.readAsDataURL(file)},splitFileDest:function(filesArray){return filesArray.reduce(function(acc,x){return x.file.size<2e7&&("application/pdf"===x.file.type||/image*/.test(x.file.type))?acc.cloudinary.push(x):acc.s3.push(x),acc},{s3:[],cloudinary:[]})}};var items})}(),function(){angular.module("app").factory("globals",function($http,$state,$location,ngProgressFactory,Notification,localStorageService){var throttler=(enabled=!0,function(fn){enabled&&(enabled=!1,setTimeout(function(){enabled=!0}),fn())});var enabled;return{progress:(progressbar=ngProgressFactory.createInstance(),progressbar),logout:function(){localStorageService.remove("access-token"),localStorageService.remove("userData"),localStorageService.remove("companyData"),localStorageService.set("currentProject",null),localStorageService.remove("inventoryState"),$state.go("preLogin"),throttler(function(){return Notification.error("Please login")})},userStore:(userData=localStorageService.get("userData")||{},{set:function(data){return data.privilege=["admin","manager","sub_contractor","team_leader","worker"].indexOf(data.designation),localStorageService.set("userData",data),userData=data},get:function(){return userData},reset:function(){localStorageService.remove("userData"),userData={}}}),companyStore:(companyData=localStorageService.get("companyData")||null,{set:function(data){return localStorageService.set("companyData",data),companyData=data},get:function(){return companyData},refetch:function(id){$http({method:"GET",headers:{"x-access-token":localStorageService.get("access-token"),platform:JSON.stringify({source:"web"})},url:"https://api.staging.cloudes.eu/api/getCompanyById/"+id}).then(function(resp){localStorageService.set("companyData",resp.data)}).catch(function(e){console.log(e)})},reset:function(){localStorageService.remove("companyData"),companyData={}}}),projectStore:function(){localStorageService.get("currentProject");return{set:function(data){return localStorageService.set("currentProject",data),data},get:function(){return localStorageService.get("currentProject")},reset:function(){localStorageService.remove("currentProject"),null}}}(),inventoryState:function(){var state=localStorageService.get("inventoryState")||{tab:0,searchText:"",page:{material:1,combo:1}};return{setPage:function(type,value){state.page[type]=value,localStorageService.set("inventoryState",state)},setTab:function(val){state.tab=val,localStorageService.set("inventoryState",state)},text:function(_text){_text&&(state.searchText=_text,localStorageService.set("inventoryState",state))},get:function(){return state}}},mUnits:[{name:"mt",value:"mt"},{name:"sq.mt",value:"sq.mt"},{value:"cu.mt",name:"cu.mt"},{name:"ft",value:"ft"},{name:"sq.ft",value:"sq.ft"},{value:"cu.ft",name:"cu.ft"},{value:"unit",name:"unit"}],getCurrency:function(){return $http.get("/data/currencies.json")},getCountryCode:function(){return $http.get("/data/CountryCode.json")},getIndustry:function(){return $http.get("/data/industry.json")},debounce:function(rate){var timer=void 0;return function(fn,args){clearTimeout(timer),timer=setTimeout(function(){fn.apply(null,args)},rate)}},genericStore:function(){var item=void 0;return{store:function(val){item=val},get:function(){return item}}},extractPagesFromPdf:function(pdfLink,pageCount){return[].concat(_toConsumableArray(Array(pageCount).keys())).reduce(function(acc,_,i){var pageObj={pageNo:i,url:pdfLink.replace("/upload/","/upload/pg_"+(i+1)+"/").replace(/\.pdf$/,".png"),title:"title_"+Date.now(),selected:!1,description:""};return acc.push(pageObj),acc},[])},createPagesFromPdf:function(pdf){return new Promise(function(resolve,reject){pdfjsLib.getDocument(pdf.secure_url).promise.then(function(doc){Promise.all([].concat(_toConsumableArray(Array(doc.numPages).keys())).map(function(_,i){return doc.getPage(i+1)})).then(function(pages){resolve(pages.map(function(x,i){return x.pageNo=i,x.title="title_"+Date.now(),x.selected=!1,x.description="",x}))}).catch(function(e){reject(e)})}).catch(function(e){console.log(e),reject(e)})})},renderPage:function(page,canvas){var viewport=page.getViewport(canvas.width/page.getViewport(1).width),context=canvas.getContext("2d");canvas.height=viewport.height;page.render({canvasContext:context,viewport:viewport})}};var companyData;var userData;var progressbar})}(),function(){angular.module("app").factory("issuecreateFactory",function($http,$state,$location,localStorageService,globals,Upload,Notification,$q,apiFactory,uploadFactory,fileManagerFactory){var _globals,vm=this,s3FileObjets=[];return headers=function(method,token){return{"Content-Type":"GET"===method?void 0:"application/json","x-access-token":token?localStorageService.get("access-token"):void 0,platform:JSON.stringify({source:"web"})}},_globals=globals,progress=_globals.progress,userStore=_globals.userStore,logout=_globals.logout,{getAllAtOnce:function(object,filesarray){if(console.log("OBJECT: ",object),console.log("ARRAY OF FILES: ",filesarray),console.log("ARRAY OF FILES s3: ",filesarray.s3),console.log("ARRAY OF FILES cloudinary: ",filesarray.cloudinary),$q.defer(),filesarray.s3.length&&filesarray.s3.forEach(function(x,i,array){console.log(x,i),uploadFactory.start(function(evaporate){x.file.pause=uploadFactory.pause.bind(evaporate,x),x.file.resume=uploadFactory.resume.bind(evaporate,x),x.file.abort=uploadFactory.abort.bind(evaporate,x);var addConfig={name:x.file.name,file:x.file,progress:function(p,stats){x.file.progress=x.file.progress>Math.round(100*p)?x.file.progress:Math.round(100*p),vm.completedAll=fileManagerFactory.checkUploadCompletion(filesarray)},complete:function(_xhr,awsKey){x.file.completed=!0,console.log("Complete!")}};evaporate.add(addConfig).then(function(awsObjectKey){console.log(x);var payload={type:fileManagerFactory.resolveDestType(x.file),assetData:{assetName:x.file.name,assetdescription:x.comment,bucket:"3dfilesdata",key:"test/"+x.file.name,mimetype:x.file.type,bytes:x.file.size}};$http({url:url+"/api/newIssues3FileUpload",method:"POST",data:payload,headers:headers("POST",!0)}).then(function(resp){console.log("s3 resp: ",resp),s3FileObjets.push(resp),i==filesarray.s3.length-1&&(alert("alerts called"),console.log(i),console.log("array:",x))}).catch(function(e){console.log(e)})},function(reason){x.aborted=!0,vm.completedAll=fileManagerFactory.checkUploadCompletion(filesarray)})})}),filesarray.cloudinary.length){var cloudinaryPayload={files:filesarray.cloudinary};Upload.upload({url:url+"/api/issueImage",method:"POST",data:cloudinaryPayload,headers:headers("POST",!0)}).then(function(resp){console.log("response of cloudinary: ",resp),vm.completedAll=fileManagerFactory.checkUploadCompletion(filesarray)}).catch(function(e){console.log(e)})}},sendData:function(object,files){console.log(object),console.log(files)}}})}(),function(){angular.module("app").factory("uploadFactory",function($http,$location,localStorageService,apiFactory,Upload,cloudinary,Notification){var config={signerUrl:"https://api.staging.cloudes.eu/signv4_auth",aws_key:"AKIAJMO3YJTPKYV5DN5A",bucket:"3dfilesdata/test",awsRegion:"ap-south-1",computeContentMd5:!0,allowS3ExistenceOptimization:!0,cryptoMd5Method:function(data){return AWS.util.crypto.md5(data,"base64")},cryptoHexEncodedHash256:function(data){return AWS.util.crypto.sha256(data,"hex")}};return{init:function(){return Evaporate.create(config)},start:function(handler){var fileUpload=this.init();fileUpload.then(handler).catch(function(e){console.log(e)})},pause:function(file){this.pause("3dfilesdata/test/"+file.name,{force:!0}).then(function(){file.isPaused=!0,console.log("Paused!")}).catch(function(e){console.log(e)})},resume:function(file){this.resume("3dfilesdata/test/"+file.name).then(function(){file.isPaused=!1,console.log("Resumed!")}).catch(function(e){console.log(e)})},abort:function(file){this.cancel("3dfilesdata/test/"+file.name).then(function(){console.log("Canceled!")}).catch(function(e){console.log(e)})}}})}(),function(){angular.module("app").factory("commonVPFactory",function($rootScope){return{createStage:function(divId,initialSize,plannerData){var stage;plannerData&&plannerData.jsonString?((stage=Konva.Node.create(plannerData.jsonString,"stage")).width(initialSize.width),stage.height(initialSize.height)):stage=new Konva.Stage({container:divId,x:1,y:1,width:initialSize.width,height:initialSize.height});var getStageSize=this.getStageSize;return stage.on("windowResized",function(){var dimensions=getStageSize(divId);stage.width(dimensions.width),stage.height(dimensions.height),stage.draw()}),stage},getStageSize:function(divId){var el=document.getElementById(divId);return{height:el.clientHeight,width:el.clientWidth}},shapeId:function(){var defaultCount={shapes:{rectangle:0,square:0,circle:0,ellipse:0,calibrator:0,freeHand:0,polygon:0},markings:{line:0,singleArrow:0,doubleArrow:0,bezier:0,freehand:0,text:0,selection:0},measurement:{rectangle:0,square:0,circle:0,ellipse:0,calibrator:0,polygon:0,freeHand:0}},currentCount=defaultCount;return{load:function(count){currentCount=count},getCount:function(type,shape){return currentCount[type][shape]++,currentCount[type][shape]},get:function(){return currentCount},reset:function(){currentCount=defaultCount}}},drawState:function(){var initialDrawStates={shapes:{rectangle:!1,square:!1,circle:!1,ellipse:!1,calibrator:!1,polygon:!1},markings:{line:!1,singleArrow:!1,doubleArrow:!1,bezier:!1,freehand:!1,text:!1,selection:!1},measurement:{rectangle:!1,square:!1,circle:!1,ellipse:!1,calibrator:!1,polygon:!1,freeHand:!1}},drawStates=angular.copy(initialDrawStates);return{set:function(type){var keys=type.split(".");this.reset(),drawStates[keys[0]][keys[1]]=!0,$rootScope.$broadcast("drawStateChange",drawStates)},check:function(type){var keys=type?type.split("."):"";return type?drawStates[keys[0]][keys[1]]:drawStates},reset:function(){drawStates=angular.copy(initialDrawStates),$rootScope.$broadcast("drawStateChange",drawStates)}}},calibrationState:function(){var state={value:1,unit:"units"};return{set:function(obj){state=obj},get:function(){return state}}},actionStates:function(actions){var stack=actions||[],head=stack.length-1;return{push:function(val){stack.splice(head+1,stack.length,val),head=stack.length-1},show:function(){return stack},peek:function(){return stack[head]},undo:function(){head>-1&&(stack[head].delete(),head-=1)},redo:function(){head<stack.length&&(head=head===stack.length-1?head:head+1,stack[head].restore())}}},actionHandler:function(stage,entity,process,actionType,props){var entity=entity,stage=stage,process=process,props=props,handlers={create:{delete:function(){entity.remove(),stage.batchDraw()},restore:function(){process.add(entity),stage.batchDraw()}},move:{delete:function(){entity.position(props.start),stage.batchDraw()},restore:function(){entity.position(props.end),stage.batchDraw()}},delete:{delete:function(){process.add(entity),stage.batchDraw()},restore:function(){entity.remove(),stage.batchDraw()}},shapeProps:{delete:function(){for(var key in props.start)entity[key](props.start[key]);stage.batchDraw()},restore:function(){for(var key in props.end)entity[key](props.end[key]);stage.batchDraw()}}};return{entity:entity,restore:handlers[actionType].restore,delete:handlers[actionType].delete}},movement:function(){var start;return{add:function(position){if(start)return{start:start,end:position};start=position}}},shapePropertyHistory:function(){var start;return{add:function(props){if(start)return{start:start,end:props};start=props}}},transformers:function(layer){var layer=layer,transformers=[];return{add:function(transformer){transformers.push(transformer)},removeAll:function(){angular.forEach(transformers,function(x){x.remove()}),layer.draw()}}},dragOffset:function(stagePosition,layerOffset,stageScale){return{x:(stagePosition.x-layerOffset.x)/stageScale.x,y:(stagePosition.y-layerOffset.y)/stageScale.y}},selectedShape:function(shape){return{get:function(){return shape},set:function(val){shape=val},reset:function(){shape=void 0}}},selectionStore:function(){var selections=[];return{store:function(shapes){selections=shapes},get:function(){return selections},pull:function(shapeName){selections=selections.filter(function(shape){return shape.name()!==shapeName})},push:function(shape){var shapeNames=selections.map(function(shape){return shape.name()});shapeNames.indexOf(shape.name())>-1||selections.push(shape)},clear:function(){selections=[]}}},associations:function(){var associations={},methods={createAssociation:function(shapeId,entityId,type){var key=shapeId+"-"+entityId+"-"+Date.now();return associations[key]={shapeId:shapeId,entityId:entityId,type:type},key},getAssociations:function(key){return key?associations[key]:associations},getAssociationsForSave:function(){return Object.keys(associations).reduce(function(acc,x){var obj={shapeId:associations[x].shapeId,type:associations[x].type};switch(associations[x].type){case 1:obj.materialId=associations[x].entityId;break;case 2:obj.comboId=associations[x].entityId;break;case 3:obj.equipmentId=associations[x].entityId}return acc.push(obj),acc},[])},removeAssociation:function(key){associations[key]=void 0},reset:function(){associations={}}};return Object.freeze(methods)}}})}(),function(){angular.module("app").factory("eventsVPFactory",function($rootScope){return{windowEvents:function(windowObject){var entities=[];return windowObject.addEventListener("resize",function(ev){angular.forEach(entities,function(v){v.fire("windowResized")})}),{register:function(entity){entities.push(entity)},show:function(){}}},stageEvents:function(stage){var stage=stage,events=[];return{register:function(event,handler){stage&&(events.push(event),stage.on(event,handler))}}},shapeEvents:function(shape){var shape=shape,events=[];return{register:function(event,handler){events.indexOf(event)>-1||(events.push(event),shape.on(event,handler))}}},layerEvents:function(layer){var layer=layer,events=[];return{register:function(event,handler){events.indexOf(event)>-1||(events.push(event),layer.on(event,handler))}}}}})}(),function(){angular.module("app").factory("layersVPFactory",function($rootScope){return{createLayer:function(stage){var layer=new Konva.Layer;return stage.add(layer),layer},initiateProcess:function(stage,baseLayer){var head,processes=[];return{createProcess:function(){var group=new Konva.Group({name:"process-"+Date.now()});processes.push(group),head=processes.length-1,baseLayer.add(group)},getProcesses:function(){return processes},getCurrent:function(){return processes[head]},setCurrent:function(index){head=index},showProcess:function(index){void 0!==index?baseLayer.add(processes[index]):angular.forEach(processes,function(x){baseLayer.add(x)}),baseLayer.draw()},hideProcess:function(index){void 0!==index?processes[index].remove():angular.forEach(processes,function(x){x.remove()}),baseLayer.draw()},loadProcesses:function(processesFromJson){head=(processes=processesFromJson).length-1}}}}})}(),function(){angular.module("app").factory("shapesVPFactory",function($rootScope,eventsVPFactory,commonVPFactory,toolsVPFactory){var createdShape,shapeTools,shapeId=commonVPFactory.shapeId(),polygonOptions={init:!1,points:[],pointSet:!0};return{getShapeTools:function(obj){shapeTools=obj},loadShapeId:function(obj){shapeId.load(obj)},getShapeId:function(){return shapeId.get()},createShape:function(type,position){if(createdShape)return{start:!1,shape:createdShape};var shape,shapeProps=shapeTools.get();switch(type){case 0:shape=new Konva.Line({points:[position.x,position.y,position.x,position.y,position.x,position.y,position.x,position.y,position.x,position.y],stroke:shapeProps.stroke||"black",name:"Rect"+shapeId.getCount("shapes","rectangle"),strokeWidth:shapeProps.strokeWidth||1,fill:shapeProps.fill,draggable:!0,closed:!0});break;case 1:shape=new Konva.Ellipse({x:position.x,y:position.y,radius:{x:1,y:1},stroke:shapeProps.stroke||"black",name:"Ellipse"+shapeId.getCount("shapes","ellipse"),strokeWidth:shapeProps.strokeWidth||1,fill:shapeProps.fill,draggable:!0})}return{start:!0,shape:createdShape=shape}},drawShape:function(position,shapeLock,misc){if(createdShape)switch(createdShape.className){case"Line":this.drawRectangle(position,createdShape,shapeLock,misc);break;case"Ellipse":createdShape.radius({x:Math.abs(position.x-createdShape.x()),y:Math.abs(shapeLock?position.x-createdShape.x():position.y-createdShape.y())})}},drawRectangle:function(position,shape,shapelock,misc){var points=shape.points();switch(points[4]=position.x,points[5]=shapelock?Math.abs(points[1]+(position.x-points[0])):position.y,points[7]=shapelock?Math.abs(points[1]+(position.x-points[0])):position.y,points[2]=position.x,misc){case"grabber":shape.dash([10,10]);break;case"wrapper":shape.stroke("grey"),shape.draggable(!1)}shape.points(points)},destroyShape:function(){createdShape=void 0,polygonOptions={init:!1,points:[],pointSet:!0}},cancelDrawing:function(selection){var selectionPoints=createdShape.points();return document.body.style.cursor="default",createdShape&&createdShape.remove(),createdShape=void 0,polygonOptions={init:!1,points:[],pointSet:!0},selectionPoints},createPolygon:function(position,freeHand,freeHandMarker){if(!polygonOptions.init&&!createdShape){var shapeProps=shapeTools.get();return polygonOptions.points=[position.x,position.y],createdShape=freeHandMarker?new Konva.Line({name:"markerFreeHand"+shapeId.getCount("markings","freehand"),points:polygonOptions.points,fill:shapeProps.fill,stroke:shapeProps.stroke||"black",strokeWidth:shapeProps.strokeWidth||1}):new Konva.Line({name:freeHand?"freeHand"+shapeId.getCount("shapes","freeHand"):"polygon"+shapeId.getCount("shapes","polygon"),points:polygonOptions.points,fill:shapeProps.fill,stroke:shapeProps.stroke||"black",strokeWidth:shapeProps.strokeWidth||1}),polygonOptions.init=!0,{start:!0,polygon:createdShape}}return freeHandMarker?(polygonOptions.pointSet=!0,createdShape.draggable(!0),{start:!1,polygon:createdShape}):this.checkThreshold(position)?(polygonOptions.points.splice(-2),polygonOptions.points.push(polygonOptions.points[0],polygonOptions.points[1]),createdShape.points(polygonOptions.points),polygonOptions.pointSet=!0,createdShape.closed(!0),createdShape.draggable(!0),{start:!1,polygon:createdShape}):(polygonOptions.points.splice(-2),polygonOptions.points.push(position.x,position.y),createdShape.points(polygonOptions.points),void(polygonOptions.pointSet=!0))},drawPolygon:function(position,freeHand){createdShape&&(freeHand?(polygonOptions.points.push(position.x,position.y),createdShape.points(polygonOptions.points)):polygonOptions.pointSet?(polygonOptions.points.push(position.x,position.y),polygonOptions.pointSet=!1,createdShape.points(polygonOptions.points)):(polygonOptions.points[polygonOptions.points.length-2]=position.x,polygonOptions.points[polygonOptions.points.length-1]=position.y,createdShape.points(polygonOptions.points)))},createLine:function(position,type){if(createdShape)return{start:!1,line:createdShape};var line,shapeProps=shapeTools.get();switch(type){case"line":line=new Konva.Line({name:"lineSimple"+shapeId.getCount("markings","line"),points:[position.x,position.y],strokeWidth:shapeProps.strokeWidth||1,stroke:shapeProps.stroke||"black",draggable:!0});break;case"singleArrow":line=new Konva.Arrow({name:"lineArrow"+shapeId.getCount("markings","singleArrow"),points:[position.x,position.y],strokeWidth:1,stroke:shapeProps.stroke||"black",fill:shapeProps.fill||"black",draggable:!0,pointerLength:10,pointerWidth:10});break;case"doubleArrow":line=new Konva.Arrow({name:"lineArrowDouble"+shapeId.getCount("markings","doubleArrow"),points:[position.x,position.y],strokeWidth:shapeProps.strokeWidth||1,stroke:shapeProps.stroke||"black",fill:shapeProps.fill||"black",draggable:!0,pointerLength:10,pointerWidth:10,pointerAtBeginning:!0})}return{start:!0,line:createdShape=line}},drawLine:function(position){if(createdShape){var points=createdShape.points();points[2]=position.x,points[3]=position.y,createdShape.points(points)}},createBezierLine:function(position){if(createdShape){var createdPoints=createdShape.points(),q=[.5*(createdPoints[2]-createdPoints[0])+createdPoints[0],.5*(createdPoints[3]-createdPoints[1])+createdPoints[1]];createdPoints[2],createdPoints[0],createdPoints[0],createdPoints[3],createdPoints[1],createdPoints[1],createdPoints[2],createdPoints[0],createdPoints[0],createdPoints[3],createdPoints[1],createdPoints[1];return createdPoints.push(q[0],q[1]),createdShape.points(createdPoints),createdShape.tension(1.1),{start:!1,line:createdShape}}var shapeProps=shapeTools.get(),bezier=new Konva.Line({name:"bezier"+shapeId.getCount("markings","bezier"),lineJoin:"round",points:[position.x,position.y],strokeWidth:shapeProps.strokeWidth||1,stroke:shapeProps.stroke||"black",draggable:!0});return{start:!0,line:createdShape=bezier}},drawBezierLine:function(position){if(createdShape){var points=createdShape.points();points[2]=position.x,points[3]=position.y,createdShape.points(points)}},createText:function(props){var textShape=new Konva.Text({x:props.position.x,y:props.position.y,name:"text",text:"Placeholder text",width:props.width,fontSize:16,fontFamily:"Calibri",fill:"black"});return textShape},createTextGroup:function(){var textGroup=new Konva.Group({name:"textGroup"+shapeId.getCount("markings","text"),draggable:!0});return textGroup},calibrator:function(stage,layer){var line,points=[],isDone=!1,init=!0;return function(position,set,kill){if(kill)return line.destroy(),void layer.draw();position={x:position.x/stage.scale().x,y:position.y/stage.scale().y},isDone||(init&&set?(points.push(position.x,position.y),line=new Konva.Line({points:points,fill:"grey",stroke:"black",strokeWidth:1,dash:[5,1]}),init=!1,layer.add(line)):init||(set?(points[2]=position.x,points[3]=position.y,line.points(points),isDone=!0,$rootScope.$broadcast("calibrated",line)):(points[2]=position.x,points[3]=position.y,line.points(points)))),layer.draw()}},checkThreshold:function(position){var xUpperThreshold=polygonOptions.points[0]+10,yUpperThreshold=polygonOptions.points[1]+10,xLowerThreshold=polygonOptions.points[0]-10,yLowerThreshold=polygonOptions.points[1]-10;return xUpperThreshold>position.x&&xLowerThreshold<position.x&&yUpperThreshold>position.y&&yLowerThreshold<position.y},extractAllShapes:function(layer){var allShapes=layer.find("Group").reduce(function(acc,x){return/process*/.test(x.name())&&angular.forEach(x.getChildren(),function(child){acc.push(child)}),acc},[]);return allShapes},selectShapes:function(layer,points){var allShapes=this.extractAllShapes(layer),min=(points[0],points[1],points[4],points[5],{x:points[0]>points[4]?points[4]:points[0],y:points[1]>points[5]?points[5]:points[1]}),max={x:points[0]<points[4]?points[4]:points[0],y:points[1]<points[5]?points[5]:points[1]},checkSelection=this.checkSelection,selectedShapes=allShapes.filter(function(x){var shapeName=x.name();if(/Rect*/.test(shapeName)||/polygon*/.test(shapeName)||/freeHand*/.test(shapeName)||/markerFreeHand/.test(shapeName)){for(var points=x.points(),positionOffset=x.position(),vertices=[],i=0;i<points.length-2;i+=2)vertices.push([points[i]+positionOffset.x,points[i+1]+positionOffset.y]);return checkSelection({min:min,max:max},vertices,"rectangle")}if(/line*/.test(shapeName)){for(var points=x.points(),positionOffset=x.position(),vertices=[],i=0;i<points.length;i+=2)vertices.push([points[i]+positionOffset.x,points[i+1]+positionOffset.y]);return checkSelection({min:min,max:max},vertices,"rectangle")}return!!/Ellipse*/.test(shapeName)&&checkSelection({min:min,max:max},x.position(),"ellipse")});return selectedShapes},checkSelection:function(range,prop,type){if("rectangle"===type){for(var i=0;i<prop.length;i++)if(prop[i][0]>=range.min.x&&prop[i][0]<=range.max.x&&prop[i][1]>=range.min.y&&prop[i][1]<=range.max.y)return!0;return!1}if("ellipse"===type)return prop.x>=range.min.x&&prop.x<=range.max.x&&prop.y>=range.min.y&&prop.y<=range.max.y}}})}(),function(){angular.module("app").factory("toolsVPFactory",function($rootScope,eventsVPFactory){return{polygonArea:function(points,scale){for(var result,det=0,chunkedArray=[],chunk=[],i=0;i<points.length;i++)chunk.length<2?chunk.push(points[i]):(chunkedArray.push({x:chunk[0],y:chunk[1]}),(chunk=[]).push(points[i]));var l=chunkedArray.length;chunkedArray[0]!=chunkedArray[chunkedArray.length-1]&&(chunkedArray=chunkedArray.concat(chunkedArray[0]));for(var i=0;i<l;i++)det+=chunkedArray[i].x*chunkedArray[i+1].y-chunkedArray[i].y*chunkedArray[i+1].x;return result=scale?Math.abs(det)/2*scale:Math.abs(det)/2,Number.parseFloat(result).toFixed(2)},rectangleArea:function(height,width,scale){var area=height*width*scale;return area},ellipseArea:function(radii,scale){var area=Math.PI*radii.x*radii.y,result=scale?area*scale:area;return Number.parseFloat(result).toFixed(2)},ellipseTransfomer:function(stage,layer,ellipse){var vertices=[],group=new Konva.Group({name:"transformers"});return{set:function(radius){var ellipsePosition=ellipse.position();vertices.push([ellipsePosition.x-radius.x,ellipsePosition.y],[ellipsePosition.x+radius.x,ellipsePosition.y],[ellipsePosition.x,ellipsePosition.y+radius.y],[ellipsePosition.x,ellipsePosition.y-radius.y]);var inc=0;return angular.forEach(vertices,function(x,$index){var circle=new Konva.Circle({x:x[0],y:x[1],radius:5/layer.scaleX(),name:($index+inc).toString()+","+($index+inc+1).toString(),fill:"white",stroke:"black",strokeWidth:3/layer.scaleX(),dragBoundFunc:function(pos){return{x:$index>1?this.getAbsolutePosition().x:pos.x,y:$index<=1?this.getAbsolutePosition().y:pos.y}},draggable:!0});inc++;var circleEvent=eventsVPFactory.shapeEvents(circle);circleEvent.register("dragmove.transformer",function(){var previousRadius=ellipse.radius(),selectedVertex=circle.name(),isNegative=!1;switch(selectedVertex){case"0,1":isNegative=ellipse.position().x-circle.x()<0,ellipse.radius({x:Math.abs(ellipse.position().x-circle.x()),y:previousRadius.y}),angular.forEach(group.children,function(z){"2,3"===z.name()&&(isNegative?z.x(ellipse.position().x-ellipse.radius().x):z.x(ellipse.position().x+ellipse.radius().x))});break;case"2,3":isNegative=ellipse.position().x-circle.x()<0,ellipse.radius({x:Math.abs(ellipse.position().x-circle.x()),y:previousRadius.y}),angular.forEach(group.children,function(z){"0,1"===z.name()&&(isNegative?z.x(ellipse.position().x-ellipse.radius().x):z.x(ellipse.position().x+ellipse.radius().x))});break;case"4,5":isNegative=ellipse.position().y-circle.y()<0,ellipse.radius({x:previousRadius.x,y:Math.abs(ellipse.position().y-circle.y())}),angular.forEach(group.children,function(z){"6,7"===z.name()&&(isNegative?z.y(ellipse.position().y-ellipse.radius().y):z.y(ellipse.position().y+ellipse.radius().y))});break;case"6,7":isNegative=ellipse.position().y-circle.y()<0,ellipse.radius({x:previousRadius.x,y:Math.abs(ellipse.position().y-circle.y())}),angular.forEach(group.children,function(z){"4,5"===z.name()&&(isNegative?z.y(ellipse.position().y-ellipse.radius().y):z.y(ellipse.position().y+ellipse.radius().y))})}layer.draw(),ellipse.fire("transformEllipse")}),circleEvent.register("scaleOnZoom",function(e){e.target.radius(5/layer.scaleX()),e.target.strokeWidth(3/layer.scaleX()),layer.draw()}),circleEvent.register("mouseenter",function(e){document.body.style.cursor="move"}),circleEvent.register("mouseleave",function(e){document.body.style.cursor="default"}),group.add(circle)}),ellipse.fire("transformEllipse"),!0,layer.add(group),group},getGroup:function(){return group},destroy:function(){group.destroy()}}},customTransformer:function(stage,layer,polygon,isRectangle){var vertices=[],group=new Konva.Group({name:"transformers"}),polygon=polygon;return{set:function(points){for(var i=0;i<points.length-2;i+=2)vertices.push([points[i],points[i+1]]);var inc=0;return angular.forEach(vertices,function(x,$index){var circle=new Konva.Circle({x:x[0],y:x[1],radius:5/layer.scaleX(),name:($index+inc).toString()+","+($index+inc+1).toString(),fill:"white",stroke:"black",strokeWidth:3/layer.scaleX(),draggable:!0});inc++;var circleEvent=eventsVPFactory.shapeEvents(circle);circleEvent.register("dragmove.transformer",function(e){if(isRectangle){var selectedVertex=circle.name();switch(selectedVertex){case"0,1":vertices[0]=[circle.x(),circle.y()],vertices[1][1]=circle.y(),vertices[3][0]=circle.x(),angular.forEach(group.children,function(z){"6,7"===z.name()&&z.x(circle.x()),"2,3"===z.name()&&z.y(circle.y())});break;case"2,3":vertices[1]=[circle.x(),circle.y()],vertices[0][1]=circle.y(),vertices[2][0]=circle.x(),angular.forEach(group.children,function(z){"4,5"===z.name()&&z.x(circle.x()),"0,1"===z.name()&&z.y(circle.y())});break;case"4,5":vertices[2]=[circle.x(),circle.y()],vertices[3][1]=circle.y(),vertices[1][0]=circle.x(),angular.forEach(group.children,function(z){"2,3"===z.name()&&z.x(circle.x()),"6,7"===z.name()&&z.y(circle.y())});break;case"6,7":vertices[3]=[circle.x(),circle.y()],vertices[2][1]=circle.y(),vertices[0][0]=circle.x(),angular.forEach(group.children,function(z){"0,1"===z.name()&&z.x(circle.x()),"4,5"===z.name()&&z.y(circle.y())})}}else{var temp=[];angular.forEach(group.children,function(x){temp.push([x.x(),x.y()])}),vertices=angular.copy(temp)}polygon.fire("transformPolygon")}),circleEvent.register("scaleOnZoom",function(e){e.target.radius(5/layer.scaleX()),e.target.strokeWidth(3/layer.scaleX()),layer.draw()}),circleEvent.register("mouseenter",function(e){document.body.style.cursor="move"}),circleEvent.register("mouseleave",function(e){document.body.style.cursor="default"}),group.add(circle)}),!0,layer.add(group),group},update:function(offset){group.x(offset.x),group.y(offset.y),layer.draw()},getPoints:function(){return vertices.reduce(function(acc,x,i){return acc.push(x[0],x[1]),i===vertices.length-1&&acc.push(vertices[0],vertices[1]),acc},[])},getGroup:function(){return group}}},bezierTransformer:function(stage,layer,bezier){var vertices=[],group=new Konva.Group({name:"transformers"}),bezier=bezier;return{set:function(points){for(var i=0;i<points.length;i+=2)vertices.push([points[i],points[i+1]]);var inc=0;return angular.forEach(vertices,function(x,$index){var circle=new Konva.Circle({x:x[0],y:x[1],radius:5/layer.scaleX(),name:($index+inc).toString()+","+($index+inc+1).toString(),fill:"white",stroke:"black",strokeWidth:3/layer.scaleX(),draggable:!0});inc++;var circleEvent=eventsVPFactory.shapeEvents(circle);circleEvent.register("dragmove.transformer",function(e){var temp=[];angular.forEach(group.children,function(x){temp.push([x.x(),x.y()])}),vertices=angular.copy(temp),bezier.fire("transformBezier")}),circleEvent.register("scaleOnZoom",function(e){e.target.radius(5/layer.scaleX()),e.target.strokeWidth(3/layer.scaleX()),layer.draw()}),circleEvent.register("mouseenter",function(e){document.body.style.cursor="move"}),circleEvent.register("mouseleave",function(e){document.body.style.cursor="default"}),group.add(circle)}),!0,layer.add(group),group},update:function(offset){group.x(offset.x),group.y(offset.y),layer.draw()},getPoints:function(){return vertices.reduce(function(acc,x,i){return acc.push(x[0],x[1]),i===vertices.length-1&&acc.push(vertices[0],vertices[1]),acc},[])},getGroup:function(){return group}}},scaleTransformerBasedOnZoom:function(baseLayer){var transformerGroup=baseLayer.find(".transformers");transformerGroup.length&&angular.forEach(transformerGroup[0].getChildren(),function(child){child.fire("scaleOnZoom")})},metrics:function(){var shapeInfo;return{setShapeInfo:function(info){shapeInfo=info},getShapeInfo:function(){return shapeInfo}}},colorPicker:function(){var props={stroke:"black",opacity:1,fill:"rgba(255, 255, 255, 0)",strokeWidth:1};return{set:function(obj){props=Object.assign(props,obj)},get:function(prop){return prop?props[prop]:props}}}}})}(),function(){angular.module("app").controller("_3dDashboardCtrl",function($scope,$timeout,authFactory,$state,apiFactory,Notification,localStorageService,globals,NgMap){this.loggedIn=!0;var logout=globals.logout;globals.userStore,globals.throttler;if(!authFactory.checkUser())return logout(),void(this.loggedIn=!1);this.logout=function(){logout()}})}(),function(){angular.module("app").controller("_3dviewerCtrl",function($scope,$timeout,authFactory,$state,apiFactory,Notification,NgMap,globals,localStorageService){var logout=globals.logout;authFactory.checkUser()||logout();this.logout=function(){logout()}})}(),function(){angular.module("app").controller("billingArchiveCtrl",function($scope,$timeout,$location,authFactory,$state,apiFactory,Notification,globals){var logout=globals.logout,userStore=globals.userStore;if(!authFactory.checkUser())return void logout();this.userData=userStore.get(),this.logout=function(){logout()},"/payroll"==$location.path()&&$(".payrollMenu").css("display","block !important");$(".payrollList").DataTable()})}(),function(){angular.module("app").controller("calculationCtrl",function($scope,$timeout,$location,authFactory,$state,apiFactory,Notification,globals){var logout=globals.logout,userStore=globals.userStore;if(!authFactory.checkUser())return void logout();this.userData=userStore.get(),this.logout=function(){logout()},$(".payrollList").DataTable()})}(),function(){angular.module("app").controller("calenderCtrl",function($scope,$timeout,authFactory,$state,apiFactory,Notification,globals,Upload){$scope.invitees=[{id:"1",img:"/assets/images/user_pic2.png",name:"Lisa Guerrero",lb:!0,status:!1},{id:"2",img:"/assets/images/user_pic3.png",name:"Peter Gregor",lb:!1,status:!1},{id:"3",img:"/assets/images/user_pic2.png",name:"Lisa Guerrero",lb:!1,status:!1},{id:"4",img:"/assets/images/user_pic3.png",name:"Peter Gregor",lb:!1,status:!1}];var logout=globals.logout,userStore=globals.userStore;if(!authFactory.checkUser())return void logout();this.logout=function(){logout()},this.userData=userStore.get()})}(),function(){angular.module("app").controller("clientsCtrl",function($scope,$timeout,authFactory,$state,apiFactory,Notification,NgMap,globals,localStorageService){var vm=this,logout=globals.logout,debounce=globals.debounce,userStore=globals.userStore;authFactory.checkUser()||logout();vm.userData=userStore.get(),vm.logout=function(){logout()},$scope.$watch("vm.clientData.clientContact.dialCode",function(value){$("a.item-selected span").removeClass("glyphicon glyphicon-remove"),$("a.item-selected span").addClass("fas fa-times mr-3")}),$(".clientsList").DataTable(),$scope.activeJustified=0,vm.currentPage=1,vm.toggleObj={toggleClient:{clientName:!1,phoneNo:!1,email:!1,primaryAdd:!1,created:!0}},vm.searchText="",vm.sortclients=function(type,resource){void 0===vm.toggleObj[resource][type]?vm.toggleObj[resource][type]=!0:vm.toggleObj[resource][type]=!vm.toggleObj[resource][type],apiFactory.listAllClients({page:1,chunk:10,sort:type,search:vm.searchText,sortType:vm.toggleObj[resource][type]}).then(function(resp){vm.allClients=resp.data.list,vm.clientCount=resp.data.total,$timeout(function(){$("#pagination").pagination({items:vm.clientCount,itemsOnPage:10,cssStyle:"light-theme",hrefTextPrefix:"#",ordering:!1,currentPage:1,onPageClick:function(page,event){event.preventDefault(),apiFactory.listAllClients({page:page,chunk:10,sort:type,sortType:vm.toggleObj[type]}).then(function(resp){vm.allClients=resp.data.list}).catch(function(e){console.log(e)})}})})}).catch(function(e){console.log(e)})},vm.searchText="";var searchDebounce=debounce(250);vm.searchClients=function(text){searchDebounce(function(){apiFactory.listAllClients({page:1,chunk:10,search:text,sort:"created",sortType:!1}).then(function(resp){vm.allClients=resp.data.list,vm.clientCount=resp.data.total,$timeout(function(){$("#pagination").pagination({items:vm.clientCount,itemsOnPage:10,cssStyle:"light-theme",hrefTextPrefix:"#",ordering:!1,currentPage:1,onPageClick:function(page,event){event.preventDefault(),apiFactory.listAllClients({page:page,chunk:10,sort:type,sortType:vm.toggleObj[resource][type]}).then(function(resp){vm.allClients=resp.data.list}).catch(function(e){console.log(e)})}})})}).catch(function(e){console.log(e)})},[text])},vm.sortclients("created","toggleClient"),vm.dtOptions={paging:!1,info:!1,ordering:!1,searching:!1},globals.getCountryCode().then(function(resp){vm.getCountryCode=resp.data,vm.loadCountryCode=function($query){return new Promise(function(resolve,reject){resolve(resp.data)})}}),globals.getIndustry().then(function(resp){vm.getIndustries=resp.data,vm.loadIndustry=function($query){return new Promise(function(resolve,reject){resolve(resp.data)})}}),globals.getCurrency().then(function(resp){vm.getCurrencies=resp.data,vm.loadCurrency=function($query){return new Promise(function(resolve,reject){resolve(resp.data)})}}),vm.addNewClient=function(valid,clientdata){var client={},industries=[];null==clientdata&&Notification.error("Cannot save empty record"),void 0===clientdata.clientName?Notification.error("Please enter name of client"):client.clientName=clientdata.clientName,void 0===clientdata.clientContact?Notification.error("Please enter phone details"):client.clientContact={dialCode:clientdata.clientContact.dialCode[0].dialCode,phoneNumber:clientdata.clientContact.phoneNumber},null!=clientdata.description&&(client.description=clientdata.description),null!=clientdata.yearFounded&&(client.yearFounded=clientdata.yearFounded),null!=clientdata.clientWebsite&&(client.clientWebsite=clientdata.clientWebsite),null!=clientdata.email&&(client.email=clientdata.email),null!=clientdata.industry&&(clientdata.industry.forEach(function(element){industries.push(element.type)}),client.industry=industries),null!=clientdata.clientContactPerson&&(clientdata.clientContactPerson.dialCode?(console.log("dial code exist"),client.clientContactPerson={firstName:clientdata.clientContactPerson.firstName,middleName:clientdata.clientContactPerson.middleName,lastName:clientdata.clientContactPerson.lastName,email:clientdata.clientContactPerson.email,mobile:{dialCode:clientdata.clientContactPerson.dialCode[0].dialCode,phoneNumber:clientdata.clientContactPerson.phoneNumber}}):client.clientContactPerson={firstName:clientdata.clientContactPerson.firstName,middleName:clientdata.clientContactPerson.middleName,lastName:clientdata.clientContactPerson.lastName,email:clientdata.clientContactPerson.email,mobile:{phoneNumber:clientdata.clientContactPerson.phoneNumber}}),null!=clientdata.annualRevenue&&(clientdata.annualRevenue.currencyCode?client.annualRevenue={value:clientdata.annualRevenue.value,currencyCode:clientdata.annualRevenue.currencyCode[0].cc}:client.annualRevenue={value:clientdata.annualRevenue.value}),null!=clientdata.address2&&(clientdata.address2.countryCode?client.address2={line1:clientdata.address2.line1,line2:clientdata.address2.line2,line3:clientdata.address2.line3,city:clientdata.address2.city,postalCode:clientdata.address2.postalCode,countryCode:clientdata.address2.countryCode[0].code}:client.address2={line1:clientdata.address2.line1,line2:clientdata.address2.line2,line3:clientdata.address2.line3,city:clientdata.address2.city,postalCode:clientdata.address2.postalCode}),null!=clientdata.address1&&(clientdata.address1.countryCode?client.address1={line1:clientdata.address1.line1,line2:clientdata.address1.line2,line3:clientdata.address1.line3,city:clientdata.address1.city,postalCode:clientdata.address1.postalCode,countryCode:clientdata.address1.countryCode[0].code}:client.address1={line1:clientdata.address1.line1,line2:clientdata.address1.line2,line3:clientdata.address1.line3,city:clientdata.address1.city,postalCode:clientdata.address1.postalCode}),apiFactory.createClient(client).then(function(resp){Notification.success("Issue has been saved successfully"),vm.clientData={},$("#addClient").modal("hide"),vm.sortclients("created","toggleClient")}).catch(function(e){console.log(e),Notification.error("Something went wrong")})}})}(),function(){angular.module("app").controller("comboMaterialViewCtrl",function($scope,$timeout,authFactory,$state,$stateParams,apiFactory,Notification,globals,$location,Upload){var vm=this,logout=globals.logout;globals.userStore;if(!authFactory.checkUser())return void logout();function getComboMatDetail(){apiFactory.getComboMaterialById(vm.comboId).then(function(resp){vm.comboData=resp.data.data,vm.comboMmatrialName=vm.comboData.name,vm.description=vm.comboData.description,vm.uom=vm.comboData.unit,console.log(vm.comboData),angular.forEach(vm.comboData.comboMaterialList,function(item){vm.materialCost=item.materialId.currentRate.materialCost.value*item.quantity,vm.materialTotal=vm.materialTotal+vm.materialCost,vm.rooferCost=item.materialId.currentRate.rooferCost.value*item.quantity,vm.rooferTotal=vm.rooferTotal+vm.rooferCost}),console.log(vm.comboData),$timeout(imgSlider,1500)}).catch(function(e){console.log(e)})}function imgSlider(){$("#comboCarousel").flexslider({animation:"slide",controlNav:!1,animationLoop:!1,slideshow:!1,itemWidth:75,itemMargin:5,asNavFor:"#comboSlider"}),$("#comboSlider").flexslider({animation:"slide",controlNav:!1,animationLoop:!1,slideshow:!1,sync:"#comboCarousel"})}vm.editFlag=!1,vm.comboId=$stateParams.id,vm.mUnits=globals.mUnits,vm.removedFiles=[],vm.materialTotal=0,vm.rooferTotal=0,getComboMatDetail(),vm.removeImg=function(img){vm.removedFiles.push(vm.matrialData.files[img]._id),vm.matrialData.files.splice(img,1)},vm.editComboMaterialList=function(item){vm.materialList=vm.comboData.comboMaterialList[item],vm.materialQty=vm.materialList.quantity,vm.selectedMaterialCost=vm.materialQty*vm.materialList.materialId.currentRate.materialCost.value,vm.selectedMaterialRooferCost=vm.materialQty*vm.materialList.materialId.currentRate.rooferCost.value,0!=vm.materialList.percentageAdditions.length&&null!=vm.materialList.percentageAdditions.length?vm.percentageAddition=vm.materialList.percentageAdditions:vm.percentageAddition=[],vm.materialIndex=item,$("#editComboMaterial").modal("show"),"new"==item?$("#editComboMaterial .modal-header h5").text("Add Combo Material Details"):$("#editComboMaterial .modal-header h5").text("Update Combo Material Details")},vm.addPercentageValue=function(){vm.percentageAddition.push({percentageType:"",value:""})},vm.removePercentageAddition=function(index){vm.percentageAddition.splice(index,1)},vm.fileUpdated=function(files,event){var fileObj=event.target.files;vm.fileNames=Object.keys(fileObj).map(function(x){return fileObj[x].name})},vm.editComboMaterial=function(val){if(1==val)vm.editFlag=!0,$(".materialDetail textarea, .materialDetail input, .materialDetail select").attr("disabled",!1),console.log(vm.comboData.comboMaterialList);else if(2==val){$(".materialDetail textarea, .materialDetail input, .materialDetail select").attr("disabled",!0),vm.editFlag=!1;var comboListData={comboListArray:vm.comboData.comboMaterialList},comboMaterialData={name:vm.comboMmatrialName,description:vm.description,unit:vm.uom,files:vm.inputFiles};console.log(comboListData),apiFactory.updateComboMaterialList(vm.comboData._id,comboListData).then(function(resp){console.log(resp),apiFactory.updateComboMaterial(vm.comboData._id,comboMaterialData).then(function(resp){console.log(resp),Notification.success(resp.data.message),getComboMatDetail(),vm.fileNames=[],$timeout(imgSlider,1e3)}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}},vm.updateCombo=function(item,data){vm.comboData.comboMaterialList[item].quantity=vm.materialQty,vm.comboData.comboMaterialList[item].percentageAdditions=data,console.log(vm.comboData.comboMaterialList[item].percentageAdditions),$("#editComboMaterial").modal("hide")}})}(),function(){angular.module("app").controller("createProjectCtrl",function($scope,$timeout,authFactory,$state,apiFactory,Notification,NgMap,globals){var vm=this,logout=globals.logout;globals.userStore,globals.companyStore;authFactory.checkUser()||logout();if(!authFactory.checkPrivilege("project","createProject"))return Notification.warning("Insufficient permissions"),void $state.go("dashboard");vm.clients=[],$scope.$watch("vm.projectData.client",function(value){$("a.item-selected span").removeClass("glyphicon glyphicon-remove"),$("a.item-selected span").addClass("fas fa-times mr-3")}),Promise.all([apiFactory.listAllClients(),apiFactory.getHierarchyTemplate()]).then(function(resp){vm.clients=resp[0].data.list,vm.templateList=resp[1].data.data;vm.templateList.filter(function(item){return"5b8910fbdd6fa81a20bfe745"==item._id});vm.filemanagerTemplate="5b8910fbdd6fa81a20bfe745"}).catch(function(e){console.log(e)}),vm.gmap={url:"https://maps.googleapis.com/maps/api/js?key=AIzaSyA3MIA-mKWq_60q1K0zOHguraxT-1QPxNU&libraries=places",markers:[],styles:[],center:"41,-87",zoom:3},vm.projectData={address:{}},$scope.select2Options={allowClear:!0},vm.placeMarker=function(map){var placeData=this.getPlace().geometry.location;vm.gmap.markers=[[placeData.lat(),placeData.lng()]],vm.gmap.zoom=15,vm.gmap.center=placeData.lat()+","+placeData.lng(),vm.projectData.address.loc={coordinates:[placeData.lat(),placeData.lng()]}},vm.addProject=function(formData){formData.client=formData.client._id,apiFactory.createProject(formData).then(function(resp){Notification.success("Project has been created successfully");var payload={projectId:resp.data._id,templateId:resp.data._id&&vm.filemanagerTemplate&&"false"!=vm.filemanagerTemplate?vm.filemanagerTemplate:"5b8910fbdd6fa81a20bfe745"};apiFactory.loadHierarchyTree(payload).then(function(resp){console.log(resp.data.message)}).catch(function(e){console.log(e)}),console.log("projectid",resp.data._id),$state.go("dashboard")}).catch(function(e){console.log(e),Notification.error("Something went wrong")})},vm.updateMarker=function(){var pos=this.getPosition();vm.projectData.address.loc={coordinates:[pos.lat(),pos.lng()]}},NgMap.getMap().then(function(map){vm.map=map,map.setOptions({styles:vm.gmap.styles,disableDefaultUI:!0,zoomControl:!0,zoom:1,center:{lat:0,lng:0}})}),vm.logout=function(){logout()},vm.assignTemplate=function(){vm.filemanagerTemplate=vm.selectedTemplate._id,$("#assignTemplateModal").modal("hide")}})}(),function(){angular.module("app").controller("dashboardCtrl",function($scope,$timeout,authFactory,$state,$window,$location,apiFactory,Notification,localStorageService,globals,NgMap){var vm=this;vm.loggedIn=!0;var logout=globals.logout,userStore=globals.userStore,companyStore=globals.companyStore,projectStore=globals.projectStore;globals.throttler;if(!authFactory.checkUser())return logout(),void(vm.loggedIn=!1);vm.loader=!1,vm.userData=userStore.get(),vm.clientUrl="https://res.cloudinary.com/dktnhmsjx/image/upload/v1486129234/default/company.png",vm.gmap={url:"https://maps.googleapis.com/maps/api/js?key=AIzaSyA3MIA-mKWq_60q1K0zOHguraxT-1QPxNU",styles:[{elementType:"geometry",stylers:[{color:"#212121"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{elementType:"labels.text.stroke",stylers:[{color:"#212121"}]},{featureType:"administrative",elementType:"geometry",stylers:[{color:"#757575"}]},{featureType:"administrative.country",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"administrative.land_parcel",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#181818"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"poi.park",elementType:"labels.text.stroke",stylers:[{color:"#1b1b1b"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#2c2c2c"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#8a8a8a"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#373737"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#3c3c3c"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#4e4e4e"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#3d3d3d"}]}],markers:[]},Promise.all([apiFactory.getCompanyById(vm.userData.companyId),apiFactory.listAllProjects(),apiFactory.listAllClients()]).then(function(data){var projectList,mxLat,mxLng,mnLat,mnLng,markers;companyStore.set(data[0].data),vm.gmap.markers=(projectList=data[1].data.list,mxLat=0,mxLng=0,mnLat=0,mnLng=0,markers=[],projectList.forEach(function(element){if(element.address&&(0!=element.address.loc.coordinates[0]||0!=element.address.loc.coordinates[1])){var mrkr={id:element._id,latitude:element.address.loc.coordinates[1],longitude:element.address.loc.coordinates[0]};mxLat=mxLat>mrkr.latitude?mrkr.latitude:mxLat,mnLat=mnLat<mrkr.latitude?mrkr.latitude:mnLat,mxLng=mxLng>mrkr.longitude?mrkr.longitude:mxLng,mnLng=mnLng<mrkr.longitude?mrkr.longitude:mnLng,markers.push([mrkr.latitude,mrkr.longitude])}}),markers),vm.dashboardData={company:data[0].data,projects:data[1].data.list,clients:data[2].data.list}}).catch(function(e){console.log(e)}),NgMap.getMap().then(function(map){map.setOptions({styles:vm.gmap.styles,disableDefaultUI:!0,zoom:1,center:{lat:0,lng:0}})});var enabled=!0,chunkSize=5;if(vm.projectSearch="",vm.enableLazyLoad=!1,vm.sortParams={field:"created",type:!1},vm.projectName="PROJECT",$scope.getBookmarkedProject=function(){apiFactory.getBookmarks().then(function(resp){vm.bookmarkedProject=resp.data.bookmarks,vm.bookmarkedProjectList=angular.copy(vm.bookmarkedProject),vm.bookmarkedProjectList.push({_id:"others",projectName:"All Project List"})}).catch(function(e){console.log(e)})},$scope.getBookmarkedProject(),vm.loadProjectFiles=function(id){apiFactory.showProjectFiles(id,5).then(function(resp){vm.projectFiles=resp.data.data})},vm.bookmarkFlag=!1,vm.selectedProject=function(project){"others"==project._id?apiFactory.listAllProjects().then(function(resp){vm.projectPickerData=resp.data.list,$("#chooseProject").modal("show")}).catch(function(e){console.log(e)}):(vm.bookmarkFlag=!1,angular.forEach(vm.bookmarkedProject,function(x){if(x._id==project._id)return vm.bookmarkFlag=!0}),vm.projectName=project.projectName,projectStore.set(project),vm.loadProjectFiles(project._id))},vm.chooseProject=function(project){var index=vm.bookmarkedProjectList.findIndex(function(x){return"others"==x._id});vm.bookmarkedProjectList.splice(index,1);var alreadyExist=!0;angular.forEach(vm.bookmarkedProject,function(x){x._id==project._id&&(alreadyExist=!1)}),alreadyExist&&vm.bookmarkedProjectList.push(project),vm.bookmarkedProjectList.push({_id:"others",projectName:"All Project List"}),vm.project=project,vm.projectName=project.projectName,vm.bookmarkFlag=!1,projectStore.set(project),$("#chooseProject").modal("hide")},localStorageService.get("currentProject")){var currentProject=localStorageService.get("currentProject");vm.project=currentProject,vm.projectName=currentProject.projectName,vm.loadProjectFiles(vm.project._id);var alreadyBookmarked=!1;angular.forEach(vm.bookmarkedProject,function(x){if(x._id==currentProject._id)return alreadyBookmarked=!0}),alreadyBookmarked||$timeout(function(){var index=vm.bookmarkedProjectList.findIndex(function(x){return"others"==x._id});vm.bookmarkedProjectList.splice(index,1),vm.bookmarkedProjectList.push(currentProject),vm.bookmarkedProjectList.push({_id:"others",projectName:"All Project List"})},1500)}$("#chooseProject").on("hide.bs.modal",function(){vm.enableLazyLoad=!1}),vm.closeProjectPicker=function(){$("#chooseProject").modal("hide"),vm.project=null,projectStore.set("")},vm.checkBookmark=function(data){var bookmark=!0,alreadyBookmarked=!1;angular.forEach(vm.bookmarkedProject,function(x){if(x._id==data._id)return alreadyBookmarked=!0}),bookmark=!alreadyBookmarked,apiFactory.bookMarkProject(projectStore.get()._id,bookmark).then(function(resp){if(bookmark)Notification.success("Project successfully bookmarked"),vm.bookmarkedProject.push(data),vm.bookmarkFlag=!0;else{Notification.success("Project successfully removed from bookmark list");var index=vm.bookmarkedProject.findIndex(function(x){return x._id==data._id});vm.bookmarkedProject.splice(index,1),vm.bookmarkFlag=!1}}).catch(function(err){console.log(err)})},vm.addMore=function(){enabled&&(enabled=!1,$timeout(function(){enabled=!0},500),chunkSize+=5,apiFactory.listAllProjects({search:vm.projectSearch,chunk:chunkSize,page:1,sort:vm.sortParams.field,sortType:vm.sortParams.type}).then(function(resp){vm.projectPickerData=resp.data.list}).catch(function(e){console.log(e)}))},vm.filePickerOptions={filter:"pdf"},vm.searchProjects=function(text){apiFactory.listAllProjects({search:vm.projectSearch,chunk:chunkSize,page:1,sort:vm.sortParams.field,sortType:vm.sortParams.type}).then(function(resp){vm.projectPickerData=resp.data.list}).catch(function(e){console.log(e)})},vm.sort=function(field){vm.sortParams.field===field?vm.sortParams.type=!vm.sortParams.type:(vm.sortParams.field=field,vm.sortParams.type=!0),apiFactory.listAllProjects({search:vm.projectSearch,chunk:chunkSize,page:1,sort:vm.sortParams.field,sortType:vm.sortParams.type}).then(function(resp){vm.projectPickerData=resp.data.list}).catch(function(e){console.log(e)})},vm.logout=function(){logout()},$scope.redirectTo3D=function(){console.log("rediection called"),apiFactory.get3DPage().then(function(response){console.log("response:",response)})},vm.goToFileManager=function(){console.log("project",projectStore.get()),projectStore.get()?$state.go("fileManager"):(Notification.warning("Please select a project"),$("html, body").animate({scrollTop:$(".project").offset().top},500,function(){$("#selectProject").focus().addClass("blink"),setTimeout(function(){$("#selectProject").removeClass("blink")},1e3)}))},vm.planPickerPlans=[],vm.rootFolders=[],vm.openPlanPicker=function(){projectStore.get()?(apiFactory.getProjectRoofPlans(projectStore.get()._id).then(function(resp){var roofPlans=resp.data.data;localStorageService.set("roofPlanProject",projectStore.get()._id),localStorageService.set("roofPlans",roofPlans),vm.planPickerPlans=roofPlans,$("#chooseRoofModal").modal("show")}).catch(function(e){console.log(e)}),apiFactory.getHierarchy(projectStore.get()._id).then(function(resp){vm.showTree=!0,vm.rootFolders=resp.data.data.hierarchies}).catch(function(e){console.log(e)})):Notification.warning("No project selected")},vm.choosePlan=function(plan){$("#chooseRoofModal").modal("hide"),localStorageService.set("selectedPlan",plan),$state.go("visualPlanner")},vm.allModalClose=function(){$("#chooseFile, #selectFileCanvas, #selectFile, #chooseRoofModal").modal("hide")},vm.fileChoose=function(){vm.pickerFolders=angular.copy(vm.rootFolders),$("#chooseFile").modal("show"),$("#chooseFile").css("display","block"),$("#chooseFile .modal-dialog").css({"-webkit-box-shadow":"0px 0px 47px 6px rgba(0, 0, 0, 0.75)","-moz-box-shadow":"0px 0px 47px 6px rgba(0, 0, 0, 0.75)","box-shadow":"0px 0px 47px 6px rgba(0, 0, 0, 0.75)"}),$(".rootFolder").show(),$(".childFolder").hide(),vm.moveto="move To",$scope.folderName="Root Folder","Root Folder"==$scope.folderName?$scope.backBtnView=!0:$scope.backBtnView=!1},$scope.$on("loader",function(e,data){vm.loader=data,vm.loader?$("body").addClass("modal-open"):$("body").removeClass("modal-open")}),$scope.$on("selectedRoofPlanDoc",function(e,data){vm.selectedAssetForPlan=data,vm.roofplanBreadCrumb=data.breadCrumbs.reduce(function(acc,x){return acc+=x.name+" > "},"")+data.assetName,/cloudinary/.test(data.secure_url)?(vm.fileArray=globals.extractPagesFromPdf(data.secure_url,data.pages),vm.loader=!1,$("#chooseRoofModal").css("visibility","hidden"),$("#selectFile").modal("show"),$("#selectFile").css("display","block"),vm.pdfFiles=angular.copy(vm.fileArray),console.log(vm.fileArray)):data.planDocument?($timeout(function(){$scope.$apply()}),vm.pdfPagesData=vm.pdfFiles=data.planImages.map(function(x,i){var obj={pageNo:i,title:"title_"+Date.now(),url:x,selected:!1,description:""};return obj}),vm.loader=!1,$("#chooseRoofModal").css("visibility","hidden"),$("#selectFile").modal("show"),$("#selectFile").css("display","block")):globals.createPagesFromPdf(data).then(function(pages){$timeout(function(){$scope.$apply()}),vm.pdfPagesData=pages,vm.pdfFiles=pages,vm.loader=!1,$("#chooseRoofModal").css("visibility","hidden"),$("#selectFileCanvas").modal("show"),$("#selectFileCanvas").css("display","block")})}),vm.hideSelectFile=function(){$("#chooseRoofModal").css("visibility","visible"),$("#selectFile").css("display","none")},vm.selectedFileList=function(val,type,asset){if("submit"==val)if($("#chooseFile, #selectFile, #selectFileCanvas").css("display","none"),$("#chooseRoofModal").css("visibility","visible"),vm.selectedFiles=[],angular.forEach(vm.pdfFiles,function(x){x.selected&&vm.selectedFiles.push(x)}),1===type){var endpoint=!asset.planDocument&&/cloudinary/.test(asset.secure_url)?"addProjectRoofPlan":"addRoofPlansFromAsset",payload={assetId:asset._id,projectId:projectStore.get()._id,pages:vm.selectedFiles};apiFactory[endpoint](payload).then(function(resp){Notification.success(resp.data.message),apiFactory.getProjectRoofPlans(projectStore.get()._id).then(function(resp){var roofPlans=resp.data.data;localStorageService.set("roofPlanProject",projectStore.get()._id),localStorageService.set("roofPlans",roofPlans),vm.planPickerPlans=roofPlans}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}else{var _payload={assetId:asset._id,pdfUrl:asset.secure_url,projectId:projectStore.get()._id,pages:vm.selectedFiles.reduce(function(acc,x){var obj={title:x.title,description:x.description,pageNo:x.pageNo};return acc.push(obj),acc},[])};apiFactory.generateRoofPlans(_payload).then(function(resp){Notification.success(resp.data.message),apiFactory.getProjectRoofPlans(projectStore.get()._id).then(function(resp){var roofPlans=resp.data.data;localStorageService.set("roofPlanProject",projectStore.get()._id),localStorageService.set("roofPlans",roofPlans),vm.planPickerPlans=roofPlans}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}else"close"==val&&($("#chooseFile, #selectFile, #selectFileCanvas").css("display","none"),$("#chooseRoofModal").css("visibility","visible"))}})}(),function(){angular.module("app").controller("employeesCtrl",function($scope,$timeout,authFactory,$state,apiFactory,Notification,NgMap,globals,localStorageService){var logout=globals.logout;authFactory.checkUser()||logout();this.logout=function(){logout()}})}(),function(){angular.module("app").controller("equipmentCtrl",function($scope,$timeout,authFactory,$state,apiFactory,Notification,globals,Upload){$scope.equipment=[{img:"/assets/images/equipment.png",title:"Equipment ABC",subtitle:"EQ - 1234",work:"Worker ID",tag:"NNS1 - Kim Mosegaard"},{img:"/assets/images/equipment.png",title:"Equipment ABC",subtitle:"EQ - 1234",work:"Car",tag:"NR. 99"},{img:"/assets/images/equipment.png",title:"Equipment ABC",subtitle:"EQ - 1234",work:"Worker ID",tag:"NNS1 - Kim Mosegaard"},{img:"/assets/images/equipment.png",title:"Equipment ABC",subtitle:"EQ - 1234",work:"Worker ID",tag:"NNS1 - Kim Mosegaard"},{img:"/assets/images/equipment.png",title:"Equipment ABC",subtitle:"EQ - 1234",work:"Car",tag:"NR. 99"},{img:"/assets/images/equipment.png",title:"Equipment ABC",subtitle:"EQ - 1234",work:"Worker ID",tag:"NNS1 - Kim Mosegaard"},{img:"/assets/images/equipment.png",title:"Equipment ABC",subtitle:"EQ - 1234",work:"Worker ID",tag:"NNS1 - Kim Mosegaard"},{img:"/assets/images/equipment.png",title:"Equipment ABC",subtitle:"EQ - 1234",work:"Car",tag:"NR. 99"},{img:"/assets/images/equipment.png",title:"Equipment ABC",subtitle:"EQ - 1234",work:"Worker ID",tag:"NNS1 - Kim Mosegaard"}],$scope.img_upload=[{img:"/assets/images/equipment3.png"},{img:"/assets/images/equipment3.png"},{img:"/assets/images/equipment3.png"}],$scope.equipdocuments=[{img:"/assets/images/pdf.png",type:"Document_1.pdf"},{img:"/assets/images/pdf.png",type:"Document_2.pdf"},{img:"/assets/images/pdf.png",type:"Document_3.pdf"}];var vm=this,logout=globals.logout,userStore=globals.userStore;if(!authFactory.checkUser())return void logout();$(".payrollMenu").hide(),vm.userData=userStore.get(),vm.logout=function(){logout()},$(".materialList").DataTable(),apiFactory.listAllEquipments().then(function(resp){vm.equipment=resp.data.list}).catch(function(e){console.log(e)}),vm.dtOptions={paging:!1,info:!1,ordering:!1},$(".equipmentList").DataTable(),$scope.activeJustified=0,vm.currentPage=1,vm.toggleObj={systemTag:!0,materialCost:!1,rooferCost:!1,createdAt:!1,name:!1},vm.searchText="",vm.sortEquipment=function(type){void 0===vm.toggleObj[type]?vm.toggleObj[type]=!0:vm.toggleObj[type]=!vm.toggleObj[type],apiFactory.listAllEquipments({page:1,chunk:10,sort:type,search:vm.searchText,sortType:vm.toggleObj[type]}).then(function(resp){vm.equipment=resp.data.list,vm.equipmentCount=resp.data.total,$timeout(function(){$("#equipmentPagination").pagination({items:vm.equipmentCount,itemsOnPage:10,cssStyle:"light-theme",hrefTextPrefix:"#",ordering:!1,currentPage:1,onPageClick:function(page,event){event.preventDefault(),apiFactory.listAllEquipments({page:page,chunk:10,sort:type,sortType:vm.toggleObj[type]}).then(function(resp){vm.equipment=resp.data.list}).catch(function(e){console.log(e)})}})})}).catch(function(e){console.log(e)})},vm.searchEquipment=function(text){apiFactory.listAllEquipments({page:1,chunk:10,search:text,sort:"createdDate",sortType:!1}).then(function(resp){vm.equipment=resp.data.list,vm.equipmentCount=resp.data.total,$timeout(function(){$("#equipmentPagination").pagination({items:vm.equipmentCount,itemsOnPage:10,cssStyle:"light-theme",hrefTextPrefix:"#",ordering:!1,currentPage:1,onPageClick:function(page,event){event.preventDefault(),apiFactory.listAllEquipments({page:page,chunk:10,sort:type,sortType:vm.toggleObj[type]}).then(function(resp){vm.equipment=resp.data.list}).catch(function(e){console.log(e)})}})})}).catch(function(e){console.log(e)})},vm.sortEquipment("createdAt"),vm.addMaterial={conversionFactor:1},vm.tabSettings={disable:!0},apiFactory.getCompanyById(vm.userData.companyId).then(function(resp){vm.companyData=resp.data,vm.addMaterial.currency=vm.companyData.currentCurrency.currencyCode}).then(function(e){console.log(e)}),vm.showConversionRate=function(from,to){var currencyData={from:from,to:to};apiFactory.showConversionRate(currencyData).then(function(resp){vm.addMaterial.conversionFactor=resp.data.conversionFactor}).catch(function(e){console.log(e)})},vm.mUnits=globals.mUnits,globals.getCurrency().then(function(resp){vm.currencies=resp.data}),vm.tabStyle=function(){void 0!==vm.addMaterial.materialName&&" "!==vm.addMaterial.materialName&&void 0!==vm.addMaterial.materialUnit&&" "!==vm.addMaterial.materialUnit&&void 0!==vm.addMaterial.currency&&""!==vm.addMaterial.currency&&void 0!==vm.addMaterial.conversionFactor&&""!==vm.addMaterial.conversionFactor?($("uib-tab-heading.info i.fa").attr("style","display: inline-block !important; color: #3cbdaa"),$("uib-tab-heading.info .number").hide(),$(".btn-success.next").attr("disabled",!1)):($("uib-tab-heading.info i.fa").attr("style","display: none !important; color: #3cbdaa"),$("uib-tab-heading.info .number").show(),$(".btn-success.next").attr("disabled",!0))},vm.addMaterialNext=function(){null!=vm.addMaterial.materialName&&" "!=vm.addMaterial.materialName?null!=vm.addMaterial.materialUnit&&" "!=vm.addMaterial.materialUnit?null!=vm.addMaterial.currency&&" "!=vm.addMaterial.currency?$scope.activeJustified=1:Notification.error("Please select Currency"):Notification.error("Please select material Unit"):Notification.error("Please enter material name")},vm.changeCost=function(cost,conversionRate){return cost*conversionRate},vm.addMaterialDetails=function(){var formData={name:vm.addMaterial.materialName,unit:vm.addMaterial.materialUnit,equipmentCosts:{value:vm.changeCost(vm.addMaterial.equipmentCostValue,vm.addMaterial.conversionFactor),currencyCode:vm.companyData.currentCurrency.currencyCode},rooferCost:{value:vm.changeCost(vm.addMaterial.rooferCostValue,vm.addMaterial.conversionFactor),currencyCode:vm.companyData.currentCurrency.currencyCode},files:vm.inputFiles};apiFactory.createEquipment(formData).then(function(resp){$("#addEquipments").modal("hide"),Notification.success(resp.data.message),vm.sortEquipment("createdAt"),vm.addMaterial={conversionFactor:1}}).catch(function(e){console.log(e)})}})}(),function(){angular.module("app").controller("equipmentViewCtrl",function($scope,$timeout,authFactory,$state,apiFactory,Notification,globals,$stateParams,Upload){var logout=globals.logout,userStore=globals.userStore;if(!authFactory.checkUser())return void logout();this.logout=function(){logout()},this.userData=userStore.get(),this.equipmentId=$stateParams.id,apiFactory.getEquipmentById(this.equipmentId).then(function(resp){console.log(resp)}).catch(function(e){console.log(e)})})}(),function(){angular.module("app").controller("fileManagerCtrl",function($scope,$http,$window,$timeout,authFactory,$state,apiFactory,Notification,globals,fileManagerFactory,uploadFactory){var vm=this,logout=globals.logout,userStore=globals.userStore,projectStore=globals.projectStore,genericStore=globals.genericStore,clipBoard=(globals.breakcrumbStore,fileManagerFactory.clipBoard);if(!authFactory.checkUser())return void logout();vm.userData=userStore.get(),vm.logout=function(){logout()},apiFactory.listAllProjects().then(function(resp){vm.projectList=resp.data;var selectedProject=projectStore.get();vm.selectedProject=selectedProject._id,vm.getPrimaryFolders(selectedProject)}).catch(function(e){console.log(e)}),vm.rootFolders=[],vm.backupFolders=projectStore.get().backupFolders,vm.windowItems={folderData:"",folders:[],files:[]},vm.resolveAssetIcon=function(assetObj){var assetFormat=assetObj.format.trim(),icon=void 0;return/jp*g/.test(assetFormat)?icon="jpg":/png/.test(assetFormat)?icon="png":/pdf/.test(assetFormat)&&(icon="pdf"),icon},vm.showTree=!1,vm.getPrimaryFolders=function(selectedProject,list){list?projectStore.set(list.filter(function(x){return x._id===selectedProject})[0]):projectStore.set(selectedProject),vm.backupFolders=projectStore.get().backupFolders,Promise.all([apiFactory.getHierarchy(projectStore.get()._id),apiFactory.viewProjectAssets(projectStore.get()._id)]).then(function(resp){vm.showTree=!0,vm.rootFolders=resp[0].data.data.hierarchies,vm.projectFiles=resp[1].data.data,vm.loadFilesToAutoComplete=function($query){return new Promise(function(resolve,reject){resolve(vm.projectFiles)})}}).catch(function(e){console.log(e)})},vm.getFolder=function(id){apiFactory.getHierarchyChildren(id).then(function(resp){console.log(resp.data)}).catch(function(e){console.log(e)})};var fileDestination=genericStore();vm.treeOptions={accept:function(source,dest,destIndex){return!source.file||(fileDestination.store(dest),!1)},dragStop:function(event){var source=event.source;event.dest;if(source.nodeScope.file){var destination=fileDestination.get();if(!destination.$nodeScope)return;var payload={assetId:source.nodeScope.file._id,sourceId:source.nodeScope.$parent.$nodeScope.$modelValue._id,destId:destination.$nodeScope.$modelValue._id};apiFactory.moveAssets(payload).then(function(resp){Notification.success(resp.data.message)}).catch(function(e){console.log(e)}),destination.$nodeScope.$modelValue.files?destination.$nodeScope.$modelValue.files.push(source.nodeScope.file):destination.$nodeScope.$modelValue.files=[source.nodeScope.file],source.nodeScope.$parent.$nodeScope.$modelValue.files=source.nodeScope.$parent.$nodeScope.$modelValue.files.filter(function(x){return x._id!==source.nodeScope.file._id})}},dropped:function(event){var source=event.source,dest=event.dest,payload=void 0;null===dest.nodesScope.$nodeScope&&null===source.nodeScope.$parentNodeScope||(payload=null===dest.nodesScope.$nodeScope&&null!==source.nodeScope.$parentNodeScope?{type:1,hierarchyId:source.nodeScope.$modelValue._id,parentId:source.nodeScope.$parentNodeScope.$modelValue._id,projectId:projectStore.get()._id}:null!==dest.nodesScope.$nodeScope&&null===source.nodeScope.$parentNodeScope?{type:2,hierarchyId:source.nodeScope.$modelValue._id,projectId:projectStore.get()._id,destId:dest.nodesScope.$nodeScope.$modelValue._id}:{type:3,hierarchyId:source.nodeScope.$modelValue._id,parentId:source.nodeScope.$parentNodeScope.$modelValue._id,destId:dest.nodesScope.$nodeScope.$modelValue._id},apiFactory.dragMoveNodes(payload).then(function(resp){Notification.success(resp.data.message)}).catch(function(e){console.log(e)}))}};var rootFolderStore=genericStore();vm.setRootFolder=function(obj){rootFolderStore.store(obj)},vm.addModalActiveTab=0,$("#addModal").on("hide.bs.modal",function(){vm.fileNames=[],vm.addModalActiveTab=0}),vm.addPrimaryFolder=function(name,projectId){var payload={name:name,isParent:!0,projectId:projectId},nodeObj=rootFolderStore.get();$("#addModal").modal("hide"),apiFactory.addHierarchy(payload).then(function(resp){nodeObj.$nodesScope.$modelValue.push(resp.data.data),Notification.success(resp.data.message),console.log("rootfolder",rootFolderStore.get())}).catch(function(e){console.log(e)})},vm.openAddModal=function(source,obj){vm.addModalSource=source,vm.nodeObj=obj,$("#addModal").modal("show")},vm.showLoader=!1,vm.toggleFolder=function(folder,icon,node){folder.$modelValue.backup||($(folder.$treeScope.$element[0]).find(".folder-open").removeClass("folder-open"),$(folder.$element[0]).find(".row").first().addClass("folder-open"),vm.showLoader=!0,apiFactory.viewHierarchy(folder.$modelValue._id).then(function(resp){vm.windowItems={folderData:folder,folders:folder.$modelValue.children,files:resp.data.files},vm.breadCrumbList=resp.data.breadcrumbs,vm.showLoader=!1,folder.$modelValue.files=resp.data.files,navigationStack.push(folder)}).catch(function(e){console.log(e)}),folder.collapsed?folder.toggle():icon&&navigationStack.push(folder))};var navigationStack=fileManagerFactory.navigationStack();vm.navigate=function(forward){var folder=forward?navigationStack.forward():navigationStack.backward();folder&&(vm.showLoader=!0,apiFactory.viewHierarchy(folder.$modelValue._id).then(function(resp){vm.windowItems={folderData:folder,folders:folder.$modelValue.children,files:resp.data.files},vm.showLoader=!1,folder.$modelValue.files=resp.data.files}).catch(function(e){console.log(e)}))},vm.openFolder=function(id){var folderData=vm.windowItems.folderData.childNodes().reduce(function(acc,x){return x.$modelValue._id===id&&(acc=x),acc},null);vm.showLoader=!0,apiFactory.viewHierarchy(id).then(function(resp){navigationStack.push(folderData),vm.windowItems={folderData:folderData,folders:resp.data.folders,files:resp.data.files},vm.breadCrumbList=resp.data.breadcrumbs,vm.showLoader=!1}).catch(function(e){console.log(e)})},vm.addFolder=function(name,folder){$("#addModal").modal("hide");var payload={name:name,isParent:!1,parent:folder};apiFactory.addHierarchy(payload).then(function(resp){folder.children.push(resp.data.data),Notification.success(resp.data.message)}).catch(function(e){console.log(e)})},vm.addFileToHierarchy=function(assets,folder){$("#addModal").modal("hide");var assetId=assets.map(function(x){return x._id}),hierarchyId=folder._id;apiFactory.addFileToHierarchy({assetId:assetId,hierarchyId:hierarchyId}).then(function(resp){console.log(resp),Notification.success(resp.data.message)}).catch(function(e){console.log(e)})},vm.deleteFile=function(id,folderData){$("#fileView").modal("hide"),apiFactory.deleteAssets({assetId:id}).then(function(resp){vm.showLoader=!0,apiFactory.viewHierarchy(folderData.$modelValue._id).then(function(resp){vm.windowItems={folderData:folderData,folders:folderData.$modelValue.children,files:resp.data.files},vm.showLoader=!1,folderData.$modelValue.files=resp.data.files}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})},vm.uploadState=!1,vm.completedAll=!1,vm.fileUpdated=function(files,event){var fileObj=event.target.files;vm.uploadState=!1,vm.completedAll=!1,vm.fileNames=Object.keys(fileObj).map(function(x){var val=fileObj[x];return val.progress=0,val.isPaused=!1,val.completed=!1,val.aborted=!1,val.plan=!1,val})},vm.toggleUploadViewMaximize=function(val){vm.uploadViewMaximize=!val},vm.preUpload=function(files,folder){console.log(files),$("#addModal").modal("hide"),fileManagerFactory.checkDuplicateFiles(files,folder._id).then(function(processed){processed.duplicates.length?(vm.preUploadFiles=processed,console.log(vm.preUploadFiles),$("#versioningModal").modal("show")):(console.log(processed),vm.uploadFile(processed,projectStore.get()._id,folder))}).catch(function(e){console.log(e)})},vm.processDuplicateFileName=function(file){"version"===file.action?file.assetName=fileManagerFactory.generateVersion(file.name):file.assetName=file.name},vm.uploadFile=function(files,projectId,folder){if(fileManagerFactory.checkNameChange(files.duplicates))Notification.warning("File names can't be the same");else if($("#versioningModal").modal("hide"),files=[].concat(_toConsumableArray(files.duplicates),_toConsumableArray(files.uploadFiles)),vm.uploadState=!0,$("#addModal").modal("hide"),vm.uploadViewFiles=fileManagerFactory.splitDestination(files),angular.forEach(vm.uploadViewFiles.s3,function(x){uploadFactory.start(function(evaporate){x.pause=uploadFactory.pause.bind(evaporate,x),x.resume=uploadFactory.resume.bind(evaporate,x),x.abort=uploadFactory.abort.bind(evaporate,x);var addConfig={name:x.name,file:x,progress:function(p,stats){x.progress=x.progress>Math.round(100*p)?x.progress:Math.round(100*p),vm.completedAll=fileManagerFactory.checkUploadCompletion(vm.uploadViewFiles),$timeout(function(){$scope.$apply()})},complete:function(_xhr,awsKey){x.completed=!0,$timeout(function(){$scope.$apply()}),console.log("Complete!")}};evaporate.add(addConfig).then(function(awsObjectKey){var payload={type:fileManagerFactory.resolveDestType(x),projectId:projectStore.get()._id,folderId:folder._id,assetData:{assetName:x.assetName,bucket:"3dfilesdata",key:"test/"+x.name,mimetype:x.type,bytes:x.size,planDocument:x.plan}};apiFactory.newFileUpload(payload).then(function(resp){folder&&folder.files.push(resp.data.data)}).catch(function(e){console.log(e)}),Notification.success("File successfully uploaded"),console.log("File successfully uploaded to:",awsObjectKey)},function(reason){x.aborted=!0,vm.completedAll=fileManagerFactory.checkUploadCompletion(vm.uploadViewFiles),$timeout(function(){$scope.$apply()}),console.log("File did not upload sucessfully:",reason)})})}),vm.uploadViewFiles.cloudinary.length){var cloudinaryPayload={files:vm.uploadViewFiles.cloudinary,assetNames:vm.uploadViewFiles.cloudinary.map(function(x){return x.assetName}),projectId:projectId,hierarchyId:folder._id};apiFactory.uploadFileInFileManager(cloudinaryPayload).then(function(resp){vm.uploadViewFiles.cloudinary=vm.uploadViewFiles.cloudinary.map(function(x){return x.completed=!0,x}),vm.completedAll=fileManagerFactory.checkUploadCompletion(vm.uploadViewFiles),$timeout(function(){$scope.$apply()}),folder&&resp.data.data.forEach(function(x){folder.files.push(x)}),Notification.success(resp.data.message)}).catch(function(e){console.log(e)})}},vm.closeUploadView=function(){vm.uploadState=!1},vm.fileView=function(file){$("#fileView").modal("show"),vm.previewData=file,vm.previewData.customUrl="pdf"===file.format?file.secure_url.replace(/\.pdf/,".png"):file.secure_url},vm.editEnabled=!1,vm.toggleEdit=function(bool){vm.editEnabled=bool},$scope.backBtnView=!1,vm.contextMenuOptions={explorer:[{text:"Paste item(s)",click:function($itemScope,$event,modelValue,text,$li){vm.windowItems.folderData?clipBoard.paste(vm.windowItems.folderData.$modelValue._id).then(function(resp){resp&&apiFactory.viewHierarchy(vm.windowItems.folderData.$modelValue._id).then(function(resp){vm.windowItems={folderData:vm.windowItems.folderData,folders:resp.data.folders,files:resp.data.files}}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)}):Notification.warning("Cannot paste file in root location")}}],file:[{text:"Copy",click:function($itemScope,$event,modelValue,text,$li){clipBoard.copy($itemScope.file)}},{text:"Cut",click:function($itemScope,$event,modelValue,text,$li){clipBoard.cut($itemScope.file,vm.windowItems.folderData.$modelValue._id)}},{text:"Move to",click:function($itemScope){vm.pdfonly=!1,vm.pickerFolders=angular.copy(vm.rootFolders),vm.moveToSourceFile=$itemScope.file,$("#moveTo").modal("show"),$(".rootFolder").show(),$(".childFolder").hide(),vm.moveto="move To",$scope.folderName="Root Folder","Root Folder"==$scope.folderName?$scope.backBtnView=!0:$scope.backBtnView=!1}}]},vm.childFolderView=function(val){vm.childFolders=val.children,vm.moveto=val.name,$(".rootFolder").hide(),$(".childFolder").show()},$scope.backBtnView=!1,"Root Folder"==$scope.folderName?$scope.backBtnView=!0:$scope.backBtnView=!1;vm.saveHierarchyTree=function(name){if(name){$("#saveTemplateModal").modal("hide");var data={name:name};apiFactory.saveHierarchyTree(projectStore.get()._id,data).then(function(resp){Notification.success(resp.data.message)}).console.log(function(e){console.log(e)})}else Notification.error("Please enter template name")},vm.selectedTemplate="",apiFactory.getHierarchyTemplate().then(function(resp){vm.templateList=resp.data.data}).catch(function(e){console.log(e)}),vm.assignTemplate=function(){var data={projectId:projectStore.get()._id,templateId:vm.selectedTemplate._id};$("#assignTemplateModal").modal("hide"),apiFactory.changeProjectTemplate(data).then(function(resp){Notification.success(resp.data.message),vm.getPrimaryFolders(projectStore.get()),apiFactory.getProjectById(projectStore.get()._id).then(function(resp){projectStore.set(resp.data),vm.backupFolders=projectStore.get().backupFolders}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})},vm.showBackupFiles=!1,vm.showRecentFiles=!1,vm.toggleBookmarks=function(val,key){vm[key]=!val},vm.loadProjectFiles=function(id){apiFactory.showProjectFiles(id,5).then(function(response){vm.projectFiles=response.data.data})},vm.loadProjectFiles(projectStore.get()._id)})}(),function(){angular.module("app").controller("issueDetailCtrl",function($scope,$timeout,authFactory,$state,$stateParams,apiFactory,Notification,NgMap,globals,localStorageService,FileSaver){var vm=this,logout=globals.logout,userStore=globals.userStore;authFactory.checkUser()||logout();vm.userData=userStore.get(),vm.logout=function(){logout()},vm.issueId=$stateParams.id,vm.ImageAssets=[],vm.DocumentAssets=[],$scope.currentPage=1,$scope.itemsPerPage=3,vm.getIssueDetail=function(){apiFactory.getIssueById(vm.issueId).then(function(resp){vm.issueData=resp.data,console.log("issuedata: ",vm.issueData),vm.totalItems=vm.issueData.comments.length,$scope.ArrayComments=vm.issueData.comments.reverse(),$scope.ArrayActivities=vm.issueData.issueActivity.reverse(),vm.allComments=$scope.ArrayComments.slice(0,3),vm.allActivities=$scope.ArrayActivities.slice(0,6),$timeout(function(){$("#pagination").pagination({items:vm.totalItems,itemsOnPage:$scope.itemsPerPage,cssStyle:"light-theme",hrefTextPrefix:"#",ordering:!1,currentPage:1,onPageClick:function(page,event){event.preventDefault(),function(page){var pagedData=vm.issueData.comments.slice((page-1)*$scope.itemsPerPage,page*$scope.itemsPerPage);vm.allComments=pagedData,$scope.$apply()}(page)}}),$("#paginationActivity").pagination({items:vm.issueData.issueActivity.length,itemsOnPage:7,cssStyle:"light-theme",hrefTextPrefix:"#",ordering:!1,currentPage:1,onPageClick:function(page,event){event.preventDefault(),function(page){var pagedData=vm.issueData.issueActivity.slice(7*(page-1),7*page);vm.allActivities=pagedData,$scope.$apply()}(page)}})}),vm.issueData.listAssets.map(function(x){"image/png"==x.mimetype||"image/jpg"==x.mimetype?vm.ImageAssets.push(x):vm.DocumentAssets.push(x)})})},vm.getIssueDetail(),vm.postComment=function(comment){console.log("comment: ",comment);var comment1=comment.replace(/\n\r?/g,"<br />");if(console.log("comment: ",comment1),null==comment)Notification.error("Please add comment.");else{var commentobj={comment:comment};apiFactory.postCommentForIssue(vm.issueId,commentobj).then(function(resp){console.log("esp:",resp),vm.getIssueDetail(),$("#commentarea").val(""),Notification.success("Comment added successfully..")}).catch(function(e){Notification.error("Couldn't update comment")})}},$scope.changeCompletionStatus=function(){alert("completion")},vm.downloadFile=function(docs){console.log("docs",docs);var blob=new Blob([docs],{type:docs.mimetype});console.log("blob",blob),saveAs(blob,docs.origionalname)},$scope.reOpenIssue=function(){apiFactory.reOpenIssueStatusUpdate(vm.issueId).then(function(resp){vm.getIssueDetail(),$("#confirmmodal").modal("hide"),Notification.success("Issue status is now open")}).catch(function(e){Notification.error("could not update Status")})},$scope.markIssueAsComplete=function(comment,imageFiles){console.log(comment),console.log(imageFiles);var editObject={comment:comment,Images:imageFiles};apiFactory.saveIssueAsComplete(vm.issueId,editObject).then(function(resp){vm.getIssueDetail(),$("#completionstatusmodal").modal("hide"),Notification.success("Issue is been marked as completed")}).catch(function(e){Notification.error("Something wrong happened. couldent update changes")})}})}(),function(){angular.module("app").controller("issuesCtrl",function($scope,$rootScope,$timeout,authFactory,$state,$q,apiFactory,Notification,globals,fileManagerFactory,Upload,localStorageService,uploadFactory){var vm=this,logout=globals.logout,userStore=globals.userStore,debounce=globals.debounce;if($scope.UploadedFiles=[],vm.issueData={},$scope.issueModel={},$scope.file,$scope.comment="",$scope.inputFiles=[],$scope.openEdit=!1,$scope.filesToRemove=[],$scope.isSelectedBtn=!1,$scope.updateform=!1,$scope.UndoArray=[],$scope.redoArray=[],vm.planToMark=[],vm.LocalImgs=[],$scope.searchingText=!1,$scope.openFillColor=!1,$scope.colorpick="#0000ff",$scope.colorWell,$scope.fillWell,$scope.fillColor="transparent",$scope.textForm=!1,vm.errorImage="assets/images/enduserissue.png",$scope.btnMarker="../assets/images/gps.png",$scope.btnCircle="../assets/images/circle-shape-outline.png",$scope.btnLine="../assets/images/lineicon.png",$scope.btnText="../assets/images/text-option-interface-symbol.png",!authFactory.checkUser())return void logout();vm.userData=userStore.get(),vm.logout=function(){logout()},$(".issuesList").DataTable(),$scope.activeJustified=0,vm.currentPage=1,vm.toggleObj={toggleIssue:{systemTag:!1,title:!1,description:!1,projectName:!1,created:!0}},vm.searchText="",vm.sortissues=function(type,resource){void 0===vm.toggleObj[resource][type]?vm.toggleObj[resource][type]=!0:vm.toggleObj[resource][type]=!vm.toggleObj[resource][type],apiFactory.listAllIssues({page:1,chunk:10,sort:type,search:vm.searchText,sortType:vm.toggleObj[resource][type]}).then(function(resp){vm.allIssues=resp.data.list,vm.issueCount=resp.data.total,$timeout(function(){$scope.searchingText=!1,$("#pagination").pagination({items:vm.issueCount,itemsOnPage:10,cssStyle:"light-theme",hrefTextPrefix:"#",ordering:!1,currentPage:1,onPageClick:function(page,event){event.preventDefault(),apiFactory.listAllIssues({page:page,chunk:10,sort:type,sortType:vm.toggleObj[type]}).then(function(resp){vm.allIssues=resp.data.list}).catch(function(e){console.log(e)})}})})}).catch(function(e){console.log(e)})};var searchDebounce=debounce(250);function dragStartLine(e){$scope.isLine=!0,$scope.dragging=!0;var x=Math.floor((e.clientX-$scope.rect.left)/($scope.rect.right-$scope.rect.left)*$scope.canvas.width),y=Math.floor((e.clientY-$scope.rect.top)/($scope.rect.bottom-$scope.rect.top)*$scope.canvas.height);$scope.dragStartLocation={X:x,Y:y},$scope.snapshot=$scope.context.getImageData(0,0,$scope.canvas.width,$scope.canvas.height)}function dragLine(e){var position,x=Math.floor((e.clientX-$scope.rect.left)/($scope.rect.right-$scope.rect.left)*$scope.canvas.width),y=Math.floor((e.clientY-$scope.rect.top)/($scope.rect.bottom-$scope.rect.top)*$scope.canvas.height);!0===$scope.dragging&&($scope.context.putImageData($scope.snapshot,0,0),position={X:x,Y:y},$scope.context.beginPath(),$scope.context.moveTo($scope.dragStartLocation.X,$scope.dragStartLocation.Y),$scope.context.lineTo(position.X,position.Y),$scope.context.strokeStyle=$scope.colorpick,$scope.context.lineWidth=2,$scope.context.lineCap="round",$scope.context.stroke())}function dragStopLine(e){var position;$scope.dragging=!1,$scope.context.putImageData($scope.snapshot,0,0);var x=Math.floor((e.clientX-$scope.rect.left)/($scope.rect.right-$scope.rect.left)*$scope.canvas.width),y=Math.floor((e.clientY-$scope.rect.top)/($scope.rect.bottom-$scope.rect.top)*$scope.canvas.height);position={X:x,Y:y},$scope.context.beginPath(),$scope.context.moveTo($scope.dragStartLocation.X,$scope.dragStartLocation.Y),$scope.context.lineTo(position.X,position.Y),$scope.context.strokeStyle=$scope.colorpick,$scope.context.lineWidth=2,$scope.context.lineCap="round",$scope.context.stroke();var imageData=$scope.context.getImageData(0,0,$scope.canvas.width,$scope.canvas.height);$scope.UndoArray.push(imageData),console.log("undoArray: ",$scope.UndoArray)}vm.searchIssues=function(text){searchDebounce(function(){apiFactory.listAllIssues({page:1,chunk:10,search:text,sort:"created",sortType:!1}).then(function(resp){vm.allIssues=resp.data.list,vm.issueCount=resp.data.total,$timeout(function(){$scope.searchingText=!0,$("#paging").pagination({items:vm.issueCount,itemsOnPage:10,cssStyle:"light-theme",hrefTextPrefix:"#",ordering:!1,currentPage:1,onPageClick:function(page,event){event.preventDefault(),apiFactory.listAllIssues({page:page,chunk:10,sort:type,sortType:vm.toggleObj[resource][type]}).then(function(resp){vm.allIssues=resp.data.list}).catch(function(e){console.log(e)})}})})}).catch(function(e){console.log(e)})},[text])},vm.sortissues("created","toggleIssue"),vm.dtOptions={paging:!1,info:!1,ordering:!1,searching:!1},$scope.issueCategory=["Safety","Quality","Issue"],apiFactory.listAllUsers().then(function(resp){vm.allUsers=resp.data.list}),apiFactory.listAllRoofers().then(function(resp){vm.allRoofers=resp.data.list}),apiFactory.listAllProjects().then(function(resp){vm.allProjects=resp.data.list}),apiFactory.getIssuesList().then(function(resp){vm.listOfIssue=resp.data.list}),$scope.readImg=function(fileImg){var output=document.getElementById("blah");output.src=URL.createObjectURL(fileImg)},$scope.addFile=function(file,comment){$scope.inputFiles.push({file:file,comment:comment,source:"NS"}),console.log("input:",$scope.inputFiles)},$scope.deleteImg=function(index,array){array.splice(index,1)},$scope.fileUpEvent=function(file){$scope.thumbnail="",console.log("file event",file),null!==file&&file.length>0&&file.forEach(function(onefile){if("image/png"==onefile.type||"image/jpg"==onefile.type||"image/jpeg"==onefile.type){var SRC=URL.createObjectURL(onefile);$scope.thumbnail=SRC}else"application/pdf"==onefile.type?$scope.thumbnail="assets/images/file_icon/pdficon.jpg":"application/vnd.openxmlformats-officedocument.wordprocessingml.document"==onefile.type?$scope.thumbnail="assets/images/file_icon/msword.png":"application/vnd.ms-excel"==onefile.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==onefile.type?$scope.thumbnail="assets/images/file_icon/excel.jpg":"application/x-zip-compressed"==onefile.type?$scope.thumbnail="assets/images/file_icon/zip.png":$scope.thumbnail="assets/images/file_icon/anytype.jpg";$scope.inputFiles.push({file:onefile,image:$scope.thumbnail})})},$scope.getDescription=function(index,array,coment){array[index].comment=coment},vm.files3Update=function(array,issuedata){console.log("in s3 function",issuedata),array.forEach(function(x,i,array){uploadFactory.start(function(evaporate){Notification.info(x.file.name+" is uploading ..."),x.file.pause=uploadFactory.pause.bind(evaporate,x),x.file.resume=uploadFactory.resume.bind(evaporate,x),x.file.abort=uploadFactory.abort.bind(evaporate,x);var addConfig={name:x.file.name,file:x.file,progress:function(p,stats){x.file.progress=x.file.progress>Math.round(100*p)?x.file.progress:Math.round(100*p),vm.completedAll=fileManagerFactory.checkUploadCompletion(vm.uploadViewFiles),$timeout(function(){$scope.$apply()})},complete:function(_xhr,awsKey){x.file.completed=!0,$timeout(function(){$scope.$apply()}),console.log("Complete!")}};evaporate.add(addConfig).then(function(awsObjectKey){console.log(x);var payload={type:fileManagerFactory.resolveDestType(x.file),assetData:{assetName:x.file.name,assetdescription:x.comment,bucket:"3dfilesdata",key:"test/"+x.file.name,mimetype:x.file.type,bytes:x.file.size,issueId:issuedata.data._id}};console.log("INDEX:  ",i),apiFactory.newIssues3FileUpload(payload).then(function(resp){i===array.length-1&&($scope.inputFiles=[],vm.issueData={},$("#issue_modal").modal("hide"),$("#issue_marker").modal("show"),vm.sortissues("created","toggleIssue"),Notification.success("Asset saved successfully"))}).catch(function(e){console.log(e),Notification.error("Could not save asset object")})},function(reason){x.aborted=!0,vm.completedAll=fileManagerFactory.checkUploadCompletion(vm.uploadViewFiles),$timeout(function(){$scope.$apply()})})})})},vm.filescloudinaryUpdate=function(array){array.length?($scope.cloudinaryPayload={files:array},apiFactory.issueImage($scope.cloudinaryPayload).then(function(resp){return console.log("response of cloudinary: ",resp.data),vm.completedAll=fileManagerFactory.checkUploadCompletion(vm.uploadViewFiles),$timeout(function(){$scope.$apply()}),Notification.success(resp.data.message),"response from cloudinary"}).catch(function(e){console.log(e)})):console.log("No file found to save n cloudinary")},vm.saveIssueDetail=function(issueData){var issueObject={};issueObject.title=issueData.title,issueObject.description=issueData.description,issueObject.project=issueData.project._id,issueObject.issueCategory=issueData.category,issueObject.ownerId=issueData.owner._id,issueObject.deadLine=issueData.deadLine,issueObject.dependencyOn&&(issueObject.dependencyOn=issueData.dependencyOn._id),issueObject.issueStatus=issueData.issueStatus,console.log("issueObj:",issueData),apiFactory.createIssue(issueObject).then(function(resp){return Notification.success("Issue has been saved successfully"),$scope.inputFiles=[],$scope.updateform=!1,vm.sortissues("created","toggleIssue"),resp}).catch(function(e){console.log(e)})},vm.ADDISSUE=function(issueData){console.log(issueData),$scope.filesArray=$scope.inputFiles,vm.uploadViewFiles=fileManagerFactory.splitFileDest($scope.filesArray);var issueObject={assignedTo:[]};issueObject.title=issueData.title,issueObject.description=issueData.description,issueObject.projectId=issueData.project._id,issueObject.issueCategory=issueData.category,issueObject.ownerId=issueData.owner._id,issueObject.deadLine=issueData.deadLine,issueObject.dependencyOn=issueData.dependencyOn._id,issueData.assignedTo.map(function(x){issueObject.assignedTo.push(x._id)}),issueObject.issueStatus=issueData.issueStatus,issueObject.files=vm.uploadViewFiles.cloudinary,console.log("issueObject: ",issueObject),apiFactory.createIssue(issueObject).then(function(resp){Notification.success("Issue has been saved successfully"),console.log(resp),vm.uploadViewFiles.s3?vm.files3Update(vm.uploadViewFiles.s3,resp.data):($scope.inputFiles=[],vm.issueData={},$("#issue_modal").modal("hide"),$("#issue_marker").modal("show"),vm.sortissues("created","toggleIssue"))}).catch(function(e){console.log(e),Notification.error("couldn't save issue")})},vm.localFiles=[],$scope.getFilesFromLocal=function(files){if(console.log("local files: ",files),files){files.forEach(function(onefile){var SRC=URL.createObjectURL(onefile);vm.planToMark.push({url:SRC})}),console.log("after src called"),$("#issue_marker").modal("hide");var firstCanvasImg=vm.planToMark.slice(-1);$("#slideCanvas").css("background-image","url("+firstCanvasImg[0].url+")")}else Notification.error("No Files selected.")},$("#issue_marker").on("hidden.bs.modal",function(e){$(this).removeData("bs.modal"),$("#chooseIssueRoofModal").is(":visible")?console.log("Modal is open"):(console.log("Modal is closed"),$(this).modal("show"))}),$scope.getImagesInCarosel=function(){apiFactory.getProjectRoofPlans("58eb9d2ec921d67036787832").then(function(resp){var ProjectPlans=resp.data.data;vm.planPickerPlans=ProjectPlans,console.log("planpicker: ",vm.planPickerPlans),$("#issue_marker").modal("hide"),$("#chooseIssueRoofModal").modal("show")}).catch(function(e){console.log(e)})},vm.choosePlanData=function(plan){vm.planToMark.push(plan.assetObj)},vm.choosePlanData1=function(plan){vm.planToMark.push(plan)},$scope.addToDetails=function(imgarray){$("#chooseIssueRoofModal").modal("hide"),$("#issue_marker").modal("show"),console.log("vm.plan to mrk:",vm.planToMark);var firstCanvasImg=imgarray.slice(-1);$("#slideCanvas").css("background-image","url("+firstCanvasImg[0].url+")")},$scope.addToDetails1=function(imgarray){$("#localfilesmodel").modal("hide"),$("#issue_marker").modal("show");var firstCanvasImg=imgarray.slice(-1);$("#slideCanvas").css("background-image","url("+firstCanvasImg[0].url+")")},$scope.getDetail=function(issue){$("#issuedetail").modal(),$scope.issueModel=issue,$scope.Title=$scope.issueModel.title,$scope.Description=$scope.issueModel.description,$scope.DeadLineDate=new Date($scope.issueModel.deadLine),document.getElementById("deadline").defaultValue=$scope.DeadLineDate,$scope.day=$scope.DeadLineDate.getDate()-1,$scope.month=$scope.DeadLineDate.getMonth()+1,$scope.year=$scope.DeadLineDate.getFullYear(),$scope.deadLineDate=$scope.month+"/"+$scope.day+"/"+$scope.year,$scope.Status=$scope.issueModel.issueStatus},$scope.addFileToUpdate=function(file,comment){$scope.inputFiles.push({file:file,comment:comment}),console.log($scope.inputFiles),$scope.file="",$scope.comment=""},$scope.updateRequest=function(updateobj){console.log("to update data",updateobj),$scope.updateform=!0,$scope.openEdit=!1},$scope.removeFiles=function(index,array,imageId){array.splice(index,1),console.log("removing files","index",index,"imageId",imageId),$scope.filesToRemove.push(imageId),console.log("removing files",$scope.filesToRemove)},vm.closeUpdteModel=function(){$scope.updateform=!1},$scope.openEditDate=function(){$scope.openEdit=!0},$scope.closeEditDate=function(){$scope.openEdit=!1},vm.updateIssueDetails=function(formData){var issueObject={};null==vm.updateIssue?(console.log("update issue is undefined"),issueObject.Title=$scope.issueModel.title,issueObject.description=$scope.issueModel.description,issueObject.deadLine=$scope.issueModel.deadLine,issueObject.issueStatus=$scope.issueModel.issueStatus):(console.log("update isuue is not undfined so in esle case"),null==vm.updateIssue.title?issueObject.Title=$scope.issueModel.title:issueObject.Title=vm.updateIssue.title,null==vm.updateIssue.description?issueObject.description=$scope.issueModel.description:issueObject.description=vm.updateIssue.description,null==vm.updateIssue.deadLine?issueObject.deadLine=$scope.issueModel.deadLine:issueObject.deadLine=vm.updateIssue.deadLine,null==vm.updateIssue.issueStatus?issueObject.issueStatus=$scope.issueModel.issueStatus:issueObject.issueStatus=vm.updateIssue.issueStatus),$scope.inputFiles.length>0&&(issueObject.files=$scope.inputFiles),$scope.filesToRemove.length>0&&(console.log("files to remove",$scope.filesToRemove),issueObject.removedFiles=$scope.filesToRemove),console.log("ISUUEOBJECT",issueObject),apiFactory.updateIssue(issueObject,$scope.issueModel._id).then(function(resp){Notification.success("Issue has been updated successfully"),$scope.inputFiles=[],$scope.filesToRemove=[],$scope.updateform=!1,$("#issuedetail").modal("hide"),vm.sortissues("created","toggleIssue")}).catch(function(e){console.log(e),$scope.inputFiles=[],$scope.filesToRemove=[],$scope.updateform=!1,Notification.error("Something went wrong")})},$scope.imageTempUrl="../assets/images/rooftestimages/image1.jpg",$scope.rooftestDemo=function(string){console.log("string",string),$scope.imageTempUrl=".."+string},$scope.canvas=document.getElementById("slideCanvas"),$("#issue_marker").on("shown.bs.modal",function(e){$("#carousellist").flexslider({animation:"slide",controlNav:!1,animationLoop:!1,slideshow:!1,itemWidth:200,itemMargin:3})}),$scope.openSliderImage=function(url,index){console.log("url: ",url),$("#slideCanvas").css("background-image","url("+url+")")},$scope.isLine=!1,$scope.isCircle=!1,$scope.isMarker=!1,$scope.isText=!1,$scope.drawLineOnCanvas=function(){$scope.openFillColor=!1,$scope.snapshot,$scope.textForm=!1,$scope.dragging=!1,$scope.dragStartLocation,$("#gpsbtn").css("background-color","#D3D3D3"),$scope.btnMarker="../assets/images/gps.png",$scope.btnCircle="../assets/images/circle-shape-outline.png",$scope.btnLine="../assets/images/linewhite.png",$scope.btnText="../assets/images/text-option-interface-symbol.png",$("#txtbtn").css("background-color","#D3D3D3"),$("#circlebtn").css("background-color","#D3D3D3"),$("#linebutton").css("background-color","#009ACD"),$scope.context=$scope.canvas.getContext("2d"),$scope.rect=$scope.canvas.getBoundingClientRect(),1!=$scope.isCircle&&1!=$scope.isMarker&&1!=$scope.isText||($scope.canvas.removeEventListener("mousedown",dragStart),$scope.canvas.removeEventListener("mousemove",drag),$scope.canvas.removeEventListener("mouseup",dragStop),$scope.canvas.removeEventListener("mousedown",MarkWrite),$scope.canvas.removeEventListener("mousedown",TextWrite)),$scope.canvas.addEventListener("mousedown",dragStartLine),$scope.canvas.addEventListener("mousemove",dragLine),$scope.canvas.addEventListener("mouseup",dragStopLine)},$scope.UndoDrawing=function(){if($scope.UndoArray.length>0){var undoCtx=$scope.canvas.getContext("2d");undoCtx.clearRect(0,0,$scope.canvas.width,$scope.canvas.height);var imgdata=$scope.UndoArray.pop();$scope.redoArray.push(imgdata),$scope.UndoArray.forEach(function(element){undoCtx.putImageData(element,0,0)})}},$scope.RedoDrawing=function(){var undoCtx=$scope.canvas.getContext("2d");if($scope.redoArray.length>0){var redo=$scope.redoArray.pop();undoCtx.putImageData(redo,0,0)}},vm.saveMarkInfo=function(){var link=document.getElementById("link");link.setAttribute("download","MintyPaper.png"),link.setAttribute("href",$scope.canvas.toDataURL("image/png").replace("image/png","image/octet-stream")),link.click()}})}(),function(){angular.module("app").controller("materialCtrl",function($scope,$timeout,authFactory,$state,apiFactory,Notification,globals,NgMap,Upload,moment){var _this=this,vm=this,logout=globals.logout,userStore=globals.userStore,debounce=globals.debounce;if(!authFactory.checkUser())return void logout();vm.userData=userStore.get(),vm.logout=function(){logout()},vm.inputImg=[],vm.inputFiles=[],vm.dtOptions={retrieve:!0,paging:!1,info:!1,ordering:!1};var inventoryState=globals.inventoryState();vm.activeTab=inventoryState.get().tab,$(".tab-content .tab-pane").eq(inventoryState.get().tab).addClass("show"),vm.currentPage=1,vm.toggleTab=function(val){inventoryState.setTab(val)},vm.toggleObj={material:{systemTag:!0,materialCost:!1,rooferCost:!1,createdAt:!0,name:!1},combo:{systemTag:!0,materialCost:!1,rooferCost:!1,createdAt:!0,name:!1}},apiFactory.getAllSuppliers().then(function(resp){vm.suppliers=resp.data.list}).catch(function(e){console.log(e)}),vm.searchText=inventoryState.get().searchText,$scope.$watch("vm.searchText",function(text){inventoryState.text(text)},!0),vm.unitSelect=function(data){vm.selectedUnit=data.name},vm.sortDisplay=function(type,resource){if(type&&resource)return console.log("ty",vm.toggleObj[resource][type]),"Sorted By: "+type+" - "+(vm.toggleObj[resource][type]?"ASC":"DSC")},vm.sortMaterials=function(type,resource){void 0===vm.toggleObj[resource][type]?vm.toggleObj[resource][type]=!0:vm.toggleObj[resource][type]=!vm.toggleObj[resource][type];var apiName="material"===resource?"listAllMaterials":"listAllComboMaterials";apiFactory[apiName]({page:inventoryState.get().page[resource],chunk:10,sort:type,search:inventoryState.get().searchText,sortType:vm.toggleObj[resource][type]}).then(function(resp){vm[resource]=resp.data.list,vm[resource+"Count"]=resp.data.total,$timeout(function(){$("#"+resource+"Pagination").pagination({items:vm[resource+"Count"],itemsOnPage:10,cssStyle:"light-theme",hrefTextPrefix:"#",ordering:!1,currentPage:inventoryState.get().page[resource],onPageClick:function(page,event){event.preventDefault(),inventoryState.setPage(resource,page),apiFactory[apiName]({page:page,chunk:10,sort:type,search:inventoryState.get().searchText,sortType:vm.toggleObj[resource][type]}).then(function(resp){vm[resource]=resp.data.list}).catch(function(e){console.log(e)})}})})}).catch(function(e){console.log(e)})};var searchDebounce=debounce(250);vm.searchMaterials=function(text,resource){searchDebounce(function(){var apiName="material"===resource?"listAllMaterials":"listAllComboMaterials";apiFactory[apiName]({page:1,chunk:10,search:text,sort:"createdDate",sortType:!1}).then(function(resp){vm[resource]=resp.data.list,vm[resource+"Count"]=resp.data.total,$timeout(function(){$("#"+resource+"Pagination").pagination({items:vm[resource+"Count"],itemsOnPage:10,cssStyle:"light-theme",hrefTextPrefix:"#",ordering:!1,currentPage:1,onPageClick:function(page,event){event.preventDefault(),apiFactory[apiName]({page:page,chunk:10,sort:type,sortType:vm.toggleObj[resource][type]}).then(function(resp){vm.materials=resp.data.list}).catch(function(e){console.log(e)})}})})}).catch(function(e){console.log(e)})},[text,resource])},vm.sortMaterials("createdAt","material"),vm.sortMaterials("createdAt","combo");vm.addMaterial={conversionFactor:1,maintenancePeriod:90,maintenanceDate:moment().add(90,"days").format()},vm.changeMaintenancePeriod=function(days){vm.addMaterial.maintenanceDate=moment().add(days,"days").format()},vm.tabSettings={disable:!0},vm.tabChange=function(val,flag){if("combo"==flag){var tabChangeFun=function(val){$(".dcp_modal .nav-tabs li .nav-link").removeClass("active"),$(".dcp_modal .nav-tabs li .nav-link").eq(val).addClass("active"),$(".dcp_modal .tab-content .tab-pane").removeClass("active"),$(".dcp_modal .tab-content .tab-pane").removeClass("show"),$(".dcp_modal .tab-content .tab-pane").eq(val).addClass("show"),$(".dcp_modal .tab-content .tab-pane").eq(val).addClass("active")};if(0==val);else if(1==val){if(!vm.addComboMaterialForm.name)return void Notification.error("Please enter combo material name");if(!vm.selectedUnit)return void Notification.error("Please select unit");if(!vm.addComboMaterialForm.description)return void Notification.error("Please enter combo description");tabChangeFun(val)}else if(2==val){if(0==vm.comboMaterialList.length)return void Notification.error("Please add Combination list");vm.TotalMC=0,vm.TotalRC=0,angular.forEach(vm.comboMaterialList,function(value){vm.TotalMC=parseFloat(vm.TotalMC)+parseFloat(value.materialCost),vm.TotalRC=parseFloat(vm.TotalRC)+parseFloat(value.rooferCost)}),vm.TotalMC=parseFloat(Math.round(100*vm.TotalMC)/100),vm.TotalRC=parseFloat(Math.round(100*vm.TotalRC)/100),tabChangeFun(val)}}else{if(!vm.addMaterial.materialName)return void Notification.error("Please enter material name");if(!vm.addMaterial.currency)return void Notification.error("Please select currency");$(".material_modal .nav-tabs li .nav-link").removeClass("active"),$(".material_modal .nav-tabs li .nav-link").eq(val).addClass("active"),$(".material_modal .tab-content .tab-pane").removeClass("active"),$(".material_modal .tab-content .tab-pane").removeClass("show"),$(".material_modal .tab-content .tab-pane").eq(val).addClass("show"),$(".material_modal .tab-content .tab-pane").eq(val).addClass("active")}},apiFactory.getCompanyById(vm.userData.companyId).then(function(resp){vm.companyData=resp.data,vm.addMaterial.currency=vm.companyData.currentCurrency.currencyCode}).then(function(e){console.log(e)}),$scope.$watch("vm.addMaterial.currency",function(value){$("a.item-selected span").removeClass("glyphicon glyphicon-remove"),$("a.item-selected span").addClass("fas fa-times mr-3")}),vm.showConversionRate=function(from,to){$(".loader").show();var currencyData={from:from,to:to};apiFactory.showConversionRate(currencyData).then(function(resp){vm.addMaterial.conversionFactor=resp.data.conversionFactor,$timeout(function(){$(".loader").hide()},500)}).catch(function(e){console.log(e)})},vm.addMaterialNext=function(){console.log(vm.addMaterial.materialUnit),null!=vm.addMaterial.materialName||""!=vm.addMaterial.materialName?vm.addMaterial.materialUnit||""!=vm.addMaterial.materialUnit?null!=vm.addMaterial.currency||""!=vm.addMaterial.currency?$scope.activeJustified=1:Notification.error("Please select Currency"):Notification.error("Please select material Unit"):Notification.error("Please enter material name")},vm.changeCost=function(cost,conversionRate){return cost*conversionRate},vm.deleteFile=function(indexVal,type){"image"?vm.inputImg.splice(indexVal,1):vm.inputFiles.splice(indexVal,1)},vm.descriptionPopover=function(indexVal,type){$scope.fileType=type,$scope.fileIndex=indexVal},vm.addDescription=function(index,data){"image"==$scope.fileType?vm.inputImg[index].description=data:vm.inputFiles[index].description=data,console.log($(_this).parent().attr("class"))},vm.addMaterialDetails=function(){$scope.uploadFiles=[].concat(vm.inputImg,vm.inputFiles),console.log($scope.uploadFiles);var formData={name:vm.addMaterial.materialName,unit:vm.selectedUnit,materialCost:{value:vm.changeCost(vm.addMaterial.materialCostValue,vm.addMaterial.conversionFactor),currencyCode:vm.companyData.currentCurrency.currencyCode},rooferCost:{value:vm.changeCost(vm.addMaterial.rooferCostValue,vm.addMaterial.conversionFactor),currencyCode:vm.companyData.currentCurrency.currencyCode},suppliers:vm.addMaterial.suppliers,files:$scope.uploadFiles,assetObj:$scope.uploadFiles.map(function(x,i){return{assetDescription:x.description}})};apiFactory.createMaterials(formData).then(function(resp){$scope.tab=1,$("#todo_modal").modal("hide"),Notification.success(resp.data.message),vm.toggleObj.material.createdAt=!0,vm.sortMaterials("createdAt","material"),vm.addMaterial={conversionFactor:1}}).catch(function(e){console.log(e)})},vm.getMaterialById=function(id){apiFactory.getMaterialById(id).then(function(resp){console.log(resp)}).catch(function(e){console.log(e)})},$("#addMaterial").on("hide.bs.modal",function(){$scope.activeJustified=0,vm.addMaterial={conversionFactor:1}}),vm.comboMaterialList=[],vm.addComboMaterialForm={},vm.percentageAddition=[],vm.mUnits=globals.mUnits,globals.getCurrency().then(function(resp){vm.currencies=resp.data,vm.loadCurrencies=function($query){return new Promise(function(resolve,reject){resolve(resp.data)})}}),apiFactory.listAllMaterials().then(function(resp){vm.allmaterilaList=resp.data.list}).catch(function(e){console.log(e)}),vm.comboList={quantity:1,materialCost:0,rooferCost:0},vm.getMaterialInfo=function(material){var materialInfo=JSON.parse(material);material&&(vm.comboList.materialCost=parseFloat(Math.round(vm.comboList.quantity*materialInfo.currentRate.materialCost.value*100)/100),vm.comboList.rooferCost=parseFloat(Math.round(vm.comboList.quantity*materialInfo.currentRate.rooferCost.value*100)/100),$("a.item-selected span").removeClass("glyphicon glyphicon-remove"),$("a.item-selected span").addClass("fas fa-times mr-3"))},vm.QtyChange=function(val,data){var material=JSON.parse(data);""==val||0==val?(vm.comboList.quantity=1,val=1,vm.comboList.materialCost=parseFloat(Math.round(val*material.currentRate.materialCost.value*100)/100),vm.comboList.rooferCost=parseFloat(Math.round(val*material.currentRate.rooferCost.value*100)/100)):(vm.comboList.materialCost=parseFloat(Math.round(val*material.currentRate.materialCost.value*100)/100),vm.comboList.rooferCost=parseFloat(Math.round(val*material.currentRate.rooferCost.value*100)/100))},vm.addPercentageValue=function(){vm.percentageAddition.push({percentageType:"",percentageValue:""})},vm.removePercentageAddition=function(index){vm.percentageAddition.splice(index,1)},vm.materialCombination=function(material){var data=JSON.parse(material);console.log("material--",data),""!=data&&(vm.comboMaterialList.push({materialId:data._id,name:data.name,quantity:vm.comboList.quantity,materialCost:vm.comboList.materialCost,rooferCost:vm.comboList.rooferCost,percentageAdditions:vm.percentageAddition}),vm.percentageAddition=[],vm.comboList={quantity:1,materialCost:0,rooferCost:0},vm.addComboMaterialForm.comboMaterial="",$(".select2-choice .select2-chosen").text(""))},vm.fileUpdated=function(files,event,model){var fileObj=event.target.files;vm.fileNames=Object.keys(fileObj).map(function(x){return fileObj[x].name}),angular.forEach(files,function(x,index){x.description=""})},vm.createComboMaterialList=function(){var cmList=[];vm.comboMaterialList.forEach(function(x){var perAdditions={};0!==x.percentageAdditions.length&&x.percentageAdditions.forEach(function(x){perAdditions[x.percentageType]=Number(x.percentageValue)}),cmList.push({materialId:x.materialId,quantity:x.quantity,percentageAdditions:perAdditions})});var data={name:vm.addComboMaterialForm.name,unit:vm.addComboMaterialForm.unitSymbol,comboMaterialList:cmList,files:vm.inputImg};apiFactory.getSystemTag().then(function(resp){var systemTag={systemTag:resp.data.comboTag};angular.extend(data,systemTag),apiFactory.createComboMaterial(data).then(function(resp){Notification.success(resp.data.message),$("#addComboMaterial").modal("hide")}).catch(function(e){Notification.error(e.data.message)})}).catch(function(e){Notification.error(e.data.message)})},vm.removeMateril=function(item){vm.comboMaterialList.splice(item,1)}})}(),function(){angular.module("app").controller("materialViewCtrl",function($scope,$timeout,authFactory,$state,$stateParams,apiFactory,Notification,globals,$location,Upload){var vm=this,logout=globals.logout,userStore=globals.userStore;if(!authFactory.checkUser())return void logout();vm.userData=userStore.get(),vm.logout=function(){logout()},vm.materialId=$stateParams.id,vm.mUnits=globals.mUnits,globals.getCurrency().then(function(resp){vm.currencies=resp.data,vm.loadCurrencies=function($query){return new Promise(function(resolve,reject){resolve(resp.data)})}}),vm.showConversionRate=function(from,to){$(".loader").show();var currencyData={from:from,to:to};from&&apiFactory.showConversionRate(currencyData).then(function(resp){vm.editMaterial.conversionFactor=resp.data.conversionFactor,$timeout(function(){$(".loader").hide()},500)}).catch(function(e){console.log(e)})},vm.tabChange=function(val){vm.editMaterial.name?vm.selectedUnit?vm.editMaterial.currency?($(".material_modal .nav-tabs li .nav-link").removeClass("active"),$(".material_modal .nav-tabs li .nav-link").eq(val).addClass("active"),$(".material_modal .tab-content .tab-pane").removeClass("active"),$(".material_modal .tab-content .tab-pane").removeClass("show"),$(".material_modal .tab-content .tab-pane").eq(val).addClass("show"),$(".material_modal .tab-content .tab-pane").eq(val).addClass("active")):Notification.error("Please select currency"):Notification.error("Please select material unit"):Notification.error("Please enter material name")},vm.editFlag=!1,vm.removedFiles=[],$scope.getMatDetail=function(){apiFactory.getMaterialById(vm.materialId).then(function(resp){vm.matrialData=resp.data,vm.matrialName=vm.matrialData.name,vm.matrialUnit=vm.matrialData.unit,console.log(vm.matrialData),vm.matrialCost=Number(vm.matrialData.currentRate.materialCost.value).toFixed(2),vm.matrialCurrencyCode=vm.matrialData.currentRate.materialCost.currencyCode,vm.matrialRooferCost=Number(vm.matrialData.currentRate.rooferCost.value).toFixed(2),vm.matrialRooferCurrencyCode=vm.matrialData.currentRate.rooferCost.currencyCode,vm.matrialCreatedBy=vm.matrialData.providerData.updatedBy.name,vm.matrialCreatedAt=vm.matrialData.createdAt,vm.matrialUpdatedAt=vm.matrialData.createdAt,$scope.gray_box=[{img:"/assets/images/Unit-Icon.png",title:"Unit",value:vm.matrialUnit},{img:"/assets/images/Dollar-Icon.png",title:"Material Cost",value:vm.matrialCost,currencyCode:vm.matrialCurrencyCode},{img:"/assets/images/Dollar-Icon.png",title:"Roofer Cost",value:vm.matrialRooferCost,currencyCode:vm.matrialRooferCurrencyCode}]}).catch(function(e){console.log(e)})},$scope.getMatDetail(),vm.removeImg=function(img){vm.removedFiles.push(vm.matrialData.files[img]._id),vm.editMaterial.files.splice(img,1)},vm.editMaterialFunction=function(val){if(1==val)vm.editFlag=!0,vm.editMaterial=angular.copy(vm.matrialData),vm.selectedUnit=vm.editMaterial.unit,vm.currentCurrency=vm.editMaterial.currentRate.rooferCost.currencyCode,vm.editMaterial.currency=vm.editMaterial.currentRate.rooferCost.currencyCode,vm.showConversionRate(vm.currentCurrency,vm.editMaterial.currency),console.log(vm.editMaterial),$("#todo_modal.material_modal").modal("show");else if(2==val){vm.editFlag=!1;var materialupdatedata={name:vm.editMaterial.name,unit:vm.selectedUnit,removedFiles:vm.removedFiles,currentRate:{materialCost:{value:vm.editMaterial.currentRate.materialCost.value,currencyCode:vm.editMaterial.currency},rooferCost:{value:vm.editMaterial.currentRate.rooferCost.value,currencyCode:vm.editMaterial.currency}},file:vm.inputFiles};apiFactory.updateMaterialById(vm.materialId,materialupdatedata).then(function(resp){Notification.success(resp.data.message),$("#todo_modal.material_modal").modal("hide"),$scope.getMatDetail(),vm.fileNames=[]}).catch(function(e){console.log(e)})}},vm.fileUpdated=function(files,event){var fileObj=event.target.files;vm.fileNames=Object.keys(fileObj).map(function(x){return fileObj[x].name})},$scope.mat_headers=[{mat_head:"S. No."},{mat_head:"Date"},{mat_head:"Material Cost"},{mat_head:"Worker Cost"}],$scope.mat_items=[{s_no:"1",date:"Sep 25, 2018",m_cost:"200 DKK",w_cost:"200 DKK"},{s_no:"2",date:"Sep 25, 2018",m_cost:"200 DKK",w_cost:"200 DKK"},{s_no:"3",date:"Sep 25, 2018",m_cost:"200 DKK",w_cost:"200 DKK"},{s_no:"4",date:"Sep 25, 2018",m_cost:"200 DKK",w_cost:"200 DKK"},{s_no:"5",date:"Sep 25, 2018",m_cost:"200 DKK",w_cost:"200 DKK"},{s_no:"6",date:"Sep 25, 2018",m_cost:"200 DKK",w_cost:"200 DKK"},{s_no:"7",date:"Sep 25, 2018",m_cost:"200 DKK",w_cost:"200 DKK"},{s_no:"8",date:"Sep 25, 2018",m_cost:"200 DKK",w_cost:"200 DKK"},{s_no:"9",date:"Sep 25, 2018",m_cost:"200 DKK",w_cost:"200 DKK"},{s_no:"10",date:"Sep 25, 2018",m_cost:"200 DKK",w_cost:"200 DKK"},{s_no:"11",date:"Sep 25, 2018",m_cost:"200 DKK",w_cost:"200 DKK"},{s_no:"12",date:"Sep 25, 2018",m_cost:"200 DKK",w_cost:"200 DKK"}]})}(),function(){angular.module("app").controller("meetingRoomCtrl",function($scope,$timeout,authFactory,$state,apiFactory,Notification,globals,Upload){$scope.todo_list=[{img:"/assets/images/To-Do-Icon.png",subtitle:"1.",title:"Lorem ipsum dolor sit amet,consectetur adipisicing elit,sed do eiusmod tempor.",work:"In 1 Hour",classname:"red-color"},{img:"/assets/images/To-Do-Icon.png",subtitle:"2.",title:"Lorem ipsum dolor sit amet,consectetur adipisicing elit,sed do eiusmod tempor.",work:"In 1 Day",classname:"yellow-color"},{img:"/assets/images/To-Do-Icon.png",subtitle:"3.",title:"Lorem ipsum dolor sit amet,consectetur adipisicing elit,sed do eiusmod tempor.",work:"In 1 Week",classname:"green-color"},{img:"/assets/images/To-Do-Icon.png",subtitle:"4.",title:"Lorem ipsum dolor sit amet,consectetur adipisicing elit,sed do eiusmod tempor.",work:"In 2 Weeks",classname:"gray-color"},{img:"/assets/images/To-Do-Icon.png",subtitle:"5.",title:"Lorem ipsum dolor sit amet,consectetur adipisicing elit,sed do eiusmod tempor.",work:"In 3 Weeks",classname:"gray-color"},{img:"/assets/images/To-Do-Icon.png",subtitle:"6.",title:"Lorem ipsum dolor sit amet,consectetur adipisicing elit,sed do eiusmod tempor.",work:"In 4 Weeks",classname:"gray-color"}];var logout=globals.logout,userStore=globals.userStore;if(!authFactory.checkUser())return void logout();this.logout=function(){logout()},this.userData=userStore.get()})}(),function(){angular.module("app").controller("payrollCtrl",function($scope,$timeout,$location,authFactory,$state,apiFactory,Notification,globals){var logout=globals.logout,userStore=globals.userStore;if(!authFactory.checkUser())return void logout();this.userData=userStore.get(),this.logout=function(){logout()};$location.path();$(".payrollMenu").css("display","block !important"),$(".payrollList").DataTable()})}(),function(){angular.module("app").controller("preLoginCtrl",function($scope,$timeout,$state,authFactory,apiFactory,globals,localStorageService,Notification,NgMap){var vm=this,userStore=(globals.progress,globals.logout,globals.userStore);if(vm.loggedIn=!1,authFactory.checkUser())return $state.go("dashboard"),void(vm.loggedIn=!0);vm.gmap={url:"https://maps.googleapis.com/maps/api/js?key=AIzaSyA3MIA-mKWq_60q1K0zOHguraxT-1QPxNU",styles:[{elementType:"geometry",stylers:[{color:"#212121"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{elementType:"labels.text.stroke",stylers:[{color:"#212121"}]},{featureType:"administrative",elementType:"geometry",stylers:[{color:"#757575"}]},{featureType:"administrative.country",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"administrative.land_parcel",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#181818"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"poi.park",elementType:"labels.text.stroke",stylers:[{color:"#1b1b1b"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#2c2c2c"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#8a8a8a"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#373737"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#3c3c3c"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#4e4e4e"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#3d3d3d"}]}],markers:[[28.7041,77.1025],[13.0827,80.2707]]},NgMap.getMap().then(function(map){map.setOptions({styles:vm.gmap.styles,disableDefaultUI:!0,zoom:2,center:{lat:28.7041,lng:77.1025}})}),vm.regsiterModal=function(){$("#loginModal, #forgotPassModal").modal("hide"),$("#registerModal").modal("show")},vm.loginModal=function(){$("#registerModal, #forgotPassModal").modal("hide"),$("#loginModal").modal("show")},vm.forgotPassModal=function(){$("#loginModal").modal("hide"),$("#forgotPassModal").modal("show")},vm.login=function(isValid,formData){console.log(formData),apiFactory.login(formData).then(function(resp){$("#loginModal").modal("hide"),$("body").removeClass("modal-open"),$(".modal-backdrop").hide(),localStorageService.set("access-token",resp.data.token),userStore.set(resp.data.user),$state.go("dashboard"),Notification.success("Login success")}).catch(function(err){Notification.error(err.data.message)})},vm.forgotPass=function(isValid,formData){if(null==formData)Notification.error("please Valid mail Id");else{var data=formData;apiFactory.forgotPassword(data).then(function(resp){$("#forgotPassModal").modal("hide"),Notification.success(resp.data.message)}).catch(function(err){Notification.error(err.data.message)})}},vm.register=function(isValid,formData){apiFactory.registration(formData).then(function(resp){$("#registerModal").modal("hide"),Notification.success(resp.data.message)}).catch(function(err){$("#registerModal").modal("hide"),Notification.error(err.data.message)})},vm.subscribe=function(email){/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(email)?apiFactory.subscribe({email:email}).then(function(resp){vm.subscribeEmail="",Notification.success(resp.data.message)}).catch(function(err){Notification.error(err.data.message)}):Notification.error("Invalid email")}})}(),function(){angular.module("app").controller("projectCtrl",function($scope,$timeout,authFactory,$state,apiFactory,Notification,globals,NgMap){var logout=globals.logout,userStore=globals.userStore;if(!authFactory.checkUser())return void logout();this.userData=userStore.get(),apiFactory.listAllProjects().then(function(resp){console.log(resp.data)}).catch(function(e){console.log(e)}),this.logout=function(){logout()}})}(),function(){angular.module("app").controller("reportDetailCtrl",function($scope,$timeout,authFactory,$state,apiFactory,Notification,NgMap,globals,localStorageService){var vm=this;$scope.image1="../assets/images/reportimgs/rep.jpg",$scope.image2="../assets/images/reportimgs/file.jpg";var logout=globals.logout;$scope.reportObj={},$scope.shwCommentSection=!1,$scope.ReportIssue={},$scope.issueToAdd=[],$scope.models={selected:null},authFactory.checkUser()||logout();vm.logout=function(){logout()},$scope.exportToPdf=function(){var img=new Image;img.src="../assets/images/reportimgs/rep.jpg";var img1=new Image;img1.src="../assets/images/reportimgs/file.jpg";var doc=new jsPDF("p");doc.addImage(img,"png",15,20,90,90),doc.addImage(img1,"png",110,20,90,90),doc.autoTable({html:"#statictable",margin:{top:120},pageBreak:"auto",tableWidth:"auto",showHeader:"everyPage"}),doc.setFontSize(25),doc.text(20,150,"Comments"),doc.setFontSize(10),doc.setFont("helvetica"),doc.text(20,160,"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"),doc.text(20,170,"incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco"),doc.text(20,180," laboris nisi ut aliquip ex ea commodo consequat."),doc.save("column8.pdf")};var enabled=!0,chunkSize=5;vm.issueSearch="",vm.enableLazyLoad=!1,vm.sortParams={field:"created",type:!1},$scope.openReportPicker=function(){vm.enableLazyLoad=!0,apiFactory.listAllIssues({search:vm.issueSearch,chunk:chunkSize,page:1,sort:vm.sortParams.field,sortType:vm.sortParams.type}).then(function(resp){vm.issuePickerData=[],$scope.issueToAdd.length>0&&$scope.issueToAdd.forEach(function(element){resp.data.list.forEach(function(resdata,index){element._id==resdata._id?resp.data.list.splice(index,1):console.log("false")})}),$timeout(function(){vm.issuePickerData=resp.data.list,$("#listissuesmodal").modal("hide"),$("#chooseIssueModal").modal("show"),$scope.EditMode=!1})}).catch(function(e){console.log(e)})},$("#chooseIssueModal").on("hide.bs.modal",function(){vm.enableLazyLoad=!1}),vm.closeIssuePicker=function(){$("#chooseIssueModal").modal("hide"),vm.issueSearch=""},$scope.addMore=function(){console.log("calling add more"),enabled&&(enabled=!1,$timeout(function(){enabled=!0},500),chunkSize+=5,apiFactory.listAllIssues({search:vm.issueSearch,chunk:chunkSize,page:1,sort:vm.sortParams.field,sortType:vm.sortParams.type}).then(function(resp){vm.issuePickerData=[],$scope.issueToAdd.length>0&&$scope.issueToAdd.forEach(function(element){resp.data.list.forEach(function(resdata,index){element._id==resdata._id&&resp.data.list.splice(index,1)})}),$timeout(function(){vm.issuePickerData=resp.data.list})}).catch(function(e){console.log(e)}))},vm.searchIssues=function(text){console.log("serchtext",text),apiFactory.listAllIssues({search:vm.issueSearch,chunk:chunkSize,page:1,sort:vm.sortParams.field,sortType:vm.sortParams.type}).then(function(resp){vm.issuePickerData=resp.data.list}).catch(function(e){console.log(e)})},$scope.remarkData=[],$scope.addRemark=function(title,value){null==title&&null==value||($scope.remarkData.push({Title:title,Value:value}),$("#remarktitle").val(""),$("#remarkvalue").val(""))},vm.chooseIssues=function(issue,index,array){issue?(array.splice(index,1),$scope.issueToAdd.push(issue),$("#chooseIssueModal").modal("hide"),$("#listissuesmodal").modal("show")):Notification.error("No selection")},vm.addToListIssuePicker=function(){$("#chooseIssueModal").modal("hide"),$("#listissuesmodal").modal("show")},$scope.sendIssueToPdf=function(){$("#listissuesmodal").modal("hide"),$scope.shwCommentSection=!0},$scope.coverPageModal=function(){$("#coverpagemodal").modal("show")},$scope.aboutUsModal=function(){$("#aboutusmodal").modal("show")},$scope.projectMetaModal=function(){$("#projectmetamodal").modal("show")},$scope.reportremarkModal=function(){$("#reportremarkmodal").modal("show")},$scope.listIssueModelClick=function(){$("#listissuesmodal").modal("show")},$scope.setReportObj=function(object){console.log(object),$scope.ReportIssue.title=object.title,$scope.ReportIssue.description=object.description,$scope.ReportIssue.companyName=object.companyName,$scope.ReportIssue.email=object.email,$scope.ReportIssue.website=object.website,$scope.ReportIssue.phone=object.phone,$scope.ReportIssue.projectName=object.projectName,$scope.ReportIssue.serialNo=object.serialNo,$scope.ReportIssue.enterprise=object.enterprise,$scope.issueToAdd.length>0&&($scope.ReportIssue.issueToAdd=$scope.issueToAdd),$scope.remarkData.length>0&&($scope.ReportIssue.remarkData=$scope.remarkData),$scope.ReportIssue.authorName=object.authorName,$scope.ReportIssue.remarkDate=object.remarkDate,$("#coverpagemodal").modal("hide"),$("#aboutusmodal").modal("hide"),$("#projectmetamodal").modal("hide"),$("#reportremarkmodal").modal("hide"),$("#chooseIssueModal").modal("hide")},$scope.EditMode=!1,$scope.EditIssueData=function(){$scope.EditMode=!0},$scope.removeFromIssueList=function(index,array){array.splice(index,1),console.log($scope.issueToAdd)}})}(),function(){angular.module("app").controller("reportsCtrl",function($scope,$timeout,authFactory,$state,apiFactory,Notification,NgMap,globals,localStorageService){var vm=this,logout=globals.logout;globals.userStore;authFactory.checkUser()||logout();$scope.currentUser=localStorageService.get("userData"),$scope.reportCategory=["issueReport","safetyReport","qaReport"],apiFactory.listAllUsers().then(function(resp){vm.allAdminUsers=resp.data.list}),apiFactory.listAllProjects().then(function(resp){vm.projectList=resp.data}).catch(function(e){console.log(e)}),vm.logout=function(){logout()}})}(),function(){angular.module("app").controller("reportsListingCtrl",function($scope,$timeout,$location,authFactory,$state,apiFactory,Notification,globals){var logout=globals.logout,userStore=globals.userStore;if(!authFactory.checkUser())return void logout();this.userData=userStore.get(),this.logout=function(){logout()},"/payroll"==$location.path()&&$(".payrollMenu").css("display","block !important");$(".payrollList").DataTable()})}(),function(){angular.module("app").controller("setPasswordCtrl",function($scope,$timeout,$location,authFactory,$state,apiFactory,Notification,globals){var vm=this,token=$location.search().token;if(!token)return;apiFactory.isTokenValid({token:token}).then(function(resp){console.log(resp.data),resp.data.tokenValid?(vm.user=resp.data.user,$(".forgotPassModal").modal("show")):$(".tokenInvalid").modal("show")}).catch(function(e){console.log(e)}),vm.resetPass=function(isValid,data){if($(".forgotPassModal").modal("hide"),vm.resetPass.password===vm.resetPass.c_password){var data={password:vm.resetPass.password,user:vm.user};console.log(data),apiFactory.setPassword(data).then(function(resp){Notification.success(resp.data.message),$state.go("preLogin")}).catch(function(e){console.log(e)})}else Notification.error("Password Mismatch, Please enter same password")},vm.back=function(){$(".tokenInvalid").modal("hide"),$timeout(function(){$state.go("preLogin")})}})}(),function(){angular.module("app").controller("settingCtrl",function($scope,$timeout,authFactory,$state,apiFactory,Notification,globals,Upload){var vm=this,logout=globals.logout,userStore=globals.userStore,companyStore=globals.companyStore;if(!authFactory.checkUser())return void logout();vm.userData=userStore.get(),companyStore.get()?(vm.companyData=companyStore.get(),vm.privileges=vm.companyData.privileges):apiFactory.getCompanyById(vm.userData.companyId).then(function(resp){vm.companyData=resp.data,vm.privileges=vm.companyData.privileges}).catch(function(e){console.log(e)});vm.submitRoleSettings=function(formData){apiFactory.updateRoleBasedAccess(formData).then(function(resp){Notification.success(resp.data.message),companyStore.refetch(vm.userData.companyId)}).catch(function(e){Notification.error("Something went wrong"),console.log(e)})},vm.goToDashboard=function(){$state.go("dashboard")},vm.logout=function(){logout()}})}(),function(){angular.module("app").controller("subcontractorCtrl",function($scope,$timeout,authFactory,$state,apiFactory,Notification,NgMap,globals,localStorageService){var vm=this;vm.selectedMaterials=[],vm.members2=[];var logout=globals.logout;globals.debounce,globals.userStore;authFactory.checkUser()||logout();vm.getSubcontractors=function(type){apiFactory.getAllSubcontractors({page:1,chunk:10,sort:type}).then(function(resp){vm.allSubcontractor=resp.data.list,vm.subcontractorsCount=resp.data.total,console.log("suppliers are:",vm.allSubcontractor),$timeout(function(){$("#pagination").pagination({items:vm.subcontractorsCount,itemsOnPage:10,cssStyle:"light-theme",hrefTextPrefix:"#",ordering:!1,currentPage:1,onPageClick:function(page,event){event.preventDefault(),apiFactory.getAllSubcontractors({page:page,chunk:10}).then(function(resp){vm.allSubcontractor=resp.data.list}).catch(function(e){console.log(e)})}})})}).catch(function(e){console.log(e)})},vm.getSubcontractors("created"),vm.addSubcontractorNext=function(){$("#home").hasClass("active")?(console.log("home"),$("#navigation ul li a.active").removeClass("active"),$("#profile-tab").addClass("active"),$("#home").removeClass("show"),$("#home").removeClass("active"),$("#profile").addClass("show"),$("#profile").addClass("active")):$("#profile-tab").hasClass("active")&&(console.log("profile"),$("#navigation ul li a.active").removeClass("active"),$("#contact-tab").addClass("active"),$("#profile").removeClass("show"),$("#profile").removeClass("active"),$("#contact").addClass("show"),$("#contact").addClass("active"))},vm.addSubcontractorPrevious=function(){$("#profile-tab").hasClass("active")?(console.log("home"),$("#navigation ul li a.active").removeClass("active"),$("#home").addClass("active"),$("#profile").removeClass("show"),$("#profile").removeClass("active"),$("#home").addClass("show"),$("#home").addClass("active")):$("#contact-tab").hasClass("active")&&(console.log("profile"),$("#navigation ul li a.active").removeClass("active"),$("#profile-tab").addClass("active"),$("#contact").removeClass("show"),$("#contact").removeClass("active"),$("#profile").addClass("show"),$("#profile").addClass("active"))},$scope.deleteMaterial=function(index,array){array.splice(index,1)},$scope.deleteStaff=function(index,array){array.splice(index,1)},$scope.onChange=function(files){null!=files[0]&&($scope.FILEIMG=URL.createObjectURL(files[0]),$scope.fileExt=files[0].name.split(".").pop())},globals.getCountryCode().then(function(resp){vm.getCountryCode=resp.data,vm.loadCountryCode=function($query){return new Promise(function(resolve,reject){resolve(resp.data)})}}),apiFactory.listAllMaterials().then(function(resp){vm.allMaterials=resp.data.list}),vm.addMaterial=function(item){vm.selectedMaterials.push(item)},vm.addMember=function(name){vm.members2.push(name)},$scope.createSubcontractor=function(subcontractor){subcontractor.supplies=[],subcontractor.staff=[],console.log("subcontractor",subcontractor),vm.selectedMaterials.length>0&&vm.selectedMaterials.forEach(function(element){subcontractor.supplies.push(element._id)}),vm.members2.length>0&&vm.members2.forEach(function(element){subcontractor.staff.push(element)}),console.log("subcontractor",subcontractor),apiFactory.createNewSubcontractor(subcontractor).then(function(resp){Notification.success("Sub-contractor has been saved successfully"),vm.supplier={},vm.selectedMaterials=[],vm.mambers2=[],$scope.inputFiles=[],subcontractor.supplies=[],subcontractor.staff=[],$("#sub-contractor_modal").modal("hide"),vm.getSubcontractors("created")}).catch(function(e){console.log(e),Notification.error("Something went wrong")})},$scope.contracts=[{title:"Subcontractor A",time:"Sep 25, 2018 at 4:00 PM",img:"assets/images/suppliers/tree_logo.png"},{title:"Subcontractor A",time:"Sep 25, 2018 at 4:00 PM",img:"assets/images/suppliers/tree_logo.png"},{title:"Subcontractor A",time:"Sep 25, 2018 at 4:00 PM",img:"assets/images/suppliers/tree_logo.png"},{title:"Subcontractor A",time:"Sep 25, 2018 at 4:00 PM",img:"assets/images/suppliers/tree_logo.png"},{title:"Subcontractor A",time:"Sep 25, 2018 at 4:00 PM",img:"assets/images/suppliers/tree_logo.png"},{title:"Subcontractor A",time:"Sep 25, 2018 at 4:00 PM",img:"assets/images/suppliers/tree_logo.png"}]})}(),function(){angular.module("app").controller("subcontractorDetailCtrl",function($scope,$timeout,authFactory,$state,$stateParams,apiFactory,Notification,NgMap,globals,localStorageService){var vm=this,logout=globals.logout,userStore=globals.userStore;authFactory.checkUser()||logout();vm.userData=userStore.get(),vm.logout=function(){logout()},vm.subcontractorId=$stateParams.id,$scope.getSubcontractorDetail=function(){apiFactory.getSubcontractorById(vm.subcontractorId).then(function(resp){vm.subcontractorData=resp.data})},$scope.getSubcontractorDetail()})}(),function(){angular.module("app").controller("supplierCtrl",function($scope,$rootScope,$timeout,authFactory,$state,apiFactory,Notification,globals,fileManagerFactory,Upload,localStorageService){var vm=this;vm.selectedMaterials=[],vm.members2=[];var logout=globals.logout;globals.debounce,globals.userStore;$scope.activeJustified=0,authFactory.checkUser()||logout();vm.getSuppliers=function(type){apiFactory.getAllSuppliers({page:1,chunk:10,sort:type}).then(function(resp){vm.allSuppliers=resp.data.list,vm.suppiersCount=resp.data.total,console.log("suppliers are:",vm.allSuppliers),$timeout(function(){$("#pagination").pagination({items:vm.suppiersCount,itemsOnPage:10,cssStyle:"light-theme",hrefTextPrefix:"#",ordering:!1,currentPage:1,onPageClick:function(page,event){event.preventDefault(),apiFactory.getAllSuppliers({page:page,chunk:10}).then(function(resp){vm.allSuppliers=resp.data.list}).catch(function(e){console.log(e)})}})})}).catch(function(e){console.log(e)})},vm.getSuppliers("created"),$scope.onChange=function(files){null!=files[0]&&($scope.FILEIMG=URL.createObjectURL(files[0]),$scope.fileExt=files[0].name.split(".").pop())},globals.getCountryCode().then(function(resp){vm.getCountryCode=resp.data,vm.loadCountryCode=function($query){return new Promise(function(resolve,reject){resolve(resp.data)})}}),apiFactory.listAllMaterials().then(function(resp){vm.allMaterials=resp.data.list}),vm.addMaterial=function(item){vm.selectedMaterials.push(item)},vm.addMember=function(name){vm.members2.push(name)},vm.addSupplierNext=function(){$("#home").hasClass("active")?(console.log("home"),$("#navigation ul li a.active").removeClass("active"),$("#profile-tab").addClass("active"),$("#home").removeClass("show"),$("#home").removeClass("active"),$("#profile").addClass("show"),$("#profile").addClass("active")):$("#profile-tab").hasClass("active")&&(console.log("profile"),$("#navigation ul li a.active").removeClass("active"),$("#contact-tab").addClass("active"),$("#profile").removeClass("show"),$("#profile").removeClass("active"),$("#contact").addClass("show"),$("#contact").addClass("active"))},vm.addSupplierPrevious=function(){$("#profile-tab").hasClass("active")?(console.log("home"),$("#navigation ul li a.active").removeClass("active"),$("#home").addClass("active"),$("#profile").removeClass("show"),$("#profile").removeClass("active"),$("#home").addClass("show"),$("#home").addClass("active")):$("#contact-tab").hasClass("active")&&(console.log("profile"),$("#navigation ul li a.active").removeClass("active"),$("#profile-tab").addClass("active"),$("#contact").removeClass("show"),$("#contact").removeClass("active"),$("#profile").addClass("show"),$("#profile").addClass("active"))},$scope.deleteMaterial=function(index,array){array.splice(index,1)},$scope.deleteStaff=function(index,array){array.splice(index,1)},$scope.createSupplier=function(supplier){supplier.supplies=[],supplier.staff=[],console.log("supplier",supplier),vm.selectedMaterials.length>0&&vm.selectedMaterials.forEach(function(element){supplier.supplies.push(element._id)}),vm.members2.length>0&&vm.members2.forEach(function(element){supplier.staff.push(element)}),console.log("supplier",supplier),apiFactory.createNewSupplier(supplier).then(function(resp){Notification.success("Supplier has been saved successfully"),vm.supplier={},vm.selectedMaterials=[],vm.mambers2=[],$scope.inputFiles=[],supplier.supplies=[],supplier.staff=[],$("#supplier_modal").modal("hide"),vm.getSuppliers("created")}).catch(function(e){console.log(e),Notification.error("Something went wrong")})},$scope.contracts=[{title:"Subcontractor A",time:"Sep 25, 2018 at 4:00 PM",img:"assets/images/suppliers/tree_logo.png"},{title:"Subcontractor A",time:"Sep 25, 2018 at 4:00 PM",img:"assets/images/suppliers/tree_logo.png"},{title:"Subcontractor A",time:"Sep 25, 2018 at 4:00 PM",img:"assets/images/suppliers/tree_logo.png"},{title:"Subcontractor A",time:"Sep 25, 2018 at 4:00 PM",img:"assets/images/suppliers/tree_logo.png"},{title:"Subcontractor A",time:"Sep 25, 2018 at 4:00 PM",img:"assets/images/suppliers/tree_logo.png"},{title:"Subcontractor A",time:"Sep 25, 2018 at 4:00 PM",img:"assets/images/suppliers/tree_logo.png"}]})}(),function(){angular.module("app").controller("supplierDetailCtrl",function($scope,$timeout,authFactory,$state,$stateParams,apiFactory,Notification,NgMap,globals,localStorageService){var vm=this,logout=globals.logout,userStore=globals.userStore;authFactory.checkUser()||logout();vm.userData=userStore.get(),vm.logout=function(){logout()},vm.supplierId=$stateParams.id,$scope.getSupplierDetail=function(){apiFactory.getSupplierById(vm.supplierId).then(function(resp){vm.supplierData=resp.data})},$scope.getSupplierDetail()})}(),function(){angular.module("app").controller("todoCtrl",function($scope,$timeout,authFactory,$state,apiFactory,Notification,globals,Upload){$scope.todo_list=[{img:"/assets/images/To-Do-Icon.png",subtitle:"1.",title:"Lorem ipsum dolor sit amet,consectetur adipisicing elit,sed do eiusmod tempor.",work:"In 1 Hour",classname:"red-color"},{img:"/assets/images/To-Do-Icon.png",subtitle:"2.",title:"Lorem ipsum dolor sit amet,consectetur adipisicing elit,sed do eiusmod tempor.",work:"In 1 Day",classname:"yellow-color"},{img:"/assets/images/To-Do-Icon.png",subtitle:"3.",title:"Lorem ipsum dolor sit amet,consectetur adipisicing elit,sed do eiusmod tempor.",work:"In 1 Week",classname:"green-color"},{img:"/assets/images/To-Do-Icon.png",subtitle:"4.",title:"Lorem ipsum dolor sit amet,consectetur adipisicing elit,sed do eiusmod tempor.",work:"In 2 Weeks",classname:"gray-color"},{img:"/assets/images/To-Do-Icon.png",subtitle:"5.",title:"Lorem ipsum dolor sit amet,consectetur adipisicing elit,sed do eiusmod tempor.",work:"In 3 Weeks",classname:"gray-color"},{img:"/assets/images/To-Do-Icon.png",subtitle:"6.",title:"Lorem ipsum dolor sit amet,consectetur adipisicing elit,sed do eiusmod tempor.",work:"In 4 Weeks",classname:"gray-color"}];var logout=globals.logout,userStore=globals.userStore;if(!authFactory.checkUser())return void logout();this.logout=function(){logout()},this.userData=userStore.get()})}(),function(){angular.module("app").controller("todoViewCtrl",function($scope,$timeout,authFactory,$state,apiFactory,Notification,globals,Upload){$scope.todo_list=[{img:"/assets/images/To-Do-Icon.png",subtitle:"1.",title:"Lorem ipsum dolor sit amet,consectetur adipisicing elit,sed do eiusmod tempor.",work:"In 1 Hour",classname:"red-color"},{img:"/assets/images/To-Do-Icon.png",subtitle:"2.",title:"Lorem ipsum dolor sit amet,consectetur adipisicing elit,sed do eiusmod tempor.",work:"In 1 Day",classname:"yellow-color"},{img:"/assets/images/To-Do-Icon.png",subtitle:"3.",title:"Lorem ipsum dolor sit amet,consectetur adipisicing elit,sed do eiusmod tempor.",work:"In 1 Week",classname:"green-color"},{img:"/assets/images/To-Do-Icon.png",subtitle:"4.",title:"Lorem ipsum dolor sit amet,consectetur adipisicing elit,sed do eiusmod tempor.",work:"In 2 Weeks",classname:"gray-color"},{img:"/assets/images/To-Do-Icon.png",subtitle:"5.",title:"Lorem ipsum dolor sit amet,consectetur adipisicing elit,sed do eiusmod tempor.",work:"In 3 Weeks",classname:"gray-color"},{img:"/assets/images/To-Do-Icon.png",subtitle:"6.",title:"Lorem ipsum dolor sit amet,consectetur adipisicing elit,sed do eiusmod tempor.",work:"In 4 Weeks",classname:"gray-color"}];var logout=globals.logout,userStore=globals.userStore;if(!authFactory.checkUser())return void logout();this.logout=function(){logout()},this.userData=userStore.get()})}(),function(){angular.module("app").controller("visualPlannerCtrl",function($scope,$timeout,$state,$location,globals,authFactory,apiFactory,Notification,commonVPFactory,toolsVPFactory,shapesVPFactory,localStorageService,eventsVPFactory,layersVPFactory){var logout=globals.logout;globals.userStore;if(!authFactory.checkUser())return void logout();if($(".drag_element").mousedown(function(){!function(elmnt,e){var pos1=0,pos2=0,pos3=0,pos4=0;function dragMouseDown(e){(e=e||window.event).preventDefault(),pos3=e.clientX,pos4=e.clientY,document.onmouseup=closeDragElement,document.onmousemove=elementDrag}function elementDrag(e){(e=e||window.event).preventDefault(),pos1=pos3-e.clientX,pos2=pos4-e.clientY,pos3=e.clientX,pos4=e.clientY,elmnt.style.top=elmnt.offsetTop-pos2+"px",elmnt.style.left=elmnt.offsetLeft-pos1+"px"}function closeDragElement(){document.onmouseup=null,document.onmousemove=null}document.getElementById(elmnt.id+"header")?document.getElementById(elmnt.id+"header").onmousedown=dragMouseDown:elmnt.onmousedown=dragMouseDown}(document.getElementById($(this).closest("div").attr("id")))}),!authFactory.checkUser())return;var vm=this;function loadPlanner(roofPlan){var loadFromJson=!!roofPlan.plannerData&&!!roofPlan.plannerData.initialized,selectedShape=commonVPFactory.selectedShape(),colorPicker=toolsVPFactory.colorPicker();shapesVPFactory.getShapeTools(colorPicker),vm.shapeProps={colorType:"strokeColor",strokeColor:"rgba(0 ,0 , 0 , 1)",fillColor:"rgba(255, 255, 255, 0.57)",strokeWidth:1},vm.cpOptions={swatch:!0,inputClass:"h-30",format:"rgb",case:"lower",alpha:!0},vm.cpEvents={onChange:function(api,color,$event){var obj={};obj.stroke=vm.shapeProps.strokeColor,obj.fill=vm.shapeProps.fillColor,colorPicker.set(obj)}},vm.changeStrokeWidth=function(){colorPicker.set({strokeWidth:vm.shapeProps.strokeWidth})};var stage=commonVPFactory.createStage("stage",{height:window.innerHeight,width:window.innerWidth},roofPlan.plannerData),stageEvents=eventsVPFactory.stageEvents(stage);stageEvents.register("mousemove",function(){vm.pointerPosition={x:stage.getPointerPosition().x,y:stage.getPointerPosition().y},$scope.$apply()});var drawState=commonVPFactory.drawState();$scope.$on("drawStateChange",function(e,drawStates){vm.currentDrawState=drawStates});var baseLayer=loadFromJson?stage.getChildren()[0]:layersVPFactory.createLayer(stage),processStore=layersVPFactory.initiateProcess(stage,baseLayer),selectionStore=commonVPFactory.selectionStore(),transformerStore=commonVPFactory.transformers(baseLayer),calibrator=shapesVPFactory.calibrator(stage,baseLayer),calibrationState=commonVPFactory.calibrationState(),metrics=toolsVPFactory.metrics();if(vm.showPanel=!1,vm.zoomLevel=100,vm.shapeInfo,loadFromJson){if(roofPlan.plannerData&&roofPlan.plannerData.calibration){calibrationState.set(roofPlan.plannerData.calibration);var loadedProcesses=stage.getChildren()[0].getChildren().filter(function(x){return!!/process*/.test(x.name())});loadedProcesses.length>0?processStore.loadProcesses(loadedProcesses):processStore.createProcess()}roofPlan.plannerData&&roofPlan.plannerData.countData&&shapesVPFactory.loadShapeId(roofPlan.plannerData.countData)}else processStore.createProcess();vm.calibrationData=calibrationState.get(),vm.formatCalibration=function(val){return val.toFixed(3)},vm.processes=processStore.getProcesses(),vm.associations=commonVPFactory.associations();var imageObj=new Image;imageObj.crossOrigin="Anonymous",roofPlan.plannerData&&roofPlan.plannerData.jsonString?(imageObj.src=roofPlan.assetObj.url,imageObj.onload=function(){var imageContainer=baseLayer.get("#bgImage")[0];imageContainer.image(imageObj),vm.imageProps={x:Math.round(imageContainer.width()),y:Math.round(imageContainer.height())},stage.draw()}):(imageObj.src=roofPlan.assetObj.url,imageObj.onload=function(){var imageHeight=Math.round(stage.height()-75),aspectRatio=imageObj.height/imageHeight,imageWidth=Math.round(imageObj.width/aspectRatio);vm.imageProps={x:imageWidth,y:imageHeight};var bgImage=new Konva.Image({image:imageObj,name:"bgImage",id:"bgImage",height:imageHeight,shadowOffsetX:1,shadowOffsetY:1,shadowOpacity:.5,x:stage.width()/2-imageWidth/2,y:20,width:imageWidth});bgImage.on("click",function(e){transformerStore.removeAll()}),baseLayer.add(bgImage),baseLayer.draw(),baseLayer.moveToBottom()});var actionStates=commonVPFactory.actionStates(),windowEvent=eventsVPFactory.windowEvents(window);windowEvent.register(stage),vm.historyPos={x:void 0,y:void 0},window.addEventListener("wheel",function(e){"visualPlanner"===$state.$current.name&&!/modal-open/.test(document.getElementsByTagName("body")[0].className)&&e.preventDefault();Math.round(stage.height()/2),Math.round(stage.width()/2);if(e.ctrlKey){var oldScale=baseLayer.scaleX(),mousePointTo={x:stage.getPointerPosition().x/oldScale-baseLayer.x()/oldScale,y:stage.getPointerPosition().y/oldScale-baseLayer.y()/oldScale},newScale=e.deltaY<0?1.15*oldScale:oldScale/1.15;baseLayer.scale({x:newScale,y:newScale});var newPos={x:-(mousePointTo.x-stage.getPointerPosition().x/newScale)*newScale,y:-(mousePointTo.y-stage.getPointerPosition().y/newScale)*newScale},imageProps={y:Math.round(baseLayer.find("#bgImage")[0].height()*newScale),x:Math.round(baseLayer.find("#bgImage")[0].width()*newScale)};vm.imageProps=imageProps,vm.zoomLevel=Math.round(100*baseLayer.scale().x),toolsVPFactory.scaleTransformerBasedOnZoom(baseLayer),$scope.$apply(),baseLayer.position(newPos),stage.batchDraw()}}),window.addEventListener("contextmenu",function(e){"CANVAS"===e.target.tagName&&(e.preventDefault(),shapesVPFactory.cancelDrawing(),baseLayer.draw(),drawState.reset())}),vm.zoomButton=function(type){var centerY=Math.round(stage.height()/2),centerX=Math.round(stage.width()/2),oldScale=baseLayer.scaleX(),mousePointTo={x:centerX/oldScale-baseLayer.x()/oldScale,y:centerY/oldScale-baseLayer.y()/oldScale},newScale=type>0?1.15*oldScale:oldScale/1.15;baseLayer.scale({x:newScale,y:newScale});var newPos={x:-(mousePointTo.x-centerX/newScale)*newScale,y:-(mousePointTo.y-centerY/newScale)*newScale},imageProps={y:Math.round(baseLayer.find("#bgImage")[0].height()*newScale),x:Math.round(baseLayer.find("#bgImage")[0].width()*newScale)};vm.imageProps=imageProps,toolsVPFactory.scaleTransformerBasedOnZoom(baseLayer),vm.zoomLevel=Math.round(100*baseLayer.scale().x),baseLayer.position(newPos),stage.batchDraw()},vm.zoomSlider=function(percentage){var centerY=Math.round(stage.height()/2),centerX=Math.round(stage.width()/2),oldScale=baseLayer.scaleX(),mousePointTo={x:centerX/oldScale-baseLayer.x()/oldScale,y:centerY/oldScale-baseLayer.y()/oldScale},newScale=percentage/100;baseLayer.scale({x:newScale,y:newScale});var newPos={x:-(mousePointTo.x-centerX/newScale)*newScale,y:-(mousePointTo.y-centerY/newScale)*newScale},imageProps={y:Math.round(baseLayer.find("#bgImage")[0].height()*newScale),x:Math.round(baseLayer.find("#bgImage")[0].width()*newScale)};vm.imageProps=imageProps,toolsVPFactory.scaleTransformerBasedOnZoom(baseLayer),vm.zoomLevel=Math.round(100*baseLayer.scale().x),baseLayer.position(newPos),stage.batchDraw()},vm.resetZoom=function(){vm.zoomLevel=100,baseLayer.position({x:0,y:0}),baseLayer.scale({x:1,y:1}),stage.batchDraw()};var baseLayerEvent=eventsVPFactory.layerEvents(baseLayer);function rectangleEventWrapper(shapeObject,shapeType,process){var rectangleEvent=eventsVPFactory.shapeEvents(shapeObject.shape);if(!process){var currentProcess=processStore.getCurrent();currentProcess.add(shapeObject.shape),currentProcess.moveToTop()}var customTransformer=toolsVPFactory.customTransformer(stage,baseLayer,shapeObject.shape,!0);customTransformer.set(shapeObject.shape.points()),transformerStore.add(customTransformer.getGroup()),rectangleEvent.register("dragmove."+shapeType,function(e){customTransformer.update({x:shapeObject.shape.x(),y:shapeObject.shape.y()})}),rectangleEvent.register("transformPolygon",function(){var scale=0===calibrationState.get().value?void 0:calibrationState.get().value;metrics.setShapeInfo({area:toolsVPFactory.polygonArea(shapeObject.shape.points(),scale),unit:calibrationState.get().unit}),$scope.$apply(),vm.shapeInfo=metrics.getShapeInfo(),shapeObject.shape.points(customTransformer.getPoints())}),rectangleEvent.register("click."+shapeType,function(){shapeObject.shape.moveToTop(),selectedShape.set(shapeObject.shape),baseLayer.draw(),customTransformer.update({x:shapeObject.shape.x(),y:shapeObject.shape.y()}),vm.openInfoWidget();var scale=0===calibrationState.get().value?void 0:calibrationState.get().value;metrics.setShapeInfo({area:toolsVPFactory.polygonArea(shapeObject.shape.points(),scale),unit:calibrationState.get().unit}),$timeout(function(){$scope.$apply()}),vm.shapeInfo=metrics.getShapeInfo(),vm.showPanel=!0,transformerStore.removeAll(),baseLayer.add(customTransformer.getGroup()),baseLayer.draw()});var movement=commonVPFactory.movement();rectangleEvent.register("dragstart."+shapeType,function(e){movement.add(e.target.getPosition())}),rectangleEvent.register("dragend."+shapeType,function(e){actionStates.push(commonVPFactory.actionHandler(stage,shapeObject.shape,processStore.getCurrent(),"move",movement.add(e.target.getPosition())))})}function ellipseEventWrapper(shapeObject,shapeType,process){var ellipseEvent=eventsVPFactory.shapeEvents(shapeObject.shape);if(!process){var currentProcess=processStore.getCurrent();currentProcess.add(shapeObject.shape),currentProcess.moveToTop()}var ellipseTransfomer=toolsVPFactory.ellipseTransfomer(stage,baseLayer,shapeObject.shape);ellipseTransfomer.set(shapeObject.shape.radius()),transformerStore.add(ellipseTransfomer.getGroup()),ellipseEvent.register("dragmove.ellipse",function(e){ellipseTransfomer.destroy(),(ellipseTransfomer=toolsVPFactory.ellipseTransfomer(stage,baseLayer,shapeObject.shape)).set(shapeObject.shape.radius()),transformerStore.add(ellipseTransfomer.getGroup())}),ellipseEvent.register("click.ellipse",function(e){shapeObject.shape.moveToTop(),baseLayer.draw(),transformerStore.removeAll(),selectedShape.set(shapeObject.shape),vm.openInfoWidget();var scale=0===calibrationState.get().value?void 0:calibrationState.get().value;metrics.setShapeInfo({area:toolsVPFactory.ellipseArea(shapeObject.shape.radius(),scale),unit:calibrationState.get().unit}),ellipseTransfomer.destroy(),(ellipseTransfomer=toolsVPFactory.ellipseTransfomer(stage,baseLayer,shapeObject.shape)).set(shapeObject.shape.radius()),transformerStore.add(ellipseTransfomer.getGroup()),baseLayer.draw(),vm.shapeInfo=metrics.getShapeInfo(),vm.showPanel=!0,$timeout(function(){$scope.$apply()})}),ellipseEvent.register("transformEllipse",function(e){var scale=0===calibrationState.get().value?void 0:calibrationState.get().value;metrics.setShapeInfo({area:toolsVPFactory.ellipseArea(shapeObject.shape.radius(),scale),unit:calibrationState.get().unit}),vm.shapeInfo=metrics.getShapeInfo(),vm.showPanel=!0});var movement=commonVPFactory.movement();ellipseEvent.register("dragstart.ellipse",function(e){movement.add(e.target.getPosition())}),ellipseEvent.register("dragend.ellipse",function(e){actionStates.push(commonVPFactory.actionHandler(stage,shapeObject.shape,processStore.getCurrent(),"move",movement.add(e.target.getPosition())))})}function polygonEventWrapper(shapeObject,process){var polygonEvent=eventsVPFactory.shapeEvents(shapeObject.polygon);if(!process){var currentProcess=processStore.getCurrent();currentProcess.add(shapeObject.polygon),currentProcess.moveToTop()}var customTransformer=toolsVPFactory.customTransformer(stage,baseLayer,shapeObject.polygon,!1);customTransformer.set(shapeObject.polygon.points()),transformerStore.add(customTransformer.getGroup()),polygonEvent.register("dragmove.polygon",function(e){customTransformer.update({x:shapeObject.polygon.x(),y:shapeObject.polygon.y()})}),polygonEvent.register("click.polygon",function(e){customTransformer.update({x:shapeObject.polygon.x(),y:shapeObject.polygon.y()})});var movement=commonVPFactory.movement();polygonEvent.register("dragstart.polygon",function(e){movement.add(e.target.getPosition())}),polygonEvent.register("dragend.polygon",function(e){actionStates.push(commonVPFactory.actionHandler(stage,shapeObject.polygon,processStore.getCurrent(),"move",movement.add(e.target.getPosition())))}),polygonEvent.register("transformPolygon",function(){var scale=0===calibrationState.get().value?void 0:calibrationState.get().value;metrics.setShapeInfo({area:toolsVPFactory.polygonArea(shapeObject.polygon.points(),scale),unit:calibrationState.get().unit}),$timeout(function(){$scope.$apply()}),vm.shapeInfo=metrics.getShapeInfo(),shapeObject.polygon.points(customTransformer.getPoints())}),polygonEvent.register("click",function(){shapeObject.polygon.moveToTop(),baseLayer.draw(),selectedShape.set(shapeObject.polygon),vm.openInfoWidget();var scale=0===calibrationState.get().value?void 0:calibrationState.get().value;metrics.setShapeInfo({area:toolsVPFactory.polygonArea(shapeObject.polygon.points(),scale),unit:calibrationState.get().unit}),$scope.$apply(),vm.shapeInfo=metrics.getShapeInfo(),vm.showPanel=!0,transformerStore.removeAll(),baseLayer.add(customTransformer.getGroup()),baseLayer.draw()})}function freeHandEventWrapper(shapeObject,process){var freeHandEvent=eventsVPFactory.shapeEvents(shapeObject.polygon);if(!process){var currentProcess=processStore.getCurrent();currentProcess.add(shapeObject.polygon),currentProcess.moveToTop()}var movement=commonVPFactory.movement();freeHandEvent.register("dragstart.polygon",function(e){movement.add(e.target.getPosition())}),freeHandEvent.register("dragend.polygon",function(e){actionStates.push(commonVPFactory.actionHandler(stage,shapeObject.polygon,processStore.getCurrent(),"move",movement.add(e.target.getPosition())))}),freeHandEvent.register("click",function(){shapeObject.polygon.moveToTop(),baseLayer.draw(),selectedShape.set(shapeObject.polygon),vm.openInfoWidget();var scale=0===calibrationState.get().value?void 0:calibrationState.get().value;metrics.setShapeInfo({area:toolsVPFactory.polygonArea(shapeObject.polygon.points(),scale),unit:calibrationState.get().unit}),$timeout(function(){$scope.$apply()}),vm.shapeInfo=metrics.getShapeInfo(),vm.showPanel=!0,transformerStore.removeAll(),baseLayer.draw()})}function lineEventWrapper(shapeObject,process){var lineEvent=eventsVPFactory.shapeEvents(shapeObject.line);if(!process){var currentProcess=processStore.getCurrent();currentProcess.add(shapeObject.line),currentProcess.moveToTop()}var movement=commonVPFactory.movement();lineEvent.register("dragstart.line",function(e){movement.add(e.target.getPosition())}),lineEvent.register("dragend.line",function(e){actionStates.push(commonVPFactory.actionHandler(stage,shapeObject.line,processStore.getCurrent(),"move",movement.add(e.target.getPosition())))}),lineEvent.register("click",function(){shapeObject.line.moveToTop(),selectedShape.set(shapeObject.line),vm.openInfoWidget(),transformerStore.removeAll(),baseLayer.draw()})}function freeHandMarkerWrapper(shapeObject,process){var freeHandEvent=eventsVPFactory.shapeEvents(shapeObject.polygon);if(!process){var currentProcess=processStore.getCurrent();currentProcess.add(shapeObject.polygon),currentProcess.moveToTop()}var movement=commonVPFactory.movement();freeHandEvent.register("dragstart.freeHandMarker",function(e){movement.add(e.target.getPosition())}),freeHandEvent.register("dragend.freeHandMarker",function(e){actionStates.push(commonVPFactory.actionHandler(stage,shapeObject.polygon,processStore.getCurrent(),"move",movement.add(e.target.getPosition())))}),freeHandEvent.register("click.freeHandMarker",function(){shapeObject.polygon.moveToTop(),baseLayer.draw(),selectedShape.set(shapeObject.polygon),vm.openInfoWidget(),transformerStore.removeAll(),baseLayer.draw()})}function textEventWrapper(group,process){var textEvent=eventsVPFactory.shapeEvents(group);if(!process){var currentProcess=processStore.getCurrent();currentProcess.add(group),currentProcess.moveToTop()}var customTransformer=toolsVPFactory.customTransformer(stage,baseLayer,group,!0),wrapper=group.getChildren()[0],text=group.getChildren()[1];customTransformer.set(wrapper.points()),transformerStore.add(customTransformer.getGroup()),textEvent.register("dragmove.textGroup",function(e){customTransformer.update({x:group.x(),y:group.y()})}),textEvent.register("transformPolygon",function(){wrapper.points(customTransformer.getPoints());var updatedPoints=wrapper.points();text.width(Math.abs(updatedPoints[0]-updatedPoints[2])-10),text.position({x:updatedPoints[0]+5,y:updatedPoints[1]+5}),baseLayer.draw()}),textEvent.register("click.textGroup",function(){group.moveToTop(),selectedShape.set(text),baseLayer.draw(),customTransformer.update({x:group.x(),y:group.y()}),$timeout(function(){$scope.$apply()}),transformerStore.removeAll(),baseLayer.add(customTransformer.getGroup()),wrapper.stroke("grey"),baseLayer.draw(),vm.openTextInfoWidget()});var movement=commonVPFactory.movement();textEvent.register("dragstart.textGroup",function(e){movement.add(e.target.getPosition())}),textEvent.register("dragend.textGroup",function(e){actionStates.push(commonVPFactory.actionHandler(stage,group,processStore.getCurrent(),"move",movement.add(e.target.getPosition())))})}baseLayerEvent.register("click",function(e){"Image"===e.target.className&&(transformerStore.removeAll(),vm.closeInfoWidget(),vm.closeTextInfoWidget(),selectedShape.reset())}),loadFromJson&&(angular.forEach(baseLayer.getChildren(),function(x){/process*/.test(x.name())&&angular.forEach(x.getChildren(),function(child){if("Ellipse"===child.className)ellipseEventWrapper({shape:child},"ellipse",!0);else if("Line"===child.className||"Arrow"===child.className){var shapeName=child.name();/Rect*/.test(shapeName)?rectangleEventWrapper({shape:child},"rectangle",!0):/polygon*/.test(shapeName)?polygonEventWrapper({polygon:child},!0):/line*/.test(shapeName)?lineEventWrapper({line:child},!0):/freeHand*/.test(shapeName)?freeHandEventWrapper({polygon:child},!0):/markerFreeHand*/.test(shapeName)&&freeHandMarkerWrapper({polygon:child},!0)}else/textGroup*/.test(child.name())&&textEventWrapper(child,!0)})}),transformerStore.removeAll()),vm.rectangle=function(square){var shapeType=square?"square":"rectangle";drawState.set("shapes."+shapeType),document.body.style.cursor="crosshair",console.log(vm.currentDrawState.shapes.square),baseLayerEvent.register("click."+shapeType,function(){if(drawState.check("shapes."+shapeType)){var shapeObject=shapesVPFactory.createShape(0,commonVPFactory.dragOffset(stage.getPointerPosition(),baseLayer.getPosition(),baseLayer.scale()));shapeObject.start?(baseLayer.add(shapeObject.shape),actionStates.push(commonVPFactory.actionHandler(stage,shapeObject.shape,processStore.getCurrent(),"create")),baseLayer.draw()):(rectangleEventWrapper(shapeObject,shapeType),document.body.style.cursor="default",drawState.reset(),shapesVPFactory.destroyShape())}}),baseLayerEvent.register("mousemove."+shapeType,function(){drawState.check("shapes."+shapeType)&&(shapesVPFactory.drawShape(commonVPFactory.dragOffset(stage.getPointerPosition(),baseLayer.getPosition(),baseLayer.scale()),square),baseLayer.draw())})},vm.ellipse=function(circle){var shapeType=circle?"circle":"ellipse";drawState.set("shapes."+shapeType),document.body.style.cursor="crosshair",baseLayerEvent.register("click."+shapeType,function(){if(drawState.check("shapes."+shapeType)){var shapeObject=shapesVPFactory.createShape(1,commonVPFactory.dragOffset(stage.getPointerPosition(),baseLayer.getPosition(),baseLayer.scale()));shapeObject.start?(baseLayer.add(shapeObject.shape),actionStates.push(commonVPFactory.actionHandler(stage,shapeObject.shape,processStore.getCurrent(),"create")),baseLayer.draw()):(document.body.style.cursor="default",ellipseEventWrapper(shapeObject,shapeType),drawState.reset(),shapesVPFactory.destroyShape())}}),baseLayerEvent.register("mousemove."+shapeType,function(){drawState.check("shapes."+shapeType)&&(shapesVPFactory.drawShape(commonVPFactory.dragOffset(stage.getPointerPosition(),baseLayer.getPosition(),baseLayer.scale()),circle),baseLayer.draw())})},vm.polygon=function(){drawState.set("shapes.polygon"),document.body.style.cursor="crosshair",baseLayerEvent.register("click.polygon",function(){if(drawState.check("shapes.polygon")){var shapeObject=shapesVPFactory.createPolygon(commonVPFactory.dragOffset(stage.getPointerPosition(),baseLayer.getPosition(),baseLayer.scale()));shapeObject&&(shapeObject.start?(actionStates.push(commonVPFactory.actionHandler(stage,shapeObject.polygon,processStore.getCurrent(),"create")),baseLayer.add(shapeObject.polygon)):(polygonEventWrapper(shapeObject),document.body.style.cursor="default",drawState.reset(),shapesVPFactory.destroyShape())),baseLayer.draw()}}),baseLayerEvent.register("mousemove.polygon",function(){drawState.check("shapes.polygon")&&(shapesVPFactory.drawPolygon(commonVPFactory.dragOffset(stage.getPointerPosition(),baseLayer.getPosition(),baseLayer.scale())),baseLayer.draw())})},vm.freeHand=function(){drawState.set("measurement.freeHand"),document.body.style.cursor="crosshair",baseLayerEvent.register("mousedown.freehand",function(){if(drawState.check("measurement.freeHand")){var shapeObject=shapesVPFactory.createPolygon(commonVPFactory.dragOffset(stage.getPointerPosition(),baseLayer.getPosition(),baseLayer.scale()),!0);shapeObject&&(shapeObject.start?(actionStates.push(commonVPFactory.actionHandler(stage,shapeObject.polygon,processStore.getCurrent(),"create")),baseLayer.add(shapeObject.polygon)):(freeHandEventWrapper(shapeObject),document.body.style.cursor="default",drawState.reset(),shapesVPFactory.destroyShape())),baseLayer.draw()}}),baseLayerEvent.register("mousemove.freehand",function(){drawState.check("measurement.freeHand")&&(shapesVPFactory.drawPolygon(commonVPFactory.dragOffset(stage.getPointerPosition(),baseLayer.getPosition(),baseLayer.scale()),!0),baseLayer.draw())})},vm.simpleLine=function(type){drawState.set("markings."+type),document.body.style.cursor="crosshair",baseLayerEvent.register("click."+type,function(){if(drawState.check("markings."+type)){var shapeObject=shapesVPFactory.createLine(commonVPFactory.dragOffset(stage.getPointerPosition(),baseLayer.getPosition(),baseLayer.scale()),type);shapeObject&&(shapeObject.start?(actionStates.push(commonVPFactory.actionHandler(stage,shapeObject.line,processStore.getCurrent(),"create")),baseLayer.add(shapeObject.line),baseLayer.draw()):(lineEventWrapper(shapeObject),document.body.style.cursor="default",drawState.reset(),shapesVPFactory.destroyShape())),baseLayer.draw()}}),baseLayerEvent.register("mousemove."+type,function(){drawState.check("markings."+type)&&(shapesVPFactory.drawLine(commonVPFactory.dragOffset(stage.getPointerPosition(),baseLayer.getPosition(),baseLayer.scale())),baseLayer.draw())})},vm.bezierLine=function(){drawState.set("markings.bezier"),document.body.style.cursor="crosshair",baseLayerEvent.register("click.bezier",function(){if(drawState.check("markings.bezier")){var shapeObject=shapesVPFactory.createBezierLine(commonVPFactory.dragOffset(stage.getPointerPosition(),baseLayer.getPosition(),baseLayer.scale()));shapeObject&&(shapeObject.start?(actionStates.push(commonVPFactory.actionHandler(stage,shapeObject.line,processStore.getCurrent(),"create")),baseLayer.add(shapeObject.line),baseLayer.draw()):(!function(shapeObject,process){var bezierEvent=eventsVPFactory.shapeEvents(shapeObject.line);if(!process){var currentProcess=processStore.getCurrent();currentProcess.add(shapeObject.line),currentProcess.moveToTop()}var bezierTransformer=toolsVPFactory.bezierTransformer(stage,baseLayer,shapeObject.line);bezierTransformer.set(shapeObject.line.points()),transformerStore.add(bezierTransformer.getGroup()),bezierEvent.register("dragmove.polygon",function(e){bezierTransformer.update({x:shapeObject.line.x(),y:shapeObject.line.y()})}),bezierEvent.register("click.polygon",function(e){bezierTransformer.update({x:shapeObject.line.x(),y:shapeObject.line.y()})});var movement=commonVPFactory.movement();bezierEvent.register("dragstart.polygon",function(e){movement.add(e.target.getPosition())}),bezierEvent.register("dragend.polygon",function(e){actionStates.push(commonVPFactory.actionHandler(stage,shapeObject.line,processStore.getCurrent(),"move",movement.add(e.target.getPosition())))}),bezierEvent.register("transformBezier",function(){shapeObject.line.points(bezierTransformer.getPoints())}),bezierEvent.register("click",function(){shapeObject.line.moveToTop(),baseLayer.draw(),selectedShape.set(shapeObject.line),vm.openInfoWidget();var scale=0===calibrationState.get().value?void 0:calibrationState.get().value;metrics.setShapeInfo({area:toolsVPFactory.polygonArea(shapeObject.line.points(),scale),unit:calibrationState.get().unit}),vm.shapeInfo=metrics.getShapeInfo(),vm.showPanel=!0,transformerStore.removeAll(),baseLayer.add(bezierTransformer.getGroup()),baseLayer.draw()})}(shapeObject),document.body.style.cursor="default",drawState.reset(),shapesVPFactory.destroyShape())),baseLayer.draw()}}),baseLayerEvent.register("mousemove.bezier",function(){drawState.check("markings.bezier")&&(shapesVPFactory.drawBezierLine(commonVPFactory.dragOffset(stage.getPointerPosition(),baseLayer.getPosition(),baseLayer.scale())),baseLayer.draw())})},vm.freehandMarker=function(){drawState.set("shapes.freeHand"),document.body.style.cursor="crosshair",baseLayerEvent.register("mousedown.freehand",function(){if(drawState.check("shapes.freeHand")){var shapeObject=shapesVPFactory.createPolygon(commonVPFactory.dragOffset(stage.getPointerPosition(),baseLayer.getPosition(),baseLayer.scale()),!0,!0);shapeObject&&(shapeObject.start?(actionStates.push(commonVPFactory.actionHandler(stage,shapeObject.polygon,processStore.getCurrent(),"create")),baseLayer.add(shapeObject.polygon)):(freeHandMarkerWrapper(shapeObject),document.body.style.cursor="default",drawState.reset(),shapesVPFactory.destroyShape())),baseLayer.draw()}}),baseLayerEvent.register("mousemove.freehand",function(){drawState.check("shapes.freeHand")&&(shapesVPFactory.drawPolygon(commonVPFactory.dragOffset(stage.getPointerPosition(),baseLayer.getPosition(),baseLayer.scale()),!0),baseLayer.draw())})},vm.textWidget=function(){drawState.set("shapes.text"),document.body.style.cursor="crosshair",baseLayerEvent.register("click.textWrapper",function(){if(drawState.check("shapes.text")){var shapeObject=shapesVPFactory.createShape(0,commonVPFactory.dragOffset(stage.getPointerPosition(),baseLayer.getPosition(),baseLayer.scale()));if(shapeObject.start)baseLayer.add(shapeObject.shape),actionStates.push(commonVPFactory.actionHandler(stage,shapeObject.shape,processStore.getCurrent(),"create"));else{var textGroup=shapesVPFactory.createTextGroup();textGroup.add(shapeObject.shape);var points=shapeObject.shape.points(),textProps={position:{x:points[0]+10,y:points[1]+10},width:Math.abs(points[0]-points[2])-10},textObj=shapesVPFactory.createText(textProps);textGroup.add(textObj),textEventWrapper(textGroup),document.body.style.cursor="default",drawState.reset(),shapesVPFactory.destroyShape(),baseLayer.draw()}}}),baseLayerEvent.register("mousemove.textWrapper",function(){drawState.check("shapes.text")&&(shapesVPFactory.drawShape(commonVPFactory.dragOffset(stage.getPointerPosition(),baseLayer.getPosition(),baseLayer.scale()),!1,"wrapper"),baseLayer.draw())})},vm.manualSelection=function(shapeObj){transformerStore.removeAll(),selectedShape.reset();selectedShape.set(shapeObj);shapeObj.fire("click")},vm.dragSelection=function(){drawState.set("markings.selection"),document.body.style.cursor="crosshair",baseLayerEvent.register("mousedown.selection",function(){if(drawState.check("markings.selection")){vm.selectAllShapes(!1);var shapeObject=shapesVPFactory.createShape(0,commonVPFactory.dragOffset(stage.getPointerPosition(),baseLayer.getPosition(),baseLayer.scale()));baseLayer.add(shapeObject.shape),baseLayer.draw()}}),baseLayerEvent.register("mouseup.selection",function(){if(drawState.check("markings.selection")){document.body.style.cursor="default",drawState.reset();var selectionPoints=shapesVPFactory.cancelDrawing(),selectedShapes=shapesVPFactory.selectShapes(baseLayer,selectionPoints),selectedShapeNames=selectedShapes.map(function(x){return x.name()});selectionStore.store(selectedShapes),angular.forEach(vm.processes,function(process){angular.forEach(process.getChildren(),function(child){selectedShapeNames.indexOf(child.name())>-1&&(child.selected=!0)})}),baseLayer.draw()}}),baseLayerEvent.register("mousemove.selection",function(){drawState.check("markings.selection")&&(shapesVPFactory.drawShape(commonVPFactory.dragOffset(stage.getPointerPosition(),baseLayer.getPosition(),baseLayer.scale()),!1,"grabber"),baseLayer.draw())})},vm.selectAllShapes=function(toggleValue){var allShapes=shapesVPFactory.extractAllShapes(baseLayer);toggleValue?selectionStore.store(allShapes):selectionStore.clear(),angular.forEach(allShapes,function(x){x.selected=!!toggleValue})},vm.toggleShapeVisibility=function(shape){transformerStore.removeAll(),shape.visible(!shape.visible()),baseLayer.draw()},vm.calibrator=function(){drawState.set("measurement.calibrator"),calibrator=shapesVPFactory.calibrator(stage,baseLayer),baseLayerEvent.register("click.calibrator",function(){drawState.check("measurement.calibrator")&&calibrator(commonVPFactory.dragOffset(stage.getPointerPosition(),baseLayer.getPosition(),baseLayer.scale()),!0)}),baseLayerEvent.register("mousemove.calibrator",function(){drawState.check("measurement.calibrator")&&calibrator(commonVPFactory.dragOffset(stage.getPointerPosition(),baseLayer.getPosition(),baseLayer.scale()),!1)})},$scope.$on("calibrated",function(e,calibratedLine){$("#calibrateModal").modal("show");var points=calibratedLine.points(),distance=Math.sqrt(Math.pow(points[0]-points[2],2)+Math.pow(points[1]-points[3],2));vm.calibrationDistance=distance,vm.saveCalibration=function(){var scale,value=vm.calibrationScale.value;scale=parseInt(value)/distance,calibrationState.set({value:scale,unit:vm.calibrationScale.unit}),vm.calibrationData=calibrationState.get(),vm.showPanel=!0,vm.shapeInfo=metrics.getShapeInfo(),calibratedLine.destroy(),baseLayer.draw(),$("#calibrateModal").modal("hide")},$("#calibrateModal").on("hide.bs.modal",function(e){calibratedLine.destroy(),baseLayer.draw()})}),vm.deleteShape=function(shapeObj){var shape=shapeObj||selectedShape.get();shape&&(transformerStore.removeAll(),actionStates.push(commonVPFactory.actionHandler(stage,shape,shape.getParent(),"delete")),shape.remove(),baseLayer.draw(),vm.closeInfoWidget(),vm.closeTextInfoWidget(),selectedShape.reset())},vm.openInfoWidget=function(){var shape=selectedShape.get();vm.infoWidgetProps={name:shape.name(),colorType:"stroke",stroke:shape.stroke(),fill:shape.fill(),strokeWidth:shape.strokeWidth()},vm.shapeInfoWidget=!0},vm.colorTypes=[{type:"Stroke",value:"stroke"},{type:"Fill",value:"fill"}],vm.textColorTypes=[{type:"Background",value:"stroke"},{type:"Font",value:"fill"}],vm.fontStyles=[{type:"Normal",value:"normal"},{type:"Bold",value:"bold"},{type:"Italic",value:"italic"}],vm.webSafeFonts=["Arial","Calibri","Helvetica","Times New Roman","Times","Courier New","Courier","Verdana","Georgia","Palatino","Garamond","Bookman","Comic Sans MS","Trebuchet MS","Arial Black","Impact"],vm.openTextInfoWidget=function(){var shape=selectedShape.get();vm.textInfoWidgetProps={colorType:"stroke",text:shape.text(),fontSize:shape.fontSize(),fontStyle:shape.fontStyle(),fontFamily:shape.fontFamily(),stroke:shape.stroke(),fill:shape.fill(),strokeWidth:shape.strokeWidth()},vm.textInfoWidget=!0,$scope.$apply()},vm.changeTextInfo=function(prop,value){var shape=selectedShape.get();shape[prop](value),baseLayer.draw()},vm.infoWidgetStroke=function(val){var shape=selectedShape.get();shape.strokeWidth(val),baseLayer.draw()};var shapePropHistory=commonVPFactory.shapePropertyHistory();vm.infoWidgetEvents={onChange:function(api,color,$event){var shape=selectedShape.get();"fill"===vm.infoWidgetProps.colorType?shape.fill(color):"stroke"===vm.infoWidgetProps.colorType&&shape.stroke(color),baseLayer.draw()},onOpen:function(api,color,$event){var shape=selectedShape.get(),props={stroke:shape.stroke(),fill:shape.fill(),strokeWidth:shape.strokeWidth()};shapePropHistory.add(props)},onClose:function(api,color,$event){var shape=selectedShape.get(),props={stroke:shape.stroke(),fill:shape.fill(),strokeWidth:shape.strokeWidth()};actionStates.push(commonVPFactory.actionHandler(stage,shape,processStore.getCurrent(),"shapeProps",shapePropHistory.add(props))),shapePropHistory=commonVPFactory.shapePropertyHistory()}},vm.textInfoWidgetEvents={onChange:function(api,color,$event){var shape=selectedShape.get();if("fill"===vm.textInfoWidgetProps.colorType)shape.fill(color);else if("stroke"===vm.textInfoWidgetProps.colorType){var wrapper=shape.getParent().find("Line");wrapper.fill(color)}baseLayer.draw()},onOpen:function(api,color,$event){var shape=selectedShape.get(),props={stroke:shape.stroke(),fill:shape.fill(),strokeWidth:shape.strokeWidth()};shapePropHistory.add(props)},onClose:function(api,color,$event){var shape=selectedShape.get(),props={stroke:shape.stroke(),fill:shape.fill(),strokeWidth:shape.strokeWidth()};actionStates.push(commonVPFactory.actionHandler(stage,shape,processStore.getCurrent(),"shapeProps",shapePropHistory.add(props))),shapePropHistory=commonVPFactory.shapePropertyHistory()}},vm.closeInfoWidget=function(){vm.shapeInfoWidget=!1},vm.closeTextInfoWidget=function(){var text=selectedShape.get();if(text&&"text"===text.name()){var group=text.getParent(),wrapper=group.find("Line")[0];wrapper.stroke(null),baseLayer.draw(),transformerStore.removeAll()}vm.textInfoWidget=!1},vm.currentPanState=!0,vm.panImage=function(){vm.currentPanState=baseLayer.draggable(),vm.currentPanState?document.body.style.cursor="default":document.body.style.cursor="move",baseLayer.draggable(!vm.currentPanState),baseLayer.draw()},vm.undoOrRedo=function(type){transformerStore.removeAll(),1===type?actionStates.redo():actionStates.undo()},vm.downloadImage=function(){var dataURL=stage.toDataURL(),link=document.createElement("a");link.download="roofplan_image_"+Date.now(),link.href=dataURL,document.body.appendChild(link),link.click(),document.body.removeChild(link)},vm.downloadFile=function(){var json=stage.toJSON(),file=new Blob([json],{type:"application/json"}),link=document.createElement("a");link.href=URL.createObjectURL(file),link.download="roofplan_json_"+Date.now(),document.body.appendChild(link),link.click(),document.body.removeChild(link)},vm.saveRoofPlan=function(){transformerStore.removeAll();var json=stage.toJSON();apiFactory.saveRoofPlan(roofPlan._id,{jsonString:json,calibration:calibrationState.get(),countData:shapesVPFactory.getShapeId(),associations:vm.associations.getAssociationsForSave()}).then(function(resp){Notification.success(resp.data.message),apiFactory.getProjectRoofPlans(localStorageService.get("roofPlanProject")).then(function(resp){localStorageService.set("roofPlans",resp.data.data)}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})},vm.hideProcess=function(index){transformerStore.removeAll(),processStore.hideProcess(index)},vm.showProcess=function(index){processStore.showProcess(index)},vm.addProcess=function(){processStore.createProcess(),vm.processes=processStore.getProcesses()},vm.selectLayer=function(i){vm.selectedIndex=i,processStore.setCurrent(i)},vm.selectLayer(0),vm.selectOrUnselect=function(shape){shape.selected?selectionStore.push(shape):selectionStore.pull(shape.name())},vm.layerIconName=function(shapeName){return/Rect*/.test(shapeName)?"square":/Ellipse*/.test(shapeName)?"circle":/polygon*/.test(shapeName)?"polygon":/line*/.test(shapeName)?"line":/textGroup*/.test(shapeName)?"text":/freeHand*/.test(shapeName)?"pencil":void 0},vm.hideSelection=function(){var selectedShapes=selectionStore.get();console.log(selectedShapes),transformerStore.removeAll(),angular.forEach(selectedShapes,function(shape){shape.visible(!1)}),baseLayer.draw()},vm.deleteSelection=function(){var selectedShapes=selectionStore.get();transformerStore.removeAll(),angular.forEach(selectedShapes,function(shape){actionStates.push(commonVPFactory.actionHandler(stage,shape,shape.getParent(),"delete")),shape.remove()}),baseLayer.draw()},vm.loadMaterial=function(shapeProp){$("#loadMaterial").modal("show")},vm.createAssociation=function(shapeId,entityId,type){vm.associations.createAssociation(shapeId,entityId,type),$("#loadMaterial").modal("hide")},$scope.$on("selectedMaterial",function(e,data){console.log("selectedMaterial----",data)})}vm.hideInitModal=!1,vm.roofPlans=localStorageService.get("roofPlans"),vm.selectPlan=function(plan){vm.selectedPlan=plan._id,loadPlanner(plan),vm.hideInitModal=!0},vm.selectPlan(localStorageService.get("selectedPlan")),vm.closeVisualPlanner=function(){document.body.style.cursor="default",$("#chooseRoofModal").modal("hide"),$state.go("dashboard")}})}(),function(){angular.module("app").directive("canvasPdf",function($rootScope,apiFactory,$timeout,globals,Notification){return{restrict:"A",scope:{current:"="},link:function($scope,elem,attrs){globals.renderPage($scope.current,elem[0]),$timeout(function(){$scope.$apply()})}}})}(),function(){angular.module("app").directive("filePicker",function($rootScope,apiFactory,$timeout,globals,Notification){return{restrict:"E",templateUrl:"/partials/filePicker.html",scope:{folders:"=",options:"=",source:"=",sourcefile:"=",sourcedir:"="},link:function($scope,elem,attrs){var folderPaths=[],projectStore=globals.projectStore;$scope.files=[],$scope.folderName="Root Folder",$scope.currentFolder="",$scope.selectedFolder=null,$scope.backBtnView=!1,$scope.viewFolder=function(folder){var name=folder.name;folderPaths.push(folder),$scope.selectedFolder,apiFactory.viewHierarchy(folder._id).then(function(resp){$scope.selectedFolder=folder,$scope.currentFolder=folder.name,$scope.folders=resp.data.folders,$scope.files=resp.data.files,$scope.breadCrumbs=resp.data.breadcrumbs,$scope.folderName=name,"Root Folder"==$scope.folderName?$scope.backBtnView=!0:$scope.backBtnView=!1}).catch(function(e){console.log(e)})},$scope.selectFile=function(file,breadCrumbs){file.breadCrumbs=breadCrumbs,$rootScope.$broadcast("loader",!0),$rootScope.$broadcast("selectedRoofPlanDoc",file)},$scope.back=function(){folderPaths.pop();var previous=folderPaths[folderPaths.length-1],apiName=previous?"viewHierarchy":"getHierarchy",param=previous?previous._id:projectStore.get()._id;apiFactory[apiName](param).then(function(resp){$scope.selectedFolder=previous||null,$scope.currentFolder=previous?previous.name:null,$scope.folders=previous?resp.data.folders:resp.data.data.hierarchies,$scope.files=previous?resp.data.files:[],$scope.folderName=previous?previous.name:"Root Folder","Root Folder"==$scope.folderName?$scope.backBtnView=!0:$scope.backBtnView=!1}).catch(function(e){console.log(e)})},$scope.moveTo=function(folder,source){if(folder){var payload={assetId:$scope.sourcefile._id,sourceId:source.$modelValue._id,destId:folder._id};apiFactory.moveAssets(payload).then(function(resp){$scope.sourcedir&&($scope.sourcedir=$scope.sourcedir.filter(function(x){return x._id!==$scope.sourcefile._id})),Notification.success("File Moved Successfully"),$("#moveTo").modal("hide")}).catch(function(e){console.log(e)})}}}}})}(),angular.module("app").directive("autoComplete",function($timeout){return function(scope,iElement,iAttrs){iElement.autocomplete({source:scope[iAttrs.uiItems],select:function(){$timeout(function(){iElement.trigger("input")},0)}})}}),angular.module("app").directive("errSrc",function(){return{link:function(scope,element,attrs){element.bind("error",function(){attrs.src!=attrs.errSrc&&attrs.$set("src",attrs.errSrc)})}}}),function(){angular.module("app").directive("materialPicker",function($rootScope,apiFactory,$timeout,globals,Notification){return{restrict:"E",templateUrl:"/partials/materialPicker.html",scope:{materialType:"=",selectedMaterial:"=",currentShape:"=",associations:"="},link:function($scope,elem,attrs){$scope.materialList=[],$scope.entityType=1,apiFactory.listAllMaterials().then(function(resp){$scope.materialList=resp.data.list,$scope.selectedMaterial=angular.copy($scope.materialList[0])}).catch(function(e){}),$scope.dcpList=[],apiFactory.listAllComboMaterials().then(function(resp){$scope.dcpList=resp.data.list}).catch(function(e){}),$scope.equipmentList=[],apiFactory.listAllEquipments().then(function(resp){$scope.equipmentList=resp.data.list}).catch(function(e){}),$scope.selectedMaterialInfo=function(material){$rootScope.$broadcast("selectedMaterial",material),console.log(material),$scope.materialImages=material},$scope.materialSelection=function(item){$scope.selectedMaterial=item},$scope.resetSelectedMaterial=function(val){$scope.selectedMaterial&&(console.log($scope.currentShape),0==val?($scope.selectedMaterial=angular.copy($scope.materialList[0]),$scope.entityType=val+1):1==val?($scope.selectedMaterial=angular.copy($scope.dcpList[0]),$scope.entityType=val+1):($scope.selectedMaterial=angular.copy($scope.equipmentList[0]),$scope.entityType=val+1))},$scope.assignMaterial=function(shapeId,entityId,type){$("#loadMaterial").modal("hide"),$scope.associations.createAssociation(shapeId,entityId,type)}}}})}(),function(){angular.module("app").filter("convertCurrency",function(){return function(input,conversionRate){return input?input*conversionRate:0}}),angular.module("app").filter("roundNum",function(){return function(input,place){return input?Number(input).toFixed(place):0}}),angular.module("app").filter("fetchThumbnail",function(){return function(input){if(input)return/cloudinary/.test(input.secure_url)?input.secure_url.replace(/\.pdf/,".png"):input.thumbnail}})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJyb3V0ZXMubW9kdWxlLmpzIiwiYXBpLmZhY3RvcnkuanMiLCJhdXRoLmZhY3RvcnkuanMiLCJmaWxlTWFuYWdlci5mYWN0b3J5LmpzIiwiZ2xvYmFscy5mYWN0b3J5LmpzIiwiaXNzdWVjcmVhdGlvbi5mYWN0b3J5LmpzIiwiczN3cmFwcGVyLmZhY3RvcnkuanMiLCJ2aXN1YWxfcGxhbm5lci9jb21tb24uZmFjdG9yeS5qcyIsInZpc3VhbF9wbGFubmVyL2V2ZW50cy5mYWN0b3J5LmpzIiwidmlzdWFsX3BsYW5uZXIvbGF5ZXJzLmZhY3RvcnkuanMiLCJ2aXN1YWxfcGxhbm5lci9zaGFwZXMuZmFjdG9yeS5qcyIsInZpc3VhbF9wbGFubmVyL3Rvb2xzLmZhY3RvcnkuanMiLCIzZC1kYXNoYm9hcmQuY29udHJvbGxlci5qcyIsIjNkdmlld2VyLmNvbnRyb2xsZXIuanMiLCJiaWxsaW5nQXJjaGl2ZS5jb250cm9sbGVyLmpzIiwiY2FsY3VsYXRpb24uY29udHJvbGxlci5qcyIsImNhbGVuZGVyLmNvbnRyb2xsZXIuanMiLCJjbGllbnRzLmNvbnRyb2xsZXIuanMiLCJjb21ib01hdGVyaWFsVmlldy5jb250cm9sbGVyLmpzIiwiY3JlYXRlUHJvamVjdC5jb250cm9sbGVyLmpzIiwiZGFzaGJvYXJkLmNvbnRyb2xsZXIuanMiLCJlbXBsb3llZXMuY29udHJvbGxlci5qcyIsImVxdWlwbWVudC5jb250cm9sbGVyLmpzIiwiZXF1aXBtZW50Vmlldy5jb250cm9sbGVyLmpzIiwiZmlsZU1hbmFnZXIuY29udHJvbGxlci5qcyIsImlzc3VlRGV0YWlscy5jb250cm9sbGVyLmpzIiwiaXNzdWVzLmNvbnRyb2xsZXIuanMiLCJtYXRlcmlhbHMuY29udHJvbGxlci5qcyIsIm1hdGVyaWFsVmlldy5jb250cm9sbGVyLmpzIiwibWVldGluZ1Jvb20uY29udHJvbGxlci5qcyIsInBheXJvbGwuY29udHJvbGxlci5qcyIsInByZUxvZ2luLmNvbnRyb2xsZXIuanMiLCJwcm9qZWN0LmNvbnRyb2xsZXIuanMiLCJyZXBvcnREZXRhaWxzLmNvbnRyb2xsZXIuanMiLCJyZXBvcnRzLmNvbnRyb2xsZXIuanMiLCJyZXBvcnRzTGlzdGluZy5jb250cm9sbGVyLmpzIiwic2V0UGFzc3dvcmQuY29udHJvbGxlci5qcyIsInNldHRpbmcuY29udHJvbGxlci5qcyIsInN1YmNvbnRyYWN0b3IuY29udHJvbGxlci5qcyIsInN1YmNvbnRyYWN0b3JEZXRhaWwuY29udHJvbGxlci5qcyIsInN1cHBsaWVyLmNvbnRyb2xsZXIuanMiLCJzdXBwbGllckRldGFpbC5jb250cm9sbGVyLmpzIiwidG9kby5jb250cm9sbGVyLmpzIiwidG9kb1ZpZXcuY29udHJvbGxlci5qcyIsInZpc3VhbF9wbGFubmVyLmNvbnRyb2xsZXIuanMiLCJjYW52YXNQZGYuZGlyZWN0aXZlLmpzIiwiZmlsZVBpY2tlci5kaXJlY3RpdmUuanMiLCJpbmRleC5kaXJlY3RpdmUuanMiLCJtYXRlcmlhbFBpY2tlci5kaXJlY3RpdmUuanMiLCJpbmRleC5maWx0ZXIuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIk5vdGlmaWNhdGlvblByb3ZpZGVyIiwidWlHbWFwR29vZ2xlTWFwQXBpUHJvdmlkZXIiLCJ0cmVlQ29uZmlnIiwiY2xvdWRpbmFyeVByb3ZpZGVyIiwiY29uZmlndXJlIiwia2V5IiwidiIsImxpYnJhcmllcyIsInNldE9wdGlvbnMiLCJkZWxheSIsInN0YXJ0VG9wIiwic3RhcnRSaWdodCIsInZlcnRpY2FsU3BhY2luZyIsImhvcml6b250YWxTcGFjaW5nIiwicG9zaXRpb25YIiwicG9zaXRpb25ZIiwiZGVmYXVsdENvbGxhcHNlZCIsInNldCIsInJvdXRlQ29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsImZhY3RvcnkiLCIkaHR0cCIsIiRzdGF0ZSIsIiRsb2NhdGlvbiIsImxvY2FsU3RvcmFnZVNlcnZpY2UiLCJnbG9iYWxzIiwiVXBsb2FkIiwiTm90aWZpY2F0aW9uIiwiJHEiLCJfcmVmIiwiaGVhZGVycyIsIm1ldGhvZCIsInRva2VuIiwiQ29udGVudC1UeXBlIiwidW5kZWZpbmVkIiwieC1hY2Nlc3MtdG9rZW4iLCJnZXQiLCJwbGF0Zm9ybSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzb3VyY2UiLCJwcm9ncmVzcyIsImxvZ291dCIsInVzZXJTdG9yZSIsIl9kZWZpbmVQcm9wZXJ0eSIsImxvZ2luIiwicGF5bG9hZCIsInByb21pc2UiLCJ0aGlzIiwicHJvZ3Jlc3NpZnkiLCJkYXRhIiwiZm9yZ290UGFzc3dvcmQiLCJyZWdpc3RyYXRpb24iLCJzdWJzY3JpYmUiLCJnZXRDb21wYW55QnlJZCIsImNvbXBhbnlJZCIsImxpc3RBbGxVc2VycyIsImxpc3RBbGxQcm9qZWN0cyIsInF1ZXJ5T2JqIiwicXVlcnkiLCJPYmplY3QiLCJrZXlzIiwicmVkdWNlIiwiYWNjIiwic3RyIiwic2xpY2UiLCJsaXN0QWxsQ2xpZW50cyIsImxpc3RBbGxSb29mZXJzIiwiY3JlYXRlUHJvamVjdCIsImNyZWF0ZUlzc3VlIiwiaXNzdWVvYmoiLCJjb25zb2xlIiwibG9nIiwidXBsb2FkIiwiY3JlYXRlSXNzdWVTM1VwbG9hZCIsImdldElzc3VlQnlJZCIsImlzc3VlSUQiLCJ1cGRhdGVJc3N1ZSIsImlkIiwiZ2V0UHJvamVjdFJvb2ZQbGFucyIsInByb2plY3RJZCIsInNhdmVSb29mUGxhbiIsInJvb2ZQbGFuSWQiLCJjcmVhdGVNYXRlcmlhbHMiLCJjcmVhdGVFcXVpcG1lbnQiLCJsaXN0QWxsTWF0ZXJpYWxzIiwibGlzdEFsbENvbWJvTWF0ZXJpYWxzIiwibGlzdEFsbEVxdWlwbWVudHMiLCJ1cGRhdGVNYXRlcmlhbEJ5SWQiLCJnZXRNYXRlcmlhbEJ5SWQiLCJtYXRlcmlhbElEIiwiZ2V0Q29tYm9NYXRlcmlhbEJ5SWQiLCJjb21ib0lkIiwiZ2V0RXF1aXBtZW50QnlJZCIsImNyZWF0ZUNvbWJvTWF0ZXJpYWwiLCJ1cGRhdGVDb21ib01hdGVyaWFsTGlzdCIsInVwZGF0ZUNvbWJvTWF0ZXJpYWwiLCJzaG93Q29udmVyc2lvblJhdGUiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInN0YXJ0IiwidGhlbiIsInJlc3AiLCJjb21wbGV0ZSIsImNhdGNoIiwiZXJyIiwic3RhdHVzIiwiaGllcmFyY2h5SWQiLCJEYXRhM0QiLCJjbGllbnQiLCJuYW1lIiwiYWRkZWQiLCJsaW1pdCIsInN1cHBsaWVyIiwic3VwcGxpZXJJRCIsInN1YmNvbnRyYWN0b3IiLCJjb21tZW50IiwiZmlsZXMiLCJkdCIsImNvbXBsZXRpb25TdGF0dXMiLCJkZWZlcnJlZCIsImRlZmVyIiwiaW5mb1Byb21pc2UiLCJkZXRhaWxzUHJvbWlzZSIsImFsbCIsImZydWl0SW5mbyIsImZydWl0RGV0YWlscyIsIm9iamVjdCIsImNoZWNrVXNlciIsImNoZWNrUHJpdmlsZWdlIiwidHlwZSIsInN1YlR5cGUiLCJfbG9jYWxTdG9yYWdlU2VydmljZSQiLCJwcml2aWxlZ2UiLCJfbG9jYWxTdG9yYWdlU2VydmljZSQyIiwicHJpdmlsZWdlcyIsImFwaUZhY3RvcnkiLCJjbGlwQm9hcmQiLCJpdGVtcyIsImNvcHkiLCJpdGVtIiwiY3V0IiwicGFzdGUiLCJkZXN0SWQiLCJsZW5ndGgiLCJ3YXJuaW5nIiwiYXBpVHlwZSIsImFzc2V0SWQiLCJtYXAiLCJ4IiwiX2lkIiwic291cmNlSWQiLCJzdWNjZXNzIiwibWVzc2FnZSIsImUiLCJuYXZpZ2F0aW9uU3RhY2siLCJzdGFjayIsImhlYWQiLCJwdXNoIiwic3BsaWNlIiwiZm9yd2FyZCIsInRvZ2dsZSIsImJhY2t3YXJkIiwiYnJlYWRDcnVtYiIsImJyZWFkQ3J1bWJzIiwidmFsIiwic3BsaXREZXN0aW5hdGlvbiIsImZpbGVzQXJyYXkiLCJzaXplIiwidGVzdCIsImNsb3VkaW5hcnkiLCJzMyIsInJlc29sdmVEZXN0VHlwZSIsImZpbGUiLCJjaGVja1VwbG9hZENvbXBsZXRpb24iLCJib29sIiwiZm9yRWFjaCIsImNvbXBsZXRlZCIsImFib3J0ZWQiLCJjaGVja0R1cGxpY2F0ZUZpbGVzIiwiY2hlY2tBc3NldER1cGxpY2F0ZSIsImFzc2V0TmFtZXMiLCJkdXBsaWNhdGVGaWxlcyIsImFjdGlvbiIsImFzc2V0TmFtZSIsImR1cGxpY2F0ZXMiLCJpbmRleE9mIiwidXBsb2FkRmlsZXMiLCJjaGVja05hbWVDaGFuZ2UiLCJmaWx0ZXIiLCJnZW5lcmF0ZVZlcnNpb24iLCJmaWxlTmFtZSIsIkRhdGUiLCJub3ciLCJnZW5lcmF0ZVRodW1ibmFpbCIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJvbmxvYWQiLCJwZGZqc0xpYiIsImdldERvY3VtZW50IiwicmVzdWx0IiwiZG9jIiwiZ2V0UGFnZSIsInBhZ2UiLCJ2aWV3cG9ydCIsImdldFZpZXdwb3J0IiwiY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY29udGV4dCIsImdldENvbnRleHQiLCJoZWlnaHQiLCJ3aWR0aCIsInRhc2siLCJyZW5kZXIiLCJjYW52YXNDb250ZXh0IiwiZGF0YVVSTCIsInRvRGF0YVVSTCIsImxpbmsiLCJkb3dubG9hZCIsImhyZWYiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJjbGljayIsInJlbW92ZUNoaWxkIiwicmVhZEFzRGF0YVVSTCIsInNwbGl0RmlsZURlc3QiLCJuZ1Byb2dyZXNzRmFjdG9yeSIsInRocm90dGxlciIsImVuYWJsZWQiLCJmbiIsInNldFRpbWVvdXQiLCJwcm9ncmVzc2JhciIsImNyZWF0ZUluc3RhbmNlIiwicmVtb3ZlIiwiZ28iLCJlcnJvciIsInVzZXJEYXRhIiwiZGVzaWduYXRpb24iLCJyZXNldCIsImNvbXBhbnlTdG9yZSIsImNvbXBhbnlEYXRhIiwicmVmZXRjaCIsInByb2plY3RTdG9yZSIsImludmVudG9yeVN0YXRlIiwidGFiIiwic2VhcmNoVGV4dCIsIm1hdGVyaWFsIiwiY29tYm8iLCJzZXRQYWdlIiwidmFsdWUiLCJzZXRUYWIiLCJ0ZXh0IiwiX3RleHQiLCJtVW5pdHMiLCJnZXRDdXJyZW5jeSIsImdldENvdW50cnlDb2RlIiwiZ2V0SW5kdXN0cnkiLCJkZWJvdW5jZSIsInJhdGUiLCJ0aW1lciIsImFyZ3MiLCJjbGVhclRpbWVvdXQiLCJhcHBseSIsImdlbmVyaWNTdG9yZSIsInN0b3JlIiwiZXh0cmFjdFBhZ2VzRnJvbVBkZiIsInBkZkxpbmsiLCJwYWdlQ291bnQiLCJjb25jYXQiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJBcnJheSIsIl8iLCJpIiwicGFnZU9iaiIsInBhZ2VObyIsInJlcGxhY2UiLCJ0aXRsZSIsInNlbGVjdGVkIiwiZGVzY3JpcHRpb24iLCJjcmVhdGVQYWdlc0Zyb21QZGYiLCJwZGYiLCJzZWN1cmVfdXJsIiwibnVtUGFnZXMiLCJwYWdlcyIsInJlbmRlclBhZ2UiLCJ1cGxvYWRGYWN0b3J5IiwiZmlsZU1hbmFnZXJGYWN0b3J5IiwiX2dsb2JhbHMiLCJ2bSIsInMzRmlsZU9iamV0cyIsImdldEFsbEF0T25jZSIsImZpbGVzYXJyYXkiLCJhcnJheSIsImV2YXBvcmF0ZSIsInBhdXNlIiwiYmluZCIsInJlc3VtZSIsImFib3J0IiwiYWRkQ29uZmlnIiwicCIsInN0YXRzIiwiTWF0aCIsInJvdW5kIiwiY29tcGxldGVkQWxsIiwiX3hociIsImF3c0tleSIsImFkZCIsImF3c09iamVjdEtleSIsImFzc2V0RGF0YSIsImFzc2V0ZGVzY3JpcHRpb24iLCJidWNrZXQiLCJtaW1ldHlwZSIsImJ5dGVzIiwiYWxlcnQiLCJyZWFzb24iLCJjbG91ZGluYXJ5UGF5bG9hZCIsInNlbmREYXRhIiwic2lnbmVyVXJsIiwiYXdzX2tleSIsImF3c1JlZ2lvbiIsImNvbXB1dGVDb250ZW50TWQ1IiwiYWxsb3dTM0V4aXN0ZW5jZU9wdGltaXphdGlvbiIsImNyeXB0b01kNU1ldGhvZCIsIkFXUyIsInV0aWwiLCJjcnlwdG8iLCJtZDUiLCJjcnlwdG9IZXhFbmNvZGVkSGFzaDI1NiIsInNoYTI1NiIsImluaXQiLCJFdmFwb3JhdGUiLCJjcmVhdGUiLCJoYW5kbGVyIiwiZmlsZVVwbG9hZCIsImZvcmNlIiwiaXNQYXVzZWQiLCJjYW5jZWwiLCIkcm9vdFNjb3BlIiwiY3JlYXRlU3RhZ2UiLCJkaXZJZCIsImluaXRpYWxTaXplIiwicGxhbm5lckRhdGEiLCJzdGFnZSIsImpzb25TdHJpbmciLCJLb252YSIsIk5vZGUiLCJTdGFnZSIsImNvbnRhaW5lciIsInkiLCJnZXRTdGFnZVNpemUiLCJvbiIsImRpbWVuc2lvbnMiLCJkcmF3IiwiZWwiLCJnZXRFbGVtZW50QnlJZCIsImNsaWVudEhlaWdodCIsImNsaWVudFdpZHRoIiwic2hhcGVJZCIsImRlZmF1bHRDb3VudCIsInNoYXBlcyIsInJlY3RhbmdsZSIsInNxdWFyZSIsImNpcmNsZSIsImVsbGlwc2UiLCJjYWxpYnJhdG9yIiwiZnJlZUhhbmQiLCJwb2x5Z29uIiwibWFya2luZ3MiLCJsaW5lIiwic2luZ2xlQXJyb3ciLCJkb3VibGVBcnJvdyIsImJlemllciIsImZyZWVoYW5kIiwic2VsZWN0aW9uIiwibWVhc3VyZW1lbnQiLCJjdXJyZW50Q291bnQiLCJsb2FkIiwiY291bnQiLCJnZXRDb3VudCIsInNoYXBlIiwiZHJhd1N0YXRlIiwiaW5pdGlhbERyYXdTdGF0ZXMiLCJkcmF3U3RhdGVzIiwic3BsaXQiLCIkYnJvYWRjYXN0IiwiY2hlY2siLCJjYWxpYnJhdGlvblN0YXRlIiwidW5pdCIsIm9iaiIsImFjdGlvblN0YXRlcyIsImFjdGlvbnMiLCJzaG93IiwicGVlayIsInVuZG8iLCJkZWxldGUiLCJyZWRvIiwicmVzdG9yZSIsImFjdGlvbkhhbmRsZXIiLCJlbnRpdHkiLCJwcm9jZXNzIiwiYWN0aW9uVHlwZSIsInByb3BzIiwiaGFuZGxlcnMiLCJiYXRjaERyYXciLCJtb3ZlIiwicG9zaXRpb24iLCJlbmQiLCJzaGFwZVByb3BzIiwibW92ZW1lbnQiLCJzaGFwZVByb3BlcnR5SGlzdG9yeSIsInRyYW5zZm9ybWVycyIsImxheWVyIiwidHJhbnNmb3JtZXIiLCJyZW1vdmVBbGwiLCJkcmFnT2Zmc2V0Iiwic3RhZ2VQb3NpdGlvbiIsImxheWVyT2Zmc2V0Iiwic3RhZ2VTY2FsZSIsInNlbGVjdGVkU2hhcGUiLCJzZWxlY3Rpb25TdG9yZSIsInNlbGVjdGlvbnMiLCJwdWxsIiwic2hhcGVOYW1lIiwic2hhcGVOYW1lcyIsImNsZWFyIiwiYXNzb2NpYXRpb25zIiwibWV0aG9kcyIsImNyZWF0ZUFzc29jaWF0aW9uIiwiZW50aXR5SWQiLCJnZXRBc3NvY2lhdGlvbnMiLCJnZXRBc3NvY2lhdGlvbnNGb3JTYXZlIiwibWF0ZXJpYWxJZCIsImVxdWlwbWVudElkIiwicmVtb3ZlQXNzb2NpYXRpb24iLCJmcmVlemUiLCJ3aW5kb3dFdmVudHMiLCJ3aW5kb3dPYmplY3QiLCJlbnRpdGllcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJldiIsImZpcmUiLCJyZWdpc3RlciIsInN0YWdlRXZlbnRzIiwiZXZlbnRzIiwiZXZlbnQiLCJzaGFwZUV2ZW50cyIsImxheWVyRXZlbnRzIiwiY3JlYXRlTGF5ZXIiLCJMYXllciIsImluaXRpYXRlUHJvY2VzcyIsImJhc2VMYXllciIsInByb2Nlc3NlcyIsImNyZWF0ZVByb2Nlc3MiLCJncm91cCIsIkdyb3VwIiwiZ2V0UHJvY2Vzc2VzIiwiZ2V0Q3VycmVudCIsInNldEN1cnJlbnQiLCJpbmRleCIsInNob3dQcm9jZXNzIiwiaGlkZVByb2Nlc3MiLCJsb2FkUHJvY2Vzc2VzIiwicHJvY2Vzc2VzRnJvbUpzb24iLCJldmVudHNWUEZhY3RvcnkiLCJjb21tb25WUEZhY3RvcnkiLCJ0b29sc1ZQRmFjdG9yeSIsImNyZWF0ZWRTaGFwZSIsInNoYXBlVG9vbHMiLCJwb2x5Z29uT3B0aW9ucyIsInBvaW50cyIsInBvaW50U2V0IiwiZ2V0U2hhcGVUb29scyIsImxvYWRTaGFwZUlkIiwiZ2V0U2hhcGVJZCIsImNyZWF0ZVNoYXBlIiwiTGluZSIsInN0cm9rZSIsInN0cm9rZVdpZHRoIiwiZmlsbCIsImRyYWdnYWJsZSIsImNsb3NlZCIsIkVsbGlwc2UiLCJyYWRpdXMiLCJkcmF3U2hhcGUiLCJzaGFwZUxvY2siLCJtaXNjIiwiY2xhc3NOYW1lIiwiZHJhd1JlY3RhbmdsZSIsImFicyIsInNoYXBlbG9jayIsImRhc2giLCJkZXN0cm95U2hhcGUiLCJjYW5jZWxEcmF3aW5nIiwic2VsZWN0aW9uUG9pbnRzIiwic3R5bGUiLCJjdXJzb3IiLCJjcmVhdGVQb2x5Z29uIiwiZnJlZUhhbmRNYXJrZXIiLCJjaGVja1RocmVzaG9sZCIsImRyYXdQb2x5Z29uIiwiY3JlYXRlTGluZSIsIkFycm93IiwicG9pbnRlckxlbmd0aCIsInBvaW50ZXJXaWR0aCIsInBvaW50ZXJBdEJlZ2lubmluZyIsImRyYXdMaW5lIiwiY3JlYXRlQmV6aWVyTGluZSIsImNyZWF0ZWRQb2ludHMiLCJxIiwidGVuc2lvbiIsImxpbmVKb2luIiwiZHJhd0JlemllckxpbmUiLCJjcmVhdGVUZXh0IiwidGV4dFNoYXBlIiwiVGV4dCIsImZvbnRTaXplIiwiZm9udEZhbWlseSIsImNyZWF0ZVRleHRHcm91cCIsInRleHRHcm91cCIsImlzRG9uZSIsImtpbGwiLCJkZXN0cm95Iiwic2NhbGUiLCJ4VXBwZXJUaHJlc2hvbGQiLCJ5VXBwZXJUaHJlc2hvbGQiLCJ4TG93ZXJUaHJlc2hvbGQiLCJ5TG93ZXJUaHJlc2hvbGQiLCJleHRyYWN0QWxsU2hhcGVzIiwiYWxsU2hhcGVzIiwiZmluZCIsImdldENoaWxkcmVuIiwiY2hpbGQiLCJzZWxlY3RTaGFwZXMiLCJtaW4iLCJtYXgiLCJjaGVja1NlbGVjdGlvbiIsInNlbGVjdGVkU2hhcGVzIiwicG9zaXRpb25PZmZzZXQiLCJ2ZXJ0aWNlcyIsInJhbmdlIiwicHJvcCIsInBvbHlnb25BcmVhIiwiZGV0IiwiY2h1bmtlZEFycmF5IiwiY2h1bmsiLCJsIiwiTnVtYmVyIiwicGFyc2VGbG9hdCIsInRvRml4ZWQiLCJyZWN0YW5nbGVBcmVhIiwiYXJlYSIsImVsbGlwc2VBcmVhIiwicmFkaWkiLCJQSSIsImVsbGlwc2VUcmFuc2ZvbWVyIiwiZWxsaXBzZVBvc2l0aW9uIiwiaW5jIiwiJGluZGV4IiwiQ2lyY2xlIiwic2NhbGVYIiwidG9TdHJpbmciLCJkcmFnQm91bmRGdW5jIiwicG9zIiwiZ2V0QWJzb2x1dGVQb3NpdGlvbiIsImNpcmNsZUV2ZW50IiwicHJldmlvdXNSYWRpdXMiLCJzZWxlY3RlZFZlcnRleCIsImlzTmVnYXRpdmUiLCJjaGlsZHJlbiIsInoiLCJ0YXJnZXQiLCJnZXRHcm91cCIsImN1c3RvbVRyYW5zZm9ybWVyIiwiaXNSZWN0YW5nbGUiLCJ0ZW1wIiwidXBkYXRlIiwib2Zmc2V0IiwiZ2V0UG9pbnRzIiwiYmV6aWVyVHJhbnNmb3JtZXIiLCJzY2FsZVRyYW5zZm9ybWVyQmFzZWRPblpvb20iLCJ0cmFuc2Zvcm1lckdyb3VwIiwibWV0cmljcyIsInNoYXBlSW5mbyIsInNldFNoYXBlSW5mbyIsImluZm8iLCJnZXRTaGFwZUluZm8iLCJjb2xvclBpY2tlciIsIm9wYWNpdHkiLCJhc3NpZ24iLCIkc2NvcGUiLCIkdGltZW91dCIsImF1dGhGYWN0b3J5IiwiTmdNYXAiLCJsb2dnZWRJbiIsInBhdGgiLCIkIiwiY3NzIiwiRGF0YVRhYmxlIiwiaW52aXRlZXMiLCJpbWciLCJsYiIsIiR3YXRjaCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJhY3RpdmVKdXN0aWZpZWQiLCJjdXJyZW50UGFnZSIsInRvZ2dsZU9iaiIsInRvZ2dsZUNsaWVudCIsImNsaWVudE5hbWUiLCJwaG9uZU5vIiwiZW1haWwiLCJwcmltYXJ5QWRkIiwiY3JlYXRlZCIsInNvcnRjbGllbnRzIiwicmVzb3VyY2UiLCJzb3J0Iiwic2VhcmNoIiwic29ydFR5cGUiLCJhbGxDbGllbnRzIiwibGlzdCIsImNsaWVudENvdW50IiwidG90YWwiLCJwYWdpbmF0aW9uIiwiaXRlbXNPblBhZ2UiLCJjc3NTdHlsZSIsImhyZWZUZXh0UHJlZml4Iiwib3JkZXJpbmciLCJvblBhZ2VDbGljayIsInByZXZlbnREZWZhdWx0Iiwic2VhcmNoRGVib3VuY2UiLCJzZWFyY2hDbGllbnRzIiwiZHRPcHRpb25zIiwicGFnaW5nIiwic2VhcmNoaW5nIiwibG9hZENvdW50cnlDb2RlIiwiJHF1ZXJ5IiwiZ2V0SW5kdXN0cmllcyIsImxvYWRJbmR1c3RyeSIsImdldEN1cnJlbmNpZXMiLCJsb2FkQ3VycmVuY3kiLCJhZGROZXdDbGllbnQiLCJ2YWxpZCIsImNsaWVudGRhdGEiLCJpbmR1c3RyaWVzIiwiY2xpZW50Q29udGFjdCIsImRpYWxDb2RlIiwicGhvbmVOdW1iZXIiLCJ5ZWFyRm91bmRlZCIsImNsaWVudFdlYnNpdGUiLCJpbmR1c3RyeSIsImVsZW1lbnQiLCJjbGllbnRDb250YWN0UGVyc29uIiwiZmlyc3ROYW1lIiwibWlkZGxlTmFtZSIsImxhc3ROYW1lIiwibW9iaWxlIiwiYW5udWFsUmV2ZW51ZSIsImN1cnJlbmN5Q29kZSIsImNjIiwiYWRkcmVzczIiLCJjb3VudHJ5Q29kZSIsImxpbmUxIiwibGluZTIiLCJsaW5lMyIsImNpdHkiLCJwb3N0YWxDb2RlIiwiY29kZSIsImFkZHJlc3MxIiwiY3JlYXRlQ2xpZW50IiwiY2xpZW50RGF0YSIsIm1vZGFsIiwiJHN0YXRlUGFyYW1zIiwiZ2V0Q29tYm9NYXREZXRhaWwiLCJjb21ib0RhdGEiLCJjb21ib01tYXRyaWFsTmFtZSIsInVvbSIsImNvbWJvTWF0ZXJpYWxMaXN0IiwibWF0ZXJpYWxDb3N0IiwiY3VycmVudFJhdGUiLCJxdWFudGl0eSIsIm1hdGVyaWFsVG90YWwiLCJyb29mZXJDb3N0Iiwicm9vZmVyVG90YWwiLCJpbWdTbGlkZXIiLCJmbGV4c2xpZGVyIiwiYW5pbWF0aW9uIiwiY29udHJvbE5hdiIsImFuaW1hdGlvbkxvb3AiLCJzbGlkZXNob3ciLCJpdGVtV2lkdGgiLCJpdGVtTWFyZ2luIiwiYXNOYXZGb3IiLCJzeW5jIiwiZWRpdEZsYWciLCJyZW1vdmVkRmlsZXMiLCJyZW1vdmVJbWciLCJtYXRyaWFsRGF0YSIsImVkaXRDb21ib01hdGVyaWFsTGlzdCIsIm1hdGVyaWFsTGlzdCIsIm1hdGVyaWFsUXR5Iiwic2VsZWN0ZWRNYXRlcmlhbENvc3QiLCJzZWxlY3RlZE1hdGVyaWFsUm9vZmVyQ29zdCIsInBlcmNlbnRhZ2VBZGRpdGlvbnMiLCJwZXJjZW50YWdlQWRkaXRpb24iLCJtYXRlcmlhbEluZGV4IiwiYWRkUGVyY2VudGFnZVZhbHVlIiwicGVyY2VudGFnZVR5cGUiLCJyZW1vdmVQZXJjZW50YWdlQWRkaXRpb24iLCJmaWxlVXBkYXRlZCIsImZpbGVPYmoiLCJmaWxlTmFtZXMiLCJlZGl0Q29tYm9NYXRlcmlhbCIsImF0dHIiLCJjb21ib0xpc3REYXRhIiwiY29tYm9MaXN0QXJyYXkiLCJjb21ib01hdGVyaWFsRGF0YSIsImlucHV0RmlsZXMiLCJ1cGRhdGVDb21ibyIsImNsaWVudHMiLCJnZXRIaWVyYXJjaHlUZW1wbGF0ZSIsInRlbXBsYXRlTGlzdCIsImZpbGVtYW5hZ2VyVGVtcGxhdGUiLCJnbWFwIiwibWFya2VycyIsInN0eWxlcyIsImNlbnRlciIsInpvb20iLCJwcm9qZWN0RGF0YSIsImFkZHJlc3MiLCJzZWxlY3QyT3B0aW9ucyIsImFsbG93Q2xlYXIiLCJwbGFjZU1hcmtlciIsInBsYWNlRGF0YSIsImdldFBsYWNlIiwiZ2VvbWV0cnkiLCJsb2NhdGlvbiIsImxhdCIsImxuZyIsImxvYyIsImNvb3JkaW5hdGVzIiwiYWRkUHJvamVjdCIsImZvcm1EYXRhIiwidGVtcGxhdGVJZCIsImxvYWRIaWVyYXJjaHlUcmVlIiwidXBkYXRlTWFya2VyIiwiZ2V0UG9zaXRpb24iLCJnZXRNYXAiLCJkaXNhYmxlRGVmYXVsdFVJIiwiem9vbUNvbnRyb2wiLCJhc3NpZ25UZW1wbGF0ZSIsInNlbGVjdGVkVGVtcGxhdGUiLCIkd2luZG93IiwibG9hZGVyIiwiY2xpZW50VXJsIiwiZWxlbWVudFR5cGUiLCJzdHlsZXJzIiwiY29sb3IiLCJ2aXNpYmlsaXR5IiwiZmVhdHVyZVR5cGUiLCJwcm9qZWN0TGlzdCIsIm14TGF0IiwibXhMbmciLCJtbkxhdCIsIm1uTG5nIiwibXJrciIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwiZGFzaGJvYXJkRGF0YSIsImNvbXBhbnkiLCJwcm9qZWN0cyIsImNodW5rU2l6ZSIsInByb2plY3RTZWFyY2giLCJlbmFibGVMYXp5TG9hZCIsInNvcnRQYXJhbXMiLCJmaWVsZCIsInByb2plY3ROYW1lIiwiZ2V0Qm9va21hcmtlZFByb2plY3QiLCJnZXRCb29rbWFya3MiLCJib29rbWFya2VkUHJvamVjdCIsImJvb2ttYXJrcyIsImJvb2ttYXJrZWRQcm9qZWN0TGlzdCIsImxvYWRQcm9qZWN0RmlsZXMiLCJzaG93UHJvamVjdEZpbGVzIiwicHJvamVjdEZpbGVzIiwiYm9va21hcmtGbGFnIiwic2VsZWN0ZWRQcm9qZWN0IiwicHJvamVjdCIsInByb2plY3RQaWNrZXJEYXRhIiwiY2hvb3NlUHJvamVjdCIsImZpbmRJbmRleCIsImFscmVhZHlFeGlzdCIsImN1cnJlbnRQcm9qZWN0IiwiYWxyZWFkeUJvb2ttYXJrZWQiLCJjbG9zZVByb2plY3RQaWNrZXIiLCJjaGVja0Jvb2ttYXJrIiwiYm9va21hcmsiLCJib29rTWFya1Byb2plY3QiLCJhZGRNb3JlIiwiZmlsZVBpY2tlck9wdGlvbnMiLCJzZWFyY2hQcm9qZWN0cyIsInJlZGlyZWN0VG8zRCIsImdldDNEUGFnZSIsInJlc3BvbnNlIiwiZ29Ub0ZpbGVNYW5hZ2VyIiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsInRvcCIsImZvY3VzIiwicGxhblBpY2tlclBsYW5zIiwicm9vdEZvbGRlcnMiLCJvcGVuUGxhblBpY2tlciIsInJvb2ZQbGFucyIsImdldEhpZXJhcmNoeSIsInNob3dUcmVlIiwiaGllcmFyY2hpZXMiLCJjaG9vc2VQbGFuIiwicGxhbiIsImFsbE1vZGFsQ2xvc2UiLCJmaWxlQ2hvb3NlIiwicGlja2VyRm9sZGVycyIsIi13ZWJraXQtYm94LXNoYWRvdyIsIi1tb3otYm94LXNoYWRvdyIsImJveC1zaGFkb3ciLCJoaWRlIiwibW92ZXRvIiwiZm9sZGVyTmFtZSIsImJhY2tCdG5WaWV3IiwiJG9uIiwic2VsZWN0ZWRBc3NldEZvclBsYW4iLCJyb29mcGxhbkJyZWFkQ3J1bWIiLCJmaWxlQXJyYXkiLCJwZGZGaWxlcyIsInBsYW5Eb2N1bWVudCIsIiRhcHBseSIsInBkZlBhZ2VzRGF0YSIsInBsYW5JbWFnZXMiLCJoaWRlU2VsZWN0RmlsZSIsInNlbGVjdGVkRmlsZUxpc3QiLCJhc3NldCIsInNlbGVjdGVkRmlsZXMiLCJlbmRwb2ludCIsInBkZlVybCIsImdlbmVyYXRlUm9vZlBsYW5zIiwiZXF1aXBtZW50Iiwic3VidGl0bGUiLCJ3b3JrIiwidGFnIiwiaW1nX3VwbG9hZCIsImVxdWlwZG9jdW1lbnRzIiwic3lzdGVtVGFnIiwiY3JlYXRlZEF0Iiwic29ydEVxdWlwbWVudCIsImVxdWlwbWVudENvdW50Iiwic2VhcmNoRXF1aXBtZW50IiwiYWRkTWF0ZXJpYWwiLCJjb252ZXJzaW9uRmFjdG9yIiwidGFiU2V0dGluZ3MiLCJkaXNhYmxlIiwiY3VycmVuY3kiLCJjdXJyZW50Q3VycmVuY3kiLCJmcm9tIiwidG8iLCJjdXJyZW5jeURhdGEiLCJjdXJyZW5jaWVzIiwidGFiU3R5bGUiLCJtYXRlcmlhbE5hbWUiLCJtYXRlcmlhbFVuaXQiLCJhZGRNYXRlcmlhbE5leHQiLCJjaGFuZ2VDb3N0IiwiY29zdCIsImNvbnZlcnNpb25SYXRlIiwiYWRkTWF0ZXJpYWxEZXRhaWxzIiwiZXF1aXBtZW50Q29zdHMiLCJlcXVpcG1lbnRDb3N0VmFsdWUiLCJyb29mZXJDb3N0VmFsdWUiLCJicmVha2NydW1iU3RvcmUiLCJnZXRQcmltYXJ5Rm9sZGVycyIsImJhY2t1cEZvbGRlcnMiLCJ3aW5kb3dJdGVtcyIsImZvbGRlckRhdGEiLCJmb2xkZXJzIiwicmVzb2x2ZUFzc2V0SWNvbiIsImFzc2V0T2JqIiwiYXNzZXRGb3JtYXQiLCJmb3JtYXQiLCJ0cmltIiwiaWNvbiIsInZpZXdQcm9qZWN0QXNzZXRzIiwibG9hZEZpbGVzVG9BdXRvQ29tcGxldGUiLCJnZXRGb2xkZXIiLCJnZXRIaWVyYXJjaHlDaGlsZHJlbiIsImZpbGVEZXN0aW5hdGlvbiIsInRyZWVPcHRpb25zIiwiYWNjZXB0IiwiZGVzdCIsImRlc3RJbmRleCIsImRyYWdTdG9wIiwibm9kZVNjb3BlIiwiZGVzdGluYXRpb24iLCIkbm9kZVNjb3BlIiwiJHBhcmVudCIsIiRtb2RlbFZhbHVlIiwibW92ZUFzc2V0cyIsImRyb3BwZWQiLCJub2Rlc1Njb3BlIiwiJHBhcmVudE5vZGVTY29wZSIsInBhcmVudElkIiwiZHJhZ01vdmVOb2RlcyIsInJvb3RGb2xkZXJTdG9yZSIsInNldFJvb3RGb2xkZXIiLCJhZGRNb2RhbEFjdGl2ZVRhYiIsImFkZFByaW1hcnlGb2xkZXIiLCJpc1BhcmVudCIsIm5vZGVPYmoiLCJhZGRIaWVyYXJjaHkiLCIkbm9kZXNTY29wZSIsIm9wZW5BZGRNb2RhbCIsImFkZE1vZGFsU291cmNlIiwic2hvd0xvYWRlciIsInRvZ2dsZUZvbGRlciIsImZvbGRlciIsIm5vZGUiLCJiYWNrdXAiLCIkdHJlZVNjb3BlIiwiJGVsZW1lbnQiLCJmaXJzdCIsInZpZXdIaWVyYXJjaHkiLCJicmVhZENydW1iTGlzdCIsImJyZWFkY3J1bWJzIiwiY29sbGFwc2VkIiwibmF2aWdhdGUiLCJvcGVuRm9sZGVyIiwiY2hpbGROb2RlcyIsImFkZEZvbGRlciIsInBhcmVudCIsImFkZEZpbGVUb0hpZXJhcmNoeSIsImFzc2V0cyIsImRlbGV0ZUZpbGUiLCJkZWxldGVBc3NldHMiLCJ1cGxvYWRTdGF0ZSIsInRvZ2dsZVVwbG9hZFZpZXdNYXhpbWl6ZSIsInVwbG9hZFZpZXdNYXhpbWl6ZSIsInByZVVwbG9hZCIsInByb2Nlc3NlZCIsInByZVVwbG9hZEZpbGVzIiwidXBsb2FkRmlsZSIsInByb2Nlc3NEdXBsaWNhdGVGaWxlTmFtZSIsInVwbG9hZFZpZXdGaWxlcyIsImZvbGRlcklkIiwibmV3RmlsZVVwbG9hZCIsInVwbG9hZEZpbGVJbkZpbGVNYW5hZ2VyIiwiY2xvc2VVcGxvYWRWaWV3IiwiZmlsZVZpZXciLCJwcmV2aWV3RGF0YSIsImN1c3RvbVVybCIsImVkaXRFbmFibGVkIiwidG9nZ2xlRWRpdCIsImNvbnRleHRNZW51T3B0aW9ucyIsImV4cGxvcmVyIiwiJGl0ZW1TY29wZSIsIiRldmVudCIsIm1vZGVsVmFsdWUiLCIkbGkiLCJwZGZvbmx5IiwibW92ZVRvU291cmNlRmlsZSIsImNoaWxkRm9sZGVyVmlldyIsImNoaWxkRm9sZGVycyIsInNhdmVIaWVyYXJjaHlUcmVlIiwiY2hhbmdlUHJvamVjdFRlbXBsYXRlIiwiZ2V0UHJvamVjdEJ5SWQiLCJzaG93QmFja3VwRmlsZXMiLCJzaG93UmVjZW50RmlsZXMiLCJ0b2dnbGVCb29rbWFya3MiLCJGaWxlU2F2ZXIiLCJpc3N1ZUlkIiwiSW1hZ2VBc3NldHMiLCJEb2N1bWVudEFzc2V0cyIsIml0ZW1zUGVyUGFnZSIsImdldElzc3VlRGV0YWlsIiwiaXNzdWVEYXRhIiwidG90YWxJdGVtcyIsImNvbW1lbnRzIiwiQXJyYXlDb21tZW50cyIsInJldmVyc2UiLCJBcnJheUFjdGl2aXRpZXMiLCJpc3N1ZUFjdGl2aXR5IiwiYWxsQ29tbWVudHMiLCJhbGxBY3Rpdml0aWVzIiwicGFnZWREYXRhIiwic2V0UGFnaW5nRGF0YSIsInNldEFjdGl2aXR5UGFnaW5nRGF0YSIsImxpc3RBc3NldHMiLCJwb3N0Q29tbWVudCIsImNvbW1lbnQxIiwiY29tbWVudG9iaiIsInBvc3RDb21tZW50Rm9ySXNzdWUiLCJjaGFuZ2VDb21wbGV0aW9uU3RhdHVzIiwiZG93bmxvYWRGaWxlIiwiZG9jcyIsImJsb2IiLCJCbG9iIiwic2F2ZUFzIiwib3JpZ2lvbmFsbmFtZSIsInJlT3Blbklzc3VlIiwicmVPcGVuSXNzdWVTdGF0dXNVcGRhdGUiLCJtYXJrSXNzdWVBc0NvbXBsZXRlIiwiaW1hZ2VGaWxlcyIsImVkaXRPYmplY3QiLCJJbWFnZXMiLCJzYXZlSXNzdWVBc0NvbXBsZXRlIiwiVXBsb2FkZWRGaWxlcyIsImlzc3VlTW9kZWwiLCJvcGVuRWRpdCIsImZpbGVzVG9SZW1vdmUiLCJpc1NlbGVjdGVkQnRuIiwidXBkYXRlZm9ybSIsIlVuZG9BcnJheSIsInJlZG9BcnJheSIsInBsYW5Ub01hcmsiLCJMb2NhbEltZ3MiLCJzZWFyY2hpbmdUZXh0Iiwib3BlbkZpbGxDb2xvciIsImNvbG9ycGljayIsImNvbG9yV2VsbCIsImZpbGxXZWxsIiwiZmlsbENvbG9yIiwidGV4dEZvcm0iLCJlcnJvckltYWdlIiwiYnRuTWFya2VyIiwiYnRuQ2lyY2xlIiwiYnRuTGluZSIsImJ0blRleHQiLCJ0b2dnbGVJc3N1ZSIsInNvcnRpc3N1ZXMiLCJsaXN0QWxsSXNzdWVzIiwiYWxsSXNzdWVzIiwiaXNzdWVDb3VudCIsImRyYWdTdGFydExpbmUiLCJpc0xpbmUiLCJkcmFnZ2luZyIsImZsb29yIiwiY2xpZW50WCIsInJlY3QiLCJsZWZ0IiwicmlnaHQiLCJjbGllbnRZIiwiYm90dG9tIiwiZHJhZ1N0YXJ0TG9jYXRpb24iLCJYIiwiWSIsInNuYXBzaG90IiwiZ2V0SW1hZ2VEYXRhIiwiZHJhZ0xpbmUiLCJwdXRJbWFnZURhdGEiLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJsaW5lVG8iLCJzdHJva2VTdHlsZSIsImxpbmVXaWR0aCIsImxpbmVDYXAiLCJkcmFnU3RvcExpbmUiLCJpbWFnZURhdGEiLCJzZWFyY2hJc3N1ZXMiLCJpc3N1ZUNhdGVnb3J5IiwiYWxsVXNlcnMiLCJhbGxSb29mZXJzIiwiYWxsUHJvamVjdHMiLCJnZXRJc3N1ZXNMaXN0IiwibGlzdE9mSXNzdWUiLCJyZWFkSW1nIiwiZmlsZUltZyIsIm91dHB1dCIsInNyYyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsImFkZEZpbGUiLCJkZWxldGVJbWciLCJmaWxlVXBFdmVudCIsInRodW1ibmFpbCIsIm9uZWZpbGUiLCJTUkMiLCJpbWFnZSIsImdldERlc2NyaXB0aW9uIiwiY29tZW50IiwiZmlsZXMzVXBkYXRlIiwiaXNzdWVkYXRhIiwibmV3SXNzdWVzM0ZpbGVVcGxvYWQiLCJmaWxlc2Nsb3VkaW5hcnlVcGRhdGUiLCJpc3N1ZUltYWdlIiwic2F2ZUlzc3VlRGV0YWlsIiwiaXNzdWVPYmplY3QiLCJjYXRlZ29yeSIsIm93bmVySWQiLCJvd25lciIsImRlYWRMaW5lIiwiZGVwZW5kZW5jeU9uIiwiaXNzdWVTdGF0dXMiLCJBRERJU1NVRSIsImFzc2lnbmVkVG8iLCJsb2NhbEZpbGVzIiwiZ2V0RmlsZXNGcm9tTG9jYWwiLCJmaXJzdENhbnZhc0ltZyIsInJlbW92ZURhdGEiLCJpcyIsImdldEltYWdlc0luQ2Fyb3NlbCIsIlByb2plY3RQbGFucyIsImNob29zZVBsYW5EYXRhIiwiY2hvb3NlUGxhbkRhdGExIiwiYWRkVG9EZXRhaWxzIiwiaW1nYXJyYXkiLCJhZGRUb0RldGFpbHMxIiwiZ2V0RGV0YWlsIiwiaXNzdWUiLCJUaXRsZSIsIkRlc2NyaXB0aW9uIiwiRGVhZExpbmVEYXRlIiwiZGVmYXVsdFZhbHVlIiwiZGF5IiwiZ2V0RGF0ZSIsIm1vbnRoIiwiZ2V0TW9udGgiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJkZWFkTGluZURhdGUiLCJTdGF0dXMiLCJhZGRGaWxlVG9VcGRhdGUiLCJ1cGRhdGVSZXF1ZXN0IiwidXBkYXRlb2JqIiwicmVtb3ZlRmlsZXMiLCJpbWFnZUlkIiwiY2xvc2VVcGR0ZU1vZGVsIiwib3BlbkVkaXREYXRlIiwiY2xvc2VFZGl0RGF0ZSIsInVwZGF0ZUlzc3VlRGV0YWlscyIsImltYWdlVGVtcFVybCIsInJvb2Z0ZXN0RGVtbyIsInN0cmluZyIsIm9wZW5TbGlkZXJJbWFnZSIsImlzQ2lyY2xlIiwiaXNNYXJrZXIiLCJpc1RleHQiLCJkcmF3TGluZU9uQ2FudmFzIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRyYWdTdGFydCIsImRyYWciLCJNYXJrV3JpdGUiLCJUZXh0V3JpdGUiLCJVbmRvRHJhd2luZyIsInVuZG9DdHgiLCJjbGVhclJlY3QiLCJpbWdkYXRhIiwicG9wIiwiUmVkb0RyYXdpbmciLCJzYXZlTWFya0luZm8iLCJzZXRBdHRyaWJ1dGUiLCJtb21lbnQiLCJfdGhpcyIsImlucHV0SW1nIiwicmV0cmlldmUiLCJhY3RpdmVUYWIiLCJlcSIsInRvZ2dsZVRhYiIsImdldEFsbFN1cHBsaWVycyIsInN1cHBsaWVycyIsInVuaXRTZWxlY3QiLCJzZWxlY3RlZFVuaXQiLCJzb3J0RGlzcGxheSIsInNvcnRNYXRlcmlhbHMiLCJhcGlOYW1lIiwic2VhcmNoTWF0ZXJpYWxzIiwibWF0ZXJpYWxzIiwibWFpbnRlbmFuY2VQZXJpb2QiLCJtYWludGVuYW5jZURhdGUiLCJjaGFuZ2VNYWludGVuYW5jZVBlcmlvZCIsImRheXMiLCJ0YWJDaGFuZ2UiLCJmbGFnIiwidGFiQ2hhbmdlRnVuIiwiYWRkQ29tYm9NYXRlcmlhbEZvcm0iLCJUb3RhbE1DIiwiVG90YWxSQyIsImluZGV4VmFsIiwiZGVzY3JpcHRpb25Qb3BvdmVyIiwiZmlsZVR5cGUiLCJmaWxlSW5kZXgiLCJhZGREZXNjcmlwdGlvbiIsIm1hdGVyaWFsQ29zdFZhbHVlIiwiYXNzZXREZXNjcmlwdGlvbiIsImxvYWRDdXJyZW5jaWVzIiwiYWxsbWF0ZXJpbGFMaXN0IiwiY29tYm9MaXN0IiwiZ2V0TWF0ZXJpYWxJbmZvIiwibWF0ZXJpYWxJbmZvIiwicGFyc2UiLCJRdHlDaGFuZ2UiLCJwZXJjZW50YWdlVmFsdWUiLCJtYXRlcmlhbENvbWJpbmF0aW9uIiwiY29tYm9NYXRlcmlhbCIsIm1vZGVsIiwiY3JlYXRlQ29tYm9NYXRlcmlhbExpc3QiLCJjbUxpc3QiLCJwZXJBZGRpdGlvbnMiLCJ1bml0U3ltYm9sIiwiZ2V0U3lzdGVtVGFnIiwiY29tYm9UYWciLCJleHRlbmQiLCJyZW1vdmVNYXRlcmlsIiwiZWRpdE1hdGVyaWFsIiwiZ2V0TWF0RGV0YWlsIiwibWF0cmlhbE5hbWUiLCJtYXRyaWFsVW5pdCIsIm1hdHJpYWxDb3N0IiwibWF0cmlhbEN1cnJlbmN5Q29kZSIsIm1hdHJpYWxSb29mZXJDb3N0IiwibWF0cmlhbFJvb2ZlckN1cnJlbmN5Q29kZSIsIm1hdHJpYWxDcmVhdGVkQnkiLCJwcm92aWRlckRhdGEiLCJ1cGRhdGVkQnkiLCJtYXRyaWFsQ3JlYXRlZEF0IiwibWF0cmlhbFVwZGF0ZWRBdCIsImdyYXlfYm94IiwiZWRpdE1hdGVyaWFsRnVuY3Rpb24iLCJtYXRlcmlhbHVwZGF0ZWRhdGEiLCJtYXRfaGVhZGVycyIsIm1hdF9oZWFkIiwibWF0X2l0ZW1zIiwic19ubyIsImRhdGUiLCJtX2Nvc3QiLCJ3X2Nvc3QiLCJ0b2RvX2xpc3QiLCJjbGFzc25hbWUiLCJyZWdzaXRlck1vZGFsIiwibG9naW5Nb2RhbCIsImZvcmdvdFBhc3NNb2RhbCIsImlzVmFsaWQiLCJ1c2VyIiwiZm9yZ290UGFzcyIsInN1YnNjcmliZUVtYWlsIiwiaW1hZ2UxIiwiaW1hZ2UyIiwicmVwb3J0T2JqIiwic2h3Q29tbWVudFNlY3Rpb24iLCJSZXBvcnRJc3N1ZSIsImlzc3VlVG9BZGQiLCJtb2RlbHMiLCJleHBvcnRUb1BkZiIsIkltYWdlIiwiaW1nMSIsImpzUERGIiwiYWRkSW1hZ2UiLCJhdXRvVGFibGUiLCJodG1sIiwibWFyZ2luIiwicGFnZUJyZWFrIiwidGFibGVXaWR0aCIsInNob3dIZWFkZXIiLCJzZXRGb250U2l6ZSIsInNldEZvbnQiLCJzYXZlIiwiaXNzdWVTZWFyY2giLCJvcGVuUmVwb3J0UGlja2VyIiwiaXNzdWVQaWNrZXJEYXRhIiwicmVzZGF0YSIsIkVkaXRNb2RlIiwiY2xvc2VJc3N1ZVBpY2tlciIsInJlbWFya0RhdGEiLCJhZGRSZW1hcmsiLCJWYWx1ZSIsImNob29zZUlzc3VlcyIsImFkZFRvTGlzdElzc3VlUGlja2VyIiwic2VuZElzc3VlVG9QZGYiLCJjb3ZlclBhZ2VNb2RhbCIsImFib3V0VXNNb2RhbCIsInByb2plY3RNZXRhTW9kYWwiLCJyZXBvcnRyZW1hcmtNb2RhbCIsImxpc3RJc3N1ZU1vZGVsQ2xpY2siLCJzZXRSZXBvcnRPYmoiLCJjb21wYW55TmFtZSIsIndlYnNpdGUiLCJwaG9uZSIsInNlcmlhbE5vIiwiZW50ZXJwcmlzZSIsImF1dGhvck5hbWUiLCJyZW1hcmtEYXRlIiwiRWRpdElzc3VlRGF0YSIsInJlbW92ZUZyb21Jc3N1ZUxpc3QiLCJjdXJyZW50VXNlciIsInJlcG9ydENhdGVnb3J5IiwiYWxsQWRtaW5Vc2VycyIsImlzVG9rZW5WYWxpZCIsInRva2VuVmFsaWQiLCJyZXNldFBhc3MiLCJwYXNzd29yZCIsImNfcGFzc3dvcmQiLCJzZXRQYXNzd29yZCIsImJhY2siLCJzdWJtaXRSb2xlU2V0dGluZ3MiLCJ1cGRhdGVSb2xlQmFzZWRBY2Nlc3MiLCJnb1RvRGFzaGJvYXJkIiwic2VsZWN0ZWRNYXRlcmlhbHMiLCJtZW1iZXJzMiIsImdldFN1YmNvbnRyYWN0b3JzIiwiZ2V0QWxsU3ViY29udHJhY3RvcnMiLCJhbGxTdWJjb250cmFjdG9yIiwic3ViY29udHJhY3RvcnNDb3VudCIsImFkZFN1YmNvbnRyYWN0b3JOZXh0IiwiaGFzQ2xhc3MiLCJhZGRTdWJjb250cmFjdG9yUHJldmlvdXMiLCJkZWxldGVNYXRlcmlhbCIsImRlbGV0ZVN0YWZmIiwib25DaGFuZ2UiLCJGSUxFSU1HIiwiZmlsZUV4dCIsImFsbE1hdGVyaWFscyIsImFkZE1lbWJlciIsImNyZWF0ZVN1YmNvbnRyYWN0b3IiLCJzdXBwbGllcyIsInN0YWZmIiwiY3JlYXRlTmV3U3ViY29udHJhY3RvciIsIm1hbWJlcnMyIiwiY29udHJhY3RzIiwidGltZSIsInN1YmNvbnRyYWN0b3JJZCIsImdldFN1YmNvbnRyYWN0b3JEZXRhaWwiLCJnZXRTdWJjb250cmFjdG9yQnlJZCIsInN1YmNvbnRyYWN0b3JEYXRhIiwiZ2V0U3VwcGxpZXJzIiwiYWxsU3VwcGxpZXJzIiwic3VwcGllcnNDb3VudCIsImFkZFN1cHBsaWVyTmV4dCIsImFkZFN1cHBsaWVyUHJldmlvdXMiLCJjcmVhdGVTdXBwbGllciIsImNyZWF0ZU5ld1N1cHBsaWVyIiwic3VwcGxpZXJJZCIsImdldFN1cHBsaWVyRGV0YWlsIiwiZ2V0U3VwcGxpZXJCeUlkIiwic3VwcGxpZXJEYXRhIiwic2hhcGVzVlBGYWN0b3J5IiwibGF5ZXJzVlBGYWN0b3J5IiwibW91c2Vkb3duIiwiZWxtbnQiLCJwb3MxIiwicG9zMiIsInBvczMiLCJwb3M0IiwiZHJhZ01vdXNlRG93biIsIndpbmRvdyIsIm9ubW91c2V1cCIsImNsb3NlRHJhZ0VsZW1lbnQiLCJvbm1vdXNlbW92ZSIsImVsZW1lbnREcmFnIiwib2Zmc2V0VG9wIiwib2Zmc2V0TGVmdCIsIm9ubW91c2Vkb3duIiwiZHJhZ0VsZW1lbnQiLCJjbG9zZXN0IiwibG9hZFBsYW5uZXIiLCJyb29mUGxhbiIsImxvYWRGcm9tSnNvbiIsImluaXRpYWxpemVkIiwiY29sb3JUeXBlIiwic3Ryb2tlQ29sb3IiLCJjcE9wdGlvbnMiLCJzd2F0Y2giLCJpbnB1dENsYXNzIiwiY2FzZSIsImFscGhhIiwiY3BFdmVudHMiLCJhcGkiLCJjaGFuZ2VTdHJva2VXaWR0aCIsImlubmVySGVpZ2h0IiwiaW5uZXJXaWR0aCIsInBvaW50ZXJQb3NpdGlvbiIsImdldFBvaW50ZXJQb3NpdGlvbiIsImN1cnJlbnREcmF3U3RhdGUiLCJwcm9jZXNzU3RvcmUiLCJ0cmFuc2Zvcm1lclN0b3JlIiwic2hvd1BhbmVsIiwiem9vbUxldmVsIiwiY2FsaWJyYXRpb24iLCJsb2FkZWRQcm9jZXNzZXMiLCJjb3VudERhdGEiLCJjYWxpYnJhdGlvbkRhdGEiLCJmb3JtYXRDYWxpYnJhdGlvbiIsImltYWdlT2JqIiwiY3Jvc3NPcmlnaW4iLCJpbWFnZUNvbnRhaW5lciIsImltYWdlUHJvcHMiLCJpbWFnZUhlaWdodCIsImFzcGVjdFJhdGlvIiwiaW1hZ2VXaWR0aCIsImJnSW1hZ2UiLCJzaGFkb3dPZmZzZXRYIiwic2hhZG93T2Zmc2V0WSIsInNoYWRvd09wYWNpdHkiLCJtb3ZlVG9Cb3R0b20iLCJ3aW5kb3dFdmVudCIsImhpc3RvcnlQb3MiLCIkY3VycmVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiY3RybEtleSIsIm9sZFNjYWxlIiwibW91c2VQb2ludFRvIiwibmV3U2NhbGUiLCJkZWx0YVkiLCJuZXdQb3MiLCJ0YWdOYW1lIiwiem9vbUJ1dHRvbiIsImNlbnRlclkiLCJjZW50ZXJYIiwiem9vbVNsaWRlciIsInBlcmNlbnRhZ2UiLCJyZXNldFpvb20iLCJiYXNlTGF5ZXJFdmVudCIsInJlY3RhbmdsZUV2ZW50V3JhcHBlciIsInNoYXBlT2JqZWN0Iiwic2hhcGVUeXBlIiwicmVjdGFuZ2xlRXZlbnQiLCJjdXJyZW50UHJvY2VzcyIsIm1vdmVUb1RvcCIsIm9wZW5JbmZvV2lkZ2V0IiwiZWxsaXBzZUV2ZW50V3JhcHBlciIsImVsbGlwc2VFdmVudCIsInBvbHlnb25FdmVudFdyYXBwZXIiLCJwb2x5Z29uRXZlbnQiLCJmcmVlSGFuZEV2ZW50V3JhcHBlciIsImZyZWVIYW5kRXZlbnQiLCJsaW5lRXZlbnRXcmFwcGVyIiwibGluZUV2ZW50IiwiZnJlZUhhbmRNYXJrZXJXcmFwcGVyIiwidGV4dEV2ZW50V3JhcHBlciIsInRleHRFdmVudCIsIndyYXBwZXIiLCJ1cGRhdGVkUG9pbnRzIiwib3BlblRleHRJbmZvV2lkZ2V0IiwiY2xvc2VJbmZvV2lkZ2V0IiwiY2xvc2VUZXh0SW5mb1dpZGdldCIsInNpbXBsZUxpbmUiLCJiZXppZXJMaW5lIiwiYmV6aWVyRXZlbnQiLCJiZXppZXJFdmVudFdyYXBwZXIiLCJmcmVlaGFuZE1hcmtlciIsInRleHRXaWRnZXQiLCJ0ZXh0UHJvcHMiLCJ0ZXh0T2JqIiwibWFudWFsU2VsZWN0aW9uIiwic2hhcGVPYmoiLCJkcmFnU2VsZWN0aW9uIiwic2VsZWN0QWxsU2hhcGVzIiwic2VsZWN0ZWRTaGFwZU5hbWVzIiwidG9nZ2xlVmFsdWUiLCJ0b2dnbGVTaGFwZVZpc2liaWxpdHkiLCJ2aXNpYmxlIiwiY2FsaWJyYXRlZExpbmUiLCJkaXN0YW5jZSIsInNxcnQiLCJwb3ciLCJjYWxpYnJhdGlvbkRpc3RhbmNlIiwic2F2ZUNhbGlicmF0aW9uIiwiY2FsaWJyYXRpb25TY2FsZSIsInBhcnNlSW50IiwiZGVsZXRlU2hhcGUiLCJnZXRQYXJlbnQiLCJpbmZvV2lkZ2V0UHJvcHMiLCJzaGFwZUluZm9XaWRnZXQiLCJjb2xvclR5cGVzIiwidGV4dENvbG9yVHlwZXMiLCJmb250U3R5bGVzIiwid2ViU2FmZUZvbnRzIiwidGV4dEluZm9XaWRnZXRQcm9wcyIsImZvbnRTdHlsZSIsInRleHRJbmZvV2lkZ2V0IiwiY2hhbmdlVGV4dEluZm8iLCJpbmZvV2lkZ2V0U3Ryb2tlIiwic2hhcGVQcm9wSGlzdG9yeSIsImluZm9XaWRnZXRFdmVudHMiLCJvbk9wZW4iLCJvbkNsb3NlIiwidGV4dEluZm9XaWRnZXRFdmVudHMiLCJjdXJyZW50UGFuU3RhdGUiLCJwYW5JbWFnZSIsInVuZG9PclJlZG8iLCJkb3dubG9hZEltYWdlIiwianNvbiIsInRvSlNPTiIsImFkZFByb2Nlc3MiLCJzZWxlY3RMYXllciIsInNlbGVjdGVkSW5kZXgiLCJzZWxlY3RPclVuc2VsZWN0IiwibGF5ZXJJY29uTmFtZSIsImhpZGVTZWxlY3Rpb24iLCJkZWxldGVTZWxlY3Rpb24iLCJsb2FkTWF0ZXJpYWwiLCJzaGFwZVByb3AiLCJoaWRlSW5pdE1vZGFsIiwic2VsZWN0UGxhbiIsInNlbGVjdGVkUGxhbiIsImNsb3NlVmlzdWFsUGxhbm5lciIsImRpcmVjdGl2ZSIsInJlc3RyaWN0Iiwic2NvcGUiLCJjdXJyZW50IiwiZWxlbSIsImF0dHJzIiwib3B0aW9ucyIsInNvdXJjZWZpbGUiLCJzb3VyY2VkaXIiLCJmb2xkZXJQYXRocyIsImN1cnJlbnRGb2xkZXIiLCJzZWxlY3RlZEZvbGRlciIsInZpZXdGb2xkZXIiLCJzZWxlY3RGaWxlIiwicHJldmlvdXMiLCJwYXJhbSIsImlFbGVtZW50IiwiaUF0dHJzIiwiYXV0b2NvbXBsZXRlIiwidWlJdGVtcyIsInNlbGVjdCIsInRyaWdnZXIiLCJlcnJTcmMiLCIkc2V0IiwibWF0ZXJpYWxUeXBlIiwic2VsZWN0ZWRNYXRlcmlhbCIsImN1cnJlbnRTaGFwZSIsImVudGl0eVR5cGUiLCJkY3BMaXN0IiwiZXF1aXBtZW50TGlzdCIsInNlbGVjdGVkTWF0ZXJpYWxJbmZvIiwibWF0ZXJpYWxJbWFnZXMiLCJtYXRlcmlhbFNlbGVjdGlvbiIsInJlc2V0U2VsZWN0ZWRNYXRlcmlhbCIsImFzc2lnbk1hdGVyaWFsIiwiaW5wdXQiLCJwbGFjZSJdLCJtYXBwaW5ncyI6IitVQUFBLElBQUFBLElBQUFDLFFBQUFDLE9BQUEsTUFBQSxDQUNBLFlBQ0EsZUFDQSxxQkFDQSxvQkFDQSxhQUNBLGtCQUNBLFFBQ0EsWUFDQSxhQUNBLGFBQ0EsZUFDQSxlQUNBLGFBQ0EsY0FDQSxlQUNBLGtCQUNBLFVBQ0EsZ0JBQ0EscUJBQ0EsZ0JBQ0EsV0FDQSxnQkFDQSwyQkFDQSxhQUNBLGNBSUEsU0FBQUMsT0FDQUMscUJBQ0FDLDJCQUNBQyxXQUNBQyxvQkFJQUYsMkJBQUFHLFVBQUEsQ0FDQUMsSUFBQSwwQ0FDQUMsRUFBQSxRQUNBQyxVQUFBLDBDQUtBUCxxQkFBQVEsV0FBQSxDQUNBQyxNQUFBLElBQ0FDLFNBQUEsR0FDQUMsV0FBQSxHQUNBQyxnQkFBQSxHQUNBQyxrQkFBQSxHQUNBQyxVQUFBLFFBQ0FDLFVBQUEsUUFJQWIsV0FBQWMsa0JBQUEsRUFHQWIsbUJBQ0FjLElBQUEsYUFBQSxhQUNBQSxJQUFBLGdCQUFBLG9CQzNEQSxTQUFBQyxZQUFBQyxlQUFBQyxvQkFDQUEsbUJBQUFDLFVBQUEsS0FFQUYsZUFBQUcsTUFBQSxXQUFBLENBQ0FDLElBQUEsSUFDQUMsWUFBQSwwQkFDQUMsV0FBQSx1QkFHQU4sZUFBQUcsTUFBQSxZQUFBLENBQ0FDLElBQUEsYUFDQUMsWUFBQSwyQkFDQUMsV0FBQSx3QkFTQU4sZUFBQUcsTUFBQSxnQkFBQSxDQUNBQyxJQUFBLGtCQUNBQyxZQUFBLCtCQUNBQyxXQUFBLDRCQUdBTixlQUFBRyxNQUFBLGdCQUFBLENBQ0FDLElBQUEsa0JBQ0FDLFlBQUEsK0JBQ0FDLFdBQUEsNEJBR0FOLGVBQUFHLE1BQUEsV0FBQSxDQUNBQyxJQUFBLFlBQ0FDLFlBQUEsMEJBQ0FDLFdBQUEsc0JBR0FOLGVBQUFHLE1BQUEsWUFBQSxDQUNBQyxJQUFBLGFBQ0FDLFlBQUEsMkJBQ0FDLFdBQUEsdUJBR0FOLGVBQUFHLE1BQUEsZUFBQSxDQUNBQyxJQUFBLGdCQUNBQyxZQUFBLDhCQUNBQyxXQUFBLDJCQUdBTixlQUFBRyxNQUFBLG9CQUFBLENBQ0FDLElBQUEsc0JBQ0FDLFlBQUEsbUNBQ0FDLFdBQUEsZ0NBR0FOLGVBQUFHLE1BQUEsYUFBQSxDQUNBQyxJQUFBLGNBQ0FDLFlBQUEsNEJBQ0FDLFdBQUEsd0JBR0FOLGVBQUFHLE1BQUEsZ0JBQUEsQ0FDQUMsSUFBQSxxQkFDQUMsWUFBQSwrQkFDQUMsV0FBQSw0QkFHQU4sZUFBQUcsTUFBQSxjQUFBLENBQ0FDLElBQUEsZ0JBQ0FDLFlBQUEsNkJBQ0FDLFdBQUEsMEJBR0FOLGVBQUFHLE1BQUEsVUFBQSxDQUNBQyxJQUFBLFdBQ0FDLFlBQUEseUJBQ0FDLFdBQUEsc0JBR0FOLGVBQUFHLE1BQUEsY0FBQSxDQUNBQyxJQUFBLGVBQ0FDLFlBQUEsNkJBQ0FDLFdBQUEsMEJBR0FOLGVBQUFHLE1BQUEsU0FBQSxDQUNBQyxJQUFBLFVBQ0FDLFlBQUEseUJBQ0FDLFdBQUEsc0JBR0FOLGVBQUFHLE1BQUEsU0FBQSxDQUNBQyxJQUFBLFVBQ0FDLFlBQUEsd0JBQ0FDLFdBQUEscUJBRUFOLGVBQUFHLE1BQUEsZUFBQSxDQUNBQyxJQUFBLHNCQUNBQyxZQUFBLGdDQUNBQyxXQUFBLDBCQUdBTixlQUFBRyxNQUFBLGdCQUFBLENBQ0FDLElBQUEsdUJBQ0FDLFlBQUEsZ0NBQ0FDLFdBQUEsMkJBR0FOLGVBQUFHLE1BQUEsaUJBQUEsQ0FDQUMsSUFBQSxtQkFDQUMsWUFBQSxnQ0FDQUMsV0FBQSw2QkFHQU4sZUFBQUcsTUFBQSxpQkFBQSxDQUNBQyxJQUFBLG1CQUNBQyxZQUFBLGdDQUNBQyxXQUFBLDZCQUdBTixlQUFBRyxNQUFBLGNBQUEsQ0FDQUMsSUFBQSxnQkFDQUMsWUFBQSw4QkFDQUMsV0FBQSwyQkFHQU4sZUFBQUcsTUFBQSxjQUFBLENBQ0FDLElBQUEsZ0JBQ0FDLFlBQUEsOEJBQ0FDLFdBQUEsMEJBRUFOLGVBQUFHLE1BQUEsVUFBQSxDQUNBQyxJQUFBLFdBQ0FDLFlBQUEseUJBQ0FDLFdBQUEsc0JBR0FOLGVBQUFHLE1BQUEsWUFBQSxDQUNBQyxJQUFBLGFBQ0FDLFlBQUEsMEJBQ0FDLFdBQUEsd0JBR0FOLGVBQUFHLE1BQUEsV0FBQSxDQUNBQyxJQUFBLFlBQ0FDLFlBQUEsMkJBQ0FDLFdBQUEsd0JBR0FOLGVBQUFHLE1BQUEsVUFBQSxDQUNBQyxJQUFBLFdBQ0FDLFlBQUEseUJBQ0FDLFdBQUEsc0JBR0FOLGVBQUFHLE1BQUEsV0FBQSxDQUNBQyxJQUFBLFlBQ0FDLFlBQUEsMEJBQ0FDLFdBQUEsdUJBRUFOLGVBQUFHLE1BQUEsaUJBQUEsQ0FDQUMsSUFBQSx3QkFDQUMsWUFBQSxpQ0FDQUMsV0FBQSw2QkFHQU4sZUFBQUcsTUFBQSxnQkFBQSxDQUNBQyxJQUFBLGlCQUNBQyxZQUFBLCtCQUNBQyxXQUFBLDRCQUdBTixlQUFBRyxNQUFBLHNCQUFBLENBQ0FDLElBQUEsNkJBQ0FDLFlBQUEsc0NBQ0FDLFdBQUEsa0NBR0FOLGVBQUFHLE1BQUEsY0FBQSxDQUNBQyxJQUFBLGVBQ0FDLFlBQUEsNkJBQ0FDLFdBQUEsMEJBR0FOLGVBQUFHLE1BQUEsV0FBQSxDQUNBQyxJQUFBLFlBQ0FDLFlBQUEsMEJBQ0FDLFdBQUEsdUJBR0FOLGVBQUFHLE1BQUEsT0FBQSxDQUNBQyxJQUFBLFFBQ0FDLFlBQUEsc0JBQ0FDLFdBQUEsbUJBR0FOLGVBQUFHLE1BQUEsV0FBQSxDQUNBQyxJQUFBLGdCQUNBQyxZQUFBLDBCQUNBQyxXQUFBLHVCRGhMQTdCLElBQUFHLE9BQUFBLFFDM0JBRixRQUFBQyxPQUFBLGVBQUEsSUFBQUMsT0FBQW1CLGFDQUEsV0FDQXJCLFFBQUFDLE9BQUEsT0FBQTRCLFFBQUEsYUFFQSxTQUNBQyxNQUNBQyxPQUNBQyxVQUNBQyxvQkFDQUMsUUFDQUMsT0FDQUMsYUFDQUMsSUFDQSxJQUFBQyxLQUVBWixJQUFBLGlDQUdBYSxRQUFBLFNBQUFDLE9BQUFDLE9BQ0EsTUFBQSxDQUNBQyxlQUFBLFFBQUFGLFlBQUFHLEVBQUEsbUJBQ0FDLGlCQUFBSCxNQUNBUixvQkFBQVksSUFBQSxxQkFDQUYsRUFDQUcsU0FBQUMsS0FBQUMsVUFBQSxDQUNBQyxPQUFBLFVBYUFDLFNBQUFoQixRQUFBZ0IsU0FBQUMsUUFBQWpCLFFBQUFrQixVQUFBbEIsUUFBQWlCLFFBRUEsT0FBQUUsZ0JBQUFmLEtBQUEsQ0FDQWdCLE1BQUEsU0FBQUMsU0FDQSxJQUFBQyxRQUFBQyxLQUFBQyxZQUNBNUIsTUFBQSxDQUNBSixJQUFBQSxJQUFBLGdCQUNBYyxPQUFBLE9BQ0FELFFBQUFBLFFBQUEsUUFDQW9CLEtBQUFKLFdBR0EsT0FBQUMsU0FFQUksZUFBQSxTQUFBTCxTQUNBLElBQUFDLFFBQUFDLEtBQUFDLFlBQ0E1QixNQUFBLENBQ0FKLElBQUFBLElBQUEsa0JBQ0FjLE9BQUEsT0FDQUQsUUFBQUEsUUFBQSxRQUNBb0IsS0FBQUosV0FHQSxPQUFBQyxTQUdBSyxhQUFBLFNBQUFOLFNBQ0EsSUFBQUMsUUFBQUMsS0FBQUMsWUFDQTVCLE1BQUEsQ0FDQUosSUFBQUEsSUFBQSx5QkFDQWMsT0FBQSxPQUNBRCxRQUFBQSxRQUFBLFFBQ0FvQixLQUFBSixXQUdBLE9BQUFDLFNBR0FNLFVBQUEsU0FBQVAsU0FDQSxJQUFBQyxRQUFBQyxLQUFBQyxZQUNBNUIsTUFBQSxDQUNBSixJQUFBQSxJQUFBLGFBQ0FjLE9BQUEsT0FDQUQsUUFBQUEsUUFBQSxRQUNBb0IsS0FBQUosV0FHQSxPQUFBQyxTQUdBTyxlQUFBLFNBQUFDLFdBQ0EsSUFBQVIsUUFBQUMsS0FBQUMsWUFDQTVCLE1BQUEsQ0FDQUosSUFBQUEsSUFBQSx1QkFBQXNDLFVBQ0F4QixPQUFBLE1BQ0FELFFBQUFBLFFBQUEsT0FBQSxNQUdBLE9BQUFpQixTQUdBUyxhQUFBLFdBQ0EsSUFBQVQsUUFBQUMsS0FBQUMsWUFDQTVCLE1BQUEsQ0FDQUosSUFBQUEsSUFBQSxxQkFDQWMsT0FBQSxNQUNBRCxRQUFBQSxRQUFBLE9BQUEsTUFHQSxPQUFBaUIsU0FxQkFVLGdCQUFBLFNBQUFDLFVBQ0EsSUFBQUMsTUFBQUQsU0FFQUUsT0FBQUMsS0FBQUgsVUFBQUksT0FBQSxTQUFBQyxJQUFBL0QsR0FDQSxJQUFBZ0UsSUFBQWhFLEVBQUEsSUFBQTBELFNBQUExRCxHQUFBLElBRUEsT0FEQStELEtBQUFDLEtBRUEsS0FMQSxHQU1BTCxNQUFBQSxNQUFBTSxNQUFBLEdBQUEsR0FDQSxJQUFBbEIsUUFBQUMsS0FBQUMsWUFDQTVCLE1BQUEsQ0FDQUosSUFBQUEsSUFBQSx1QkFBQTBDLE1BQ0E1QixPQUFBLE1BQ0FELFFBQUFBLFFBQUEsT0FBQSxNQUdBLE9BQUFpQixTQUdBbUIsZUFBQSxTQUFBUixVQVNBLElBQUFDLE1BQUFELFNBRUFFLE9BQUFDLEtBQUFILFVBQUFJLE9BQUEsU0FBQUMsSUFBQS9ELEdBQ0EsSUFBQWdFLElBQUFoRSxFQUFBLElBQUEwRCxTQUFBMUQsR0FBQSxJQUVBLE9BREErRCxLQUFBQyxLQUVBLEtBTEEsR0FNQUwsTUFBQUEsTUFBQU0sTUFBQSxHQUFBLEdBQ0EsSUFBQWxCLFFBQUFDLEtBQUFDLFlBQ0E1QixNQUFBLENBQ0FKLElBQUFBLElBQUEsc0JBQUEwQyxNQUNBNUIsT0FBQSxNQUNBRCxRQUFBQSxRQUFBLE9BQUEsTUFHQSxPQUFBaUIsU0FHQW9CLGVBQUEsV0FDQSxJQUFBcEIsUUFBQUMsS0FBQUMsWUFDQTVCLE1BQUEsQ0FDQUosSUFBQUEsSUFBQSxzQkFDQWMsT0FBQSxNQUNBRCxRQUFBQSxRQUFBLE9BQUEsTUFHQSxPQUFBaUIsU0FHQXFCLGNBQUEsU0FBQXRCLFNBQ0EsSUFBQUMsUUFBQUMsS0FBQUMsWUFDQTVCLE1BQUEsQ0FDQUosSUFBQUEsSUFBQSxxQkFDQWMsT0FBQSxPQUNBRCxRQUFBQSxRQUFBLFFBQUEsR0FDQW9CLEtBQUFKLFdBR0EsT0FBQUMsU0FHQXNCLFlBQUEsU0FBQUMsVUFDQUMsUUFBQUMsSUFBQSxzQkFBQUYsVUFDQSxJQUFBdkIsUUFBQUMsS0FBQUMsWUFDQXZCLE9BQUErQyxPQUFBLENBQ0F4RCxJQUFBQSxJQUFBLG1CQUNBYyxPQUFBLE9BQ0FtQixLQUFBb0IsU0FDQXhDLFFBQUFBLFFBQUEsUUFBQSxNQUdBLE9BQUFpQixTQUVBMkIsb0JBQUEsU0FBQUosVUFDQSxJQUFBdkIsUUFBQUMsS0FBQUMsWUFDQXZCLE9BQUErQyxPQUFBLENBQ0F4RCxJQUFBQSxJQUFBLHdCQUNBYyxPQUFBLE9BQ0FtQixLQUFBb0IsU0FDQXhDLFFBQUFBLFFBQUEsUUFBQSxNQUdBLE9BQUFpQixTQUdBNEIsYUFBQSxTQUFBQyxTQUNBLElBQUE3QixRQUFBQyxLQUFBQyxZQUNBNUIsTUFBQSxDQUNBSixJQUFBQSxJQUFBLHFCQUFBMkQsUUFDQTdDLE9BQUEsTUFDQUQsUUFBQUEsUUFBQSxPQUFBLE1BR0EsT0FBQWlCLFNBR0E4QixZQUFBLFNBQUFQLFNBQUFRLElBQ0EsSUFBQS9CLFFBQUFDLEtBQUFDLFlBQ0F2QixPQUFBK0MsT0FBQSxDQUNBeEQsSUFBQUEsSUFBQSxvQkFBQTZELEdBQ0EvQyxPQUFBLE1BQ0FtQixLQUFBb0IsU0FDQXhDLFFBQUFBLFFBQUEsT0FBQSxNQUdBLE9BQUFpQixTQUdBZ0Msb0JBQUEsU0FBQUMsV0FDQSxJQUFBakMsUUFBQUMsS0FBQUMsWUFDQTVCLE1BQUEsQ0FDQUosSUFBQUEsSUFBQSw0QkFBQStELFVBQ0FqRCxPQUFBLE1BQ0FELFFBQUFBLFFBQUEsT0FBQSxNQUdBLE9BQUFpQixTQUdBa0MsYUFBQSxTQUFBQyxXQUFBcEMsU0FDQSxJQUFBQyxRQUFBQyxLQUFBQyxZQUNBNUIsTUFBQSxDQUNBSixJQUFBQSxJQUFBLHFCQUFBaUUsV0FDQW5ELE9BQUEsTUFDQUQsUUFBQUEsUUFBQSxPQUFBLEdBQ0FvQixLQUFBSixXQUdBLE9BQUFDLFNBR0FvQyxnQkFBQSxTQUFBckMsU0FDQSxJQUFBQyxRQUFBQyxLQUFBQyxZQUNBdkIsT0FBQStDLE9BQUEsQ0FDQXhELElBQUFBLElBQUEsc0JBQ0FpQyxLQUFBSixRQUNBaEIsUUFBQUEsUUFBQSxRQUFBLE1BR0EsT0FBQWlCLFNBR0FxQyxnQkFBQSxTQUFBdEMsU0FDQSxJQUFBQyxRQUFBQyxLQUFBQyxZQUNBdkIsT0FBQStDLE9BQUEsQ0FDQXhELElBQUFBLElBQUEsdUJBQ0FpQyxLQUFBSixRQUNBaEIsUUFBQUEsUUFBQSxRQUFBLE1BR0EsT0FBQWlCLFNBR0FzQyxpQkFBQSxTQUFBM0IsVUFDQSxJQUFBQyxNQUFBRCxTQUVBRSxPQUFBQyxLQUFBSCxVQUFBSSxPQUFBLFNBQUFDLElBQUEvRCxHQUNBLElBQUFnRSxJQUFBaEUsRUFBQSxJQUFBMEQsU0FBQTFELEdBQUEsSUFFQSxPQURBK0QsS0FBQUMsS0FFQSxLQUxBLEdBTUFMLE1BQUFBLE1BQUFNLE1BQUEsR0FBQSxHQUNBLElBQUFsQixRQUFBQyxLQUFBQyxZQUNBNUIsTUFBQSxDQUNBSixJQUFBQSxJQUFBLHdCQUFBMEMsTUFDQTVCLE9BQUEsTUFDQUQsUUFBQUEsUUFBQSxPQUFBLE1BR0EsT0FBQWlCLFNBR0F1QyxzQkFBQSxTQUFBNUIsVUFDQSxJQUFBQyxNQUFBRCxTQUVBRSxPQUFBQyxLQUFBSCxVQUFBSSxPQUFBLFNBQUFDLElBQUEvRCxHQUNBLElBQUFnRSxJQUFBaEUsRUFBQSxJQUFBMEQsU0FBQTFELEdBQUEsSUFFQSxPQURBK0QsS0FBQUMsS0FFQSxLQUxBLEdBTUFMLE1BQUFBLE1BQUFNLE1BQUEsR0FBQSxHQUNBLElBQUFsQixRQUFBQyxLQUFBQyxZQUNBNUIsTUFBQSxDQUNBSixJQUFBQSxJQUFBLDBCQUFBMEMsTUFDQTVCLE9BQUEsTUFDQUQsUUFBQUEsUUFBQSxPQUFBLE1BR0EsT0FBQWlCLFNBR0F3QyxrQkFBQSxTQUFBN0IsVUFDQSxJQUFBQyxNQUFBRCxTQUVBRSxPQUFBQyxLQUFBSCxVQUFBSSxPQUFBLFNBQUFDLElBQUEvRCxHQUNBLElBQUFnRSxJQUFBaEUsRUFBQSxJQUFBMEQsU0FBQTFELEdBQUEsSUFFQSxPQURBK0QsS0FBQUMsS0FFQSxLQUxBLEdBTUFMLE1BQUFBLE1BQUFNLE1BQUEsR0FBQSxHQUNBLElBQUFsQixRQUFBQyxLQUFBQyxZQUNBNUIsTUFBQSxDQUNBSixJQUFBQSxJQUFBLHlCQUFBMEMsTUFDQTVCLE9BQUEsTUFDQUQsUUFBQUEsUUFBQSxPQUFBLE1BR0EsT0FBQWlCLFNBR0F5QyxtQkFBQSxTQUFBVixHQUFBaEMsU0FDQSxJQUFBQyxRQUFBQyxLQUFBQyxZQUNBdkIsT0FBQStDLE9BQUEsQ0FDQXhELElBQUFBLElBQUEsMkJBQUE2RCxHQUNBL0MsT0FBQSxNQUNBRCxRQUFBQSxRQUFBLE9BQUEsR0FDQW9CLEtBQUFKLFdBR0EsT0FBQUMsU0FHQTBDLGdCQUFBLFNBQUFDLFlBQ0EsSUFBQTNDLFFBQUFDLEtBQUFDLFlBQ0E1QixNQUFBLENBQ0FKLElBQUFBLElBQUEsd0JBQUF5RSxXQUNBM0QsT0FBQSxNQUNBRCxRQUFBQSxRQUFBLE9BQUEsTUFHQSxPQUFBaUIsU0FHQTRDLHFCQUFBLFNBQUFDLFNBQ0EsSUFBQTdDLFFBQUFDLEtBQUFDLFlBQ0E1QixNQUFBLENBQ0FKLElBQUFBLElBQUEsNkJBQUEyRSxRQUNBN0QsT0FBQSxNQUNBRCxRQUFBQSxRQUFBLE9BQUEsTUFHQSxPQUFBaUIsU0FHQThDLGlCQUFBLFNBQUFmLElBQ0EsSUFBQS9CLFFBQUFDLEtBQUFDLFlBQ0E1QixNQUFBLENBQ0FKLElBQUFBLElBQUEseUJBQUE2RCxHQUNBL0MsT0FBQSxNQUNBRCxRQUFBQSxRQUFBLE9BQUEsTUFHQSxPQUFBaUIsU0FFQStDLG9CQUFBLFNBQUFoRCxTQUNBLElBQUFDLFFBQUFDLEtBQUFDLFlBQ0F2QixPQUFBK0MsT0FBQSxDQUNBeEQsSUFBQUEsSUFBQSwyQkFDQWMsT0FBQSxPQUNBRCxRQUFBQSxRQUFBLFFBQUEsR0FDQW9CLEtBQUFKLFdBR0EsT0FBQUMsU0FFQWdELHdCQUFBLFNBQUFqQixHQUFBaEMsU0FDQSxJQUFBQyxRQUFBQyxLQUFBQyxZQUNBNUIsTUFBQSxDQUNBSixJQUFBQSxJQUFBLGdDQUFBNkQsR0FDQS9DLE9BQUEsTUFDQUQsUUFBQUEsUUFBQSxRQUFBLEdBQ0FvQixLQUFBSixXQUdBLE9BQUFDLFNBR0FpRCxvQkFBQSxTQUFBbEIsR0FBQWhDLFNBQ0EsSUFBQUMsUUFBQUMsS0FBQUMsWUFDQXZCLE9BQUErQyxPQUFBLENBQ0F4RCxJQUFBQSxJQUFBLDRCQUFBNkQsR0FDQS9DLE9BQUEsTUFDQUQsUUFBQUEsUUFBQSxRQUFBLEdBQ0FvQixLQUFBSixXQUdBLE9BQUFDLFNBRUFrRCxtQkFBQSxTQUFBbkQsU0FDQSxJQUFBQyxRQUFBQyxLQUFBQyxZQUNBNUIsTUFBQSxDQUNBSixJQUFBQSxJQUFBLDBCQUNBYyxPQUFBLE9BQ0FELFFBQUFBLFFBQUEsUUFBQSxHQUNBb0IsS0FBQUosV0FHQSxPQUFBQyxVQXpZQSxrQkF5WkEsU0FBQStCLElBQ0EsSUFBQS9CLFFBQUFDLEtBQUFDLFlBQ0E1QixNQUFBLENBQ0FKLElBQUFBLElBQUEsd0JBQUE2RCxHQUNBL0MsT0FBQSxNQUNBRCxRQUFBQSxRQUFBLE9BQUEsTUFHQSxPQUFBaUIsVUFqYUFILGdCQUFBZixLQUFBLGNBb2FBLFNBQUFrQixTQUNBLE9BQUEsSUFBQW1ELFFBQUEsU0FBQUMsUUFBQUMsUUFDQTNELFNBQUE0RCxRQUNBdEQsUUFDQXVELEtBQUEsU0FBQUMsTUFDQTlELFNBQUErRCxXQUNBTCxRQUFBSSxRQUVBRSxNQUFBLFNBQUFDLEtBQ0FqRSxTQUFBK0QsV0FDQSxNQUFBRSxJQUFBQyxRQUNBakUsU0FFQTBELE9BQUFNLFdBamJBOUQsZ0JBQUFmLEtBQUEsZ0JBc2JBLFNBQUE2QixVQUNBLElBQUFDLE1BQUFELFNBRUFFLE9BQUFDLEtBQUFILFVBQUFJLE9BQUEsU0FBQUMsSUFBQS9ELEdBQ0EsSUFBQWdFLElBQUFoRSxFQUFBLElBQUEwRCxTQUFBMUQsR0FBQSxJQUVBLE9BREErRCxLQUFBQyxLQUVBLEtBTEEsR0FNQUwsTUFBQUEsTUFBQU0sTUFBQSxHQUFBLEdBQ0EsSUFBQWxCLFFBQUFDLEtBQUFDLFlBQ0E1QixNQUFBLENBQ0FKLElBQUFBLElBQUEscUJBQUEwQyxNQUNBNUIsT0FBQSxNQUNBRCxRQUFBQSxRQUFBLE9BQUEsTUFHQSxPQUFBaUIsVUF0Y0FILGdCQUFBZixLQUFBLGdCQXljQSxXQUNBLElBQUFrQixRQUFBQyxLQUFBQyxZQUNBNUIsTUFBQSxDQUNBSixJQUFBQSxJQUFBLGlCQUNBYyxPQUFBLE1BQ0FELFFBQUFBLFFBQUEsT0FBQSxNQUdBLE9BQUFpQixVQWpkQUgsZ0JBQUFmLEtBQUEsZUFtZEEsU0FBQWlCLFNBQ0EsSUFBQUMsUUFBQUMsS0FBQUMsWUFDQTVCLE1BQUEsQ0FDQUosSUFBQUEsSUFBQSxnQkFDQWMsT0FBQSxPQUNBRCxRQUFBQSxRQUFBLFFBQUEsR0FDQW9CLEtBQUFKLFdBR0EsT0FBQUMsVUE1ZEFILGdCQUFBZixLQUFBLGNBK2RBLFNBQUFpQixTQUNBLElBQUFDLFFBQUFDLEtBQUFDLFlBQ0E1QixNQUFBLENBQ0FKLElBQUFBLElBQUEsc0JBQ0FjLE9BQUEsTUFDQUQsUUFBQUEsUUFBQSxPQUFBLEdBQ0FvQixLQUFBSixXQUdBLE9BQUFDLFVBeGVBSCxnQkFBQWYsS0FBQSx3QkEyZUEsU0FBQWlCLFNBQ0EsSUFBQUMsUUFBQUMsS0FBQUMsWUFDQTVCLE1BQUEsQ0FDQUosSUFBQUEsSUFBQSw2QkFDQWMsT0FBQSxNQUNBRCxRQUFBQSxRQUFBLE9BQUEsR0FDQW9CLEtBQUFKLFdBR0EsT0FBQUMsVUFwZkFILGdCQUFBZixLQUFBLGVBd2ZBLFNBQUFpQixTQUNBLElBQUFDLFFBQUFDLEtBQUFDLFlBQ0E1QixNQUFBLENBQ0FKLElBQUFBLElBQUEsb0JBQ0FjLE9BQUEsT0FDQUQsUUFBQUEsUUFBQSxRQUFBLEdBQ0FvQixLQUFBSixXQUdBLE9BQUFDLFVBamdCQUgsZ0JBQUFmLEtBQUEsdUJBbWdCQSxTQUFBK0UsYUFDQSxJQUFBN0QsUUFBQUMsS0FBQUMsWUFDQTVCLE1BQUEsQ0FDQUosSUFBQUEsSUFBQSw2QkFBQTJGLFlBQ0E3RSxPQUFBLE1BQ0FELFFBQUFBLFFBQUEsT0FBQSxNQUdBLE9BQUFpQixVQTNnQkFILGdCQUFBZixLQUFBLGVBNmdCQSxTQUFBbUQsV0FDQSxJQUFBakMsUUFBQUMsS0FBQUMsWUFDQTVCLE1BQUEsQ0FDQUosSUFBQUEsSUFBQSxxQkFBQStELFVBQUEsV0FDQWpELE9BQUEsTUFDQUQsUUFBQUEsUUFBQSxPQUFBLE1BR0EsT0FBQWlCLFVBcmhCQUgsZ0JBQUFmLEtBQUEsb0JBdWhCQSxTQUFBbUQsV0FDQSxJQUFBakMsUUFBQUMsS0FBQUMsWUFDQTVCLE1BQUEsQ0FDQUosSUFBQUEsSUFBQSwwQkFBQStELFVBQ0FqRCxPQUFBLE1BQ0FELFFBQUFBLFFBQUEsT0FBQSxNQUdBLE9BQUFpQixVQS9oQkFILGdCQUFBZixLQUFBLHFCQWtpQkEsU0FBQWlCLFNBQ0EsSUFBQUMsUUFBQUMsS0FBQUMsWUFDQTVCLE1BQUEsQ0FDQUosSUFBQUEsSUFBQSwwQkFDQWMsT0FBQSxNQUNBRCxRQUFBQSxRQUFBLE9BQUEsR0FDQW9CLEtBQUFKLFdBR0EsT0FBQUMsVUEzaUJBSCxnQkFBQWYsS0FBQSxnQkE4aUJBLFNBQUErRSxhQUNBLElBQUE3RCxRQUFBQyxLQUFBQyxZQUNBNUIsTUFBQSxDQUNBSixJQUFBQSxJQUFBLHNCQUFBMkYsWUFDQTdFLE9BQUEsTUFDQUQsUUFBQUEsUUFBQSxPQUFBLE1BR0EsT0FBQWlCLFVBdGpCQUgsZ0JBQUFmLEtBQUEsY0F5akJBLFNBQUFpQixTQUNBLElBQUFDLFFBQUFDLEtBQUFDLFlBQ0E1QixNQUFBLENBQ0FKLElBQUFBLElBQUEsbUJBQ0FjLE9BQUEsTUFDQUQsUUFBQUEsUUFBQSxPQUFBLEdBQ0FvQixLQUFBSixXQUdBLE9BQUFDLFVBbGtCQUgsZ0JBQUFmLEtBQUEsMEJBb2tCQSxTQUFBaUIsU0FDQSxJQUFBQyxRQUFBQyxLQUFBQyxZQUNBdkIsT0FBQStDLE9BQUEsQ0FDQXhELElBQUFBLElBQUEsK0JBQ0FjLE9BQUEsT0FDQW1CLEtBQUFKLFFBQ0FoQixRQUFBQSxRQUFBLFFBQUEsTUFHQSxPQUFBaUIsVUE3a0JBSCxnQkFBQWYsS0FBQSxnQkFnbEJBLFNBQUFpQixTQUNBLElBQUFDLFFBQUFDLEtBQUFDLFlBQ0E1QixNQUFBLENBQ0FKLElBQUFBLElBQUEscUJBQ0FjLE9BQUEsTUFDQW1CLEtBQUFKLFFBQ0FoQixRQUFBQSxRQUFBLFFBQUEsTUFHQSxPQUFBaUIsVUF6bEJBSCxnQkFBQWYsS0FBQSxhQTRsQkEsU0FBQWlCLFNBQ0EsSUFBQUMsUUFBQUMsS0FBQUMsWUFDQTVCLE1BQUEsQ0FDQUosSUFBQUEsSUFBQSxrQkFDQWMsT0FBQSxNQUNBbUIsS0FBQUosUUFDQWhCLFFBQUFBLFFBQUEsUUFBQSxNQUdBLE9BQUFpQixVQXJtQkFILGdCQUFBZixLQUFBLGVBd21CQSxTQUFBaUIsU0FDQSxJQUFBQyxRQUFBQyxLQUFBQyxZQUNBNUIsTUFBQSxDQUNBSixJQUFBQSxJQUFBLG9CQUNBYyxPQUFBLE1BQ0FtQixLQUFBSixRQUNBaEIsUUFBQUEsUUFBQSxRQUFBLE1BR0EsT0FBQWlCLFVBam5CQUgsZ0JBQUFmLEtBQUEsWUFxbkJBLFdBQ0EsSUFBQUcsTUFBQVIsb0JBQUFZLElBQUEsZ0JBRUF5RSxPQUFBLENBQ0ExRSxpQkFBQUgsTUFDQWdELFVBQUEsNEJBRUFqQyxRQUFBQyxLQUFBQyxZQUNBNUIsTUFBQSxDQUNBSixJQUFBLHlCQUNBYyxPQUFBLE9BQ0FtQixLQUFBMkQsVUFHQSxPQUFBOUQsVUFub0JBSCxnQkFBQWYsS0FBQSxlQXVvQkEsU0FBQWlGLFFBQ0F2QyxRQUFBQyxJQUFBLHdCQUFBc0MsUUFDQSxJQUFBL0QsUUFBQUMsS0FBQUMsWUFDQTVCLE1BQUEsQ0FDQUosSUFBQUEsSUFBQSxvQkFDQWMsT0FBQSxPQUNBRCxRQUFBQSxRQUFBLFFBQUEsR0FDQW9CLEtBQUE0RCxVQUdBLE9BQUEvRCxVQWpwQkFILGdCQUFBZixLQUFBLG9CQW9wQkEsU0FBQW1ELFVBQUErQixNQUNBLElBQUFoRSxRQUFBQyxLQUFBQyxZQUNBNUIsTUFBQSxDQUNBSixJQUFBQSxJQUFBLDBCQUFBK0QsVUFDQWpELE9BQUEsTUFDQUQsUUFBQUEsUUFBQSxRQUFBLEdBQ0FvQixLQUFBNkQsUUFHQSxPQUFBaEUsVUE3cEJBSCxnQkFBQWYsS0FBQSxlQWdxQkEsV0FDQSxJQUFBa0IsUUFBQUMsS0FBQUMsWUFDQTVCLE1BQUEsQ0FDQUosSUFBQUEsSUFBQSx5QkFDQWMsT0FBQSxNQUNBRCxRQUFBQSxRQUFBLE9BQUEsTUFHQSxPQUFBaUIsVUF4cUJBSCxnQkFBQWYsS0FBQSxrQkEwcUJBLFNBQUFpRCxHQUFBa0MsT0FDQSxJQUFBakUsUUFBQUMsS0FBQUMsWUFDQTVCLE1BQUEsQ0FDQUosSUFBQUEsSUFBQSx1QkFDQWMsT0FBQSxNQUNBbUIsS0FBQSxDQUNBOEIsVUFBQUYsR0FDQWtDLE1BQUFBLE9BRUFsRixRQUFBQSxRQUFBLFFBQUEsTUFHQSxPQUFBaUIsVUF0ckJBSCxnQkFBQWYsS0FBQSxlQXdyQkEsV0FDQSxJQUFBa0IsUUFBQUMsS0FBQUMsWUFDQTVCLE1BQUEsQ0FDQUosSUFBQUEsSUFBQSxvQkFDQWMsT0FBQSxNQUNBRCxRQUFBQSxRQUFBLE9BQUEsTUFHQSxPQUFBaUIsVUFoc0JBSCxnQkFBQWYsS0FBQSx1QkFrc0JBLFdBQ0EsSUFBQWtCLFFBQUFDLEtBQUFDLFlBQ0E1QixNQUFBLENBQ0FKLElBQUFBLElBQUEsNEJBQ0FjLE9BQUEsTUFDQUQsUUFBQUEsUUFBQSxPQUFBLE1BR0EsT0FBQWlCLFVBMXNCQUgsZ0JBQUFmLEtBQUEsb0JBNnNCQSxTQUFBaUIsU0FDQSxJQUFBQyxRQUFBQyxLQUFBQyxZQUNBNUIsTUFBQSxDQUNBSixJQUFBQSxJQUFBLHlCQUNBYyxPQUFBLE9BQ0FtQixLQUFBSixRQUNBaEIsUUFBQUEsUUFBQSxRQUFBLE1BR0EsT0FBQWlCLFVBdHRCQUgsZ0JBQUFmLEtBQUEsZ0JBd3RCQSxTQUFBaUIsU0FDQSxJQUFBQyxRQUFBQyxLQUFBQyxZQUNBNUIsTUFBQSxDQUNBSixJQUFBQSxJQUFBLHFCQUNBYyxPQUFBLE9BQ0FtQixLQUFBSixRQUNBaEIsUUFBQUEsUUFBQSxRQUFBLE1BR0EsT0FBQWlCLFVBanVCQUgsZ0JBQUFmLEtBQUEsbUJBb3VCQSxTQUFBNkIsVUFDQSxJQUFBQyxNQUFBRCxTQUVBRSxPQUFBQyxLQUFBSCxVQUFBSSxPQUFBLFNBQUFDLElBQUEvRCxHQUNBLElBQUFnRSxJQUFBaEUsRUFBQSxJQUFBMEQsU0FBQTFELEdBQUEsSUFFQSxPQURBK0QsS0FBQUMsS0FFQSxLQUxBLEdBTUFMLE1BQUFBLE1BQUFNLE1BQUEsR0FBQSxHQUNBLElBQUFsQixRQUFBQyxLQUFBQyxZQUNBNUIsTUFBQSxDQUNBSixJQUFBQSxJQUFBLHdCQUFBMEMsTUFDQTVCLE9BQUEsTUFDQUQsUUFBQUEsUUFBQSxPQUFBLE1BR0EsT0FBQWlCLFVBcHZCQUgsZ0JBQUFmLEtBQUEsd0JBc3ZCQSxTQUFBaUIsU0FDQSxJQUFBQyxRQUFBQyxLQUFBQyxZQUNBNUIsTUFBQSxDQUNBSixJQUFBQSxJQUFBLDZCQUNBYyxPQUFBLE9BQ0FtQixLQUFBSixRQUNBaEIsUUFBQUEsUUFBQSxRQUFBLE1BR0EsT0FBQWlCLFVBL3ZCQUgsZ0JBQUFmLEtBQUEsbUJBaXdCQSxTQUFBaUQsR0FBQW1DLE9BQ0EsSUFBQWxFLFFBQUFDLEtBQUFDLFlBQ0E1QixNQUFBLENBQ0FKLElBQUFBLElBQUEseUJBQUE2RCxHQUFBLFVBQUFtQyxNQUNBbEYsT0FBQSxNQUNBRCxRQUFBQSxRQUFBLE9BQUEsTUFHQSxPQUFBaUIsVUF6d0JBSCxnQkFBQWYsS0FBQSxpQkEyd0JBLFNBQUFpRCxJQUNBLElBQUEvQixRQUFBQyxLQUFBQyxZQUNBNUIsTUFBQSxDQUNBSixJQUFBQSxJQUFBLHVCQUFBNkQsR0FDQS9DLE9BQUEsTUFDQUQsUUFBQUEsUUFBQSxPQUFBLE1BR0EsT0FBQWlCLFVBbnhCQUgsZ0JBQUFmLEtBQUEsc0JBcXhCQSxTQUFBaUIsU0FDQSxJQUFBQyxRQUFBQyxLQUFBQyxZQUNBNUIsTUFBQSxDQUNBSixJQUFBQSxJQUFBLDJCQUNBYyxPQUFBLE9BQ0FELFFBQUFBLFFBQUEsUUFBQSxHQUNBb0IsS0FBQUosV0FHQSxPQUFBQyxVQTl4QkFILGdCQUFBZixLQUFBLG9CQWd5QkEsU0FBQXFGLFVBQ0EsSUFBQW5FLFFBQUFDLEtBQUFDLFlBQ0F2QixPQUFBK0MsT0FBQSxDQUNBeEQsSUFBQUEsSUFBQSxtQkFDQWMsT0FBQSxPQUNBbUIsS0FBQWdFLFNBQ0FwRixRQUFBQSxRQUFBLFFBQUEsTUFHQSxPQUFBaUIsVUF6eUJBSCxnQkFBQWYsS0FBQSxrQkE0eUJBLFNBQUE2QixVQUNBLElBQUFDLE1BQUFELFNBRUFFLE9BQUFDLEtBQUFILFVBQUFJLE9BQUEsU0FBQUMsSUFBQS9ELEdBQ0EsSUFBQWdFLElBQUFoRSxFQUFBLElBQUEwRCxTQUFBMUQsR0FBQSxJQUVBLE9BREErRCxLQUFBQyxLQUVBLEtBTEEsR0FNQUwsTUFBQUEsTUFBQU0sTUFBQSxHQUFBLEdBQ0EsSUFBQWxCLFFBQUFDLEtBQUFDLFlBQ0E1QixNQUFBLENBQ0FKLElBQUFBLElBQUEsd0JBQUEwQyxNQUNBNUIsT0FBQSxNQUNBRCxRQUFBQSxRQUFBLE9BQUEsTUFHQSxPQUFBaUIsVUE1ekJBSCxnQkFBQWYsS0FBQSx1QkErekJBLFNBQUE2QixVQUNBLElBQUFDLE1BQUFELFNBRUFFLE9BQUFDLEtBQUFILFVBQUFJLE9BQUEsU0FBQUMsSUFBQS9ELEdBQ0EsSUFBQWdFLElBQUFoRSxFQUFBLElBQUEwRCxTQUFBMUQsR0FBQSxJQUVBLE9BREErRCxLQUFBQyxLQUVBLEtBTEEsR0FNQUwsTUFBQUEsTUFBQU0sTUFBQSxHQUFBLEdBQ0EsSUFBQWxCLFFBQUFDLEtBQUFDLFlBQ0E1QixNQUFBLENBQ0FKLElBQUFBLElBQUEsNEJBQUEwQyxNQUNBNUIsT0FBQSxNQUNBRCxRQUFBQSxRQUFBLE9BQUEsTUFHQSxPQUFBaUIsVUEvMEJBSCxnQkFBQWYsS0FBQSxxQkFrMUJBLFNBQUFpQixRQUFBa0MsV0FDQSxJQUFBakMsUUFBQUMsS0FBQUMsWUFDQTVCLE1BQUEsQ0FDQUosSUFBQUEsSUFBQSwwQkFDQWMsT0FBQSxPQUVBRCxRQUFBQSxRQUFBLFFBQUEsR0FDQW9CLEtBQUFKLFdBR0EsT0FBQUMsVUE1MUJBSCxnQkFBQWYsS0FBQSxvQkErMUJBLFNBQUFpQixTQUNBLElBQUFDLFFBQUFDLEtBQUFDLFlBQ0E1QixNQUFBLENBQ0FKLElBQUFBLElBQUEseUJBQ0FjLE9BQUEsT0FDQUQsUUFBQUEsUUFBQSxRQUFBLEdBQ0FvQixLQUFBSixXQUdBLE9BQUFDLFVBeDJCQUgsZ0JBQUFmLEtBQUEsd0JBMjJCQSxTQUFBaUIsU0FDQSxJQUFBQyxRQUFBQyxLQUFBQyxZQUNBNUIsTUFBQSxDQUNBSixJQUFBQSxJQUFBLDZCQUNBYyxPQUFBLE9BQ0FELFFBQUFBLFFBQUEsUUFBQSxHQUNBb0IsS0FBQUosV0FHQSxPQUFBQyxVQXAzQkFILGdCQUFBZixLQUFBLGtCQXUzQkEsU0FBQXNGLFlBQ0EsSUFBQXBFLFFBQUFDLEtBQUFDLFlBQ0E1QixNQUFBLENBQ0FKLElBQUFBLElBQUEsb0JBQUFrRyxXQUNBcEYsT0FBQSxNQUNBRCxRQUFBQSxRQUFBLE9BQUEsTUFHQSxPQUFBaUIsVUEvM0JBSCxnQkFBQWYsS0FBQSx5QkFrNEJBLFNBQUF1RixlQUNBLElBQUFyRSxRQUFBQyxLQUFBQyxZQUNBdkIsT0FBQStDLE9BQUEsQ0FDQXhELElBQUFBLElBQUEsd0JBQ0FjLE9BQUEsT0FDQW1CLEtBQUFrRSxjQUNBdEYsUUFBQUEsUUFBQSxRQUFBLE1BR0EsT0FBQWlCLFVBMzRCQUgsZ0JBQUFmLEtBQUEsdUJBODRCQSxTQUFBc0YsWUFDQSxJQUFBcEUsUUFBQUMsS0FBQUMsWUFDQTVCLE1BQUEsQ0FDQUosSUFBQUEsSUFBQSx5QkFBQWtHLFdBQ0FwRixPQUFBLE1BQ0FELFFBQUFBLFFBQUEsT0FBQSxNQUdBLE9BQUFpQixVQXQ1QkFILGdCQUFBZixLQUFBLGFBeTVCQSxTQUFBaUIsU0FDQSxJQUFBQyxRQUFBQyxLQUFBQyxZQUNBdkIsT0FBQStDLE9BQUEsQ0FDQXhELElBQUFBLElBQUEsa0JBQ0FjLE9BQUEsT0FDQW1CLEtBQUFKLFFBQ0FoQixRQUFBQSxRQUFBLFFBQUEsTUFHQSxPQUFBaUIsVUFsNkJBSCxnQkFBQWYsS0FBQSx1QkFxNkJBLFNBQUFpQixTQUNBeUIsUUFBQUMsSUFBQSx3QkFDQSxJQUFBekIsUUFBQUMsS0FBQUMsWUFDQTVCLE1BQUEsQ0FDQUosSUFBQUEsSUFBQSw0QkFDQWMsT0FBQSxPQUNBbUIsS0FBQUosUUFDQWhCLFFBQUFBLFFBQUEsUUFBQSxNQUdBLE9BQUFpQixVQS82QkFILGdCQUFBZixLQUFBLHNCQWs3QkEsU0FBQWlELEdBQUF1QyxTQUNBOUMsUUFBQUMsSUFBQSxZQUFBNkMsU0FDQSxJQUFBdEUsUUFBQUMsS0FBQUMsWUFDQTVCLE1BQUEsQ0FDQUosSUFBQUEsSUFBQSxtQkFBQTZELEdBQ0EvQyxPQUFBLE1BQ0FtQixLQUFBbUUsUUFDQXZGLFFBQUFBLFFBQUEsT0FBQSxNQUdBLE9BQUFpQixVQTU3QkFILGdCQUFBZixLQUFBLHNCQSs3QkEsU0FBQXlGLE9BQ0EsSUFBQXZFLFFBQUFDLEtBQUFDLFlBQ0F2QixPQUFBK0MsT0FBQSxDQUNBeEQsSUFBQUEsSUFBQSx1QkFDQWMsT0FBQSxPQUNBRCxRQUFBQSxRQUFBLFFBQUEsR0FDQW9CLEtBQUFvRSxTQUdBLE9BQUF2RSxVQXg4QkFILGdCQUFBZixLQUFBLGNBMjhCQSxTQUFBMEYsSUFDQWhELFFBQUFDLElBQUEsU0FBQStDLElBQ0EsSUFBQXhFLFFBQUFDLEtBQUFDLFlBQ0F2QixPQUFBK0MsT0FBQSxDQUNBeEQsSUFBQUEsSUFBQSxvQkFDQWMsT0FBQSxPQUNBRCxRQUFBQSxRQUFBLFFBQUEsR0FDQW9CLEtBQUFxRSxNQUdBLE9BQUF4RSxVQXI5QkFILGdCQUFBZixLQUFBLDBCQXc5QkEsU0FBQWlELElBQ0EsSUFDQS9CLFFBQUFDLEtBQUFDLFlBQ0E1QixNQUFBLENBQ0FKLElBQUFBLElBQUEscUJBQUE2RCxHQUNBL0MsT0FBQSxNQUNBbUIsS0FMQSxDQUFBc0UsaUJBQUEsUUFNQTFGLFFBQUFBLFFBQUEsT0FBQSxNQUdBLE9BQUFpQixVQWwrQkFILGdCQUFBZixLQUFBLGVBcStCQSxXQUVBLElBQUE0RixTQUFBN0YsR0FBQThGLFFBR0FDLFlBQUF0RyxNQUFBLENBQ0FKLElBQUFBLElBQUEscUJBQ0FjLE9BQUEsTUFDQUQsUUFBQUEsUUFBQSxPQUFBLEtBRUE4RixlQUFBdkcsTUFBQSxDQUNBSixJQUFBQSxJQUFBLHNCQUNBYyxPQUFBLE1BQ0FELFFBQUFBLFFBQUEsT0FBQSxLQUlBRixHQUFBaUcsSUFBQSxDQUFBRixZQUFBQyxpQkFBQXRCLEtBQUEsU0FBQXBELE1BTUEsT0FMQXVFLFNBQUF0QixRQUFBLENBQ0EyQixVQUFBNUUsS0FBQSxHQUNBNkUsYUFBQTdFLEtBQUEsS0FHQXVFLFNBQUExRSxZQTUvQkFILGdCQUFBZixLQUFBLHNCQWdnQ0EsU0FBQWlELEdBQUFrRCxRQUNBekQsUUFBQUMsSUFBQXdELFFBQ0EsSUFBQWpGLFFBQUFDLEtBQUFDLFlBQ0F2QixPQUFBK0MsT0FBQSxDQUNBeEQsSUFBQUEsSUFBQSw0QkFBQTZELEdBQ0EvQyxPQUFBLE1BQ0FtQixLQUFBOEUsT0FDQWxHLFFBQUFBLFFBQUEsT0FBQSxNQUdBLE9BQUFpQixVQTFnQ0FsQixPQXZDQSxHQ0FBLFdBQ0F0QyxRQUFBQyxPQUFBLE9BQUE0QixRQUFBLGNBRUEsU0FBQUMsTUFBQUUsVUFBQUMscUJBQ0EsTUFBQSxDQUNBeUcsVUFBQSxXQUNBLElBQUFqRyxNQUFBUixvQkFBQVksSUFBQSxnQkFDQSxTQUFBSixPQUFBLElBQUFBLFFBTUFrRyxlQUFBLFNBQUFDLEtBQUFDLFNBQUEsSUFBQUMsc0JBQ0E3RyxvQkFBQVksSUFBQSxZQUFBa0csVUFEQUQsc0JBQ0FDLFVBREFDLHVCQUVBL0csb0JBQUFZLElBQUEsZUFBQW9HLFdBRkFELHVCQUVBQyxXQUVBLE9BQUFGLFdBQUFFLFdBQUFMLE1BQUFDLGFBakJBLEdDQUEsV0FDQTdJLFFBQUFDLE9BQUEsT0FBQTRCLFFBQUEscUJBRUEsU0FBQXFILFdBQUE5RyxjQUNBLE1BQUEsQ0FDQStHLFdBRUFDLE1BQUEsQ0FDQVIsS0FBQSxFQUNBakYsS0FBQSxHQUNBVixPQUFBLE1BRUEsQ0FDQW9HLEtBQUEsU0FBQUMsTUFDQUYsTUFBQW5HLE9BQUEsS0FDQW1HLE1BQUFSLEtBQUEsRUFDQVEsTUFBQXpGLEtBQUEsQ0FBQTJGLE9BRUFDLElBQUEsU0FBQUQsS0FBQXJHLFFBQ0FtRyxNQUFBbkcsT0FBQUEsT0FDQW1HLE1BQUFSLEtBQUEsRUFDQVEsTUFBQXpGLEtBQUEsQ0FBQTJGLE9BRUFFLE1BQUEsU0FBQUMsUUFDQSxPQUFBLElBQUE5QyxRQUFBLFNBQUFDLFFBQUFDLFFBQ0EsR0FBQXVDLE1BQUF6RixLQUFBK0YsT0FBQSxFQUdBLE9BRkF0SCxhQUFBdUgsUUFBQSwyQkFDQS9DLFNBQUEsR0FJQSxJQUFBZ0QsUUFBQSxJQUFBUixNQUFBUixLQUFBLGNBQUEsYUFHQXJGLFFBQUEsQ0FDQXNHLFFBQUFULE1BQUF6RixLQUFBbUcsSUFBQSxTQUFBQyxHQUFBLE9BQUFBLEVBQUFDLE1BQ0FDLFNBQUEsSUFBQWIsTUFBQVIsVUFBQWpHLEVBQUF5RyxNQUFBbkcsT0FDQXdHLE9BQUEsSUFBQUwsTUFBQVIsVUFBQWpHLEVBQUE4RyxPQUNBcEMsWUFBQSxJQUFBK0IsTUFBQVIsS0FBQWEsWUFBQTlHLEdBR0F1RyxXQUFBVSxTQUFBckcsU0FDQXdELEtBQUEsU0FBQUMsTUFDQTVFLGFBQUE4SCxRQUFBbEQsS0FBQXJELEtBQUF3RyxTQUVBZixNQUFBLENBQ0FSLEtBQUEsRUFDQWpGLEtBQUEsR0FDQVYsT0FBQSxNQUVBMkQsU0FBQSxLQUVBTSxNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLEdBQ0F2RCxRQUFBLFVBT0F3RCxnQkFBQSxXQUNBLElBQUFDLE1BQUEsR0FDQUMsS0FBQUQsTUFBQVosT0FBQSxFQU1BLE1BQUEsQ0FDQWMsS0FBQSxTQUFBbEIsTUFDQWdCLE1BQUFHLE9BQUFGLEtBQUEsRUFBQUQsTUFBQVosT0FBQUosTUFDQWlCLEtBQUFELE1BQUFaLE9BQUEsR0FFQWdCLFFBQUEsV0FFQSxHQUFBSixNQUFBWixRQUlBYSxPQUFBRCxNQUFBWixPQUFBLEVBTUEsT0FBQVksUUFEQUMsT0FFQUQsTUFBQUMsTUFBQUksU0FDQUwsTUFBQUMsWUFGQSxHQU1BSyxTQUFBLFdBRUEsR0FBQU4sTUFBQVosVUFLQWEsS0FBQSxHQUlBLE9BQUFELE1BQUFDLE9BQ0FELE1BQUFDLE1BQUFJLFNBRUFMLFFBREFDLFlBRkEsS0FVQU0sV0FBQSxXQUNBLElBQUFDLFlBQUEsR0FDQSxNQUFBLENBQ0ExSixJQUFBLFNBQUEySixLQUNBRCxZQUFBTixLQUFBTyxNQUVBbEksSUFBQSxXQUNBLE9BQUFpSSxlQVVBRSxpQkFBQSxTQUFBQyxZQUNBLE9BQUFBLFdBQUExRyxPQUNBLFNBQUFDLElBQUF1RixHQVVBLE9BUkFBLEVBQUFtQixLQUFBLE1BQ0Esb0JBQUFuQixFQUFBbkIsTUFBQSxTQUFBdUMsS0FBQXBCLEVBQUFuQixPQUVBcEUsSUFBQTRHLFdBQUFaLEtBQUFULEdBR0F2RixJQUFBNkcsR0FBQWIsS0FBQVQsR0FFQXZGLEtBRUEsQ0FBQTZHLEdBQUEsR0FBQUQsV0FBQSxNQVNBRSxnQkFBQSxTQUFBQyxNQUNBLE9BQ0FBLEtBQUFMLEtBQUEsTUFDQSxvQkFBQUssS0FBQTNDLE1BQUEsU0FBQXVDLEtBQUFJLEtBQUEzQyxPQUVBLEVBRUEsR0FPQTRDLHNCQUFBLFNBQUF6RCxPQUNBLElBQUEwRCxNQUFBLEVBV0EsT0FWQTFELE1BQUFzRCxHQUFBSyxRQUFBLFNBQUEzQixHQUNBQSxFQUFBNEIsV0FBQTVCLEVBQUE2QixVQUFBSCxPQUNBQSxNQUFBLEtBR0ExRCxNQUFBcUQsV0FBQU0sUUFBQSxTQUFBM0IsR0FDQUEsRUFBQTRCLFdBQUE1QixFQUFBNkIsVUFBQUgsT0FDQUEsTUFBQSxLQUdBQSxNQVFBSSxvQkFBQSxTQUFBOUQsTUFBQTBCLFFBQ0EsT0FBQSxJQUFBOUMsUUFBQSxTQUFBQyxRQUFBQyxRQUNBcUMsV0FDQTRDLG9CQUFBLENBQ0FDLFdBQUFoRSxNQUFBK0IsSUFBQSxTQUFBQyxHQUFBLE9BQUFBLEVBQUF2QyxPQUNBaUMsT0FBQUEsU0FFQTFDLEtBQUEsU0FBQUMsTUFFQSxJQUFBZ0YsZUFBQWpFLE1BQ0ErQixJQUFBLFNBQUFDLEdBR0EsT0FGQUEsRUFBQWtDLE9BQUEsU0FDQWxDLEVBQUFtQyxVQUFBbkMsRUFBQXZDLEtBQ0F1QyxJQUVBeEYsT0FDQSxTQUFBQyxJQUFBdUYsR0FLQSxPQUpBLElBQUEvQyxLQUFBckQsS0FBQXdJLFdBQUFDLFFBQUFyQyxFQUFBdkMsTUFDQWhELElBQUE2SCxZQUFBN0IsS0FBQVQsR0FDQXZGLElBQUEySCxXQUFBM0IsS0FBQVQsR0FFQXZGLEtBRUEsQ0FBQTJILFdBQUEsR0FBQUUsWUFBQSxLQUdBekYsUUFBQW9GLGtCQUVBOUUsTUFBQSxTQUFBa0QsR0FDQXZELE9BQUF1RCxRQVVBa0MsZ0JBQUEsU0FBQXZFLE9BQ0EsT0FBQUEsTUFBQXdFLE9BQUEsU0FBQXhDLEdBQUEsTUFBQSxXQUFBQSxFQUFBa0MsU0FBQTFILE9BQUEsU0FBQUMsSUFBQXVGLEdBRUEsT0FEQXZGLElBQUFBLEtBQUF1RixFQUFBbUMsWUFBQW5DLEVBQUF2QyxPQUVBLElBUUFnRixnQkFBQSxTQUFBQyxVQUNBLE9BQUFBLFNBQUEsTUFBQUMsS0FBQUMsTUFBQSxLQUtBQyxrQkFBQSxTQUFBckIsTUFDQSxJQUFBc0IsT0FBQSxJQUFBQyxXQUNBRCxPQUFBRSxPQUFBLFdBQ0FDLFNBQUFDLFlBQUEsQ0FBQXZMLElBQUFtTCxPQUFBSyxTQUFBbkcsS0FBQSxTQUFBb0csS0FDQUEsSUFBQUMsUUFBQSxHQUFBckcsS0FBQSxTQUFBc0csTUFDQXJJLFFBQUFDLElBQUEsVUFBQW9JLE1BQ0EsSUFDQUMsU0FBQUQsS0FBQUUsWUFEQSxHQUVBQyxPQUFBQyxTQUFBQyxjQUFBLFVBQ0FDLFFBQUFILE9BQUFJLFdBQUEsTUFDQUosT0FBQUssT0FBQVAsU0FBQU8sT0FDQUwsT0FBQU0sTUFBQVIsU0FBQVEsTUFFQSxJQUFBQyxLQUFBVixLQUFBVyxPQUFBLENBQ0FDLGNBQUFOLFFBQ0FMLFNBQUFBLFdBRUFTLEtBQUF2SyxRQUFBdUQsS0FBQSxXQUNBLElBQUFtSCxRQUFBVixPQUFBVyxVQUFBLGFBQ0FDLEtBQUFYLFNBQUFDLGNBQUEsS0FDQVUsS0FBQUMsU0FBQSxrQkFBQTNCLEtBQUFDLE1BQ0F5QixLQUFBRSxLQUFBSixRQUNBVCxTQUFBYyxLQUFBQyxZQUFBSixNQUNBQSxLQUFBSyxRQUNBaEIsU0FBQWMsS0FBQUcsWUFBQU4sYUFNQXZCLE9BQUE4QixjQUFBcEQsT0FFQXFELGNBQUEsU0FBQTNELFlBQ0EsT0FBQUEsV0FBQTFHLE9BQ0EsU0FBQUMsSUFBQXVGLEdBU0EsT0FQQUEsRUFBQXdCLEtBQUFMLEtBQUEsTUFDQSxvQkFBQW5CLEVBQUF3QixLQUFBM0MsTUFBQSxTQUFBdUMsS0FBQXBCLEVBQUF3QixLQUFBM0MsT0FFQXBFLElBQUE0RyxXQUFBWixLQUFBVCxHQUVBdkYsSUFBQTZHLEdBQUFiLEtBQUFULEdBRUF2RixLQUVBLENBQUE2RyxHQUFBLEdBQUFELFdBQUEsT0E1UkEsSUFFQWhDLFFBUEEsR0NBQSxXQUNBcEosUUFBQUMsT0FBQSxPQUFBNEIsUUFBQSxVQUVBLFNBQ0FDLE1BQ0FDLE9BQ0FDLFVBQ0E2TSxrQkFDQXpNLGFBQ0FILHFCQUdBLElBQUE2TSxXQUNBQyxTQUFBLEVBQ0EsU0FBQUMsSUFDQUQsVUFDQUEsU0FBQSxFQUNBRSxXQUFBLFdBQ0FGLFNBQUEsSUFFQUMsUUFSQSxJQUNBRCxRQVlBLE1BQUEsQ0FDQTdMLFVBQ0FnTSxZQUFBTCxrQkFBQU0saUJBQ0FELGFBRUEvTCxPQUFBLFdBQ0FsQixvQkFBQW1OLE9BQUEsZ0JBQ0FuTixvQkFBQW1OLE9BQUEsWUFDQW5OLG9CQUFBbU4sT0FBQSxlQUNBbk4sb0JBQUFiLElBQUEsaUJBQUEsTUFDQWEsb0JBQUFtTixPQUFBLGtCQUVBck4sT0FBQXNOLEdBQUEsWUFDQVAsVUFBQSxXQUFBLE9BQUExTSxhQUFBa04sTUFBQSxtQkFHQWxNLFdBQ0FtTSxTQUFBdE4sb0JBQUFZLElBQUEsYUFBQSxHQUVBLENBQ0F6QixJQUFBLFNBQUF1QyxNQVlBLE9BSkFBLEtBQUFvRixVQVBBLENBQ0EsUUFDQSxVQUNBLGlCQUNBLGNBQ0EsVUFFQXFELFFBQUF6SSxLQUFBNkwsYUFFQXZOLG9CQUFBYixJQUFBLFdBQUF1QyxNQUNBNEwsU0FBQTVMLE1BR0FkLElBQUEsV0FBQSxPQUFBME0sVUFDQUUsTUFBQSxXQUNBeE4sb0JBQUFtTixPQUFBLFlBQ0FHLFNBQUEsTUFLQUcsY0FDQUMsWUFBQTFOLG9CQUFBWSxJQUFBLGdCQUFBLEtBRUEsQ0FDQXpCLElBQUEsU0FBQXVDLE1BR0EsT0FGQTFCLG9CQUFBYixJQUFBLGNBQUF1QyxNQUNBZ00sWUFBQWhNLE1BR0FkLElBQUEsV0FBQSxPQUFBOE0sYUFFQUMsUUFBQSxTQUFBckssSUFDQXpELE1BQUEsQ0FDQVUsT0FBQSxNQUNBRCxRQUFBLENBQ0FLLGlCQUFBWCxvQkFBQVksSUFBQSxnQkFDQUMsU0FBQUMsS0FBQUMsVUFBQSxDQUFBQyxPQUFBLFNBRUF2QixJQUFBQSxxREFBQTZELEtBRUF3QixLQUFBLFNBQUFDLE1BQ0EvRSxvQkFBQWIsSUFBQSxjQUFBNEYsS0FBQXJELFFBRUF1RCxNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLE1BR0FxRixNQUFBLFdBQ0F4TixvQkFBQW1OLE9BQUEsZUFDQU8sWUFBQSxNQUtBRSxhQUFBLFdBQ0E1TixvQkFBQVksSUFBQSxrQkFDQSxNQUFBLENBQ0F6QixJQUFBLFNBQUF1QyxNQUdBLE9BRkExQixvQkFBQWIsSUFBQSxpQkFBQXVDLE1BQ0FBLE1BR0FkLElBQUEsV0FBQSxPQUFBWixvQkFBQVksSUFBQSxtQkFDQTRNLE1BQUEsV0FDQXhOLG9CQUFBbU4sT0FBQSxrQkFDQSxPQVhBLEdBZ0JBVSxlQUFBLFdBQ0EsSUFBQXJPLE1BQUFRLG9CQUFBWSxJQUFBLG1CQUFBLENBQ0FrTixJQUFBLEVBQ0FDLFdBQUEsR0FDQTNDLEtBQUEsQ0FDQTRDLFNBQUEsRUFDQUMsTUFBQSxJQUlBLE1BQUEsQ0FDQUMsUUFBQSxTQUFBdkgsS0FBQXdILE9BQ0EzTyxNQUFBNEwsS0FBQXpFLE1BQUF3SCxNQUNBbk8sb0JBQUFiLElBQUEsaUJBQUFLLFFBRUE0TyxPQUFBLFNBQUF0RixLQUNBdEosTUFBQXNPLElBQUFoRixJQUNBOUksb0JBQUFiLElBQUEsaUJBQUFLLFFBRUE2TyxLQUFBLFNBQUFDLE9BQ0FELFFBQ0E3TyxNQUFBdU8sV0FBQU0sTUFDQXJPLG9CQUFBYixJQUFBLGlCQUFBSyxTQUdBb0IsSUFBQSxXQUNBLE9BQUFwQixTQUtBK08sT0FBQSxDQUNBLENBQ0FoSixLQUFBLEtBQ0E0SSxNQUFBLE1BRUEsQ0FDQTVJLEtBQUEsUUFDQTRJLE1BQUEsU0FFQSxDQUNBQSxNQUFBLFFBQ0E1SSxLQUFBLFNBRUEsQ0FDQUEsS0FBQSxLQUNBNEksTUFBQSxNQUVBLENBQ0E1SSxLQUFBLFFBQ0E0SSxNQUFBLFNBRUEsQ0FDQUEsTUFBQSxRQUNBNUksS0FBQSxTQUVBLENBQ0E0SSxNQUFBLE9BQ0E1SSxLQUFBLFNBSUFpSixZQUFBLFdBQ0EsT0FBQTNPLE1BQUFlLElBQUEsMEJBRUE2TixlQUFBLFdBQ0EsT0FBQTVPLE1BQUFlLElBQUEsMkJBRUE4TixZQUFBLFdBQ0EsT0FBQTdPLE1BQUFlLElBQUEsd0JBR0ErTixTQUFBLFNBQUFDLE1BQ0EsSUFBQUMsV0FBQUEsRUFDQSxPQUFBLFNBQUE5QixHQUFBK0IsTUFDQUMsYUFBQUYsT0FDQUEsTUFBQTdCLFdBQUEsV0FDQUQsR0FBQWlDLE1BQUEsS0FBQUYsT0FDQUYsUUFJQUssYUFBQSxXQUNBLElBQUE1SCxVQUFBQSxFQUNBLE1BQUEsQ0FDQTZILE1BQUEsU0FBQXBHLEtBQ0F6QixLQUFBeUIsS0FFQWxJLElBQUEsV0FDQSxPQUFBeUcsUUFVQThILG9CQUFBLFNBQUFDLFFBQUFDLFdBQ0EsTUFBQSxHQUFBQyxPQUFBQyxtQkFBQUMsTUFBQUgsV0FBQWhOLFNBQUFDLE9BQUEsU0FBQUMsSUFBQWtOLEVBQUFDLEdBQ0EsSUFBQUMsUUFBQSxDQUNBQyxPQUFBRixFQUNBalEsSUFBQTJQLFFBQ0FTLFFBQUEsV0FEQSxlQUNBSCxFQUFBLEdBREEsS0FFQUcsUUFBQSxTQUFBLFFBQ0FDLE1BQUFBLFNBQUFyRixLQUFBQyxNQUNBcUYsVUFBQSxFQUNBQyxZQUFBLElBR0EsT0FEQXpOLElBQUFnRyxLQUFBb0gsU0FDQXBOLEtBQ0EsS0FRQTBOLG1CQUFBLFNBQUFDLEtBQ0EsT0FBQSxJQUFBeEwsUUFBQSxTQUFBQyxRQUFBQyxRQUNBbUcsU0FDQUMsWUFBQWtGLElBQUFDLFlBQ0E1TyxRQUFBdUQsS0FBQSxTQUFBb0csS0FDQXhHLFFBQUEyQixJQUNBLEdBQUFpSixPQUFBQyxtQkFBQUMsTUFBQXRFLElBQUFrRixVQUFBL04sU0FBQXdGLElBQUEsU0FBQTRILEVBQUFDLEdBQUEsT0FDQXhFLElBQUFDLFFBQUF1RSxFQUFBLE1BR0E1SyxLQUFBLFNBQUF1TCxPQUNBMUwsUUFDQTBMLE1BQUF4SSxJQUFBLFNBQUFDLEVBQUE0SCxHQUlBLE9BSEE1SCxFQUFBOEgsT0FBQUYsRUFBQTVILEVBQUFnSSxNQUFBLFNBQUFyRixLQUFBQyxNQUNBNUMsRUFBQWlJLFVBQUEsRUFDQWpJLEVBQUFrSSxZQUFBLEdBQ0FsSSxPQUlBN0MsTUFBQSxTQUFBa0QsR0FDQXZELE9BQUF1RCxPQUdBbEQsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixHQUNBdkQsT0FBQXVELFFBS0FtSSxXQUFBLFNBQUFsRixLQUFBRyxRQUNBLElBQUFGLFNBQUFELEtBQUFFLFlBQ0FDLE9BQUFNLE1BQUFULEtBQUFFLFlBQUEsR0FBQU8sT0FFQUgsUUFBQUgsT0FBQUksV0FBQSxNQUNBSixPQUFBSyxPQUFBUCxTQUFBTyxPQUVBUixLQUFBVyxPQUFBLENBQ0FDLGNBQUFOLFFBQ0FMLFNBQUFBLGFBbE5BLElBQ0FxQyxZQTNCQSxJQUNBSixTQWhCQSxJQUNBTCxjQTNCQSxHQ0FBLFdBQ0FsUCxRQUFBQyxPQUFBLE9BQUE0QixRQUFBLHFCQUVBLFNBQ0FDLE1BQ0FDLE9BQ0FDLFVBQ0FDLG9CQUNBQyxRQUNBQyxPQUNBQyxhQUNBQyxHQUNBNkcsV0FDQXNKLGNBQ0FDLG9CQUNBLElBQUFDLFNBQ0FDLEdBQUFsUCxLQUNBbVAsYUFBQSxHQWdCQSxPQWJBclEsUUFBQSxTQUFBQyxPQUFBQyxPQUNBLE1BQUEsQ0FDQUMsZUFBQSxRQUFBRixZQUFBRyxFQUFBLG1CQUNBQyxpQkFBQUgsTUFDQVIsb0JBQUFZLElBQUEscUJBQ0FGLEVBQ0FHLFNBQUFDLEtBQUFDLFVBQUEsQ0FDQUMsT0FBQSxVQVBBeVAsU0FXQXhRLFFBQUFnQixTQVhBd1AsU0FXQXhQLFNBQUFFLFVBWEFzUCxTQVdBdFAsVUFBQUQsT0FYQXVQLFNBV0F2UCxPQUVBLENBQ0EwUCxhQUFBLFNBQUFwSyxPQUFBcUssWUFpSEEsR0FoSEE5TixRQUFBQyxJQUFBLFdBQUF3RCxRQUNBekQsUUFBQUMsSUFBQSxtQkFBQTZOLFlBQ0E5TixRQUFBQyxJQUFBLHNCQUFBNk4sV0FBQXpILElBQ0FyRyxRQUFBQyxJQUFBLDhCQUFBNk4sV0FBQTFILFlBR0EvSSxHQUFBOEYsUUFFQTJLLFdBQUF6SCxHQUFBM0IsUUFDQW9KLFdBQUF6SCxHQUNBSyxRQUFBLFNBQUEzQixFQUFBNEgsRUFBQW9CLE9BQ0EvTixRQUFBQyxJQUFBOEUsRUFBQTRILEdBNEZBYSxjQUFBMUwsTUF6RkEsU0FBQWtNLFdBRUFqSixFQUFBd0IsS0FBQTBILE1BQUFULGNBQUFTLE1BQUFDLEtBQUFGLFVBQUFqSixHQUNBQSxFQUFBd0IsS0FBQTRILE9BQUFYLGNBQUFXLE9BQUFELEtBQUFGLFVBQUFqSixHQUNBQSxFQUFBd0IsS0FBQTZILE1BQUFaLGNBQUFZLE1BQUFGLEtBQUFGLFVBQUFqSixHQUNBLElBQUFzSixVQUFBLENBQ0E3TCxLQUFBdUMsRUFBQXdCLEtBQUEvRCxLQUNBK0QsS0FBQXhCLEVBQUF3QixLQUNBckksU0FBQSxTQUFBb1EsRUFBQUMsT0FJQXhKLEVBQUF3QixLQUFBckksU0FDQTZHLEVBQUF3QixLQUFBckksU0FBQXNRLEtBQUFDLE1BQUEsSUFBQUgsR0FDQXZKLEVBQUF3QixLQUFBckksU0FDQXNRLEtBQUFDLE1BQUEsSUFBQUgsR0FFQVgsR0FBQWUsYUFBQWpCLG1CQUFBakgsc0JBQ0FzSCxhQU9BN0wsU0FBQSxTQUFBME0sS0FBQUMsUUFDQTdKLEVBQUF3QixLQUFBSSxXQUFBLEVBS0EzRyxRQUFBQyxJQUFBLGVBSUErTixVQUFBYSxJQUFBUixXQUFBdE0sS0FDQSxTQUFBK00sY0FFQTlPLFFBQUFDLElBQUE4RSxHQUNBLElBQUF4RyxRQUFBLENBQ0FxRixLQUFBNkosbUJBQUFuSCxnQkFBQXZCLEVBQUF3QixNQUVBd0ksVUFBQSxDQUNBN0gsVUFBQW5DLEVBQUF3QixLQUFBL0QsS0FDQXdNLGlCQUFBakssRUFBQWpDLFFBQ0FtTSxPQUFBLGNBQ0F6VCxJQUFBQSxRQUFBdUosRUFBQXdCLEtBQUEvRCxLQUNBME0sU0FBQW5LLEVBQUF3QixLQUFBM0MsS0FDQXVMLE1BQUFwSyxFQUFBd0IsS0FBQUwsT0FLQXBKLE1BQUEsQ0FDQUosSUFBQUEsSUFBQSw0QkFDQWMsT0FBQSxPQUNBbUIsS0FBQUosUUFDQWhCLFFBQUFBLFFBQUEsUUFBQSxLQUNBd0UsS0FBQSxTQUFBQyxNQUNBaEMsUUFBQUMsSUFBQSxZQUFBK0IsTUFDQTRMLGFBQUFwSSxLQUFBeEQsTUFDQTJLLEdBQUFtQixXQUFBekgsR0FBQTNCLE9BQUEsSUFDQTBLLE1BQUEsaUJBQ0FwUCxRQUFBQyxJQUFBME0sR0FDQTNNLFFBQUFDLElBQUEsU0FBQThFLE1BR0E3QyxNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLE1BS0EsU0FBQWlLLFFBRUF0SyxFQUFBNkIsU0FBQSxFQUVBK0csR0FBQWUsYUFBQWpCLG1CQUFBakgsc0JBQ0FzSCxrQkFvQkFBLFdBQUExSCxXQUFBMUIsT0FDQSxDQUFBLElBQUE0SyxrQkFBQSxDQUNBdk0sTUFBQStLLFdBQUExSCxZQUlBakosT0FBQStDLE9BQUEsQ0FDQXhELElBQUFBLElBQUEsa0JBQ0FjLE9BQUEsT0FDQW1CLEtBQUEyUSxrQkFDQS9SLFFBQUFBLFFBQUEsUUFBQSxLQUVBd0UsS0FBQSxTQUFBQyxNQUNBaEMsUUFBQUMsSUFBQSwyQkFBQStCLE1BR0EyTCxHQUFBZSxhQUFBakIsbUJBQUFqSCxzQkFDQXNILGNBSUE1TCxNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLE9BbUJBbUssU0FBQSxTQUFBOUwsT0FBQVYsT0FDQS9DLFFBQUFDLElBQUF3RCxRQUNBekQsUUFBQUMsSUFBQThDLFdBOUxBLEdDQUEsV0FDQS9ILFFBQUFDLE9BQUEsT0FBQTRCLFFBQUEsZ0JBRUEsU0FDQUMsTUFDQUUsVUFDQUMsb0JBQ0FpSCxXQUNBL0csT0FDQWlKLFdBQ0FoSixjQUdBLElBRUFsQyxPQUFBLENBQ0FzVSxVQUFBQSw2Q0FDQUMsUUFBQSx1QkFDQVIsT0FBQSxtQkFDQVMsVUFMQSxhQU1BQyxtQkFBQSxFQUNBQyw4QkFBQSxFQUNBQyxnQkFBQSxTQUFBbFIsTUFDQSxPQUFBbVIsSUFBQUMsS0FBQUMsT0FBQUMsSUFBQXRSLEtBQUEsV0FFQXVSLHdCQUFBLFNBQUF2UixNQUNBLE9BQUFtUixJQUFBQyxLQUFBQyxPQUFBRyxPQUFBeFIsS0FBQSxTQUlBLE1BQUEsQ0FDQXlSLEtBQUEsV0FDQSxPQUFBQyxVQUFBQyxPQUFBcFYsU0FFQTRHLE1BQUEsU0FBQXlPLFNBQ0EsSUFBQUMsV0FBQS9SLEtBQUEyUixPQUVBSSxXQUFBek8sS0FBQXdPLFNBQUFyTyxNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLE1BR0E2SSxNQUFBLFNBQUExSCxNQUNBOUgsS0FBQXdQLE1BQUEsb0JBQUExSCxLQUFBL0QsS0FBQSxDQUFBaU8sT0FBQSxJQUNBMU8sS0FBQSxXQUNBd0UsS0FBQW1LLFVBQUEsRUFDQTFRLFFBQUFDLElBQUEsYUFFQWlDLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsTUFHQStJLE9BQUEsU0FBQTVILE1BQ0E5SCxLQUFBMFAsT0FBQSxvQkFBQTVILEtBQUEvRCxNQUNBVCxLQUFBLFdBQ0F3RSxLQUFBbUssVUFBQSxFQUNBMVEsUUFBQUMsSUFBQSxjQUVBaUMsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixNQUdBZ0osTUFBQSxTQUFBN0gsTUFDQTlILEtBQUFrUyxPQUFBLG9CQUFBcEssS0FBQS9ELE1BQ0FULEtBQUEsV0FFQS9CLFFBQUFDLElBQUEsZUFFQWlDLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsU0FwRUEsR0NBQSxXQUdBcEssUUFBQUMsT0FBQSxPQUFBNEIsUUFBQSxrQkFHQSxTQUFBK1QsWUFDQSxNQUFBLENBRUFDLFlBQUEsU0FBQUMsTUFBQUMsWUFBQUMsYUFDQSxJQUFBQyxNQUNBRCxhQUFBQSxZQUFBRSxhQUNBRCxNQUFBRSxNQUFBQyxLQUFBZCxPQUFBVSxZQUFBRSxXQUFBLFVBQ0FwSSxNQUFBaUksWUFBQWpJLE9BQ0FtSSxNQUFBcEksT0FBQWtJLFlBQUFsSSxTQUVBb0ksTUFBQSxJQUFBRSxNQUFBRSxNQUFBLENBQ0FDLFVBQUFSLE1BQ0EvTCxFQUFBLEVBQ0F3TSxFQUFBLEVBQ0F6SSxNQUFBaUksWUFBQWpJLE1BQ0FELE9BQUFrSSxZQUFBbEksU0FHQSxJQUFBMkksYUFBQS9TLEtBQUErUyxhQU9BLE9BTkFQLE1BQUFRLEdBQUEsZ0JBQUEsV0FDQSxJQUFBQyxXQUFBRixhQUFBVixPQUNBRyxNQUFBbkksTUFBQTRJLFdBQUE1SSxPQUNBbUksTUFBQXBJLE9BQUE2SSxXQUFBN0ksUUFDQW9JLE1BQUFVLFNBRUFWLE9BRUFPLGFBQUEsU0FBQVYsT0FDQSxJQUFBYyxHQUFBbkosU0FBQW9KLGVBQUFmLE9BQ0EsTUFBQSxDQUNBakksT0FBQStJLEdBQUFFLGFBQ0FoSixNQUFBOEksR0FBQUcsY0FLQUMsUUFBQSxXQUNBLElBQUFDLGFBQUEsQ0FDQUMsT0FBQSxDQUNBQyxVQUFBLEVBQ0FDLE9BQUEsRUFDQUMsT0FBQSxFQUNBQyxRQUFBLEVBQ0FDLFdBQUEsRUFDQUMsU0FBQSxFQUNBQyxRQUFBLEdBRUFDLFNBQUEsQ0FDQUMsS0FBQSxFQUNBQyxZQUFBLEVBQ0FDLFlBQUEsRUFDQUMsT0FBQSxFQUNBQyxTQUFBLEVBQ0F6SCxLQUFBLEVBQ0EwSCxVQUFBLEdBRUFDLFlBQUEsQ0FDQWQsVUFBQSxFQUNBQyxPQUFBLEVBQ0FDLE9BQUEsRUFDQUMsUUFBQSxFQUNBQyxXQUFBLEVBQ0FFLFFBQUEsRUFDQUQsU0FBQSxJQUlBVSxhQUFBakIsYUFDQSxNQUFBLENBQ0FrQixLQUFBLFNBQUFDLE9BQ0FGLGFBQUFFLE9BRUFDLFNBQUEsU0FBQXpQLEtBQUEwUCxPQUVBLE9BREFKLGFBQUF0UCxNQUFBMFAsU0FDQUosYUFBQXRQLE1BQUEwUCxRQUVBelYsSUFBQSxXQUNBLE9BQUFxVixjQUVBekksTUFBQSxXQUNBeUksYUFBQWpCLGdCQVNBc0IsVUFBQSxXQUVBLElBQUFDLGtCQUFBLENBQ0F0QixPQUFBLENBQ0FDLFdBQUEsRUFDQUMsUUFBQSxFQUNBQyxRQUFBLEVBQ0FDLFNBQUEsRUFDQUMsWUFBQSxFQUNBRSxTQUFBLEdBRUFDLFNBQUEsQ0FDQUMsTUFBQSxFQUNBQyxhQUFBLEVBQ0FDLGFBQUEsRUFDQUMsUUFBQSxFQUNBQyxVQUFBLEVBQ0F6SCxNQUFBLEVBQ0EwSCxXQUFBLEdBRUFDLFlBQUEsQ0FDQWQsV0FBQSxFQUNBQyxRQUFBLEVBQ0FDLFFBQUEsRUFDQUMsU0FBQSxFQUNBQyxZQUFBLEVBQ0FFLFNBQUEsRUFDQUQsVUFBQSxJQUtBaUIsV0FBQXpZLFFBQUFxSixLQUFBbVAsbUJBRUEsTUFBQSxDQUVBcFgsSUFBQSxTQUFBd0gsTUFDQSxJQUFBdEUsS0FBQXNFLEtBQUE4UCxNQUFBLEtBQ0FqVixLQUFBZ00sUUFDQWdKLFdBQUFuVSxLQUFBLElBQUFBLEtBQUEsS0FBQSxFQUNBc1IsV0FBQStDLFdBQUEsa0JBQUFGLGFBR0FHLE1BQUEsU0FBQWhRLE1BQ0EsSUFBQXRFLEtBQUFzRSxLQUFBQSxLQUFBOFAsTUFBQSxLQUFBLEdBQ0EsT0FBQTlQLEtBQUE2UCxXQUFBblUsS0FBQSxJQUFBQSxLQUFBLElBQUFtVSxZQUVBaEosTUFBQSxXQUNBZ0osV0FBQXpZLFFBQUFxSixLQUFBbVAsbUJBQ0E1QyxXQUFBK0MsV0FBQSxrQkFBQUYsZUFPQUksaUJBQUEsV0FDQSxJQUFBcFgsTUFBQSxDQUNBMk8sTUFBQSxFQUNBMEksS0FBQSxTQUdBLE1BQUEsQ0FDQTFYLElBQUEsU0FBQTJYLEtBQ0F0WCxNQUFBc1gsS0FFQWxXLElBQUEsV0FDQSxPQUFBcEIsU0FNQXVYLGFBQUEsU0FBQUMsU0FDQSxJQUFBM08sTUFBQTJPLFNBQUEsR0FDQTFPLEtBQUFELE1BQUFaLE9BQUEsRUFDQSxNQUFBLENBQ0FjLEtBQUEsU0FBQU8sS0FDQVQsTUFBQUcsT0FBQUYsS0FBQSxFQUFBRCxNQUFBWixPQUFBcUIsS0FDQVIsS0FBQUQsTUFBQVosT0FBQSxHQUVBd1AsS0FBQSxXQUNBLE9BQUE1TyxPQUVBNk8sS0FBQSxXQUNBLE9BQUE3TyxNQUFBQyxPQUVBNk8sS0FBQSxXQUNBN08sTUFBQSxJQUNBRCxNQUFBQyxNQUFBOE8sU0FDQTlPLE1BQUEsSUFHQStPLEtBQUEsV0FDQS9PLEtBQUFELE1BQUFaLFNBQ0FhLEtBQUFBLE9BQUFELE1BQUFaLE9BQUEsRUFBQWEsS0FBQUEsS0FBQSxFQUNBRCxNQUFBQyxNQUFBZ1AsY0FPQUMsY0FBQSxTQUFBdkQsTUFBQXdELE9BQUFDLFFBQUFDLFdBQUFDLE9BQ0EsSUFBQUgsT0FBQUEsT0FDQXhELE1BQUFBLE1BQ0F5RCxRQUFBQSxRQUNBRSxNQUFBQSxNQUdBQyxTQUFBLENBQ0F2RSxPQUFBLENBQ0ErRCxPQUFBLFdBQ0FJLE9BQUFySyxTQUNBNkcsTUFBQTZELGFBRUFQLFFBQUEsV0FDQUcsUUFBQTdGLElBQUE0RixRQUNBeEQsTUFBQTZELGNBR0FDLEtBQUEsQ0FDQVYsT0FBQSxXQUNBSSxPQUFBTyxTQUFBSixNQUFBOVMsT0FDQW1QLE1BQUE2RCxhQUVBUCxRQUFBLFdBQ0FFLE9BQUFPLFNBQUFKLE1BQUFLLEtBQ0FoRSxNQUFBNkQsY0FHQVQsT0FBQSxDQUNBQSxPQUFBLFdBQ0FLLFFBQUE3RixJQUFBNEYsUUFDQXhELE1BQUE2RCxhQUVBUCxRQUFBLFdBQ0FFLE9BQUFySyxTQUNBNkcsTUFBQTZELGNBR0FJLFdBQUEsQ0FDQWIsT0FBQSxXQUNBLElBQUEsSUFBQTdZLE9BQUFvWixNQUFBOVMsTUFDQTJTLE9BQUFqWixLQUFBb1osTUFBQTlTLE1BQUF0RyxNQUdBeVYsTUFBQTZELGFBRUFQLFFBQUEsV0FDQSxJQUFBLElBQUEvWSxPQUFBb1osTUFBQUssSUFDQVIsT0FBQWpaLEtBQUFvWixNQUFBSyxJQUFBelosTUFFQXlWLE1BQUE2RCxlQUtBLE1BQUEsQ0FDQUwsT0FBQUEsT0FDQUYsUUFBQU0sU0FBQUYsWUFBQUosUUFDQUYsT0FBQVEsU0FBQUYsWUFBQU4sU0FLQWMsU0FBQSxXQUNBLElBQUFyVCxNQUNBLE1BQUEsQ0FDQStNLElBQUEsU0FBQW1HLFVBQ0EsR0FBQWxULE1BR0EsTUFBQSxDQUNBQSxNQUFBQSxNQUNBbVQsSUFBQUQsVUFKQWxULE1BQUFrVCxZQVdBSSxxQkFBQSxXQUNBLElBQUF0VCxNQUNBLE1BQUEsQ0FDQStNLElBQUEsU0FBQStGLE9BQ0EsR0FBQTlTLE1BR0EsTUFBQSxDQUNBQSxNQUFBQSxNQUNBbVQsSUFBQUwsT0FKQTlTLE1BQUE4UyxTQVlBUyxhQUFBLFNBQUFDLE9BQ0EsSUFDQUEsTUFBQUEsTUFDQUQsYUFBQSxHQUVBLE1BQUEsQ0FDQXhHLElBQUEsU0FBQTBHLGFBQ0FGLGFBQUE3UCxLQUFBK1AsY0FFQUMsVUFBQSxXQUNBeGEsUUFBQTBMLFFBQUEyTyxhQUFBLFNBQUF0USxHQUNBQSxFQUFBcUYsV0FFQWtMLE1BQUEzRCxVQVFBOEQsV0FBQSxTQUFBQyxjQUFBQyxZQUFBQyxZQUNBLE1BQUEsQ0FDQTdRLEdBQUEyUSxjQUFBM1EsRUFBQTRRLFlBQUE1USxHQUFBNlEsV0FBQTdRLEVBQ0F3TSxHQUFBbUUsY0FBQW5FLEVBQUFvRSxZQUFBcEUsR0FBQXFFLFdBQUFyRSxJQUtBc0UsY0FBQSxTQUFBdkMsT0FFQSxNQUFBLENBQ0F6VixJQUFBLFdBQ0EsT0FBQXlWLE9BRUFsWCxJQUFBLFNBQUEySixLQUNBdU4sTUFBQXZOLEtBRUEwRSxNQUFBLFdBQ0E2SSxXQUFBM1YsS0FPQW1ZLGVBQUEsV0FDQSxJQUFBQyxXQUFBLEdBQ0EsTUFBQSxDQUNBNUosTUFBQSxTQUFBK0YsUUFDQTZELFdBQUE3RCxRQUVBclUsSUFBQSxXQUNBLE9BQUFrWSxZQUVBQyxLQUFBLFNBQUFDLFdBQ0FGLFdBQUFBLFdBQUF4TyxPQUFBLFNBQUErTCxPQUNBLE9BQUFBLE1BQUE5USxTQUFBeVQsYUFNQXpRLEtBQUEsU0FBQThOLE9BQ0EsSUFBQTRDLFdBQUFILFdBQUFqUixJQUFBLFNBQUF3TyxPQUNBLE9BQUFBLE1BQUE5USxTQUVBMFQsV0FBQTlPLFFBQUFrTSxNQUFBOVEsU0FBQSxHQUNBdVQsV0FBQXZRLEtBQUE4TixRQUdBNkMsTUFBQSxXQUNBSixXQUFBLE1BS0FLLGFBQUEsV0FDQSxJQUFBQSxhQUFBLEdBRUFDLFFBQUEsQ0FDQUMsa0JBQUEsU0FBQXRFLFFBQUF1RSxTQUFBM1MsTUFDQSxJQUFBcEksSUFBQXdXLFFBQUEsSUFBQXVFLFNBQUEsSUFBQTdPLEtBQUFDLE1BTUEsT0FMQXlPLGFBQUE1YSxLQUFBLENBQ0F3VyxRQUFBQSxRQUNBdUUsU0FBQUEsU0FDQTNTLEtBQUFBLE1BRUFwSSxLQUVBZ2IsZ0JBQUEsU0FBQWhiLEtBQ0EsT0FBQUEsSUFBQTRhLGFBQUE1YSxLQUFBNGEsY0FFQUssdUJBQUEsV0FDQSxPQUFBcFgsT0FBQUMsS0FBQThXLGNBQUE3VyxPQUFBLFNBQUFDLElBQUF1RixHQUNBLElBQUFnUCxJQUFBLENBQ0EvQixRQUFBb0UsYUFBQXJSLEdBQUFpTixRQUNBcE8sS0FBQXdTLGFBQUFyUixHQUFBbkIsTUFHQSxPQUFBd1MsYUFBQXJSLEdBQUFuQixNQUNBLEtBQUEsRUFDQW1RLElBQUEyQyxXQUFBTixhQUFBclIsR0FBQXdSLFNBQ0EsTUFDQSxLQUFBLEVBQ0F4QyxJQUFBMVMsUUFBQStVLGFBQUFyUixHQUFBd1IsU0FDQSxNQUNBLEtBQUEsRUFDQXhDLElBQUE0QyxZQUFBUCxhQUFBclIsR0FBQXdSLFNBSUEsT0FEQS9XLElBQUFnRyxLQUFBdU8sS0FDQXZVLEtBQ0EsS0FFQW9YLGtCQUFBLFNBQUFwYixLQUNBNGEsYUFBQTVhLFVBQUFtQyxHQUVBOE0sTUFBQSxXQUNBMkwsYUFBQSxLQUlBLE9BQUEvVyxPQUFBd1gsT0FBQVIsYUFqYUEsR0NBQSxXQUdBcmIsUUFBQUMsT0FBQSxPQUFBNEIsUUFBQSxrQkFHQSxTQUFBK1QsWUFDQSxNQUFBLENBQ0FrRyxhQUFBLFNBQUFDLGNBQ0EsSUFDQUMsU0FBQSxHQU1BLE9BTEFELGFBQUFFLGlCQUFBLFNBQUEsU0FBQUMsSUFDQWxjLFFBQUEwTCxRQUFBc1EsU0FBQSxTQUFBdmIsR0FDQUEsRUFBQTBiLEtBQUEscUJBR0EsQ0FDQUMsU0FBQSxTQUFBM0MsUUFDQXVDLFNBQUF4UixLQUFBaVAsU0FFQVAsS0FBQSxlQUtBbUQsWUFBQSxTQUFBcEcsT0FDQSxJQUFBQSxNQUFBQSxNQUNBcUcsT0FBQSxHQUNBLE1BQUEsQ0FDQUYsU0FBQSxTQUFBRyxNQUFBaEgsU0FDQVUsUUFHQXFHLE9BQUE5UixLQUFBK1IsT0FDQXRHLE1BQUFRLEdBQUE4RixNQUFBaEgsYUFJQWlILFlBQUEsU0FBQWxFLE9BQ0EsSUFBQUEsTUFBQUEsTUFDQWdFLE9BQUEsR0FDQSxNQUFBLENBQ0FGLFNBQUEsU0FBQUcsTUFBQWhILFNBQ0ErRyxPQUFBbFEsUUFBQW1RLFFBQUEsSUFJQUQsT0FBQTlSLEtBQUErUixPQUNBakUsTUFBQTdCLEdBQUE4RixNQUFBaEgsYUFLQWtILFlBQUEsU0FBQW5DLE9BQ0EsSUFBQUEsTUFBQUEsTUFDQWdDLE9BQUEsR0FDQSxNQUFBLENBQ0FGLFNBQUEsU0FBQUcsTUFBQWhILFNBQ0ErRyxPQUFBbFEsUUFBQW1RLFFBQUEsSUFJQUQsT0FBQTlSLEtBQUErUixPQUNBakMsTUFBQTdELEdBQUE4RixNQUFBaEgsZ0JBL0RBLEdDQUEsV0FHQXZWLFFBQUFDLE9BQUEsT0FBQTRCLFFBQUEsa0JBR0EsU0FBQStULFlBQ0EsTUFBQSxDQUNBOEcsWUFBQSxTQUFBekcsT0FDQSxJQUFBcUUsTUFBQSxJQUFBbkUsTUFBQXdHLE1BRUEsT0FEQTFHLE1BQUFwQyxJQUFBeUcsT0FDQUEsT0FFQXNDLGdCQUFBLFNBQUEzRyxNQUFBNEcsV0FDQSxJQUNBdFMsS0FEQXVTLFVBQUEsR0FFQSxNQUFBLENBQ0FDLGNBQUEsV0FDQSxJQUFBQyxNQUFBLElBQUE3RyxNQUFBOEcsTUFBQSxDQUNBelYsS0FBQSxXQUFBa0YsS0FBQUMsUUFFQW1RLFVBQUF0UyxLQUFBd1MsT0FDQXpTLEtBQUF1UyxVQUFBcFQsT0FBQSxFQUNBbVQsVUFBQWhKLElBQUFtSixRQUVBRSxhQUFBLFdBQ0EsT0FBQUosV0FFQUssV0FBQSxXQUNBLE9BQUFMLFVBQUF2UyxPQUVBNlMsV0FBQSxTQUFBQyxPQUNBOVMsS0FBQThTLE9BRUFDLFlBQUEsU0FBQUQsWUFDQTFhLElBQUEwYSxNQUNBUixVQUFBaEosSUFBQWlKLFVBQUFPLFFBRUFyZCxRQUFBMEwsUUFBQW9SLFVBQUEsU0FBQS9TLEdBQ0E4UyxVQUFBaEosSUFBQTlKLEtBR0E4UyxVQUFBbEcsUUFFQTRHLFlBQUEsU0FBQUYsWUFDQTFhLElBQUEwYSxNQUNBUCxVQUFBTyxPQUFBak8sU0FFQXBQLFFBQUEwTCxRQUFBb1IsVUFBQSxTQUFBL1MsR0FDQUEsRUFBQXFGLFdBR0F5TixVQUFBbEcsUUFHQTZHLGNBQUEsU0FBQUMsbUJBRUFsVCxNQURBdVMsVUFBQVcsbUJBQ0EvVCxPQUFBLFFBekRBLEdDQUEsV0FHQTFKLFFBQUFDLE9BQUEsT0FBQTRCLFFBQUEsa0JBR0EsU0FDQStULFdBQ0E4SCxnQkFDQUMsZ0JBQ0FDLGdCQUVBLElBQ0FDLGFBVUFDLFdBWEE5RyxRQUFBMkcsZ0JBQUEzRyxVQUlBK0csZUFBQSxDQUNBM0ksTUFBQSxFQUVBNEksT0FBQSxHQUNBQyxVQUFBLEdBS0EsTUFBQSxDQUVBQyxjQUFBLFNBQUFuRixLQUNBK0UsV0FBQS9FLEtBT0FvRixZQUFBLFNBQUFwRixLQUNBL0IsUUFBQW1CLEtBQUFZLE1BR0FxRixXQUFBLFdBQ0EsT0FBQXBILFFBQUFuVSxPQUdBd2IsWUFBQSxTQUFBelYsS0FBQW9SLFVBRUEsR0FBQTZELGFBQ0EsTUFBQSxDQUNBL1csT0FBQSxFQUNBd1IsTUFBQXVGLGNBR0EsSUFBQXZGLE1BQ0E0QixXQUFBNEQsV0FBQWpiLE1BRUEsT0FBQStGLE1BQ0EsS0FBQSxFQUNBMFAsTUFBQSxJQUFBbkMsTUFBQW1JLEtBQUEsQ0FDQU4sT0FBQSxDQUNBaEUsU0FBQWpRLEVBQ0FpUSxTQUFBekQsRUFDQXlELFNBQUFqUSxFQUNBaVEsU0FBQXpELEVBQ0F5RCxTQUFBalEsRUFDQWlRLFNBQUF6RCxFQUNBeUQsU0FBQWpRLEVBQ0FpUSxTQUFBekQsRUFDQXlELFNBQUFqUSxFQUNBaVEsU0FBQXpELEdBRUFnSSxPQUFBckUsV0FBQXFFLFFBQUEsUUFDQS9XLEtBQUEsT0FBQXdQLFFBQUFxQixTQUFBLFNBQUEsYUFDQW1HLFlBQUF0RSxXQUFBc0UsYUFBQSxFQUNBQyxLQUFBdkUsV0FBQXVFLEtBQ0FDLFdBQUEsRUFDQUMsUUFBQSxJQUVBLE1BQ0EsS0FBQSxFQUNBckcsTUFBQSxJQUFBbkMsTUFBQXlJLFFBQUEsQ0FDQTdVLEVBQUFpUSxTQUFBalEsRUFDQXdNLEVBQUF5RCxTQUFBekQsRUFDQXNJLE9BQUEsQ0FDQTlVLEVBQUEsRUFDQXdNLEVBQUEsR0FFQWdJLE9BQUFyRSxXQUFBcUUsUUFBQSxRQUNBL1csS0FBQSxVQUFBd1AsUUFBQXFCLFNBQUEsU0FBQSxXQUNBbUcsWUFBQXRFLFdBQUFzRSxhQUFBLEVBQ0FDLEtBQUF2RSxXQUFBdUUsS0FDQUMsV0FBQSxJQU1BLE1BQUEsQ0FDQTVYLE9BQUEsRUFDQXdSLE1BSkF1RixhQUFBdkYsUUFZQXdHLFVBQUEsU0FBQTlFLFNBQUErRSxVQUFBQyxNQUtBLEdBQUFuQixhQUNBLE9BQUFBLGFBQUFvQixXQUNBLElBQUEsT0FHQXhiLEtBQUF5YixjQUFBbEYsU0FBQTZELGFBQUFrQixVQUFBQyxNQUVBLE1BQ0EsSUFBQSxVQUNBbkIsYUFBQWdCLE9BQUEsQ0FFQTlVLEVBQUF5SixLQUFBMkwsSUFBQW5GLFNBQUFqUSxFQUFBOFQsYUFBQTlULEtBQ0F3TSxFQUFBL0MsS0FBQTJMLElBQ0FKLFVBQ0EvRSxTQUFBalEsRUFBQThULGFBQUE5VCxJQUNBaVEsU0FBQXpELEVBQUFzSCxhQUFBdEgsU0FRQTJJLGNBQUEsU0FBQWxGLFNBQUExQixNQUFBOEcsVUFBQUosTUFDQSxJQUFBaEIsT0FBQTFGLE1BQUEwRixTQWtCQSxPQWZBQSxPQUFBLEdBQUFoRSxTQUFBalEsRUFDQWlVLE9BQUEsR0FBQW9CLFVBQ0E1TCxLQUFBMkwsSUFBQW5CLE9BQUEsSUFBQWhFLFNBQUFqUSxFQUFBaVUsT0FBQSxLQUNBaEUsU0FBQXpELEVBSUF5SCxPQUFBLEdBQUFvQixVQUNBNUwsS0FBQTJMLElBQUFuQixPQUFBLElBQUFoRSxTQUFBalEsRUFBQWlVLE9BQUEsS0FDQWhFLFNBQUF6RCxFQUdBeUgsT0FBQSxHQUFBaEUsU0FBQWpRLEVBR0FpVixNQUNBLElBQUEsVUFDQTFHLE1BQUErRyxLQUFBLENBQUEsR0FBQSxLQUNBLE1BQ0EsSUFBQSxVQUNBL0csTUFBQWlHLE9BQUEsUUFDQWpHLE1BQUFvRyxXQUFBLEdBS0FwRyxNQUFBMEYsT0FBQUEsU0FJQXNCLGFBQUEsV0FDQXpCLGtCQUFBbGIsRUFDQW9iLGVBQUEsQ0FDQTNJLE1BQUEsRUFDQTRJLE9BQUEsR0FDQUMsVUFBQSxJQUtBc0IsY0FBQSxTQUFBdkgsV0FDQSxJQUFBd0gsZ0JBQUEzQixhQUFBRyxTQVNBLE9BUkF2USxTQUFBYyxLQUFBa1IsTUFBQUMsT0FBQSxVQUNBN0IsY0FBQUEsYUFBQXpPLFNBQ0F5TyxrQkFBQWxiLEVBQ0FvYixlQUFBLENBQ0EzSSxNQUFBLEVBQ0E0SSxPQUFBLEdBQ0FDLFVBQUEsR0FFQXVCLGlCQVNBRyxjQUFBLFNBQUEzRixTQUFBeEMsU0FBQW9JLGdCQUNBLElBQUE3QixlQUFBM0ksT0FBQXlJLGFBQUEsQ0FFQSxJQUFBM0QsV0FBQTRELFdBQUFqYixNQTBCQSxPQXpCQWtiLGVBQUFDLE9BQUEsQ0FBQWhFLFNBQUFqUSxFQUFBaVEsU0FBQXpELEdBSUFzSCxhQUZBK0IsZUFFQSxJQUFBekosTUFBQW1JLEtBQUEsQ0FDQTlXLEtBQUEsaUJBQUF3UCxRQUFBcUIsU0FBQSxXQUFBLFlBQ0EyRixPQUFBRCxlQUFBQyxPQUNBUyxLQUFBdkUsV0FBQXVFLEtBQ0FGLE9BQUFyRSxXQUFBcUUsUUFBQSxRQUNBQyxZQUFBdEUsV0FBQXNFLGFBQUEsSUFJQSxJQUFBckksTUFBQW1JLEtBQUEsQ0FDQTlXLEtBQUFnUSxTQUNBLFdBQUFSLFFBQUFxQixTQUFBLFNBQUEsWUFDQSxVQUFBckIsUUFBQXFCLFNBQUEsU0FBQSxXQUNBMkYsT0FBQUQsZUFBQUMsT0FDQVMsS0FBQXZFLFdBQUF1RSxLQUNBRixPQUFBckUsV0FBQXFFLFFBQUEsUUFDQUMsWUFBQXRFLFdBQUFzRSxhQUFBLElBSUFULGVBQUEzSSxNQUFBLEVBQ0EsQ0FDQXRPLE9BQUEsRUFDQTJRLFFBQUFvRyxjQUlBLE9BQUErQixnQkFDQTdCLGVBQUFFLFVBQUEsRUFDQUosYUFBQWEsV0FBQSxHQUNBLENBQ0E1WCxPQUFBLEVBQ0EyUSxRQUFBb0csZUFNQXBhLEtBQUFvYyxlQUFBN0YsV0FFQStELGVBQUFDLE9BQUF2VCxRQUNBLEdBRUFzVCxlQUFBQyxPQUFBeFQsS0FDQXVULGVBQUFDLE9BQUEsR0FDQUQsZUFBQUMsT0FBQSxJQUVBSCxhQUFBRyxPQUFBRCxlQUFBQyxRQUNBRCxlQUFBRSxVQUFBLEVBQ0FKLGFBQUFjLFFBQUEsR0FDQWQsYUFBQWEsV0FBQSxHQUNBLENBQ0E1WCxPQUFBLEVBQ0EyUSxRQUFBb0csZ0JBR0FFLGVBQUFDLE9BQUF2VCxRQUNBLEdBRUFzVCxlQUFBQyxPQUFBeFQsS0FBQXdQLFNBQUFqUSxFQUFBaVEsU0FBQXpELEdBQ0FzSCxhQUFBRyxPQUFBRCxlQUFBQyxhQUNBRCxlQUFBRSxVQUFBLEtBS0E2QixZQUFBLFNBQUE5RixTQUFBeEMsVUFDQXFHLGVBQ0FyRyxVQUVBdUcsZUFBQUMsT0FBQXhULEtBQUF3UCxTQUFBalEsRUFBQWlRLFNBQUF6RCxHQUNBc0gsYUFBQUcsT0FBQUQsZUFBQUMsU0FHQUQsZUFBQUUsVUFDQUYsZUFBQUMsT0FBQXhULEtBQUF3UCxTQUFBalEsRUFBQWlRLFNBQUF6RCxHQUNBd0gsZUFBQUUsVUFBQSxFQUNBSixhQUFBRyxPQUFBRCxlQUFBQyxVQUVBRCxlQUFBQyxPQUFBRCxlQUFBQyxPQUFBdFUsT0FBQSxHQUNBc1EsU0FBQWpRLEVBQ0FnVSxlQUFBQyxPQUFBRCxlQUFBQyxPQUFBdFUsT0FBQSxHQUNBc1EsU0FBQXpELEVBQ0FzSCxhQUFBRyxPQUFBRCxlQUFBQyxXQU1BK0IsV0FBQSxTQUFBL0YsU0FBQXBSLE1BQ0EsR0FBQWlWLGFBQ0EsTUFBQSxDQUNBL1csT0FBQSxFQUNBNlEsS0FBQWtHLGNBSUEsSUFBQWxHLEtBQ0F1QyxXQUFBNEQsV0FBQWpiLE1BRUEsT0FBQStGLE1BQ0EsSUFBQSxPQUNBK08sS0FBQSxJQUFBeEIsTUFBQW1JLEtBQUEsQ0FDQTlXLEtBQUEsYUFBQXdQLFFBQUFxQixTQUFBLFdBQUEsUUFDQTJGLE9BQUEsQ0FBQWhFLFNBQUFqUSxFQUFBaVEsU0FBQXpELEdBQ0FpSSxZQUFBdEUsV0FBQXNFLGFBQUEsRUFDQUQsT0FBQXJFLFdBQUFxRSxRQUFBLFFBQ0FHLFdBQUEsSUFFQSxNQUNBLElBQUEsY0FDQS9HLEtBQUEsSUFBQXhCLE1BQUE2SixNQUFBLENBQ0F4WSxLQUFBLFlBQUF3UCxRQUFBcUIsU0FBQSxXQUFBLGVBQ0EyRixPQUFBLENBQUFoRSxTQUFBalEsRUFBQWlRLFNBQUF6RCxHQUNBaUksWUFBQSxFQUNBRCxPQUFBckUsV0FBQXFFLFFBQUEsUUFDQUUsS0FBQXZFLFdBQUF1RSxNQUFBLFFBQ0FDLFdBQUEsRUFDQXVCLGNBQUEsR0FDQUMsYUFBQSxLQUVBLE1BRUEsSUFBQSxjQUNBdkksS0FBQSxJQUFBeEIsTUFBQTZKLE1BQUEsQ0FDQXhZLEtBQ0Esa0JBQUF3UCxRQUFBcUIsU0FBQSxXQUFBLGVBQ0EyRixPQUFBLENBQUFoRSxTQUFBalEsRUFBQWlRLFNBQUF6RCxHQUNBaUksWUFBQXRFLFdBQUFzRSxhQUFBLEVBQ0FELE9BQUFyRSxXQUFBcUUsUUFBQSxRQUNBRSxLQUFBdkUsV0FBQXVFLE1BQUEsUUFDQUMsV0FBQSxFQUNBdUIsY0FBQSxHQUNBQyxhQUFBLEdBQ0FDLG9CQUFBLElBS0EsTUFBQSxDQUNBclosT0FBQSxFQUNBNlEsS0FIQWtHLGFBQUFsRyxPQU1BeUksU0FBQSxTQUFBcEcsVUFDQSxHQUFBNkQsYUFBQSxDQUNBLElBQUFHLE9BQUFILGFBQUFHLFNBQ0FBLE9BQUEsR0FBQWhFLFNBQUFqUSxFQUNBaVUsT0FBQSxHQUFBaEUsU0FBQXpELEVBQ0FzSCxhQUFBRyxPQUFBQSxVQUlBcUMsaUJBQUEsU0FBQXJHLFVBQ0EsR0FBQTZELGFBQUEsQ0FDQSxJQUFBeUMsY0FBQXpDLGFBQUFHLFNBRUF1QyxFQUFBLENBQ0EsSUFBQUQsY0FBQSxHQUFBQSxjQUFBLElBQUFBLGNBQUEsR0FDQSxJQUFBQSxjQUFBLEdBQUFBLGNBQUEsSUFBQUEsY0FBQSxJQUlBQSxjQUFBLEdBQUFBLGNBQUEsR0FBQUEsY0FBQSxHQUNBQSxjQUFBLEdBQUFBLGNBQUEsR0FBQUEsY0FBQSxHQUdBQSxjQUFBLEdBQUFBLGNBQUEsR0FBQUEsY0FBQSxHQUNBQSxjQUFBLEdBQUFBLGNBQUEsR0FBQUEsY0FBQSxHQVFBLE9BTEFBLGNBQUE5VixLQUFBK1YsRUFBQSxHQUFBQSxFQUFBLElBRUExQyxhQUFBRyxPQUFBc0MsZUFDQXpDLGFBQUEyQyxRQUFBLEtBRUEsQ0FDQTFaLE9BQUEsRUFDQTZRLEtBQUFrRyxjQUlBLElBQUEzRCxXQUFBNEQsV0FBQWpiLE1BRUFpVixPQUFBLElBQUEzQixNQUFBbUksS0FBQSxDQUNBOVcsS0FBQSxTQUFBd1AsUUFBQXFCLFNBQUEsV0FBQSxVQUNBb0ksU0FBQSxRQUNBekMsT0FBQSxDQUFBaEUsU0FBQWpRLEVBQUFpUSxTQUFBekQsR0FDQWlJLFlBQUF0RSxXQUFBc0UsYUFBQSxFQUNBRCxPQUFBckUsV0FBQXFFLFFBQUEsUUFDQUcsV0FBQSxJQUlBLE1BQUEsQ0FDQTVYLE9BQUEsRUFDQTZRLEtBSkFrRyxhQUFBL0YsU0FRQTRJLGVBQUEsU0FBQTFHLFVBQ0EsR0FBQTZELGFBQUEsQ0FDQSxJQUFBRyxPQUFBSCxhQUFBRyxTQUNBQSxPQUFBLEdBQUFoRSxTQUFBalEsRUFDQWlVLE9BQUEsR0FBQWhFLFNBQUF6RCxFQUNBc0gsYUFBQUcsT0FBQUEsVUFNQTJDLFdBQUEsU0FBQS9HLE9BQ0EsSUFBQWdILFVBQUEsSUFBQXpLLE1BQUEwSyxLQUFBLENBQ0E5VyxFQUFBNlAsTUFBQUksU0FBQWpRLEVBQ0F3TSxFQUFBcUQsTUFBQUksU0FBQXpELEVBQ0EvTyxLQUFBLE9BQ0E4SSxLQUFBLG1CQUNBeEMsTUFBQThMLE1BQUE5TCxNQUNBZ1QsU0FBQSxHQUNBQyxXQUFBLFVBQ0F0QyxLQUFBLFVBRUEsT0FBQW1DLFdBR0FJLGdCQUFBLFdBQ0EsSUFBQUMsVUFBQSxJQUFBOUssTUFBQThHLE1BQUEsQ0FDQXpWLEtBQUEsWUFBQXdQLFFBQUFxQixTQUFBLFdBQUEsUUFDQXFHLFdBQUEsSUFHQSxPQUFBdUMsV0FJQTFKLFdBQUEsU0FBQXRCLE1BQUFxRSxPQUNBLElBR0EzQyxLQUhBcUcsT0FBQSxHQUNBa0QsUUFBQSxFQUNBOUwsTUFBQSxFQUVBLE9BQUEsU0FBQTRFLFNBQUE1WSxJQUFBK2YsTUFHQSxHQUFBQSxLQUdBLE9BRkF4SixLQUFBeUosZUFDQTlHLE1BQUEzRCxPQUlBcUQsU0FBQSxDQUNBalEsRUFBQWlRLFNBQUFqUSxFQUFBa00sTUFBQW9MLFFBQUF0WCxFQUNBd00sRUFBQXlELFNBQUF6RCxFQUFBTixNQUFBb0wsUUFBQTlLLEdBR0EySyxTQUNBOUwsTUFBQWhVLEtBQ0E0YyxPQUFBeFQsS0FBQXdQLFNBQUFqUSxFQUFBaVEsU0FBQXpELEdBQ0FvQixLQUFBLElBQUF4QixNQUFBbUksS0FBQSxDQUNBTixPQUFBQSxPQUNBUyxLQUFBLE9BQ0FGLE9BQUEsUUFDQUMsWUFBQSxFQUNBYSxLQUFBLENBQUEsRUFBQSxLQUVBakssTUFBQSxFQUNBa0YsTUFBQXpHLElBQUE4RCxPQUNBdkMsT0FDQWhVLEtBQ0E0YyxPQUFBLEdBQUFoRSxTQUFBalEsRUFDQWlVLE9BQUEsR0FBQWhFLFNBQUF6RCxFQUNBb0IsS0FBQXFHLE9BQUFBLFFBQ0FrRCxRQUFBLEVBQ0F0TCxXQUFBK0MsV0FBQSxhQUFBaEIsUUFFQXFHLE9BQUEsR0FBQWhFLFNBQUFqUSxFQUNBaVUsT0FBQSxHQUFBaEUsU0FBQXpELEVBQ0FvQixLQUFBcUcsT0FBQUEsV0FJQTFELE1BQUEzRCxTQUlBa0osZUFBQSxTQUFBN0YsVUFDQSxJQUVBc0gsZ0JBQUF2RCxlQUFBQyxPQUFBLEdBRkEsR0FHQXVELGdCQUFBeEQsZUFBQUMsT0FBQSxHQUhBLEdBSUF3RCxnQkFBQXpELGVBQUFDLE9BQUEsR0FKQSxHQUtBeUQsZ0JBQUExRCxlQUFBQyxPQUFBLEdBTEEsR0FNQSxPQUFBc0QsZ0JBQUF0SCxTQUFBalEsR0FDQXlYLGdCQUFBeEgsU0FBQWpRLEdBQ0F3WCxnQkFBQXZILFNBQUF6RCxHQUFBa0wsZ0JBQUF6SCxTQUFBekQsR0FNQW1MLGlCQUFBLFNBQUFwSCxPQUNBLElBQUFxSCxVQUFBckgsTUFBQXNILEtBQUEsU0FBQXJkLE9BQUEsU0FBQUMsSUFBQXVGLEdBTUEsTUFMQSxXQUFBb0IsS0FBQXBCLEVBQUF2QyxTQUNBeEgsUUFBQTBMLFFBQUEzQixFQUFBOFgsY0FBQSxTQUFBQyxPQUNBdGQsSUFBQWdHLEtBQUFzWCxTQUdBdGQsS0FDQSxJQUNBLE9BQUFtZCxXQUdBSSxhQUFBLFNBQUF6SCxNQUFBMEQsUUFDQSxJQUFBMkQsVUFBQWxlLEtBQUFpZSxpQkFBQXBILE9BS0EwSCxLQUhBaEUsT0FBQSxHQUFBQSxPQUFBLEdBQ0FBLE9BQUEsR0FBQUEsT0FBQSxHQUVBLENBQ0FqVSxFQUFBaVUsT0FBQSxHQUFBQSxPQUFBLEdBQUFBLE9BQUEsR0FBQUEsT0FBQSxHQUNBekgsRUFBQXlILE9BQUEsR0FBQUEsT0FBQSxHQUFBQSxPQUFBLEdBQUFBLE9BQUEsS0FHQWlFLElBQUEsQ0FDQWxZLEVBQUFpVSxPQUFBLEdBQUFBLE9BQUEsR0FBQUEsT0FBQSxHQUFBQSxPQUFBLEdBQ0F6SCxFQUFBeUgsT0FBQSxHQUFBQSxPQUFBLEdBQUFBLE9BQUEsR0FBQUEsT0FBQSxJQUdBa0UsZUFBQXplLEtBQUF5ZSxlQUNBQyxlQUFBUixVQUFBcFYsT0FBQSxTQUFBeEMsR0FDQSxJQUFBa1IsVUFBQWxSLEVBQUF2QyxPQUNBLEdBQ0EsUUFBQTJELEtBQUE4UCxZQUNBLFdBQUE5UCxLQUFBOFAsWUFDQSxZQUFBOVAsS0FBQThQLFlBQ0EsaUJBQUE5UCxLQUFBOFAsV0FDQSxDQUlBLElBSEEsSUFBQStDLE9BQUFqVSxFQUFBaVUsU0FDQW9FLGVBQUFyWSxFQUFBaVEsV0FDQXFJLFNBQUEsR0FDQTFRLEVBQUEsRUFBQUEsRUFBQXFNLE9BQUF0VSxPQUFBLEVBQUFpSSxHQUFBLEVBRUEwUSxTQUFBN1gsS0FBQSxDQUNBd1QsT0FBQXJNLEdBQUF5USxlQUFBclksRUFDQWlVLE9BQUFyTSxFQUFBLEdBQUF5USxlQUFBN0wsSUFJQSxPQUFBMkwsZUFDQSxDQUNBRixJQUFBQSxJQUNBQyxJQUFBQSxLQUVBSSxTQUNBLGFBSUEsR0FBQSxRQUFBbFgsS0FBQThQLFdBQUEsQ0FJQSxJQUhBLElBQUErQyxPQUFBalUsRUFBQWlVLFNBQ0FvRSxlQUFBclksRUFBQWlRLFdBQ0FxSSxTQUFBLEdBQ0ExUSxFQUFBLEVBQUFBLEVBQUFxTSxPQUFBdFUsT0FBQWlJLEdBQUEsRUFFQTBRLFNBQUE3WCxLQUFBLENBQ0F3VCxPQUFBck0sR0FBQXlRLGVBQUFyWSxFQUNBaVUsT0FBQXJNLEVBQUEsR0FBQXlRLGVBQUE3TCxJQUlBLE9BQUEyTCxlQUNBLENBQ0FGLElBQUFBLElBQ0FDLElBQUFBLEtBRUFJLFNBQ0EsYUFJQSxRQUFBLFdBQUFsWCxLQUFBOFAsWUFDQWlILGVBQ0EsQ0FDQUYsSUFBQUEsSUFDQUMsSUFBQUEsS0FFQWxZLEVBQUFpUSxXQUNBLGFBUUEsT0FBQW1JLGdCQUdBRCxlQUFBLFNBQUFJLE1BQUFDLEtBQUEzWixNQUVBLEdBQUEsY0FBQUEsS0FBQSxDQUNBLElBQUEsSUFBQStJLEVBQUEsRUFBQUEsRUFBQTRRLEtBQUE3WSxPQUFBaUksSUFDQSxHQUNBNFEsS0FBQTVRLEdBQUEsSUFBQTJRLE1BQUFOLElBQUFqWSxHQUNBd1ksS0FBQTVRLEdBQUEsSUFBQTJRLE1BQUFMLElBQUFsWSxHQUNBd1ksS0FBQTVRLEdBQUEsSUFBQTJRLE1BQUFOLElBQUF6TCxHQUFBZ00sS0FBQTVRLEdBQUEsSUFBQTJRLE1BQUFMLElBQUExTCxFQUVBLE9BQUEsRUFHQSxPQUFBLEVBR0EsR0FBQSxZQUFBM04sS0FFQSxPQUFBMlosS0FBQXhZLEdBQUF1WSxNQUFBTixJQUFBalksR0FDQXdZLEtBQUF4WSxHQUFBdVksTUFBQUwsSUFBQWxZLEdBQ0F3WSxLQUFBaE0sR0FBQStMLE1BQUFOLElBQUF6TCxHQUFBZ00sS0FBQWhNLEdBQUErTCxNQUFBTCxJQUFBMUwsTUE1bUJBLEdDQUEsV0FHQXZXLFFBQUFDLE9BQUEsT0FBQTRCLFFBQUEsaUJBR0EsU0FBQStULFdBQUE4SCxpQkFDQSxNQUFBLENBTUE4RSxZQUFBLFNBQUF4RSxPQUFBcUQsT0FLQSxJQUpBLElBQ0FuVSxPQURBdVYsSUFBQSxFQUVBQyxhQUFBLEdBQ0FDLE1BQUEsR0FDQWhSLEVBQUEsRUFBQUEsRUFBQXFNLE9BQUF0VSxPQUFBaUksSUFDQWdSLE1BQUFqWixPQUFBLEVBQ0FpWixNQUFBblksS0FBQXdULE9BQUFyTSxLQUVBK1EsYUFBQWxZLEtBQUEsQ0FDQVQsRUFBQTRZLE1BQUEsR0FDQXBNLEVBQUFvTSxNQUFBLE1BRUFBLE1BQUEsSUFDQW5ZLEtBQUF3VCxPQUFBck0sS0FHQSxJQUFBaVIsRUFBQUYsYUFBQWhaLE9BRUFnWixhQUFBLElBQUFBLGFBQUFBLGFBQUFoWixPQUFBLEtBQ0FnWixhQUFBQSxhQUFBblIsT0FBQW1SLGFBQUEsS0FFQSxJQUFBLElBQUEvUSxFQUFBLEVBQUFBLEVBQUFpUixFQUFBalIsSUFDQThRLEtBQ0FDLGFBQUEvUSxHQUFBNUgsRUFBQTJZLGFBQUEvUSxFQUFBLEdBQUE0RSxFQUNBbU0sYUFBQS9RLEdBQUE0RSxFQUFBbU0sYUFBQS9RLEVBQUEsR0FBQTVILEVBT0EsT0FKQW1ELE9BREFtVSxNQUNBN04sS0FBQTJMLElBQUFzRCxLQUFBLEVBQUFwQixNQUVBN04sS0FBQTJMLElBQUFzRCxLQUFBLEVBRUFJLE9BQUFDLFdBQUE1VixRQUFBNlYsUUFBQSxJQUlBQyxjQUFBLFNBQUFuVixPQUFBQyxNQUFBdVQsT0FDQSxJQUFBNEIsS0FBQXBWLE9BQUFDLE1BQUF1VCxNQUNBLE9BQUE0QixNQUlBQyxZQUFBLFNBQUFDLE1BQUE5QixPQUNBLElBQUE0QixLQUFBelAsS0FBQTRQLEdBQUFELE1BQUFwWixFQUFBb1osTUFBQTVNLEVBQ0FySixPQUFBbVUsTUFBQTRCLEtBQUE1QixNQUFBNEIsS0FDQSxPQUFBSixPQUFBQyxXQUFBNVYsUUFBQTZWLFFBQUEsSUFHQU0sa0JBQUEsU0FBQXBOLE1BQUFxRSxNQUFBaEQsU0FDQSxJQUFBK0ssU0FBQSxHQUVBckYsTUFBQSxJQUFBN0csTUFBQThHLE1BQUEsQ0FDQXpWLEtBQUEsaUJBRUEsTUFBQSxDQUNBcEcsSUFBQSxTQUFBeWQsUUFDQSxJQUFBeUUsZ0JBQUFoTSxRQUFBMEMsV0FDQXFJLFNBQUE3WCxLQUNBLENBQUE4WSxnQkFBQXZaLEVBQUE4VSxPQUFBOVUsRUFBQXVaLGdCQUFBL00sR0FDQSxDQUFBK00sZ0JBQUF2WixFQUFBOFUsT0FBQTlVLEVBQUF1WixnQkFBQS9NLEdBQ0EsQ0FBQStNLGdCQUFBdlosRUFBQXVaLGdCQUFBL00sRUFBQXNJLE9BQUF0SSxHQUNBLENBQUErTSxnQkFBQXZaLEVBQUF1WixnQkFBQS9NLEVBQUFzSSxPQUFBdEksSUFFQSxJQUFBZ04sSUFBQSxFQTJIQSxPQTFIQXZqQixRQUFBMEwsUUFBQTJXLFNBQUEsU0FBQXRZLEVBQUF5WixRQUNBLElBQUFuTSxPQUFBLElBQUFsQixNQUFBc04sT0FBQSxDQUNBMVosRUFBQUEsRUFBQSxHQUNBd00sRUFBQXhNLEVBQUEsR0FDQThVLE9BQUEsRUFBQXZFLE1BQUFvSixTQUNBbGMsTUFDQWdjLE9BQUFELEtBQUFJLFdBQ0EsS0FDQUgsT0FBQUQsSUFBQSxHQUFBSSxXQUVBbEYsS0FBQSxRQUNBRixPQUFBLFFBQ0FDLFlBQUEsRUFBQWxFLE1BQUFvSixTQUNBRSxjQUFBLFNBQUFDLEtBQ0EsTUFBQSxDQUNBOVosRUFBQXlaLE9BQUEsRUFBQS9mLEtBQUFxZ0Isc0JBQUEvWixFQUFBOFosSUFBQTlaLEVBQ0F3TSxFQUFBaU4sUUFBQSxFQUFBL2YsS0FBQXFnQixzQkFBQXZOLEVBQUFzTixJQUFBdE4sSUFHQW1JLFdBQUEsSUFFQTZFLE1BQ0EsSUFBQVEsWUFBQXJHLGdCQUFBbEIsWUFBQW5GLFFBQ0EwTSxZQUFBM0gsU0FBQSx1QkFBQSxXQUNBLElBQUE0SCxlQUFBMU0sUUFBQXVILFNBQ0FvRixlQUFBNU0sT0FBQTdQLE9BQ0EwYyxZQUFBLEVBQ0EsT0FBQUQsZ0JBQ0EsSUFBQSxNQUNBQyxXQUNBNU0sUUFBQTBDLFdBQUFqUSxFQUFBc04sT0FBQXROLElBQUEsRUFDQXVOLFFBQUF1SCxPQUFBLENBQ0E5VSxFQUFBeUosS0FBQTJMLElBQUE3SCxRQUFBMEMsV0FBQWpRLEVBQUFzTixPQUFBdE4sS0FDQXdNLEVBQUF5TixlQUFBek4sSUFFQXZXLFFBQUEwTCxRQUFBc1IsTUFBQW1ILFNBQUEsU0FBQUMsR0FDQSxRQUFBQSxFQUFBNWMsU0FDQTBjLFdBR0FFLEVBQUFyYSxFQUFBdU4sUUFBQTBDLFdBQUFqUSxFQUFBdU4sUUFBQXVILFNBQUE5VSxHQUZBcWEsRUFBQXJhLEVBQUF1TixRQUFBMEMsV0FBQWpRLEVBQUF1TixRQUFBdUgsU0FBQTlVLE1BTUEsTUFDQSxJQUFBLE1BQ0FtYSxXQUNBNU0sUUFBQTBDLFdBQUFqUSxFQUFBc04sT0FBQXROLElBQUEsRUFDQXVOLFFBQUF1SCxPQUFBLENBQ0E5VSxFQUFBeUosS0FBQTJMLElBQUE3SCxRQUFBMEMsV0FBQWpRLEVBQUFzTixPQUFBdE4sS0FDQXdNLEVBQUF5TixlQUFBek4sSUFFQXZXLFFBQUEwTCxRQUFBc1IsTUFBQW1ILFNBQUEsU0FBQUMsR0FDQSxRQUFBQSxFQUFBNWMsU0FDQTBjLFdBR0FFLEVBQUFyYSxFQUFBdU4sUUFBQTBDLFdBQUFqUSxFQUFBdU4sUUFBQXVILFNBQUE5VSxHQUZBcWEsRUFBQXJhLEVBQUF1TixRQUFBMEMsV0FBQWpRLEVBQUF1TixRQUFBdUgsU0FBQTlVLE1BTUEsTUFDQSxJQUFBLE1BQ0FtYSxXQUNBNU0sUUFBQTBDLFdBQUF6RCxFQUFBYyxPQUFBZCxJQUFBLEVBQ0FlLFFBQUF1SCxPQUFBLENBQ0E5VSxFQUFBaWEsZUFBQWphLEVBQ0F3TSxFQUFBL0MsS0FBQTJMLElBQUE3SCxRQUFBMEMsV0FBQXpELEVBQUFjLE9BQUFkLE9BRUF2VyxRQUFBMEwsUUFBQXNSLE1BQUFtSCxTQUFBLFNBQUFDLEdBQ0EsUUFBQUEsRUFBQTVjLFNBQ0EwYyxXQUdBRSxFQUFBN04sRUFBQWUsUUFBQTBDLFdBQUF6RCxFQUFBZSxRQUFBdUgsU0FBQXRJLEdBRkE2TixFQUFBN04sRUFBQWUsUUFBQTBDLFdBQUF6RCxFQUFBZSxRQUFBdUgsU0FBQXRJLE1BTUEsTUFDQSxJQUFBLE1BQ0EyTixXQUNBNU0sUUFBQTBDLFdBQUF6RCxFQUFBYyxPQUFBZCxJQUFBLEVBQ0FlLFFBQUF1SCxPQUFBLENBQ0E5VSxFQUFBaWEsZUFBQWphLEVBQ0F3TSxFQUFBL0MsS0FBQTJMLElBQUE3SCxRQUFBMEMsV0FBQXpELEVBQUFjLE9BQUFkLE9BRUF2VyxRQUFBMEwsUUFBQXNSLE1BQUFtSCxTQUFBLFNBQUFDLEdBQ0EsUUFBQUEsRUFBQTVjLFNBQ0EwYyxXQUdBRSxFQUFBN04sRUFBQWUsUUFBQTBDLFdBQUF6RCxFQUFBZSxRQUFBdUgsU0FBQXRJLEdBRkE2TixFQUFBN04sRUFBQWUsUUFBQTBDLFdBQUF6RCxFQUFBZSxRQUFBdUgsU0FBQXRJLE1BUUErRCxNQUFBM0QsT0FFQVcsUUFBQTZFLEtBQUEsc0JBS0E0SCxZQUFBM0gsU0FBQSxjQUFBLFNBQUFoUyxHQUNBQSxFQUFBaWEsT0FBQXhGLE9BQUEsRUFBQXZFLE1BQUFvSixVQUNBdFosRUFBQWlhLE9BQUE3RixZQUFBLEVBQUFsRSxNQUFBb0osVUFDQXBKLE1BQUEzRCxTQUdBb04sWUFBQTNILFNBQUEsYUFBQSxTQUFBaFMsR0FDQXFELFNBQUFjLEtBQUFrUixNQUFBQyxPQUFBLFNBRUFxRSxZQUFBM0gsU0FBQSxhQUFBLFNBQUFoUyxHQUNBcUQsU0FBQWMsS0FBQWtSLE1BQUFDLE9BQUEsWUFFQTFDLE1BQUFuSixJQUFBd0QsVUFFQUMsUUFBQTZFLEtBQUEscUJBRUEsRUFDQTdCLE1BQUF6RyxJQUFBbUosT0FDQUEsT0FHQXNILFNBQUEsV0FDQSxPQUFBdEgsT0FFQW9FLFFBQUEsV0FDQXBFLE1BQUFvRSxhQU1BbUQsa0JBQUEsU0FBQXRPLE1BQUFxRSxNQUFBN0MsUUFBQStNLGFBRUEsSUFBQW5DLFNBQUEsR0FFQXJGLE1BQUEsSUFBQTdHLE1BQUE4RyxNQUFBLENBQ0F6VixLQUFBLGlCQUVBaVEsUUFBQUEsUUFDQSxNQUFBLENBRUFyVyxJQUFBLFNBQUE0YyxRQUNBLElBQUEsSUFBQXJNLEVBQUEsRUFBQUEsRUFBQXFNLE9BQUF0VSxPQUFBLEVBQUFpSSxHQUFBLEVBRUEwUSxTQUFBN1gsS0FBQSxDQUFBd1QsT0FBQXJNLEdBQUFxTSxPQUFBck0sRUFBQSxLQUlBLElBQUE0UixJQUFBLEVBd0hBLE9BdEhBdmpCLFFBQUEwTCxRQUFBMlcsU0FBQSxTQUFBdFksRUFBQXlaLFFBQ0EsSUFBQW5NLE9BQUEsSUFBQWxCLE1BQUFzTixPQUFBLENBQ0ExWixFQUFBQSxFQUFBLEdBQ0F3TSxFQUFBeE0sRUFBQSxHQUNBOFUsT0FBQSxFQUFBdkUsTUFBQW9KLFNBQ0FsYyxNQUNBZ2MsT0FBQUQsS0FBQUksV0FDQSxLQUNBSCxPQUFBRCxJQUFBLEdBQUFJLFdBRUFsRixLQUFBLFFBQ0FGLE9BQUEsUUFDQUMsWUFBQSxFQUFBbEUsTUFBQW9KLFNBQ0FoRixXQUFBLElBRUE2RSxNQUdBLElBQUFRLFlBQUFyRyxnQkFBQWxCLFlBQUFuRixRQUNBME0sWUFBQTNILFNBQUEsdUJBQUEsU0FBQWhTLEdBQ0EsR0FBQW9hLFlBQUEsQ0FFQSxJQUFBUCxlQUFBNU0sT0FBQTdQLE9BSUEsT0FBQXljLGdCQUNBLElBQUEsTUFDQTVCLFNBQUEsR0FBQSxDQUFBaEwsT0FBQXROLElBQUFzTixPQUFBZCxLQUNBOEwsU0FBQSxHQUFBLEdBQUFoTCxPQUFBZCxJQUNBOEwsU0FBQSxHQUFBLEdBQUFoTCxPQUFBdE4sSUFDQS9KLFFBQUEwTCxRQUFBc1IsTUFBQW1ILFNBQUEsU0FBQUMsR0FFQSxRQUFBQSxFQUFBNWMsUUFDQTRjLEVBQUFyYSxFQUFBc04sT0FBQXROLEtBR0EsUUFBQXFhLEVBQUE1YyxRQUNBNGMsRUFBQTdOLEVBQUFjLE9BQUFkLE9BSUEsTUFDQSxJQUFBLE1BQ0E4TCxTQUFBLEdBQUEsQ0FBQWhMLE9BQUF0TixJQUFBc04sT0FBQWQsS0FDQThMLFNBQUEsR0FBQSxHQUFBaEwsT0FBQWQsSUFDQThMLFNBQUEsR0FBQSxHQUFBaEwsT0FBQXROLElBQ0EvSixRQUFBMEwsUUFBQXNSLE1BQUFtSCxTQUFBLFNBQUFDLEdBRUEsUUFBQUEsRUFBQTVjLFFBQ0E0YyxFQUFBcmEsRUFBQXNOLE9BQUF0TixLQUdBLFFBQUFxYSxFQUFBNWMsUUFDQTRjLEVBQUE3TixFQUFBYyxPQUFBZCxPQUdBLE1BQ0EsSUFBQSxNQUNBOEwsU0FBQSxHQUFBLENBQUFoTCxPQUFBdE4sSUFBQXNOLE9BQUFkLEtBQ0E4TCxTQUFBLEdBQUEsR0FBQWhMLE9BQUFkLElBQ0E4TCxTQUFBLEdBQUEsR0FBQWhMLE9BQUF0TixJQUNBL0osUUFBQTBMLFFBQUFzUixNQUFBbUgsU0FBQSxTQUFBQyxHQUVBLFFBQUFBLEVBQUE1YyxRQUNBNGMsRUFBQXJhLEVBQUFzTixPQUFBdE4sS0FHQSxRQUFBcWEsRUFBQTVjLFFBQ0E0YyxFQUFBN04sRUFBQWMsT0FBQWQsT0FHQSxNQUNBLElBQUEsTUFDQThMLFNBQUEsR0FBQSxDQUFBaEwsT0FBQXROLElBQUFzTixPQUFBZCxLQUNBOEwsU0FBQSxHQUFBLEdBQUFoTCxPQUFBZCxJQUNBOEwsU0FBQSxHQUFBLEdBQUFoTCxPQUFBdE4sSUFDQS9KLFFBQUEwTCxRQUFBc1IsTUFBQW1ILFNBQUEsU0FBQUMsR0FFQSxRQUFBQSxFQUFBNWMsUUFDQTRjLEVBQUFyYSxFQUFBc04sT0FBQXROLEtBR0EsUUFBQXFhLEVBQUE1YyxRQUNBNGMsRUFBQTdOLEVBQUFjLE9BQUFkLFlBS0EsQ0FFQSxJQUFBa08sS0FBQSxHQUNBemtCLFFBQUEwTCxRQUFBc1IsTUFBQW1ILFNBQUEsU0FBQXBhLEdBQ0EwYSxLQUFBamEsS0FBQSxDQUFBVCxFQUFBQSxJQUFBQSxFQUFBd00sUUFFQThMLFNBQUFyaUIsUUFBQXFKLEtBQUFvYixNQUVBaE4sUUFBQTBFLEtBQUEsc0JBSUE0SCxZQUFBM0gsU0FBQSxjQUFBLFNBQUFoUyxHQUNBQSxFQUFBaWEsT0FBQXhGLE9BQUEsRUFBQXZFLE1BQUFvSixVQUNBdFosRUFBQWlhLE9BQUE3RixZQUFBLEVBQUFsRSxNQUFBb0osVUFDQXBKLE1BQUEzRCxTQUdBb04sWUFBQTNILFNBQUEsYUFBQSxTQUFBaFMsR0FDQXFELFNBQUFjLEtBQUFrUixNQUFBQyxPQUFBLFNBRUFxRSxZQUFBM0gsU0FBQSxhQUFBLFNBQUFoUyxHQUNBcUQsU0FBQWMsS0FBQWtSLE1BQUFDLE9BQUEsWUFFQTFDLE1BQUFuSixJQUFBd0QsV0FHQSxFQUNBaUQsTUFBQXpHLElBQUFtSixPQUNBQSxPQUdBMEgsT0FBQSxTQUFBQyxRQUNBM0gsTUFBQWpULEVBQUE0YSxPQUFBNWEsR0FDQWlULE1BQUF6RyxFQUFBb08sT0FBQXBPLEdBQ0ErRCxNQUFBM0QsUUFFQWlPLFVBQUEsV0FDQSxPQUFBdkMsU0FBQTlkLE9BQUEsU0FBQUMsSUFBQXVGLEVBQUE0SCxHQU1BLE9BTEFuTixJQUFBZ0csS0FBQVQsRUFBQSxHQUFBQSxFQUFBLElBQ0E0SCxJQUFBMFEsU0FBQTNZLE9BQUEsR0FFQWxGLElBQUFnRyxLQUFBNlgsU0FBQSxHQUFBQSxTQUFBLElBRUE3ZCxLQUNBLEtBRUE4ZixTQUFBLFdBQ0EsT0FBQXRILFNBT0E2SCxrQkFBQSxTQUFBNU8sTUFBQXFFLE1BQUF4QyxRQUNBLElBQUF1SyxTQUFBLEdBRUFyRixNQUFBLElBQUE3RyxNQUFBOEcsTUFBQSxDQUNBelYsS0FBQSxpQkFFQXNRLE9BQUFBLE9BQ0EsTUFBQSxDQUVBMVcsSUFBQSxTQUFBNGMsUUFDQSxJQUFBLElBQUFyTSxFQUFBLEVBQUFBLEVBQUFxTSxPQUFBdFUsT0FBQWlJLEdBQUEsRUFDQTBRLFNBQUE3WCxLQUFBLENBQUF3VCxPQUFBck0sR0FBQXFNLE9BQUFyTSxFQUFBLEtBSUEsSUFBQTRSLElBQUEsRUFnREEsT0E5Q0F2akIsUUFBQTBMLFFBQUEyVyxTQUFBLFNBQUF0WSxFQUFBeVosUUFDQSxJQUFBbk0sT0FBQSxJQUFBbEIsTUFBQXNOLE9BQUEsQ0FDQTFaLEVBQUFBLEVBQUEsR0FDQXdNLEVBQUF4TSxFQUFBLEdBQ0E4VSxPQUFBLEVBQUF2RSxNQUFBb0osU0FDQWxjLE1BQ0FnYyxPQUFBRCxLQUFBSSxXQUNBLEtBQ0FILE9BQUFELElBQUEsR0FBQUksV0FFQWxGLEtBQUEsUUFDQUYsT0FBQSxRQUNBQyxZQUFBLEVBQUFsRSxNQUFBb0osU0FDQWhGLFdBQUEsSUFFQTZFLE1BR0EsSUFBQVEsWUFBQXJHLGdCQUFBbEIsWUFBQW5GLFFBQ0EwTSxZQUFBM0gsU0FBQSx1QkFBQSxTQUFBaFMsR0FDQSxJQUFBcWEsS0FBQSxHQUNBemtCLFFBQUEwTCxRQUFBc1IsTUFBQW1ILFNBQUEsU0FBQXBhLEdBQ0EwYSxLQUFBamEsS0FBQSxDQUFBVCxFQUFBQSxJQUFBQSxFQUFBd00sUUFFQThMLFNBQUFyaUIsUUFBQXFKLEtBQUFvYixNQUNBM00sT0FBQXFFLEtBQUEscUJBSUE0SCxZQUFBM0gsU0FBQSxjQUFBLFNBQUFoUyxHQUNBQSxFQUFBaWEsT0FBQXhGLE9BQUEsRUFBQXZFLE1BQUFvSixVQUNBdFosRUFBQWlhLE9BQUE3RixZQUFBLEVBQUFsRSxNQUFBb0osVUFDQXBKLE1BQUEzRCxTQUdBb04sWUFBQTNILFNBQUEsYUFBQSxTQUFBaFMsR0FDQXFELFNBQUFjLEtBQUFrUixNQUFBQyxPQUFBLFNBRUFxRSxZQUFBM0gsU0FBQSxhQUFBLFNBQUFoUyxHQUNBcUQsU0FBQWMsS0FBQWtSLE1BQUFDLE9BQUEsWUFFQTFDLE1BQUFuSixJQUFBd0QsV0FHQSxFQUNBaUQsTUFBQXpHLElBQUFtSixPQUNBQSxPQUdBMEgsT0FBQSxTQUFBQyxRQUNBM0gsTUFBQWpULEVBQUE0YSxPQUFBNWEsR0FDQWlULE1BQUF6RyxFQUFBb08sT0FBQXBPLEdBQ0ErRCxNQUFBM0QsUUFFQWlPLFVBQUEsV0FDQSxPQUFBdkMsU0FBQTlkLE9BQUEsU0FBQUMsSUFBQXVGLEVBQUE0SCxHQU1BLE9BTEFuTixJQUFBZ0csS0FBQVQsRUFBQSxHQUFBQSxFQUFBLElBQ0E0SCxJQUFBMFEsU0FBQTNZLE9BQUEsR0FFQWxGLElBQUFnRyxLQUFBNlgsU0FBQSxHQUFBQSxTQUFBLElBRUE3ZCxLQUNBLEtBRUE4ZixTQUFBLFdBQ0EsT0FBQXRILFNBT0E4SCw0QkFBQSxTQUFBakksV0FDQSxJQUFBa0ksaUJBQUFsSSxVQUFBK0UsS0FBQSxpQkFDQW1ELGlCQUFBcmIsUUFDQTFKLFFBQUEwTCxRQUFBcVosaUJBQUEsR0FBQWxELGNBQUEsU0FBQUMsT0FDQUEsTUFBQTNGLEtBQUEsa0JBS0E2SSxRQUFBLFdBQ0EsSUFBQUMsVUFFQSxNQUFBLENBQ0FDLGFBQUEsU0FBQUMsTUFDQUYsVUFBQUUsTUFFQUMsYUFBQSxXQUNBLE9BQUFILGFBS0FJLFlBQUEsV0FDQSxJQUFBekwsTUFBQSxDQUNBMkUsT0FBQSxRQUNBK0csUUFBQSxFQUNBN0csS0FBQSx5QkFDQUQsWUFBQSxHQUdBLE1BQUEsQ0FDQXBkLElBQUEsU0FBQTJYLEtBQ0FhLE1BQUF2VixPQUFBa2hCLE9BQUEzTCxNQUFBYixNQUVBbFcsSUFBQSxTQUFBMGYsTUFDQSxPQUFBQSxLQUFBM0ksTUFBQTJJLE1BQUEzSSxZQW5mQSxHQ0FBLFdBQ0E1WixRQUFBQyxPQUFBLE9BQUEyQixXQUFBLG1CQUVBLFNBQ0E0akIsT0FDQUMsU0FDQUMsWUFDQTNqQixPQUNBbUgsV0FDQTlHLGFBQ0FILG9CQUNBQyxRQUNBeWpCLE9BSUFsaUIsS0FDQW1pQixVQUFBLEVBSkEsSUFLQXppQixPQUFBakIsUUFBQWlCLE9BQUFqQixRQUFBa0IsVUFBQWxCLFFBQUE0TSxVQUVBLElBQUE0VyxZQUFBaGQsWUFHQSxPQUZBdkYsY0FMQU0sS0FNQW1pQixVQUFBLEdBTkFuaUIsS0FZQU4sT0FBQSxXQUNBQSxZQTdCQSxHQ0FBLFdBQ0FuRCxRQUFBQyxPQUFBLE9BQUEyQixXQUFBLGdCQUVBLFNBQ0E0akIsT0FDQUMsU0FDQUMsWUFDQTNqQixPQUNBbUgsV0FDQTlHLGFBQ0F1akIsTUFDQXpqQixRQUNBRCxxQkFFQSxJQUVBa0IsT0FBQWpCLFFBQUFpQixPQUVBdWlCLFlBQUFoZCxhQUNBdkYsU0FMQU0sS0FTQU4sT0FBQSxXQUNBQSxZQXhCQSxHQ0FBLFdBQ0FuRCxRQUFBQyxPQUFBLE9BQUEyQixXQUFBLHFCQUVBLFNBQ0E0akIsT0FDQUMsU0FDQXpqQixVQUNBMGpCLFlBQ0EzakIsT0FDQW1ILFdBQ0E5RyxhQUNBRixTQUdBLElBQ0FpQixPQUFBakIsUUFBQWlCLE9BQUFDLFVBQUFsQixRQUFBa0IsVUFDQSxJQUFBc2lCLFlBQUFoZCxZQUVBLFlBREF2RixTQUhBTSxLQVFBOEwsU0FBQW5NLFVBQUFQLE1BUkFZLEtBU0FOLE9BQUEsV0FBQUEsVUFLQSxZQUZBbkIsVUFBQTZqQixRQUdBQyxFQUFBLGdCQUFBQyxJQUFBLFVBQUEsb0JBSUFELEVBQUEsZ0JBQUFFLGNBakNBLEdDQUEsV0FDQWhtQixRQUFBQyxPQUFBLE9BQUEyQixXQUFBLGtCQUVBLFNBQ0E0akIsT0FDQUMsU0FDQXpqQixVQUNBMGpCLFlBQ0EzakIsT0FDQW1ILFdBQ0E5RyxhQUNBRixTQUdBLElBQ0FpQixPQUFBakIsUUFBQWlCLE9BQUFDLFVBQUFsQixRQUFBa0IsVUFDQSxJQUFBc2lCLFlBQUFoZCxZQUVBLFlBREF2RixTQUhBTSxLQVFBOEwsU0FBQW5NLFVBQUFQLE1BUkFZLEtBU0FOLE9BQUEsV0FBQUEsVUFHQTJpQixFQUFBLGdCQUFBRSxjQTFCQSxHQ0FBLFdBQ0FobUIsUUFBQUMsT0FBQSxPQUFBMkIsV0FBQSxlQUVBLFNBQ0E0akIsT0FDQUMsU0FDQUMsWUFDQTNqQixPQUNBbUgsV0FDQTlHLGFBQ0FGLFFBQ0FDLFFBR0FxakIsT0FBQVMsU0FBQSxDQUNBLENBQUExZ0IsR0FBQSxJQUFBMmdCLElBQUEsK0JBQUExZSxLQUFBLGdCQUFBMmUsSUFBQSxFQUFBL2UsUUFBQSxHQUNBLENBQUE3QixHQUFBLElBQUEyZ0IsSUFBQSwrQkFBQTFlLEtBQUEsZUFBQTJlLElBQUEsRUFBQS9lLFFBQUEsR0FDQSxDQUFBN0IsR0FBQSxJQUFBMmdCLElBQUEsK0JBQUExZSxLQUFBLGdCQUFBMmUsSUFBQSxFQUFBL2UsUUFBQSxHQUNBLENBQUE3QixHQUFBLElBQUEyZ0IsSUFBQSwrQkFBQTFlLEtBQUEsZUFBQTJlLElBQUEsRUFBQS9lLFFBQUEsSUFJQSxJQUNBakUsT0FBQWpCLFFBQUFpQixPQUFBQyxVQUFBbEIsUUFBQWtCLFVBQ0EsSUFBQXNpQixZQUFBaGQsWUFFQSxZQURBdkYsU0FIQU0sS0FNQU4sT0FBQSxXQUNBQSxVQVBBTSxLQVVBOEwsU0FBQW5NLFVBQUFQLFFBaENBLEdDQUEsV0FDQTdDLFFBQUFDLE9BQUEsT0FBQTJCLFdBQUEsY0FFQSxTQUNBNGpCLE9BQ0FDLFNBQ0FDLFlBQ0EzakIsT0FDQW1ILFdBQ0E5RyxhQUNBdWpCLE1BQ0F6akIsUUFDQUQscUJBRUEsSUFBQTBRLEdBQUFsUCxLQUVBTixPQUFBakIsUUFBQWlCLE9BQUF5TixTQUFBMU8sUUFBQTBPLFNBQUF4TixVQUFBbEIsUUFBQWtCLFVBRUFzaUIsWUFBQWhkLGFBQ0F2RixTQUdBd1AsR0FBQXBELFNBQUFuTSxVQUFBUCxNQUNBOFAsR0FBQXhQLE9BQUEsV0FDQUEsVUFHQXFpQixPQUFBWSxPQUFBLHVDQUFBLFNBQUFoVyxPQUNBMFYsRUFBQSx3QkFBQU8sWUFBQSw4QkFDQVAsRUFBQSx3QkFBQVEsU0FBQSx1QkFHQVIsRUFBQSxnQkFBQUUsWUFDQVIsT0FBQWUsZ0JBQUEsRUFFQTVULEdBQUE2VCxZQUFBLEVBRUE3VCxHQUFBOFQsVUFBQSxDQUNBQyxhQUFBLENBQ0FDLFlBQUEsRUFDQUMsU0FBQSxFQUNBQyxPQUFBLEVBQ0FDLFlBQUEsRUFDQUMsU0FBQSxJQUdBcFUsR0FBQTNDLFdBQUEsR0FDQTJDLEdBQUFxVSxZQUFBLFNBQUFwZSxLQUFBcWUsZUFFQXRrQixJQUFBZ1EsR0FBQThULFVBQUFRLFVBQUFyZSxNQUNBK0osR0FBQThULFVBQUFRLFVBQUFyZSxPQUFBLEVBQ0ErSixHQUFBOFQsVUFBQVEsVUFBQXJlLE9BQUErSixHQUFBOFQsVUFBQVEsVUFBQXJlLE1BRUFNLFdBQ0F2RSxlQUFBLENBQ0EwSSxLQUFBLEVBQ0FzVixNQUFBLEdBQ0F1RSxLQUFBdGUsS0FDQXVlLE9BQUF4VSxHQUFBM0MsV0FDQW9YLFNBQUF6VSxHQUFBOFQsVUFBQVEsVUFBQXJlLFFBRUE3QixLQUFBLFNBQUFDLE1BRUEyTCxHQUFBMFUsV0FBQXJnQixLQUFBckQsS0FBQTJqQixLQUNBM1UsR0FBQTRVLFlBQUF2Z0IsS0FBQXJELEtBQUE2akIsTUFFQS9CLFNBQUEsV0FFQUssRUFBQSxlQUFBMkIsV0FBQSxDQUNBcmUsTUFBQXVKLEdBQUE0VSxZQUNBRyxZQUFBLEdBQ0FDLFNBQUEsY0FDQUMsZUFBQSxJQUNBQyxVQUFBLEVBQ0FyQixZQUFBLEVBRUFzQixZQUFBLFNBQUF6YSxLQUFBa1AsT0FDQUEsTUFBQXdMLGlCQUNBN2UsV0FDQXZFLGVBQUEsQ0FDQTBJLEtBQUFBLEtBQ0FzVixNQUFBLEdBQ0F1RSxLQUFBdGUsS0FDQXdlLFNBQUF6VSxHQUFBOFQsVUFBQTdkLFFBRUE3QixLQUFBLFNBQUFDLE1BQ0EyTCxHQUFBMFUsV0FBQXJnQixLQUFBckQsS0FBQTJqQixPQUVBcGdCLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsWUFNQWxELE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsTUFHQXVJLEdBQUEzQyxXQUFBLEdBQ0EsSUFBQWdZLGVBQUFwWCxTQUFBLEtBQ0ErQixHQUFBc1YsY0FBQSxTQUFBM1gsTUFLQTBYLGVBQ0EsV0FDQTllLFdBQ0F2RSxlQUFBLENBQ0EwSSxLQUFBLEVBQ0FzVixNQUFBLEdBQ0F3RSxPQUFBN1csS0FDQTRXLEtBQUEsVUFDQUUsVUFBQSxJQUVBcmdCLEtBQUEsU0FBQUMsTUFDQTJMLEdBQUEwVSxXQUFBcmdCLEtBQUFyRCxLQUFBMmpCLEtBQ0EzVSxHQUFBNFUsWUFBQXZnQixLQUFBckQsS0FBQTZqQixNQUVBL0IsU0FBQSxXQUNBSyxFQUFBLGVBQUEyQixXQUFBLENBQ0FyZSxNQUFBdUosR0FBQTRVLFlBQ0FHLFlBQUEsR0FDQUMsU0FBQSxjQUNBQyxlQUFBLElBQ0FDLFVBQUEsRUFDQXJCLFlBQUEsRUFDQXNCLFlBQUEsU0FBQXphLEtBQUFrUCxPQUNBQSxNQUFBd0wsaUJBQ0E3ZSxXQUFBdkUsZUFBQSxDQUNBMEksS0FBQUEsS0FDQXNWLE1BQUEsR0FDQXVFLEtBQUF0ZSxLQUNBd2UsU0FBQXpVLEdBQUE4VCxVQUFBUSxVQUFBcmUsUUFFQTdCLEtBQUEsU0FBQUMsTUFDQTJMLEdBQUEwVSxXQUFBcmdCLEtBQUFyRCxLQUFBMmpCLE9BRUFwZ0IsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixZQU1BbEQsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixNQUdBLENBQUFrRyxRQU1BcUMsR0FBQXFVLFlBQUEsVUFBQSxnQkFDQXJVLEdBQUF1VixVQUFBLENBQ0FDLFFBQUEsRUFDQWhELE1BQUEsRUFDQTBDLFVBQUEsRUFDQU8sV0FBQSxHQUdBbG1CLFFBQUF3TyxpQkFBQTNKLEtBQUEsU0FBQUMsTUFDQTJMLEdBQUFqQyxlQUFBMUosS0FBQXJELEtBRUFnUCxHQUFBMFYsZ0JBQUEsU0FBQUMsUUFDQSxPQUFBLElBQUEzaEIsUUFBQSxTQUFBQyxRQUFBQyxRQUNBRCxRQUFBSSxLQUFBckQsV0FJQXpCLFFBQUF5TyxjQUFBNUosS0FBQSxTQUFBQyxNQUNBMkwsR0FBQTRWLGNBQUF2aEIsS0FBQXJELEtBRUFnUCxHQUFBNlYsYUFBQSxTQUFBRixRQUNBLE9BQUEsSUFBQTNoQixRQUFBLFNBQUFDLFFBQUFDLFFBQ0FELFFBQUFJLEtBQUFyRCxXQUlBekIsUUFBQXVPLGNBQUExSixLQUFBLFNBQUFDLE1BQ0EyTCxHQUFBOFYsY0FBQXpoQixLQUFBckQsS0FFQWdQLEdBQUErVixhQUFBLFNBQUFKLFFBQ0EsT0FBQSxJQUFBM2hCLFFBQUEsU0FBQUMsUUFBQUMsUUFDQUQsUUFBQUksS0FBQXJELFdBS0FnUCxHQUFBZ1csYUFBQSxTQUFBQyxNQUFBQyxZQUNBLElBQUF0aEIsT0FBQSxHQUNBdWhCLFdBQUEsR0FHQUQsTUFBQUEsWUFDQXptQixhQUFBa04sTUFBQSxpQ0FFQTNNLElBQUFrbUIsV0FBQWxDLFdBQ0F2a0IsYUFBQWtOLE1BQUEsK0JBRUEvSCxPQUFBb2YsV0FBQWtDLFdBQUFsQyxnQkFFQWhrQixJQUFBa21CLFdBQUFFLGNBQ0EzbUIsYUFBQWtOLE1BQUEsOEJBRUEvSCxPQUFBd2hCLGNBQUEsQ0FDQUMsU0FBQUgsV0FBQUUsY0FBQUMsU0FBQSxHQUFBQSxTQUNBQyxZQUFBSixXQUFBRSxjQUFBRSxhQUdBdG1CLE1BQUFrbUIsV0FBQTVXLGNBQ0ExSyxPQUFBMEssWUFBQTRXLFdBQUE1VyxhQUVBdFAsTUFBQWttQixXQUFBSyxjQUNBM2hCLE9BQUEyaEIsWUFBQUwsV0FBQUssYUFFQXZtQixNQUFBa21CLFdBQUFNLGdCQUNBNWhCLE9BQUE0aEIsY0FBQU4sV0FBQU0sZUFHQXhtQixNQUFBa21CLFdBQUFoQyxRQUNBdGYsT0FBQXNmLE1BQUFnQyxXQUFBaEMsT0FFQWxrQixNQUFBa21CLFdBQUFPLFdBQ0FQLFdBQUFPLFNBQUExZCxRQUFBLFNBQUEyZCxTQUNBUCxXQUFBdGUsS0FBQTZlLFFBQUF6Z0IsUUFFQXJCLE9BQUE2aEIsU0FBQU4sWUFHQW5tQixNQUFBa21CLFdBQUFTLHNCQUNBVCxXQUFBUyxvQkFBQU4sVUFDQWhrQixRQUFBQyxJQUFBLG1CQUNBc0MsT0FBQStoQixvQkFBQSxDQUNBQyxVQUFBVixXQUFBUyxvQkFBQUMsVUFDQUMsV0FBQVgsV0FBQVMsb0JBQUFFLFdBQ0FDLFNBQUFaLFdBQUFTLG9CQUFBRyxTQUNBNUMsTUFBQWdDLFdBQUFTLG9CQUFBekMsTUFDQTZDLE9BQUEsQ0FDQVYsU0FBQUgsV0FBQVMsb0JBQUFOLFNBQUEsR0FBQUEsU0FDQUMsWUFBQUosV0FBQVMsb0JBQUFMLGVBSUExaEIsT0FBQStoQixvQkFBQSxDQUNBQyxVQUFBVixXQUFBUyxvQkFBQUMsVUFDQUMsV0FBQVgsV0FBQVMsb0JBQUFFLFdBQ0FDLFNBQUFaLFdBQUFTLG9CQUFBRyxTQUNBNUMsTUFBQWdDLFdBQUFTLG9CQUFBekMsTUFDQTZDLE9BQUEsQ0FDQVQsWUFBQUosV0FBQVMsb0JBQUFMLGVBTUF0bUIsTUFBQWttQixXQUFBYyxnQkFDQWQsV0FBQWMsY0FBQUMsYUFDQXJpQixPQUFBb2lCLGNBQUEsQ0FDQXZaLE1BQUF5WSxXQUFBYyxjQUFBdlosTUFDQXdaLGFBQUFmLFdBQUFjLGNBQUFDLGFBQUEsR0FBQUMsSUFJQXRpQixPQUFBb2lCLGNBQUEsQ0FDQXZaLE1BQUF5WSxXQUFBYyxjQUFBdlosUUFPQXpOLE1BQUFrbUIsV0FBQWlCLFdBQ0FqQixXQUFBaUIsU0FBQUMsWUFDQXhpQixPQUFBdWlCLFNBQUEsQ0FDQUUsTUFBQW5CLFdBQUFpQixTQUFBRSxNQUNBQyxNQUFBcEIsV0FBQWlCLFNBQUFHLE1BQ0FDLE1BQUFyQixXQUFBaUIsU0FBQUksTUFDQUMsS0FBQXRCLFdBQUFpQixTQUFBSyxLQUNBQyxXQUFBdkIsV0FBQWlCLFNBQUFNLFdBQ0FMLFlBQUFsQixXQUFBaUIsU0FBQUMsWUFBQSxHQUFBTSxNQUdBOWlCLE9BQUF1aUIsU0FBQSxDQUNBRSxNQUFBbkIsV0FBQWlCLFNBQUFFLE1BQ0FDLE1BQUFwQixXQUFBaUIsU0FBQUcsTUFDQUMsTUFBQXJCLFdBQUFpQixTQUFBSSxNQUNBQyxLQUFBdEIsV0FBQWlCLFNBQUFLLEtBQ0FDLFdBQUF2QixXQUFBaUIsU0FBQU0sYUFLQXpuQixNQUFBa21CLFdBQUF5QixXQUNBekIsV0FBQXlCLFNBQUFQLFlBQ0F4aUIsT0FBQStpQixTQUFBLENBQ0FOLE1BQUFuQixXQUFBeUIsU0FBQU4sTUFDQUMsTUFBQXBCLFdBQUF5QixTQUFBTCxNQUNBQyxNQUFBckIsV0FBQXlCLFNBQUFKLE1BQ0FDLEtBQUF0QixXQUFBeUIsU0FBQUgsS0FDQUMsV0FBQXZCLFdBQUF5QixTQUFBRixXQUNBTCxZQUFBbEIsV0FBQXlCLFNBQUFQLFlBQUEsR0FBQU0sTUFHQTlpQixPQUFBK2lCLFNBQUEsQ0FDQU4sTUFBQW5CLFdBQUF5QixTQUFBTixNQUNBQyxNQUFBcEIsV0FBQXlCLFNBQUFMLE1BQ0FDLE1BQUFyQixXQUFBeUIsU0FBQUosTUFDQUMsS0FBQXRCLFdBQUF5QixTQUFBSCxLQUNBQyxXQUFBdkIsV0FBQXlCLFNBQUFGLGFBT0FsaEIsV0FBQXFoQixhQUFBaGpCLFFBQ0FSLEtBQUEsU0FBQUMsTUFDQTVFLGFBQUE4SCxRQUFBLHFDQUNBeUksR0FBQTZYLFdBQUEsR0FDQTFFLEVBQUEsY0FBQTJFLE1BQUEsUUFDQTlYLEdBQUFxVSxZQUFBLFVBQUEsa0JBRUE5ZixNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLEdBQ0FoSSxhQUFBa04sTUFBQSw2QkF4VUEsR0NBQSxXQUNBdFAsUUFDQUMsT0FBQSxPQUNBMkIsV0FBQSx3QkFFQSxTQUNBNGpCLE9BQ0FDLFNBQ0FDLFlBQ0EzakIsT0FDQTJvQixhQUNBeGhCLFdBQ0E5RyxhQUNBRixRQUNBRixVQUNBRyxRQUdBLElBQUF3USxHQUFBbFAsS0FDQU4sT0FBQWpCLFFBQUFpQixPQUFBakIsUUFBQWtCLFVBQ0EsSUFBQXNpQixZQUFBaGQsWUFFQSxZQURBdkYsU0FXQSxTQUFBd25CLG9CQUNBemhCLFdBQUE5QyxxQkFBQXVNLEdBQUF0TSxTQUFBVSxLQUFBLFNBQUFDLE1BQ0EyTCxHQUFBaVksVUFBQTVqQixLQUFBckQsS0FBQUEsS0FDQWdQLEdBQUFrWSxrQkFBQWxZLEdBQUFpWSxVQUFBcGpCLEtBQ0FtTCxHQUFBVixZQUFBVSxHQUFBaVksVUFBQTNZLFlBQ0FVLEdBQUFtWSxJQUFBblksR0FBQWlZLFVBQUE5UixLQUNBOVQsUUFBQUMsSUFBQTBOLEdBQUFpWSxXQUNBNXFCLFFBQUEwTCxRQUFBaUgsR0FBQWlZLFVBQUFHLGtCQUFBLFNBQUF6aEIsTUFDQXFKLEdBQUFxWSxhQUFBMWhCLEtBQUFvUyxXQUFBdVAsWUFBQUQsYUFBQTVhLE1BQUE5RyxLQUFBNGhCLFNBQ0F2WSxHQUFBd1ksY0FBQXhZLEdBQUF3WSxjQUFBeFksR0FBQXFZLGFBQ0FyWSxHQUFBeVksV0FBQTloQixLQUFBb1MsV0FBQXVQLFlBQUFHLFdBQUFoYixNQUFBOUcsS0FBQTRoQixTQUNBdlksR0FBQTBZLFlBQUExWSxHQUFBMFksWUFBQTFZLEdBQUF5WSxhQUVBcG1CLFFBQUFDLElBQUEwTixHQUFBaVksV0FDQW5GLFNBQUE2RixVQUFBLFFBQ0Fwa0IsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixLQW9HQSxTQUFBa2hCLFlBQ0F4RixFQUFBLGtCQUFBeUYsV0FBQSxDQUNBQyxVQUFBLFFBQ0FDLFlBQUEsRUFDQUMsZUFBQSxFQUNBQyxXQUFBLEVBQ0FDLFVBQUEsR0FDQUMsV0FBQSxFQUNBQyxTQUFBLGlCQUdBaEcsRUFBQSxnQkFBQXlGLFdBQUEsQ0FDQUMsVUFBQSxRQUNBQyxZQUFBLEVBQ0FDLGVBQUEsRUFDQUMsV0FBQSxFQUNBSSxLQUFBLG1CQTNJQXBaLEdBQUFxWixVQUFBLEVBQ0FyWixHQUFBdE0sUUFBQXFrQixhQUFBbmxCLEdBQ0FvTixHQUFBbkMsT0FBQXRPLFFBQUFzTyxPQUNBbUMsR0FBQXNaLGFBQUEsR0FDQXRaLEdBQUF3WSxjQUFBLEVBQ0F4WSxHQUFBMFksWUFBQSxFQXFCQVYsb0JBRUFoWSxHQUFBdVosVUFBQSxTQUFBaEcsS0FDQXZULEdBQUFzWixhQUFBemhCLEtBQUFtSSxHQUFBd1osWUFBQXBrQixNQUFBbWUsS0FBQWxjLEtBQ0EySSxHQUFBd1osWUFBQXBrQixNQUFBMEMsT0FBQXliLElBQUEsSUFHQXZULEdBQUF5WixzQkFBQSxTQUFBOWlCLE1BQ0FxSixHQUFBMFosYUFBQTFaLEdBQUFpWSxVQUFBRyxrQkFBQXpoQixNQUNBcUosR0FBQTJaLFlBQUEzWixHQUFBMFosYUFBQW5CLFNBQ0F2WSxHQUFBNFoscUJBQUE1WixHQUFBMlosWUFBQTNaLEdBQUEwWixhQUFBM1EsV0FBQXVQLFlBQUFELGFBQUE1YSxNQUNBdUMsR0FBQTZaLDJCQUFBN1osR0FBQTJaLFlBQUEzWixHQUFBMFosYUFBQTNRLFdBQUF1UCxZQUFBRyxXQUFBaGIsTUFDQSxHQUFBdUMsR0FBQTBaLGFBQUFJLG9CQUFBL2lCLFFBQUEvRyxNQUFBZ1EsR0FBQTBaLGFBQUFJLG9CQUFBL2lCLE9BQ0FpSixHQUFBK1osbUJBQUEvWixHQUFBMFosYUFBQUksb0JBRUE5WixHQUFBK1osbUJBQUEsR0FFQS9aLEdBQUFnYSxjQUFBcmpCLEtBQ0F3YyxFQUFBLHNCQUFBMkUsTUFBQSxRQUNBLE9BQUFuaEIsS0FDQXdjLEVBQUEsdUNBQUF4VixLQUFBLDhCQUVBd1YsRUFBQSx1Q0FBQXhWLEtBQUEsa0NBSUFxQyxHQUFBaWEsbUJBQUEsV0FDQWphLEdBQUErWixtQkFBQWxpQixLQUFBLENBQ0FxaUIsZUFBQSxHQUNBemMsTUFBQSxNQUdBdUMsR0FBQW1hLHlCQUFBLFNBQUF6UCxPQUNBMUssR0FBQStaLG1CQUFBamlCLE9BQUE0UyxNQUFBLElBR0ExSyxHQUFBb2EsWUFBQSxTQUFBaGxCLE1BQUF3VSxPQUNBLElBQUF5USxRQUFBelEsTUFBQThILE9BQUF0YyxNQUNBNEssR0FBQXNhLFVBQUE1b0IsT0FBQUMsS0FBQTBvQixTQUFBbGpCLElBQUEsU0FBQUMsR0FBQSxPQUFBaWpCLFFBQUFqakIsR0FBQXZDLFFBR0FtTCxHQUFBdWEsa0JBQUEsU0FBQW5pQixLQUNBLEdBQUEsR0FBQUEsSUFDQTRILEdBQUFxWixVQUFBLEVBQ0FsRyxFQUFBLDJFQUFBcUgsS0FBQSxZQUFBLEdBQ0Fub0IsUUFBQUMsSUFBQTBOLEdBQUFpWSxVQUFBRyx3QkFDQSxHQUFBLEdBQUFoZ0IsSUFBQSxDQUNBK2EsRUFBQSwyRUFBQXFILEtBQUEsWUFBQSxHQUNBeGEsR0FBQXFaLFVBQUEsRUFFQSxJQUFBb0IsY0FBQSxDQUNBQyxlQUFBMWEsR0FBQWlZLFVBQUFHLG1CQUdBdUMsa0JBQUEsQ0FDQTlsQixLQUFBbUwsR0FBQWtZLGtCQUNBNVksWUFBQVUsR0FBQVYsWUFDQTZHLEtBQUFuRyxHQUFBbVksSUFFQS9pQixNQUFBNEssR0FBQTRhLFlBRUF2b0IsUUFBQUMsSUFBQW1vQixlQUVBbGtCLFdBQUExQyx3QkFBQW1NLEdBQUFpWSxVQUFBNWdCLElBQUFvakIsZUFBQXJtQixLQUFBLFNBQUFDLE1BQ0FoQyxRQUFBQyxJQUFBK0IsTUFFQWtDLFdBQUF6QyxvQkFBQWtNLEdBQUFpWSxVQUFBNWdCLElBQUFzakIsbUJBQUF2bUIsS0FBQSxTQUFBQyxNQUNBaEMsUUFBQUMsSUFBQStCLE1BQ0E1RSxhQUFBOEgsUUFBQWxELEtBQUFyRCxLQUFBd0csU0FDQXdnQixvQkFDQWhZLEdBQUFzYSxVQUFBLEdBQ0F4SCxTQUFBNkYsVUFBQSxPQUNBcGtCLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsT0FHQWxELE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsT0FhQXVJLEdBQUE2YSxZQUFBLFNBQUFsa0IsS0FBQTNGLE1BQ0FnUCxHQUFBaVksVUFBQUcsa0JBQUF6aEIsTUFBQTRoQixTQUFBdlksR0FBQTJaLFlBQ0EzWixHQUFBaVksVUFBQUcsa0JBQUF6aEIsTUFBQW1qQixvQkFBQTlvQixLQUNBcUIsUUFBQUMsSUFBQTBOLEdBQUFpWSxVQUFBRyxrQkFBQXpoQixNQUFBbWpCLHFCQUNBM0csRUFBQSxzQkFBQTJFLE1BQUEsV0FqSkEsR0NBQSxXQUNBenFCLFFBQUFDLE9BQUEsT0FBQTJCLFdBQUEsb0JBRUEsU0FDQTRqQixPQUNBQyxTQUNBQyxZQUNBM2pCLE9BQ0FtSCxXQUNBOUcsYUFDQXVqQixNQUNBempCLFNBSUEsSUFBQXlRLEdBQUFsUCxLQUdBTixPQUdBakIsUUFIQWlCLE9BR0FqQixRQUZBa0IsVUFFQWxCLFFBREF3TixhQUdBZ1csWUFBQWhkLGFBQ0F2RixTQUdBLElBQUF1aUIsWUFBQS9jLGVBQUEsVUFBQSxpQkFHQSxPQUZBdkcsYUFBQXVILFFBQUEsaUNBQ0E1SCxPQUFBc04sR0FBQSxhQUdBc0QsR0FBQThhLFFBQUEsR0FLQWpJLE9BQUFZLE9BQUEsd0JBQUEsU0FBQWhXLE9BQ0EwVixFQUFBLHdCQUFBTyxZQUFBLDhCQUNBUCxFQUFBLHdCQUFBUSxTQUFBLHVCQUdBM2YsUUFBQTJCLElBQUEsQ0FDQVksV0FBQXZFLGlCQUNBdUUsV0FBQXdrQix5QkFFQTNtQixLQUFBLFNBQUFDLE1BQ0EyTCxHQUFBOGEsUUFBQXptQixLQUFBLEdBQUFyRCxLQUFBMmpCLEtBQ0EzVSxHQUFBZ2IsYUFBQTNtQixLQUFBLEdBQUFyRCxLQUFBQSxLQUNBZ1AsR0FBQWdiLGFBQUFwaEIsT0FBQSxTQUFBakQsTUFDQSxNQUFBLDRCQUFBQSxLQUFBVSxNQUVBMkksR0FBQWliLG9CQUFBLDZCQUdBMW1CLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsS0FHQXVJLEdBQUFrYixLQUFBLENBQ0Fuc0IsSUFBQSx1R0FDQW9zQixRQUFBLEdBQ0FDLE9BQUEsR0FDQUMsT0FBQSxTQUNBQyxLQUFBLEdBR0F0YixHQUFBdWIsWUFBQSxDQUNBQyxRQUFBLElBR0EzSSxPQUFBNEksZUFBQSxDQUNBQyxZQUFBLEdBR0ExYixHQUFBMmIsWUFBQSxTQUFBeGtCLEtBQ0EsSUFBQXlrQixVQUFBOXFCLEtBQUErcUIsV0FBQUMsU0FBQUMsU0FDQS9iLEdBQUFrYixLQUFBQyxRQUFBLENBQ0EsQ0FBQVMsVUFBQUksTUFBQUosVUFBQUssUUFFQWpjLEdBQUFrYixLQUFBSSxLQUFBLEdBQ0F0YixHQUFBa2IsS0FBQUcsT0FBQU8sVUFBQUksTUFBQSxJQUFBSixVQUFBSyxNQUNBamMsR0FBQXViLFlBQUFDLFFBQUFVLElBQUEsQ0FDQUMsWUFBQSxDQUFBUCxVQUFBSSxNQUFBSixVQUFBSyxTQUlBamMsR0FBQW9jLFdBQUEsU0FBQUMsVUFDQUEsU0FBQXpuQixPQUFBeW5CLFNBQUF6bkIsT0FBQXlDLElBQ0FkLFdBQ0FyRSxjQUFBbXFCLFVBQ0Fqb0IsS0FBQSxTQUFBQyxNQUNBNUUsYUFBQThILFFBQUEseUNBRUEsSUFBQTNHLFFBQUEsQ0FDQWtDLFVBQUF1QixLQUFBckQsS0FBQXFHLElBQ0FpbEIsV0FBQWpvQixLQUFBckQsS0FBQXFHLEtBQ0EySSxHQUFBaWIscUJBQUEsU0FBQWpiLEdBQUFpYixvQkFDQWpiLEdBQUFpYixvQkFBQSw0QkFFQTFrQixXQUNBZ21CLGtCQUFBM3JCLFNBQ0F3RCxLQUFBLFNBQUFDLE1BQ0FoQyxRQUFBQyxJQUFBK0IsS0FBQXJELEtBQUF3RyxXQUVBakQsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixLQUdBcEYsUUFBQUMsSUFBQSxZQUFBK0IsS0FBQXJELEtBQUFxRyxLQUNBakksT0FBQXNOLEdBQUEsZUFFQW5JLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsR0FDQWhJLGFBQUFrTixNQUFBLDJCQUlBcUQsR0FBQXdjLGFBQUEsV0FDQSxJQUFBdEwsSUFBQXBnQixLQUFBMnJCLGNBQ0F6YyxHQUFBdWIsWUFBQUMsUUFBQVUsSUFBQSxDQUNBQyxZQUFBLENBQUFqTCxJQUFBOEssTUFBQTlLLElBQUErSyxTQUlBakosTUFBQTBKLFNBQUF0b0IsS0FBQSxTQUFBK0MsS0FDQTZJLEdBQUE3SSxJQUFBQSxJQUNBQSxJQUFBbkosV0FBQSxDQUNBb3RCLE9BQUFwYixHQUFBa2IsS0FBQUUsT0FDQXVCLGtCQUFBLEVBQ0FDLGFBQUEsRUFDQXRCLEtBQUEsRUFDQUQsT0FBQSxDQUNBVyxJQUFBLEVBQ0FDLElBQUEsT0FLQWpjLEdBQUF4UCxPQUFBLFdBQ0FBLFVBR0F3UCxHQUFBNmMsZUFBQSxXQUNBN2MsR0FBQWliLG9CQUFBamIsR0FBQThjLGlCQUFBemxCLElBQ0E4YixFQUFBLHdCQUFBMkUsTUFBQSxXQWpKQSxHQ0FBLFdBQ0F6cUIsUUFBQUMsT0FBQSxPQUFBMkIsV0FBQSxnQkFFQSxTQUNBNGpCLE9BQ0FDLFNBQ0FDLFlBQ0EzakIsT0FDQTJ0QixRQUNBMXRCLFVBQ0FrSCxXQUNBOUcsYUFDQUgsb0JBQ0FDLFFBQ0F5akIsT0FJQSxJQUFBaFQsR0FBQWxQLEtBQ0FrUCxHQUFBaVQsVUFBQSxFQUpBLElBT0F6aUIsT0FLQWpCLFFBTEFpQixPQUNBQyxVQUlBbEIsUUFKQWtCLFVBQ0FzTSxhQUdBeE4sUUFIQXdOLGFBQ0FHLGFBRUEzTixRQUZBMk4sYUFFQTNOLFFBREE0TSxVQUdBLElBQUE0VyxZQUFBaGQsWUFHQSxPQUZBdkYsY0FDQXdQLEdBQUFpVCxVQUFBLEdBR0FqVCxHQUFBZ2QsUUFBQSxFQUdBaGQsR0FBQXBELFNBQUFuTSxVQUFBUCxNQUNBOFAsR0FBQWlkLFVBQ0Esb0ZBQ0FqZCxHQUFBa2IsS0FBQSxDQUNBbnNCLElBQ0Esc0ZBQ0Fxc0IsT0FBQSxDQUNBLENBQ0E4QixZQUFBLFdBQ0FDLFFBQUEsQ0FDQSxDQUNBQyxNQUFBLGFBSUEsQ0FDQUYsWUFBQSxjQUNBQyxRQUFBLENBQ0EsQ0FDQUUsV0FBQSxTQUlBLENBQ0FILFlBQUEsbUJBQ0FDLFFBQUEsQ0FDQSxDQUNBQyxNQUFBLGFBSUEsQ0FDQUYsWUFBQSxxQkFDQUMsUUFBQSxDQUNBLENBQ0FDLE1BQUEsYUFJQSxDQUNBRSxZQUFBLGlCQUNBSixZQUFBLFdBQ0FDLFFBQUEsQ0FDQSxDQUNBQyxNQUFBLGFBSUEsQ0FDQUUsWUFBQSx5QkFDQUosWUFBQSxtQkFDQUMsUUFBQSxDQUNBLENBQ0FDLE1BQUEsYUFJQSxDQUNBRSxZQUFBLDZCQUNBSCxRQUFBLENBQ0EsQ0FDQUUsV0FBQSxTQUlBLENBQ0FDLFlBQUEsMEJBQ0FKLFlBQUEsbUJBQ0FDLFFBQUEsQ0FDQSxDQUNBQyxNQUFBLGFBSUEsQ0FDQUUsWUFBQSxNQUNBSixZQUFBLG1CQUNBQyxRQUFBLENBQ0EsQ0FDQUMsTUFBQSxhQUlBLENBQ0FFLFlBQUEsV0FDQUosWUFBQSxXQUNBQyxRQUFBLENBQ0EsQ0FDQUMsTUFBQSxhQUlBLENBQ0FFLFlBQUEsV0FDQUosWUFBQSxtQkFDQUMsUUFBQSxDQUNBLENBQ0FDLE1BQUEsYUFJQSxDQUNBRSxZQUFBLFdBQ0FKLFlBQUEscUJBQ0FDLFFBQUEsQ0FDQSxDQUNBQyxNQUFBLGFBSUEsQ0FDQUUsWUFBQSxPQUNBSixZQUFBLGdCQUNBQyxRQUFBLENBQ0EsQ0FDQUMsTUFBQSxhQUlBLENBQ0FFLFlBQUEsT0FDQUosWUFBQSxtQkFDQUMsUUFBQSxDQUNBLENBQ0FDLE1BQUEsYUFJQSxDQUNBRSxZQUFBLGdCQUNBSixZQUFBLFdBQ0FDLFFBQUEsQ0FDQSxDQUNBQyxNQUFBLGFBSUEsQ0FDQUUsWUFBQSxlQUNBSixZQUFBLFdBQ0FDLFFBQUEsQ0FDQSxDQUNBQyxNQUFBLGFBSUEsQ0FDQUUsWUFBQSxpQ0FDQUosWUFBQSxXQUNBQyxRQUFBLENBQ0EsQ0FDQUMsTUFBQSxhQUlBLENBQ0FFLFlBQUEsYUFDQUosWUFBQSxtQkFDQUMsUUFBQSxDQUNBLENBQ0FDLE1BQUEsYUFJQSxDQUNBRSxZQUFBLFVBQ0FKLFlBQUEsbUJBQ0FDLFFBQUEsQ0FDQSxDQUNBQyxNQUFBLGFBSUEsQ0FDQUUsWUFBQSxRQUNBSixZQUFBLFdBQ0FDLFFBQUEsQ0FDQSxDQUNBQyxNQUFBLGFBSUEsQ0FDQUUsWUFBQSxRQUNBSixZQUFBLG1CQUNBQyxRQUFBLENBQ0EsQ0FDQUMsTUFBQSxjQUtBakMsUUFBQSxJQWlDQW5uQixRQUFBMkIsSUFBQSxDQUNBWSxXQUFBbkYsZUFBQTRPLEdBQUFwRCxTQUFBdkwsV0FDQWtGLFdBQUFoRixrQkFDQWdGLFdBQUF2RSxtQkFFQW9DLEtBQUEsU0FBQXBELE1BbkNBLElBQUF1c0IsWUFDQUMsTUFDQUMsTUFDQUMsTUFDQUMsTUFDQXhDLFFBZ0NBcGUsYUFBQXRPLElBQUF1QyxLQUFBLEdBQUFBLE1BRUFnUCxHQUFBa2IsS0FBQUMsU0F2Q0FvQyxZQXVDQXZzQixLQUFBLEdBQUFBLEtBQUEyakIsS0F0Q0E2SSxNQUFBLEVBQ0FDLE1BQUEsRUFDQUMsTUFBQSxFQUNBQyxNQUFBLEVBQ0F4QyxRQUFBLEdBQ0FvQyxZQUFBeGtCLFFBQUEsU0FBQTJkLFNBQ0EsR0FBQUEsUUFBQThFLFVBRUEsR0FBQTlFLFFBQUE4RSxRQUFBVSxJQUFBQyxZQUFBLElBQ0EsR0FBQXpGLFFBQUE4RSxRQUFBVSxJQUFBQyxZQUFBLElBQ0EsQ0FDQSxJQUFBeUIsS0FBQSxDQUNBaHJCLEdBQUE4akIsUUFBQXJmLElBQ0F3bUIsU0FBQW5ILFFBQUE4RSxRQUFBVSxJQUFBQyxZQUFBLEdBQ0EyQixVQUFBcEgsUUFBQThFLFFBQUFVLElBQUFDLFlBQUEsSUFFQXFCLE1BQUFBLE1BQUFJLEtBQUFDLFNBQUFELEtBQUFDLFNBQUFMLE1BQ0FFLE1BQUFBLE1BQUFFLEtBQUFDLFNBQUFELEtBQUFDLFNBQUFILE1BQ0FELE1BQUFBLE1BQUFHLEtBQUFFLFVBQUFGLEtBQUFFLFVBQUFMLE1BQ0FFLE1BQUFBLE1BQUFDLEtBQUFFLFVBQUFGLEtBQUFFLFVBQUFILE1BQ0F4QyxRQUFBdGpCLEtBQUEsQ0FBQStsQixLQUFBQyxTQUFBRCxLQUFBRSxlQUlBM0MsU0FlQW5iLEdBQUErZCxjQUFBLENBQ0FDLFFBQUFodEIsS0FBQSxHQUFBQSxLQUNBaXRCLFNBQUFqdEIsS0FBQSxHQUFBQSxLQUFBMmpCLEtBQ0FtRyxRQUFBOXBCLEtBQUEsR0FBQUEsS0FBQTJqQixRQUdBcGdCLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsS0FHQXViLE1BQUEwSixTQUFBdG9CLEtBQUEsU0FBQStDLEtBQ0FBLElBQUFuSixXQUFBLENBQ0FvdEIsT0FBQXBiLEdBQUFrYixLQUFBRSxPQUNBdUIsa0JBQUEsRUFDQXJCLEtBQUEsRUFDQUQsT0FBQSxDQUNBVyxJQUFBLEVBQ0FDLElBQUEsT0FPQSxJQUFBN2YsU0FBQSxFQUNBOGhCLFVBQUEsRUE4RkEsR0E3RkFsZSxHQUFBbWUsY0FBQSxHQUNBbmUsR0FBQW9lLGdCQUFBLEVBQ0FwZSxHQUFBcWUsV0FBQSxDQUNBQyxNQUFBLFVBQ0Fyb0IsTUFBQSxHQUdBK0osR0FBQXVlLFlBQUEsVUFHQTFMLE9BQUEyTCxxQkFBQSxXQUNBam9CLFdBQ0Frb0IsZUFDQXJxQixLQUFBLFNBQUFDLE1BQ0EyTCxHQUFBMGUsa0JBQUFycUIsS0FBQXJELEtBQUEydEIsVUFDQTNlLEdBQUE0ZSxzQkFBQXZ4QixRQUFBcUosS0FBQXNKLEdBQUEwZSxtQkFDQTFlLEdBQUE0ZSxzQkFBQS9tQixLQUFBLENBQ0FSLElBQUEsU0FDQWtuQixZQUFBLHVCQVFBaHFCLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsTUFHQW9iLE9BQUEyTCx1QkFFQXhlLEdBQUE2ZSxpQkFBQSxTQUFBanNCLElBRUEyRCxXQUFBdW9CLGlCQUFBbHNCLEdBREEsR0FDQXdCLEtBQUEsU0FBQUMsTUFDQTJMLEdBQUErZSxhQUFBMXFCLEtBQUFyRCxLQUFBQSxRQUdBZ1AsR0FBQWdmLGNBQUEsRUFFQWhmLEdBQUFpZixnQkFBQSxTQUFBQyxTQUNBLFVBQUFBLFFBQUE3bkIsSUFDQWQsV0FDQWhGLGtCQUNBNkMsS0FBQSxTQUFBQyxNQUNBMkwsR0FBQW1mLGtCQUFBOXFCLEtBQUFyRCxLQUFBMmpCLEtBQ0F4QixFQUFBLGtCQUFBMkUsTUFBQSxVQUVBdmpCLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsTUFHQXVJLEdBQUFnZixjQUFBLEVBQ0EzeEIsUUFBQTBMLFFBQUFpSCxHQUFBMGUsa0JBQUEsU0FBQXRuQixHQUNBLEdBQUFBLEVBQUFDLEtBQUE2bkIsUUFBQTduQixJQUNBLE9BQUEySSxHQUFBZ2YsY0FBQSxJQUdBaGYsR0FBQXVlLFlBQUFXLFFBQUFYLFlBQ0FyaEIsYUFBQXpPLElBQUF5d0IsU0FDQWxmLEdBQUE2ZSxpQkFBQUssUUFBQTduQixPQUtBMkksR0FBQW9mLGNBQUEsU0FBQUYsU0FDQSxJQUFBeFUsTUFBQTFLLEdBQUE0ZSxzQkFBQVMsVUFBQSxTQUFBam9CLEdBQ0EsTUFBQSxVQUFBQSxFQUFBQyxNQUVBMkksR0FBQTRlLHNCQUFBOW1CLE9BQUE0UyxNQUFBLEdBQ0EsSUFBQTRVLGNBQUEsRUFDQWp5QixRQUFBMEwsUUFBQWlILEdBQUEwZSxrQkFBQSxTQUFBdG5CLEdBQ0FBLEVBQUFDLEtBQUE2bkIsUUFBQTduQixNQUNBaW9CLGNBQUEsS0FHQUEsY0FDQXRmLEdBQUE0ZSxzQkFBQS9tQixLQUFBcW5CLFNBR0FsZixHQUFBNGUsc0JBQUEvbUIsS0FBQSxDQUNBUixJQUFBLFNBQ0FrbkIsWUFBQSxxQkFHQXZlLEdBQUFrZixRQUFBQSxRQUNBbGYsR0FBQXVlLFlBQUFXLFFBQUFYLFlBQ0F2ZSxHQUFBZ2YsY0FBQSxFQUNBOWhCLGFBQUF6TyxJQUFBeXdCLFNBRUEvTCxFQUFBLGtCQUFBMkUsTUFBQSxTQUdBeG9CLG9CQUFBWSxJQUFBLGtCQUFBLENBQ0EsSUFBQXF2QixlQUFBandCLG9CQUFBWSxJQUFBLGtCQUNBOFAsR0FBQWtmLFFBQUFLLGVBRUF2ZixHQUFBdWUsWUFBQWdCLGVBQUFoQixZQUNBdmUsR0FBQTZlLGlCQUFBN2UsR0FBQWtmLFFBQUE3bkIsS0FFQSxJQUFBbW9CLG1CQUFBLEVBQ0FueUIsUUFBQTBMLFFBQUFpSCxHQUFBMGUsa0JBQUEsU0FBQXRuQixHQUNBLEdBQUFBLEVBQUFDLEtBQUFrb0IsZUFBQWxvQixJQUNBLE9BQUFtb0IsbUJBQUEsSUFJQUEsbUJBQ0ExTSxTQUFBLFdBQ0EsSUFBQXBJLE1BQUExSyxHQUFBNGUsc0JBQUFTLFVBQUEsU0FBQWpvQixHQUNBLE1BQUEsVUFBQUEsRUFBQUMsTUFFQTJJLEdBQUE0ZSxzQkFBQTltQixPQUFBNFMsTUFBQSxHQUNBMUssR0FBQTRlLHNCQUFBL21CLEtBQUEwbkIsZ0JBQ0F2ZixHQUFBNGUsc0JBQUEvbUIsS0FBQSxDQUNBUixJQUFBLFNBQ0FrbkIsWUFBQSxzQkFFQSxNQU1BcEwsRUFBQSxrQkFBQXJQLEdBQUEsZ0JBQUEsV0FDQTlELEdBQUFvZSxnQkFBQSxJQUdBcGUsR0FBQXlmLG1CQUFBLFdBQ0F0TSxFQUFBLGtCQUFBMkUsTUFBQSxRQUNBOVgsR0FBQWtmLFFBQUEsS0FDQWhpQixhQUFBek8sSUFBQSxLQUdBdVIsR0FBQTBmLGNBQUEsU0FBQTF1QixNQUNBLElBQUEydUIsVUFBQSxFQUNBSCxtQkFBQSxFQUNBbnlCLFFBQUEwTCxRQUFBaUgsR0FBQTBlLGtCQUFBLFNBQUF0bkIsR0FDQSxHQUFBQSxFQUFBQyxLQUFBckcsS0FBQXFHLElBQ0EsT0FBQW1vQixtQkFBQSxJQUlBRyxVQURBSCxrQkFNQWpwQixXQUNBcXBCLGdCQUFBMWlCLGFBQUFoTixNQUFBbUgsSUFBQXNvQixVQUNBdnJCLEtBQUEsU0FBQUMsTUFDQSxHQUFBc3JCLFNBQ0Fsd0IsYUFBQThILFFBQUEsbUNBQ0F5SSxHQUFBMGUsa0JBQUE3bUIsS0FBQTdHLE1BQ0FnUCxHQUFBZ2YsY0FBQSxNQUNBLENBQ0F2dkIsYUFBQThILFFBQ0EsbURBRUEsSUFBQW1ULE1BQUExSyxHQUFBMGUsa0JBQUFXLFVBQUEsU0FBQWpvQixHQUNBLE9BQUFBLEVBQUFDLEtBQUFyRyxLQUFBcUcsTUFFQTJJLEdBQUEwZSxrQkFBQTVtQixPQUFBNFMsTUFBQSxHQUNBMUssR0FBQWdmLGNBQUEsS0FHQXpxQixNQUFBLFNBQUFDLEtBQ0FuQyxRQUFBQyxJQUFBa0MsUUFJQXdMLEdBQUE2ZixRQUFBLFdBQ0F6akIsVUFDQUEsU0FBQSxFQUNBMFcsU0FBQSxXQUNBMVcsU0FBQSxHQUNBLEtBQ0E4aEIsV0FBQSxFQUNBM25CLFdBQ0FoRixnQkFBQSxDQUNBaWpCLE9BQUF4VSxHQUFBbWUsY0FDQW5PLE1BQUFrTyxVQUNBeGpCLEtBQUEsRUFDQTZaLEtBQUF2VSxHQUFBcWUsV0FBQUMsTUFDQTdKLFNBQUF6VSxHQUFBcWUsV0FBQXBvQixPQUVBN0IsS0FBQSxTQUFBQyxNQUNBMkwsR0FBQW1mLGtCQUFBOXFCLEtBQUFyRCxLQUFBMmpCLE9BRUFwZ0IsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixPQU1BdUksR0FBQThmLGtCQUFBLENBQ0FsbUIsT0FBQSxPQUdBb0csR0FBQStmLGVBQUEsU0FBQXBpQixNQUNBcEgsV0FDQWhGLGdCQUFBLENBQ0FpakIsT0FBQXhVLEdBQUFtZSxjQUNBbk8sTUFBQWtPLFVBQ0F4akIsS0FBQSxFQUNBNlosS0FBQXZVLEdBQUFxZSxXQUFBQyxNQUNBN0osU0FBQXpVLEdBQUFxZSxXQUFBcG9CLE9BRUE3QixLQUFBLFNBQUFDLE1BQ0EyTCxHQUFBbWYsa0JBQUE5cUIsS0FBQXJELEtBQUEyakIsT0FFQXBnQixNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLE1BS0F1SSxHQUFBdVUsS0FBQSxTQUFBK0osT0FDQXRlLEdBQUFxZSxXQUFBQyxRQUFBQSxNQUNBdGUsR0FBQXFlLFdBQUFwb0IsTUFBQStKLEdBQUFxZSxXQUFBcG9CLE1BRUErSixHQUFBcWUsV0FBQUMsTUFBQUEsTUFDQXRlLEdBQUFxZSxXQUFBcG9CLE1BQUEsR0FHQU0sV0FDQWhGLGdCQUFBLENBQ0FpakIsT0FBQXhVLEdBQUFtZSxjQUNBbk8sTUFBQWtPLFVBQ0F4akIsS0FBQSxFQUNBNlosS0FBQXZVLEdBQUFxZSxXQUFBQyxNQUNBN0osU0FBQXpVLEdBQUFxZSxXQUFBcG9CLE9BRUE3QixLQUFBLFNBQUFDLE1BQ0EyTCxHQUFBbWYsa0JBQUE5cUIsS0FBQXJELEtBQUEyakIsT0FFQXBnQixNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLE1BSUF1SSxHQUFBeFAsT0FBQSxXQUNBQSxVQUdBcWlCLE9BQUFtTixhQUFBLFdBQ0EzdEIsUUFBQUMsSUFBQSxxQkFFQWlFLFdBQUEwcEIsWUFBQTdyQixLQUFBLFNBQUE4ckIsVUFDQTd0QixRQUFBQyxJQUFBLFlBQUE0dEIsYUFZQWxnQixHQUFBbWdCLGdCQUFBLFdBQ0E5dEIsUUFBQUMsSUFBQSxVQUFBNEssYUFBQWhOLE9BQ0FnTixhQUFBaE4sTUFDQWQsT0FBQXNOLEdBQUEsZ0JBRUFqTixhQUFBdUgsUUFBQSwyQkFDQW1jLEVBQUEsY0FBQWlOLFFBQ0EsQ0FDQUMsVUFBQWxOLEVBQUEsWUFBQW5CLFNBQUFzTyxLQUVBLElBQ0EsV0FDQW5OLEVBQUEsa0JBQ0FvTixRQUNBNU0sU0FBQSxTQUNBclgsV0FBQSxXQUNBNlcsRUFBQSxrQkFBQU8sWUFBQSxVQUNBLFNBUUExVCxHQUFBd2dCLGdCQUFBLEdBQ0F4Z0IsR0FBQXlnQixZQUFBLEdBRUF6Z0IsR0FBQTBnQixlQUFBLFdBQ0F4akIsYUFBQWhOLE9BSUFxRyxXQUNBMUQsb0JBQUFxSyxhQUFBaE4sTUFBQW1ILEtBQ0FqRCxLQUFBLFNBQUFDLE1BQ0EsSUFBQXNzQixVQUFBdHNCLEtBQUFyRCxLQUFBQSxLQUNBMUIsb0JBQUFiLElBQUEsa0JBQUF5TyxhQUFBaE4sTUFBQW1ILEtBQ0EvSCxvQkFBQWIsSUFBQSxZQUFBa3lCLFdBQ0EzZ0IsR0FBQXdnQixnQkFBQUcsVUFDQXhOLEVBQUEsb0JBQUEyRSxNQUFBLFVBRUF2akIsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixLQUdBbEIsV0FDQXFxQixhQUFBMWpCLGFBQUFoTixNQUFBbUgsS0FFQWpELEtBQUEsU0FBQUMsTUFDQTJMLEdBQUE2Z0IsVUFBQSxFQUNBN2dCLEdBQUF5Z0IsWUFBQXBzQixLQUFBckQsS0FBQUEsS0FBQTh2QixjQUVBdnNCLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsTUF4QkFoSSxhQUFBdUgsUUFBQSx3QkE0QkFnSixHQUFBK2dCLFdBQUEsU0FBQUMsTUFDQTdOLEVBQUEsb0JBQUEyRSxNQUFBLFFBQ0F4b0Isb0JBQUFiLElBQUEsZUFBQXV5QixNQUNBNXhCLE9BQUFzTixHQUFBLGtCQUdBc0QsR0FBQWloQixjQUFBLFdBQ0E5TixFQUFBLGlFQUFBMkUsTUFDQSxTQUlBOVgsR0FBQWtoQixXQUFBLFdBQ0FsaEIsR0FBQW1oQixjQUFBOXpCLFFBQUFxSixLQUFBc0osR0FBQXlnQixhQUNBdE4sRUFBQSxlQUFBMkUsTUFBQSxRQUNBM0UsRUFBQSxlQUFBQyxJQUFBLFVBQUEsU0FDQUQsRUFBQSw2QkFBQUMsSUFBQSxDQUNBZ08scUJBQUEsdUNBQ0FDLGtCQUFBLHVDQUNBQyxhQUFBLHlDQUVBbk8sRUFBQSxlQUFBNU0sT0FDQTRNLEVBQUEsZ0JBQUFvTyxPQUNBdmhCLEdBQUF3aEIsT0FBQSxVQUNBM08sT0FBQTRPLFdBQUEsY0FDQSxlQUFBNU8sT0FBQTRPLFdBQ0E1TyxPQUFBNk8sYUFBQSxFQUVBN08sT0FBQTZPLGFBQUEsR0FHQTdPLE9BQUE4TyxJQUFBLFNBQUEsU0FBQWxxQixFQUFBekcsTUFDQWdQLEdBQUFnZCxPQUFBaHNCLEtBQ0FnUCxHQUFBZ2QsT0FDQTdKLEVBQUEsUUFBQVEsU0FBQSxjQUVBUixFQUFBLFFBQUFPLFlBQUEsZ0JBR0FiLE9BQUE4TyxJQUFBLHNCQUFBLFNBQUFscUIsRUFBQXpHLE1BQ0FnUCxHQUFBNGhCLHFCQUFBNXdCLEtBRUFnUCxHQUFBNmhCLG1CQUNBN3dCLEtBQUFtSCxZQUFBdkcsT0FBQSxTQUFBQyxJQUFBdUYsR0FFQSxPQURBdkYsS0FBQXVGLEVBQUF2QyxLQUFBLE9BRUEsSUFBQTdELEtBQUF1SSxVQUVBLGFBQUFmLEtBQUF4SCxLQUFBeU8sYUFDQU8sR0FBQThoQixVQUFBdnlCLFFBQUFrUCxvQkFBQXpOLEtBQUF5TyxXQUFBek8sS0FBQTJPLE9BQ0FLLEdBQUFnZCxRQUFBLEVBQ0E3SixFQUFBLG9CQUFBQyxJQUFBLGFBQUEsVUFDQUQsRUFBQSxlQUFBMkUsTUFBQSxRQUNBM0UsRUFBQSxlQUFBQyxJQUFBLFVBQUEsU0FDQXBULEdBQUEraEIsU0FBQTEwQixRQUFBcUosS0FBQXNKLEdBQUE4aEIsV0FDQXp2QixRQUFBQyxJQUFBME4sR0FBQThoQixZQUVBOXdCLEtBQUFneEIsY0FDQWxQLFNBQUEsV0FDQUQsT0FBQW9QLFdBRUFqaUIsR0FBQWtpQixhQUFBbGlCLEdBQUEraEIsU0FBQS93QixLQUFBbXhCLFdBQUFockIsSUFBQSxTQUFBQyxFQUFBNEgsR0FDQSxJQUFBb0gsSUFBQSxDQUNBbEgsT0FBQUYsRUFDQUksTUFBQUEsU0FBQXJGLEtBQUFDLE1BQ0FqTCxJQUFBcUksRUFDQWlJLFVBQUEsRUFDQUMsWUFBQSxJQUdBLE9BQUE4RyxNQUdBcEcsR0FBQWdkLFFBQUEsRUFDQTdKLEVBQUEsb0JBQUFDLElBQUEsYUFBQSxVQUNBRCxFQUFBLGVBQUEyRSxNQUFBLFFBQ0EzRSxFQUFBLGVBQUFDLElBQUEsVUFBQSxVQUVBN2pCLFFBQUFnUSxtQkFBQXZPLE1BQUFvRCxLQUFBLFNBQUF1TCxPQUNBbVQsU0FBQSxXQUNBRCxPQUFBb1AsV0FFQWppQixHQUFBa2lCLGFBQUF2aUIsTUFDQUssR0FBQStoQixTQUFBcGlCLE1BQ0FLLEdBQUFnZCxRQUFBLEVBQ0E3SixFQUFBLG9CQUFBQyxJQUFBLGFBQUEsVUFDQUQsRUFBQSxxQkFBQTJFLE1BQUEsUUFDQTNFLEVBQUEscUJBQUFDLElBQUEsVUFBQSxhQUtBcFQsR0FBQW9pQixlQUFBLFdBQ0FqUCxFQUFBLG9CQUFBQyxJQUFBLGFBQUEsV0FDQUQsRUFBQSxlQUFBQyxJQUFBLFVBQUEsU0FFQXBULEdBQUFxaUIsaUJBQUEsU0FBQWpxQixJQUFBbkMsS0FBQXFzQixPQUNBLEdBQUEsVUFBQWxxQixJQVNBLEdBUkErYSxFQUFBLCtDQUFBQyxJQUFBLFVBQUEsUUFDQUQsRUFBQSxvQkFBQUMsSUFBQSxhQUFBLFdBQ0FwVCxHQUFBdWlCLGNBQUEsR0FDQWwxQixRQUFBMEwsUUFBQWlILEdBQUEraEIsU0FBQSxTQUFBM3FCLEdBQ0FBLEVBQUFpSSxVQUNBVyxHQUFBdWlCLGNBQUExcUIsS0FBQVQsS0FHQSxJQUFBbkIsS0FBQSxDQUNBLElBQUF1c0IsVUFDQUYsTUFBQU4sY0FBQSxhQUFBeHBCLEtBQUE4cEIsTUFBQTdpQixZQUNBLHFCQUNBLHdCQUVBN08sUUFBQSxDQUNBc0csUUFBQW9yQixNQUFBanJCLElBQ0F2RSxVQUFBb0ssYUFBQWhOLE1BQUFtSCxJQUNBc0ksTUFBQUssR0FBQXVpQixlQUdBaHNCLFdBQUFpc0IsVUFBQTV4QixTQUNBd0QsS0FBQSxTQUFBQyxNQUNBNUUsYUFBQThILFFBQUFsRCxLQUFBckQsS0FBQXdHLFNBQ0FqQixXQUNBMUQsb0JBQUFxSyxhQUFBaE4sTUFBQW1ILEtBQ0FqRCxLQUFBLFNBQUFDLE1BQ0EsSUFBQXNzQixVQUFBdHNCLEtBQUFyRCxLQUFBQSxLQUNBMUIsb0JBQUFiLElBQ0Esa0JBQ0F5TyxhQUFBaE4sTUFBQW1ILEtBRUEvSCxvQkFBQWIsSUFBQSxZQUFBa3lCLFdBQ0EzZ0IsR0FBQXdnQixnQkFBQUcsWUFFQXBzQixNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLE9BR0FsRCxNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLFNBRUEsQ0FFQSxJQUFBN0csU0FBQSxDQUNBc0csUUFBQW9yQixNQUFBanJCLElBQ0FvckIsT0FBQUgsTUFBQTdpQixXQUNBM00sVUFBQW9LLGFBQUFoTixNQUFBbUgsSUFDQXNJLE1BQUFLLEdBQUF1aUIsY0FBQTN3QixPQUFBLFNBQUFDLElBQUF1RixHQUNBLElBQUFnUCxJQUFBLENBQ0FoSCxNQUFBaEksRUFBQWdJLE1BQ0FFLFlBQUFsSSxFQUFBa0ksWUFDQUosT0FBQTlILEVBQUE4SCxRQUdBLE9BREFyTixJQUFBZ0csS0FBQXVPLEtBQ0F2VSxLQUNBLEtBRUEwRSxXQUNBbXNCLGtCQUFBOXhCLFVBQ0F3RCxLQUFBLFNBQUFDLE1BQ0E1RSxhQUFBOEgsUUFBQWxELEtBQUFyRCxLQUFBd0csU0FDQWpCLFdBQ0ExRCxvQkFBQXFLLGFBQUFoTixNQUFBbUgsS0FDQWpELEtBQUEsU0FBQUMsTUFDQSxJQUFBc3NCLFVBQUF0c0IsS0FBQXJELEtBQUFBLEtBQ0ExQixvQkFBQWIsSUFDQSxrQkFDQXlPLGFBQUFoTixNQUFBbUgsS0FFQS9ILG9CQUFBYixJQUFBLFlBQUFreUIsV0FDQTNnQixHQUFBd2dCLGdCQUFBRyxZQUVBcHNCLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsT0FHQWxELE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsU0FHQSxTQUFBVyxNQUNBK2EsRUFBQSwrQ0FBQUMsSUFBQSxVQUFBLFFBQ0FELEVBQUEsb0JBQUFDLElBQUEsYUFBQSxlQTl4QkEsR0NBQSxXQUNBL2xCLFFBQUFDLE9BQUEsT0FBQTJCLFdBQUEsZ0JBRUEsU0FDQTRqQixPQUNBQyxTQUNBQyxZQUNBM2pCLE9BQ0FtSCxXQUNBOUcsYUFDQXVqQixNQUNBempCLFFBQ0FELHFCQUVBLElBRUFrQixPQUFBakIsUUFBQWlCLE9BRUF1aUIsWUFBQWhkLGFBQ0F2RixTQUxBTSxLQVNBTixPQUFBLFdBQ0FBLFlBeEJBLEdDQUEsV0FDQW5ELFFBQUFDLE9BQUEsT0FBQTJCLFdBQUEsZ0JBRUEsU0FDQTRqQixPQUNBQyxTQUNBQyxZQUNBM2pCLE9BQ0FtSCxXQUNBOUcsYUFDQUYsUUFDQUMsUUFJQXFqQixPQUFBOFAsVUFBQSxDQUNBLENBQUFwUCxJQUFBLCtCQUFBblUsTUFBQSxnQkFBQXdqQixTQUFBLFlBQUFDLEtBQUEsWUFBQUMsSUFBQSx3QkFDQSxDQUFBdlAsSUFBQSwrQkFBQW5VLE1BQUEsZ0JBQUF3akIsU0FBQSxZQUFBQyxLQUFBLE1BQUFDLElBQUEsVUFDQSxDQUFBdlAsSUFBQSwrQkFBQW5VLE1BQUEsZ0JBQUF3akIsU0FBQSxZQUFBQyxLQUFBLFlBQUFDLElBQUEsd0JBQ0EsQ0FBQXZQLElBQUEsK0JBQUFuVSxNQUFBLGdCQUFBd2pCLFNBQUEsWUFBQUMsS0FBQSxZQUFBQyxJQUFBLHdCQUNBLENBQUF2UCxJQUFBLCtCQUFBblUsTUFBQSxnQkFBQXdqQixTQUFBLFlBQUFDLEtBQUEsTUFBQUMsSUFBQSxVQUNBLENBQUF2UCxJQUFBLCtCQUFBblUsTUFBQSxnQkFBQXdqQixTQUFBLFlBQUFDLEtBQUEsWUFBQUMsSUFBQSx3QkFDQSxDQUFBdlAsSUFBQSwrQkFBQW5VLE1BQUEsZ0JBQUF3akIsU0FBQSxZQUFBQyxLQUFBLFlBQUFDLElBQUEsd0JBQ0EsQ0FBQXZQLElBQUEsK0JBQUFuVSxNQUFBLGdCQUFBd2pCLFNBQUEsWUFBQUMsS0FBQSxNQUFBQyxJQUFBLFVBQ0EsQ0FBQXZQLElBQUEsK0JBQUFuVSxNQUFBLGdCQUFBd2pCLFNBQUEsWUFBQUMsS0FBQSxZQUFBQyxJQUFBLHlCQUVBalEsT0FBQWtRLFdBQUEsQ0FDQSxDQUFBeFAsSUFBQSxpQ0FDQSxDQUFBQSxJQUFBLGlDQUNBLENBQUFBLElBQUEsa0NBRUFWLE9BQUFtUSxlQUFBLENBQ0EsQ0FBQXpQLElBQUEseUJBQUF0ZCxLQUFBLGtCQUNBLENBQUFzZCxJQUFBLHlCQUFBdGQsS0FBQSxrQkFDQSxDQUFBc2QsSUFBQSx5QkFBQXRkLEtBQUEsbUJBR0EsSUFBQStKLEdBQUFsUCxLQUNBTixPQUFBakIsUUFBQWlCLE9BQUFDLFVBQUFsQixRQUFBa0IsVUFDQSxJQUFBc2lCLFlBQUFoZCxZQUVBLFlBREF2RixTQUdBMmlCLEVBQUEsZ0JBQUFvTyxPQUdBdmhCLEdBQUFwRCxTQUFBbk0sVUFBQVAsTUFFQThQLEdBQUF4UCxPQUFBLFdBQ0FBLFVBR0EyaUIsRUFBQSxpQkFBQUUsWUFDQTljLFdBQ0FsRCxvQkFDQWUsS0FBQSxTQUFBQyxNQUNBMkwsR0FBQTJpQixVQUFBdHVCLEtBQUFyRCxLQUFBMmpCLE9BRUFwZ0IsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixLQUlBdUksR0FBQXVWLFVBQUEsQ0FDQUMsUUFBQSxFQUNBaEQsTUFBQSxFQUNBMEMsVUFBQSxHQUVBL0IsRUFBQSxrQkFBQUUsWUFFQVIsT0FBQWUsZ0JBQUEsRUFFQTVULEdBQUE2VCxZQUFBLEVBRUE3VCxHQUFBOFQsVUFBQSxDQUNBbVAsV0FBQSxFQUNBNUssY0FBQSxFQUNBSSxZQUFBLEVBQ0F5SyxXQUFBLEVBQ0FydUIsTUFBQSxHQUVBbUwsR0FBQTNDLFdBQUEsR0FDQTJDLEdBQUFtakIsY0FBQSxTQUFBbHRCLFdBRUFqRyxJQUFBZ1EsR0FBQThULFVBQUE3ZCxNQUNBK0osR0FBQThULFVBQUE3ZCxPQUFBLEVBQ0ErSixHQUFBOFQsVUFBQTdkLE9BQUErSixHQUFBOFQsVUFBQTdkLE1BRUFNLFdBQ0FsRCxrQkFBQSxDQUNBcUgsS0FBQSxFQUNBc1YsTUFBQSxHQUNBdUUsS0FBQXRlLEtBQ0F1ZSxPQUFBeFUsR0FBQTNDLFdBQ0FvWCxTQUFBelUsR0FBQThULFVBQUE3ZCxRQUVBN0IsS0FBQSxTQUFBQyxNQUNBMkwsR0FBQTJpQixVQUFBdHVCLEtBQUFyRCxLQUFBMmpCLEtBQ0EzVSxHQUFBb2pCLGVBQUEvdUIsS0FBQXJELEtBQUE2akIsTUFDQS9CLFNBQUEsV0FDQUssRUFBQSx3QkFBQTJCLFdBQUEsQ0FDQXJlLE1BQUF1SixHQUFBb2pCLGVBQ0FyTyxZQUFBLEdBQ0FDLFNBQUEsY0FDQUMsZUFBQSxJQUNBQyxVQUFBLEVBQ0FyQixZQUFBLEVBQ0FzQixZQUFBLFNBQUF6YSxLQUFBa1AsT0FDQUEsTUFBQXdMLGlCQUNBN2UsV0FDQWxELGtCQUFBLENBQ0FxSCxLQUFBQSxLQUNBc1YsTUFBQSxHQUNBdUUsS0FBQXRlLEtBQ0F3ZSxTQUFBelUsR0FBQThULFVBQUE3ZCxRQUVBN0IsS0FBQSxTQUFBQyxNQUNBMkwsR0FBQTJpQixVQUFBdHVCLEtBQUFyRCxLQUFBMmpCLE9BRUFwZ0IsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixZQU1BbEQsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixNQUlBdUksR0FBQXFqQixnQkFBQSxTQUFBMWxCLE1BQ0FwSCxXQUNBbEQsa0JBQUEsQ0FDQXFILEtBQUEsRUFDQXNWLE1BQUEsR0FDQXdFLE9BQUE3VyxLQUNBNFcsS0FBQSxjQUNBRSxVQUFBLElBRUFyZ0IsS0FBQSxTQUFBQyxNQUNBMkwsR0FBQTJpQixVQUFBdHVCLEtBQUFyRCxLQUFBMmpCLEtBQ0EzVSxHQUFBb2pCLGVBQUEvdUIsS0FBQXJELEtBQUE2akIsTUFDQS9CLFNBQUEsV0FDQUssRUFBQSx3QkFBQTJCLFdBQUEsQ0FDQXJlLE1BQUF1SixHQUFBb2pCLGVBQ0FyTyxZQUFBLEdBQ0FDLFNBQUEsY0FDQUMsZUFBQSxJQUNBQyxVQUFBLEVBQ0FyQixZQUFBLEVBQ0FzQixZQUFBLFNBQUF6YSxLQUFBa1AsT0FDQUEsTUFBQXdMLGlCQUNBN2UsV0FDQWxELGtCQUFBLENBQ0FxSCxLQUFBQSxLQUNBc1YsTUFBQSxHQUNBdUUsS0FBQXRlLEtBQ0F3ZSxTQUFBelUsR0FBQThULFVBQUE3ZCxRQUVBN0IsS0FBQSxTQUFBQyxNQUNBMkwsR0FBQTJpQixVQUFBdHVCLEtBQUFyRCxLQUFBMmpCLE9BRUFwZ0IsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixZQU1BbEQsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixNQUtBdUksR0FBQW1qQixjQUFBLGFBS0FuakIsR0FBQXNqQixZQUFBLENBQ0FDLGlCQUFBLEdBR0F2akIsR0FBQXdqQixZQUFBLENBQ0FDLFNBQUEsR0FHQWx0QixXQUNBbkYsZUFBQTRPLEdBQUFwRCxTQUFBdkwsV0FDQStDLEtBQUEsU0FBQUMsTUFDQTJMLEdBQUFoRCxZQUFBM0ksS0FBQXJELEtBQ0FnUCxHQUFBc2pCLFlBQUFJLFNBQUExakIsR0FBQWhELFlBQUEybUIsZ0JBQUExTSxlQUVBN2lCLEtBQUEsU0FBQXFELEdBQ0FwRixRQUFBQyxJQUFBbUYsS0FHQXVJLEdBQUFqTSxtQkFBQSxTQUFBNnZCLEtBQUFDLElBQ0EsSUFBQUMsYUFBQSxDQUNBRixLQUFBQSxLQUNBQyxHQUFBQSxJQUVBdHRCLFdBQ0F4QyxtQkFBQSt2QixjQUNBMXZCLEtBQUEsU0FBQUMsTUFDQTJMLEdBQUFzakIsWUFBQUMsaUJBQUFsdkIsS0FBQXJELEtBQUF1eUIsbUJBRUFodkIsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixNQUlBdUksR0FBQW5DLE9BQUF0TyxRQUFBc08sT0FFQXRPLFFBQUF1TyxjQUFBMUosS0FBQSxTQUFBQyxNQUNBMkwsR0FBQStqQixXQUFBMXZCLEtBQUFyRCxPQUdBZ1AsR0FBQWdrQixTQUFBLGdCQUVBaDBCLElBQUFnUSxHQUFBc2pCLFlBQUFXLGNBQ0EsTUFBQWprQixHQUFBc2pCLFlBQUFXLG1CQUdBajBCLElBQUFnUSxHQUFBc2pCLFlBQUFZLGNBQ0EsTUFBQWxrQixHQUFBc2pCLFlBQUFZLG1CQUdBbDBCLElBQUFnUSxHQUFBc2pCLFlBQUFJLFVBQ0EsS0FBQTFqQixHQUFBc2pCLFlBQUFJLGVBR0ExekIsSUFBQWdRLEdBQUFzakIsWUFBQUMsa0JBQ0EsS0FBQXZqQixHQUFBc2pCLFlBQUFDLGtCQUVBcFEsRUFBQSw2QkFBQXFILEtBQ0EsUUFDQSxvREFFQXJILEVBQUEsZ0NBQUFvTyxPQUNBcE8sRUFBQSxxQkFBQXFILEtBQUEsWUFBQSxLQTBCQXJILEVBQUEsNkJBQUFxSCxLQUNBLFFBQ0EsNENBRUFySCxFQUFBLGdDQUFBNU0sT0FDQTRNLEVBQUEscUJBQUFxSCxLQUFBLFlBQUEsS0FJQXhhLEdBQUFta0IsZ0JBQUEsV0FFQW4wQixNQUFBZ1EsR0FBQXNqQixZQUFBVyxjQUNBLEtBQUFqa0IsR0FBQXNqQixZQUFBVyxhQU9BajBCLE1BQUFnUSxHQUFBc2pCLFlBQUFZLGNBQ0EsS0FBQWxrQixHQUFBc2pCLFlBQUFZLGFBT0FsMEIsTUFBQWdRLEdBQUFzakIsWUFBQUksVUFDQSxLQUFBMWpCLEdBQUFzakIsWUFBQUksU0FNQTdRLE9BQUFlLGdCQUFBLEVBSkFua0IsYUFBQWtOLE1BQUEsMEJBUkFsTixhQUFBa04sTUFBQSwrQkFSQWxOLGFBQUFrTixNQUFBLCtCQXVCQXFELEdBQUFva0IsV0FBQSxTQUFBQyxLQUFBQyxnQkFDQSxPQUFBRCxLQUFBQyxnQkFHQXRrQixHQUFBdWtCLG1CQUFBLFdBQ0EsSUFBQWxJLFNBQUEsQ0FDQXhuQixLQUFBbUwsR0FBQXNqQixZQUFBVyxhQUNBOWQsS0FBQW5HLEdBQUFzakIsWUFBQVksYUFDQU0sZUFBQSxDQUNBL21CLE1BQUF1QyxHQUFBb2tCLFdBQ0Fwa0IsR0FBQXNqQixZQUFBbUIsbUJBQ0F6a0IsR0FBQXNqQixZQUFBQyxrQkFFQXRNLGFBQUFqWCxHQUFBaEQsWUFBQTJtQixnQkFBQTFNLGNBRUF3QixXQUFBLENBQ0FoYixNQUFBdUMsR0FBQW9rQixXQUNBcGtCLEdBQUFzakIsWUFBQW9CLGdCQUNBMWtCLEdBQUFzakIsWUFBQUMsa0JBRUF0TSxhQUFBalgsR0FBQWhELFlBQUEybUIsZ0JBQUExTSxjQUVBN2hCLE1BQUE0SyxHQUFBNGEsWUFHQXJrQixXQUNBckQsZ0JBQUFtcEIsVUFDQWpvQixLQUFBLFNBQUFDLE1BQ0E4ZSxFQUFBLGtCQUFBMkUsTUFBQSxRQUNBcm9CLGFBQUE4SCxRQUFBbEQsS0FBQXJELEtBQUF3RyxTQUNBd0ksR0FBQW1qQixjQUFBLGFBRUFuakIsR0FBQXNqQixZQUFBLENBQ0FDLGlCQUFBLEtBR0FodkIsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixRQXRWQSxHQ0FBLFdBQ0FwSyxRQUFBQyxPQUFBLE9BQUEyQixXQUFBLG9CQUVBLFNBQ0E0akIsT0FDQUMsU0FDQUMsWUFDQTNqQixPQUNBbUgsV0FDQTlHLGFBQ0FGLFFBQ0F3b0IsYUFDQXZvQixRQUlBLElBQ0FnQixPQUFBakIsUUFBQWlCLE9BQUFDLFVBQUFsQixRQUFBa0IsVUFDQSxJQUFBc2lCLFlBQUFoZCxZQUVBLFlBREF2RixTQUhBTSxLQU1BTixPQUFBLFdBQ0FBLFVBUEFNLEtBVUE4TCxTQUFBbk0sVUFBQVAsTUFWQVksS0FZQWtZLFlBQUErTyxhQUFBbmxCLEdBQ0EyRCxXQUFBNUMsaUJBYkE3QyxLQWFBa1ksYUFBQTVVLEtBQUEsU0FBQUMsTUFDQWhDLFFBQUFDLElBQUErQixRQUNBRSxNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLE9BaENBLEdDQUEsV0FDQXBLLFFBQUFDLE9BQUEsT0FBQTJCLFdBQUEsa0JBRUEsU0FDQTRqQixPQUNBMWpCLE1BQ0E0dEIsUUFDQWpLLFNBQ0FDLFlBQ0EzakIsT0FDQW1ILFdBQ0E5RyxhQUNBRixRQUNBdVEsbUJBQ0FELGVBSUEsSUFBQUcsR0FBQWxQLEtBRUFOLE9BS0FqQixRQUxBaUIsT0FDQUMsVUFJQWxCLFFBSkFrQixVQUNBeU0sYUFHQTNOLFFBSEEyTixhQUNBcUIsYUFFQWhQLFFBRkFnUCxhQUdBL0gsV0FEQWpILFFBREFvMUIsZ0JBRUE3a0IsbUJBQUF0SixXQUNBLElBQUF1YyxZQUFBaGQsWUFFQSxZQURBdkYsU0FLQXdQLEdBQUFwRCxTQUFBbk0sVUFBQVAsTUFDQThQLEdBQUF4UCxPQUFBLFdBQ0FBLFVBR0ErRixXQUNBaEYsa0JBQ0E2QyxLQUFBLFNBQUFDLE1BQ0EyTCxHQUFBdWQsWUFBQWxwQixLQUFBckQsS0FFQSxJQUFBaXVCLGdCQUFBL2hCLGFBQUFoTixNQUVBOFAsR0FBQWlmLGdCQUFBQSxnQkFBQTVuQixJQUVBMkksR0FBQTRrQixrQkFBQTNGLG1CQUdBMXFCLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsS0FHQXVJLEdBQUF5Z0IsWUFBQSxHQUVBemdCLEdBQUE2a0IsY0FBQTNuQixhQUFBaE4sTUFBQTIwQixjQUVBN2tCLEdBQUE4a0IsWUFBQSxDQUNBQyxXQUFBLEdBQ0FDLFFBQUEsR0FDQTV2QixNQUFBLElBR0E0SyxHQUFBaWxCLGlCQUFBLFNBQUFDLFVBQ0EsSUFBQUMsWUFBQUQsU0FBQUUsT0FBQUMsT0FDQUMsVUFBQUEsRUFTQSxNQVBBLE9BQUE5c0IsS0FBQTJzQixhQUNBRyxLQUFBLE1BQ0EsTUFBQTlzQixLQUFBMnNCLGFBQ0FHLEtBQUEsTUFDQSxNQUFBOXNCLEtBQUEyc0IsZUFDQUcsS0FBQSxPQUVBQSxNQUVBdGxCLEdBQUE2Z0IsVUFBQSxFQUNBN2dCLEdBQUE0a0Isa0JBQUEsU0FBQTNGLGdCQUFBdEssTUFDQUEsS0FFQXpYLGFBQUF6TyxJQUNBa21CLEtBQUEvYSxPQUFBLFNBQUF4QyxHQUNBLE9BQUFBLEVBQUFDLE1BQUE0bkIsa0JBSUEsSUFHQS9oQixhQUFBek8sSUFBQXd3QixpQkFHQWpmLEdBQUE2a0IsY0FBQTNuQixhQUFBaE4sTUFBQTIwQixjQUVBN3dCLFFBQUEyQixJQUFBLENBQ0FZLFdBQUFxcUIsYUFBQTFqQixhQUFBaE4sTUFBQW1ILEtBQ0FkLFdBQUFndkIsa0JBQUFyb0IsYUFBQWhOLE1BQUFtSCxPQUVBakQsS0FBQSxTQUFBQyxNQUNBMkwsR0FBQTZnQixVQUFBLEVBQ0E3Z0IsR0FBQXlnQixZQUFBcHNCLEtBQUEsR0FBQXJELEtBQUFBLEtBQUE4dkIsWUFDQTlnQixHQUFBK2UsYUFBQTFxQixLQUFBLEdBQUFyRCxLQUFBQSxLQUNBZ1AsR0FBQXdsQix3QkFBQSxTQUFBN1AsUUFDQSxPQUFBLElBQUEzaEIsUUFBQSxTQUFBQyxRQUFBQyxRQUNBRCxRQUFBK0wsR0FBQStlLG1CQUlBeHFCLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsTUFPQXVJLEdBQUF5bEIsVUFBQSxTQUFBN3lCLElBQ0EyRCxXQUNBbXZCLHFCQUFBOXlCLElBQ0F3QixLQUFBLFNBQUFDLE1BQ0FoQyxRQUFBQyxJQUFBK0IsS0FBQXJELFFBRUF1RCxNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLE1BTUEsSUFBQWt1QixnQkFBQXBuQixlQUVBeUIsR0FBQTRsQixZQUFBLENBQ0FDLE9BQUEsU0FBQXYxQixPQUFBdzFCLEtBQUFDLFdBQ0EsT0FBQXoxQixPQUFBc0ksT0FDQStzQixnQkFBQW5uQixNQUFBc25CLE9BQ0EsSUFJQUUsU0FBQSxTQUFBcGMsT0FBQSxJQUNBdFosT0FBQXNaLE1BQUF0WixPQUFBc1osTUFBQWtjLEtBRUEsR0FBQXgxQixPQUFBMjFCLFVBQUFydEIsS0FBQSxDQUVBLElBQUFzdEIsWUFBQVAsZ0JBQUF6MUIsTUFDQSxJQUFBZzJCLFlBQUFDLFdBRUEsT0FFQSxJQUFBdjFCLFFBQUEsQ0FDQXNHLFFBQUE1RyxPQUFBMjFCLFVBQUFydEIsS0FBQXZCLElBQ0FDLFNBQUFoSCxPQUFBMjFCLFVBQUFHLFFBQUFELFdBQUFFLFlBQUFodkIsSUFDQVAsT0FBQW92QixZQUFBQyxXQUFBRSxZQUFBaHZCLEtBR0FkLFdBQ0ErdkIsV0FBQTExQixTQUNBd0QsS0FBQSxTQUFBQyxNQUNBNUUsYUFBQThILFFBQUFsRCxLQUFBckQsS0FBQXdHLFdBRUFqRCxNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLEtBR0F5dUIsWUFBQUMsV0FBQUUsWUFBQWp4QixNQUNBOHdCLFlBQUFDLFdBQUFFLFlBQUFqeEIsTUFBQXlDLEtBQ0F2SCxPQUFBMjFCLFVBQUFydEIsTUFHQXN0QixZQUFBQyxXQUFBRSxZQUFBanhCLE1BQUEsQ0FBQTlFLE9BQUEyMUIsVUFBQXJ0QixNQUlBdEksT0FBQTIxQixVQUFBRyxRQUFBRCxXQUFBRSxZQUFBanhCLE1BQUE5RSxPQUFBMjFCLFVBQUFHLFFBQUFELFdBQUFFLFlBQUFqeEIsTUFBQXdFLE9BQ0EsU0FBQXhDLEdBQUEsT0FBQUEsRUFBQUMsTUFBQS9HLE9BQUEyMUIsVUFBQXJ0QixLQUFBdkIsUUFJQWt2QixRQUFBLFNBQUEzYyxPQUFBLElBQ0F0WixPQUFBc1osTUFBQXRaLE9BQUF3MUIsS0FBQWxjLE1BQUFrYyxLQUNBbDFCLGFBQUFBLEVBS0EsT0FBQWsxQixLQUFBVSxXQUFBTCxZQUNBLE9BQUE3MUIsT0FBQTIxQixVQUFBUSxtQkFTQTcxQixRQUpBLE9BQUFrMUIsS0FBQVUsV0FBQUwsWUFDQSxPQUFBNzFCLE9BQUEyMUIsVUFBQVEsaUJBR0EsQ0FDQXh3QixLQUFBLEVBQ0F2QixZQUFBcEUsT0FBQTIxQixVQUFBSSxZQUFBaHZCLElBQ0FxdkIsU0FBQXAyQixPQUFBMjFCLFVBQUFRLGlCQUFBSixZQUFBaHZCLElBQ0F2RSxVQUFBb0ssYUFBQWhOLE1BQUFtSCxLQUdBLE9BQUF5dUIsS0FBQVUsV0FBQUwsWUFDQSxPQUFBNzFCLE9BQUEyMUIsVUFBQVEsaUJBR0EsQ0FDQXh3QixLQUFBLEVBQ0F2QixZQUFBcEUsT0FBQTIxQixVQUFBSSxZQUFBaHZCLElBQ0F2RSxVQUFBb0ssYUFBQWhOLE1BQUFtSCxJQUNBUCxPQUFBZ3ZCLEtBQUFVLFdBQUFMLFdBQUFFLFlBQUFodkIsS0FJQSxDQUNBcEIsS0FBQSxFQUNBdkIsWUFBQXBFLE9BQUEyMUIsVUFBQUksWUFBQWh2QixJQUNBcXZCLFNBQUFwMkIsT0FBQTIxQixVQUFBUSxpQkFBQUosWUFBQWh2QixJQUNBUCxPQUFBZ3ZCLEtBQUFVLFdBQUFMLFdBQUFFLFlBQUFodkIsS0FJQWQsV0FDQW93QixjQUFBLzFCLFNBQ0F3RCxLQUFBLFNBQUFDLE1BQ0E1RSxhQUFBOEgsUUFBQWxELEtBQUFyRCxLQUFBd0csV0FFQWpELE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsUUFLQSxJQUFBbXZCLGdCQUFBcm9CLGVBRUF5QixHQUFBNm1CLGNBQUEsU0FBQXpnQixLQUNBd2dCLGdCQUFBcG9CLE1BQUE0SCxNQUlBcEcsR0FBQThtQixrQkFBQSxFQUNBM1QsRUFBQSxhQUFBclAsR0FBQSxnQkFBQSxXQUNBOUQsR0FBQXNhLFVBQUEsR0FDQXRhLEdBQUE4bUIsa0JBQUEsSUFHQTltQixHQUFBK21CLGlCQUFBLFNBQUFseUIsS0FBQS9CLFdBQ0EsSUFBQWxDLFFBQUEsQ0FDQWlFLEtBQUFBLEtBQ0FteUIsVUFBQSxFQUNBbDBCLFVBQUFBLFdBRUFtMEIsUUFBQUwsZ0JBQUExMkIsTUFDQWlqQixFQUFBLGFBQUEyRSxNQUFBLFFBQ0F2aEIsV0FDQTJ3QixhQUFBdDJCLFNBQ0F3RCxLQUFBLFNBQUFDLE1BQ0E0eUIsUUFBQUUsWUFBQWQsWUFBQXh1QixLQUFBeEQsS0FBQXJELEtBQUFBLE1BQ0F2QixhQUFBOEgsUUFBQWxELEtBQUFyRCxLQUFBd0csU0FDQW5GLFFBQUFDLElBQUEsYUFBQXMwQixnQkFBQTEyQixTQUVBcUUsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixNQUlBdUksR0FBQW9uQixhQUFBLFNBQUE5MkIsT0FBQThWLEtBQ0FwRyxHQUFBcW5CLGVBQUEvMkIsT0FDQTBQLEdBQUFpbkIsUUFBQTdnQixJQUNBK00sRUFBQSxhQUFBMkUsTUFBQSxTQUdBOVgsR0FBQXNuQixZQUFBLEVBRUF0bkIsR0FBQXVuQixhQUFBLFNBQUFDLE9BQUFsQyxLQUFBbUMsTUFDQUQsT0FBQW5CLFlBQUFxQixTQUtBdlUsRUFBQXFVLE9BQUFHLFdBQUFDLFNBQUEsSUFDQTNZLEtBQUEsZ0JBQ0F5RSxZQUFBLGVBQ0FQLEVBQUFxVSxPQUFBSSxTQUFBLElBQ0EzWSxLQUFBLFFBQ0E0WSxRQUNBbFUsU0FBQSxlQUVBM1QsR0FBQXNuQixZQUFBLEVBQ0Evd0IsV0FDQXV4QixjQUFBTixPQUFBbkIsWUFBQWh2QixLQUNBakQsS0FBQSxTQUFBQyxNQUVBMkwsR0FBQThrQixZQUFBLENBQ0FDLFdBQUF5QyxPQUNBeEMsUUFBQXdDLE9BQUFuQixZQUFBN1UsU0FDQXBjLE1BQUFmLEtBQUFyRCxLQUFBb0UsT0FHQTRLLEdBQUErbkIsZUFBQTF6QixLQUFBckQsS0FBQWczQixZQUNBaG9CLEdBQUFzbkIsWUFBQSxFQUNBRSxPQUFBbkIsWUFBQWp4QixNQUFBZixLQUFBckQsS0FBQW9FLE1BQ0FzQyxnQkFBQUcsS0FBQTJ2QixVQUVBanpCLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsS0FFQSt2QixPQUFBUyxVQUNBVCxPQUFBeHZCLFNBQ0FzdEIsTUFDQTV0QixnQkFBQUcsS0FBQTJ2QixVQUtBLElBQUE5dkIsZ0JBQUFvSSxtQkFBQXBJLGtCQUVBc0ksR0FBQWtvQixTQUFBLFNBQUFud0IsU0FDQSxJQUFBeXZCLE9BQUF6dkIsUUFDQUwsZ0JBQUFLLFVBQ0FMLGdCQUFBTyxXQUdBdXZCLFNBQ0F4bkIsR0FBQXNuQixZQUFBLEVBQ0Evd0IsV0FDQXV4QixjQUFBTixPQUFBbkIsWUFBQWh2QixLQUNBakQsS0FBQSxTQUFBQyxNQUVBMkwsR0FBQThrQixZQUFBLENBQ0FDLFdBQUF5QyxPQUNBeEMsUUFBQXdDLE9BQUFuQixZQUFBN1UsU0FDQXBjLE1BQUFmLEtBQUFyRCxLQUFBb0UsT0FFQTRLLEdBQUFzbkIsWUFBQSxFQUNBRSxPQUFBbkIsWUFBQWp4QixNQUFBZixLQUFBckQsS0FBQW9FLFFBRUFiLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsT0FLQXVJLEdBQUFtb0IsV0FBQSxTQUFBdjFCLElBRUEsSUFBQW15QixXQUFBL2tCLEdBQUE4a0IsWUFBQUMsV0FDQXFELGFBQ0F4MkIsT0FBQSxTQUFBQyxJQUFBdUYsR0FJQSxPQUhBQSxFQUFBaXZCLFlBQUFodkIsTUFBQXpFLEtBQ0FmLElBQUF1RixHQUVBdkYsS0FDQSxNQUVBbU8sR0FBQXNuQixZQUFBLEVBQ0Evd0IsV0FDQXV4QixjQUFBbDFCLElBQ0F3QixLQUFBLFNBQUFDLE1BQ0FxRCxnQkFBQUcsS0FBQWt0QixZQUVBL2tCLEdBQUE4a0IsWUFBQSxDQUNBQyxXQUFBQSxXQUNBQyxRQUFBM3dCLEtBQUFyRCxLQUFBZzBCLFFBQ0E1dkIsTUFBQWYsS0FBQXJELEtBQUFvRSxPQUVBNEssR0FBQStuQixlQUFBMXpCLEtBQUFyRCxLQUFBZzNCLFlBQ0Fob0IsR0FBQXNuQixZQUFBLElBRUEveUIsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixNQUlBdUksR0FBQXFvQixVQUFBLFNBQUF4ekIsS0FBQTJ5QixRQUNBclUsRUFBQSxhQUFBMkUsTUFBQSxRQUNBLElBQUFsbkIsUUFBQSxDQUNBaUUsS0FBQUEsS0FDQW15QixVQUFBLEVBQ0FzQixPQUFBZCxRQUVBanhCLFdBQ0Eyd0IsYUFBQXQyQixTQUNBd0QsS0FBQSxTQUFBQyxNQUNBbXpCLE9BQUFoVyxTQUFBM1osS0FBQXhELEtBQUFyRCxLQUFBQSxNQUNBdkIsYUFBQThILFFBQUFsRCxLQUFBckQsS0FBQXdHLFdBRUFqRCxNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLE1BSUF1SSxHQUFBdW9CLG1CQUFBLFNBQUFDLE9BQUFoQixRQUNBclUsRUFBQSxhQUFBMkUsTUFBQSxRQUNBLElBQUE1Z0IsUUFBQXN4QixPQUFBcnhCLElBQUEsU0FBQUMsR0FBQSxPQUFBQSxFQUFBQyxNQUNBM0MsWUFBQTh5QixPQUFBbndCLElBQ0FkLFdBQ0FneUIsbUJBQUEsQ0FDQXJ4QixRQUFBQSxRQUNBeEMsWUFBQUEsY0FFQU4sS0FBQSxTQUFBQyxNQUNBaEMsUUFBQUMsSUFBQStCLE1BQ0E1RSxhQUFBOEgsUUFBQWxELEtBQUFyRCxLQUFBd0csV0FFQWpELE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsTUFJQXVJLEdBQUF5b0IsV0FBQSxTQUFBNzFCLEdBQUFteUIsWUFDQTVSLEVBQUEsYUFBQTJFLE1BQUEsUUFDQXZoQixXQUNBbXlCLGFBQUEsQ0FDQXh4QixRQUFBdEUsS0FFQXdCLEtBQUEsU0FBQUMsTUFDQTJMLEdBQUFzbkIsWUFBQSxFQUNBL3dCLFdBQ0F1eEIsY0FBQS9DLFdBQUFzQixZQUFBaHZCLEtBQ0FqRCxLQUFBLFNBQUFDLE1BRUEyTCxHQUFBOGtCLFlBQUEsQ0FDQUMsV0FBQUEsV0FDQUMsUUFBQUQsV0FBQXNCLFlBQUE3VSxTQUNBcGMsTUFBQWYsS0FBQXJELEtBQUFvRSxPQUVBNEssR0FBQXNuQixZQUFBLEVBQ0F2QyxXQUFBc0IsWUFBQWp4QixNQUFBZixLQUFBckQsS0FBQW9FLFFBRUFiLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsT0FHQWxELE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsTUFLQXVJLEdBQUEyb0IsYUFBQSxFQUNBM29CLEdBQUFlLGNBQUEsRUFFQWYsR0FBQW9hLFlBQUEsU0FBQWhsQixNQUFBd1UsT0FFQSxJQUFBeVEsUUFBQXpRLE1BQUE4SCxPQUFBdGMsTUFDQTRLLEdBQUEyb0IsYUFBQSxFQUNBM29CLEdBQUFlLGNBQUEsRUFFQWYsR0FBQXNhLFVBQUE1b0IsT0FBQUMsS0FBQTBvQixTQUFBbGpCLElBQUEsU0FBQUMsR0FDQSxJQUFBZ0IsSUFBQWlpQixRQUFBampCLEdBTUEsT0FMQWdCLElBQUE3SCxTQUFBLEVBQ0E2SCxJQUFBMkssVUFBQSxFQUNBM0ssSUFBQVksV0FBQSxFQUNBWixJQUFBYSxTQUFBLEVBQ0FiLElBQUE0b0IsTUFBQSxFQUNBNW9CLE9BR0E0SCxHQUFBNG9CLHlCQUFBLFNBQUF4d0IsS0FDQTRILEdBQUE2b0Isb0JBQUF6d0IsS0FnQkE0SCxHQUFBOG9CLFVBQUEsU0FBQTF6QixNQUFBb3lCLFFBQ0FuMUIsUUFBQUMsSUFBQThDLE9BQ0ErZCxFQUFBLGFBQUEyRSxNQUFBLFFBQ0FoWSxtQkFDQTVHLG9CQUFBOUQsTUFBQW95QixPQUFBbndCLEtBQ0FqRCxLQUFBLFNBQUEyMEIsV0FDQUEsVUFBQXZ2QixXQUFBekMsUUFDQWlKLEdBQUFncEIsZUFBQUQsVUFDQTEyQixRQUFBQyxJQUFBME4sR0FBQWdwQixnQkFDQTdWLEVBQUEsb0JBQUEyRSxNQUFBLFVBRUF6bEIsUUFBQUMsSUFBQXkyQixXQUNBL29CLEdBQUFpcEIsV0FBQUYsVUFBQTdyQixhQUFBaE4sTUFBQW1ILElBQUFtd0IsV0FHQWp6QixNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLE1BSUF1SSxHQUFBa3BCLHlCQUFBLFNBQUF0d0IsTUFDQSxZQUFBQSxLQUFBVSxPQUNBVixLQUFBVyxVQUFBdUcsbUJBQUFqRyxnQkFBQWpCLEtBQUEvRCxNQUVBK0QsS0FBQVcsVUFBQVgsS0FBQS9ELE1BSUFtTCxHQUFBaXBCLFdBQUEsU0FBQTd6QixNQUFBdEMsVUFBQTAwQixRQUVBLEdBQUExbkIsbUJBQUFuRyxnQkFBQXZFLE1BQUFvRSxZQUNBL0osYUFBQXVILFFBQUEscUNBOEZBLEdBMUZBbWMsRUFBQSxvQkFBQTJFLE1BQUEsUUFDQTFpQixNQUFBQSxHQUFBQSxPQUFBQSxtQkFBQUEsTUFBQW9FLFlBQUFxRixtQkFBQXpKLE1BQUFzRSxjQUNBc0csR0FBQTJvQixhQUFBLEVBQ0F4VixFQUFBLGFBQUEyRSxNQUFBLFFBQ0E5WCxHQUFBbXBCLGdCQUFBcnBCLG1CQUFBekgsaUJBQUFqRCxPQUVBL0gsUUFBQTBMLFFBQUFpSCxHQUFBbXBCLGdCQUFBendCLEdBQUEsU0FBQXRCLEdBaUZBeUksY0FBQTFMLE1BL0VBLFNBQUFrTSxXQUVBakosRUFBQWtKLE1BQUFULGNBQUFTLE1BQUFDLEtBQUFGLFVBQUFqSixHQUNBQSxFQUFBb0osT0FBQVgsY0FBQVcsT0FBQUQsS0FBQUYsVUFBQWpKLEdBQ0FBLEVBQUFxSixNQUFBWixjQUFBWSxNQUFBRixLQUFBRixVQUFBakosR0FDQSxJQUFBc0osVUFBQSxDQUNBN0wsS0FBQXVDLEVBQUF2QyxLQUNBK0QsS0FBQXhCLEVBQ0E3RyxTQUFBLFNBQUFvUSxFQUFBQyxPQUdBeEosRUFBQTdHLFNBQ0E2RyxFQUFBN0csU0FBQXNRLEtBQUFDLE1BQUEsSUFBQUgsR0FDQXZKLEVBQUE3RyxTQUNBc1EsS0FBQUMsTUFBQSxJQUFBSCxHQUVBWCxHQUFBZSxhQUFBakIsbUJBQUFqSCxzQkFDQW1ILEdBQUFtcEIsaUJBR0FyVyxTQUFBLFdBQ0FELE9BQUFvUCxZQUdBM3RCLFNBQUEsU0FBQTBNLEtBQUFDLFFBQ0E3SixFQUFBNEIsV0FBQSxFQUVBOFosU0FBQSxXQUNBRCxPQUFBb1AsV0FFQTV2QixRQUFBQyxJQUFBLGVBSUErTixVQUFBYSxJQUFBUixXQUFBdE0sS0FDQSxTQUFBK00sY0FFQSxJQUFBdlEsUUFBQSxDQUNBcUYsS0FBQTZKLG1CQUFBbkgsZ0JBQUF2QixHQUNBdEUsVUFBQW9LLGFBQUFoTixNQUFBbUgsSUFDQSt4QixTQUFBNUIsT0FBQW53QixJQUNBK0osVUFBQSxDQUNBN0gsVUFBQW5DLEVBQUFtQyxVQUNBK0gsT0FBQSxjQUNBelQsSUFBQUEsUUFBQXVKLEVBQUF2QyxLQUNBME0sU0FBQW5LLEVBQUFuQixLQUNBdUwsTUFBQXBLLEVBQUFtQixLQUNBeXBCLGFBQUE1cUIsRUFBQTRwQixPQUdBenFCLFdBQ0E4eUIsY0FBQXo0QixTQUNBd0QsS0FBQSxTQUFBQyxNQUNBbXpCLFFBQ0FBLE9BQUFweUIsTUFBQXlDLEtBQUF4RCxLQUFBckQsS0FBQUEsUUFHQXVELE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsS0FFQWhJLGFBQUE4SCxRQUFBLDhCQUNBbEYsUUFBQUMsSUFBQSxpQ0FBQTZPLGVBRUEsU0FBQU8sUUFFQXRLLEVBQUE2QixTQUFBLEVBRUErRyxHQUFBZSxhQUFBakIsbUJBQUFqSCxzQkFDQW1ILEdBQUFtcEIsaUJBR0FyVyxTQUFBLFdBQ0FELE9BQUFvUCxXQUVBNXZCLFFBQUFDLElBQUEsbUNBQUFvUCxjQVFBMUIsR0FBQW1wQixnQkFBQTF3QixXQUFBMUIsT0FBQSxDQUNBLElBQUE0SyxrQkFBQSxDQUNBdk0sTUFBQTRLLEdBQUFtcEIsZ0JBQUExd0IsV0FFQVcsV0FBQTRHLEdBQUFtcEIsZ0JBQUExd0IsV0FBQXRCLElBQUEsU0FBQUMsR0FBQSxPQUFBQSxFQUFBbUMsWUFDQXpHLFVBQUFBLFVBQ0E0QixZQUFBOHlCLE9BQUFud0IsS0FHQWQsV0FDQSt5Qix3QkFBQTNuQixtQkFDQXZOLEtBQUEsU0FBQUMsTUFDQTJMLEdBQUFtcEIsZ0JBQUExd0IsV0FBQXVILEdBQUFtcEIsZ0JBQUExd0IsV0FBQXRCLElBQ0EsU0FBQUMsR0FFQSxPQURBQSxFQUFBNEIsV0FBQSxFQUNBNUIsSUFJQTRJLEdBQUFlLGFBQUFqQixtQkFBQWpILHNCQUNBbUgsR0FBQW1wQixpQkFHQXJXLFNBQUEsV0FDQUQsT0FBQW9QLFdBR0F1RixRQUNBbnpCLEtBQUFyRCxLQUFBQSxLQUFBK0gsUUFBQSxTQUFBM0IsR0FDQW93QixPQUFBcHlCLE1BQUF5QyxLQUFBVCxLQUlBM0gsYUFBQThILFFBQUFsRCxLQUFBckQsS0FBQXdHLFdBRUFqRCxNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLE9BS0F1SSxHQUFBdXBCLGdCQUFBLFdBQ0F2cEIsR0FBQTJvQixhQUFBLEdBR0Ezb0IsR0FBQXdwQixTQUFBLFNBQUE1d0IsTUFDQXVhLEVBQUEsYUFBQTJFLE1BQUEsUUFDQTlYLEdBQUF5cEIsWUFBQTd3QixLQUNBb0gsR0FBQXlwQixZQUFBQyxVQUNBLFFBQUE5d0IsS0FBQXdzQixPQUNBeHNCLEtBQUE2RyxXQUFBTixRQUFBLFFBQUEsUUFDQXZHLEtBQUE2RyxZQUtBTyxHQUFBMnBCLGFBQUEsRUFDQTNwQixHQUFBNHBCLFdBQUEsU0FBQTl3QixNQUNBa0gsR0FBQTJwQixZQUFBN3dCLE1BSUErWixPQUFBNk8sYUFBQSxFQUNBMWhCLEdBQUE2cEIsbUJBQUEsQ0FDQUMsU0FBQSxDQUNBLENBQ0Fuc0IsS0FBQSxnQkFDQTdCLE1BQUEsU0FBQWl1QixXQUFBQyxPQUFBQyxXQUFBdHNCLEtBQUF1c0IsS0FDQWxxQixHQUFBOGtCLFlBQUFDLFdBQ0F2dUIsVUFDQUssTUFBQW1KLEdBQUE4a0IsWUFBQUMsV0FBQXNCLFlBQUFodkIsS0FDQWpELEtBQUEsU0FBQUMsTUFDQUEsTUFDQWtDLFdBQ0F1eEIsY0FBQTluQixHQUFBOGtCLFlBQUFDLFdBQUFzQixZQUFBaHZCLEtBQ0FqRCxLQUFBLFNBQUFDLE1BRUEyTCxHQUFBOGtCLFlBQUEsQ0FDQUMsV0FBQS9rQixHQUFBOGtCLFlBQUFDLFdBQ0FDLFFBQUEzd0IsS0FBQXJELEtBQUFnMEIsUUFDQTV2QixNQUFBZixLQUFBckQsS0FBQW9FLFNBR0FiLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsT0FJQWxELE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsS0FHQWhJLGFBQUF1SCxRQUFBLHlDQUtBNEIsS0FBQSxDQUNBLENBQ0ErRSxLQUFBLE9BQ0E3QixNQUFBLFNBQUFpdUIsV0FBQUMsT0FBQUMsV0FBQXRzQixLQUFBdXNCLEtBQ0ExekIsVUFBQUUsS0FBQXF6QixXQUFBbnhCLFFBR0EsQ0FDQStFLEtBQUEsTUFDQTdCLE1BQUEsU0FBQWl1QixXQUFBQyxPQUFBQyxXQUFBdHNCLEtBQUF1c0IsS0FDQTF6QixVQUFBSSxJQUNBbXpCLFdBQUFueEIsS0FDQW9ILEdBQUE4a0IsWUFBQUMsV0FBQXNCLFlBQUFodkIsT0FJQSxDQUNBc0csS0FBQSxVQUNBN0IsTUFBQSxTQUFBaXVCLFlBQ0EvcEIsR0FBQW1xQixTQUFBLEVBQ0FucUIsR0FBQW1oQixjQUFBOXpCLFFBQUFxSixLQUFBc0osR0FBQXlnQixhQUNBemdCLEdBQUFvcUIsaUJBQUFMLFdBQUFueEIsS0FDQXVhLEVBQUEsV0FBQTJFLE1BQUEsUUFDQTNFLEVBQUEsZUFBQTVNLE9BQ0E0TSxFQUFBLGdCQUFBb08sT0FDQXZoQixHQUFBd2hCLE9BQUEsVUFDQTNPLE9BQUE0TyxXQUFBLGNBQ0EsZUFBQTVPLE9BQUE0TyxXQUNBNU8sT0FBQTZPLGFBQUEsRUFFQTdPLE9BQUE2TyxhQUFBLE1BTUExaEIsR0FBQXFxQixnQkFBQSxTQUFBanlCLEtBQ0E0SCxHQUFBc3FCLGFBQUFseUIsSUFBQW9aLFNBQ0F4UixHQUFBd2hCLE9BQUFwcEIsSUFBQXZELEtBQ0FzZSxFQUFBLGVBQUFvTyxPQUNBcE8sRUFBQSxnQkFBQTVNLFFBRUFzTSxPQUFBNk8sYUFBQSxFQUNBLGVBQUE3TyxPQUFBNE8sV0FDQTVPLE9BQUE2TyxhQUFBLEVBRUE3TyxPQUFBNk8sYUFBQSxFQUlBMWhCLEdBQUF1cUIsa0JBQUEsU0FBQTExQixNQUNBLEdBQUFBLEtBRUEsQ0FDQXNlLEVBQUEsc0JBQUEyRSxNQUFBLFFBQ0EsSUFBQTltQixLQUFBLENBQ0E2RCxLQUFBQSxNQUVBMEIsV0FDQWcwQixrQkFBQXJ0QixhQUFBaE4sTUFBQW1ILElBQUFyRyxNQUNBb0QsS0FBQSxTQUFBQyxNQUNBNUUsYUFBQThILFFBQUFsRCxLQUFBckQsS0FBQXdHLFdBRUFuRixRQUFBQyxJQUFBLFNBQUFtRixHQUNBcEYsUUFBQUMsSUFBQW1GLFVBWkFoSSxhQUFBa04sTUFBQSwrQkFpQkFxRCxHQUFBOGMsaUJBQUEsR0FJQXZtQixXQUNBd2tCLHVCQUNBM21CLEtBQUEsU0FBQUMsTUFDQTJMLEdBQUFnYixhQUFBM21CLEtBQUFyRCxLQUFBQSxPQUVBdUQsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixLQUdBdUksR0FBQTZjLGVBQUEsV0FDQSxJQUFBN3JCLEtBQUEsQ0FDQThCLFVBQUFvSyxhQUFBaE4sTUFBQW1ILElBQ0FpbEIsV0FBQXRjLEdBQUE4YyxpQkFBQXpsQixLQUVBOGIsRUFBQSx3QkFBQTJFLE1BQUEsUUFDQXZoQixXQUNBaTBCLHNCQUFBeDVCLE1BQ0FvRCxLQUFBLFNBQUFDLE1BQ0E1RSxhQUFBOEgsUUFBQWxELEtBQUFyRCxLQUFBd0csU0FDQXdJLEdBQUE0a0Isa0JBQUExbkIsYUFBQWhOLE9BQ0FxRyxXQUNBazBCLGVBQUF2dEIsYUFBQWhOLE1BQUFtSCxLQUNBakQsS0FBQSxTQUFBQyxNQUNBNkksYUFBQXpPLElBQUE0RixLQUFBckQsTUFDQWdQLEdBQUE2a0IsY0FBQTNuQixhQUFBaE4sTUFBQTIwQixnQkFFQXR3QixNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLE9BR0FsRCxNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLE1BSUF1SSxHQUFBMHFCLGlCQUFBLEVBQ0ExcUIsR0FBQTJxQixpQkFBQSxFQUVBM3FCLEdBQUE0cUIsZ0JBQUEsU0FBQXh5QixJQUFBdkssS0FDQW1TLEdBQUFuUyxNQUFBdUssS0FHQTRILEdBQUE2ZSxpQkFBQSxTQUFBanNCLElBRUEyRCxXQUFBdW9CLGlCQUFBbHNCLEdBREEsR0FDQXdCLEtBQUEsU0FBQThyQixVQUNBbGdCLEdBQUErZSxhQUFBbUIsU0FBQWx2QixLQUFBQSxRQUdBZ1AsR0FBQTZlLGlCQUFBM2hCLGFBQUFoTixNQUFBbUgsT0FuekJBLEdDQUEsV0FDQWhLLFFBQUFDLE9BQUEsT0FBQTJCLFdBQUEsa0JBRUEsU0FDQTRqQixPQUNBQyxTQUNBQyxZQUNBM2pCLE9BQ0Eyb0IsYUFDQXhoQixXQUNBOUcsYUFDQXVqQixNQUNBempCLFFBQ0FELG9CQUNBdTdCLFdBSUEsSUFBQTdxQixHQUFBbFAsS0FDQU4sT0FBQWpCLFFBQUFpQixPQUFBQyxVQUFBbEIsUUFBQWtCLFVBQ0FzaUIsWUFBQWhkLGFBQ0F2RixTQUVBd1AsR0FBQXBELFNBQUFuTSxVQUFBUCxNQUdBOFAsR0FBQXhQLE9BQUEsV0FDQUEsVUFFQXdQLEdBQUE4cUIsUUFBQS9TLGFBQUFubEIsR0FDQW9OLEdBQUErcUIsWUFBQSxHQUNBL3FCLEdBQUFnckIsZUFBQSxHQUVBblksT0FBQWdCLFlBQUEsRUFDQWhCLE9BQUFvWSxhQUFBLEVBR0FqckIsR0FBQWtyQixlQUFBLFdBQ0EzMEIsV0FDQTlELGFBQUF1TixHQUFBOHFCLFNBQ0ExMkIsS0FBQSxTQUFBQyxNQUNBMkwsR0FBQW1yQixVQUFBOTJCLEtBQUFyRCxLQUNBcUIsUUFBQUMsSUFBQSxjQUFBME4sR0FBQW1yQixXQUNBbnJCLEdBQUFvckIsV0FBQXByQixHQUFBbXJCLFVBQUFFLFNBQUF0MEIsT0FDQThiLE9BQUF5WSxjQUFBdHJCLEdBQUFtckIsVUFBQUUsU0FBQUUsVUFDQTFZLE9BQUEyWSxnQkFBQXhyQixHQUFBbXJCLFVBQUFNLGNBQUFGLFVBRUF2ckIsR0FBQTByQixZQUFBN1ksT0FBQXlZLGNBQUF2NUIsTUFBQSxFQUFBLEdBQ0FpTyxHQUFBMnJCLGNBQUE5WSxPQUFBMlksZ0JBQUF6NUIsTUFBQSxFQUFBLEdBQ0ErZ0IsU0FBQSxXQUNBSyxFQUFBLGVBQUEyQixXQUFBLENBQ0FyZSxNQUFBdUosR0FBQW9yQixXQUNBclcsWUFBQWxDLE9BQUFvWSxhQUNBalcsU0FBQSxjQUNBQyxlQUFBLElBQ0FDLFVBQUEsRUFDQXJCLFlBQUEsRUFFQXNCLFlBQUEsU0FBQXphLEtBQUFrUCxPQUNBQSxNQUFBd0wsaUJBc0NBLFNBQUExYSxNQUVBLElBQUFreEIsVUFBQTVyQixHQUFBbXJCLFVBQUFFLFNBQUF0NUIsT0FDQTJJLEtBQUEsR0FBQW1ZLE9BQUFvWSxhQUNBdndCLEtBQUFtWSxPQUFBb1ksY0FFQWpyQixHQUFBMHJCLFlBQUFFLFVBRUEvWSxPQUFBb1AsU0E3Q0E0SixDQUFBbnhCLFNBSUF5WSxFQUFBLHVCQUFBMkIsV0FBQSxDQUNBcmUsTUFBQXVKLEdBQUFtckIsVUFBQU0sY0FBQTEwQixPQUNBZ2UsWUFBQSxFQUNBQyxTQUFBLGNBQ0FDLGVBQUEsSUFDQUMsVUFBQSxFQUNBckIsWUFBQSxFQUVBc0IsWUFBQSxTQUFBemEsS0FBQWtQLE9BQ0FBLE1BQUF3TCxpQkFrQ0EsU0FBQTFhLE1BRUEsSUFBQWt4QixVQUFBNXJCLEdBQUFtckIsVUFBQU0sY0FBQTE1QixNQUNBLEdBQUEySSxLQUFBLEdBQ0EsRUFBQUEsTUFFQXNGLEdBQUEyckIsY0FBQUMsVUFFQS9ZLE9BQUFvUCxTQXpDQTZKLENBQUFweEIsV0FNQXNGLEdBQUFtckIsVUFBQVksV0FBQTUwQixJQUFBLFNBQUFDLEdBQ0EsYUFBQUEsRUFBQW1LLFVBQUEsYUFBQW5LLEVBQUFtSyxTQUNBdkIsR0FBQStxQixZQUFBbHpCLEtBQUFULEdBR0E0SSxHQUFBZ3JCLGVBQUFuekIsS0FBQVQsUUFpQ0E0SSxHQUFBa3JCLGlCQUtBbHJCLEdBQUFnc0IsWUFBQSxTQUFBNzJCLFNBQ0E5QyxRQUFBQyxJQUFBLFlBQUE2QyxTQUNBLElBQUE4MkIsU0FBQTkyQixRQUFBZ0ssUUFBQSxTQUFBLFVBR0EsR0FGQTlNLFFBQUFDLElBQUEsWUFBQTI1QixVQUVBajhCLE1BQUFtRixRQUNBMUYsYUFBQWtOLE1BQUEsMkJBQ0EsQ0FDQSxJQUFBdXZCLFdBQUEsQ0FBQS8yQixRQUFBQSxTQUNBb0IsV0FDQTQxQixvQkFBQW5zQixHQUFBOHFCLFFBQUFvQixZQUNBOTNCLEtBQUEsU0FBQUMsTUFDQWhDLFFBQUFDLElBQUEsT0FBQStCLE1BQ0EyTCxHQUFBa3JCLGlCQUNBL1gsRUFBQSxnQkFBQS9hLElBQUEsSUFDQTNJLGFBQUE4SCxRQUFBLGtDQUNBaEQsTUFBQSxTQUFBa0QsR0FDQWhJLGFBQUFrTixNQUFBLCtCQUtBa1csT0FBQXVaLHVCQUFBLFdBQ0EzcUIsTUFBQSxlQUlBekIsR0FBQXFzQixhQUFBLFNBQUFDLE1BQ0FqNkIsUUFBQUMsSUFBQSxPQUFBZzZCLE1BRUEsSUFBQUMsS0FBQSxJQUFBQyxLQUFBLENBQUFGLE1BQUEsQ0FBQXIyQixLQUFBcTJCLEtBQUEvcUIsV0FDQWxQLFFBQUFDLElBQUEsT0FBQWk2QixNQUNBRSxPQUFBRixLQUFBRCxLQUFBSSxnQkFNQTdaLE9BQUE4WixZQUFBLFdBRUFwMkIsV0FDQXEyQix3QkFBQTVzQixHQUFBOHFCLFNBQ0ExMkIsS0FBQSxTQUFBQyxNQUNBMkwsR0FBQWtyQixpQkFDQS9YLEVBQUEsaUJBQUEyRSxNQUFBLFFBQ0Fyb0IsYUFBQThILFFBQUEsOEJBQ0FoRCxNQUFBLFNBQUFrRCxHQUNBaEksYUFBQWtOLE1BQUEsOEJBSUFrVyxPQUFBZ2Esb0JBQUEsU0FBQTEzQixRQUFBMjNCLFlBQ0F6NkIsUUFBQUMsSUFBQTZDLFNBQ0E5QyxRQUFBQyxJQUFBdzZCLFlBQ0EsSUFBQUMsV0FBQSxDQUFBNTNCLFFBQUFBLFFBQUE2M0IsT0FBQUYsWUFDQXYyQixXQUFBMDJCLG9CQUFBanRCLEdBQUE4cUIsUUFBQWlDLFlBQ0EzNEIsS0FBQSxTQUFBQyxNQUNBMkwsR0FBQWtyQixpQkFDQS9YLEVBQUEsMEJBQUEyRSxNQUFBLFFBQ0Fyb0IsYUFBQThILFFBQUEsdUNBQ0FoRCxNQUFBLFNBQUFrRCxHQUNBaEksYUFBQWtOLE1BQUEsMERBeExBLEdDQUEsV0FDQXRQLFFBQUFDLE9BQUEsT0FBQTJCLFdBQUEsYUFFQSxTQUNBNGpCLE9BQ0E1UCxXQUNBNlAsU0FDQUMsWUFDQTNqQixPQUNBTSxHQUNBNkcsV0FDQTlHLGFBQ0FGLFFBQ0F1USxtQkFDQXRRLE9BQ0FGLG9CQUNBdVEsZUFFQSxJQUFBRyxHQUFBbFAsS0FDQU4sT0FBQWpCLFFBQUFpQixPQUFBQyxVQUFBbEIsUUFBQWtCLFVBQUF3TixTQUFBMU8sUUFBQTBPLFNBOEJBLEdBN0JBNFUsT0FBQXFhLGNBQUEsR0FDQWx0QixHQUFBbXJCLFVBQUEsR0FDQXRZLE9BQUFzYSxXQUFBLEdBQ0F0YSxPQUFBamEsS0FDQWlhLE9BQUExZCxRQUFBLEdBQ0EwZCxPQUFBK0gsV0FBQSxHQUNBL0gsT0FBQXVhLFVBQUEsRUFDQXZhLE9BQUF3YSxjQUFBLEdBQ0F4YSxPQUFBeWEsZUFBQSxFQUNBemEsT0FBQTBhLFlBQUEsRUFDQTFhLE9BQUEyYSxVQUFBLEdBQ0EzYSxPQUFBNGEsVUFBQSxHQUNBenRCLEdBQUEwdEIsV0FBQSxHQUNBMXRCLEdBQUEydEIsVUFBQSxHQUVBOWEsT0FBQSthLGVBQUEsRUFDQS9hLE9BQUFnYixlQUFBLEVBRUFoYixPQUFBaWIsVUFBQSxVQUNBamIsT0FBQWtiLFVBQ0FsYixPQUFBbWIsU0FDQW5iLE9BQUFvYixVQUFBLGNBQ0FwYixPQUFBcWIsVUFBQSxFQUNBbHVCLEdBQUFtdUIsV0FBQSxpQ0FDQXRiLE9BQUF1YixVQUFBLDJCQUNBdmIsT0FBQXdiLFVBQUEsNENBQ0F4YixPQUFBeWIsUUFBQSxnQ0FDQXpiLE9BQUEwYixRQUFBLHFEQUVBeGIsWUFBQWhkLFlBRUEsWUFEQXZGLFNBS0F3UCxHQUFBcEQsU0FBQW5NLFVBQUFQLE1BRUE4UCxHQUFBeFAsT0FBQSxXQUNBQSxVQUlBMmlCLEVBQUEsZUFBQUUsWUFDQVIsT0FBQWUsZ0JBQUEsRUFFQTVULEdBQUE2VCxZQUFBLEVBRUE3VCxHQUFBOFQsVUFBQSxDQUNBMGEsWUFBQSxDQUNBdkwsV0FBQSxFQUNBN2pCLE9BQUEsRUFDQUUsYUFBQSxFQUNBaWYsYUFBQSxFQUNBbkssU0FBQSxJQUdBcFUsR0FBQTNDLFdBQUEsR0FDQTJDLEdBQUF5dUIsV0FBQSxTQUFBeDRCLEtBQUFxZSxlQUVBdGtCLElBQUFnUSxHQUFBOFQsVUFBQVEsVUFBQXJlLE1BQ0ErSixHQUFBOFQsVUFBQVEsVUFBQXJlLE9BQUEsRUFDQStKLEdBQUE4VCxVQUFBUSxVQUFBcmUsT0FBQStKLEdBQUE4VCxVQUFBUSxVQUFBcmUsTUFDQU0sV0FDQW00QixjQUFBLENBQ0FoMEIsS0FBQSxFQUNBc1YsTUFBQSxHQUNBdUUsS0FBQXRlLEtBQ0F1ZSxPQUFBeFUsR0FBQTNDLFdBQ0FvWCxTQUFBelUsR0FBQThULFVBQUFRLFVBQUFyZSxRQUVBN0IsS0FBQSxTQUFBQyxNQUdBMkwsR0FBQTJ1QixVQUFBdDZCLEtBQUFyRCxLQUFBMmpCLEtBQ0EzVSxHQUFBNHVCLFdBQUF2NkIsS0FBQXJELEtBQUE2akIsTUFDQS9CLFNBQUEsV0FDQUQsT0FBQSthLGVBQUEsRUFDQXphLEVBQUEsZUFBQTJCLFdBQUEsQ0FDQXJlLE1BQUF1SixHQUFBNHVCLFdBQ0E3WixZQUFBLEdBQ0FDLFNBQUEsY0FDQUMsZUFBQSxJQUNBQyxVQUFBLEVBQ0FyQixZQUFBLEVBRUFzQixZQUFBLFNBQUF6YSxLQUFBa1AsT0FDQUEsTUFBQXdMLGlCQUNBN2UsV0FDQW00QixjQUFBLENBQ0FoMEIsS0FBQUEsS0FDQXNWLE1BQUEsR0FDQXVFLEtBQUF0ZSxLQUNBd2UsU0FBQXpVLEdBQUE4VCxVQUFBN2QsUUFFQTdCLEtBQUEsU0FBQUMsTUFDQTJMLEdBQUEydUIsVUFBQXQ2QixLQUFBckQsS0FBQTJqQixPQUVBcGdCLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsWUFPQWxELE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsTUFJQSxJQUFBNGQsZUFBQXBYLFNBQUEsS0FpckJBLFNBQUE0d0IsY0FBQXAzQixHQUNBb2IsT0FBQWljLFFBQUEsRUFDQWpjLE9BQUFrYyxVQUFBLEVBQ0EsSUFBQTMzQixFQUFBeUosS0FBQW11QixPQUFBdjNCLEVBQUF3M0IsUUFBQXBjLE9BQUFxYyxLQUFBQyxPQUFBdGMsT0FBQXFjLEtBQUFFLE1BQUF2YyxPQUFBcWMsS0FBQUMsTUFBQXRjLE9BQUFoWSxPQUFBTSxPQUNBeUksRUFBQS9DLEtBQUFtdUIsT0FBQXYzQixFQUFBNDNCLFFBQUF4YyxPQUFBcWMsS0FBQTVPLE1BQUF6TixPQUFBcWMsS0FBQUksT0FBQXpjLE9BQUFxYyxLQUFBNU8sS0FBQXpOLE9BQUFoWSxPQUFBSyxRQUNBMlgsT0FBQTBjLGtCQUFBLENBQUFDLEVBQUFwNEIsRUFBQXE0QixFQUFBN3JCLEdBQ0FpUCxPQUFBNmMsU0FBQTdjLE9BQUE3WCxRQUFBMjBCLGFBQUEsRUFBQSxFQUFBOWMsT0FBQWhZLE9BQUFNLE1BQUEwWCxPQUFBaFksT0FBQUssUUFHQSxTQUFBMDBCLFNBQUFuNEIsR0FDQSxJQUFBNFAsU0FDQWpRLEVBQUF5SixLQUFBbXVCLE9BQUF2M0IsRUFBQXczQixRQUFBcGMsT0FBQXFjLEtBQUFDLE9BQUF0YyxPQUFBcWMsS0FBQUUsTUFBQXZjLE9BQUFxYyxLQUFBQyxNQUFBdGMsT0FBQWhZLE9BQUFNLE9BQ0F5SSxFQUFBL0MsS0FBQW11QixPQUFBdjNCLEVBQUE0M0IsUUFBQXhjLE9BQUFxYyxLQUFBNU8sTUFBQXpOLE9BQUFxYyxLQUFBSSxPQUFBemMsT0FBQXFjLEtBQUE1TyxLQUFBek4sT0FBQWhZLE9BQUFLLFNBQ0EsSUFBQTJYLE9BQUFrYyxXQUNBbGMsT0FBQTdYLFFBQUE2MEIsYUFBQWhkLE9BQUE2YyxTQUFBLEVBQUEsR0FDQXJvQixTQUFBLENBQUFtb0IsRUFBQXA0QixFQUFBcTRCLEVBQUE3ckIsR0FDQWlQLE9BQUE3WCxRQUFBODBCLFlBQ0FqZCxPQUFBN1gsUUFBQSswQixPQUFBbGQsT0FBQTBjLGtCQUFBQyxFQUFBM2MsT0FBQTBjLGtCQUFBRSxHQUNBNWMsT0FBQTdYLFFBQUFnMUIsT0FBQTNvQixTQUFBbW9CLEVBQUFub0IsU0FBQW9vQixHQUNBNWMsT0FBQTdYLFFBQUFpMUIsWUFBQXBkLE9BQUFpYixVQUNBamIsT0FBQTdYLFFBQUFrMUIsVUFBQSxFQUNBcmQsT0FBQTdYLFFBQUFtMUIsUUFBQSxRQUNBdGQsT0FBQTdYLFFBQUE0USxVQUdBLFNBQUF3a0IsYUFBQTM0QixHQUdBLElBQUE0UCxTQUZBd0wsT0FBQWtjLFVBQUEsRUFDQWxjLE9BQUE3WCxRQUFBNjBCLGFBQUFoZCxPQUFBNmMsU0FBQSxFQUFBLEdBRUEsSUFBQXQ0QixFQUFBeUosS0FBQW11QixPQUFBdjNCLEVBQUF3M0IsUUFBQXBjLE9BQUFxYyxLQUFBQyxPQUFBdGMsT0FBQXFjLEtBQUFFLE1BQUF2YyxPQUFBcWMsS0FBQUMsTUFBQXRjLE9BQUFoWSxPQUFBTSxPQUNBeUksRUFBQS9DLEtBQUFtdUIsT0FBQXYzQixFQUFBNDNCLFFBQUF4YyxPQUFBcWMsS0FBQTVPLE1BQUF6TixPQUFBcWMsS0FBQUksT0FBQXpjLE9BQUFxYyxLQUFBNU8sS0FBQXpOLE9BQUFoWSxPQUFBSyxRQUNBbU0sU0FBQSxDQUFBbW9CLEVBQUFwNEIsRUFBQXE0QixFQUFBN3JCLEdBRUFpUCxPQUFBN1gsUUFBQTgwQixZQUNBamQsT0FBQTdYLFFBQUErMEIsT0FBQWxkLE9BQUEwYyxrQkFBQUMsRUFBQTNjLE9BQUEwYyxrQkFBQUUsR0FDQTVjLE9BQUE3WCxRQUFBZzFCLE9BQUEzb0IsU0FBQW1vQixFQUFBbm9CLFNBQUFvb0IsR0FDQTVjLE9BQUE3WCxRQUFBaTFCLFlBQUFwZCxPQUFBaWIsVUFDQWpiLE9BQUE3WCxRQUFBazFCLFVBQUEsRUFDQXJkLE9BQUE3WCxRQUFBbTFCLFFBQUEsUUFDQXRkLE9BQUE3WCxRQUFBNFEsU0FDQSxJQUFBeWtCLFVBQUF4ZCxPQUFBN1gsUUFBQTIwQixhQUFBLEVBQUEsRUFBQTljLE9BQUFoWSxPQUFBTSxNQUFBMFgsT0FBQWhZLE9BQUFLLFFBQ0EyWCxPQUFBMmEsVUFBQTMxQixLQUFBdzRCLFdBQ0FoK0IsUUFBQUMsSUFBQSxjQUFBdWdCLE9BQUEyYSxXQTF0QkF4dEIsR0FBQXN3QixhQUFBLFNBQUEzeUIsTUFLQTBYLGVBQ0EsV0FDQTllLFdBQ0FtNEIsY0FBQSxDQUNBaDBCLEtBQUEsRUFDQXNWLE1BQUEsR0FDQXdFLE9BQUE3VyxLQUNBNFcsS0FBQSxVQUNBRSxVQUFBLElBRUFyZ0IsS0FBQSxTQUFBQyxNQUVBMkwsR0FBQTJ1QixVQUFBdDZCLEtBQUFyRCxLQUFBMmpCLEtBQ0EzVSxHQUFBNHVCLFdBQUF2NkIsS0FBQXJELEtBQUE2akIsTUFFQS9CLFNBQUEsV0FDQUQsT0FBQSthLGVBQUEsRUFDQXphLEVBQUEsV0FBQTJCLFdBQUEsQ0FFQXJlLE1BQUF1SixHQUFBNHVCLFdBQ0E3WixZQUFBLEdBQ0FDLFNBQUEsY0FDQUMsZUFBQSxJQUNBQyxVQUFBLEVBQ0FyQixZQUFBLEVBRUFzQixZQUFBLFNBQUF6YSxLQUFBa1AsT0FDQUEsTUFBQXdMLGlCQUNBN2UsV0FDQW00QixjQUFBLENBQ0FoMEIsS0FBQUEsS0FDQXNWLE1BQUEsR0FDQXVFLEtBQUF0ZSxLQUNBd2UsU0FBQXpVLEdBQUE4VCxVQUFBUSxVQUFBcmUsUUFFQTdCLEtBQUEsU0FBQUMsTUFDQTJMLEdBQUEydUIsVUFBQXQ2QixLQUFBckQsS0FBQTJqQixPQUVBcGdCLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsWUFNQWxELE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsTUFHQSxDQUFBa0csUUFNQXFDLEdBQUF5dUIsV0FBQSxVQUFBLGVBRUF6dUIsR0FBQXVWLFVBQUEsQ0FDQUMsUUFBQSxFQUNBaEQsTUFBQSxFQUNBMEMsVUFBQSxFQUNBTyxXQUFBLEdBS0E1QyxPQUFBMGQsY0FBQSxDQUFBLFNBQUEsVUFBQSxTQUdBaDZCLFdBQUFqRixlQUFBOEMsS0FBQSxTQUFBQyxNQUNBMkwsR0FBQXd3QixTQUFBbjhCLEtBQUFyRCxLQUFBMmpCLE9BSUFwZSxXQUFBdEUsaUJBQUFtQyxLQUFBLFNBQUFDLE1BQ0EyTCxHQUFBeXdCLFdBQUFwOEIsS0FBQXJELEtBQUEyakIsT0FJQXBlLFdBQUFoRixrQkFBQTZDLEtBQUEsU0FBQUMsTUFDQTJMLEdBQUEwd0IsWUFBQXI4QixLQUFBckQsS0FBQTJqQixPQUdBcGUsV0FBQW82QixnQkFBQXY4QixLQUFBLFNBQUFDLE1BQ0EyTCxHQUFBNHdCLFlBQUF2OEIsS0FBQXJELEtBQUEyakIsT0FLQTlCLE9BQUFnZSxRQUFBLFNBQUFDLFNBQ0EsSUFBQUMsT0FBQWoyQixTQUFBb0osZUFBQSxRQUNBNnNCLE9BQUFDLElBQUFDLElBQUFDLGdCQUFBSixVQUdBamUsT0FBQXNlLFFBQUEsU0FBQXY0QixLQUFBekQsU0FPQTBkLE9BQUErSCxXQUFBL2lCLEtBQUEsQ0FBQWUsS0FBQUEsS0FBQXpELFFBQUFBLFFBQUE3RSxPQUFBLE9BQ0ErQixRQUFBQyxJQUFBLFNBQUF1Z0IsT0FBQStILGFBWUEvSCxPQUFBdWUsVUFBQSxTQUFBMW1CLE1BQUF0SyxPQUNBQSxNQUFBdEksT0FBQTRTLE1BQUEsSUFJQW1JLE9BQUF3ZSxZQUFBLFNBQUF6NEIsTUFFQWlhLE9BQUF5ZSxVQUFBLEdBQ0FqL0IsUUFBQUMsSUFBQSxhQUFBc0csTUFDQSxPQUFBQSxNQUNBQSxLQUFBN0IsT0FBQSxHQUNBNkIsS0FBQUcsUUFBQSxTQUFBdzRCLFNBQ0EsR0FBQSxhQUFBQSxRQUFBdDdCLE1BQUEsYUFBQXM3QixRQUFBdDdCLE1BQUEsY0FBQXM3QixRQUFBdDdCLEtBQUEsQ0FDQSxJQUFBdTdCLElBQUFQLElBQUFDLGdCQUFBSyxTQUNBMWUsT0FBQXllLFVBQUFFLFFBRUEsbUJBQUFELFFBQUF0N0IsS0FDQTRjLE9BQUF5ZSxVQUFBLHNDQUVBLDJFQUFBQyxRQUFBdDdCLEtBQ0E0YyxPQUFBeWUsVUFBQSxxQ0FFQSw0QkFBQUMsUUFBQXQ3QixNQUFBLHFFQUFBczdCLFFBQUF0N0IsS0FDQTRjLE9BQUF5ZSxVQUFBLG9DQUVBLGdDQUFBQyxRQUFBdDdCLEtBQ0E0YyxPQUFBeWUsVUFBQSxrQ0FFQXplLE9BQUF5ZSxVQUFBLHNDQUVBemUsT0FBQStILFdBQUEvaUIsS0FBQSxDQUFBZSxLQUFBMjRCLFFBQUFFLE1BQUE1ZSxPQUFBeWUsZUFTQXplLE9BQUE2ZSxlQUFBLFNBQUFobkIsTUFBQXRLLE1BQUF1eEIsUUFDQXZ4QixNQUFBc0ssT0FBQXZWLFFBQUF3OEIsUUFNQTN4QixHQUFBNHhCLGFBQUEsU0FBQXh4QixNQUFBeXhCLFdBQ0F4L0IsUUFBQUMsSUFBQSxpQkFBQXUvQixXQUNBenhCLE1BQUFySCxRQUFBLFNBQUEzQixFQUFBNEgsRUFBQW9CLE9BOEZBUCxjQUFBMUwsTUEzRkEsU0FBQWtNLFdBQ0E1USxhQUFBK2lCLEtBQUFwYixFQUFBd0IsS0FBQS9ELEtBQUEscUJBRUF1QyxFQUFBd0IsS0FBQTBILE1BQUFULGNBQUFTLE1BQUFDLEtBQUFGLFVBQUFqSixHQUNBQSxFQUFBd0IsS0FBQTRILE9BQUFYLGNBQUFXLE9BQUFELEtBQUFGLFVBQUFqSixHQUNBQSxFQUFBd0IsS0FBQTZILE1BQUFaLGNBQUFZLE1BQUFGLEtBQUFGLFVBQUFqSixHQUNBLElBQUFzSixVQUFBLENBQ0E3TCxLQUFBdUMsRUFBQXdCLEtBQUEvRCxLQUNBK0QsS0FBQXhCLEVBQUF3QixLQUNBckksU0FBQSxTQUFBb1EsRUFBQUMsT0FJQXhKLEVBQUF3QixLQUFBckksU0FDQTZHLEVBQUF3QixLQUFBckksU0FBQXNRLEtBQUFDLE1BQUEsSUFBQUgsR0FDQXZKLEVBQUF3QixLQUFBckksU0FDQXNRLEtBQUFDLE1BQUEsSUFBQUgsR0FFQVgsR0FBQWUsYUFBQWpCLG1CQUFBakgsc0JBQ0FtSCxHQUFBbXBCLGlCQUdBclcsU0FBQSxXQUNBRCxPQUFBb1AsWUFHQTN0QixTQUFBLFNBQUEwTSxLQUFBQyxRQUNBN0osRUFBQXdCLEtBQUFJLFdBQUEsRUFFQThaLFNBQUEsV0FDQUQsT0FBQW9QLFdBRUE1dkIsUUFBQUMsSUFBQSxlQUlBK04sVUFBQWEsSUFBQVIsV0FBQXRNLEtBQ0EsU0FBQStNLGNBRUE5TyxRQUFBQyxJQUFBOEUsR0FDQSxJQUFBeEcsUUFBQSxDQUNBcUYsS0FBQTZKLG1CQUFBbkgsZ0JBQUF2QixFQUFBd0IsTUFFQXdJLFVBQUEsQ0FDQTdILFVBQUFuQyxFQUFBd0IsS0FBQS9ELEtBQ0F3TSxpQkFBQWpLLEVBQUFqQyxRQUNBbU0sT0FBQSxjQUNBelQsSUFBQUEsUUFBQXVKLEVBQUF3QixLQUFBL0QsS0FDQTBNLFNBQUFuSyxFQUFBd0IsS0FBQTNDLEtBQ0F1TCxNQUFBcEssRUFBQXdCLEtBQUFMLEtBQ0F1eUIsUUFBQStHLFVBQUE3Z0MsS0FBQXFHLE1BR0FoRixRQUFBQyxJQUFBLFdBQUEwTSxHQUNBekksV0FDQXU3QixxQkFBQWxoQyxTQUNBd0QsS0FBQSxTQUFBQyxNQUNBMkssSUFBQW9CLE1BQUFySixPQUFBLElBQ0E4YixPQUFBK0gsV0FBQSxHQUVBNWEsR0FBQW1yQixVQUFBLEdBQ0FoWSxFQUFBLGdCQUFBMkUsTUFBQSxRQUNBM0UsRUFBQSxpQkFBQTJFLE1BQUEsUUFDQTlYLEdBQUF5dUIsV0FBQSxVQUFBLGVBQ0FoL0IsYUFBQThILFFBQUEsK0JBS0FoRCxNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLEdBQ0FoSSxhQUFBa04sTUFBQSxrQ0FJQSxTQUFBK0UsUUFFQXRLLEVBQUE2QixTQUFBLEVBRUErRyxHQUFBZSxhQUFBakIsbUJBQUFqSCxzQkFDQW1ILEdBQUFtcEIsaUJBR0FyVyxTQUFBLFdBQ0FELE9BQUFvUCxrQkFXQWppQixHQUFBK3hCLHNCQUFBLFNBQUEzeEIsT0FDQUEsTUFBQXJKLFFBQ0E4YixPQUFBbFIsa0JBQUEsQ0FDQXZNLE1BQUFnTCxPQUlBN0osV0FDQXk3QixXQUFBbmYsT0FBQWxSLG1CQUNBdk4sS0FBQSxTQUFBQyxNQWtCQSxPQWpCQWhDLFFBQUFDLElBQUEsMkJBQUErQixLQUFBckQsTUFRQWdQLEdBQUFlLGFBQUFqQixtQkFBQWpILHNCQUNBbUgsR0FBQW1wQixpQkFHQXJXLFNBQUEsV0FDQUQsT0FBQW9QLFdBR0F4eUIsYUFBQThILFFBQUFsRCxLQUFBckQsS0FBQXdHLFNBQ0EsNkJBRUFqRCxNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLE1BSUFwRixRQUFBQyxJQUFBLHVDQUlBME4sR0FBQWl5QixnQkFBQSxTQUFBOUcsV0FDQSxJQUFBK0csWUFBQSxHQUNBQSxZQUFBOXlCLE1BQUErckIsVUFBQS9yQixNQUNBOHlCLFlBQUE1eUIsWUFBQTZyQixVQUFBN3JCLFlBQ0E0eUIsWUFBQWhULFFBQUFpTSxVQUFBak0sUUFBQTduQixJQUNBNjZCLFlBQUEzQixjQUFBcEYsVUFBQWdILFNBQ0FELFlBQUFFLFFBQUFqSCxVQUFBa0gsTUFBQWg3QixJQUNBNjZCLFlBQUFJLFNBQUFuSCxVQUFBbUgsU0FDQUosWUFBQUssZUFDQUwsWUFBQUssYUFBQXBILFVBQUFvSCxhQUFBbDdCLEtBSUE2NkIsWUFBQU0sWUFBQXJILFVBQUFxSCxZQUNBbmdDLFFBQUFDLElBQUEsWUFBQTY0QixXQUdBNTBCLFdBQ0FwRSxZQUFBKy9CLGFBQ0E5OUIsS0FBQSxTQUFBQyxNQVFBLE9BUEE1RSxhQUFBOEgsUUFBQSxxQ0FDQXNiLE9BQUErSCxXQUFBLEdBQ0EvSCxPQUFBMGEsWUFBQSxFQUlBdnRCLEdBQUF5dUIsV0FBQSxVQUFBLGVBQ0FwNkIsT0FFQUUsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixNQU9BdUksR0FBQXl5QixTQUFBLFNBQUF0SCxXQUNBOTRCLFFBQUFDLElBQUE2NEIsV0FFQXRZLE9BQUF2YSxXQUFBdWEsT0FBQStILFdBQ0E1YSxHQUFBbXBCLGdCQUFBcnBCLG1CQUFBN0QsY0FBQTRXLE9BQUF2YSxZQUVBLElBQUE0NUIsWUFBQSxDQUNBQSxXQUFBLElBQ0FBLFlBQUE5eUIsTUFBQStyQixVQUFBL3JCLE1BQ0E4eUIsWUFBQTV5QixZQUFBNnJCLFVBQUE3ckIsWUFDQTR5QixZQUFBcC9CLFVBQUFxNEIsVUFBQWpNLFFBQUE3bkIsSUFDQTY2QixZQUFBM0IsY0FBQXBGLFVBQUFnSCxTQUNBRCxZQUFBRSxRQUFBakgsVUFBQWtILE1BQUFoN0IsSUFDQTY2QixZQUFBSSxTQUFBbkgsVUFBQW1ILFNBRUFKLFlBQUFLLGFBQUFwSCxVQUFBb0gsYUFBQWw3QixJQUdBOHpCLFVBQUF1SCxXQUFBdjdCLElBQUEsU0FBQUMsR0FDQTg2QixZQUFBUSxXQUFBNzZCLEtBQUFULEVBQUFDLE9BRUE2NkIsWUFBQU0sWUFBQXJILFVBQUFxSCxZQUNBTixZQUFBOThCLE1BQUE0SyxHQUFBbXBCLGdCQUFBMXdCLFdBQ0FwRyxRQUFBQyxJQUFBLGdCQUFBNC9CLGFBQ0EzN0IsV0FDQXBFLFlBQUErL0IsYUFDQTk5QixLQUFBLFNBQUFDLE1BQ0E1RSxhQUFBOEgsUUFBQSxxQ0FDQWxGLFFBQUFDLElBQUErQixNQUNBMkwsR0FBQW1wQixnQkFBQXp3QixHQUNBc0gsR0FBQTR4QixhQUFBNXhCLEdBQUFtcEIsZ0JBQUF6d0IsR0FBQXJFLEtBQUFyRCxPQUlBNmhCLE9BQUErSCxXQUFBLEdBRUE1YSxHQUFBbXJCLFVBQUEsR0FDQWhZLEVBQUEsZ0JBQUEyRSxNQUFBLFFBQ0EzRSxFQUFBLGlCQUFBMkUsTUFBQSxRQUNBOVgsR0FBQXl1QixXQUFBLFVBQUEsa0JBTUFsNkIsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixHQUNBaEksYUFBQWtOLE1BQUEsMEJBS0FxRCxHQUFBMnlCLFdBQUEsR0FDQTlmLE9BQUErZixrQkFBQSxTQUFBeDlCLE9BRUEsR0FEQS9DLFFBQUFDLElBQUEsZ0JBQUE4QyxPQUNBQSxNQUFBLENBQ0FBLE1BQUEyRCxRQUFBLFNBQUF3NEIsU0FDQSxJQUFBQyxJQUFBUCxJQUFBQyxnQkFBQUssU0FDQXZ4QixHQUFBMHRCLFdBQUE3MUIsS0FBQSxDQUFBOUksSUFBQXlpQyxRQUVBbi9CLFFBQUFDLElBQUEsb0JBQ0E2Z0IsRUFBQSxpQkFBQTJFLE1BQUEsUUFDQSxJQUFBK2EsZUFBQTd5QixHQUFBMHRCLFdBQUEzN0IsT0FBQSxHQUNBb2hCLEVBQUEsZ0JBQUFDLElBQUEsbUJBQUEsT0FBQXlmLGVBQUEsR0FBQTlqQyxJQUFBLFVBS0FVLGFBQUFrTixNQUFBLHVCQVNBd1csRUFBQSxpQkFBQXJQLEdBQUEsa0JBQUEsU0FBQXJNLEdBR0EwYixFQUFBcmlCLE1BQUFnaUMsV0FBQSxZQUNBM2YsRUFBQSx5QkFBQTRmLEdBQUEsWUFDQTFnQyxRQUFBQyxJQUFBLGtCQUdBRCxRQUFBQyxJQUFBLG1CQUNBNmdCLEVBQUFyaUIsTUFBQWduQixNQUFBLFdBTUFqRixPQUFBbWdCLG1CQUFBLFdBSUF6OEIsV0FDQTFELG9CQUhBLDRCQUlBdUIsS0FBQSxTQUFBQyxNQUVBLElBQUE0K0IsYUFBQTUrQixLQUFBckQsS0FBQUEsS0FDQWdQLEdBQUF3Z0IsZ0JBQUF5UyxhQUNBNWdDLFFBQUFDLElBQUEsZUFBQTBOLEdBQUF3Z0IsaUJBQ0FyTixFQUFBLGlCQUFBMkUsTUFBQSxRQUNBM0UsRUFBQSx5QkFBQTJFLE1BQUEsVUFHQXZqQixNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLE1BS0F1SSxHQUFBa3pCLGVBQUEsU0FBQWxTLE1BQ0FoaEIsR0FBQTB0QixXQUFBNzFCLEtBQUFtcEIsS0FBQWtFLFdBSUFsbEIsR0FBQW16QixnQkFBQSxTQUFBblMsTUFDQWhoQixHQUFBMHRCLFdBQUE3MUIsS0FBQW1wQixPQUlBbk8sT0FBQXVnQixhQUFBLFNBQUFDLFVBQ0FsZ0IsRUFBQSx5QkFBQTJFLE1BQUEsUUFDQTNFLEVBQUEsaUJBQUEyRSxNQUFBLFFBQ0F6bEIsUUFBQUMsSUFBQSxrQkFBQTBOLEdBQUEwdEIsWUFHQSxJQUFBbUYsZUFBQVEsU0FBQXRoQyxPQUFBLEdBQ0FvaEIsRUFBQSxnQkFBQUMsSUFBQSxtQkFBQSxPQUFBeWYsZUFBQSxHQUFBOWpDLElBQUEsTUFRQThqQixPQUFBeWdCLGNBQUEsU0FBQUQsVUFDQWxnQixFQUFBLG9CQUFBMkUsTUFBQSxRQUNBM0UsRUFBQSxpQkFBQTJFLE1BQUEsUUFFQSxJQUFBK2EsZUFBQVEsU0FBQXRoQyxPQUFBLEdBQ0FvaEIsRUFBQSxnQkFBQUMsSUFBQSxtQkFBQSxPQUFBeWYsZUFBQSxHQUFBOWpDLElBQUEsTUFLQThqQixPQUFBMGdCLFVBQUEsU0FBQUMsT0FDQXJnQixFQUFBLGdCQUFBMkUsUUFDQWpGLE9BQUFzYSxXQUFBcUcsTUFFQTNnQixPQUFBNGdCLE1BQUE1Z0IsT0FBQXNhLFdBQUEvdEIsTUFDQXlULE9BQUE2Z0IsWUFBQTdnQixPQUFBc2EsV0FBQTd0QixZQUVBdVQsT0FBQThnQixhQUFBLElBQUE1NUIsS0FBQThZLE9BQUFzYSxXQUFBbUYsVUFDQXgzQixTQUFBb0osZUFBQSxZQUFBMHZCLGFBQUEvZ0IsT0FBQThnQixhQUNBOWdCLE9BQUFnaEIsSUFBQWhoQixPQUFBOGdCLGFBQUFHLFVBQUEsRUFFQWpoQixPQUFBa2hCLE1BQUFsaEIsT0FBQThnQixhQUFBSyxXQUFBLEVBRUFuaEIsT0FBQW9oQixLQUFBcGhCLE9BQUE4Z0IsYUFBQU8sY0FFQXJoQixPQUFBc2hCLGFBQUF0aEIsT0FBQWtoQixNQUFBLElBQUFsaEIsT0FBQWdoQixJQUFBLElBQUFoaEIsT0FBQW9oQixLQUdBcGhCLE9BQUF1aEIsT0FBQXZoQixPQUFBc2EsV0FBQXFGLGFBS0EzZixPQUFBd2hCLGdCQUFBLFNBQUF6N0IsS0FBQXpELFNBQ0EwZCxPQUFBK0gsV0FBQS9pQixLQUFBLENBQUFlLEtBQUFBLEtBQUF6RCxRQUFBQSxVQUNBOUMsUUFBQUMsSUFBQXVnQixPQUFBK0gsWUFDQS9ILE9BQUFqYSxLQUFBLEdBQ0FpYSxPQUFBMWQsUUFBQSxJQUlBMGQsT0FBQXloQixjQUFBLFNBQUFDLFdBQ0FsaUMsUUFBQUMsSUFBQSxpQkFBQWlpQyxXQUVBMWhCLE9BQUEwYSxZQUFBLEVBQ0ExYSxPQUFBdWEsVUFBQSxHQUlBdmEsT0FBQTJoQixZQUFBLFNBQUE5cEIsTUFBQXRLLE1BQUFxMEIsU0FDQXIwQixNQUFBdEksT0FBQTRTLE1BQUEsR0FDQXJZLFFBQUFDLElBQUEsaUJBQUEsUUFBQW9ZLE1BQUEsVUFBQStwQixTQUNBNWhCLE9BQUF3YSxjQUFBeDFCLEtBQUE0OEIsU0FDQXBpQyxRQUFBQyxJQUFBLGlCQUFBdWdCLE9BQUF3YSxnQkFFQXJ0QixHQUFBMDBCLGdCQUFBLFdBRUE3aEIsT0FBQTBhLFlBQUEsR0FHQTFhLE9BQUE4aEIsYUFBQSxXQUVBOWhCLE9BQUF1YSxVQUFBLEdBRUF2YSxPQUFBK2hCLGNBQUEsV0FFQS9oQixPQUFBdWEsVUFBQSxHQUdBcHRCLEdBQUE2MEIsbUJBQUEsU0FBQXhZLFVBRUEsSUFBQTZWLFlBQUEsR0FDQWxpQyxNQUFBZ1EsR0FBQXJOLGFBQ0FOLFFBQUFDLElBQUEsNkJBQ0E0L0IsWUFBQXVCLE1BQUE1Z0IsT0FBQXNhLFdBQUEvdEIsTUFDQTh5QixZQUFBNXlCLFlBQUF1VCxPQUFBc2EsV0FBQTd0QixZQUNBNHlCLFlBQUFJLFNBQUF6ZixPQUFBc2EsV0FBQW1GLFNBQ0FKLFlBQUFNLFlBQUEzZixPQUFBc2EsV0FBQXFGLGNBRUFuZ0MsUUFBQUMsSUFBQSxnREFDQXRDLE1BQUFnUSxHQUFBck4sWUFBQXlNLE1BQ0E4eUIsWUFBQXVCLE1BQUE1Z0IsT0FBQXNhLFdBQUEvdEIsTUFHQTh5QixZQUFBdUIsTUFBQXp6QixHQUFBck4sWUFBQXlNLE1BRUFwUCxNQUFBZ1EsR0FBQXJOLFlBQUEyTSxZQUNBNHlCLFlBQUE1eUIsWUFBQXVULE9BQUFzYSxXQUFBN3RCLFlBR0E0eUIsWUFBQTV5QixZQUFBVSxHQUFBck4sWUFBQTJNLFlBRUF0UCxNQUFBZ1EsR0FBQXJOLFlBQUEyL0IsU0FFQUosWUFBQUksU0FBQXpmLE9BQUFzYSxXQUFBbUYsU0FHQUosWUFBQUksU0FBQXR5QixHQUFBck4sWUFBQTIvQixTQUVBdGlDLE1BQUFnUSxHQUFBck4sWUFBQTYvQixZQUNBTixZQUFBTSxZQUFBM2YsT0FBQXNhLFdBQUFxRixZQUVBTixZQUFBTSxZQUFBeHlCLEdBQUFyTixZQUFBNi9CLGFBSUEzZixPQUFBK0gsV0FBQTdqQixPQUFBLElBQ0FtN0IsWUFBQTk4QixNQUFBeWQsT0FBQStILFlBRUEvSCxPQUFBd2EsY0FBQXQyQixPQUFBLElBQ0ExRSxRQUFBQyxJQUFBLGtCQUFBdWdCLE9BQUF3YSxlQUNBNkUsWUFBQTVZLGFBQUF6RyxPQUFBd2EsZUFFQWg3QixRQUFBQyxJQUFBLGNBQUE0L0IsYUFDQTM3QixXQUNBNUQsWUFBQXUvQixZQUFBcmYsT0FBQXNhLFdBQUE5MUIsS0FDQWpELEtBQUEsU0FBQUMsTUFDQTVFLGFBQUE4SCxRQUFBLHVDQUNBc2IsT0FBQStILFdBQUEsR0FDQS9ILE9BQUF3YSxjQUFBLEdBQ0F4YSxPQUFBMGEsWUFBQSxFQUNBcGEsRUFBQSxnQkFBQTJFLE1BQUEsUUFDQTlYLEdBQUF5dUIsV0FBQSxVQUFBLGlCQUVBbDZCLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsR0FDQW9iLE9BQUErSCxXQUFBLEdBQ0EvSCxPQUFBd2EsY0FBQSxHQUNBeGEsT0FBQTBhLFlBQUEsRUFDQTk5QixhQUFBa04sTUFBQSwyQkFNQWtXLE9BQUFpaUIsYUFBQSw2Q0FDQWppQixPQUFBa2lCLGFBQUEsU0FBQUMsUUFDQTNpQyxRQUFBQyxJQUFBLFNBQUEwaUMsUUFDQW5pQixPQUFBaWlCLGFBQUEsS0FBQUUsUUFNQW5pQixPQUFBaFksT0FBQUMsU0FBQW9KLGVBQUEsZUFDQWlQLEVBQUEsaUJBQUFyUCxHQUFBLGlCQUFBLFNBQUFyTSxHQUdBMGIsRUFBQSxpQkFBQXlGLFdBQUEsQ0FDQUMsVUFBQSxRQUNBQyxZQUFBLEVBQ0FDLGVBQUEsRUFDQUMsV0FBQSxFQUNBQyxVQUFBLElBQ0FDLFdBQUEsTUFRQXJHLE9BQUFvaUIsZ0JBQUEsU0FBQWxtQyxJQUFBMmIsT0FDQXJZLFFBQUFDLElBQUEsUUFBQXZELEtBQ0Fva0IsRUFBQSxnQkFBQUMsSUFBQSxtQkFBQSxPQUFBcmtCLElBQUEsTUFLQThqQixPQUFBaWMsUUFBQSxFQUNBamMsT0FBQXFpQixVQUFBLEVBQ0FyaUIsT0FBQXNpQixVQUFBLEVBQ0F0aUIsT0FBQXVpQixRQUFBLEVBRUF2aUIsT0FBQXdpQixpQkFBQSxXQUNBeGlCLE9BQUFnYixlQUFBLEVBQ0FoYixPQUFBNmMsU0FDQTdjLE9BQUFxYixVQUFBLEVBQ0FyYixPQUFBa2MsVUFBQSxFQUNBbGMsT0FBQTBjLGtCQUNBcGMsRUFBQSxXQUFBQyxJQUFBLG1CQUFBLFdBRUFQLE9BQUF1YixVQUFBLDJCQUNBdmIsT0FBQXdiLFVBQUEsNENBQ0F4YixPQUFBeWIsUUFBQSxpQ0FDQXpiLE9BQUEwYixRQUFBLG9EQUdBcGIsRUFBQSxXQUFBQyxJQUFBLG1CQUFBLFdBQ0FELEVBQUEsY0FBQUMsSUFBQSxtQkFBQSxXQUNBRCxFQUFBLGVBQUFDLElBQUEsbUJBQUEsV0FDQVAsT0FBQTdYLFFBQUE2WCxPQUFBaFksT0FBQUksV0FBQSxNQUVBNFgsT0FBQXFjLEtBQUFyYyxPQUFBaFksT0FBQXk2Qix3QkFDQSxHQUFBemlCLE9BQUFxaUIsVUFBQSxHQUFBcmlCLE9BQUFzaUIsVUFBQSxHQUFBdGlCLE9BQUF1aUIsU0FDQXZpQixPQUFBaFksT0FBQTA2QixvQkFBQSxZQUFBQyxXQUNBM2lCLE9BQUFoWSxPQUFBMDZCLG9CQUFBLFlBQUFFLE1BQ0E1aUIsT0FBQWhZLE9BQUEwNkIsb0JBQUEsVUFBQXZQLFVBQ0FuVCxPQUFBaFksT0FBQTA2QixvQkFBQSxZQUFBRyxXQUNBN2lCLE9BQUFoWSxPQUFBMDZCLG9CQUFBLFlBQUFJLFlBR0E5aUIsT0FBQWhZLE9BQUF5TyxpQkFBQSxZQUFBdWxCLGVBQ0FoYyxPQUFBaFksT0FBQXlPLGlCQUFBLFlBQUFzbUIsVUFDQS9jLE9BQUFoWSxPQUFBeU8saUJBQUEsVUFBQThtQixlQXdEQXZkLE9BQUEraUIsWUFBQSxXQUNBLEdBQUEvaUIsT0FBQTJhLFVBQUF6MkIsT0FBQSxFQUFBLENBQ0EsSUFBQTgrQixRQUFBaGpCLE9BQUFoWSxPQUFBSSxXQUFBLE1BQ0E0NkIsUUFBQUMsVUFBQSxFQUFBLEVBQUFqakIsT0FBQWhZLE9BQUFNLE1BQUEwWCxPQUFBaFksT0FBQUssUUFDQSxJQUFBNjZCLFFBQUFsakIsT0FBQTJhLFVBQUF3SSxNQUNBbmpCLE9BQUE0YSxVQUFBNTFCLEtBQUFrK0IsU0FFQWxqQixPQUFBMmEsVUFBQXowQixRQUFBLFNBQUEyZCxTQUNBbWYsUUFBQWhHLGFBQUFuWixRQUFBLEVBQUEsT0FLQTdELE9BQUFvakIsWUFBQSxXQUNBLElBQUFKLFFBQUFoakIsT0FBQWhZLE9BQUFJLFdBQUEsTUFDQSxHQUFBNFgsT0FBQTRhLFVBQUExMkIsT0FBQSxFQUFBLENBQ0EsSUFBQTRQLEtBQUFrTSxPQUFBNGEsVUFBQXVJLE1BRUFILFFBQUFoRyxhQUFBbHBCLEtBQUEsRUFBQSxLQUtBM0csR0FBQWsyQixhQUFBLFdBQ0EsSUFBQXo2QixLQUFBWCxTQUFBb0osZUFBQSxRQUNBekksS0FBQTA2QixhQUFBLFdBQUEsa0JBQ0ExNkIsS0FBQTA2QixhQUFBLE9BQUF0akIsT0FBQWhZLE9BQUFXLFVBQUEsYUFBQTJELFFBQUEsWUFBQSx1QkFDQTFELEtBQUFLLFdBaDRCQSxHQ0FBLFdBQ0F6TyxRQUFBQyxPQUFBLE9BQUEyQixXQUFBLGVBRUEsU0FDQTRqQixPQUNBQyxTQUNBQyxZQUNBM2pCLE9BQ0FtSCxXQUNBOUcsYUFDQUYsUUFDQXlqQixNQUNBeGpCLE9BQ0E0bUMsUUFDQSxJQUFBQyxNQUFBdmxDLEtBRUFrUCxHQUFBbFAsS0FDQU4sT0FBQWpCLFFBQUFpQixPQUFBQyxVQUFBbEIsUUFBQWtCLFVBQUF3TixTQUFBMU8sUUFBQTBPLFNBQ0EsSUFBQThVLFlBQUFoZCxZQUVBLFlBREF2RixTQUtBd1AsR0FBQXBELFNBQUFuTSxVQUFBUCxNQUVBOFAsR0FBQXhQLE9BQUEsV0FDQUEsVUFJQXdQLEdBQUFzMkIsU0FBQSxHQUNBdDJCLEdBQUE0YSxXQUFBLEdBRUE1YSxHQUFBdVYsVUFBQSxDQUNBZ2hCLFVBQUEsRUFDQS9nQixRQUFBLEVBQ0FoRCxNQUFBLEVBQ0EwQyxVQUFBLEdBTUEsSUFBQS9YLGVBQUE1TixRQUFBNE4saUJBQ0E2QyxHQUFBdzJCLFVBQUFyNUIsZUFBQWpOLE1BQUFrTixJQUNBK1YsRUFBQSwwQkFDQXNqQixHQUFBdDVCLGVBQUFqTixNQUFBa04sS0FDQXVXLFNBQUEsUUFDQTNULEdBQUE2VCxZQUFBLEVBRUE3VCxHQUFBMDJCLFVBQUEsU0FBQXQrQixLQUNBK0UsZUFBQU8sT0FBQXRGLE1BR0E0SCxHQUFBOFQsVUFBQSxDQUNBeFcsU0FBQSxDQUNBMmxCLFdBQUEsRUFDQTVLLGNBQUEsRUFDQUksWUFBQSxFQUNBeUssV0FBQSxFQUNBcnVCLE1BQUEsR0FFQTBJLE1BQUEsQ0FDQTBsQixXQUFBLEVBQ0E1SyxjQUFBLEVBQ0FJLFlBQUEsRUFDQXlLLFdBQUEsRUFDQXJ1QixNQUFBLElBSUEwQixXQUNBb2dDLGtCQUNBdmlDLEtBQUEsU0FBQUMsTUFDQTJMLEdBQUE0MkIsVUFBQXZpQyxLQUFBckQsS0FBQTJqQixPQUVBcGdCLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsS0FHQXVJLEdBQUEzQyxXQUFBRixlQUFBak4sTUFBQW1OLFdBRUF3VixPQUFBWSxPQUNBLGdCQUNBLFNBQUE5VixNQUNBUixlQUFBUSxLQUFBQSxRQUVBLEdBR0FxQyxHQUFBNjJCLFdBQUEsU0FBQTdsQyxNQUNBZ1AsR0FBQTgyQixhQUFBOWxDLEtBQUE2RCxNQUdBbUwsR0FBQSsyQixZQUFBLFNBQUE5Z0MsS0FBQXFlLFVBQ0EsR0FBQXJlLE1BQUFxZSxTQUVBLE9BREFqaUIsUUFBQUMsSUFBQSxLQUFBME4sR0FBQThULFVBQUFRLFVBQUFyZSxPQUNBLGNBQUFBLEtBQUEsT0FDQStKLEdBQUE4VCxVQUFBUSxVQUFBcmUsTUFBQSxNQUFBLFFBS0ErSixHQUFBZzNCLGNBQUEsU0FBQS9nQyxLQUFBcWUsZUFFQXRrQixJQUFBZ1EsR0FBQThULFVBQUFRLFVBQUFyZSxNQUNBK0osR0FBQThULFVBQUFRLFVBQUFyZSxPQUFBLEVBQ0ErSixHQUFBOFQsVUFBQVEsVUFBQXJlLE9BQUErSixHQUFBOFQsVUFBQVEsVUFBQXJlLE1BQ0EsSUFBQWdoQyxRQUNBLGFBQUEzaUIsU0FBQSxtQkFBQSx3QkFFQS9kLFdBQUEwZ0MsU0FBQSxDQUNBdjhCLEtBQUF5QyxlQUFBak4sTUFBQXdLLEtBQUE0WixVQUNBdEUsTUFBQSxHQUNBdUUsS0FBQXRlLEtBQ0F1ZSxPQUFBclgsZUFBQWpOLE1BQUFtTixXQUNBb1gsU0FBQXpVLEdBQUE4VCxVQUFBUSxVQUFBcmUsUUFFQTdCLEtBQUEsU0FBQUMsTUFDQTJMLEdBQUFzVSxVQUFBamdCLEtBQUFyRCxLQUFBMmpCLEtBQ0EzVSxHQUFBc1UsU0FBQSxTQUFBamdCLEtBQUFyRCxLQUFBNmpCLE1BQ0EvQixTQUFBLFdBQ0FLLEVBQUEsSUFBQW1CLFNBQUEsY0FBQVEsV0FBQSxDQUNBcmUsTUFBQXVKLEdBQUFzVSxTQUFBLFNBQ0FTLFlBQUEsR0FDQUMsU0FBQSxjQUNBQyxlQUFBLElBQ0FDLFVBQUEsRUFDQXJCLFlBQUExVyxlQUFBak4sTUFBQXdLLEtBQUE0WixVQUNBYSxZQUFBLFNBQUF6YSxLQUFBa1AsT0FDQUEsTUFBQXdMLGlCQUNBalksZUFBQUssUUFBQThXLFNBQUE1WixNQUVBbkUsV0FBQTBnQyxTQUFBLENBQ0F2OEIsS0FBQUEsS0FDQXNWLE1BQUEsR0FDQXVFLEtBQUF0ZSxLQUNBdWUsT0FBQXJYLGVBQUFqTixNQUFBbU4sV0FDQW9YLFNBQUF6VSxHQUFBOFQsVUFBQVEsVUFBQXJlLFFBRUE3QixLQUFBLFNBQUFDLE1BQ0EyTCxHQUFBc1UsVUFBQWpnQixLQUFBckQsS0FBQTJqQixPQUVBcGdCLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsWUFNQWxELE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsTUFJQSxJQUFBNGQsZUFBQXBYLFNBQUEsS0FDQStCLEdBQUFrM0IsZ0JBQUEsU0FBQXY1QixLQUFBMlcsVUFLQWUsZUFDQSxXQUNBLElBQUE0aEIsUUFDQSxhQUFBM2lCLFNBQ0EsbUJBQ0Esd0JBRUEvZCxXQUFBMGdDLFNBQUEsQ0FDQXY4QixLQUFBLEVBQ0FzVixNQUFBLEdBQ0F3RSxPQUFBN1csS0FDQTRXLEtBQUEsY0FDQUUsVUFBQSxJQUVBcmdCLEtBQUEsU0FBQUMsTUFDQTJMLEdBQUFzVSxVQUFBamdCLEtBQUFyRCxLQUFBMmpCLEtBQ0EzVSxHQUFBc1UsU0FBQSxTQUFBamdCLEtBQUFyRCxLQUFBNmpCLE1BQ0EvQixTQUFBLFdBQ0FLLEVBQUEsSUFBQW1CLFNBQUEsY0FBQVEsV0FBQSxDQUNBcmUsTUFBQXVKLEdBQUFzVSxTQUFBLFNBQ0FTLFlBQUEsR0FDQUMsU0FBQSxjQUNBQyxlQUFBLElBQ0FDLFVBQUEsRUFDQXJCLFlBQUEsRUFDQXNCLFlBQUEsU0FBQXphLEtBQUFrUCxPQUNBQSxNQUFBd0wsaUJBQ0E3ZSxXQUFBMGdDLFNBQUEsQ0FDQXY4QixLQUFBQSxLQUNBc1YsTUFBQSxHQUNBdUUsS0FBQXRlLEtBQ0F3ZSxTQUFBelUsR0FBQThULFVBQUFRLFVBQUFyZSxRQUVBN0IsS0FBQSxTQUFBQyxNQUNBMkwsR0FBQW0zQixVQUFBOWlDLEtBQUFyRCxLQUFBMmpCLE9BRUFwZ0IsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixZQU1BbEQsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixNQUdBLENBQUFrRyxLQUFBMlcsWUFLQXRVLEdBQUFnM0IsY0FBQSxZQUFBLFlBQ0FoM0IsR0FBQWczQixjQUFBLFlBQUEsU0FLQWgzQixHQUFBc2pCLFlBQUEsQ0FDQUMsaUJBQUEsRUFDQTZULGtCQUhBLEdBSUFDLGdCQUFBakIsU0FDQWwxQixJQUxBLEdBS0EsUUFDQWtrQixVQUVBcGxCLEdBQUFzM0Isd0JBQUEsU0FBQUMsTUFDQXYzQixHQUFBc2pCLFlBQUErVCxnQkFBQWpCLFNBQ0FsMUIsSUFBQXEyQixLQUFBLFFBQ0FuUyxVQUdBcGxCLEdBQUF3akIsWUFBQSxDQUFBQyxTQUFBLEdBRUF6akIsR0FBQXczQixVQUFBLFNBQUFwL0IsSUFBQXEvQixNQUNBLEdBQUEsU0FBQUEsS0FBQSxDQUFBLElBa0NBQyxhQUFBLFNBQUF0L0IsS0FDQSthLEVBQUEscUNBQUFPLFlBQUEsVUFDQVAsRUFBQSxxQ0FDQXNqQixHQUFBcitCLEtBQ0F1YixTQUFBLFVBRUFSLEVBQUEscUNBQUFPLFlBQUEsVUFDQVAsRUFBQSxxQ0FBQU8sWUFBQSxRQUNBUCxFQUFBLHFDQUNBc2pCLEdBQUFyK0IsS0FDQXViLFNBQUEsUUFDQVIsRUFBQSxxQ0FDQXNqQixHQUFBcitCLEtBQ0F1YixTQUFBLFdBOUNBLEdBQUEsR0FBQXZiLFVBQ0EsR0FBQSxHQUFBQSxJQUFBLENBQ0EsSUFBQTRILEdBQUEyM0IscUJBQUE5aUMsS0FFQSxZQURBcEYsYUFBQWtOLE1BQUEsb0NBRUEsSUFBQXFELEdBQUE4MkIsYUFFQSxZQURBcm5DLGFBQUFrTixNQUFBLHNCQUVBLElBQUFxRCxHQUFBMjNCLHFCQUFBcjRCLFlBRUEsWUFEQTdQLGFBQUFrTixNQUFBLGtDQUdBKzZCLGFBQUF0L0IsVUFFQSxHQUFBLEdBQUFBLElBQUEsQ0FDQSxHQUFBLEdBQUE0SCxHQUFBb1ksa0JBQUFyaEIsT0FFQSxZQURBdEgsYUFBQWtOLE1BQUEsK0JBR0FxRCxHQUFBNDNCLFFBQUEsRUFDQTUzQixHQUFBNjNCLFFBQUEsRUFFQXhxQyxRQUFBMEwsUUFBQWlILEdBQUFvWSxrQkFBQSxTQUFBM2EsT0FDQXVDLEdBQUE0M0IsUUFDQXpuQixXQUFBblEsR0FBQTQzQixTQUFBem5CLFdBQUExUyxNQUFBNGEsY0FDQXJZLEdBQUE2M0IsUUFDQTFuQixXQUFBblEsR0FBQTYzQixTQUFBMW5CLFdBQUExUyxNQUFBZ2IsY0FFQXpZLEdBQUE0M0IsUUFBQXpuQixXQUFBdFAsS0FBQUMsTUFBQSxJQUFBZCxHQUFBNDNCLFNBQUEsS0FDQTUzQixHQUFBNjNCLFFBQUExbkIsV0FBQXRQLEtBQUFDLE1BQUEsSUFBQWQsR0FBQTYzQixTQUFBLEtBQ0FILGFBQUF0L0IsVUFrQkEsQ0FDQSxJQUFBNEgsR0FBQXNqQixZQUFBVyxhQUVBLFlBREF4MEIsYUFBQWtOLE1BQUEsOEJBS0EsSUFBQXFELEdBQUFzakIsWUFBQUksU0FFQSxZQURBajBCLGFBQUFrTixNQUFBLDBCQUdBd1csRUFBQSwwQ0FBQU8sWUFBQSxVQUNBUCxFQUFBLDBDQUNBc2pCLEdBQUFyK0IsS0FDQXViLFNBQUEsVUFFQVIsRUFBQSwwQ0FBQU8sWUFBQSxVQUNBUCxFQUFBLDBDQUFBTyxZQUFBLFFBQ0FQLEVBQUEsMENBQ0FzakIsR0FBQXIrQixLQUNBdWIsU0FBQSxRQUNBUixFQUFBLDBDQUNBc2pCLEdBQUFyK0IsS0FDQXViLFNBQUEsWUFLQXBkLFdBQ0FuRixlQUFBNE8sR0FBQXBELFNBQUF2TCxXQUNBK0MsS0FBQSxTQUFBQyxNQUNBMkwsR0FBQWhELFlBQUEzSSxLQUFBckQsS0FDQWdQLEdBQUFzakIsWUFBQUksU0FBQTFqQixHQUFBaEQsWUFBQTJtQixnQkFBQTFNLGVBRUE3aUIsS0FBQSxTQUFBcUQsR0FDQXBGLFFBQUFDLElBQUFtRixLQUdBb2IsT0FBQVksT0FBQSwwQkFBQSxTQUFBaFcsT0FDQTBWLEVBQUEsd0JBQUFPLFlBQUEsOEJBQ0FQLEVBQUEsd0JBQUFRLFNBQUEsdUJBR0EzVCxHQUFBak0sbUJBQUEsU0FBQTZ2QixLQUFBQyxJQUNBMVEsRUFBQSxXQUFBNU0sT0FDQSxJQUFBdWQsYUFBQSxDQUNBRixLQUFBQSxLQUNBQyxHQUFBQSxJQUVBdHRCLFdBQ0F4QyxtQkFBQSt2QixjQUNBMXZCLEtBQUEsU0FBQUMsTUFDQTJMLEdBQUFzakIsWUFBQUMsaUJBQUFsdkIsS0FBQXJELEtBQUF1eUIsaUJBQ0F6USxTQUFBLFdBQ0FLLEVBQUEsV0FBQW9PLFFBQ0EsT0FFQWh0QixNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLE1BSUF1SSxHQUFBbWtCLGdCQUFBLFdBQ0E5eEIsUUFBQUMsSUFBQTBOLEdBQUFzakIsWUFBQVksY0FFQWwwQixNQUFBZ1EsR0FBQXNqQixZQUFBVyxjQUNBLElBQUFqa0IsR0FBQXNqQixZQUFBVyxhQU1BamtCLEdBQUFzakIsWUFBQVksY0FBQSxJQUFBbGtCLEdBQUFzakIsWUFBQVksYUFNQWwwQixNQUFBZ1EsR0FBQXNqQixZQUFBSSxVQUNBLElBQUExakIsR0FBQXNqQixZQUFBSSxTQU1BN1EsT0FBQWUsZ0JBQUEsRUFKQW5rQixhQUFBa04sTUFBQSwwQkFSQWxOLGFBQUFrTixNQUFBLCtCQUxBbE4sYUFBQWtOLE1BQUEsK0JBb0JBcUQsR0FBQW9rQixXQUFBLFNBQUFDLEtBQUFDLGdCQUNBLE9BQUFELEtBQUFDLGdCQUdBdGtCLEdBQUF5b0IsV0FBQSxTQUFBcVAsU0FBQTdoQyxNQUNBLFFBQ0ErSixHQUFBczJCLFNBQUF4K0IsT0FBQWdnQyxTQUFBLEdBRUE5M0IsR0FBQTRhLFdBQUE5aUIsT0FBQWdnQyxTQUFBLElBSUE5M0IsR0FBQSszQixtQkFBQSxTQUFBRCxTQUFBN2hDLE1BQ0E0YyxPQUFBbWxCLFNBQUEvaEMsS0FDQTRjLE9BQUFvbEIsVUFBQUgsVUFFQTkzQixHQUFBazRCLGVBQUEsU0FBQXh0QixNQUFBMVosTUFDQSxTQUFBNmhCLE9BQUFtbEIsU0FDQWg0QixHQUFBczJCLFNBQUE1ckIsT0FBQXBMLFlBQUF0TyxLQUVBZ1AsR0FBQTRhLFdBQUFsUSxPQUFBcEwsWUFBQXRPLEtBRUFxQixRQUFBQyxJQUFBNmdCLEVBQUFrakIsT0FBQS9OLFNBQUE5TixLQUFBLFdBRUF4YSxHQUFBdWtCLG1CQUFBLFdBQ0ExUixPQUFBblosWUFBQSxHQUFBa0YsT0FBQW9CLEdBQUFzMkIsU0FBQXQyQixHQUFBNGEsWUFDQXZvQixRQUFBQyxJQUFBdWdCLE9BQUFuWixhQUNBLElBQUEyaUIsU0FBQSxDQUNBeG5CLEtBQUFtTCxHQUFBc2pCLFlBQUFXLGFBQ0E5ZCxLQUFBbkcsR0FBQTgyQixhQUNBemUsYUFBQSxDQUNBNWEsTUFBQXVDLEdBQUFva0IsV0FDQXBrQixHQUFBc2pCLFlBQUE2VSxrQkFDQW40QixHQUFBc2pCLFlBQUFDLGtCQUVBdE0sYUFBQWpYLEdBQUFoRCxZQUFBMm1CLGdCQUFBMU0sY0FFQXdCLFdBQUEsQ0FDQWhiLE1BQUF1QyxHQUFBb2tCLFdBQ0Fwa0IsR0FBQXNqQixZQUFBb0IsZ0JBQ0Exa0IsR0FBQXNqQixZQUFBQyxrQkFFQXRNLGFBQUFqWCxHQUFBaEQsWUFBQTJtQixnQkFBQTFNLGNBRUEyZixVQUFBNTJCLEdBQUFzakIsWUFBQXNULFVBQ0F4aEMsTUFBQXlkLE9BQUFuWixZQUNBd3JCLFNBQUFyUyxPQUFBblosWUFBQXZDLElBQUEsU0FBQUMsRUFBQTRILEdBQ0EsTUFBQSxDQUNBbzVCLGlCQUFBaGhDLEVBQUFrSSxnQkFLQS9JLFdBQ0F0RCxnQkFBQW9wQixVQUNBam9CLEtBQUEsU0FBQUMsTUFDQXdlLE9BQUF6VixJQUFBLEVBQ0ErVixFQUFBLGVBQUEyRSxNQUFBLFFBQ0Fyb0IsYUFBQThILFFBQUFsRCxLQUFBckQsS0FBQXdHLFNBR0F3SSxHQUFBOFQsVUFBQXhXLFNBQUE0bEIsV0FBQSxFQUVBbGpCLEdBQUFnM0IsY0FBQSxZQUFBLFlBRUFoM0IsR0FBQXNqQixZQUFBLENBQ0FDLGlCQUFBLEtBR0FodkIsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixNQUlBdUksR0FBQXpNLGdCQUFBLFNBQUFYLElBQ0EyRCxXQUNBaEQsZ0JBQUFYLElBQ0F3QixLQUFBLFNBQUFDLE1BQ0FoQyxRQUFBQyxJQUFBK0IsUUFFQUUsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixNQUtBMGIsRUFBQSxnQkFBQXJQLEdBQUEsZ0JBQUEsV0FDQStPLE9BQUFlLGdCQUFBLEVBQ0E1VCxHQUFBc2pCLFlBQUEsQ0FDQUMsaUJBQUEsS0FLQXZqQixHQUFBb1ksa0JBQUEsR0FDQXBZLEdBQUEyM0IscUJBQUEsR0FDQTMzQixHQUFBK1osbUJBQUEsR0FHQS9aLEdBQUFuQyxPQUFBdE8sUUFBQXNPLE9BQ0F0TyxRQUFBdU8sY0FBQTFKLEtBQUEsU0FBQUMsTUFDQTJMLEdBQUErakIsV0FBQTF2QixLQUFBckQsS0FDQWdQLEdBQUFxNEIsZUFBQSxTQUFBMWlCLFFBQ0EsT0FBQSxJQUFBM2hCLFFBQUEsU0FBQUMsUUFBQUMsUUFDQUQsUUFBQUksS0FBQXJELFdBS0F1RixXQUNBcEQsbUJBQ0FpQixLQUFBLFNBQUFDLE1BQ0EyTCxHQUFBczRCLGdCQUFBamtDLEtBQUFyRCxLQUFBMmpCLE9BRUFwZ0IsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixLQUdBdUksR0FBQXU0QixVQUFBLENBQ0FoZ0IsU0FBQSxFQUNBRixhQUFBLEVBQ0FJLFdBQUEsR0FHQXpZLEdBQUF3NEIsZ0JBQUEsU0FBQWw3QixVQUNBLElBQUFtN0IsYUFBQXJvQyxLQUFBc29DLE1BQUFwN0IsVUFDQUEsV0FDQTBDLEdBQUF1NEIsVUFBQWxnQixhQUFBbEksV0FDQXRQLEtBQUFDLE1BQ0FkLEdBQUF1NEIsVUFBQWhnQixTQUNBa2dCLGFBQUFuZ0IsWUFBQUQsYUFBQTVhLE1BQ0EsS0FDQSxLQUVBdUMsR0FBQXU0QixVQUFBOWYsV0FBQXRJLFdBQ0F0UCxLQUFBQyxNQUNBZCxHQUFBdTRCLFVBQUFoZ0IsU0FDQWtnQixhQUFBbmdCLFlBQUFHLFdBQUFoYixNQUNBLEtBQ0EsS0FFQTBWLEVBQUEsd0JBQUFPLFlBQUEsOEJBQ0FQLEVBQUEsd0JBQUFRLFNBQUEsdUJBSUEzVCxHQUFBMjRCLFVBQUEsU0FBQXZnQyxJQUFBcEgsTUFDQSxJQUFBc00sU0FBQWxOLEtBQUFzb0MsTUFBQTFuQyxNQUNBLElBQUFvSCxLQUFBLEdBQUFBLEtBQ0E0SCxHQUFBdTRCLFVBQUFoZ0IsU0FBQSxFQUNBbmdCLElBQUEsRUFDQTRILEdBQUF1NEIsVUFBQWxnQixhQUFBbEksV0FDQXRQLEtBQUFDLE1BQUExSSxJQUFBa0YsU0FBQWdiLFlBQUFELGFBQUE1YSxNQUFBLEtBQUEsS0FFQXVDLEdBQUF1NEIsVUFBQTlmLFdBQUF0SSxXQUNBdFAsS0FBQUMsTUFBQTFJLElBQUFrRixTQUFBZ2IsWUFBQUcsV0FBQWhiLE1BQUEsS0FBQSxPQUdBdUMsR0FBQXU0QixVQUFBbGdCLGFBQUFsSSxXQUNBdFAsS0FBQUMsTUFBQTFJLElBQUFrRixTQUFBZ2IsWUFBQUQsYUFBQTVhLE1BQUEsS0FBQSxLQUVBdUMsR0FBQXU0QixVQUFBOWYsV0FBQXRJLFdBQ0F0UCxLQUFBQyxNQUFBMUksSUFBQWtGLFNBQUFnYixZQUFBRyxXQUFBaGIsTUFBQSxLQUFBLE9BS0F1QyxHQUFBaWEsbUJBQUEsV0FDQWphLEdBQUErWixtQkFBQWxpQixLQUFBLENBQ0FxaUIsZUFBQSxHQUNBMGUsZ0JBQUEsTUFHQTU0QixHQUFBbWEseUJBQUEsU0FBQXpQLE9BQ0ExSyxHQUFBK1osbUJBQUFqaUIsT0FBQTRTLE1BQUEsSUFHQTFLLEdBQUE2NEIsb0JBQUEsU0FBQXY3QixVQUNBLElBQUF0TSxLQUFBWixLQUFBc29DLE1BQUFwN0IsVUFDQWpMLFFBQUFDLElBQUEsYUFBQXRCLE1BQ0EsSUFBQUEsT0FDQWdQLEdBQUFvWSxrQkFBQXZnQixLQUFBLENBQ0FrUixXQUFBL1gsS0FBQXFHLElBQ0F4QyxLQUFBN0QsS0FBQTZELEtBQ0EwakIsU0FBQXZZLEdBQUF1NEIsVUFBQWhnQixTQUNBRixhQUFBclksR0FBQXU0QixVQUFBbGdCLGFBQ0FJLFdBQUF6WSxHQUFBdTRCLFVBQUE5ZixXQUNBcUIsb0JBQUE5WixHQUFBK1oscUJBRUEvWixHQUFBK1osbUJBQUEsR0FDQS9aLEdBQUF1NEIsVUFBQSxDQUNBaGdCLFNBQUEsRUFDQUYsYUFBQSxFQUNBSSxXQUFBLEdBR0F6WSxHQUFBMjNCLHFCQUFBbUIsY0FBQSxHQUNBM2xCLEVBQUEsbUNBQUF4VixLQUFBLE1BSUFxQyxHQUFBb2EsWUFBQSxTQUFBaGxCLE1BQUF3VSxNQUFBbXZCLE9BQ0EsSUFBQTFlLFFBQUF6USxNQUFBOEgsT0FBQXRjLE1BQ0E0SyxHQUFBc2EsVUFBQTVvQixPQUFBQyxLQUFBMG9CLFNBQUFsakIsSUFBQSxTQUFBQyxHQUFBLE9BQUFpakIsUUFBQWpqQixHQUFBdkMsT0FDQXhILFFBQUEwTCxRQUFBM0QsTUFBQSxTQUFBZ0MsRUFBQXNULE9BQ0F0VCxFQUFBa0ksWUFBQSxNQUlBVSxHQUFBZzVCLHdCQUFBLFdBQ0EsSUFBQUMsT0FBQSxHQUVBajVCLEdBQUFvWSxrQkFBQXJmLFFBQUEsU0FBQTNCLEdBQ0EsSUFBQThoQyxhQUFBLEdBQ0EsSUFBQTloQyxFQUFBMGlCLG9CQUFBL2lCLFFBQ0FLLEVBQUEwaUIsb0JBQUEvZ0IsUUFBQSxTQUFBM0IsR0FDQThoQyxhQUFBOWhDLEVBQUE4aUIsZ0JBQUFoSyxPQUFBOVksRUFBQXdoQyxtQkFHQUssT0FBQXBoQyxLQUFBLENBQ0FrUixXQUFBM1IsRUFBQTJSLFdBQ0F3UCxTQUFBbmhCLEVBQUFtaEIsU0FDQXVCLG9CQUFBb2YsaUJBSUEsSUFBQWxvQyxLQUFBLENBQ0E2RCxLQUFBbUwsR0FBQTIzQixxQkFBQTlpQyxLQUNBc1IsS0FBQW5HLEdBQUEyM0IscUJBQUF3QixXQUNBL2dCLGtCQUFBNmdCLE9BQ0E3akMsTUFBQTRLLEdBQUFzMkIsVUFHQS8vQixXQUNBNmlDLGVBQ0FobEMsS0FBQSxTQUFBQyxNQUNBLElBQUE0dUIsVUFBQSxDQUFBQSxVQUFBNXVCLEtBQUFyRCxLQUFBcW9DLFVBQ0Foc0MsUUFBQWlzQyxPQUFBdG9DLEtBQUFpeUIsV0FDQTFzQixXQUNBM0Msb0JBQUE1QyxNQUNBb0QsS0FBQSxTQUFBQyxNQUNBNUUsYUFBQThILFFBQUFsRCxLQUFBckQsS0FBQXdHLFNBQ0EyYixFQUFBLHFCQUFBMkUsTUFBQSxVQUVBdmpCLE1BQUEsU0FBQWtELEdBQ0FoSSxhQUFBa04sTUFBQWxGLEVBQUF6RyxLQUFBd0csYUFHQWpELE1BQUEsU0FBQWtELEdBQ0FoSSxhQUFBa04sTUFBQWxGLEVBQUF6RyxLQUFBd0csWUFJQXdJLEdBQUF1NUIsY0FBQSxTQUFBNWlDLE1BQ0FxSixHQUFBb1ksa0JBQUF0Z0IsT0FBQW5CLEtBQUEsTUFubkJBLEdDQUEsV0FDQXRKLFFBQUFDLE9BQUEsT0FBQTJCLFdBQUEsbUJBRUEsU0FDQTRqQixPQUNBQyxTQUNBQyxZQUNBM2pCLE9BQ0Eyb0IsYUFDQXhoQixXQUNBOUcsYUFDQUYsUUFDQUYsVUFDQUcsUUFHQSxJQUFBd1EsR0FBQWxQLEtBQ0FOLE9BQUFqQixRQUFBaUIsT0FBQUMsVUFBQWxCLFFBQUFrQixVQUNBLElBQUFzaUIsWUFBQWhkLFlBRUEsWUFEQXZGLFNBS0F3UCxHQUFBcEQsU0FBQW5NLFVBQUFQLE1BQ0E4UCxHQUFBeFAsT0FBQSxXQUNBQSxVQUdBd1AsR0FBQStJLFdBQUFnUCxhQUFBbmxCLEdBQ0FvTixHQUFBbkMsT0FBQXRPLFFBQUFzTyxPQUNBdE8sUUFBQXVPLGNBQUExSixLQUFBLFNBQUFDLE1BQ0EyTCxHQUFBK2pCLFdBQUExdkIsS0FBQXJELEtBQ0FnUCxHQUFBcTRCLGVBQUEsU0FBQTFpQixRQUNBLE9BQUEsSUFBQTNoQixRQUFBLFNBQUFDLFFBQUFDLFFBQ0FELFFBQUFJLEtBQUFyRCxXQUtBZ1AsR0FBQWpNLG1CQUFBLFNBQUE2dkIsS0FBQUMsSUFDQTFRLEVBQUEsV0FBQTVNLE9BQ0EsSUFBQXVkLGFBQUEsQ0FDQUYsS0FBQUEsS0FDQUMsR0FBQUEsSUFFQUQsTUFDQXJ0QixXQUNBeEMsbUJBQUErdkIsY0FDQTF2QixLQUFBLFNBQUFDLE1BQ0EyTCxHQUFBdzVCLGFBQUFqVyxpQkFBQWx2QixLQUFBckQsS0FBQXV5QixpQkFDQXpRLFNBQUEsV0FDQUssRUFBQSxXQUFBb08sUUFDQSxPQUVBaHRCLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsTUFNQXVJLEdBQUF3M0IsVUFBQSxTQUFBcC9CLEtBQ0E0SCxHQUFBdzVCLGFBQUEza0MsS0FFQW1MLEdBQUE4MkIsYUFFQTkyQixHQUFBdzVCLGFBQUE5VixVQUdBdlEsRUFBQSwwQ0FBQU8sWUFBQSxVQUNBUCxFQUFBLDBDQUFBc2pCLEdBQUFyK0IsS0FBQXViLFNBQUEsVUFFQVIsRUFBQSwwQ0FBQU8sWUFBQSxVQUNBUCxFQUFBLDBDQUFBTyxZQUFBLFFBQ0FQLEVBQUEsMENBQUFzakIsR0FBQXIrQixLQUFBdWIsU0FBQSxRQUNBUixFQUFBLDBDQUFBc2pCLEdBQUFyK0IsS0FBQXViLFNBQUEsV0FSQWxrQixhQUFBa04sTUFBQSwwQkFGQWxOLGFBQUFrTixNQUFBLCtCQUZBbE4sYUFBQWtOLE1BQUEsK0JBZ0JBcUQsR0FBQXFaLFVBQUEsRUFDQXJaLEdBQUFzWixhQUFBLEdBQ0F6RyxPQUFBNG1CLGFBQUEsV0FDQWxqQyxXQUNBaEQsZ0JBQUF5TSxHQUFBK0ksWUFDQTNVLEtBQUEsU0FBQUMsTUFDQTJMLEdBQUF3WixZQUFBbmxCLEtBQUFyRCxLQUNBZ1AsR0FBQTA1QixZQUFBMTVCLEdBQUF3WixZQUFBM2tCLEtBQ0FtTCxHQUFBMjVCLFlBQUEzNUIsR0FBQXdaLFlBQUFyVCxLQUNBOVQsUUFBQUMsSUFBQTBOLEdBQUF3WixhQUNBeFosR0FBQTQ1QixZQUFBMXBCLE9BQ0FsUSxHQUFBd1osWUFBQWxCLFlBQUFELGFBQUE1YSxPQUNBMlMsUUFBQSxHQUNBcFEsR0FBQTY1QixvQkFDQTc1QixHQUFBd1osWUFBQWxCLFlBQUFELGFBQUFwQixhQUNBalgsR0FBQTg1QixrQkFBQTVwQixPQUNBbFEsR0FBQXdaLFlBQUFsQixZQUFBRyxXQUFBaGIsT0FDQTJTLFFBQUEsR0FDQXBRLEdBQUErNUIsMEJBQ0EvNUIsR0FBQXdaLFlBQUFsQixZQUFBRyxXQUFBeEIsYUFDQWpYLEdBQUFnNkIsaUJBQUFoNkIsR0FBQXdaLFlBQUF5Z0IsYUFBQUMsVUFBQXJsQyxLQUNBbUwsR0FBQW02QixpQkFBQW42QixHQUFBd1osWUFBQTBKLFVBQ0FsakIsR0FBQW82QixpQkFBQXA2QixHQUFBd1osWUFBQTBKLFVBQ0FyUSxPQUFBd25CLFNBQUEsQ0FDQSxDQUFBOW1CLElBQUEsK0JBQUFuVSxNQUFBLE9BQUEzQixNQUFBdUMsR0FBQTI1QixhQUNBLENBQUFwbUIsSUFBQSxpQ0FBQW5VLE1BQUEsZ0JBQUEzQixNQUFBdUMsR0FBQTQ1QixZQUFBM2lCLGFBQUFqWCxHQUFBNjVCLHFCQUNBLENBQUF0bUIsSUFBQSxpQ0FBQW5VLE1BQUEsY0FBQTNCLE1BQUF1QyxHQUFBODVCLGtCQUFBN2lCLGFBQUFqWCxHQUFBKzVCLDhCQUdBeGxDLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsTUFHQW9iLE9BQUE0bUIsZUFFQXo1QixHQUFBdVosVUFBQSxTQUFBaEcsS0FDQXZULEdBQUFzWixhQUFBemhCLEtBQUFtSSxHQUFBd1osWUFBQXBrQixNQUFBbWUsS0FBQWxjLEtBQ0EySSxHQUFBdzVCLGFBQUFwa0MsTUFBQTBDLE9BQUF5YixJQUFBLElBR0F2VCxHQUFBczZCLHFCQUFBLFNBQUFsaUMsS0FDQSxHQUFBLEdBQUFBLElBRUE0SCxHQUFBcVosVUFBQSxFQUNBclosR0FBQXc1QixhQUFBbnNDLFFBQUFxSixLQUFBc0osR0FBQXdaLGFBQ0F4WixHQUFBODJCLGFBQUE5MkIsR0FBQXc1QixhQUFBcnpCLEtBQ0FuRyxHQUFBMmpCLGdCQUFBM2pCLEdBQUF3NUIsYUFBQWxoQixZQUFBRyxXQUFBeEIsYUFDQWpYLEdBQUF3NUIsYUFBQTlWLFNBQUExakIsR0FBQXc1QixhQUFBbGhCLFlBQUFHLFdBQUF4QixhQUNBalgsR0FBQWpNLG1CQUFBaU0sR0FBQTJqQixnQkFBQTNqQixHQUFBdzVCLGFBQUE5VixVQUNBcnhCLFFBQUFDLElBQUEwTixHQUFBdzVCLGNBQ0FybUIsRUFBQSw4QkFBQTJFLE1BQUEsYUFFQSxHQUFBLEdBQUExZixJQUFBLENBRUE0SCxHQUFBcVosVUFBQSxFQUNBLElBQUFraEIsbUJBQUEsQ0FDQTFsQyxLQUFBbUwsR0FBQXc1QixhQUFBM2tDLEtBQ0FzUixLQUFBbkcsR0FBQTgyQixhQUNBeGQsYUFBQXRaLEdBQUFzWixhQUNBaEIsWUFBQSxDQUNBRCxhQUFBLENBQ0E1YSxNQUFBdUMsR0FBQXc1QixhQUFBbGhCLFlBQUFELGFBQUE1YSxNQUNBd1osYUFBQWpYLEdBQUF3NUIsYUFBQTlWLFVBRUFqTCxXQUFBLENBQ0FoYixNQUFBdUMsR0FBQXc1QixhQUFBbGhCLFlBQUFHLFdBQUFoYixNQUNBd1osYUFBQWpYLEdBQUF3NUIsYUFBQTlWLFdBR0E5cUIsS0FBQW9ILEdBQUE0YSxZQUVBcmtCLFdBQ0FqRCxtQkFBQTBNLEdBQUErSSxXQUFBd3hCLG9CQUNBbm1DLEtBQUEsU0FBQUMsTUFDQTVFLGFBQUE4SCxRQUFBbEQsS0FBQXJELEtBQUF3RyxTQUNBMmIsRUFBQSw4QkFBQTJFLE1BQUEsUUFDQWpGLE9BQUE0bUIsZUFDQXo1QixHQUFBc2EsVUFBQSxLQUVBL2xCLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsT0FLQXVJLEdBQUFvYSxZQUFBLFNBQUFobEIsTUFBQXdVLE9BQ0EsSUFBQXlRLFFBQUF6USxNQUFBOEgsT0FBQXRjLE1BQ0E0SyxHQUFBc2EsVUFBQTVvQixPQUFBQyxLQUFBMG9CLFNBQUFsakIsSUFBQSxTQUFBQyxHQUFBLE9BQUFpakIsUUFBQWpqQixHQUFBdkMsUUF1QkFnZSxPQUFBMm5CLFlBQUEsQ0FDQSxDQUFBQyxTQUFBLFVBQ0EsQ0FBQUEsU0FBQSxRQUNBLENBQUFBLFNBQUEsaUJBQ0EsQ0FBQUEsU0FBQSxnQkFFQTVuQixPQUFBNm5CLFVBQUEsQ0FDQSxDQUFBQyxLQUFBLElBQUFDLEtBQUEsZUFBQUMsT0FBQSxVQUFBQyxPQUFBLFdBQ0EsQ0FBQUgsS0FBQSxJQUFBQyxLQUFBLGVBQUFDLE9BQUEsVUFBQUMsT0FBQSxXQUNBLENBQUFILEtBQUEsSUFBQUMsS0FBQSxlQUFBQyxPQUFBLFVBQUFDLE9BQUEsV0FDQSxDQUFBSCxLQUFBLElBQUFDLEtBQUEsZUFBQUMsT0FBQSxVQUFBQyxPQUFBLFdBQ0EsQ0FBQUgsS0FBQSxJQUFBQyxLQUFBLGVBQUFDLE9BQUEsVUFBQUMsT0FBQSxXQUNBLENBQUFILEtBQUEsSUFBQUMsS0FBQSxlQUFBQyxPQUFBLFVBQUFDLE9BQUEsV0FDQSxDQUFBSCxLQUFBLElBQUFDLEtBQUEsZUFBQUMsT0FBQSxVQUFBQyxPQUFBLFdBQ0EsQ0FBQUgsS0FBQSxJQUFBQyxLQUFBLGVBQUFDLE9BQUEsVUFBQUMsT0FBQSxXQUNBLENBQUFILEtBQUEsSUFBQUMsS0FBQSxlQUFBQyxPQUFBLFVBQUFDLE9BQUEsV0FDQSxDQUFBSCxLQUFBLEtBQUFDLEtBQUEsZUFBQUMsT0FBQSxVQUFBQyxPQUFBLFdBQ0EsQ0FBQUgsS0FBQSxLQUFBQyxLQUFBLGVBQUFDLE9BQUEsVUFBQUMsT0FBQSxXQUNBLENBQUFILEtBQUEsS0FBQUMsS0FBQSxlQUFBQyxPQUFBLFVBQUFDLE9BQUEsY0FoTkEsR0NBQSxXQUNBenRDLFFBQUFDLE9BQUEsT0FBQTJCLFdBQUEsa0JBRUEsU0FDQTRqQixPQUNBQyxTQUNBQyxZQUNBM2pCLE9BQ0FtSCxXQUNBOUcsYUFDQUYsUUFDQUMsUUFJQXFqQixPQUFBa29CLFVBQUEsQ0FDQSxDQUFBeG5CLElBQUEsZ0NBQUFxUCxTQUFBLEtBQUF4akIsTUFBQSxpRkFBQXlqQixLQUFBLFlBQUFtWSxVQUFBLGFBQ0EsQ0FBQXpuQixJQUFBLGdDQUFBcVAsU0FBQSxLQUFBeGpCLE1BQUEsaUZBQUF5akIsS0FBQSxXQUFBbVksVUFBQSxnQkFDQSxDQUFBem5CLElBQUEsZ0NBQUFxUCxTQUFBLEtBQUF4akIsTUFBQSxpRkFBQXlqQixLQUFBLFlBQUFtWSxVQUFBLGVBQ0EsQ0FBQXpuQixJQUFBLGdDQUFBcVAsU0FBQSxLQUFBeGpCLE1BQUEsaUZBQUF5akIsS0FBQSxhQUFBbVksVUFBQSxjQUNBLENBQUF6bkIsSUFBQSxnQ0FBQXFQLFNBQUEsS0FBQXhqQixNQUFBLGlGQUFBeWpCLEtBQUEsYUFBQW1ZLFVBQUEsY0FDQSxDQUFBem5CLElBQUEsZ0NBQUFxUCxTQUFBLEtBQUF4akIsTUFBQSxpRkFBQXlqQixLQUFBLGFBQUFtWSxVQUFBLGVBSUEsSUFDQXhxQyxPQUFBakIsUUFBQWlCLE9BQUFDLFVBQUFsQixRQUFBa0IsVUFDQSxJQUFBc2lCLFlBQUFoZCxZQUVBLFlBREF2RixTQUhBTSxLQU1BTixPQUFBLFdBQ0FBLFVBUEFNLEtBVUE4TCxTQUFBbk0sVUFBQVAsUUFuQ0EsR0NBQSxXQUNBN0MsUUFBQUMsT0FBQSxPQUFBMkIsV0FBQSxjQUVBLFNBQ0E0akIsT0FDQUMsU0FDQXpqQixVQUNBMGpCLFlBQ0EzakIsT0FDQW1ILFdBQ0E5RyxhQUNBRixTQUdBLElBQ0FpQixPQUFBakIsUUFBQWlCLE9BQUFDLFVBQUFsQixRQUFBa0IsVUFDQSxJQUFBc2lCLFlBQUFoZCxZQUVBLFlBREF2RixTQUhBTSxLQVFBOEwsU0FBQW5NLFVBQUFQLE1BUkFZLEtBU0FOLE9BQUEsV0FBQUEsVUFHQW5CLFVBQUE2akIsT0FHQUMsRUFBQSxnQkFBQUMsSUFBQSxVQUFBLG9CQUVBRCxFQUFBLGdCQUFBRSxjQS9CQSxHQ0FBLFdBQ0FobUIsUUFBQUMsT0FBQSxPQUFBMkIsV0FBQSxlQUVBLFNBQ0E0akIsT0FDQUMsU0FDQTFqQixPQUNBMmpCLFlBQ0F4YyxXQUNBaEgsUUFDQUQsb0JBQ0FHLGFBQ0F1akIsT0FHQSxJQUFBaFQsR0FBQWxQLEtBQ0FMLFdBQUFsQixRQUFBZ0IsU0FBQWhCLFFBQUFpQixPQUFBakIsUUFBQWtCLFdBR0EsR0FGQXVQLEdBQUFpVCxVQUFBLEVBRUFGLFlBQUFoZCxZQUdBLE9BRkEzRyxPQUFBc04sR0FBQSxrQkFDQXNELEdBQUFpVCxVQUFBLEdBTUFqVCxHQUFBa2IsS0FBQSxDQUNBbnNCLElBQ0Esc0ZBQ0Fxc0IsT0FBQSxDQUNBLENBQ0E4QixZQUFBLFdBQ0FDLFFBQUEsQ0FDQSxDQUNBQyxNQUFBLGFBSUEsQ0FDQUYsWUFBQSxjQUNBQyxRQUFBLENBQ0EsQ0FDQUUsV0FBQSxTQUlBLENBQ0FILFlBQUEsbUJBQ0FDLFFBQUEsQ0FDQSxDQUNBQyxNQUFBLGFBSUEsQ0FDQUYsWUFBQSxxQkFDQUMsUUFBQSxDQUNBLENBQ0FDLE1BQUEsYUFJQSxDQUNBRSxZQUFBLGlCQUNBSixZQUFBLFdBQ0FDLFFBQUEsQ0FDQSxDQUNBQyxNQUFBLGFBSUEsQ0FDQUUsWUFBQSx5QkFDQUosWUFBQSxtQkFDQUMsUUFBQSxDQUNBLENBQ0FDLE1BQUEsYUFJQSxDQUNBRSxZQUFBLDZCQUNBSCxRQUFBLENBQ0EsQ0FDQUUsV0FBQSxTQUlBLENBQ0FDLFlBQUEsMEJBQ0FKLFlBQUEsbUJBQ0FDLFFBQUEsQ0FDQSxDQUNBQyxNQUFBLGFBSUEsQ0FDQUUsWUFBQSxNQUNBSixZQUFBLG1CQUNBQyxRQUFBLENBQ0EsQ0FDQUMsTUFBQSxhQUlBLENBQ0FFLFlBQUEsV0FDQUosWUFBQSxXQUNBQyxRQUFBLENBQ0EsQ0FDQUMsTUFBQSxhQUlBLENBQ0FFLFlBQUEsV0FDQUosWUFBQSxtQkFDQUMsUUFBQSxDQUNBLENBQ0FDLE1BQUEsYUFJQSxDQUNBRSxZQUFBLFdBQ0FKLFlBQUEscUJBQ0FDLFFBQUEsQ0FDQSxDQUNBQyxNQUFBLGFBSUEsQ0FDQUUsWUFBQSxPQUNBSixZQUFBLGdCQUNBQyxRQUFBLENBQ0EsQ0FDQUMsTUFBQSxhQUlBLENBQ0FFLFlBQUEsT0FDQUosWUFBQSxtQkFDQUMsUUFBQSxDQUNBLENBQ0FDLE1BQUEsYUFJQSxDQUNBRSxZQUFBLGdCQUNBSixZQUFBLFdBQ0FDLFFBQUEsQ0FDQSxDQUNBQyxNQUFBLGFBSUEsQ0FDQUUsWUFBQSxlQUNBSixZQUFBLFdBQ0FDLFFBQUEsQ0FDQSxDQUNBQyxNQUFBLGFBSUEsQ0FDQUUsWUFBQSxpQ0FDQUosWUFBQSxXQUNBQyxRQUFBLENBQ0EsQ0FDQUMsTUFBQSxhQUlBLENBQ0FFLFlBQUEsYUFDQUosWUFBQSxtQkFDQUMsUUFBQSxDQUNBLENBQ0FDLE1BQUEsYUFJQSxDQUNBRSxZQUFBLFVBQ0FKLFlBQUEsbUJBQ0FDLFFBQUEsQ0FDQSxDQUNBQyxNQUFBLGFBSUEsQ0FDQUUsWUFBQSxRQUNBSixZQUFBLFdBQ0FDLFFBQUEsQ0FDQSxDQUNBQyxNQUFBLGFBSUEsQ0FDQUUsWUFBQSxRQUNBSixZQUFBLG1CQUNBQyxRQUFBLENBQ0EsQ0FDQUMsTUFBQSxjQUtBakMsUUFBQSxDQUFBLENBQUEsUUFBQSxTQUFBLENBQUEsUUFBQSxXQUdBbkksTUFBQTBKLFNBQUF0b0IsS0FBQSxTQUFBK0MsS0FDQUEsSUFBQW5KLFdBQUEsQ0FDQW90QixPQUFBcGIsR0FBQWtiLEtBQUFFLE9BQ0F1QixrQkFBQSxFQUNBckIsS0FBQSxFQUNBRCxPQUFBLENBQ0FXLElBQUEsUUFDQUMsSUFBQSxhQW9CQWpjLEdBQUFpN0IsY0FBQSxXQUNBOW5CLEVBQUEsaUNBQUEyRSxNQUFBLFFBQ0EzRSxFQUFBLGtCQUFBMkUsTUFBQSxTQUVBOVgsR0FBQWs3QixXQUFBLFdBQ0EvbkIsRUFBQSxvQ0FBQTJFLE1BQUEsUUFDQTNFLEVBQUEsZUFBQTJFLE1BQUEsU0FFQTlYLEdBQUFtN0IsZ0JBQUEsV0FDQWhvQixFQUFBLGVBQUEyRSxNQUFBLFFBQ0EzRSxFQUFBLG9CQUFBMkUsTUFBQSxTQUdBOVgsR0FBQXJQLE1BQUEsU0FBQXlxQyxRQUFBL2UsVUFDQWhxQixRQUFBQyxJQUFBK3BCLFVBQ0E5bEIsV0FDQTVGLE1BQUEwckIsVUFDQWpvQixLQUFBLFNBQUFDLE1BQ0E4ZSxFQUFBLGVBQUEyRSxNQUFBLFFBQ0EzRSxFQUFBLFFBQUFPLFlBQUEsY0FDQVAsRUFBQSxtQkFBQW9PLE9BQ0FqeUIsb0JBQUFiLElBQUEsZUFBQTRGLEtBQUFyRCxLQUFBbEIsT0FDQVcsVUFBQWhDLElBQUE0RixLQUFBckQsS0FBQXFxQyxNQUNBanNDLE9BQUFzTixHQUFBLGFBQ0FqTixhQUFBOEgsUUFBQSxtQkFFQWhELE1BQUEsU0FBQUMsS0FDQS9FLGFBQUFrTixNQUFBbkksSUFBQXhELEtBQUF3RyxZQUlBd0ksR0FBQXM3QixXQUFBLFNBQUFGLFFBQUEvZSxVQUNBLEdBQUFyc0IsTUFBQXFzQixTQUNBNXNCLGFBQUFrTixNQUFBLDRCQUNBLENBQ0EsSUFBQTNMLEtBQUFxckIsU0FDQTlsQixXQUNBdEYsZUFBQUQsTUFDQW9ELEtBQUEsU0FBQUMsTUFDQThlLEVBQUEsb0JBQUEyRSxNQUFBLFFBQ0Fyb0IsYUFBQThILFFBQUFsRCxLQUFBckQsS0FBQXdHLFdBR0FqRCxNQUFBLFNBQUFDLEtBQ0EvRSxhQUFBa04sTUFBQW5JLElBQUF4RCxLQUFBd0csYUFLQXdJLEdBQUF5SixTQUFBLFNBQUEyeEIsUUFBQS9lLFVBQ0E5bEIsV0FDQXJGLGFBQUFtckIsVUFDQWpvQixLQUFBLFNBQUFDLE1BQ0E4ZSxFQUFBLGtCQUFBMkUsTUFBQSxRQUNBcm9CLGFBQUE4SCxRQUFBbEQsS0FBQXJELEtBQUF3RyxXQUVBakQsTUFBQSxTQUFBQyxLQUNBMmUsRUFBQSxrQkFBQTJFLE1BQUEsUUFDQXJvQixhQUFBa04sTUFBQW5JLElBQUF4RCxLQUFBd0csWUFJQXdJLEdBQUE3TyxVQUFBLFNBQUEraUIsT0FDQSxnREFDQTFiLEtBQUEwYixPQUlBM2QsV0FDQXBGLFVBQUEsQ0FBQStpQixNQUFBQSxRQUNBOWYsS0FBQSxTQUFBQyxNQUNBMkwsR0FBQXU3QixlQUFBLEdBQ0E5ckMsYUFBQThILFFBQUFsRCxLQUFBckQsS0FBQXdHLFdBRUFqRCxNQUFBLFNBQUFDLEtBQ0EvRSxhQUFBa04sTUFBQW5JLElBQUF4RCxLQUFBd0csV0FWQS9ILGFBQUFrTixNQUFBLG9CQXZUQSxHQ0FBLFdBQ0F0UCxRQUFBQyxPQUFBLE9BQUEyQixXQUFBLGNBRUEsU0FDQTRqQixPQUNBQyxTQUNBQyxZQUNBM2pCLE9BQ0FtSCxXQUNBOUcsYUFDQUYsUUFDQXlqQixPQUlBLElBRUF4aUIsT0FBQWpCLFFBQUFpQixPQUFBQyxVQUFBbEIsUUFBQWtCLFVBRUEsSUFBQXNpQixZQUFBaGQsWUFFQSxZQURBdkYsU0FMQU0sS0FXQThMLFNBQUFuTSxVQUFBUCxNQUVBcUcsV0FDQWhGLGtCQUNBNkMsS0FBQSxTQUFBQyxNQUNBaEMsUUFBQUMsSUFBQStCLEtBQUFyRCxRQUVBdUQsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixLQW5CQTNHLEtBc0JBTixPQUFBLFdBQ0FBLFlBdENBLEdDQUEsV0FDQW5ELFFBQUFDLE9BQUEsT0FBQTJCLFdBQUEsbUJBRUEsU0FDQTRqQixPQUNBQyxTQUNBQyxZQUNBM2pCLE9BQ0FtSCxXQUNBOUcsYUFDQXVqQixNQUNBempCLFFBQ0FELHFCQUVBLElBQUEwUSxHQUFBbFAsS0FDQStoQixPQUFBMm9CLE9BQUEsc0NBQ0Ezb0IsT0FBQTRvQixPQUFBLHVDQUhBLElBSUFqckMsT0FBQWpCLFFBQUFpQixPQUNBcWlCLE9BQUE2b0IsVUFBQSxHQUNBN29CLE9BQUE4b0IsbUJBQUEsRUFDQTlvQixPQUFBK29CLFlBQUEsR0FDQS9vQixPQUFBZ3BCLFdBQUEsR0FDQWhwQixPQUFBaXBCLE9BQUEsQ0FDQXo4QixTQUFBLE1BR0EwVCxZQUFBaGQsYUFDQXZGLFNBSUF3UCxHQUFBeFAsT0FBQSxXQUNBQSxVQUdBcWlCLE9BQUFrcEIsWUFBQSxXQUNBLElBQUF4b0IsSUFBQSxJQUFBeW9CLE1BQ0F6b0IsSUFBQXlkLElBQUEsc0NBQ0EsSUFBQWlMLEtBQUEsSUFBQUQsTUFDQUMsS0FBQWpMLElBQUEsdUNBQ0EsSUFBQXgyQixJQUFBLElBQUEwaEMsTUFBQSxLQUVBMWhDLElBQUEyaEMsU0FBQTVvQixJQUFBLE1BQUEsR0FBQSxHQUFBLEdBQUEsSUFDQS9ZLElBQUEyaEMsU0FBQUYsS0FBQSxNQUFBLElBQUEsR0FBQSxHQUFBLElBRUF6aEMsSUFBQTRoQyxVQUFBLENBQ0FDLEtBQUEsZUFFQUMsT0FBQSxDQUFBaGMsSUFBQSxLQUNBaWMsVUFBQSxPQUNBQyxXQUFBLE9BQ0FDLFdBQUEsY0FJQWppQyxJQUFBa2lDLFlBQUEsSUFDQWxpQyxJQUFBbUQsS0FBQSxHQUFBLElBQUEsWUFDQW5ELElBQUFraUMsWUFBQSxJQUNBbGlDLElBQUFtaUMsUUFBQSxhQUVBbmlDLElBQUFtRCxLQUFBLEdBQUEsSUFBQSxrRkFDQW5ELElBQUFtRCxLQUFBLEdBQUEsSUFBQSwyR0FFQW5ELElBQUFtRCxLQUFBLEdBQUEsSUFBQSxxREFTQW5ELElBQUFvaUMsS0FBQSxnQkFrQkEsSUFBQXhnQyxTQUFBLEVBQ0E4aEIsVUFBQSxFQUNBbGUsR0FBQTY4QixZQUFBLEdBQ0E3OEIsR0FBQW9lLGdCQUFBLEVBQ0FwZSxHQUFBcWUsV0FBQSxDQUNBQyxNQUFBLFVBQ0Fyb0IsTUFBQSxHQTBCQTRjLE9BQUFpcUIsaUJBQUEsV0FFQTk4QixHQUFBb2UsZ0JBQUEsRUFDQTduQixXQUNBbTRCLGNBQUEsQ0FDQWxhLE9BQUF4VSxHQUFBNjhCLFlBQ0E3c0IsTUFBQWtPLFVBQ0F4akIsS0FBQSxFQUNBNlosS0FBQXZVLEdBQUFxZSxXQUFBQyxNQUNBN0osU0FBQXpVLEdBQUFxZSxXQUFBcG9CLE9BRUE3QixLQUFBLFNBQUFDLE1BRUEyTCxHQUFBKzhCLGdCQUFBLEdBQ0FscUIsT0FBQWdwQixXQUFBOWtDLE9BQUEsR0FFQThiLE9BQUFncEIsV0FBQTlpQyxRQUFBLFNBQUEyZCxTQUNBcmlCLEtBQUFyRCxLQUFBMmpCLEtBQUE1YixRQUFBLFNBQUFpa0MsUUFBQXR5QixPQUNBZ00sUUFBQXJmLEtBQUEybEMsUUFBQTNsQyxJQUVBaEQsS0FBQXJELEtBQUEyakIsS0FBQTdjLE9BQUE0UyxNQUFBLEdBRUFyWSxRQUFBQyxJQUFBLGFBUUF3Z0IsU0FBQSxXQUVBOVMsR0FBQSs4QixnQkFBQTFvQyxLQUFBckQsS0FBQTJqQixLQUNBeEIsRUFBQSxvQkFBQTJFLE1BQUEsUUFDQTNFLEVBQUEscUJBQUEyRSxNQUFBLFFBQ0FqRixPQUFBb3FCLFVBQUEsTUFHQTFvQyxNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLE1BR0EwYixFQUFBLHFCQUFBclAsR0FBQSxnQkFBQSxXQUNBOUQsR0FBQW9lLGdCQUFBLElBR0FwZSxHQUFBazlCLGlCQUFBLFdBQ0EvcEIsRUFBQSxxQkFBQTJFLE1BQUEsUUFDQTlYLEdBQUE2OEIsWUFBQSxJQUdBaHFCLE9BQUFnTixRQUFBLFdBQ0F4dEIsUUFBQUMsSUFBQSxvQkFDQThKLFVBQ0FBLFNBQUEsRUFDQTBXLFNBQUEsV0FDQTFXLFNBQUEsR0FDQSxLQUNBOGhCLFdBQUEsRUFDQTNuQixXQUNBbTRCLGNBQUEsQ0FDQWxhLE9BQUF4VSxHQUFBNjhCLFlBQ0E3c0IsTUFBQWtPLFVBQ0F4akIsS0FBQSxFQUNBNlosS0FBQXZVLEdBQUFxZSxXQUFBQyxNQUNBN0osU0FBQXpVLEdBQUFxZSxXQUFBcG9CLE9BRUE3QixLQUFBLFNBQUFDLE1BR0EyTCxHQUFBKzhCLGdCQUFBLEdBQ0FscUIsT0FBQWdwQixXQUFBOWtDLE9BQUEsR0FFQThiLE9BQUFncEIsV0FBQTlpQyxRQUFBLFNBQUEyZCxTQUVBcmlCLEtBQUFyRCxLQUFBMmpCLEtBQUE1YixRQUFBLFNBQUFpa0MsUUFBQXR5QixPQUNBZ00sUUFBQXJmLEtBQUEybEMsUUFBQTNsQyxLQUNBaEQsS0FBQXJELEtBQUEyakIsS0FBQTdjLE9BQUE0UyxNQUFBLE9BU0FvSSxTQUFBLFdBRUE5UyxHQUFBKzhCLGdCQUFBMW9DLEtBQUFyRCxLQUFBMmpCLFNBSUFwZ0IsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixPQU1BdUksR0FBQXN3QixhQUFBLFNBQUEzeUIsTUFDQXRMLFFBQUFDLElBQUEsWUFBQXFMLE1BQ0FwSCxXQUNBbTRCLGNBQUEsQ0FDQWxhLE9BQUF4VSxHQUFBNjhCLFlBQ0E3c0IsTUFBQWtPLFVBQ0F4akIsS0FBQSxFQUNBNlosS0FBQXZVLEdBQUFxZSxXQUFBQyxNQUNBN0osU0FBQXpVLEdBQUFxZSxXQUFBcG9CLE9BRUE3QixLQUFBLFNBQUFDLE1BQ0EyTCxHQUFBKzhCLGdCQUFBMW9DLEtBQUFyRCxLQUFBMmpCLE9BRUFwZ0IsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixNQU1Bb2IsT0FBQXNxQixXQUFBLEdBQ0F0cUIsT0FBQXVxQixVQUFBLFNBQUFoK0IsTUFBQTNCLE9BQ0F6TixNQUFBb1AsT0FBQXBQLE1BQUF5TixRQUNBb1YsT0FBQXNxQixXQUFBdGxDLEtBQUEsQ0FBQTQ3QixNQUFBcjBCLE1BQUFpK0IsTUFBQTUvQixRQUNBMFYsRUFBQSxnQkFBQS9hLElBQUEsSUFDQSthLEVBQUEsZ0JBQUEvYSxJQUFBLE1BTUE0SCxHQUFBczlCLGFBQUEsU0FBQTlKLE1BQUE5b0IsTUFBQXRLLE9BRUFvekIsT0FJQXB6QixNQUFBdEksT0FBQTRTLE1BQUEsR0FDQW1JLE9BQUFncEIsV0FBQWhrQyxLQUFBMjdCLE9BQ0FyZ0IsRUFBQSxxQkFBQTJFLE1BQUEsUUFDQTNFLEVBQUEsb0JBQUEyRSxNQUFBLFNBR0Fyb0IsYUFBQWtOLE1BQUEsaUJBS0FxRCxHQUFBdTlCLHFCQUFBLFdBQ0FwcUIsRUFBQSxxQkFBQTJFLE1BQUEsUUFDQTNFLEVBQUEsb0JBQUEyRSxNQUFBLFNBR0FqRixPQUFBMnFCLGVBQUEsV0FDQXJxQixFQUFBLG9CQUFBMkUsTUFBQSxRQUNBakYsT0FBQThvQixtQkFBQSxHQTRCQTlvQixPQUFBNHFCLGVBQUEsV0FDQXRxQixFQUFBLG1CQUFBMkUsTUFBQSxTQUVBakYsT0FBQTZxQixhQUFBLFdBQ0F2cUIsRUFBQSxpQkFBQTJFLE1BQUEsU0FFQWpGLE9BQUE4cUIsaUJBQUEsV0FDQXhxQixFQUFBLHFCQUFBMkUsTUFBQSxTQUVBakYsT0FBQStxQixrQkFBQSxXQUNBenFCLEVBQUEsc0JBQUEyRSxNQUFBLFNBR0FqRixPQUFBZ3JCLG9CQUFBLFdBQ0ExcUIsRUFBQSxvQkFBQTJFLE1BQUEsU0FJQWpGLE9BQUFpckIsYUFBQSxTQUFBaG9DLFFBQ0F6RCxRQUFBQyxJQUFBd0QsUUFDQStjLE9BQUErb0IsWUFBQXg4QixNQUFBdEosT0FBQXNKLE1BQ0F5VCxPQUFBK29CLFlBQUF0OEIsWUFBQXhKLE9BQUF3SixZQUNBdVQsT0FBQStvQixZQUFBbUMsWUFBQWpvQyxPQUFBaW9DLFlBQ0FsckIsT0FBQStvQixZQUFBMW5CLE1BQUFwZSxPQUFBb2UsTUFDQXJCLE9BQUErb0IsWUFBQW9DLFFBQUFsb0MsT0FBQWtvQyxRQUNBbnJCLE9BQUErb0IsWUFBQXFDLE1BQUFub0MsT0FBQW1vQyxNQUNBcHJCLE9BQUErb0IsWUFBQXJkLFlBQUF6b0IsT0FBQXlvQixZQUNBMUwsT0FBQStvQixZQUFBc0MsU0FBQXBvQyxPQUFBb29DLFNBQ0FyckIsT0FBQStvQixZQUFBdUMsV0FBQXJvQyxPQUFBcW9DLFdBQ0F0ckIsT0FBQWdwQixXQUFBOWtDLE9BQUEsSUFDQThiLE9BQUErb0IsWUFBQUMsV0FBQWhwQixPQUFBZ3BCLFlBRUFocEIsT0FBQXNxQixXQUFBcG1DLE9BQUEsSUFDQThiLE9BQUErb0IsWUFBQXVCLFdBQUF0cUIsT0FBQXNxQixZQUVBdHFCLE9BQUErb0IsWUFBQXdDLFdBQUF0b0MsT0FBQXNvQyxXQUNBdnJCLE9BQUErb0IsWUFBQXlDLFdBQUF2b0MsT0FBQXVvQyxXQUVBbHJCLEVBQUEsbUJBQUEyRSxNQUFBLFFBQ0EzRSxFQUFBLGlCQUFBMkUsTUFBQSxRQUNBM0UsRUFBQSxxQkFBQTJFLE1BQUEsUUFDQTNFLEVBQUEsc0JBQUEyRSxNQUFBLFFBQ0EzRSxFQUFBLHFCQUFBMkUsTUFBQSxTQUdBakYsT0FBQW9xQixVQUFBLEVBQ0FwcUIsT0FBQXlyQixjQUFBLFdBQ0F6ckIsT0FBQW9xQixVQUFBLEdBR0FwcUIsT0FBQTByQixvQkFBQSxTQUFBN3pCLE1BQUF0SyxPQUNBQSxNQUFBdEksT0FBQTRTLE1BQUEsR0FDQXJZLFFBQUFDLElBQUF1Z0IsT0FBQWdwQixlQXBXQSxHQ0FBLFdBQ0F4dUMsUUFBQUMsT0FBQSxPQUFBMkIsV0FBQSxjQUVBLFNBQ0E0akIsT0FDQUMsU0FDQUMsWUFDQTNqQixPQUNBbUgsV0FDQTlHLGFBQ0F1akIsTUFDQXpqQixRQUNBRCxxQkFFQSxJQUFBMFEsR0FBQWxQLEtBRUFOLE9BQUFqQixRQUFBaUIsT0FBQWpCLFFBQUFrQixVQUVBc2lCLFlBQUFoZCxhQUNBdkYsU0FFQXFpQixPQUFBMnJCLFlBQUFsdkMsb0JBQUFZLElBQUEsWUFFQTJpQixPQUFBNHJCLGVBQUEsQ0FBQSxjQUFBLGVBQUEsWUFDQWxvQyxXQUFBakYsZUFBQThDLEtBQUEsU0FBQUMsTUFDQTJMLEdBQUEwK0IsY0FBQXJxQyxLQUFBckQsS0FBQTJqQixPQUVBcGUsV0FDQWhGLGtCQUNBNkMsS0FBQSxTQUFBQyxNQUNBMkwsR0FBQXVkLFlBQUFscEIsS0FBQXJELE9BSUF1RCxNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLEtBRUF1SSxHQUFBeFAsT0FBQSxXQUNBQSxZQXRDQSxHQ0FBLFdBQ0FuRCxRQUFBQyxPQUFBLE9BQUEyQixXQUFBLHFCQUVBLFNBQ0E0akIsT0FDQUMsU0FDQXpqQixVQUNBMGpCLFlBQ0EzakIsT0FDQW1ILFdBQ0E5RyxhQUNBRixTQUdBLElBQ0FpQixPQUFBakIsUUFBQWlCLE9BQUFDLFVBQUFsQixRQUFBa0IsVUFDQSxJQUFBc2lCLFlBQUFoZCxZQUVBLFlBREF2RixTQUhBTSxLQVFBOEwsU0FBQW5NLFVBQUFQLE1BUkFZLEtBU0FOLE9BQUEsV0FBQUEsVUFLQSxZQUZBbkIsVUFBQTZqQixRQUdBQyxFQUFBLGdCQUFBQyxJQUFBLFVBQUEsb0JBSUFELEVBQUEsZ0JBQUFFLGNBakNBLEdDQUEsV0FDQWhtQixRQUFBQyxPQUFBLE9BQUEyQixXQUFBLGtCQUVBLFNBQ0E0akIsT0FDQUMsU0FDQXpqQixVQUNBMGpCLFlBQ0EzakIsT0FDQW1ILFdBQ0E5RyxhQUNBRixTQUdBLElBQUF5USxHQUFBbFAsS0FFQWhCLE1BQUFULFVBQUFtbEIsU0FBQTFrQixNQUVBLElBQUFBLE1BQ0EsT0FHQXlHLFdBQ0Fvb0MsYUFBQSxDQUFBN3VDLE1BQUFBLFFBQ0FzRSxLQUFBLFNBQUFDLE1BQ0FoQyxRQUFBQyxJQUFBK0IsS0FBQXJELE1BQ0FxRCxLQUFBckQsS0FBQTR0QyxZQUNBNStCLEdBQUFxN0IsS0FBQWhuQyxLQUFBckQsS0FBQXFxQyxLQUNBbG9CLEVBQUEsb0JBQUEyRSxNQUFBLFNBRUEzRSxFQUFBLGlCQUFBMkUsTUFBQSxVQUdBdmpCLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsS0FHQXVJLEdBQUE2K0IsVUFBQSxTQUFBekQsUUFBQXBxQyxNQUVBLEdBREFtaUIsRUFBQSxvQkFBQTJFLE1BQUEsUUFDQTlYLEdBQUE2K0IsVUFBQUMsV0FBQTkrQixHQUFBNitCLFVBQUFFLFdBQUEsQ0FDQSxJQUFBL3RDLEtBQUEsQ0FDQTh0QyxTQUFBOStCLEdBQUE2K0IsVUFBQUMsU0FDQXpELEtBQUFyN0IsR0FBQXE3QixNQUVBaHBDLFFBQUFDLElBQUF0QixNQUNBdUYsV0FDQXlvQyxZQUFBaHVDLE1BQ0FvRCxLQUFBLFNBQUFDLE1BQ0E1RSxhQUFBOEgsUUFBQWxELEtBQUFyRCxLQUFBd0csU0FDQXBJLE9BQUFzTixHQUFBLGNBRUFuSSxNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLFVBR0FoSSxhQUFBa04sTUFBQSxrREFHQXFELEdBQUFpL0IsS0FBQSxXQUNBOXJCLEVBQUEsaUJBQUEyRSxNQUFBLFFBQ0FoRixTQUFBLFdBQ0ExakIsT0FBQXNOLEdBQUEsaUJBN0RBLEdDQUEsV0FDQXJQLFFBQUFDLE9BQUEsT0FBQTJCLFdBQUEsY0FFQSxTQUNBNGpCLE9BQ0FDLFNBQ0FDLFlBQ0EzakIsT0FDQW1ILFdBQ0E5RyxhQUNBRixRQUNBQyxRQUlBLElBQUF3USxHQUFBbFAsS0FDQU4sT0FBQWpCLFFBQUFpQixPQUFBQyxVQUFBbEIsUUFBQWtCLFVBQUFzTSxhQUFBeE4sUUFBQXdOLGFBQ0EsSUFBQWdXLFlBQUFoZCxZQUVBLFlBREF2RixTQUlBd1AsR0FBQXBELFNBQUFuTSxVQUFBUCxNQUNBNk0sYUFBQTdNLE9BQ0E4UCxHQUFBaEQsWUFBQUQsYUFBQTdNLE1BQ0E4UCxHQUFBMUosV0FBQTBKLEdBQUFoRCxZQUFBMUcsWUFFQUMsV0FDQW5GLGVBQUE0TyxHQUFBcEQsU0FBQXZMLFdBQ0ErQyxLQUFBLFNBQUFDLE1BQ0EyTCxHQUFBaEQsWUFBQTNJLEtBQUFyRCxLQUNBZ1AsR0FBQTFKLFdBQUEwSixHQUFBaEQsWUFBQTFHLGFBRUEvQixNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLEtBSUF1SSxHQUFBay9CLG1CQUFBLFNBQUE3aUIsVUFDQTlsQixXQUNBNG9DLHNCQUFBOWlCLFVBQ0Fqb0IsS0FBQSxTQUFBQyxNQUNBNUUsYUFBQThILFFBQUFsRCxLQUFBckQsS0FBQXdHLFNBQ0F1RixhQUFBRSxRQUFBK0MsR0FBQXBELFNBQUF2TCxhQUVBa0QsTUFBQSxTQUFBa0QsR0FDQWhJLGFBQUFrTixNQUFBLHdCQUNBdEssUUFBQUMsSUFBQW1GLE1BSUF1SSxHQUFBby9CLGNBQUEsV0FDQWh3QyxPQUFBc04sR0FBQSxjQUdBc0QsR0FBQXhQLE9BQUEsV0FDQUEsWUF4REEsR0NBQSxXQUNBbkQsUUFBQUMsT0FBQSxPQUFBMkIsV0FBQSxvQkFFQSxTQUNBNGpCLE9BQ0FDLFNBQ0FDLFlBQ0EzakIsT0FDQW1ILFdBQ0E5RyxhQUNBdWpCLE1BQ0F6akIsUUFDQUQscUJBRUEsSUFBQTBRLEdBQUFsUCxLQUVBa1AsR0FBQXEvQixrQkFBQSxHQUNBci9CLEdBQUFzL0IsU0FBQSxHQUpBLElBS0E5dUMsT0FBQWpCLFFBQUFpQixPQUFBakIsUUFBQTBPLFNBQUExTyxRQUFBa0IsVUFDQXNpQixZQUFBaGQsYUFDQXZGLFNBSUF3UCxHQUFBdS9CLGtCQUFBLFNBQUF0cEMsTUFHQU0sV0FDQWlwQyxxQkFBQSxDQUNBOWtDLEtBQUEsRUFDQXNWLE1BQUEsR0FDQXVFLEtBQUF0ZSxPQUlBN0IsS0FBQSxTQUFBQyxNQUdBMkwsR0FBQXkvQixpQkFBQXByQyxLQUFBckQsS0FBQTJqQixLQUNBM1UsR0FBQTAvQixvQkFBQXJyQyxLQUFBckQsS0FBQTZqQixNQUNBeGlCLFFBQUFDLElBQUEsaUJBQUEwTixHQUFBeS9CLGtCQUNBM3NCLFNBQUEsV0FFQUssRUFBQSxlQUFBMkIsV0FBQSxDQUNBcmUsTUFBQXVKLEdBQUEwL0Isb0JBQ0EzcUIsWUFBQSxHQUNBQyxTQUFBLGNBQ0FDLGVBQUEsSUFDQUMsVUFBQSxFQUNBckIsWUFBQSxFQUVBc0IsWUFBQSxTQUFBemEsS0FBQWtQLE9BQ0FBLE1BQUF3TCxpQkFDQTdlLFdBQ0FpcEMscUJBQUEsQ0FDQTlrQyxLQUFBQSxLQUNBc1YsTUFBQSxLQUlBNWIsS0FBQSxTQUFBQyxNQUNBMkwsR0FBQXkvQixpQkFBQXByQyxLQUFBckQsS0FBQTJqQixPQUVBcGdCLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsWUFNQWxELE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsTUFJQXVJLEdBQUF1L0Isa0JBQUEsV0FHQXYvQixHQUFBMi9CLHFCQUFBLFdBQ0F4c0IsRUFBQSxTQUFBeXNCLFNBQUEsV0FDQXZ0QyxRQUFBQyxJQUFBLFFBQ0E2Z0IsRUFBQSw4QkFBQU8sWUFBQSxVQUNBUCxFQUFBLGdCQUFBUSxTQUFBLFVBQ0FSLEVBQUEsU0FBQU8sWUFBQSxRQUNBUCxFQUFBLFNBQUFPLFlBQUEsVUFDQVAsRUFBQSxZQUFBUSxTQUFBLFFBQ0FSLEVBQUEsWUFBQVEsU0FBQSxXQUNBUixFQUFBLGdCQUFBeXNCLFNBQUEsWUFDQXZ0QyxRQUFBQyxJQUFBLFdBQ0E2Z0IsRUFBQSw4QkFBQU8sWUFBQSxVQUNBUCxFQUFBLGdCQUFBUSxTQUFBLFVBQ0FSLEVBQUEsWUFBQU8sWUFBQSxRQUNBUCxFQUFBLFlBQUFPLFlBQUEsVUFDQVAsRUFBQSxZQUFBUSxTQUFBLFFBQ0FSLEVBQUEsWUFBQVEsU0FBQSxZQU1BM1QsR0FBQTYvQix5QkFBQSxXQUNBMXNCLEVBQUEsZ0JBQUF5c0IsU0FBQSxXQUNBdnRDLFFBQUFDLElBQUEsUUFDQTZnQixFQUFBLDhCQUFBTyxZQUFBLFVBQ0FQLEVBQUEsU0FBQVEsU0FBQSxVQUNBUixFQUFBLFlBQUFPLFlBQUEsUUFDQVAsRUFBQSxZQUFBTyxZQUFBLFVBQ0FQLEVBQUEsU0FBQVEsU0FBQSxRQUNBUixFQUFBLFNBQUFRLFNBQUEsV0FDQVIsRUFBQSxnQkFBQXlzQixTQUFBLFlBQ0F2dEMsUUFBQUMsSUFBQSxXQUNBNmdCLEVBQUEsOEJBQUFPLFlBQUEsVUFDQVAsRUFBQSxnQkFBQVEsU0FBQSxVQUNBUixFQUFBLFlBQUFPLFlBQUEsUUFDQVAsRUFBQSxZQUFBTyxZQUFBLFVBQ0FQLEVBQUEsWUFBQVEsU0FBQSxRQUNBUixFQUFBLFlBQUFRLFNBQUEsWUFLQWQsT0FBQWl0QixlQUFBLFNBQUFwMUIsTUFBQXRLLE9BQ0FBLE1BQUF0SSxPQUFBNFMsTUFBQSxJQUdBbUksT0FBQWt0QixZQUFBLFNBQUFyMUIsTUFBQXRLLE9BQ0FBLE1BQUF0SSxPQUFBNFMsTUFBQSxJQUtBbUksT0FBQW10QixTQUFBLFNBQUE1cUMsT0FFQXBGLE1BQUFvRixNQUFBLEtBQ0F5ZCxPQUFBb3RCLFFBQUFoUCxJQUFBQyxnQkFBQTk3QixNQUFBLElBQ0F5ZCxPQUFBcXRCLFFBQUE5cUMsTUFBQSxHQUFBUCxLQUFBa1IsTUFBQSxLQUFBaXdCLFFBS0F6bUMsUUFBQXdPLGlCQUFBM0osS0FBQSxTQUFBQyxNQUNBMkwsR0FBQWpDLGVBQUExSixLQUFBckQsS0FFQWdQLEdBQUEwVixnQkFBQSxTQUFBQyxRQUNBLE9BQUEsSUFBQTNoQixRQUFBLFNBQUFDLFFBQUFDLFFBQ0FELFFBQUFJLEtBQUFyRCxXQUtBdUYsV0FBQXBELG1CQUFBaUIsS0FBQSxTQUFBQyxNQUNBMkwsR0FBQW1nQyxhQUFBOXJDLEtBQUFyRCxLQUFBMmpCLE9BSUEzVSxHQUFBc2pCLFlBQUEsU0FBQTNzQixNQUNBcUosR0FBQXEvQixrQkFBQXhuQyxLQUFBbEIsT0FJQXFKLEdBQUFvZ0MsVUFBQSxTQUFBdnJDLE1BQ0FtTCxHQUFBcy9CLFNBQUF6bkMsS0FBQWhELE9BS0FnZSxPQUFBd3RCLG9CQUFBLFNBQUFuckMsZUFDQUEsY0FBQW9yQyxTQUFBLEdBQUFwckMsY0FBQXFyQyxNQUFBLEdBQ0FsdUMsUUFBQUMsSUFBQSxnQkFBQTRDLGVBQ0E4SyxHQUFBcS9CLGtCQUFBdG9DLE9BQUEsR0FDQWlKLEdBQUFxL0Isa0JBQUF0bUMsUUFBQSxTQUFBMmQsU0FDQXhoQixjQUFBb3JDLFNBQUF6b0MsS0FBQTZlLFFBQUFyZixPQUdBMkksR0FBQXMvQixTQUFBdm9DLE9BQUEsR0FDQWlKLEdBQUFzL0IsU0FBQXZtQyxRQUFBLFNBQUEyZCxTQUNBeGhCLGNBQUFxckMsTUFBQTFvQyxLQUFBNmUsV0FHQXJrQixRQUFBQyxJQUFBLGdCQUFBNEMsZUFDQXFCLFdBQ0FpcUMsdUJBQUF0ckMsZUFDQWQsS0FBQSxTQUFBQyxNQUNBNUUsYUFBQThILFFBQUEsOENBQ0F5SSxHQUFBaEwsU0FBQSxHQUNBZ0wsR0FBQXEvQixrQkFBQSxHQUNBci9CLEdBQUF5Z0MsU0FBQSxHQUNBNXRCLE9BQUErSCxXQUFBLEdBQ0ExbEIsY0FBQW9yQyxTQUFBLEdBQ0FwckMsY0FBQXFyQyxNQUFBLEdBRUFwdEIsRUFBQSx5QkFBQTJFLE1BQUEsUUFDQTlYLEdBQUF1L0Isa0JBQUEsYUFFQWhyQyxNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLEdBT0FoSSxhQUFBa04sTUFBQSwyQkFLQWtXLE9BQUE2dEIsVUFBQSxDQUNBLENBQUF0aEMsTUFBQSxrQkFBQXVoQyxLQUFBLDBCQUFBcHRCLElBQUEseUNBQ0EsQ0FBQW5VLE1BQUEsa0JBQUF1aEMsS0FBQSwwQkFBQXB0QixJQUFBLHlDQUNBLENBQUFuVSxNQUFBLGtCQUFBdWhDLEtBQUEsMEJBQUFwdEIsSUFBQSx5Q0FDQSxDQUFBblUsTUFBQSxrQkFBQXVoQyxLQUFBLDBCQUFBcHRCLElBQUEseUNBQ0EsQ0FBQW5VLE1BQUEsa0JBQUF1aEMsS0FBQSwwQkFBQXB0QixJQUFBLHlDQUNBLENBQUFuVSxNQUFBLGtCQUFBdWhDLEtBQUEsMEJBQUFwdEIsSUFBQSw0Q0FyTkEsR0NBQSxXQUNBbG1CLFFBQUFDLE9BQUEsT0FBQTJCLFdBQUEsMEJBRUEsU0FDQTRqQixPQUNBQyxTQUNBQyxZQUNBM2pCLE9BQ0Eyb0IsYUFDQXhoQixXQUNBOUcsYUFDQXVqQixNQUNBempCLFFBQ0FELHFCQUVBLElBQUEwUSxHQUFBbFAsS0FFQU4sT0FBQWpCLFFBQUFpQixPQUFBQyxVQUFBbEIsUUFBQWtCLFVBQ0FzaUIsWUFBQWhkLGFBQ0F2RixTQUVBd1AsR0FBQXBELFNBQUFuTSxVQUFBUCxNQUdBOFAsR0FBQXhQLE9BQUEsV0FDQUEsVUFFQXdQLEdBQUE0Z0MsZ0JBQUE3b0IsYUFBQW5sQixHQUNBaWdCLE9BQUFndUIsdUJBQUEsV0FDQXRxQyxXQUNBdXFDLHFCQUFBOWdDLEdBQUE0Z0MsaUJBQ0F4c0MsS0FBQSxTQUFBQyxNQUNBMkwsR0FBQStnQyxrQkFBQTFzQyxLQUFBckQsUUFLQTZoQixPQUFBZ3VCLDJCQXJDQSxHQ0FBLFdBQ0F4ekMsUUFBQUMsT0FBQSxPQUFBMkIsV0FBQSxlQUVBLFNBQ0E0akIsT0FDQTVQLFdBQ0E2UCxTQUNBQyxZQUNBM2pCLE9BQ0FtSCxXQUNBOUcsYUFDQUYsUUFDQXVRLG1CQUNBdFEsT0FDQUYscUJBRUEsSUFBQTBRLEdBQUFsUCxLQUNBa1AsR0FBQXEvQixrQkFBQSxHQUNBci9CLEdBQUFzL0IsU0FBQSxHQUhBLElBSUE5dUMsT0FBQWpCLFFBQUFpQixPQUFBakIsUUFBQTBPLFNBQUExTyxRQUFBa0IsVUFDQW9pQixPQUFBZSxnQkFBQSxFQUVBYixZQUFBaGQsYUFDQXZGLFNBR0F3UCxHQUFBZ2hDLGFBQUEsU0FBQS9xQyxNQUdBTSxXQUNBb2dDLGdCQUFBLENBQ0FqOEIsS0FBQSxFQUNBc1YsTUFBQSxHQUNBdUUsS0FBQXRlLE9BSUE3QixLQUFBLFNBQUFDLE1BR0EyTCxHQUFBaWhDLGFBQUE1c0MsS0FBQXJELEtBQUEyakIsS0FDQTNVLEdBQUFraEMsY0FBQTdzQyxLQUFBckQsS0FBQTZqQixNQUNBeGlCLFFBQUFDLElBQUEsaUJBQUEwTixHQUFBaWhDLGNBQ0FudUIsU0FBQSxXQUVBSyxFQUFBLGVBQUEyQixXQUFBLENBQ0FyZSxNQUFBdUosR0FBQWtoQyxjQUNBbnNCLFlBQUEsR0FDQUMsU0FBQSxjQUNBQyxlQUFBLElBQ0FDLFVBQUEsRUFDQXJCLFlBQUEsRUFFQXNCLFlBQUEsU0FBQXphLEtBQUFrUCxPQUNBQSxNQUFBd0wsaUJBQ0E3ZSxXQUNBb2dDLGdCQUFBLENBQ0FqOEIsS0FBQUEsS0FDQXNWLE1BQUEsS0FJQTViLEtBQUEsU0FBQUMsTUFDQTJMLEdBQUFpaEMsYUFBQTVzQyxLQUFBckQsS0FBQTJqQixPQUVBcGdCLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsWUFNQWxELE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsTUFJQXVJLEdBQUFnaEMsYUFBQSxXQUdBbnVCLE9BQUFtdEIsU0FBQSxTQUFBNXFDLE9BRUFwRixNQUFBb0YsTUFBQSxLQUNBeWQsT0FBQW90QixRQUFBaFAsSUFBQUMsZ0JBQUE5N0IsTUFBQSxJQUNBeWQsT0FBQXF0QixRQUFBOXFDLE1BQUEsR0FBQVAsS0FBQWtSLE1BQUEsS0FBQWl3QixRQUtBem1DLFFBQUF3TyxpQkFBQTNKLEtBQUEsU0FBQUMsTUFDQTJMLEdBQUFqQyxlQUFBMUosS0FBQXJELEtBRUFnUCxHQUFBMFYsZ0JBQUEsU0FBQUMsUUFDQSxPQUFBLElBQUEzaEIsUUFBQSxTQUFBQyxRQUFBQyxRQUNBRCxRQUFBSSxLQUFBckQsV0FLQXVGLFdBQUFwRCxtQkFBQWlCLEtBQUEsU0FBQUMsTUFDQTJMLEdBQUFtZ0MsYUFBQTlyQyxLQUFBckQsS0FBQTJqQixPQUlBM1UsR0FBQXNqQixZQUFBLFNBQUEzc0IsTUFDQXFKLEdBQUFxL0Isa0JBQUF4bkMsS0FBQWxCLE9BSUFxSixHQUFBb2dDLFVBQUEsU0FBQXZyQyxNQUNBbUwsR0FBQXMvQixTQUFBem5DLEtBQUFoRCxPQU1BbUwsR0FBQW1oQyxnQkFBQSxXQUNBaHVCLEVBQUEsU0FBQXlzQixTQUFBLFdBQ0F2dEMsUUFBQUMsSUFBQSxRQUNBNmdCLEVBQUEsOEJBQUFPLFlBQUEsVUFDQVAsRUFBQSxnQkFBQVEsU0FBQSxVQUNBUixFQUFBLFNBQUFPLFlBQUEsUUFDQVAsRUFBQSxTQUFBTyxZQUFBLFVBQ0FQLEVBQUEsWUFBQVEsU0FBQSxRQUNBUixFQUFBLFlBQUFRLFNBQUEsV0FDQVIsRUFBQSxnQkFBQXlzQixTQUFBLFlBQ0F2dEMsUUFBQUMsSUFBQSxXQUNBNmdCLEVBQUEsOEJBQUFPLFlBQUEsVUFDQVAsRUFBQSxnQkFBQVEsU0FBQSxVQUNBUixFQUFBLFlBQUFPLFlBQUEsUUFDQVAsRUFBQSxZQUFBTyxZQUFBLFVBQ0FQLEVBQUEsWUFBQVEsU0FBQSxRQUNBUixFQUFBLFlBQUFRLFNBQUEsWUFLQTNULEdBQUFvaEMsb0JBQUEsV0FDQWp1QixFQUFBLGdCQUFBeXNCLFNBQUEsV0FDQXZ0QyxRQUFBQyxJQUFBLFFBQ0E2Z0IsRUFBQSw4QkFBQU8sWUFBQSxVQUNBUCxFQUFBLFNBQUFRLFNBQUEsVUFDQVIsRUFBQSxZQUFBTyxZQUFBLFFBQ0FQLEVBQUEsWUFBQU8sWUFBQSxVQUNBUCxFQUFBLFNBQUFRLFNBQUEsUUFDQVIsRUFBQSxTQUFBUSxTQUFBLFdBQ0FSLEVBQUEsZ0JBQUF5c0IsU0FBQSxZQUNBdnRDLFFBQUFDLElBQUEsV0FDQTZnQixFQUFBLDhCQUFBTyxZQUFBLFVBQ0FQLEVBQUEsZ0JBQUFRLFNBQUEsVUFDQVIsRUFBQSxZQUFBTyxZQUFBLFFBQ0FQLEVBQUEsWUFBQU8sWUFBQSxVQUNBUCxFQUFBLFlBQUFRLFNBQUEsUUFDQVIsRUFBQSxZQUFBUSxTQUFBLFlBTUFkLE9BQUFpdEIsZUFBQSxTQUFBcDFCLE1BQUF0SyxPQUNBQSxNQUFBdEksT0FBQTRTLE1BQUEsSUFHQW1JLE9BQUFrdEIsWUFBQSxTQUFBcjFCLE1BQUF0SyxPQUNBQSxNQUFBdEksT0FBQTRTLE1BQUEsSUFHQW1JLE9BQUF3dUIsZUFBQSxTQUFBcnNDLFVBQ0FBLFNBQUFzckMsU0FBQSxHQUFBdHJDLFNBQUF1ckMsTUFBQSxHQUNBbHVDLFFBQUFDLElBQUEsV0FBQTBDLFVBQ0FnTCxHQUFBcS9CLGtCQUFBdG9DLE9BQUEsR0FDQWlKLEdBQUFxL0Isa0JBQUF0bUMsUUFBQSxTQUFBMmQsU0FDQTFoQixTQUFBc3JDLFNBQUF6b0MsS0FBQTZlLFFBQUFyZixPQUdBMkksR0FBQXMvQixTQUFBdm9DLE9BQUEsR0FDQWlKLEdBQUFzL0IsU0FBQXZtQyxRQUFBLFNBQUEyZCxTQUNBMWhCLFNBQUF1ckMsTUFBQTFvQyxLQUFBNmUsV0FHQXJrQixRQUFBQyxJQUFBLFdBQUEwQyxVQUNBdUIsV0FDQStxQyxrQkFBQXRzQyxVQUNBWixLQUFBLFNBQUFDLE1BQ0E1RSxhQUFBOEgsUUFBQSx3Q0FDQXlJLEdBQUFoTCxTQUFBLEdBQ0FnTCxHQUFBcS9CLGtCQUFBLEdBQ0FyL0IsR0FBQXlnQyxTQUFBLEdBQ0E1dEIsT0FBQStILFdBQUEsR0FDQTVsQixTQUFBc3JDLFNBQUEsR0FDQXRyQyxTQUFBdXJDLE1BQUEsR0FFQXB0QixFQUFBLG1CQUFBMkUsTUFBQSxRQUNBOVgsR0FBQWdoQyxhQUFBLGFBRUF6c0MsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixHQU9BaEksYUFBQWtOLE1BQUEsMkJBS0FrVyxPQUFBNnRCLFVBQUEsQ0FDQSxDQUFBdGhDLE1BQUEsa0JBQUF1aEMsS0FBQSwwQkFBQXB0QixJQUFBLHlDQUNBLENBQUFuVSxNQUFBLGtCQUFBdWhDLEtBQUEsMEJBQUFwdEIsSUFBQSx5Q0FDQSxDQUFBblUsTUFBQSxrQkFBQXVoQyxLQUFBLDBCQUFBcHRCLElBQUEseUNBQ0EsQ0FBQW5VLE1BQUEsa0JBQUF1aEMsS0FBQSwwQkFBQXB0QixJQUFBLHlDQUNBLENBQUFuVSxNQUFBLGtCQUFBdWhDLEtBQUEsMEJBQUFwdEIsSUFBQSx5Q0FDQSxDQUFBblUsTUFBQSxrQkFBQXVoQyxLQUFBLDBCQUFBcHRCLElBQUEsNENBdE5BLEdDQUEsV0FDQWxtQixRQUFBQyxPQUFBLE9BQUEyQixXQUFBLHFCQUVBLFNBQ0E0akIsT0FDQUMsU0FDQUMsWUFDQTNqQixPQUNBMm9CLGFBQ0F4aEIsV0FDQTlHLGFBQ0F1akIsTUFDQXpqQixRQUNBRCxxQkFFQSxJQUFBMFEsR0FBQWxQLEtBRUFOLE9BQUFqQixRQUFBaUIsT0FBQUMsVUFBQWxCLFFBQUFrQixVQUNBc2lCLFlBQUFoZCxhQUNBdkYsU0FFQXdQLEdBQUFwRCxTQUFBbk0sVUFBQVAsTUFHQThQLEdBQUF4UCxPQUFBLFdBQ0FBLFVBRUF3UCxHQUFBdWhDLFdBQUF4cEIsYUFBQW5sQixHQUNBaWdCLE9BQUEydUIsa0JBQUEsV0FDQWpyQyxXQUNBa3JDLGdCQUFBemhDLEdBQUF1aEMsWUFDQW50QyxLQUFBLFNBQUFDLE1BQ0EyTCxHQUFBMGhDLGFBQUFydEMsS0FBQXJELFFBS0E2aEIsT0FBQTJ1QixzQkFyQ0EsR0NBQSxXQUNBbjBDLFFBQUFDLE9BQUEsT0FBQTJCLFdBQUEsV0FFQSxTQUNBNGpCLE9BQ0FDLFNBQ0FDLFlBQ0EzakIsT0FDQW1ILFdBQ0E5RyxhQUNBRixRQUNBQyxRQUlBcWpCLE9BQUFrb0IsVUFBQSxDQUNBLENBQUF4bkIsSUFBQSxnQ0FBQXFQLFNBQUEsS0FBQXhqQixNQUFBLGlGQUFBeWpCLEtBQUEsWUFBQW1ZLFVBQUEsYUFDQSxDQUFBem5CLElBQUEsZ0NBQUFxUCxTQUFBLEtBQUF4akIsTUFBQSxpRkFBQXlqQixLQUFBLFdBQUFtWSxVQUFBLGdCQUNBLENBQUF6bkIsSUFBQSxnQ0FBQXFQLFNBQUEsS0FBQXhqQixNQUFBLGlGQUFBeWpCLEtBQUEsWUFBQW1ZLFVBQUEsZUFDQSxDQUFBem5CLElBQUEsZ0NBQUFxUCxTQUFBLEtBQUF4akIsTUFBQSxpRkFBQXlqQixLQUFBLGFBQUFtWSxVQUFBLGNBQ0EsQ0FBQXpuQixJQUFBLGdDQUFBcVAsU0FBQSxLQUFBeGpCLE1BQUEsaUZBQUF5akIsS0FBQSxhQUFBbVksVUFBQSxjQUNBLENBQUF6bkIsSUFBQSxnQ0FBQXFQLFNBQUEsS0FBQXhqQixNQUFBLGlGQUFBeWpCLEtBQUEsYUFBQW1ZLFVBQUEsZUFJQSxJQUNBeHFDLE9BQUFqQixRQUFBaUIsT0FBQUMsVUFBQWxCLFFBQUFrQixVQUNBLElBQUFzaUIsWUFBQWhkLFlBRUEsWUFEQXZGLFNBSEFNLEtBTUFOLE9BQUEsV0FDQUEsVUFQQU0sS0FVQThMLFNBQUFuTSxVQUFBUCxRQW5DQSxHQ0FBLFdBQ0E3QyxRQUFBQyxPQUFBLE9BQUEyQixXQUFBLGVBRUEsU0FDQTRqQixPQUNBQyxTQUNBQyxZQUNBM2pCLE9BQ0FtSCxXQUNBOUcsYUFDQUYsUUFDQUMsUUFJQXFqQixPQUFBa29CLFVBQUEsQ0FDQSxDQUFBeG5CLElBQUEsZ0NBQUFxUCxTQUFBLEtBQUF4akIsTUFBQSxpRkFBQXlqQixLQUFBLFlBQUFtWSxVQUFBLGFBQ0EsQ0FBQXpuQixJQUFBLGdDQUFBcVAsU0FBQSxLQUFBeGpCLE1BQUEsaUZBQUF5akIsS0FBQSxXQUFBbVksVUFBQSxnQkFDQSxDQUFBem5CLElBQUEsZ0NBQUFxUCxTQUFBLEtBQUF4akIsTUFBQSxpRkFBQXlqQixLQUFBLFlBQUFtWSxVQUFBLGVBQ0EsQ0FBQXpuQixJQUFBLGdDQUFBcVAsU0FBQSxLQUFBeGpCLE1BQUEsaUZBQUF5akIsS0FBQSxhQUFBbVksVUFBQSxjQUNBLENBQUF6bkIsSUFBQSxnQ0FBQXFQLFNBQUEsS0FBQXhqQixNQUFBLGlGQUFBeWpCLEtBQUEsYUFBQW1ZLFVBQUEsY0FDQSxDQUFBem5CLElBQUEsZ0NBQUFxUCxTQUFBLEtBQUF4akIsTUFBQSxpRkFBQXlqQixLQUFBLGFBQUFtWSxVQUFBLGVBSUEsSUFDQXhxQyxPQUFBakIsUUFBQWlCLE9BQUFDLFVBQUFsQixRQUFBa0IsVUFDQSxJQUFBc2lCLFlBQUFoZCxZQUVBLFlBREF2RixTQUhBTSxLQU1BTixPQUFBLFdBQ0FBLFVBUEFNLEtBVUE4TCxTQUFBbk0sVUFBQVAsUUFuQ0EsR0NBQSxXQUNBN0MsUUFBQUMsT0FBQSxPQUFBMkIsV0FBQSxvQkFFQSxTQUNBNGpCLE9BQ0FDLFNBQ0ExakIsT0FDQUMsVUFDQUUsUUFDQXdqQixZQUNBeGMsV0FDQTlHLGFBQ0F1YixnQkFDQUMsZUFDQTAyQixnQkFDQXJ5QyxvQkFDQXliLGdCQUNBNjJCLGlCQUNBLElBQ0FweEMsT0FBQWpCLFFBQUFpQixPQUFBakIsUUFBQWtCLFVBQ0EsSUFBQXNpQixZQUFBaGQsWUFFQSxZQURBdkYsU0FvRUEsR0E1REEyaUIsRUFBQSxpQkFBQTB1QixVQUFBLFlBVUEsU0FBQUMsTUFBQXJxQyxHQUNBLElBQUFzcUMsS0FBQSxFQUNBQyxLQUFBLEVBQ0FDLEtBQUEsRUFDQUMsS0FBQSxFQVdBLFNBQUFDLGNBQUExcUMsSUFDQUEsRUFBQUEsR0FBQTJxQyxPQUFBeDRCLE9BQ0F3TCxpQkFFQTZzQixLQUFBeHFDLEVBQUF3M0IsUUFDQWlULEtBQUF6cUMsRUFBQTQzQixRQUNBdjBCLFNBQUF1bkMsVUFBQUMsaUJBRUF4bkMsU0FBQXluQyxZQUFBQyxZQUdBLFNBQUFBLFlBQUEvcUMsSUFDQUEsRUFBQUEsR0FBQTJxQyxPQUFBeDRCLE9BQ0F3TCxpQkFFQTJzQixLQUFBRSxLQUFBeHFDLEVBQUF3M0IsUUFDQStTLEtBQUFFLEtBQUF6cUMsRUFBQTQzQixRQUNBNFMsS0FBQXhxQyxFQUFBdzNCLFFBQ0FpVCxLQUFBenFDLEVBQUE0M0IsUUFFQXlTLE1BQUFoMUIsTUFBQXdULElBQUF3aEIsTUFBQVcsVUFBQVQsS0FBQSxLQUNBRixNQUFBaDFCLE1BQUFxaUIsS0FBQTJTLE1BQUFZLFdBQUFYLEtBQUEsS0FHQSxTQUFBTyxtQkFFQXhuQyxTQUFBdW5DLFVBQUEsS0FDQXZuQyxTQUFBeW5DLFlBQUEsS0FyQ0F6bkMsU0FBQW9KLGVBQUE0OUIsTUFBQWx2QyxHQUFBLFVBRUFrSSxTQUFBb0osZUFDQTQ5QixNQUFBbHZDLEdBQUEsVUFDQSt2QyxZQUFBUixjQUdBTCxNQUFBYSxZQUFBUixjQXJCQVMsQ0FDQTluQyxTQUFBb0osZUFDQWlQLEVBQUFyaUIsTUFDQSt4QyxRQUFBLE9BQ0Fyb0IsS0FBQSxXQXNEQXpILFlBQUFoZCxZQUVBLE9BVUEsSUFBQWlLLEdBQUFsUCxLQW1DQSxTQUFBZ3lDLFlBQUFDLFVBTUEsSUFBQUMsZUFBQUQsU0FBQTEvQixlQUNBMC9CLFNBQUExL0IsWUFBQTQvQixZQU9BLzZCLGNBQUE4QyxnQkFBQTlDLGdCQUlBd0ssWUFBQXpILGVBQUF5SCxjQUVBaXZCLGdCQUFBcDJCLGNBQUFtSCxhQUVBMVMsR0FBQXVILFdBQUEsQ0FDQTI3QixVQUFBLGNBQ0FDLFlBQUEscUJBQ0FsVixVQUFBLDRCQUNBcGlCLFlBQUEsR0FLQTdMLEdBQUFvakMsVUFBQSxDQUNBQyxRQUFBLEVBQ0FDLFdBQUEsT0FDQWxlLE9BQUEsTUFDQW1lLEtBQUEsUUFDQUMsT0FBQSxHQUlBeGpDLEdBQUF5akMsU0FBQSxDQUNBekQsU0FBQSxTQUFBMEQsSUFBQXRtQixNQUFBNE0sUUFDQSxJQUFBNWpCLElBQUEsR0FDQUEsSUFBQXdGLE9BQUE1TCxHQUFBdUgsV0FBQTQ3QixZQUNBLzhCLElBQUEwRixLQUFBOUwsR0FBQXVILFdBQUEwbUIsVUFDQXZiLFlBQUFqa0IsSUFBQTJYLE9BS0FwRyxHQUFBMmpDLGtCQUFBLFdBQ0FqeEIsWUFBQWprQixJQUFBLENBQ0FvZCxZQUFBN0wsR0FBQXVILFdBQUFzRSxlQVFBLElBQUF2SSxNQUFBMEgsZ0JBQUE5SCxZQUNBLFFBQ0EsQ0FDQWhJLE9BQUFrbkMsT0FBQXdCLFlBQ0F6b0MsTUFBQWluQyxPQUFBeUIsWUFFQWQsU0FBQTEvQixhQUtBcUcsWUFBQXFCLGdCQUFBckIsWUFBQXBHLE9BRUFvRyxZQUFBRCxTQUFBLFlBQUEsV0FFQXpKLEdBQUE4akMsZ0JBQUEsQ0FDQTFzQyxFQUFBa00sTUFBQXlnQyxxQkFBQTNzQyxFQUNBd00sRUFBQU4sTUFBQXlnQyxxQkFBQW5nQyxHQUVBaVAsT0FBQW9QLFdBS0EsSUFBQXJjLFVBQUFvRixnQkFBQXBGLFlBRUFpTixPQUFBOE8sSUFBQSxrQkFBQSxTQUFBbHFCLEVBQUFxTyxZQUNBOUYsR0FBQWdrQyxpQkFBQWwrQixhQUlBLElBQUFvRSxVQUFBODRCLGFBQ0ExL0IsTUFBQTRMLGNBQUEsR0FDQTB5QixnQkFBQTczQixZQUFBekcsT0FFQTJnQyxhQUFBckMsZ0JBQUEzM0IsZ0JBQUEzRyxNQUFBNEcsV0FFQS9CLGVBQUE2QyxnQkFBQTdDLGlCQUlBKzdCLGlCQUFBbDVCLGdCQUFBdEQsYUFBQXdDLFdBTUF0RixXQUFBKzhCLGdCQUFBLzhCLFdBQUF0QixNQUFBNEcsV0FFQWhFLGlCQUFBOEUsZ0JBQUE5RSxtQkFJQW1NLFFBQUFwSCxlQUFBb0gsVUFPQSxHQUxBclMsR0FBQW1rQyxXQUFBLEVBQ0Fua0MsR0FBQW9rQyxVQUFBLElBQ0Fwa0MsR0FBQXNTLFVBR0Ewd0IsYUFBQSxDQUNBLEdBQUFELFNBQUExL0IsYUFBQTAvQixTQUFBMS9CLFlBQUFnaEMsWUFBQSxDQUNBbitCLGlCQUFBelgsSUFBQXMwQyxTQUFBMS9CLFlBQUFnaEMsYUFFQSxJQUFBQyxnQkFBQWhoQyxNQUNBNEwsY0FBQSxHQUNBQSxjQUNBdFYsT0FBQSxTQUFBeEMsR0FDQSxRQUFBLFdBQUFvQixLQUFBcEIsRUFBQXZDLFVBRUF5dkMsZ0JBQUF2dEMsT0FBQSxFQUNBa3RDLGFBQUFwNUIsY0FBQXk1QixpQkFFQUwsYUFBQTc1QixnQkFJQTI0QixTQUFBMS9CLGFBQUEwL0IsU0FBQTEvQixZQUFBa2hDLFdBQ0E1QyxnQkFBQW4yQixZQUFBdTNCLFNBQUExL0IsWUFBQWtoQyxnQkFHQU4sYUFBQTc1QixnQkFJQXBLLEdBQUF3a0MsZ0JBQUF0K0IsaUJBQUFoVyxNQUVBOFAsR0FBQXlrQyxrQkFBQSxTQUFBcnNDLEtBQ0EsT0FBQUEsSUFBQWdZLFFBQUEsSUFJQXBRLEdBQUFtSyxVQUFBODVCLGFBQUExNUIsZUFJQXZLLEdBQUF5SSxhQUFBdUMsZ0JBQUF2QyxlQUlBLElBQUFpOEIsU0FBQSxJQUFBMUksTUFDQTBJLFNBQUFDLFlBQUEsWUFFQTVCLFNBQUExL0IsYUFBQTAvQixTQUFBMS9CLFlBQUFFLFlBQ0FtaEMsU0FBQTFULElBQUErUixTQUFBN2QsU0FBQW4yQixJQUNBMjFDLFNBQUF0cUMsT0FBQSxXQUNBLElBQUF3cUMsZUFBQTE2QixVQUFBaGEsSUFBQSxZQUFBLEdBQ0EwMEMsZUFBQW5ULE1BQUFpVCxVQUVBMWtDLEdBQUE2a0MsV0FBQSxDQUNBenRDLEVBQUF5SixLQUFBQyxNQUFBOGpDLGVBQUF6cEMsU0FDQXlJLEVBQUEvQyxLQUFBQyxNQUFBOGpDLGVBQUExcEMsV0FFQW9JLE1BQUFVLFVBR0EwZ0MsU0FBQTFULElBQUErUixTQUFBN2QsU0FBQW4yQixJQUVBMjFDLFNBQUF0cUMsT0FBQSxXQUVBLElBQUEwcUMsWUFBQWprQyxLQUFBQyxNQUFBd0MsTUFBQXBJLFNBQUEsSUFDQTZwQyxZQUFBTCxTQUFBeHBDLE9BQUE0cEMsWUFDQUUsV0FBQW5rQyxLQUFBQyxNQUFBNGpDLFNBQUF2cEMsTUFBQTRwQyxhQUVBL2tDLEdBQUE2a0MsV0FBQSxDQUNBenRDLEVBQUE0dEMsV0FDQXBoQyxFQUFBa2hDLGFBR0EsSUFBQUcsUUFBQSxJQUFBemhDLE1BQUF3NEIsTUFBQSxDQUNBdkssTUFBQWlULFNBQ0E3dkMsS0FBQSxVQUNBakMsR0FBQSxVQUNBc0ksT0FBQTRwQyxZQUNBSSxjQUFBLEVBQ0FDLGNBQUEsRUFDQUMsY0FBQSxHQUNBaHVDLEVBQUFrTSxNQUFBbkksUUFBQSxFQUFBNnBDLFdBQUEsRUFFQXBoQyxFQUFBLEdBQ0F6SSxNQUFBNnBDLGFBR0FDLFFBQUFuaEMsR0FBQSxRQUFBLFNBQUFyTSxHQUNBeXNDLGlCQUFBcjhCLGNBR0FxQyxVQUFBaEosSUFBQStqQyxTQUNBLzZCLFVBQUFsRyxPQUVBa0csVUFBQW03QixpQkFLQSxJQUFBaC9CLGFBQUEyRSxnQkFBQTNFLGVBU0FpL0IsWUFBQXY2QixnQkFBQTVCLGFBQUFpNUIsUUFDQWtELFlBQUE3N0IsU0FBQW5HLE9BQ0F0RCxHQUFBdWxDLFdBQUEsQ0FDQW51QyxPQUFBcEgsRUFDQTRULE9BQUE1VCxHQUlBb3lDLE9BQUE5NEIsaUJBQUEsUUFBQSxTQUFBN1IsR0FJQSxrQkFBQXJJLE9BQUFvMkMsU0FBQTN3QyxPQUVBLGFBQUEyRCxLQUNBc0MsU0FBQTJxQyxxQkFBQSxRQUFBLEdBQUFuNUIsWUFFQTdVLEVBQUEyZCxpQkFJQXZVLEtBQUFDLE1BQUF3QyxNQUFBcEksU0FBQSxHQUNBMkYsS0FBQUMsTUFBQXdDLE1BQUFuSSxRQUFBLEdBRUEsR0FBQTFELEVBQUFpdUMsUUFBQSxDQUNBLElBQUFDLFNBQUF6N0IsVUFBQTZHLFNBQ0E2MEIsYUFBQSxDQUNBeHVDLEVBQ0FrTSxNQUFBeWdDLHFCQUFBM3NDLEVBQUF1dUMsU0FDQXo3QixVQUFBOVMsSUFBQXV1QyxTQUNBL2hDLEVBQ0FOLE1BQUF5Z0MscUJBQUFuZ0MsRUFBQStoQyxTQUFBejdCLFVBQUF0RyxJQUFBK2hDLFVBR0FFLFNBQUFwdUMsRUFBQXF1QyxPQUFBLEVBekJBLEtBeUJBSCxTQUFBQSxTQXpCQSxLQTBCQXo3QixVQUFBd0UsTUFBQSxDQUNBdFgsRUFBQXl1QyxTQUNBamlDLEVBQUFpaUMsV0FHQSxJQUFBRSxPQUFBLENBQ0EzdUMsSUFDQXd1QyxhQUFBeHVDLEVBQUFrTSxNQUFBeWdDLHFCQUFBM3NDLEVBQUF5dUMsVUFDQUEsU0FDQWppQyxJQUNBZ2lDLGFBQUFoaUMsRUFBQU4sTUFBQXlnQyxxQkFBQW5nQyxFQUFBaWlDLFVBQ0FBLFVBSUFoQixXQUFBLENBQ0FqaEMsRUFBQS9DLEtBQUFDLE1BQUFvSixVQUFBK0UsS0FBQSxZQUFBLEdBQUEvVCxTQUFBMnFDLFVBQ0F6dUMsRUFBQXlKLEtBQUFDLE1BQUFvSixVQUFBK0UsS0FBQSxZQUFBLEdBQUE5VCxRQUFBMHFDLFdBRUE3bEMsR0FBQTZrQyxXQUFBQSxXQUVBN2tDLEdBQUFva0MsVUFBQXZqQyxLQUFBQyxNQUFBLElBQUFvSixVQUFBd0UsUUFBQXRYLEdBQ0E2VCxlQUFBa0gsNEJBQUFqSSxXQUdBMkksT0FBQW9QLFNBQ0EvWCxVQUFBN0MsU0FBQTArQixRQUNBemlDLE1BQUE2RCxlQUlBaTdCLE9BQUE5NEIsaUJBQUEsY0FBQSxTQUFBN1IsR0FDQSxXQUFBQSxFQUFBaWEsT0FBQXMwQixVQUNBdnVDLEVBQUEyZCxpQkFDQXVzQixnQkFBQS8wQixnQkFDQTFDLFVBQUFsRyxPQUNBNEIsVUFBQTlJLFdBTUFrRCxHQUFBaW1DLFdBQUEsU0FBQWh3QyxNQUdBLElBQUFpd0MsUUFBQXJsQyxLQUFBQyxNQUFBd0MsTUFBQXBJLFNBQUEsR0FDQWlyQyxRQUFBdGxDLEtBQUFDLE1BQUF3QyxNQUFBbkksUUFBQSxHQUVBd3FDLFNBQUF6N0IsVUFBQTZHLFNBQ0E2MEIsYUFBQSxDQUNBeHVDLEVBQUErdUMsUUFBQVIsU0FBQXo3QixVQUFBOVMsSUFBQXV1QyxTQUNBL2hDLEVBQUFzaUMsUUFBQVAsU0FBQXo3QixVQUFBdEcsSUFBQStoQyxVQUVBRSxTQUFBNXZDLEtBQUEsRUFOQSxLQU1BMHZDLFNBQUFBLFNBTkEsS0FPQXo3QixVQUFBd0UsTUFBQSxDQUNBdFgsRUFBQXl1QyxTQUNBamlDLEVBQUFpaUMsV0FFQSxJQUFBRSxPQUFBLENBQ0EzdUMsSUFBQXd1QyxhQUFBeHVDLEVBQUErdUMsUUFBQU4sVUFBQUEsU0FDQWppQyxJQUFBZ2lDLGFBQUFoaUMsRUFBQXNpQyxRQUFBTCxVQUFBQSxVQUlBaEIsV0FBQSxDQUNBamhDLEVBQUEvQyxLQUFBQyxNQUFBb0osVUFBQStFLEtBQUEsWUFBQSxHQUFBL1QsU0FBQTJxQyxVQUNBenVDLEVBQUF5SixLQUFBQyxNQUFBb0osVUFBQStFLEtBQUEsWUFBQSxHQUFBOVQsUUFBQTBxQyxXQUVBN2xDLEdBQUE2a0MsV0FBQUEsV0FDQTU1QixlQUFBa0gsNEJBQUFqSSxXQUNBbEssR0FBQW9rQyxVQUFBdmpDLEtBQUFDLE1BQUEsSUFBQW9KLFVBQUF3RSxRQUFBdFgsR0FFQThTLFVBQUE3QyxTQUFBMCtCLFFBQ0F6aUMsTUFBQTZELGFBR0FuSCxHQUFBb21DLFdBQUEsU0FBQUMsWUFDQSxJQUFBSCxRQUFBcmxDLEtBQUFDLE1BQUF3QyxNQUFBcEksU0FBQSxHQUNBaXJDLFFBQUF0bEMsS0FBQUMsTUFBQXdDLE1BQUFuSSxRQUFBLEdBRUF3cUMsU0FBQXo3QixVQUFBNkcsU0FDQTYwQixhQUFBLENBQ0F4dUMsRUFBQSt1QyxRQUFBUixTQUFBejdCLFVBQUE5UyxJQUFBdXVDLFNBQ0EvaEMsRUFBQXNpQyxRQUFBUCxTQUFBejdCLFVBQUF0RyxJQUFBK2hDLFVBR0FFLFNBQUFRLFdBQUEsSUFDQW44QixVQUFBd0UsTUFBQSxDQUNBdFgsRUFBQXl1QyxTQUNBamlDLEVBQUFpaUMsV0FFQSxJQUFBRSxPQUFBLENBQ0EzdUMsSUFBQXd1QyxhQUFBeHVDLEVBQUErdUMsUUFBQU4sVUFBQUEsU0FDQWppQyxJQUFBZ2lDLGFBQUFoaUMsRUFBQXNpQyxRQUFBTCxVQUFBQSxVQUlBaEIsV0FBQSxDQUNBamhDLEVBQUEvQyxLQUFBQyxNQUFBb0osVUFBQStFLEtBQUEsWUFBQSxHQUFBL1QsU0FBQTJxQyxVQUNBenVDLEVBQUF5SixLQUFBQyxNQUFBb0osVUFBQStFLEtBQUEsWUFBQSxHQUFBOVQsUUFBQTBxQyxXQUVBN2xDLEdBQUE2a0MsV0FBQUEsV0FDQTU1QixlQUFBa0gsNEJBQUFqSSxXQUNBbEssR0FBQW9rQyxVQUFBdmpDLEtBQUFDLE1BQUEsSUFBQW9KLFVBQUF3RSxRQUFBdFgsR0FFQThTLFVBQUE3QyxTQUFBMCtCLFFBQ0F6aUMsTUFBQTZELGFBS0FuSCxHQUFBc21DLFVBQUEsV0FDQXRtQyxHQUFBb2tDLFVBQUEsSUFDQWw2QixVQUFBN0MsU0FBQSxDQUNBalEsRUFBQSxFQUNBd00sRUFBQSxJQUVBc0csVUFBQXdFLE1BQUEsQ0FDQXRYLEVBQUEsRUFDQXdNLEVBQUEsSUFFQU4sTUFBQTZELGFBR0EsSUFBQW8vQixlQUFBeDdCLGdCQUFBakIsWUFBQUksV0FjQSxTQUFBczhCLHNCQUFBQyxZQUFBQyxVQUFBMy9CLFNBQ0EsSUFBQTQvQixlQUFBNTdCLGdCQUFBbEIsWUFDQTQ4QixZQUFBOWdDLE9BRUEsSUFBQW9CLFFBQUEsQ0FFQSxJQUFBNi9CLGVBQUEzQyxhQUFBejVCLGFBQ0FvOEIsZUFBQTFsQyxJQUFBdWxDLFlBQUE5Z0MsT0FDQWloQyxlQUFBQyxZQUdBLElBQUFqMUIsa0JBQUEzRyxlQUFBMkcsa0JBQ0F0TyxNQUNBNEcsVUFDQXU4QixZQUFBOWdDLE9BQ0EsR0FFQWlNLGtCQUFBbmpCLElBQUFnNEMsWUFBQTlnQyxNQUFBMEYsVUFDQTY0QixpQkFBQWhqQyxJQUFBMFEsa0JBQUFELFlBS0FnMUIsZUFBQWw5QixTQUFBLFlBQUFpOUIsVUFBQSxTQUFBanZDLEdBQ0FtYSxrQkFBQUcsT0FBQSxDQUNBM2EsRUFBQXF2QyxZQUFBOWdDLE1BQUF2TyxJQUNBd00sRUFBQTZpQyxZQUFBOWdDLE1BQUEvQixRQU9BK2lDLGVBQUFsOUIsU0FBQSxtQkFBQSxXQUNBLElBQUFpRixNQUNBLElBQUF4SSxpQkFBQWhXLE1BQUF1TixXQUNBek4sRUFDQWtXLGlCQUFBaFcsTUFBQXVOLE1BRUE0VSxRQUFBRSxhQUFBLENBQ0FqQyxLQUFBckYsZUFBQTRFLFlBQUE0MkIsWUFBQTlnQyxNQUFBMEYsU0FBQXFELE9BQ0F2SSxLQUFBRCxpQkFBQWhXLE1BQUFpVyxPQUVBME0sT0FBQW9QLFNBQ0FqaUIsR0FBQXNTLFVBQUFELFFBQUFJLGVBRUFnMEIsWUFBQTlnQyxNQUFBMEYsT0FBQXVHLGtCQUFBSyxlQUlBMDBCLGVBQUFsOUIsU0FBQSxTQUFBaTlCLFVBQUEsV0FDQUQsWUFBQTlnQyxNQUFBa2hDLFlBQ0EzK0IsY0FBQXpaLElBQUFnNEMsWUFBQTlnQyxPQUNBdUUsVUFBQWxHLE9BQ0E0TixrQkFBQUcsT0FBQSxDQUNBM2EsRUFBQXF2QyxZQUFBOWdDLE1BQUF2TyxJQUNBd00sRUFBQTZpQyxZQUFBOWdDLE1BQUEvQixNQUdBNUQsR0FBQThtQyxpQkFDQSxJQUFBcDRCLE1BQ0EsSUFBQXhJLGlCQUFBaFcsTUFBQXVOLFdBQ0F6TixFQUNBa1csaUJBQUFoVyxNQUFBdU4sTUFFQTRVLFFBQUFFLGFBQUEsQ0FDQWpDLEtBQUFyRixlQUFBNEUsWUFBQTQyQixZQUFBOWdDLE1BQUEwRixTQUFBcUQsT0FDQXZJLEtBQUFELGlCQUFBaFcsTUFBQWlXLE9BRUEyTSxTQUFBLFdBQ0FELE9BQUFvUCxXQUVBamlCLEdBQUFzUyxVQUFBRCxRQUFBSSxlQUNBelMsR0FBQW1rQyxXQUFBLEVBRUFELGlCQUFBcjhCLFlBQ0FxQyxVQUFBaEosSUFBQTBRLGtCQUFBRCxZQUNBekgsVUFBQWxHLFNBTUEsSUFBQXdELFNBQUF3RCxnQkFBQXhELFdBRUFtL0IsZUFBQWw5QixTQUFBLGFBQUFpOUIsVUFBQSxTQUFBanZDLEdBQ0ErUCxTQUFBdEcsSUFDQXpKLEVBQUFpYSxPQUFBK0ssaUJBR0FrcUIsZUFBQWw5QixTQUFBLFdBQUFpOUIsVUFBQSxTQUFBanZDLEdBRUE0TyxhQUFBeE8sS0FDQW1ULGdCQUFBbkUsY0FDQXZELE1BQ0FtakMsWUFBQTlnQyxNQUNBcytCLGFBQUF6NUIsYUFDQSxPQUNBaEQsU0FBQXRHLElBQUF6SixFQUFBaWEsT0FBQStLLG1CQU1BLFNBQUFzcUIsb0JBQUFOLFlBQUFDLFVBQUEzL0IsU0FDQSxJQUFBaWdDLGFBQUFqOEIsZ0JBQUFsQixZQUNBNDhCLFlBQUE5Z0MsT0FFQSxJQUFBb0IsUUFBQSxDQUVBLElBQUE2L0IsZUFBQTNDLGFBQUF6NUIsYUFDQW84QixlQUFBMWxDLElBQUF1bEMsWUFBQTlnQyxPQUNBaWhDLGVBQUFDLFlBS0EsSUFBQW4yQixrQkFBQXpGLGVBQUF5RixrQkFDQXBOLE1BQ0E0RyxVQUNBdThCLFlBQUE5Z0MsT0FHQStLLGtCQUFBamlCLElBQUFnNEMsWUFBQTlnQyxNQUFBdUcsVUFDQWc0QixpQkFBQWhqQyxJQUFBd1Asa0JBQUFpQixZQUVBcTFCLGFBQUF2OUIsU0FBQSxtQkFBQSxTQUFBaFMsR0FDQWlaLGtCQUFBakMsV0FDQWlDLGtCQUFBekYsZUFBQXlGLGtCQUNBcE4sTUFDQTRHLFVBQ0F1OEIsWUFBQTlnQyxRQUVBbFgsSUFBQWc0QyxZQUFBOWdDLE1BQUF1RyxVQUNBZzRCLGlCQUFBaGpDLElBQUF3UCxrQkFBQWlCLGNBR0FxMUIsYUFBQXY5QixTQUFBLGdCQUFBLFNBQUFoUyxHQUNBZ3ZDLFlBQUE5Z0MsTUFBQWtoQyxZQUNBMzhCLFVBQUFsRyxPQUVBa2dDLGlCQUFBcjhCLFlBQ0FLLGNBQUF6WixJQUFBZzRDLFlBQUE5Z0MsT0FDQTNGLEdBQUE4bUMsaUJBRUEsSUFBQXA0QixNQUNBLElBQUF4SSxpQkFBQWhXLE1BQUF1TixXQUNBek4sRUFDQWtXLGlCQUFBaFcsTUFBQXVOLE1BRUE0VSxRQUFBRSxhQUFBLENBQ0FqQyxLQUFBckYsZUFBQXNGLFlBQUFrMkIsWUFBQTlnQyxNQUFBdUcsU0FBQXdDLE9BQ0F2SSxLQUFBRCxpQkFBQWhXLE1BQUFpVyxPQUdBdUssa0JBQUFqQyxXQUNBaUMsa0JBQUF6RixlQUFBeUYsa0JBQ0FwTixNQUNBNEcsVUFDQXU4QixZQUFBOWdDLFFBRUFsWCxJQUFBZzRDLFlBQUE5Z0MsTUFBQXVHLFVBQ0FnNEIsaUJBQUFoakMsSUFBQXdQLGtCQUFBaUIsWUFDQXpILFVBQUFsRyxPQUVBaEUsR0FBQXNTLFVBQUFELFFBQUFJLGVBQ0F6UyxHQUFBbWtDLFdBQUEsRUFDQXJ4QixTQUFBLFdBQ0FELE9BQUFvUCxhQUlBK2tCLGFBQUF2OUIsU0FBQSxtQkFBQSxTQUFBaFMsR0FHQSxJQUFBaVgsTUFDQSxJQUFBeEksaUJBQUFoVyxNQUFBdU4sV0FDQXpOLEVBQ0FrVyxpQkFBQWhXLE1BQUF1TixNQUVBNFUsUUFBQUUsYUFBQSxDQUNBakMsS0FBQXJGLGVBQUFzRixZQUFBazJCLFlBQUE5Z0MsTUFBQXVHLFNBQUF3QyxPQUNBdkksS0FBQUQsaUJBQUFoVyxNQUFBaVcsT0FHQW5HLEdBQUFzUyxVQUFBRCxRQUFBSSxlQUNBelMsR0FBQW1rQyxXQUFBLElBS0EsSUFBQTM4QixTQUFBd0QsZ0JBQUF4RCxXQUVBdy9CLGFBQUF2OUIsU0FBQSxvQkFBQSxTQUFBaFMsR0FDQStQLFNBQUF0RyxJQUNBekosRUFBQWlhLE9BQUErSyxpQkFHQXVxQixhQUFBdjlCLFNBQUEsa0JBQUEsU0FBQWhTLEdBRUE0TyxhQUFBeE8sS0FDQW1ULGdCQUFBbkUsY0FDQXZELE1BQ0FtakMsWUFBQTlnQyxNQUNBcytCLGFBQUF6NUIsYUFDQSxPQUNBaEQsU0FBQXRHLElBQUF6SixFQUFBaWEsT0FBQStLLG1CQU1BLFNBQUF3cUIsb0JBQUFSLFlBQUExL0IsU0FDQSxJQUFBbWdDLGFBQUFuOEIsZ0JBQUFsQixZQUNBNDhCLFlBQUEzaEMsU0FFQSxJQUFBaUMsUUFBQSxDQUVBLElBQUE2L0IsZUFBQTNDLGFBQUF6NUIsYUFDQW84QixlQUFBMWxDLElBQUF1bEMsWUFBQTNoQyxTQUNBOGhDLGVBQUFDLFlBR0EsSUFBQWoxQixrQkFBQTNHLGVBQUEyRyxrQkFDQXRPLE1BQ0E0RyxVQUNBdThCLFlBQUEzaEMsU0FDQSxHQUVBOE0sa0JBQUFuakIsSUFBQWc0QyxZQUFBM2hDLFFBQUF1RyxVQUNBNjRCLGlCQUFBaGpDLElBQUEwUSxrQkFBQUQsWUFLQXUxQixhQUFBejlCLFNBQUEsbUJBQUEsU0FBQWhTLEdBQ0FtYSxrQkFBQUcsT0FBQSxDQUNBM2EsRUFBQXF2QyxZQUFBM2hDLFFBQUExTixJQUNBd00sRUFBQTZpQyxZQUFBM2hDLFFBQUFsQixRQUdBc2pDLGFBQUF6OUIsU0FBQSxnQkFBQSxTQUFBaFMsR0FDQW1hLGtCQUFBRyxPQUFBLENBQ0EzYSxFQUFBcXZDLFlBQUEzaEMsUUFBQTFOLElBQ0F3TSxFQUFBNmlDLFlBQUEzaEMsUUFBQWxCLFFBT0EsSUFBQTRELFNBQUF3RCxnQkFBQXhELFdBRUEwL0IsYUFBQXo5QixTQUFBLG9CQUFBLFNBQUFoUyxHQUNBK1AsU0FBQXRHLElBQ0F6SixFQUFBaWEsT0FBQStLLGlCQUdBeXFCLGFBQUF6OUIsU0FBQSxrQkFBQSxTQUFBaFMsR0FFQTRPLGFBQUF4TyxLQUNBbVQsZ0JBQUFuRSxjQUNBdkQsTUFDQW1qQyxZQUFBM2hDLFFBQ0FtL0IsYUFBQXo1QixhQUNBLE9BQ0FoRCxTQUFBdEcsSUFBQXpKLEVBQUFpYSxPQUFBK0ssbUJBT0F5cUIsYUFBQXo5QixTQUFBLG1CQUFBLFdBQ0EsSUFBQWlGLE1BQ0EsSUFBQXhJLGlCQUFBaFcsTUFBQXVOLFdBQ0F6TixFQUNBa1csaUJBQUFoVyxNQUFBdU4sTUFFQTRVLFFBQUFFLGFBQUEsQ0FDQWpDLEtBQUFyRixlQUFBNEUsWUFDQTQyQixZQUFBM2hDLFFBQUF1RyxTQUNBcUQsT0FFQXZJLEtBQUFELGlCQUFBaFcsTUFBQWlXLE9BRUEyTSxTQUFBLFdBQ0FELE9BQUFvUCxXQUVBamlCLEdBQUFzUyxVQUFBRCxRQUFBSSxlQUVBZzBCLFlBQUEzaEMsUUFBQXVHLE9BQUF1RyxrQkFBQUssZUFJQWkxQixhQUFBejlCLFNBQUEsUUFBQSxXQUNBZzlCLFlBQUEzaEMsUUFBQStoQyxZQUNBMzhCLFVBQUFsRyxPQUNBa0UsY0FBQXpaLElBQUFnNEMsWUFBQTNoQyxTQUNBOUUsR0FBQThtQyxpQkFDQSxJQUFBcDRCLE1BQ0EsSUFBQXhJLGlCQUFBaFcsTUFBQXVOLFdBQ0F6TixFQUNBa1csaUJBQUFoVyxNQUFBdU4sTUFFQTRVLFFBQUFFLGFBQUEsQ0FDQWpDLEtBQUFyRixlQUFBNEUsWUFDQTQyQixZQUFBM2hDLFFBQUF1RyxTQUNBcUQsT0FFQXZJLEtBQUFELGlCQUFBaFcsTUFBQWlXLE9BRUEwTSxPQUFBb1AsU0FDQWppQixHQUFBc1MsVUFBQUQsUUFBQUksZUFDQXpTLEdBQUFta0MsV0FBQSxFQUVBRCxpQkFBQXI4QixZQUNBcUMsVUFBQWhKLElBQUEwUSxrQkFBQUQsWUFDQXpILFVBQUFsRyxTQUlBLFNBQUFtakMscUJBQUFWLFlBQUExL0IsU0FDQSxJQUFBcWdDLGNBQUFyOEIsZ0JBQUFsQixZQUNBNDhCLFlBQUEzaEMsU0FFQSxJQUFBaUMsUUFBQSxDQUVBLElBQUE2L0IsZUFBQTNDLGFBQUF6NUIsYUFDQW84QixlQUFBMWxDLElBQUF1bEMsWUFBQTNoQyxTQUNBOGhDLGVBQUFDLFlBS0EsSUFBQXIvQixTQUFBd0QsZ0JBQUF4RCxXQUVBNC9CLGNBQUEzOUIsU0FBQSxvQkFBQSxTQUFBaFMsR0FDQStQLFNBQUF0RyxJQUNBekosRUFBQWlhLE9BQUErSyxpQkFHQTJxQixjQUFBMzlCLFNBQUEsa0JBQUEsU0FBQWhTLEdBRUE0TyxhQUFBeE8sS0FDQW1ULGdCQUFBbkUsY0FDQXZELE1BQ0FtakMsWUFBQTNoQyxRQUNBbS9CLGFBQUF6NUIsYUFDQSxPQUNBaEQsU0FBQXRHLElBQUF6SixFQUFBaWEsT0FBQStLLG1CQU1BMnFCLGNBQUEzOUIsU0FBQSxRQUFBLFdBQ0FnOUIsWUFBQTNoQyxRQUFBK2hDLFlBQ0EzOEIsVUFBQWxHLE9BQ0FrRSxjQUFBelosSUFBQWc0QyxZQUFBM2hDLFNBQ0E5RSxHQUFBOG1DLGlCQUNBLElBQUFwNEIsTUFDQSxJQUFBeEksaUJBQUFoVyxNQUFBdU4sV0FDQXpOLEVBQ0FrVyxpQkFBQWhXLE1BQUF1TixNQUNBNFUsUUFBQUUsYUFBQSxDQUNBakMsS0FBQXJGLGVBQUE0RSxZQUNBNDJCLFlBQUEzaEMsUUFBQXVHLFNBQ0FxRCxPQUVBdkksS0FBQUQsaUJBQUFoVyxNQUFBaVcsT0FFQTJNLFNBQUEsV0FDQUQsT0FBQW9QLFdBRUFqaUIsR0FBQXNTLFVBQUFELFFBQUFJLGVBQ0F6UyxHQUFBbWtDLFdBQUEsRUFDQUQsaUJBQUFyOEIsWUFDQXFDLFVBQUFsRyxTQUlBLFNBQUFxakMsaUJBQUFaLFlBQUExL0IsU0FDQSxJQUFBdWdDLFVBQUF2OEIsZ0JBQUFsQixZQUFBNDhCLFlBQUF6aEMsTUFFQSxJQUFBK0IsUUFBQSxDQUVBLElBQUE2L0IsZUFBQTNDLGFBQUF6NUIsYUFDQW84QixlQUFBMWxDLElBQUF1bEMsWUFBQXpoQyxNQUNBNGhDLGVBQUFDLFlBS0EsSUFBQXIvQixTQUFBd0QsZ0JBQUF4RCxXQUVBOC9CLFVBQUE3OUIsU0FBQSxpQkFBQSxTQUFBaFMsR0FDQStQLFNBQUF0RyxJQUNBekosRUFBQWlhLE9BQUErSyxpQkFHQTZxQixVQUFBNzlCLFNBQUEsZUFBQSxTQUFBaFMsR0FFQTRPLGFBQUF4TyxLQUNBbVQsZ0JBQUFuRSxjQUNBdkQsTUFDQW1qQyxZQUFBemhDLEtBQ0FpL0IsYUFBQXo1QixhQUNBLE9BQ0FoRCxTQUFBdEcsSUFBQXpKLEVBQUFpYSxPQUFBK0ssbUJBTUE2cUIsVUFBQTc5QixTQUFBLFFBQUEsV0FDQWc5QixZQUFBemhDLEtBQUE2aEMsWUFDQTMrQixjQUFBelosSUFBQWc0QyxZQUFBemhDLE1BQ0FoRixHQUFBOG1DLGlCQUVBNUMsaUJBQUFyOEIsWUFDQXFDLFVBQUFsRyxTQUlBLFNBQUF1akMsc0JBQUFkLFlBQUExL0IsU0FDQSxJQUFBcWdDLGNBQUFyOEIsZ0JBQUFsQixZQUNBNDhCLFlBQUEzaEMsU0FFQSxJQUFBaUMsUUFBQSxDQUVBLElBQUE2L0IsZUFBQTNDLGFBQUF6NUIsYUFDQW84QixlQUFBMWxDLElBQUF1bEMsWUFBQTNoQyxTQUNBOGhDLGVBQUFDLFlBS0EsSUFBQXIvQixTQUFBd0QsZ0JBQUF4RCxXQUVBNC9CLGNBQUEzOUIsU0FBQSwyQkFBQSxTQUFBaFMsR0FDQStQLFNBQUF0RyxJQUNBekosRUFBQWlhLE9BQUErSyxpQkFHQTJxQixjQUFBMzlCLFNBQUEseUJBQUEsU0FBQWhTLEdBRUE0TyxhQUFBeE8sS0FDQW1ULGdCQUFBbkUsY0FDQXZELE1BQ0FtakMsWUFBQTNoQyxRQUNBbS9CLGFBQUF6NUIsYUFDQSxPQUNBaEQsU0FBQXRHLElBQUF6SixFQUFBaWEsT0FBQStLLG1CQU1BMnFCLGNBQUEzOUIsU0FBQSx1QkFBQSxXQUNBZzlCLFlBQUEzaEMsUUFBQStoQyxZQUNBMzhCLFVBQUFsRyxPQUVBa0UsY0FBQXpaLElBQUFnNEMsWUFBQTNoQyxTQUNBOUUsR0FBQThtQyxpQkFFQTVDLGlCQUFBcjhCLFlBQ0FxQyxVQUFBbEcsU0E0RkEsU0FBQXdqQyxpQkFBQW45QixNQUFBdEQsU0FDQSxJQUFBMGdDLFVBQUExOEIsZ0JBQUFsQixZQUNBUSxPQUVBLElBQUF0RCxRQUFBLENBRUEsSUFBQTYvQixlQUFBM0MsYUFBQXo1QixhQUNBbzhCLGVBQUExbEMsSUFBQW1KLE9BQ0F1OEIsZUFBQUMsWUFJQSxJQUFBajFCLGtCQUFBM0csZUFBQTJHLGtCQUNBdE8sTUFDQTRHLFVBQ0FHLE9BQ0EsR0FFQXE5QixRQUFBcjlCLE1BQUE2RSxjQUFBLEdBQ0F2UixLQUFBME0sTUFBQTZFLGNBQUEsR0FFQTBDLGtCQUFBbmpCLElBQUFpNUMsUUFBQXI4QixVQUNBNjRCLGlCQUFBaGpDLElBQUEwUSxrQkFBQUQsWUFLQTgxQixVQUFBaCtCLFNBQUEscUJBQUEsU0FBQWhTLEdBQ0FtYSxrQkFBQUcsT0FBQSxDQUNBM2EsRUFBQWlULE1BQUFqVCxJQUNBd00sRUFBQXlHLE1BQUF6RyxRQU9BNmpDLFVBQUFoK0IsU0FBQSxtQkFBQSxXQUNBaStCLFFBQUFyOEIsT0FBQXVHLGtCQUFBSyxhQUVBLElBQUEwMUIsY0FBQUQsUUFBQXI4QixTQUVBMU4sS0FBQXhDLE1BQUEwRixLQUFBMkwsSUFBQW03QixjQUFBLEdBQUFBLGNBQUEsSUFBQSxJQUNBaHFDLEtBQUEwSixTQUFBLENBQ0FqUSxFQUFBdXdDLGNBQUEsR0FBQSxFQUNBL2pDLEVBQUErakMsY0FBQSxHQUFBLElBRUF6OUIsVUFBQWxHLFNBSUF5akMsVUFBQWgrQixTQUFBLGtCQUFBLFdBQ0FZLE1BQUF3OEIsWUFDQTMrQixjQUFBelosSUFBQWtQLE1BQ0F1TSxVQUFBbEcsT0FDQTROLGtCQUFBRyxPQUFBLENBQ0EzYSxFQUFBaVQsTUFBQWpULElBQ0F3TSxFQUFBeUcsTUFBQXpHLE1BR0FrUCxTQUFBLFdBQ0FELE9BQUFvUCxXQUdBaWlCLGlCQUFBcjhCLFlBQ0FxQyxVQUFBaEosSUFBQTBRLGtCQUFBRCxZQUNBKzFCLFFBQUE5N0IsT0FBQSxRQUNBMUIsVUFBQWxHLE9BQ0FoRSxHQUFBNG5DLHVCQU1BLElBQUFwZ0MsU0FBQXdELGdCQUFBeEQsV0FFQWlnQyxVQUFBaCtCLFNBQUEsc0JBQUEsU0FBQWhTLEdBQ0ErUCxTQUFBdEcsSUFDQXpKLEVBQUFpYSxPQUFBK0ssaUJBR0FnckIsVUFBQWgrQixTQUFBLG9CQUFBLFNBQUFoUyxHQUVBNE8sYUFBQXhPLEtBQ0FtVCxnQkFBQW5FLGNBQ0F2RCxNQUNBK0csTUFDQTQ1QixhQUFBejVCLGFBQ0EsT0FDQWhELFNBQUF0RyxJQUFBekosRUFBQWlhLE9BQUErSyxtQkFucEJBOHBCLGVBQUE5OEIsU0FBQSxRQUFBLFNBQUFoUyxHQUNBLFVBQUFBLEVBQUFpYSxPQUFBcEYsWUFDQTQzQixpQkFBQXI4QixZQUNBN0gsR0FBQTZuQyxrQkFDQTduQyxHQUFBOG5DLHNCQUNBNS9CLGNBQUFwTCxXQTh0QkFrbUMsZUF0RUEzMUMsUUFBQTBMLFFBQUFtUixVQUFBZ0YsY0FBQSxTQUFBOVgsR0FDQSxXQUFBb0IsS0FBQXBCLEVBQUF2QyxTQUNBeEgsUUFBQTBMLFFBQUEzQixFQUFBOFgsY0FBQSxTQUFBQyxPQUdBLEdBQUEsWUFBQUEsTUFBQTdDLFVBQ0F5NkIsb0JBQ0EsQ0FDQXBoQyxNQUFBd0osT0FFQSxXQUNBLFFBSUEsR0FDQSxTQUFBQSxNQUFBN0MsV0FDQSxVQUFBNkMsTUFBQTdDLFVBQ0EsQ0FFQSxJQUFBaEUsVUFBQTZHLE1BQUF0YSxPQUNBLFFBQUEyRCxLQUFBOFAsV0FDQWsrQixzQkFDQSxDQUNBN2dDLE1BQUF3SixPQUVBLGFBQ0EsR0FFQSxXQUFBM1csS0FBQThQLFdBQ0EyK0Isb0JBQ0EsQ0FDQW5pQyxRQUFBcUssUUFFQSxHQUVBLFFBQUEzVyxLQUFBOFAsV0FDQSsrQixpQkFDQSxDQUNBcmlDLEtBQUFtSyxRQUVBLEdBRUEsWUFBQTNXLEtBQUE4UCxXQUNBNitCLHFCQUNBLENBQ0FyaUMsUUFBQXFLLFFBRUEsR0FFQSxrQkFBQTNXLEtBQUE4UCxZQUNBaS9CLHNCQUNBLENBQ0F6aUMsUUFBQXFLLFFBRUEsT0FLQSxhQUFBM1csS0FBQTJXLE1BQUF0YSxTQUNBMnlDLGlCQUFBcjRCLE9BQUEsT0FNQSswQixpQkFBQXI4QixhQWNBN0gsR0FBQXdFLFVBQUEsU0FBQUMsUUFDQSxJQUFBaWlDLFVBQUFqaUMsT0FBQSxTQUFBLFlBQ0FtQixVQUFBblgsSUFBQSxVQUFBaTRDLFdBQ0E1ckMsU0FBQWMsS0FBQWtSLE1BQUFDLE9BQUEsWUFDQTFhLFFBQUFDLElBQUEwTixHQUFBZ2tDLGlCQUFBei9CLE9BQUFFLFFBRUE4aEMsZUFBQTk4QixTQUFBLFNBQUFpOUIsVUFBQSxXQUNBLEdBQUE5Z0MsVUFBQUssTUFBQSxVQUFBeWdDLFdBQUEsQ0FDQSxJQUFBRCxZQUFBOUUsZ0JBQUFqMkIsWUFDQSxFQUNBVixnQkFBQWxELFdBQ0F4RSxNQUFBeWdDLHFCQUNBNzVCLFVBQUF1UyxjQUNBdlMsVUFBQXdFLFVBSUErM0IsWUFBQXR5QyxPQUNBK1YsVUFBQWhKLElBQUF1bEMsWUFBQTlnQyxPQUdBVSxhQUFBeE8sS0FDQW1ULGdCQUFBbkUsY0FDQXZELE1BQ0FtakMsWUFBQTlnQyxNQUNBcytCLGFBQUF6NUIsYUFDQSxXQUdBTixVQUFBbEcsU0FHQXdpQyxzQkFBQUMsWUFBQUMsV0FFQTVyQyxTQUFBYyxLQUFBa1IsTUFBQUMsT0FBQSxVQUNBbkgsVUFBQTlJLFFBQ0E2a0MsZ0JBQUFoMUIsbUJBSUE0NUIsZUFBQTk4QixTQUFBLGFBQUFpOUIsVUFBQSxXQUNBOWdDLFVBQUFLLE1BQUEsVUFBQXlnQyxhQUNBL0UsZ0JBQUF4MUIsVUFDQW5CLGdCQUFBbEQsV0FDQXhFLE1BQUF5Z0MscUJBQ0E3NUIsVUFBQXVTLGNBQ0F2UyxVQUFBd0UsU0FFQWpLLFFBRUF5RixVQUFBbEcsV0FNQWhFLEdBQUEyRSxRQUFBLFNBQUFELFFBQ0EsSUFBQWdpQyxVQUFBaGlDLE9BQUEsU0FBQSxVQUNBa0IsVUFBQW5YLElBQUEsVUFBQWk0QyxXQUNBNXJDLFNBQUFjLEtBQUFrUixNQUFBQyxPQUFBLFlBSUF3NUIsZUFBQTk4QixTQUFBLFNBQUFpOUIsVUFBQSxXQUNBLEdBQUE5Z0MsVUFBQUssTUFBQSxVQUFBeWdDLFdBQUEsQ0FDQSxJQUFBRCxZQUFBOUUsZ0JBQUFqMkIsWUFDQSxFQUNBVixnQkFBQWxELFdBQ0F4RSxNQUFBeWdDLHFCQUNBNzVCLFVBQUF1UyxjQUNBdlMsVUFBQXdFLFVBR0ErM0IsWUFBQXR5QyxPQUNBK1YsVUFBQWhKLElBQUF1bEMsWUFBQTlnQyxPQUNBVSxhQUFBeE8sS0FDQW1ULGdCQUFBbkUsY0FDQXZELE1BQ0FtakMsWUFBQTlnQyxNQUNBcytCLGFBQUF6NUIsYUFDQSxXQUdBTixVQUFBbEcsU0FFQWxKLFNBQUFjLEtBQUFrUixNQUFBQyxPQUFBLFVBRUFnNkIsb0JBQUFOLFlBQUFDLFdBRUE5Z0MsVUFBQTlJLFFBQ0E2a0MsZ0JBQUFoMUIsbUJBSUE0NUIsZUFBQTk4QixTQUFBLGFBQUFpOUIsVUFBQSxXQUNBOWdDLFVBQUFLLE1BQUEsVUFBQXlnQyxhQUNBL0UsZ0JBQUF4MUIsVUFDQW5CLGdCQUFBbEQsV0FDQXhFLE1BQUF5Z0MscUJBQ0E3NUIsVUFBQXVTLGNBQ0F2UyxVQUFBd0UsU0FFQWhLLFFBRUF3RixVQUFBbEcsV0FNQWhFLEdBQUE4RSxRQUFBLFdBQ0FjLFVBQUFuWCxJQUFBLGtCQUNBcU0sU0FBQWMsS0FBQWtSLE1BQUFDLE9BQUEsWUFHQXc1QixlQUFBOThCLFNBQUEsZ0JBQUEsV0FDQSxHQUFBN0QsVUFBQUssTUFBQSxrQkFBQSxDQUNBLElBQUF3Z0MsWUFBQTlFLGdCQUFBMzBCLGNBQ0FoQyxnQkFBQWxELFdBQ0F4RSxNQUFBeWdDLHFCQUNBNzVCLFVBQUF1UyxjQUNBdlMsVUFBQXdFLFVBR0ErM0IsY0FDQUEsWUFBQXR5QyxPQUNBa1MsYUFBQXhPLEtBQ0FtVCxnQkFBQW5FLGNBQ0F2RCxNQUNBbWpDLFlBQUEzaEMsUUFDQW0vQixhQUFBejVCLGFBQ0EsV0FHQU4sVUFBQWhKLElBQUF1bEMsWUFBQTNoQyxXQUlBbWlDLG9CQUFBUixhQUVBM3JDLFNBQUFjLEtBQUFrUixNQUFBQyxPQUFBLFVBQ0FuSCxVQUFBOUksUUFDQTZrQyxnQkFBQWgxQixpQkFHQXpDLFVBQUFsRyxVQUlBdWlDLGVBQUE5OEIsU0FBQSxvQkFBQSxXQUNBN0QsVUFBQUssTUFBQSxvQkFDQTA3QixnQkFBQXgwQixZQUNBbkMsZ0JBQUFsRCxXQUNBeEUsTUFBQXlnQyxxQkFDQTc1QixVQUFBdVMsY0FDQXZTLFVBQUF3RSxVQUdBeEUsVUFBQWxHLFdBTUFoRSxHQUFBNkUsU0FBQSxXQUNBZSxVQUFBblgsSUFBQSx3QkFDQXFNLFNBQUFjLEtBQUFrUixNQUFBQyxPQUFBLFlBR0F3NUIsZUFBQTk4QixTQUFBLHFCQUFBLFdBQ0EsR0FBQTdELFVBQUFLLE1BQUEsd0JBQUEsQ0FDQSxJQUFBd2dDLFlBQUE5RSxnQkFBQTMwQixjQUNBaEMsZ0JBQUFsRCxXQUNBeEUsTUFBQXlnQyxxQkFDQTc1QixVQUFBdVMsY0FDQXZTLFVBQUF3RSxVQUVBLEdBRUErM0IsY0FDQUEsWUFBQXR5QyxPQUNBa1MsYUFBQXhPLEtBQ0FtVCxnQkFBQW5FLGNBQ0F2RCxNQUNBbWpDLFlBQUEzaEMsUUFDQW0vQixhQUFBejVCLGFBQ0EsV0FHQU4sVUFBQWhKLElBQUF1bEMsWUFBQTNoQyxXQUlBcWlDLHFCQUFBVixhQUVBM3JDLFNBQUFjLEtBQUFrUixNQUFBQyxPQUFBLFVBQ0FuSCxVQUFBOUksUUFDQTZrQyxnQkFBQWgxQixpQkFHQXpDLFVBQUFsRyxVQUlBdWlDLGVBQUE5OEIsU0FBQSxxQkFBQSxXQUNBN0QsVUFBQUssTUFBQSwwQkFDQTA3QixnQkFBQXgwQixZQUNBbkMsZ0JBQUFsRCxXQUNBeEUsTUFBQXlnQyxxQkFDQTc1QixVQUFBdVMsY0FDQXZTLFVBQUF3RSxVQUVBLEdBRUF4RSxVQUFBbEcsV0FNQWhFLEdBQUErbkMsV0FBQSxTQUFBOXhDLE1BQ0EyUCxVQUFBblgsSUFBQSxZQUFBd0gsTUFDQTZFLFNBQUFjLEtBQUFrUixNQUFBQyxPQUFBLFlBR0F3NUIsZUFBQTk4QixTQUFBLFNBQUF4VCxLQUFBLFdBQ0EsR0FBQTJQLFVBQUFLLE1BQUEsWUFBQWhRLE1BQUEsQ0FDQSxJQUFBd3dDLFlBQUE5RSxnQkFBQXYwQixXQUNBcEMsZ0JBQUFsRCxXQUNBeEUsTUFBQXlnQyxxQkFDQTc1QixVQUFBdVMsY0FDQXZTLFVBQUF3RSxTQUVBelksTUFFQXd3QyxjQUNBQSxZQUFBdHlDLE9BQ0FrUyxhQUFBeE8sS0FDQW1ULGdCQUFBbkUsY0FDQXZELE1BQ0FtakMsWUFBQXpoQyxLQUNBaS9CLGFBQUF6NUIsYUFDQSxXQUdBTixVQUFBaEosSUFBQXVsQyxZQUFBemhDLE1BQ0FrRixVQUFBbEcsU0FHQXFqQyxpQkFBQVosYUFFQTNyQyxTQUFBYyxLQUFBa1IsTUFBQUMsT0FBQSxVQUNBbkgsVUFBQTlJLFFBQ0E2a0MsZ0JBQUFoMUIsaUJBR0F6QyxVQUFBbEcsVUFJQXVpQyxlQUFBOThCLFNBQUEsYUFBQXhULEtBQUEsV0FDQTJQLFVBQUFLLE1BQUEsWUFBQWhRLFFBQ0EwckMsZ0JBQUFsMEIsU0FDQXpDLGdCQUFBbEQsV0FDQXhFLE1BQUF5Z0MscUJBQ0E3NUIsVUFBQXVTLGNBQ0F2UyxVQUFBd0UsVUFHQXhFLFVBQUFsRyxXQUtBaEUsR0FBQWdvQyxXQUFBLFdBQ0FwaUMsVUFBQW5YLElBQUEsbUJBQ0FxTSxTQUFBYyxLQUFBa1IsTUFBQUMsT0FBQSxZQUNBdzVCLGVBQUE5OEIsU0FBQSxlQUFBLFdBQ0EsR0FBQTdELFVBQUFLLE1BQUEsbUJBQUEsQ0FDQSxJQUFBd2dDLFlBQUE5RSxnQkFBQWowQixpQkFDQTFDLGdCQUFBbEQsV0FDQXhFLE1BQUF5Z0MscUJBQ0E3NUIsVUFBQXVTLGNBQ0F2UyxVQUFBd0UsVUFHQSszQixjQUNBQSxZQUFBdHlDLE9BQ0FrUyxhQUFBeE8sS0FDQW1ULGdCQUFBbkUsY0FDQXZELE1BQ0FtakMsWUFBQXpoQyxLQUNBaS9CLGFBQUF6NUIsYUFDQSxXQUdBTixVQUFBaEosSUFBQXVsQyxZQUFBemhDLE1BQ0FrRixVQUFBbEcsVUFyakJBLFNBQUF5aUMsWUFBQTEvQixTQUNBLElBQUFraEMsWUFBQWw5QixnQkFBQWxCLFlBQ0E0OEIsWUFBQXpoQyxNQUVBLElBQUErQixRQUFBLENBRUEsSUFBQTYvQixlQUFBM0MsYUFBQXo1QixhQUNBbzhCLGVBQUExbEMsSUFBQXVsQyxZQUFBemhDLE1BQ0E0aEMsZUFBQUMsWUFHQSxJQUFBMzBCLGtCQUFBakgsZUFBQWlILGtCQUNBNU8sTUFDQTRHLFVBQ0F1OEIsWUFBQXpoQyxNQUVBa04sa0JBQUF6akIsSUFBQWc0QyxZQUFBemhDLEtBQUFxRyxVQUNBNjRCLGlCQUFBaGpDLElBQUFnUixrQkFBQVAsWUFLQXMyQixZQUFBeCtCLFNBQUEsbUJBQUEsU0FBQWhTLEdBQ0F5YSxrQkFBQUgsT0FBQSxDQUNBM2EsRUFBQXF2QyxZQUFBemhDLEtBQUE1TixJQUNBd00sRUFBQTZpQyxZQUFBemhDLEtBQUFwQixRQUdBcWtDLFlBQUF4K0IsU0FBQSxnQkFBQSxTQUFBaFMsR0FDQXlhLGtCQUFBSCxPQUFBLENBQ0EzYSxFQUFBcXZDLFlBQUF6aEMsS0FBQTVOLElBQ0F3TSxFQUFBNmlDLFlBQUF6aEMsS0FBQXBCLFFBT0EsSUFBQTRELFNBQUF3RCxnQkFBQXhELFdBRUF5Z0MsWUFBQXgrQixTQUFBLG9CQUFBLFNBQUFoUyxHQUNBK1AsU0FBQXRHLElBQ0F6SixFQUFBaWEsT0FBQStLLGlCQUdBd3JCLFlBQUF4K0IsU0FBQSxrQkFBQSxTQUFBaFMsR0FFQTRPLGFBQUF4TyxLQUNBbVQsZ0JBQUFuRSxjQUNBdkQsTUFDQW1qQyxZQUFBemhDLEtBQ0FpL0IsYUFBQXo1QixhQUNBLE9BQ0FoRCxTQUFBdEcsSUFBQXpKLEVBQUFpYSxPQUFBK0ssbUJBT0F3ckIsWUFBQXgrQixTQUFBLGtCQUFBLFdBQ0FnOUIsWUFBQXpoQyxLQUFBcUcsT0FBQTZHLGtCQUFBRCxlQUlBZzJCLFlBQUF4K0IsU0FBQSxRQUFBLFdBQ0FnOUIsWUFBQXpoQyxLQUFBNmhDLFlBQ0EzOEIsVUFBQWxHLE9BQ0FrRSxjQUFBelosSUFBQWc0QyxZQUFBemhDLE1BQ0FoRixHQUFBOG1DLGlCQUNBLElBQUFwNEIsTUFDQSxJQUFBeEksaUJBQUFoVyxNQUFBdU4sV0FDQXpOLEVBQ0FrVyxpQkFBQWhXLE1BQUF1TixNQUVBNFUsUUFBQUUsYUFBQSxDQUNBakMsS0FBQXJGLGVBQUE0RSxZQUFBNDJCLFlBQUF6aEMsS0FBQXFHLFNBQUFxRCxPQUNBdkksS0FBQUQsaUJBQUFoVyxNQUFBaVcsT0FFQW5HLEdBQUFzUyxVQUFBRCxRQUFBSSxlQUNBelMsR0FBQW1rQyxXQUFBLEVBRUFELGlCQUFBcjhCLFlBQ0FxQyxVQUFBaEosSUFBQWdSLGtCQUFBUCxZQUNBekgsVUFBQWxHLFNBb2VBa2tDLENBQUF6QixhQUVBM3JDLFNBQUFjLEtBQUFrUixNQUFBQyxPQUFBLFVBQ0FuSCxVQUFBOUksUUFDQTZrQyxnQkFBQWgxQixpQkFHQXpDLFVBQUFsRyxVQUlBdWlDLGVBQUE5OEIsU0FBQSxtQkFBQSxXQUNBN0QsVUFBQUssTUFBQSxxQkFDQTA3QixnQkFBQTV6QixlQUNBL0MsZ0JBQUFsRCxXQUNBeEUsTUFBQXlnQyxxQkFDQTc1QixVQUFBdVMsY0FDQXZTLFVBQUF3RSxVQUdBeEUsVUFBQWxHLFdBTUFoRSxHQUFBbW9DLGVBQUEsV0FDQXZpQyxVQUFBblgsSUFBQSxtQkFDQXFNLFNBQUFjLEtBQUFrUixNQUFBQyxPQUFBLFlBR0F3NUIsZUFBQTk4QixTQUFBLHFCQUFBLFdBQ0EsR0FBQTdELFVBQUFLLE1BQUEsbUJBQUEsQ0FDQSxJQUFBd2dDLFlBQUE5RSxnQkFBQTMwQixjQUNBaEMsZ0JBQUFsRCxXQUNBeEUsTUFBQXlnQyxxQkFDQTc1QixVQUFBdVMsY0FDQXZTLFVBQUF3RSxVQUVBLEdBQ0EsR0FFQSszQixjQUNBQSxZQUFBdHlDLE9BQ0FrUyxhQUFBeE8sS0FDQW1ULGdCQUFBbkUsY0FDQXZELE1BQ0FtakMsWUFBQTNoQyxRQUNBbS9CLGFBQUF6NUIsYUFDQSxXQUdBTixVQUFBaEosSUFBQXVsQyxZQUFBM2hDLFdBRUF5aUMsc0JBQUFkLGFBQ0EzckMsU0FBQWMsS0FBQWtSLE1BQUFDLE9BQUEsVUFDQW5ILFVBQUE5SSxRQUNBNmtDLGdCQUFBaDFCLGlCQUdBekMsVUFBQWxHLFVBSUF1aUMsZUFBQTk4QixTQUFBLHFCQUFBLFdBQ0E3RCxVQUFBSyxNQUFBLHFCQUNBMDdCLGdCQUFBeDBCLFlBQ0FuQyxnQkFBQWxELFdBQ0F4RSxNQUFBeWdDLHFCQUNBNzVCLFVBQUF1UyxjQUNBdlMsVUFBQXdFLFVBRUEsR0FFQXhFLFVBQUFsRyxXQUtBaEUsR0FBQW9vQyxXQUFBLFdBQ0F4aUMsVUFBQW5YLElBQUEsZUFDQXFNLFNBQUFjLEtBQUFrUixNQUFBQyxPQUFBLFlBRUF3NUIsZUFBQTk4QixTQUFBLG9CQUFBLFdBQ0EsR0FBQTdELFVBQUFLLE1BQUEsZUFBQSxDQUNBLElBQUF3Z0MsWUFBQTlFLGdCQUFBajJCLFlBQ0EsRUFDQVYsZ0JBQUFsRCxXQUNBeEUsTUFBQXlnQyxxQkFDQTc1QixVQUFBdVMsY0FDQXZTLFVBQUF3RSxVQUlBLEdBQUErM0IsWUFBQXR5QyxNQUNBK1YsVUFBQWhKLElBQUF1bEMsWUFBQTlnQyxPQUdBVSxhQUFBeE8sS0FDQW1ULGdCQUFBbkUsY0FDQXZELE1BQ0FtakMsWUFBQTlnQyxNQUNBcytCLGFBQUF6NUIsYUFDQSxlQUdBLENBR0EsSUFBQThELFVBQUFxekIsZ0JBQUF0ekIsa0JBRUFDLFVBQUFwTixJQUFBdWxDLFlBQUE5Z0MsT0FHQSxJQUFBMEYsT0FBQW83QixZQUFBOWdDLE1BQUEwRixTQUNBZzlCLFVBQUEsQ0FDQWhoQyxTQUFBLENBQ0FqUSxFQUFBaVUsT0FBQSxHQUFBLEdBQ0F6SCxFQUFBeUgsT0FBQSxHQUFBLElBRUFsUSxNQUFBMEYsS0FBQTJMLElBQUFuQixPQUFBLEdBQUFBLE9BQUEsSUFBQSxJQUVBaTlCLFFBQUEzRyxnQkFBQTN6QixXQUFBcTZCLFdBQ0EvNUIsVUFBQXBOLElBQUFvbkMsU0FFQWQsaUJBQUFsNUIsV0FFQXhULFNBQUFjLEtBQUFrUixNQUFBQyxPQUFBLFVBQ0FuSCxVQUFBOUksUUFDQTZrQyxnQkFBQWgxQixlQUVBekMsVUFBQWxHLFdBSUF1aUMsZUFBQTk4QixTQUFBLHdCQUFBLFdBQ0E3RCxVQUFBSyxNQUFBLGlCQUNBMDdCLGdCQUFBeDFCLFVBQ0FuQixnQkFBQWxELFdBQ0F4RSxNQUFBeWdDLHFCQUNBNzVCLFVBQUF1UyxjQUNBdlMsVUFBQXdFLFVBRUEsRUFDQSxXQUVBeEUsVUFBQWxHLFdBS0FoRSxHQUFBdW9DLGdCQUFBLFNBQUFDLFVBQ0F0RSxpQkFBQXI4QixZQUNBSyxjQUFBcEwsUUFDQW9MLGNBQUF6WixJQUFBKzVDLFVBQ0FBLFNBQUFoL0IsS0FBQSxVQUdBeEosR0FBQXlvQyxjQUFBLFdBQ0E3aUMsVUFBQW5YLElBQUEsc0JBRUFxTSxTQUFBYyxLQUFBa1IsTUFBQUMsT0FBQSxZQUVBdzVCLGVBQUE5OEIsU0FBQSxzQkFBQSxXQUNBLEdBQUE3RCxVQUFBSyxNQUFBLHNCQUFBLENBQ0FqRyxHQUFBMG9DLGlCQUFBLEdBQ0EsSUFBQWpDLFlBQUE5RSxnQkFBQWoyQixZQUNBLEVBQ0FWLGdCQUFBbEQsV0FDQXhFLE1BQUF5Z0MscUJBQ0E3NUIsVUFBQXVTLGNBQ0F2UyxVQUFBd0UsVUFHQXhFLFVBQUFoSixJQUFBdWxDLFlBQUE5Z0MsT0FDQXVFLFVBQUFsRyxVQUlBdWlDLGVBQUE5OEIsU0FBQSxvQkFBQSxXQUNBLEdBQUE3RCxVQUFBSyxNQUFBLHNCQUFBLENBQ0FuTCxTQUFBYyxLQUFBa1IsTUFBQUMsT0FBQSxVQUNBbkgsVUFBQTlJLFFBR0EsSUFBQStQLGdCQUFBODBCLGdCQUFBLzBCLGdCQUNBNEMsZUFBQW15QixnQkFBQXZ5QixhQUNBbEYsVUFDQTJDLGlCQUVBODdCLG1CQUFBbjVCLGVBQUFyWSxJQUFBLFNBQUFDLEdBQ0EsT0FBQUEsRUFBQXZDLFNBR0FzVCxlQUFBM0osTUFBQWdSLGdCQUNBbmlCLFFBQUEwTCxRQUFBaUgsR0FBQW1LLFVBQUEsU0FBQXBELFNBQ0ExWixRQUFBMEwsUUFBQWdPLFFBQUFtSSxjQUFBLFNBQUFDLE9BQ0F3NUIsbUJBQUFsdkMsUUFBQTBWLE1BQUF0YSxTQUFBLElBQ0FzYSxNQUFBOVAsVUFBQSxPQUtBNkssVUFBQWxHLFVBR0F1aUMsZUFBQTk4QixTQUFBLHNCQUFBLFdBQ0E3RCxVQUFBSyxNQUFBLHdCQUNBMDdCLGdCQUFBeDFCLFVBQ0FuQixnQkFBQWxELFdBQ0F4RSxNQUFBeWdDLHFCQUNBNzVCLFVBQUF1UyxjQUNBdlMsVUFBQXdFLFVBRUEsRUFDQSxXQUVBeEUsVUFBQWxHLFdBS0FoRSxHQUFBMG9DLGdCQUFBLFNBQUFFLGFBQ0EsSUFBQTU1QixVQUFBMnlCLGdCQUFBNXlCLGlCQUFBN0UsV0FDQTArQixZQUNBemdDLGVBQUEzSixNQUFBd1EsV0FFQTdHLGVBQUFLLFFBRUFuYixRQUFBMEwsUUFBQWlXLFVBQUEsU0FBQTVYLEdBQ0FBLEVBQUFpSSxXQUFBdXBDLGVBSUE1b0MsR0FBQTZvQyxzQkFBQSxTQUFBbGpDLE9BQ0F1K0IsaUJBQUFyOEIsWUFDQWxDLE1BQUFtakMsU0FBQW5qQyxNQUFBbWpDLFdBQ0E1K0IsVUFBQWxHLFFBR0FoRSxHQUFBNEUsV0FBQSxXQUNBZ0IsVUFBQW5YLElBQUEsMEJBQ0FtVyxXQUFBKzhCLGdCQUFBLzhCLFdBQUF0QixNQUFBNEcsV0FDQXE4QixlQUFBOThCLFNBQUEsbUJBQUEsV0FDQTdELFVBQUFLLE1BQUEsMkJBQ0FyQixXQUNBb0csZ0JBQUFsRCxXQUNBeEUsTUFBQXlnQyxxQkFDQTc1QixVQUFBdVMsY0FDQXZTLFVBQUF3RSxVQUVBLEtBS0E2M0IsZUFBQTk4QixTQUFBLHVCQUFBLFdBQ0E3RCxVQUFBSyxNQUFBLDJCQUNBckIsV0FDQW9HLGdCQUFBbEQsV0FDQXhFLE1BQUF5Z0MscUJBQ0E3NUIsVUFBQXVTLGNBQ0F2UyxVQUFBd0UsVUFFQSxNQVFBbUUsT0FBQThPLElBQUEsYUFBQSxTQUFBbHFCLEVBQUFzeEMsZ0JBR0E1MUIsRUFBQSxtQkFBQTJFLE1BQUEsUUFHQSxJQUFBek0sT0FBQTA5QixlQUFBMTlCLFNBQ0EyOUIsU0FBQW5vQyxLQUFBb29DLEtBQ0Fwb0MsS0FBQXFvQyxJQUFBNzlCLE9BQUEsR0FBQUEsT0FBQSxHQUFBLEdBQ0F4SyxLQUFBcW9DLElBQUE3OUIsT0FBQSxHQUFBQSxPQUFBLEdBQUEsSUFHQXJMLEdBQUFtcEMsb0JBQUFILFNBQ0FocEMsR0FBQW9wQyxnQkFBQSxXQUNBLElBRUExNkIsTUFGQWpSLE1BQUF1QyxHQUFBcXBDLGlCQUFBNXJDLE1BSUFpUixNQUFBNDZCLFNBQUE3ckMsT0FBQXVyQyxTQUdBOWlDLGlCQUFBelgsSUFBQSxDQUNBZ1AsTUFBQWlSLE1BQ0F2SSxLQUFBbkcsR0FBQXFwQyxpQkFBQWxqQyxPQUdBbkcsR0FBQXdrQyxnQkFBQXQrQixpQkFBQWhXLE1BRUE4UCxHQUFBbWtDLFdBQUEsRUFDQW5rQyxHQUFBc1MsVUFBQUQsUUFBQUksZUFDQXMyQixlQUFBdDZCLFVBQ0F2RSxVQUFBbEcsT0FFQW1QLEVBQUEsbUJBQUEyRSxNQUFBLFNBR0EzRSxFQUFBLG1CQUFBclAsR0FBQSxnQkFBQSxTQUFBck0sR0FDQXN4QyxlQUFBdDZCLFVBQ0F2RSxVQUFBbEcsV0FJQWhFLEdBQUF1cEMsWUFBQSxTQUFBZixVQUNBLElBQUE3aUMsTUFBQTZpQyxVQUFBdGdDLGNBQUFoWSxNQUNBeVYsUUFDQXUrQixpQkFBQXI4QixZQUNBeEIsYUFBQXhPLEtBQ0FtVCxnQkFBQW5FLGNBQ0F2RCxNQUNBcUMsTUFDQUEsTUFBQTZqQyxZQUNBLFdBR0E3akMsTUFBQWxKLFNBQ0F5TixVQUFBbEcsT0FDQWhFLEdBQUE2bkMsa0JBQ0E3bkMsR0FBQThuQyxzQkFDQTUvQixjQUFBcEwsVUFJQWtELEdBQUE4bUMsZUFBQSxXQUNBLElBQUFuaEMsTUFBQXVDLGNBQUFoWSxNQUNBOFAsR0FBQXlwQyxnQkFBQSxDQUNBNTBDLEtBQUE4USxNQUFBOVEsT0FDQXF1QyxVQUFBLFNBQ0F0M0IsT0FBQWpHLE1BQUFpRyxTQUNBRSxLQUFBbkcsTUFBQW1HLE9BQ0FELFlBQUFsRyxNQUFBa0csZUFFQTdMLEdBQUEwcEMsaUJBQUEsR0FHQTFwQyxHQUFBMnBDLFdBQUEsQ0FDQSxDQUNBMXpDLEtBQUEsU0FDQXdILE1BQUEsVUFFQSxDQUNBeEgsS0FBQSxPQUNBd0gsTUFBQSxTQUlBdUMsR0FBQTRwQyxlQUFBLENBQ0EsQ0FDQTN6QyxLQUFBLGFBQ0F3SCxNQUFBLFVBRUEsQ0FDQXhILEtBQUEsT0FDQXdILE1BQUEsU0FJQXVDLEdBQUE2cEMsV0FBQSxDQUNBLENBQ0E1ekMsS0FBQSxTQUNBd0gsTUFBQSxVQUVBLENBQ0F4SCxLQUFBLE9BQ0F3SCxNQUFBLFFBRUEsQ0FDQXhILEtBQUEsU0FDQXdILE1BQUEsV0FJQXVDLEdBQUE4cEMsYUFBQSxDQUNBLFFBQ0EsVUFDQSxZQUNBLGtCQUNBLFFBQ0EsY0FDQSxVQUNBLFVBQ0EsVUFDQSxXQUNBLFdBQ0EsVUFDQSxnQkFDQSxlQUNBLGNBQ0EsVUFHQTlwQyxHQUFBNG5DLG1CQUFBLFdBQ0EsSUFBQWppQyxNQUFBdUMsY0FBQWhZLE1BQ0E4UCxHQUFBK3BDLG9CQUFBLENBQ0E3RyxVQUFBLFNBQ0F2bEMsS0FBQWdJLE1BQUFoSSxPQUNBd1EsU0FBQXhJLE1BQUF3SSxXQUNBNjdCLFVBQUFya0MsTUFBQXFrQyxZQUNBNTdCLFdBQUF6SSxNQUFBeUksYUFDQXhDLE9BQUFqRyxNQUFBaUcsU0FDQUUsS0FBQW5HLE1BQUFtRyxPQUNBRCxZQUFBbEcsTUFBQWtHLGVBRUE3TCxHQUFBaXFDLGdCQUFBLEVBQ0FwM0IsT0FBQW9QLFVBR0FqaUIsR0FBQWtxQyxlQUFBLFNBQUF0NkIsS0FBQW5TLE9BQ0EsSUFBQWtJLE1BQUF1QyxjQUFBaFksTUFDQXlWLE1BQUFpSyxNQUFBblMsT0FDQXlNLFVBQUFsRyxRQUdBaEUsR0FBQW1xQyxpQkFBQSxTQUFBL3hDLEtBQ0EsSUFBQXVOLE1BQUF1QyxjQUFBaFksTUF1QkF5VixNQUFBa0csWUFBQXpULEtBQ0E4UixVQUFBbEcsUUFHQSxJQUFBb21DLGlCQUFBcC9CLGdCQUFBdkQsdUJBRUF6SCxHQUFBcXFDLGlCQUFBLENBQ0FySyxTQUFBLFNBQUEwRCxJQUFBdG1CLE1BQUE0TSxRQUNBLElBQUFya0IsTUFBQXVDLGNBQUFoWSxNQUNBLFNBQUE4UCxHQUFBeXBDLGdCQUFBdkcsVUFDQXY5QixNQUFBbUcsS0FBQXNSLE9BQ0EsV0FBQXBkLEdBQUF5cEMsZ0JBQUF2RyxXQUNBdjlCLE1BQUFpRyxPQUFBd1IsT0FFQWxULFVBQUFsRyxRQUdBc21DLE9BQUEsU0FBQTVHLElBQUF0bUIsTUFBQTRNLFFBQ0EsSUFBQXJrQixNQUFBdUMsY0FBQWhZLE1BQ0ErVyxNQUFBLENBQ0EyRSxPQUFBakcsTUFBQWlHLFNBQ0FFLEtBQUFuRyxNQUFBbUcsT0FDQUQsWUFBQWxHLE1BQUFrRyxlQUVBdStCLGlCQUFBbHBDLElBQUErRixRQUVBc2pDLFFBQUEsU0FBQTdHLElBQUF0bUIsTUFBQTRNLFFBQ0EsSUFBQXJrQixNQUFBdUMsY0FBQWhZLE1BQ0ErVyxNQUFBLENBQ0EyRSxPQUFBakcsTUFBQWlHLFNBQ0FFLEtBQUFuRyxNQUFBbUcsT0FDQUQsWUFBQWxHLE1BQUFrRyxlQUVBeEYsYUFBQXhPLEtBQ0FtVCxnQkFBQW5FLGNBQ0F2RCxNQUNBcUMsTUFDQXMrQixhQUFBejVCLGFBQ0EsYUFDQTQvQixpQkFBQWxwQyxJQUFBK0YsU0FJQW1qQyxpQkFBQXAvQixnQkFBQXZELHlCQUlBekgsR0FBQXdxQyxxQkFBQSxDQUNBeEssU0FBQSxTQUFBMEQsSUFBQXRtQixNQUFBNE0sUUFDQSxJQUFBcmtCLE1BQUF1QyxjQUFBaFksTUFDQSxHQUFBLFNBQUE4UCxHQUFBK3BDLG9CQUFBN0csVUFDQXY5QixNQUFBbUcsS0FBQXNSLFlBQ0EsR0FBQSxXQUFBcGQsR0FBQStwQyxvQkFBQTdHLFVBQUEsQ0FDQSxJQUFBd0UsUUFBQS9oQyxNQUFBNmpDLFlBQUF2NkIsS0FBQSxRQUNBeTRCLFFBQUE1N0IsS0FBQXNSLE9BRUFsVCxVQUFBbEcsUUFHQXNtQyxPQUFBLFNBQUE1RyxJQUFBdG1CLE1BQUE0TSxRQUNBLElBQUFya0IsTUFBQXVDLGNBQUFoWSxNQUNBK1csTUFBQSxDQUNBMkUsT0FBQWpHLE1BQUFpRyxTQUNBRSxLQUFBbkcsTUFBQW1HLE9BQ0FELFlBQUFsRyxNQUFBa0csZUFFQXUrQixpQkFBQWxwQyxJQUFBK0YsUUFFQXNqQyxRQUFBLFNBQUE3RyxJQUFBdG1CLE1BQUE0TSxRQUNBLElBQUFya0IsTUFBQXVDLGNBQUFoWSxNQUNBK1csTUFBQSxDQUNBMkUsT0FBQWpHLE1BQUFpRyxTQUNBRSxLQUFBbkcsTUFBQW1HLE9BQ0FELFlBQUFsRyxNQUFBa0csZUFFQXhGLGFBQUF4TyxLQUNBbVQsZ0JBQUFuRSxjQUNBdkQsTUFDQXFDLE1BQ0FzK0IsYUFBQXo1QixhQUNBLGFBQ0E0L0IsaUJBQUFscEMsSUFBQStGLFNBSUFtakMsaUJBQUFwL0IsZ0JBQUF2RCx5QkFJQXpILEdBQUE2bkMsZ0JBQUEsV0FDQTduQyxHQUFBMHBDLGlCQUFBLEdBR0ExcEMsR0FBQThuQyxvQkFBQSxXQUNBLElBQUFucUMsS0FBQXVLLGNBQUFoWSxNQUNBLEdBQUF5TixNQUFBLFNBQUFBLEtBQUE5SSxPQUFBLENBQ0EsSUFBQXdWLE1BQUExTSxLQUFBNnJDLFlBQ0E5QixRQUFBcjlCLE1BQUE0RSxLQUFBLFFBQUEsR0FDQXk0QixRQUFBOTdCLE9BQUEsTUFDQTFCLFVBQUFsRyxPQUNBa2dDLGlCQUFBcjhCLFlBRUE3SCxHQUFBaXFDLGdCQUFBLEdBTUFqcUMsR0FBQXlxQyxpQkFBQSxFQUNBenFDLEdBQUEwcUMsU0FBQSxXQUNBMXFDLEdBQUF5cUMsZ0JBQUF2Z0MsVUFBQTZCLFlBQ0EvTCxHQUFBeXFDLGdCQUNBM3ZDLFNBQUFjLEtBQUFrUixNQUFBQyxPQUFBLFVBQ0FqUyxTQUFBYyxLQUFBa1IsTUFBQUMsT0FBQSxPQUNBN0MsVUFBQTZCLFdBQUEvTCxHQUFBeXFDLGlCQUNBdmdDLFVBQUFsRyxRQUtBaEUsR0FBQTJxQyxXQUFBLFNBQUExMEMsTUFFQWl1QyxpQkFBQXI4QixZQUNBLElBQUE1UixLQUFBb1EsYUFBQU0sT0FBQU4sYUFBQUksUUFLQXpHLEdBQUE0cUMsY0FBQSxXQUNBLElBQUFydkMsUUFBQStILE1BQUE5SCxZQUNBQyxLQUFBWCxTQUFBQyxjQUFBLEtBQ0FVLEtBQUFDLFNBQUEsa0JBQUEzQixLQUFBQyxNQUNBeUIsS0FBQUUsS0FBQUosUUFDQVQsU0FBQWMsS0FBQUMsWUFBQUosTUFDQUEsS0FBQUssUUFDQWhCLFNBQUFjLEtBQUFHLFlBQUFOLE9BR0F1RSxHQUFBcXNCLGFBQUEsV0FDQSxJQUFBd2UsS0FBQXZuQyxNQUFBd25DLFNBQ0FseUMsS0FBQSxJQUFBNHpCLEtBQUEsQ0FBQXFlLE1BQUEsQ0FDQTUwQyxLQUFBLHFCQUVBd0YsS0FBQVgsU0FBQUMsY0FBQSxLQUNBVSxLQUFBRSxLQUFBczFCLElBQUFDLGdCQUFBdDRCLE1BQ0E2QyxLQUFBQyxTQUFBLGlCQUFBM0IsS0FBQUMsTUFDQWMsU0FBQWMsS0FBQUMsWUFBQUosTUFDQUEsS0FBQUssUUFDQWhCLFNBQUFjLEtBQUFHLFlBQUFOLE9BR0F1RSxHQUFBak4sYUFBQSxXQUNBbXhDLGlCQUFBcjhCLFlBQ0EsSUFBQWdqQyxLQUFBdm5DLE1BQUF3bkMsU0FJQXYwQyxXQUNBeEQsYUFBQWd3QyxTQUFBMXJDLElBQUEsQ0FDQWtNLFdBQUFzbkMsS0FDQXhHLFlBQUFuK0IsaUJBQUFoVyxNQUNBcTBDLFVBQUE1QyxnQkFBQWwyQixhQUNBaEQsYUFBQXpJLEdBQUF5SSxhQUFBSywyQkFFQTFVLEtBQUEsU0FBQUMsTUFDQTVFLGFBQUE4SCxRQUFBbEQsS0FBQXJELEtBQUF3RyxTQUVBakIsV0FDQTFELG9CQUFBdkQsb0JBQUFZLElBQUEsb0JBQ0FrRSxLQUFBLFNBQUFDLE1BQ0EvRSxvQkFBQWIsSUFBQSxZQUFBNEYsS0FBQXJELEtBQUFBLFFBRUF1RCxNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLE9BR0FsRCxNQUFBLFNBQUFrRCxHQUNBcEYsUUFBQUMsSUFBQW1GLE1BTUF1SSxHQUFBNEssWUFBQSxTQUFBRixPQUNBdzVCLGlCQUFBcjhCLFlBQ0FvOEIsYUFBQXI1QixZQUFBRixRQUVBMUssR0FBQTJLLFlBQUEsU0FBQUQsT0FDQXU1QixhQUFBdDVCLFlBQUFELFFBR0ExSyxHQUFBK3FDLFdBQUEsV0FDQTlHLGFBQUE3NUIsZ0JBQ0FwSyxHQUFBbUssVUFBQTg1QixhQUFBMTVCLGdCQUdBdkssR0FBQWdyQyxZQUFBLFNBQUFoc0MsR0FDQWdCLEdBQUFpckMsY0FBQWpzQyxFQUNBaWxDLGFBQUF4NUIsV0FBQXpMLElBSUFnQixHQUFBZ3JDLFlBQUEsR0FFQWhyQyxHQUFBa3JDLGlCQUFBLFNBQUF2bEMsT0FDQUEsTUFBQXRHLFNBQ0E4SSxlQUFBdFEsS0FBQThOLE9BQ0F3QyxlQUFBRSxLQUFBMUMsTUFBQTlRLFNBR0FtTCxHQUFBbXJDLGNBQUEsU0FBQTdpQyxXQUNBLE1BQUEsUUFBQTlQLEtBQUE4UCxXQUNBLFNBRUEsV0FBQTlQLEtBQUE4UCxXQUNBLFNBRUEsV0FBQTlQLEtBQUE4UCxXQUNBLFVBRUEsUUFBQTlQLEtBQUE4UCxXQUNBLE9BRUEsYUFBQTlQLEtBQUE4UCxXQUNBLE9BRUEsWUFBQTlQLEtBQUE4UCxXQUNBLGNBREEsR0FLQXRJLEdBQUFvckMsY0FBQSxXQUNBLElBQUE1N0IsZUFBQXJILGVBQUFqWSxNQUNBbUMsUUFBQUMsSUFBQWtkLGdCQUNBMDBCLGlCQUFBcjhCLFlBQ0F4YSxRQUFBMEwsUUFBQXlXLGVBQUEsU0FBQTdKLE9BQ0FBLE1BQUFtakMsU0FBQSxLQUVBNStCLFVBQUFsRyxRQUdBaEUsR0FBQXFyQyxnQkFBQSxXQUNBLElBQUE3N0IsZUFBQXJILGVBQUFqWSxNQUNBZzBDLGlCQUFBcjhCLFlBQ0F4YSxRQUFBMEwsUUFBQXlXLGVBQUEsU0FBQTdKLE9BQ0FVLGFBQUF4TyxLQUNBbVQsZ0JBQUFuRSxjQUNBdkQsTUFDQXFDLE1BQ0FBLE1BQUE2akMsWUFDQSxXQUdBN2pDLE1BQUFsSixXQUVBeU4sVUFBQWxHLFFBR0FoRSxHQUFBc3JDLGFBQUEsU0FBQUMsV0FDQXA0QixFQUFBLGlCQUFBMkUsTUFBQSxTQUdBOVgsR0FBQTJJLGtCQUFBLFNBQUF0RSxRQUFBdUUsU0FBQTNTLE1BQ0ErSixHQUFBeUksYUFBQUUsa0JBQUF0RSxRQUFBdUUsU0FBQTNTLE1BQ0FrZCxFQUFBLGlCQUFBMkUsTUFBQSxTQUdBakYsT0FBQThPLElBQUEsbUJBQUEsU0FBQWxxQixFQUFBekcsTUFDQXFCLFFBQUFDLElBQUEsdUJBQUF0QixRQXRvRUFnUCxHQUFBd3JDLGVBQUEsRUFFQXhyQyxHQUFBMmdCLFVBQUFyeEIsb0JBQUFZLElBQUEsYUFFQThQLEdBQUF5ckMsV0FBQSxTQUFBenFCLE1BQ0FoaEIsR0FBQTByQyxhQUFBMXFCLEtBQUEzcEIsSUFDQXlyQyxZQUFBOWhCLE1BQ0FoaEIsR0FBQXdyQyxlQUFBLEdBRUF4ckMsR0FBQXlyQyxXQUFBbjhDLG9CQUFBWSxJQUFBLGlCQVdBOFAsR0FBQTJyQyxtQkFBQSxXQUNBN3dDLFNBQUFjLEtBQUFrUixNQUFBQyxPQUFBLFVBQ0FvRyxFQUFBLG9CQUFBMkUsTUFBQSxRQUNBMW9CLE9BQUFzTixHQUFBLGdCQWhJQSxHQ0FBLFdBQ0FyUCxRQUFBQyxPQUFBLE9BQUFzK0MsVUFBQSxZQUVBLFNBQUEzb0MsV0FBQTFNLFdBQUF1YyxTQUFBdmpCLFFBQUFFLGNBQ0EsTUFBQSxDQUNBbzhDLFNBQUEsSUFDQUMsTUFBQSxDQUNBQyxRQUFBLEtBRUF0d0MsS0FBQSxTQUFBb1gsT0FBQW01QixLQUFBQyxPQUNBMThDLFFBQUFxUSxXQUFBaVQsT0FBQWs1QixRQUFBQyxLQUFBLElBQ0FsNUIsU0FBQSxXQUNBRCxPQUFBb1AsZUFaQSxHQ0FBLFdBQ0E1MEIsUUFBQUMsT0FBQSxPQUFBcytDLFVBQUEsYUFFQSxTQUFBM29DLFdBQUExTSxXQUFBdWMsU0FBQXZqQixRQUFBRSxjQUNBLE1BQUEsQ0FDQW84QyxTQUFBLElBQ0E3OEMsWUFBQSw0QkFDQTg4QyxNQUFBLENBQ0E5bUIsUUFBQSxJQUNBa25CLFFBQUEsSUFDQTU3QyxPQUFBLElBQ0E2N0MsV0FBQSxJQUNBQyxVQUFBLEtBRUEzd0MsS0FBQSxTQUFBb1gsT0FBQW01QixLQUFBQyxPQUNBLElBQUFJLFlBQUEsR0FDQW52QyxhQUFBM04sUUFBQTJOLGFBQ0EyVixPQUFBemQsTUFBQSxHQUNBeWQsT0FBQTRPLFdBQUEsY0FDQTVPLE9BQUF5NUIsY0FBQSxHQUNBejVCLE9BQUEwNUIsZUFBQSxLQUNBMTVCLE9BQUE2TyxhQUFBLEVBRUE3TyxPQUFBMjVCLFdBQUEsU0FBQWhsQixRQUNBLElBQUEzeUIsS0FBQTJ5QixPQUFBM3lCLEtBQ0F3M0MsWUFBQXgwQyxLQUFBMnZCLFFBQ0EzVSxPQUFBMDVCLGVBQ0FoMkMsV0FDQXV4QixjQUFBTixPQUFBbndCLEtBQ0FqRCxLQUFBLFNBQUFDLE1BQ0F3ZSxPQUFBMDVCLGVBQUEva0IsT0FDQTNVLE9BQUF5NUIsY0FBQTlrQixPQUFBM3lCLEtBQ0FnZSxPQUFBbVMsUUFBQTN3QixLQUFBckQsS0FBQWcwQixRQUNBblMsT0FBQXpkLE1BQUFmLEtBQUFyRCxLQUFBb0UsTUFDQXlkLE9BQUExYSxZQUFBOUQsS0FBQXJELEtBQUFnM0IsWUFDQW5WLE9BQUE0TyxXQUFBNXNCLEtBQ0EsZUFBQWdlLE9BQUE0TyxXQUNBNU8sT0FBQTZPLGFBQUEsRUFFQTdPLE9BQUE2TyxhQUFBLElBR0FudEIsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixNQUlBb2IsT0FBQTQ1QixXQUFBLFNBQUE3ekMsS0FBQVQsYUFDQVMsS0FBQVQsWUFBQUEsWUFDQThLLFdBQUErQyxXQUFBLFVBQUEsR0FDQS9DLFdBQUErQyxXQUFBLHNCQUFBcE4sT0FHQWlhLE9BQUFvc0IsS0FBQSxXQUNBb04sWUFBQXJXLE1BRUEsSUFBQTBXLFNBQUFMLFlBQUFBLFlBQUF0MUMsT0FBQSxHQUNBa2dDLFFBQUF5VixTQUFBLGdCQUFBLGVBQ0FDLE1BQUFELFNBQUFBLFNBQUFyMUMsSUFBQTZGLGFBQUFoTixNQUFBbUgsSUFFQWQsV0FBQTBnQyxTQUFBMFYsT0FDQXY0QyxLQUFBLFNBQUFDLE1BQ0F3ZSxPQUFBMDVCLGVBQUFHLFVBQUEsS0FDQTc1QixPQUFBeTVCLGNBQUFJLFNBQUFBLFNBQUE3M0MsS0FBQSxLQUNBZ2UsT0FBQW1TLFFBQUEwbkIsU0FDQXI0QyxLQUFBckQsS0FBQWcwQixRQUNBM3dCLEtBQUFyRCxLQUFBQSxLQUFBOHZCLFlBQ0FqTyxPQUFBemQsTUFBQXMzQyxTQUFBcjRDLEtBQUFyRCxLQUFBb0UsTUFBQSxHQUNBeWQsT0FBQTRPLFdBQUFpckIsU0FBQUEsU0FBQTczQyxLQUFBLGNBRUEsZUFBQWdlLE9BQUE0TyxXQUNBNU8sT0FBQTZPLGFBQUEsRUFFQTdPLE9BQUE2TyxhQUFBLElBR0FudEIsTUFBQSxTQUFBa0QsR0FDQXBGLFFBQUFDLElBQUFtRixNQUlBb2IsT0FBQWtkLE9BQUEsU0FBQXZJLE9BQUFsM0IsUUFDQSxHQUFBazNCLE9BQUEsQ0FLQSxJQUFBNTJCLFFBQUEsQ0FDQXNHLFFBQUEyYixPQUFBczVCLFdBQUE5MEMsSUFDQUMsU0FBQWhILE9BQUErMUIsWUFBQWh2QixJQUNBUCxPQUFBMHdCLE9BQUFud0IsS0FHQWQsV0FDQSt2QixXQUFBMTFCLFNBQ0F3RCxLQUFBLFNBQUFDLE1BRUF3ZSxPQUFBdTVCLFlBQ0F2NUIsT0FBQXU1QixVQUFBdjVCLE9BQUF1NUIsVUFBQXh5QyxPQUNBLFNBQUF4QyxHQUFBLE9BQUFBLEVBQUFDLE1BQUF3YixPQUFBczVCLFdBQUE5MEMsT0FHQTVILGFBQUE4SCxRQUFBLDJCQUNBNGIsRUFBQSxXQUFBMkUsTUFBQSxVQUVBdmpCLE1BQUEsU0FBQWtELEdBQ0FwRixRQUFBQyxJQUFBbUYsV0ExR0EsR0NDQXBLLFFBQUFDLE9BQUEsT0FBQXMrQyxVQUFBLGVBQUEsU0FBQTk0QixVQUNBLE9BQUEsU0FBQWc1QixNQUFBYyxTQUFBQyxRQUNBRCxTQUFBRSxhQUFBLENBQ0F4OEMsT0FBQXc3QyxNQUFBZSxPQUFBRSxTQUNBQyxPQUFBLFdBQ0FsNkIsU0FBQSxXQUNBODVCLFNBQUFLLFFBQUEsVUFDQSxTQVFBNS9DLFFBQUFDLE9BQUEsT0FBQXMrQyxVQUFBLFNBQUEsV0FDQSxNQUFBLENBQ0Fud0MsS0FBQSxTQUFBcXdDLE1BQUFwMUIsUUFBQXUxQixPQUNBdjFCLFFBQUFuVyxLQUFBLFFBQUEsV0FDQTByQyxNQUFBamIsS0FBQWliLE1BQUFpQixRQUNBakIsTUFBQWtCLEtBQUEsTUFBQWxCLE1BQUFpQixjQ3JCQSxXQUNBNy9DLFFBQUFDLE9BQUEsT0FBQXMrQyxVQUFBLGlCQUVBLFNBQ0Ezb0MsV0FDQTFNLFdBQ0F1YyxTQUNBdmpCLFFBQ0FFLGNBRUEsTUFBQSxDQUNBbzhDLFNBQUEsSUFDQTc4QyxZQUFBLGdDQUNBODhDLE1BQUEsQ0FDQXNCLGFBQUEsSUFDQUMsaUJBQUEsSUFDQUMsYUFBQSxJQUNBN2tDLGFBQUEsS0FFQWhOLEtBQUEsU0FBQW9YLE9BQUFtNUIsS0FBQUMsT0E0QkFwNUIsT0FBQTZHLGFBQUEsR0FDQTdHLE9BQUEwNkIsV0FBQSxFQUNBaDNDLFdBQ0FwRCxtQkFDQWlCLEtBQUEsU0FBQUMsTUFDQXdlLE9BQUE2RyxhQUFBcmxCLEtBQUFyRCxLQUFBMmpCLEtBQ0E5QixPQUFBdzZCLGlCQUFBaGdELFFBQUFxSixLQUFBbWMsT0FBQTZHLGFBQUEsTUFFQW5sQixNQUFBLFNBQUFrRCxNQUdBb2IsT0FBQTI2QixRQUFBLEdBQ0FqM0MsV0FDQW5ELHdCQUNBZ0IsS0FBQSxTQUFBQyxNQUNBd2UsT0FBQTI2QixRQUFBbjVDLEtBQUFyRCxLQUFBMmpCLE9BRUFwZ0IsTUFBQSxTQUFBa0QsTUFHQW9iLE9BQUE0NkIsY0FBQSxHQUNBbDNDLFdBQ0FsRCxvQkFDQWUsS0FBQSxTQUFBQyxNQUNBd2UsT0FBQTQ2QixjQUFBcDVDLEtBQUFyRCxLQUFBMmpCLE9BRUFwZ0IsTUFBQSxTQUFBa0QsTUFFQW9iLE9BQUE2NkIscUJBQUEsU0FBQXB3QyxVQUNBMkYsV0FBQStDLFdBQUEsbUJBQUExSSxVQUNBakwsUUFBQUMsSUFBQWdMLFVBQ0F1VixPQUFBODZCLGVBQUFyd0MsVUFHQXVWLE9BQUErNkIsa0JBQUEsU0FBQWozQyxNQUNBa2MsT0FBQXc2QixpQkFBQTEyQyxNQUdBa2MsT0FBQWc3QixzQkFBQSxTQUFBejFDLEtBQ0F5YSxPQUFBdzZCLG1CQUdBaDdDLFFBQUFDLElBQUF1Z0IsT0FBQXk2QixjQUNBLEdBQUFsMUMsS0FDQXlhLE9BQUF3NkIsaUJBQUFoZ0QsUUFBQXFKLEtBQUFtYyxPQUFBNkcsYUFBQSxJQUNBN0csT0FBQTA2QixXQUFBbjFDLElBQUEsR0FDQSxHQUFBQSxLQUNBeWEsT0FBQXc2QixpQkFBQWhnRCxRQUFBcUosS0FBQW1jLE9BQUEyNkIsUUFBQSxJQUNBMzZCLE9BQUEwNkIsV0FBQW4xQyxJQUFBLElBRUF5YSxPQUFBdzZCLGlCQUFBaGdELFFBQUFxSixLQUFBbWMsT0FBQTQ2QixjQUFBLElBQ0E1NkIsT0FBQTA2QixXQUFBbjFDLElBQUEsS0FJQXlhLE9BQUFpN0IsZUFBQSxTQUFBenBDLFFBQUF1RSxTQUFBM1MsTUFDQWtkLEVBQUEsaUJBQUEyRSxNQUFBLFFBQ0FqRixPQUFBcEssYUFBQUUsa0JBQUF0RSxRQUFBdUUsU0FBQTNTLFdBeEdBLEdDQUEsV0FFQTVJLFFBQUFDLE9BQUEsT0FBQXNNLE9BQUEsa0JBRUEsV0FDQSxPQUFBLFNBQUFtMEMsTUFBQXpwQixnQkFDQSxPQUFBeXBCLE1BR0FBLE1BQUF6cEIsZUFGQSxLQVNBajNCLFFBQUFDLE9BQUEsT0FBQXNNLE9BQUEsV0FHQSxXQUNBLE9BQUEsU0FBQW0wQyxNQUFBQyxPQUNBLE9BQUFELE1BR0E3OUIsT0FBQTY5QixPQUFBMzlCLFFBQUE0OUIsT0FGQSxLQVNBM2dELFFBQUFDLE9BQUEsT0FBQXNNLE9BQUEsaUJBRUEsV0FDQSxPQUFBLFNBQUFtMEMsT0FDQSxHQUFBQSxNQUNBLE1BQUEsYUFBQXYxQyxLQUFBdTFDLE1BQUF0dUMsWUFDQXN1QyxNQUFBdHVDLFdBQUFOLFFBQUEsUUFBQSxRQUNBNHVDLE1BQUF6YyxhQXRDQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYXBwID0gYW5ndWxhci5tb2R1bGUoXCJhcHBcIiwgW1xyXG4gIFwidWkucm91dGVyXCIsXHJcbiAgXCJyb3V0ZXNNb2R1bGVcIixcclxuICBcIkxvY2FsU3RvcmFnZU1vZHVsZVwiLFxyXG4gIFwidWlHbWFwZ29vZ2xlLW1hcHNcIixcclxuICBcIm5nUHJvZ3Jlc3NcIixcclxuICBcInVpLW5vdGlmaWNhdGlvblwiLFxyXG4gIFwibmdNYXBcIixcclxuICBcInVpLnNlbGVjdFwiLFxyXG4gIFwidWkuc2VsZWN0MlwiLFxyXG4gIFwibmdTYW5pdGl6ZVwiLFxyXG4gIFwiY29sb3IucGlja2VyXCIsXHJcbiAgXCJ1aS5ib290c3RyYXBcIixcclxuICBcImRhdGF0YWJsZXNcIixcclxuICBcIm5nVGFnc0lucHV0XCIsXHJcbiAgXCJuZ0ZpbGVVcGxvYWRcIixcclxuICBcImluZmluaXRlLXNjcm9sbFwiLFxyXG4gIFwidWkudHJlZVwiLFxyXG4gIFwiYW5ndWxhck1vbWVudFwiLFxyXG4gIFwiYnRvcmZzLm11bHRpc2VsZWN0XCIsXHJcbiAgXCJodG1sVG9QZGZTYXZlXCIsXHJcbiAgXCJkbmRMaXN0c1wiLFxyXG4gIFwiYW5ndWxhci5jaGlwc1wiLFxyXG4gIFwidWkuYm9vdHN0cmFwLmNvbnRleHRNZW51XCIsXHJcbiAgXCJjbG91ZGluYXJ5XCIsXHJcbiAgXCJGaWxlU2F2ZXJcIlxyXG5dKTtcclxuYXBwLmNvbmZpZyhjb25maWcpO1xyXG5cclxuZnVuY3Rpb24gY29uZmlnKFxyXG4gIE5vdGlmaWNhdGlvblByb3ZpZGVyLFxyXG4gIHVpR21hcEdvb2dsZU1hcEFwaVByb3ZpZGVyLFxyXG4gIHRyZWVDb25maWcsXHJcbiAgY2xvdWRpbmFyeVByb3ZpZGVyXHJcbikge1xyXG4gIC8qIEdvb2dsZSBtYXAgY29uZmlnICovXHJcblxyXG4gIHVpR21hcEdvb2dsZU1hcEFwaVByb3ZpZGVyLmNvbmZpZ3VyZSh7XHJcbiAgICBrZXk6IFwiQUl6YVN5QTNNSUEtbUtXcV82MHExSzB6T0hndXJheFQtMVFQeE5VXCIsXHJcbiAgICB2OiBcIjMuZXhwXCIsXHJcbiAgICBsaWJyYXJpZXM6IFwicGxhY2VzLHdlYXRoZXIsZ2VvbWV0cnksdmlzdWFsaXphdGlvblwiXHJcbiAgfSk7XHJcblxyXG4gIC8qIE5vdGlmaWNhdGlvbiBjb25maWcgKi9cclxuXHJcbiAgTm90aWZpY2F0aW9uUHJvdmlkZXIuc2V0T3B0aW9ucyh7XHJcbiAgICBkZWxheTogMzAwMCxcclxuICAgIHN0YXJ0VG9wOiAyMCxcclxuICAgIHN0YXJ0UmlnaHQ6IDEwLFxyXG4gICAgdmVydGljYWxTcGFjaW5nOiAyMCxcclxuICAgIGhvcml6b250YWxTcGFjaW5nOiAyMCxcclxuICAgIHBvc2l0aW9uWDogXCJyaWdodFwiLFxyXG4gICAgcG9zaXRpb25ZOiBcInRvcFwiXHJcbiAgfSk7XHJcblxyXG4gIC8qIFRyZWUgY29uZmlndXJhdGlvbiAqL1xyXG4gIHRyZWVDb25maWcuZGVmYXVsdENvbGxhcHNlZCA9IHRydWU7XHJcblxyXG4gIC8qIENsb3VkaW5hcnkgY29uZmlnICovXHJcbiAgY2xvdWRpbmFyeVByb3ZpZGVyXHJcbiAgICAuc2V0KFwiY2xvdWRfbmFtZVwiLCBcImRrdG5obXNqeFwiKVxyXG4gICAgLnNldChcInVwbG9hZF9wcmVzZXRcIiwgXCJjbG91ZGVzX2Zyb250ZW5kXCIpO1xyXG59XHJcbiIsImFuZ3VsYXIubW9kdWxlKFwicm91dGVzTW9kdWxlXCIsIFtdKS5jb25maWcocm91dGVDb25maWcpO1xyXG5cclxuZnVuY3Rpb24gcm91dGVDb25maWcoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xyXG4gICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoXCIvXCIpO1xyXG5cclxuICAkc3RhdGVQcm92aWRlci5zdGF0ZShcInByZUxvZ2luXCIsIHtcclxuICAgIHVybDogXCIvXCIsXHJcbiAgICB0ZW1wbGF0ZVVybDogXCIvcGFydGlhbHMvcHJlTG9naW4uaHRtbFwiLFxyXG4gICAgY29udHJvbGxlcjogXCJwcmVMb2dpbkN0cmwgYXMgdm1cIlxyXG4gIH0pO1xyXG5cclxuICAkc3RhdGVQcm92aWRlci5zdGF0ZShcImRhc2hib2FyZFwiLCB7XHJcbiAgICB1cmw6IFwiL2Rhc2hib2FyZFwiLFxyXG4gICAgdGVtcGxhdGVVcmw6IFwiL3BhcnRpYWxzL2Rhc2hib2FyZC5odG1sXCIsXHJcbiAgICBjb250cm9sbGVyOiBcImRhc2hib2FyZEN0cmwgYXMgdm1cIlxyXG4gIH0pO1xyXG5cclxuICAvKiAkc3RhdGVQcm92aWRlci5zdGF0ZShcImRhc2hib2FyZF9vbGRcIiwge1xyXG4gICAgdXJsOiBcIi9kYXNoYm9hcmRfb2xkXCIsXHJcbiAgICB0ZW1wbGF0ZVVybDogXCIvcGFydGlhbHMvZGFzaGJvYXJkX29sZC5odG1sXCIsXHJcbiAgICBjb250cm9sbGVyOiBcImRhc2hib2FyZEN0cmwgYXMgdm1cIlxyXG4gIH0pOyAqL1xyXG5cclxuICAkc3RhdGVQcm92aWRlci5zdGF0ZShcImNyZWF0ZVByb2plY3RcIiwge1xyXG4gICAgdXJsOiBcIi9jcmVhdGVfcHJvamVjdFwiLFxyXG4gICAgdGVtcGxhdGVVcmw6IFwiL3BhcnRpYWxzL2NyZWF0ZVByb2plY3QuaHRtbFwiLFxyXG4gICAgY29udHJvbGxlcjogXCJjcmVhdGVQcm9qZWN0Q3RybCBhcyB2bVwiXHJcbiAgfSk7XHJcblxyXG4gICRzdGF0ZVByb3ZpZGVyLnN0YXRlKFwidmlzdWFsUGxhbm5lclwiLCB7XHJcbiAgICB1cmw6IFwiL3Zpc3VhbF9wbGFubmVyXCIsXHJcbiAgICB0ZW1wbGF0ZVVybDogXCIvcGFydGlhbHMvdmlzdWFsUGxhbm5lci5odG1sXCIsXHJcbiAgICBjb250cm9sbGVyOiBcInZpc3VhbFBsYW5uZXJDdHJsIGFzIHZtXCJcclxuICB9KTtcclxuXHJcbiAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoXCJwcm9qZWN0c1wiLCB7XHJcbiAgICB1cmw6IFwiL3Byb2plY3RzXCIsXHJcbiAgICB0ZW1wbGF0ZVVybDogXCIvcGFydGlhbHMvcHJvamVjdHMuaHRtbFwiLFxyXG4gICAgY29udHJvbGxlcjogXCJwcm9qZWN0Q3RybCBhcyB2bVwiXHJcbiAgfSk7XHJcblxyXG4gICRzdGF0ZVByb3ZpZGVyLnN0YXRlKFwibWF0ZXJpYWxzXCIsIHtcclxuICAgIHVybDogXCIvbWF0ZXJpYWxzXCIsXHJcbiAgICB0ZW1wbGF0ZVVybDogXCIvcGFydGlhbHMvbWF0ZXJpYWxzLmh0bWxcIixcclxuICAgIGNvbnRyb2xsZXI6IFwibWF0ZXJpYWxDdHJsIGFzIHZtXCJcclxuICB9KTtcclxuXHJcbiAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoXCJtYXRlcmlhbFZpZXdcIiwge1xyXG4gICAgdXJsOiBcIi9tYXRlcmlhbC86aWRcIixcclxuICAgIHRlbXBsYXRlVXJsOiBcIi9wYXJ0aWFscy9tYXRlcmlhbFZpZXcuaHRtbFwiLFxyXG4gICAgY29udHJvbGxlcjogXCJtYXRlcmlhbFZpZXdDdHJsIGFzIHZtXCJcclxuICB9KTtcclxuXHJcbiAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoXCJjb21ib01hdGVyaWFsVmlld1wiLCB7XHJcbiAgICB1cmw6IFwiL2NvbWJvX21hdGVyaWFsLzppZFwiLFxyXG4gICAgdGVtcGxhdGVVcmw6IFwiL3BhcnRpYWxzL2NvbWJvTWF0ZXJpYWxWaWV3Lmh0bWxcIixcclxuICAgIGNvbnRyb2xsZXI6IFwiY29tYm9NYXRlcmlhbFZpZXdDdHJsIGFzIHZtXCJcclxuICB9KTtcclxuXHJcbiAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoXCJlcXVpcG1lbnRzXCIsIHtcclxuICAgIHVybDogXCIvZXF1aXBtZW50c1wiLFxyXG4gICAgdGVtcGxhdGVVcmw6IFwiL3BhcnRpYWxzL2VxdWlwbWVudHMuaHRtbFwiLFxyXG4gICAgY29udHJvbGxlcjogXCJlcXVpcG1lbnRDdHJsIGFzIHZtXCJcclxuICB9KTtcclxuXHJcbiAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoXCJlcXVpcG1lbnRWaWV3XCIsIHtcclxuICAgIHVybDogXCIvZXF1aXBtZW50Vmlldy86aWRcIixcclxuICAgIHRlbXBsYXRlVXJsOiBcIi9wYXJ0aWFscy9lcXVpcG1lbnRWaWV3Lmh0bWxcIixcclxuICAgIGNvbnRyb2xsZXI6IFwiZXF1aXBtZW50Vmlld0N0cmwgYXMgdm1cIlxyXG4gIH0pO1xyXG5cclxuICAkc3RhdGVQcm92aWRlci5zdGF0ZShcImZpbGVNYW5hZ2VyXCIsIHtcclxuICAgIHVybDogXCIvZmlsZV9tYW5hZ2VyXCIsXHJcbiAgICB0ZW1wbGF0ZVVybDogXCIvcGFydGlhbHMvZmlsZU1hbmFnZXIuaHRtbFwiLFxyXG4gICAgY29udHJvbGxlcjogXCJmaWxlTWFuYWdlckN0cmwgYXMgdm1cIlxyXG4gIH0pO1xyXG5cclxuICAkc3RhdGVQcm92aWRlci5zdGF0ZShcInBheXJvbGxcIiwge1xyXG4gICAgdXJsOiBcIi9wYXlyb2xsXCIsXHJcbiAgICB0ZW1wbGF0ZVVybDogXCIvcGFydGlhbHMvcGF5cm9sbC5odG1sXCIsXHJcbiAgICBjb250cm9sbGVyOiBcInBheXJvbGxDdHJsIGFzIHZtXCJcclxuICB9KTtcclxuXHJcbiAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoXCJjYWxjdWxhdGlvblwiLCB7XHJcbiAgICB1cmw6IFwiL2NhbGN1bGF0aW9uXCIsXHJcbiAgICB0ZW1wbGF0ZVVybDogXCIvcGFydGlhbHMvY2FsY3VsYXRpb24uaHRtbFwiLFxyXG4gICAgY29udHJvbGxlcjogXCJjYWxjdWxhdGlvbkN0cmwgYXMgdm1cIlxyXG4gIH0pO1xyXG5cclxuICAkc3RhdGVQcm92aWRlci5zdGF0ZShcInJlcG9ydFwiLCB7XHJcbiAgICB1cmw6IFwiL3JlcG9ydFwiLFxyXG4gICAgdGVtcGxhdGVVcmw6IFwiL3BhcnRpYWxzL3JlcG9ydHMuaHRtbFwiLFxyXG4gICAgY29udHJvbGxlcjogXCJyZXBvcnRzQ3RybCBhcyB2bVwiXHJcbiAgfSk7XHJcblxyXG4gICRzdGF0ZVByb3ZpZGVyLnN0YXRlKFwiaXNzdWVzXCIsIHtcclxuICAgIHVybDogXCIvaXNzdWVzXCIsXHJcbiAgICB0ZW1wbGF0ZVVybDogXCIvcGFydGlhbHMvaXNzdWVzLmh0bWxcIixcclxuICAgIGNvbnRyb2xsZXI6IFwiaXNzdWVzQ3RybCBhcyB2bVwiXHJcbiAgfSk7XHJcbiAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoXCJpc3N1ZXNEZXRhaWxcIiwge1xyXG4gICAgdXJsOiBcIi9pc3N1ZXNfZGV0YWlscy86aWRcIixcclxuICAgIHRlbXBsYXRlVXJsOiBcIi9wYXJ0aWFscy9pc3N1ZXNfZGV0YWlscy5odG1sXCIsXHJcbiAgICBjb250cm9sbGVyOiBcImlzc3VlRGV0YWlsQ3RybCBhcyB2bVwiXHJcbiAgfSk7XHJcblxyXG4gICRzdGF0ZVByb3ZpZGVyLnN0YXRlKFwicmVwb3J0c0RldGFpbFwiLCB7XHJcbiAgICB1cmw6IFwiL3JlcG9ydHNfZGV0YWlscy86aWRcIixcclxuICAgIHRlbXBsYXRlVXJsOiBcIi9wYXJ0aWFscy9yZXBvcnRzZGV0YWlscy5odG1sXCIsXHJcbiAgICBjb250cm9sbGVyOiBcInJlcG9ydERldGFpbEN0cmwgYXMgdm1cIlxyXG4gIH0pO1xyXG5cclxuICAkc3RhdGVQcm92aWRlci5zdGF0ZShcImJpbGxpbmdBcmNoaXZlXCIsIHtcclxuICAgIHVybDogXCIvYmlsbGluZ19hcmNoaXZlXCIsXHJcbiAgICB0ZW1wbGF0ZVVybDogXCIvcGFydGlhbHMvYmlsbGluZ0FyY2hpdmUuaHRtbFwiLFxyXG4gICAgY29udHJvbGxlcjogXCJiaWxsaW5nQXJjaGl2ZUN0cmwgYXMgdm1cIlxyXG4gIH0pO1xyXG5cclxuICAkc3RhdGVQcm92aWRlci5zdGF0ZShcInJlcG9ydHNMaXN0aW5nXCIsIHtcclxuICAgIHVybDogXCIvcmVwb3J0c19saXN0aW5nXCIsXHJcbiAgICB0ZW1wbGF0ZVVybDogXCIvcGFydGlhbHMvcmVwb3J0c0xpc3RpbmcuaHRtbFwiLFxyXG4gICAgY29udHJvbGxlcjogXCJyZXBvcnRzTGlzdGluZ0N0cmwgYXMgdm1cIlxyXG4gIH0pO1xyXG5cclxuICAkc3RhdGVQcm92aWRlci5zdGF0ZShcIjNkRGFzaGJvYXJkXCIsIHtcclxuICAgIHVybDogXCIvM2RfZGFzaGJvYXJkXCIsXHJcbiAgICB0ZW1wbGF0ZVVybDogXCIvcGFydGlhbHMvM2QtZGFzaGJvYXJkLmh0bWxcIixcclxuICAgIGNvbnRyb2xsZXI6IFwiXzNkRGFzaGJvYXJkQ3RybCBhcyB2bVwiXHJcbiAgfSk7XHJcblxyXG4gICRzdGF0ZVByb3ZpZGVyLnN0YXRlKFwic2V0UGFzc3dvcmRcIiwge1xyXG4gICAgdXJsOiBcIi9zZXRfcGFzc3dvcmRcIixcclxuICAgIHRlbXBsYXRlVXJsOiBcIi9wYXJ0aWFscy9zZXRfcGFzc3dvcmQuaHRtbFwiLFxyXG4gICAgY29udHJvbGxlcjogXCJzZXRQYXNzd29yZEN0cmwgYXMgdm1cIlxyXG4gIH0pO1xyXG4gICRzdGF0ZVByb3ZpZGVyLnN0YXRlKFwic2V0dGluZ1wiLCB7XHJcbiAgICB1cmw6IFwiL3NldHRpbmdcIixcclxuICAgIHRlbXBsYXRlVXJsOiBcIi9wYXJ0aWFscy9zZXR0aW5nLmh0bWxcIixcclxuICAgIGNvbnRyb2xsZXI6IFwic2V0dGluZ0N0cmwgYXMgdm1cIlxyXG4gIH0pO1xyXG5cclxuICAkc3RhdGVQcm92aWRlci5zdGF0ZShcImVtcGxveWVlc1wiLCB7XHJcbiAgICB1cmw6IFwiL2VtcGxveWVlc1wiLFxyXG4gICAgdGVtcGxhdGVVcmw6IFwiL3BhcnRpYWxzL2VtcGxveWVlLmh0bWxcIixcclxuICAgIGNvbnRyb2xsZXI6IFwiZW1wbG95ZWVzQ3RybCBhcyB2bVwiXHJcbiAgfSk7XHJcblxyXG4gICRzdGF0ZVByb3ZpZGVyLnN0YXRlKFwiM2R2aWV3ZXJcIiwge1xyXG4gICAgdXJsOiBcIi8zZHZpZXdlclwiLFxyXG4gICAgdGVtcGxhdGVVcmw6IFwiL3BhcnRpYWxzLzNkLXZpZXdlci5odG1sXCIsXHJcbiAgICBjb250cm9sbGVyOiBcIl8zZHZpZXdlckN0cmwgYXMgdm1cIlxyXG4gIH0pO1xyXG5cclxuICAkc3RhdGVQcm92aWRlci5zdGF0ZShcImNsaWVudHNcIiwge1xyXG4gICAgdXJsOiBcIi9jbGllbnRzXCIsXHJcbiAgICB0ZW1wbGF0ZVVybDogXCIvcGFydGlhbHMvY2xpZW50cy5odG1sXCIsXHJcbiAgICBjb250cm9sbGVyOiBcImNsaWVudHNDdHJsIGFzIHZtXCJcclxuICB9KTtcclxuXHJcbiAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoXCJzdXBwbGllclwiLCB7XHJcbiAgICB1cmw6IFwiL3N1cHBsaWVyXCIsXHJcbiAgICB0ZW1wbGF0ZVVybDogXCIvcGFydGlhbHMvc3VwcGxpZXIuaHRtbFwiLFxyXG4gICAgY29udHJvbGxlcjogXCJzdXBwbGllckN0cmwgYXMgdm1cIlxyXG4gIH0pO1xyXG4gICRzdGF0ZVByb3ZpZGVyLnN0YXRlKFwic3VwcGxpZXJEZXRhaWxcIiwge1xyXG4gICAgdXJsOiBcIi9zdXBwbGllcl9kZXRhaWxzLzppZFwiLFxyXG4gICAgdGVtcGxhdGVVcmw6IFwiL3BhcnRpYWxzL3N1cHBsaWVyZGV0YWlscy5odG1sXCIsXHJcbiAgICBjb250cm9sbGVyOiBcInN1cHBsaWVyRGV0YWlsQ3RybCBhcyB2bVwiXHJcbiAgfSk7XHJcblxyXG4gICRzdGF0ZVByb3ZpZGVyLnN0YXRlKFwic3ViY29udHJhY3RvclwiLCB7XHJcbiAgICB1cmw6IFwiL3N1YmNvbnRyYWN0b3JcIixcclxuICAgIHRlbXBsYXRlVXJsOiBcIi9wYXJ0aWFscy9zdWJjb250cmFjdG9yLmh0bWxcIixcclxuICAgIGNvbnRyb2xsZXI6IFwic3ViY29udHJhY3RvckN0cmwgYXMgdm1cIlxyXG4gIH0pO1xyXG5cclxuICAkc3RhdGVQcm92aWRlci5zdGF0ZShcInN1YmNvbnRyYWN0b3JEZXRhaWxcIiwge1xyXG4gICAgdXJsOiBcIi9zdWJjb250cmFjdG9yX2RldGFpbHMvOmlkXCIsXHJcbiAgICB0ZW1wbGF0ZVVybDogXCIvcGFydGlhbHMvc3ViY29udHJhY3RvcmRldGFpbHMuaHRtbFwiLFxyXG4gICAgY29udHJvbGxlcjogXCJzdWJjb250cmFjdG9yRGV0YWlsQ3RybCBhcyB2bVwiXHJcbiAgfSk7XHJcblxyXG4gICRzdGF0ZVByb3ZpZGVyLnN0YXRlKFwibWVldGluZ3Jvb21cIiwge1xyXG4gICAgdXJsOiBcIi9tZWV0aW5ncm9vbVwiLFxyXG4gICAgdGVtcGxhdGVVcmw6IFwiL3BhcnRpYWxzL21lZXRpbmdSb29tLmh0bWxcIixcclxuICAgIGNvbnRyb2xsZXI6IFwibWVldGluZ1Jvb21DdHJsIGFzIHZtXCJcclxuICB9KTtcclxuXHJcbiAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoXCJjYWxlbmRlclwiLCB7XHJcbiAgICB1cmw6IFwiL2NhbGVuZGVyXCIsXHJcbiAgICB0ZW1wbGF0ZVVybDogXCIvcGFydGlhbHMvY2FsZW5kZXIuaHRtbFwiLFxyXG4gICAgY29udHJvbGxlcjogXCJjYWxlbmRlckN0cmwgYXMgdm1cIlxyXG4gIH0pO1xyXG4gIFxyXG4gICRzdGF0ZVByb3ZpZGVyLnN0YXRlKFwidG9kb1wiLCB7XHJcbiAgICB1cmw6IFwiL3RvZG9cIixcclxuICAgIHRlbXBsYXRlVXJsOiBcIi9wYXJ0aWFscy90b2RvLmh0bWxcIixcclxuICAgIGNvbnRyb2xsZXI6IFwidG9kb0N0cmwgYXMgdm1cIlxyXG4gIH0pO1xyXG5cclxuICAkc3RhdGVQcm92aWRlci5zdGF0ZShcInRvZG9WaWV3XCIsIHtcclxuICAgIHVybDogXCIvdG9kb1ZpZXcvOmlkXCIsXHJcbiAgICB0ZW1wbGF0ZVVybDogXCIvcGFydGlhbHMvdG9kb1ZpZXcuaHRtbFwiLFxyXG4gICAgY29udHJvbGxlcjogXCJ0b2RvVmlld0N0cmwgYXMgdm1cIlxyXG4gIH0pO1xyXG59XHJcbiIsIigoKSA9PiB7XHJcbiAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuZmFjdG9yeShcImFwaUZhY3RvcnlcIiwgYXBpRmFjdG9yeSk7XHJcblxyXG4gIGZ1bmN0aW9uIGFwaUZhY3RvcnkoXHJcbiAgICAkaHR0cCxcclxuICAgICRzdGF0ZSxcclxuICAgICRsb2NhdGlvbixcclxuICAgIGxvY2FsU3RvcmFnZVNlcnZpY2UsXHJcbiAgICBnbG9iYWxzLFxyXG4gICAgVXBsb2FkLFxyXG4gICAgTm90aWZpY2F0aW9uLFxyXG4gICAgJHFcclxuICApIHtcclxuICAgIC8vY29uc3QgdXJsID0gXCJodHRwOi8vMTkyLjE2OC4xMC4xODg6MTMzN1wiLFxyXG4gICAgY29uc3QgdXJsID0gXCJodHRwczovL2FwaS5zdGFnaW5nLmNsb3VkZXMuZXVcIixcclxuICAgICAgLy8gY29uc3QgdXJsID0gXCJodHRwOi8vbG9jYWxob3N0OjQyMDBcIixcclxuICAgICAgLy9jb25zdCB1cmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MTMzN1wiLFxyXG4gICAgICBoZWFkZXJzID0gKG1ldGhvZCwgdG9rZW4pID0+IHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogbWV0aG9kID09PSBcIkdFVFwiID8gdW5kZWZpbmVkIDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgICBcIngtYWNjZXNzLXRva2VuXCI6IHRva2VuXHJcbiAgICAgICAgICAgID8gbG9jYWxTdG9yYWdlU2VydmljZS5nZXQoXCJhY2Nlc3MtdG9rZW5cIilcclxuICAgICAgICAgICAgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICBwbGF0Zm9ybTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICBzb3VyY2U6IFwid2ViXCJcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuICAgICAgfSxcclxuICAgICAgaGVhZGVyczNEID0gKG1ldGhvZCwgdG9rZW4pID0+IHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogbWV0aG9kID09PSBcIkdFVFwiID8gdW5kZWZpbmVkIDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgICBcIngtYWNjZXNzLXRva2VuXCI6IHRva2VuXHJcbiAgICAgICAgICAgID8gbG9jYWxTdG9yYWdlU2VydmljZS5nZXQoXCJhY2Nlc3MtdG9rZW5cIilcclxuICAgICAgICAgICAgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICBrZXk6IFwiZmF2eUAxMjNcIlxyXG4gICAgICAgIH07XHJcbiAgICAgIH0sXHJcbiAgICAgIHsgcHJvZ3Jlc3MsIHVzZXJTdG9yZSwgbG9nb3V0IH0gPSBnbG9iYWxzO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGxvZ2luOiBmdW5jdGlvbihwYXlsb2FkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXV0aGVudGljYXRlXCIsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJQT1NUXCIpLFxyXG4gICAgICAgICAgICBkYXRhOiBwYXlsb2FkXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcbiAgICAgIGZvcmdvdFBhc3N3b3JkOiBmdW5jdGlvbihwYXlsb2FkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvZm9yZ2V0UGFzc3dvcmRcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBPU1RcIiksXHJcbiAgICAgICAgICAgIGRhdGE6IHBheWxvYWRcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIHJlZ2lzdHJhdGlvbjogZnVuY3Rpb24ocGF5bG9hZCkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2Rhc2hib2FyZFJlZ2lzdHJhdGlvblwiLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUE9TVFwiKSxcclxuICAgICAgICAgICAgZGF0YTogcGF5bG9hZFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgc3Vic2NyaWJlOiBmdW5jdGlvbihwYXlsb2FkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvc3Vic2NyaWJlXCIsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJQT1NUXCIpLFxyXG4gICAgICAgICAgICBkYXRhOiBwYXlsb2FkXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBnZXRDb21wYW55QnlJZDogZnVuY3Rpb24oY29tcGFueUlkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogYCR7dXJsfS9hcGkvZ2V0Q29tcGFueUJ5SWQvJHtjb21wYW55SWR9YCxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiR0VUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBsaXN0QWxsVXNlcnM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9nZXRhZG1pbnVzZXJzXCIsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIkdFVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgLy8gbGlzdEFsbENvdW50cnlDb2RlID0gZnVuY3Rpb24gKGNiKSB7XHJcbiAgICAgIC8vICAgJHJvb3RTY29wZS5hcGlXYWl0ID0gdHJ1ZTtcclxuICAgICAgLy8gICAkaHR0cFxyXG4gICAgICAvLyAgICAgLmdldChcImFwcC9kYXRhL2NvbW1vbi1hcGkvQ291bnRyeUNvZGUuanNvblwiLCB2bS5nZXRDb25maWcoKSkudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgIC8vICAgICAgICRyb290U2NvcGUuYXBpV2FpdCA9IGZhbHNlO1xyXG4gICAgICAvLyAgICAgICBjYihyZXMuZGF0YSk7XHJcbiAgICAgIC8vICAgICB9LFxyXG4gICAgICAvLyAgICAgZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAvLyAgICAgICAkcm9vdFNjb3BlLmFwaVdhaXQgPSBmYWxzZTtcclxuICAgICAgLy8gICAgICAgaWYgKGVyci5zdGF0dXMpIHtcclxuICAgICAgLy8gICAgICAgICB2bS5zaG93QWxlcnQodGhpcywgZXJyKTtcclxuICAgICAgLy8gICAgICAgfVxyXG4gICAgICAvLyAgICAgICBlbHNlIHtcclxuICAgICAgLy8gICAgICAgICBjYihlcnIuZGF0YSk7XHJcbiAgICAgIC8vICAgICAgIH1cclxuICAgICAgLy8gICAgIH0pXHJcbiAgICAgIC8vfSxcclxuXHJcbiAgICAgIGxpc3RBbGxQcm9qZWN0czogZnVuY3Rpb24ocXVlcnlPYmopIHtcclxuICAgICAgICBsZXQgcXVlcnkgPSAhcXVlcnlPYmogLy8gYnVpbGRpbmcgcXVlcnkgc3RyaW5nXHJcbiAgICAgICAgICA/IFwiXCJcclxuICAgICAgICAgIDogT2JqZWN0LmtleXMocXVlcnlPYmopLnJlZHVjZSgoYWNjLCB2KSA9PiB7XHJcbiAgICAgICAgICAgICAgbGV0IHN0ciA9IGAke3Z9PSR7cXVlcnlPYmpbdl19JmA7XHJcbiAgICAgICAgICAgICAgYWNjICs9IHN0cjtcclxuICAgICAgICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICAgICAgICB9LCBcIj9cIik7XHJcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5zbGljZSgwLCAtMSk7IC8vIHJlbW92ZSB0cmFpbGluZyAmXHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL2xpc3RBbGxQcm9qZWN0c1wiICsgcXVlcnksXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIkdFVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgbGlzdEFsbENsaWVudHM6IGZ1bmN0aW9uKHF1ZXJ5T2JqKSB7XHJcbiAgICAgICAgLy8gY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgLy8gICAkaHR0cCh7XHJcbiAgICAgICAgLy8gICAgIHVybDogdXJsICsgXCJcIixcclxuICAgICAgICAvLyAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgIC8vICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiR0VUXCIsIHRydWUpXHJcbiAgICAgICAgLy8gICB9KVxyXG4gICAgICAgIC8vICk7XHJcbiAgICAgICAgLy8gcmV0dXJuIHByb21pc2U7XHJcbiAgICAgICAgbGV0IHF1ZXJ5ID0gIXF1ZXJ5T2JqIC8vIGJ1aWxkaW5nIHF1ZXJ5IHN0cmluZ1xyXG4gICAgICAgICAgPyBcIlwiXHJcbiAgICAgICAgICA6IE9iamVjdC5rZXlzKHF1ZXJ5T2JqKS5yZWR1Y2UoKGFjYywgdikgPT4ge1xyXG4gICAgICAgICAgICAgIGxldCBzdHIgPSBgJHt2fT0ke3F1ZXJ5T2JqW3ZdfSZgO1xyXG4gICAgICAgICAgICAgIGFjYyArPSBzdHI7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGFjYztcclxuICAgICAgICAgICAgfSwgXCI/XCIpO1xyXG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkuc2xpY2UoMCwgLTEpOyAvLyByZW1vdmUgdHJhaWxpbmcgJlxyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9saXN0QWxsQ2xpZW50c1wiICsgcXVlcnksXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIkdFVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgbGlzdEFsbFJvb2ZlcnM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9saXN0QWxsUm9vZmVyc1wiLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJHRVRcIiwgdHJ1ZSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGNyZWF0ZVByb2plY3Q6IGZ1bmN0aW9uKHBheWxvYWQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvY3JlYXRlUHJvamVjdFwiLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUE9TVFwiLCB0cnVlKSxcclxuICAgICAgICAgICAgZGF0YTogcGF5bG9hZFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgY3JlYXRlSXNzdWU6IGZ1bmN0aW9uKGlzc3Vlb2JqKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJpbiBjcmVhdGUgaXNzdWUgYXBpXCIsIGlzc3Vlb2JqKTtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgIFVwbG9hZC51cGxvYWQoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9jcmVhdGVJc3N1ZVwiLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICBkYXRhOiBpc3N1ZW9iaixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBPU1RcIiwgdHJ1ZSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuICAgICAgY3JlYXRlSXNzdWVTM1VwbG9hZDogZnVuY3Rpb24oaXNzdWVvYmopIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgIFVwbG9hZC51cGxvYWQoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9jcmVhdGVJc3N1ZUZvclMzXCIsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIGRhdGE6IGlzc3Vlb2JqLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUE9TVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgZ2V0SXNzdWVCeUlkOiBmdW5jdGlvbihpc3N1ZUlEKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogYCR7dXJsfS9hcGkvZ2V0SXNzdWVCeUlkLyR7aXNzdWVJRH1gLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJHRVRcIiwgdHJ1ZSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIHVwZGF0ZUlzc3VlOiBmdW5jdGlvbihpc3N1ZW9iaiwgaWQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgIFVwbG9hZC51cGxvYWQoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS91cGRhdGVJc3N1ZS9cIiArIGlkLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgICAgIGRhdGE6IGlzc3Vlb2JqLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUFVUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBnZXRQcm9qZWN0Um9vZlBsYW5zOiBmdW5jdGlvbihwcm9qZWN0SWQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvZ2V0UHJvamVjdFJvb2ZQbGFucy9cIiArIHByb2plY3RJZCxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiR0VUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBzYXZlUm9vZlBsYW46IGZ1bmN0aW9uKHJvb2ZQbGFuSWQsIHBheWxvYWQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvc2F2ZVJvb2ZQbGFuL1wiICsgcm9vZlBsYW5JZCxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUFVUXCIsIHRydWUpLFxyXG4gICAgICAgICAgICBkYXRhOiBwYXlsb2FkXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBjcmVhdGVNYXRlcmlhbHM6IGZ1bmN0aW9uKHBheWxvYWQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgIFVwbG9hZC51cGxvYWQoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9jcmVhdGVNYXRlcmlhbFwiLFxyXG4gICAgICAgICAgICBkYXRhOiBwYXlsb2FkLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUE9TVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgY3JlYXRlRXF1aXBtZW50OiBmdW5jdGlvbihwYXlsb2FkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICBVcGxvYWQudXBsb2FkKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvY3JlYXRlRXF1aXBtZW50XCIsXHJcbiAgICAgICAgICAgIGRhdGE6IHBheWxvYWQsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJQT1NUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBsaXN0QWxsTWF0ZXJpYWxzOiBmdW5jdGlvbihxdWVyeU9iaikge1xyXG4gICAgICAgIGxldCBxdWVyeSA9ICFxdWVyeU9iaiAvLyBidWlsZGluZyBxdWVyeSBzdHJpbmdcclxuICAgICAgICAgID8gXCJcIlxyXG4gICAgICAgICAgOiBPYmplY3Qua2V5cyhxdWVyeU9iaikucmVkdWNlKChhY2MsIHYpID0+IHtcclxuICAgICAgICAgICAgICBsZXQgc3RyID0gYCR7dn09JHtxdWVyeU9ialt2XX0mYDtcclxuICAgICAgICAgICAgICBhY2MgKz0gc3RyO1xyXG4gICAgICAgICAgICAgIHJldHVybiBhY2M7XHJcbiAgICAgICAgICAgIH0sIFwiP1wiKTtcclxuICAgICAgICBxdWVyeSA9IHF1ZXJ5LnNsaWNlKDAsIC0xKTsgLy8gcmVtb3ZlIHRyYWlsaW5nICZcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvbGlzdEFsbE1hdGVyaWFsc1wiICsgcXVlcnksXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIkdFVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgbGlzdEFsbENvbWJvTWF0ZXJpYWxzOiBmdW5jdGlvbihxdWVyeU9iaikge1xyXG4gICAgICAgIGxldCBxdWVyeSA9ICFxdWVyeU9iaiAvLyBidWlsZGluZyBxdWVyeSBzdHJpbmdcclxuICAgICAgICAgID8gXCJcIlxyXG4gICAgICAgICAgOiBPYmplY3Qua2V5cyhxdWVyeU9iaikucmVkdWNlKChhY2MsIHYpID0+IHtcclxuICAgICAgICAgICAgICBsZXQgc3RyID0gYCR7dn09JHtxdWVyeU9ialt2XX0mYDtcclxuICAgICAgICAgICAgICBhY2MgKz0gc3RyO1xyXG4gICAgICAgICAgICAgIHJldHVybiBhY2M7XHJcbiAgICAgICAgICAgIH0sIFwiP1wiKTtcclxuICAgICAgICBxdWVyeSA9IHF1ZXJ5LnNsaWNlKDAsIC0xKTsgLy8gcmVtb3ZlIHRyYWlsaW5nICZcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvbGlzdENvbWJvTWF0ZXJpYWxzXCIgKyBxdWVyeSxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiR0VUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBsaXN0QWxsRXF1aXBtZW50czogZnVuY3Rpb24ocXVlcnlPYmopIHtcclxuICAgICAgICBsZXQgcXVlcnkgPSAhcXVlcnlPYmogLy8gYnVpbGRpbmcgcXVlcnkgc3RyaW5nXHJcbiAgICAgICAgICA/IFwiXCJcclxuICAgICAgICAgIDogT2JqZWN0LmtleXMocXVlcnlPYmopLnJlZHVjZSgoYWNjLCB2KSA9PiB7XHJcbiAgICAgICAgICAgICAgbGV0IHN0ciA9IGAke3Z9PSR7cXVlcnlPYmpbdl19JmA7XHJcbiAgICAgICAgICAgICAgYWNjICs9IHN0cjtcclxuICAgICAgICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICAgICAgICB9LCBcIj9cIik7XHJcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5zbGljZSgwLCAtMSk7IC8vIHJlbW92ZSB0cmFpbGluZyAmXHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL2xpc3RBbGxFcXVpcG1lbnRzXCIgKyBxdWVyeSxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiR0VUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICB1cGRhdGVNYXRlcmlhbEJ5SWQ6IGZ1bmN0aW9uKGlkLCBwYXlsb2FkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICBVcGxvYWQudXBsb2FkKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvdXBkYXRlTWF0ZXJpYWxCeUlkL1wiICsgaWQsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBVVFwiLCB0cnVlKSxcclxuICAgICAgICAgICAgZGF0YTogcGF5bG9hZFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgZ2V0TWF0ZXJpYWxCeUlkOiBmdW5jdGlvbihtYXRlcmlhbElEKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogYCR7dXJsfS9hcGkvZ2V0TWF0ZXJpYWxCeUlkLyR7bWF0ZXJpYWxJRH1gLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJHRVRcIiwgdHJ1ZSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGdldENvbWJvTWF0ZXJpYWxCeUlkOiBmdW5jdGlvbihjb21ib0lkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogYCR7dXJsfS9hcGkvZ2V0Q29tYm9NYXRlcmlhbEJ5SWQvJHtjb21ib0lkfWAsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIkdFVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgZ2V0RXF1aXBtZW50QnlJZDogZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiBgJHt1cmx9L2FwaS9nZXRFcXVpcG1lbnRCeUlkLyR7aWR9YCxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiR0VUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcbiAgICAgIGNyZWF0ZUNvbWJvTWF0ZXJpYWw6IGZ1bmN0aW9uKHBheWxvYWQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgIFVwbG9hZC51cGxvYWQoe1xyXG4gICAgICAgICAgICB1cmw6IGAke3VybH0vYXBpL2NyZWF0ZUNvbWJvTWF0ZXJpYWxgLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUE9TVFwiLCB0cnVlKSxcclxuICAgICAgICAgICAgZGF0YTogcGF5bG9hZFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG4gICAgICB1cGRhdGVDb21ib01hdGVyaWFsTGlzdDogZnVuY3Rpb24oaWQsIHBheWxvYWQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiBgJHt1cmx9L2FwaS91cGRhdGVDb21ib01hdGVyaWFsTGlzdC8ke2lkfWAsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBPU1RcIiwgdHJ1ZSksXHJcbiAgICAgICAgICAgIGRhdGE6IHBheWxvYWRcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIHVwZGF0ZUNvbWJvTWF0ZXJpYWw6IGZ1bmN0aW9uKGlkLCBwYXlsb2FkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICBVcGxvYWQudXBsb2FkKHtcclxuICAgICAgICAgICAgdXJsOiBgJHt1cmx9L2FwaS91cGRhdGVDb21ib01hdGVyaWFsLyR7aWR9YCxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUE9TVFwiLCB0cnVlKSxcclxuICAgICAgICAgICAgZGF0YTogcGF5bG9hZFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG4gICAgICBzaG93Q29udmVyc2lvblJhdGU6IGZ1bmN0aW9uKHBheWxvYWQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvc2hvd0NvbnZlcnNpb25SYXRlXCIsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJQT1NUXCIsIHRydWUpLFxyXG4gICAgICAgICAgICBkYXRhOiBwYXlsb2FkXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvLyBnZXRDdXJyZW5jeUJhc2VkT25DYWxjdWxhdGlvbkRhdGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAvLyAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAvLyAgICAgJGh0dHAoe1xyXG4gICAgICAvLyAgICAgICB1cmw6IHVybCArIFwiL2FwaS9nZXRDdXJyZW5jeUJhc2VkT25DYWxjdWxhdGlvbkRhdGVcIixcclxuICAgICAgLy8gICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgLy8gICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBPU1RcIiwgdHJ1ZSksXHJcbiAgICAgIC8vICAgICAgIGRhdGE6IHtcclxuICAgICAgLy8gICAgICAgICBkYXRlOiBuZXcgRGF0ZSgpXHJcbiAgICAgIC8vICAgICAgIH1cclxuICAgICAgLy8gICAgIH0pXHJcbiAgICAgIC8vICAgKTtcclxuICAgICAgLy8gICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgLy8gfSxcclxuICAgICAgZ2V0TWF0ZXJpYWxCeUlkOiBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9nZXRNYXRlcmlhbEJ5SWQvXCIgKyBpZCxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiR0VUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcbiAgICAgIC8qIERlY29yYXRlIGFqYXggY2FsbHMgd2l0aCBwcm9ncmVzcyBiYXIgKi9cclxuICAgICAgcHJvZ3Jlc3NpZnk6IHByb21pc2UgPT4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICBwcm9ncmVzcy5zdGFydCgpO1xyXG4gICAgICAgICAgcHJvbWlzZVxyXG4gICAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgICBwcm9ncmVzcy5jb21wbGV0ZSgpO1xyXG4gICAgICAgICAgICAgIHJlc29sdmUocmVzcCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgICAgIHByb2dyZXNzLmNvbXBsZXRlKCk7XHJcbiAgICAgICAgICAgICAgaWYgKGVyci5zdGF0dXMgPT09IDQwMSkge1xyXG4gICAgICAgICAgICAgICAgbG9nb3V0KCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGxpc3RBbGxJc3N1ZXM6IGZ1bmN0aW9uKHF1ZXJ5T2JqKSB7XHJcbiAgICAgICAgbGV0IHF1ZXJ5ID0gIXF1ZXJ5T2JqIC8vIGJ1aWxkaW5nIHF1ZXJ5IHN0cmluZ1xyXG4gICAgICAgICAgPyBcIlwiXHJcbiAgICAgICAgICA6IE9iamVjdC5rZXlzKHF1ZXJ5T2JqKS5yZWR1Y2UoKGFjYywgdikgPT4ge1xyXG4gICAgICAgICAgICAgIGxldCBzdHIgPSBgJHt2fT0ke3F1ZXJ5T2JqW3ZdfSZgO1xyXG4gICAgICAgICAgICAgIGFjYyArPSBzdHI7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGFjYztcclxuICAgICAgICAgICAgfSwgXCI/XCIpO1xyXG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkuc2xpY2UoMCwgLTEpOyAvLyByZW1vdmUgdHJhaWxpbmcgJlxyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9saXN0QWxsSXNzdWVzXCIgKyBxdWVyeSxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiR0VUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBnZXRJc3N1ZXNMaXN0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvYWxsSXNzdWVzXCIsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIkdFVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG4gICAgICBpc1Rva2VuVmFsaWQ6IGZ1bmN0aW9uKHBheWxvYWQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9pc1Rva2VuVmFsaWRcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBPU1RcIiwgdHJ1ZSksXHJcbiAgICAgICAgICAgIGRhdGE6IHBheWxvYWRcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIHNldFBhc3N3b3JkOiBmdW5jdGlvbihwYXlsb2FkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvcmVzZXRQYXNzd29yZEFkbWluXCIsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBVVFwiLCB0cnVlKSxcclxuICAgICAgICAgICAgZGF0YTogcGF5bG9hZFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgdXBkYXRlUm9sZUJhc2VkQWNjZXNzOiBmdW5jdGlvbihwYXlsb2FkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL3VwZGF0ZVJvbGVCYXNlZEFjY2Vzc1wiLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJQVVRcIiwgdHJ1ZSksXHJcbiAgICAgICAgICAgIGRhdGE6IHBheWxvYWRcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qIEZpbGUgTWFuYWdlciBBUElzICovXHJcbiAgICAgIGFkZEhpZXJhcmNoeTogZnVuY3Rpb24ocGF5bG9hZCkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9hZGRIaWVyYXJjaHlcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBPU1RcIiwgdHJ1ZSksXHJcbiAgICAgICAgICAgIGRhdGE6IHBheWxvYWRcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuICAgICAgZ2V0SGllcmFyY2h5Q2hpbGRyZW46IGZ1bmN0aW9uKGhpZXJhcmNoeUlkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL2dldEhpZXJhcmNoeUNoaWxkcmVuL1wiICsgaGllcmFyY2h5SWQsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIkdFVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG4gICAgICBnZXRIaWVyYXJjaHk6IGZ1bmN0aW9uKHByb2plY3RJZCkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9nZXRIaWVyYXJjaHkvXCIgKyBwcm9qZWN0SWQgKyBcIj9kZXB0aD0yXCIsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIkdFVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG4gICAgICB2aWV3UHJvamVjdEFzc2V0czogZnVuY3Rpb24ocHJvamVjdElkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL3ZpZXdQcm9qZWN0QXNzZXRzL1wiICsgcHJvamVjdElkLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJHRVRcIiwgdHJ1ZSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGFkZEZpbGVUb0hpZXJhcmNoeTogZnVuY3Rpb24ocGF5bG9hZCkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9hZGRGaWxlVG9IaWVyYXJjaHlcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUFVUXCIsIHRydWUpLFxyXG4gICAgICAgICAgICBkYXRhOiBwYXlsb2FkXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICB2aWV3SGllcmFyY2h5OiBmdW5jdGlvbihoaWVyYXJjaHlJZCkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS92aWV3SGllcmFyY2h5L1wiICsgaGllcmFyY2h5SWQsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIkdFVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgY2xvbmVBc3NldHM6IGZ1bmN0aW9uKHBheWxvYWQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvY2xvbmVBc3NldHNcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUFVUXCIsIHRydWUpLFxyXG4gICAgICAgICAgICBkYXRhOiBwYXlsb2FkXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcbiAgICAgIHVwbG9hZEZpbGVJbkZpbGVNYW5hZ2VyOiBmdW5jdGlvbihwYXlsb2FkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICBVcGxvYWQudXBsb2FkKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvdXBsb2FkRmlsZUluRmlsZU1hbmFnZXJcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgZGF0YTogcGF5bG9hZCxcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBPU1RcIiwgdHJ1ZSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGRyYWdNb3ZlTm9kZXM6IGZ1bmN0aW9uKHBheWxvYWQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvZHJhZ01vdmVOb2Rlc1wiLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgICAgIGRhdGE6IHBheWxvYWQsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJQT1NUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBtb3ZlQXNzZXRzOiBmdW5jdGlvbihwYXlsb2FkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL21vdmVBc3NldHNcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgICAgICBkYXRhOiBwYXlsb2FkLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUE9TVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgZGVsZXRlQXNzZXRzOiBmdW5jdGlvbihwYXlsb2FkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL2RlbGV0ZUFzc2V0c1wiLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgICAgIGRhdGE6IHBheWxvYWQsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJQT1NUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcbiAgICAgIC8vM0Qtc2l0ZSByZWRpcmVjdGlvbiBhcGkgY2FsbFxyXG5cclxuICAgICAgZ2V0M0RQYWdlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBsZXQgdG9rZW4gPSBsb2NhbFN0b3JhZ2VTZXJ2aWNlLmdldChcImFjY2Vzcy10b2tlblwiKTtcclxuXHJcbiAgICAgICAgdmFyIERhdGEzRCA9IHtcclxuICAgICAgICAgIFwieC1hY2Nlc3MtdG9rZW5cIjogdG9rZW4sXHJcbiAgICAgICAgICBwcm9qZWN0SWQ6IFwiNWI2OTdjMDMwYTdlOTcwNTY4MzVhOTRhXCJcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9jbG91ZGVzLTNkLmNvbVwiLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICBkYXRhOiBEYXRhM0RcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8vY3JlYXRlIG5ldyBjbGllbnRcclxuICAgICAgY3JlYXRlQ2xpZW50OiBmdW5jdGlvbihjbGllbnQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImNsaWVudCBpbiBhcGkgZmFjdG9yeVwiLCBjbGllbnQpO1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9jcmVhdGVDbGllbnRcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBPU1RcIiwgdHJ1ZSksXHJcbiAgICAgICAgICAgIGRhdGE6IGNsaWVudFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgc2F2ZUhpZXJhcmNoeVRyZWU6IGZ1bmN0aW9uKHByb2plY3RJZCwgbmFtZSkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9zYXZlSGllcmFyY2h5VHJlZS9cIiArIHByb2plY3RJZCxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUE9TVFwiLCB0cnVlKSxcclxuICAgICAgICAgICAgZGF0YTogbmFtZVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgZ2V0U3lzdGVtVGFnOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvZ2V0Q29tYm9TeXN0ZW1UYWdcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiR0VUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcbiAgICAgIGJvb2tNYXJrUHJvamVjdDogZnVuY3Rpb24oaWQsIGFkZGVkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL2Jvb2tNYXJrUHJvamVjdFwiLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICBwcm9qZWN0SWQ6IGlkLFxyXG4gICAgICAgICAgICAgIGFkZGVkOiBhZGRlZFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUE9TVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG4gICAgICBnZXRCb29rbWFya3M6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9nZXRCb29rbWFya3NcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiR0VUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcbiAgICAgIGdldEhpZXJhcmNoeVRlbXBsYXRlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvZ2V0SGllcmFyY2h5VGVtcGxhdGVcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiR0VUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBsb2FkSGllcmFyY2h5VHJlZTogZnVuY3Rpb24ocGF5bG9hZCkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9sb2FkSGllcmFyY2h5VHJlZVwiLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICBkYXRhOiBwYXlsb2FkLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUE9TVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG4gICAgICBuZXdGaWxlVXBsb2FkOiBmdW5jdGlvbihwYXlsb2FkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL25ld0ZpbGVVcGxvYWRcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgZGF0YTogcGF5bG9hZCxcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBPU1RcIiwgdHJ1ZSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIHNob3dQcm9qZWN0RmlsZXM6IGZ1bmN0aW9uKHF1ZXJ5T2JqKSB7XHJcbiAgICAgICAgbGV0IHF1ZXJ5ID0gIXF1ZXJ5T2JqIC8vIGJ1aWxkaW5nIHF1ZXJ5IHN0cmluZ1xyXG4gICAgICAgICAgPyBcIlwiXHJcbiAgICAgICAgICA6IE9iamVjdC5rZXlzKHF1ZXJ5T2JqKS5yZWR1Y2UoKGFjYywgdikgPT4ge1xyXG4gICAgICAgICAgICAgIGxldCBzdHIgPSBgJHt2fT0ke3F1ZXJ5T2JqW3ZdfSZgO1xyXG4gICAgICAgICAgICAgIGFjYyArPSBzdHI7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGFjYztcclxuICAgICAgICAgICAgfSwgXCI/XCIpO1xyXG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkuc2xpY2UoMCwgLTEpOyAvLyByZW1vdmUgdHJhaWxpbmcgJlxyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9zaG93UHJvamVjdEZpbGVzXCIgKyBxdWVyeSxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiR0VUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcbiAgICAgIGNoYW5nZVByb2plY3RUZW1wbGF0ZTogZnVuY3Rpb24ocGF5bG9hZCkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9jaGFuZ2VQcm9qZWN0VGVtcGxhdGVcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgZGF0YTogcGF5bG9hZCxcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBPU1RcIiwgdHJ1ZSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuICAgICAgc2hvd1Byb2plY3RGaWxlczogZnVuY3Rpb24oaWQsIGxpbWl0KSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL3Nob3dQcm9qZWN0RmlsZXMvXCIgKyBpZCArIFwiP2xpbWl0PVwiICsgbGltaXQsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIkdFVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG4gICAgICBnZXRQcm9qZWN0QnlJZDogZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvZ2V0UHJvamVjdEJ5SWQvXCIgKyBpZCxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiR0VUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcbiAgICAgIGNoZWNrQXNzZXREdXBsaWNhdGU6IGZ1bmN0aW9uKHBheWxvYWQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvY2hlY2tBc3NldER1cGxpY2F0ZVwiLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUE9TVFwiLCB0cnVlKSxcclxuICAgICAgICAgICAgZGF0YTogcGF5bG9hZFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG4gICAgICBjcmVhdGVOZXdTdXBwbGllcjogZnVuY3Rpb24oc3VwcGxpZXIpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgIFVwbG9hZC51cGxvYWQoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9hZGRzdXBwbGllclwiLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICBkYXRhOiBzdXBwbGllcixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBPU1RcIiwgdHJ1ZSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGdldEFsbFN1cHBsaWVyczogZnVuY3Rpb24ocXVlcnlPYmopIHtcclxuICAgICAgICBsZXQgcXVlcnkgPSAhcXVlcnlPYmogLy8gYnVpbGRpbmcgcXVlcnkgc3RyaW5nXHJcbiAgICAgICAgICA/IFwiXCJcclxuICAgICAgICAgIDogT2JqZWN0LmtleXMocXVlcnlPYmopLnJlZHVjZSgoYWNjLCB2KSA9PiB7XHJcbiAgICAgICAgICAgICAgbGV0IHN0ciA9IGAke3Z9PSR7cXVlcnlPYmpbdl19JmA7XHJcbiAgICAgICAgICAgICAgYWNjICs9IHN0cjtcclxuICAgICAgICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICAgICAgICB9LCBcIj9cIik7XHJcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5zbGljZSgwLCAtMSk7IC8vIHJlbW92ZSB0cmFpbGluZyAmXHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL2xpc3RhbGxzdXBwbGllcnNcIiArIHF1ZXJ5LFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJHRVRcIiwgdHJ1ZSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGdldEFsbFN1YmNvbnRyYWN0b3JzOiBmdW5jdGlvbihxdWVyeU9iaikge1xyXG4gICAgICAgIGxldCBxdWVyeSA9ICFxdWVyeU9iaiAvLyBidWlsZGluZyBxdWVyeSBzdHJpbmdcclxuICAgICAgICAgID8gXCJcIlxyXG4gICAgICAgICAgOiBPYmplY3Qua2V5cyhxdWVyeU9iaikucmVkdWNlKChhY2MsIHYpID0+IHtcclxuICAgICAgICAgICAgICBsZXQgc3RyID0gYCR7dn09JHtxdWVyeU9ialt2XX0mYDtcclxuICAgICAgICAgICAgICBhY2MgKz0gc3RyO1xyXG4gICAgICAgICAgICAgIHJldHVybiBhY2M7XHJcbiAgICAgICAgICAgIH0sIFwiP1wiKTtcclxuICAgICAgICBxdWVyeSA9IHF1ZXJ5LnNsaWNlKDAsIC0xKTsgLy8gcmVtb3ZlIHRyYWlsaW5nICZcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvbGlzdGFsbHN1YmNvbnRyYWN0b3JcIiArIHF1ZXJ5LFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJHRVRcIiwgdHJ1ZSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGFkZFByb2plY3RSb29mUGxhbjogZnVuY3Rpb24ocGF5bG9hZCwgcHJvamVjdElkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL2FkZFByb2plY3RSb29mUGxhblwiLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG5cclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBPU1RcIiwgdHJ1ZSksXHJcbiAgICAgICAgICAgIGRhdGE6IHBheWxvYWRcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGdlbmVyYXRlUm9vZlBsYW5zOiBmdW5jdGlvbihwYXlsb2FkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL2dlbmVyYXRlUm9vZlBsYW5zXCIsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJQT1NUXCIsIHRydWUpLFxyXG4gICAgICAgICAgICBkYXRhOiBwYXlsb2FkXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBhZGRSb29mUGxhbnNGcm9tQXNzZXQ6IGZ1bmN0aW9uKHBheWxvYWQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvYWRkUm9vZlBsYW5zRnJvbUFzc2V0XCIsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJQT1NUXCIsIHRydWUpLFxyXG4gICAgICAgICAgICBkYXRhOiBwYXlsb2FkXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBnZXRTdXBwbGllckJ5SWQ6IGZ1bmN0aW9uKHN1cHBsaWVySUQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiBgJHt1cmx9L2FwaS9nZXRzdXBwbGllci8ke3N1cHBsaWVySUR9YCxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiR0VUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBjcmVhdGVOZXdTdWJjb250cmFjdG9yOiBmdW5jdGlvbihzdWJjb250cmFjdG9yKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICBVcGxvYWQudXBsb2FkKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvYWRkc3ViY29udHJhY3RvclwiLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICBkYXRhOiBzdWJjb250cmFjdG9yLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUE9TVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgZ2V0U3ViY29udHJhY3RvckJ5SWQ6IGZ1bmN0aW9uKHN1cHBsaWVySUQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiBgJHt1cmx9L2FwaS9nZXRzdWJjb250cmFjdG9yLyR7c3VwcGxpZXJJRH1gLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJHRVRcIiwgdHJ1ZSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGlzc3VlSW1hZ2U6IGZ1bmN0aW9uKHBheWxvYWQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgIFVwbG9hZC51cGxvYWQoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9pc3N1ZUltYWdlXCIsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIGRhdGE6IHBheWxvYWQsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJQT1NUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBuZXdJc3N1ZXMzRmlsZVVwbG9hZDogZnVuY3Rpb24ocGF5bG9hZCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiSU4gUzMgSVNTVUUgRlVOQ1RJT05cIik7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL25ld0lzc3VlczNGaWxlVXBsb2FkXCIsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIGRhdGE6IHBheWxvYWQsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJQT1NUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBwb3N0Q29tbWVudEZvcklzc3VlOiBmdW5jdGlvbihpZCwgY29tbWVudCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQ29tbWVudDogXCIsIGNvbW1lbnQpO1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9hZGRjb21tZW50L1wiICsgaWQsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgICAgICAgZGF0YTogY29tbWVudCxcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBVVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgc2F2ZUxvY2FsSXNzdWVBc3NldDogZnVuY3Rpb24oZmlsZXMpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgIFVwbG9hZC51cGxvYWQoe1xyXG4gICAgICAgICAgICB1cmw6IGAke3VybH0vYXBpL2xvY2FsRmlsZUltYWdlc2AsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJQT1NUXCIsIHRydWUpLFxyXG4gICAgICAgICAgICBkYXRhOiBmaWxlc1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgcG9zdE1hcmtJbWc6IGZ1bmN0aW9uKGR0KSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJkYXRhOiBcIiwgZHQpO1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgVXBsb2FkLnVwbG9hZCh7XHJcbiAgICAgICAgICAgIHVybDogYCR7dXJsfS9hcGkvcG9zdG1hcmtpbmdzYCxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBPU1RcIiwgdHJ1ZSksXHJcbiAgICAgICAgICAgIGRhdGE6IGR0XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICByZU9wZW5Jc3N1ZVN0YXR1c1VwZGF0ZTogZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICB2YXIgSXNzdWVzdGF0dXNPYmogPSB7IGNvbXBsZXRpb25TdGF0dXM6IFwiT1BFTlwiIH07XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL3Jlb3BlblN0YXR1cy9cIiArIGlkLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgICAgIGRhdGE6IElzc3Vlc3RhdHVzT2JqLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUFVUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBnZXRBbGxBdE9uY2U6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIG1ha2Ugb3VyIG93biBwcm9taXNlXHJcbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgLy8gd2UnbGwgYXN1bWUgdGhhdCB5b3UgY2FuIHB1dCB0aGUgZnJ1aXQgYXMgcGFydCBvZiB0aGUgcGF0aFxyXG4gICAgICAgIHZhciBpbmZvUHJvbWlzZSA9ICRodHRwKHtcclxuICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL2dldGFkbWludXNlcnNcIixcclxuICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJHRVRcIiwgdHJ1ZSlcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgZGV0YWlsc1Byb21pc2UgPSAkaHR0cCh7XHJcbiAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9saXN0QWxsUm9vZmVyc1wiLFxyXG4gICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIkdFVFwiLCB0cnVlKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vICRodHRwLmdldCh1cmwgKyBcIi9hcGkvbGlzdEFsbFJvb2ZlcnNcIik7XHJcblxyXG4gICAgICAgICRxLmFsbChbaW5mb1Byb21pc2UsIGRldGFpbHNQcm9taXNlXSkudGhlbihmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHtcclxuICAgICAgICAgICAgZnJ1aXRJbmZvOiBkYXRhWzBdLFxyXG4gICAgICAgICAgICBmcnVpdERldGFpbHM6IGRhdGFbMV1cclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgc2F2ZUlzc3VlQXNDb21wbGV0ZTogZnVuY3Rpb24oaWQsIG9iamVjdCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKG9iamVjdCk7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICBVcGxvYWQudXBsb2FkKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvbWFya2lzc3VlYXNjb21wbGV0ZS9cIiArIGlkLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgICAgIGRhdGE6IG9iamVjdCxcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBVVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxufSkoKTtcclxuIiwiKCgpID0+IHtcclxuICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5mYWN0b3J5KFwiYXV0aEZhY3RvcnlcIiwgYXV0aEZhY3RvcnkpO1xyXG5cclxuICBmdW5jdGlvbiBhdXRoRmFjdG9yeSgkaHR0cCwgJGxvY2F0aW9uLCBsb2NhbFN0b3JhZ2VTZXJ2aWNlKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBjaGVja1VzZXI6ICgpID0+IHtcclxuICAgICAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZVNlcnZpY2UuZ2V0KFwiYWNjZXNzLXRva2VuXCIpO1xyXG4gICAgICAgIGlmICh0b2tlbiAmJiB0b2tlbiAhPSBcIlwiKSB7XHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgY2hlY2tQcml2aWxlZ2U6ICh0eXBlLCBzdWJUeXBlKSA9PiB7XHJcbiAgICAgICAgbGV0IHsgcHJpdmlsZWdlIH0gPSBsb2NhbFN0b3JhZ2VTZXJ2aWNlLmdldChcInVzZXJEYXRhXCIpO1xyXG4gICAgICAgIGxldCB7IHByaXZpbGVnZXMgfSA9IGxvY2FsU3RvcmFnZVNlcnZpY2UuZ2V0KFwiY29tcGFueURhdGFcIik7XHJcblxyXG4gICAgICAgIGlmIChwcml2aWxlZ2UgPD0gcHJpdmlsZWdlc1t0eXBlXVtzdWJUeXBlXSkge1xyXG4gICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmZhY3RvcnkoXCJmaWxlTWFuYWdlckZhY3RvcnlcIiwgZmlsZU1hbmFnZXJGYWN0b3J5KTtcclxuXHJcbiAgZnVuY3Rpb24gZmlsZU1hbmFnZXJGYWN0b3J5KGFwaUZhY3RvcnksIE5vdGlmaWNhdGlvbikge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgY2xpcEJvYXJkOiAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLyogICovXHJcbiAgICAgICAgbGV0IGl0ZW1zID0ge1xyXG4gICAgICAgICAgdHlwZTogMCxcclxuICAgICAgICAgIGRhdGE6IFtdLFxyXG4gICAgICAgICAgc291cmNlOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgY29weTogZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgICAgICBpdGVtcy5zb3VyY2UgPSBudWxsO1xyXG4gICAgICAgICAgICBpdGVtcy50eXBlID0gMDtcclxuICAgICAgICAgICAgaXRlbXMuZGF0YSA9IFtpdGVtXTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBjdXQ6IGZ1bmN0aW9uKGl0ZW0sIHNvdXJjZSkge1xyXG4gICAgICAgICAgICBpdGVtcy5zb3VyY2UgPSBzb3VyY2U7XHJcbiAgICAgICAgICAgIGl0ZW1zLnR5cGUgPSAxO1xyXG4gICAgICAgICAgICBpdGVtcy5kYXRhID0gW2l0ZW1dO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHBhc3RlOiBmdW5jdGlvbihkZXN0SWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICBpZiAoaXRlbXMuZGF0YS5sZW5ndGggPCAxKSB7XHJcbiAgICAgICAgICAgICAgICBOb3RpZmljYXRpb24ud2FybmluZyhcIkNsaXBib2FyZCBpcyBlbXB0eVwiKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgY29uc3QgYXBpVHlwZSA9IGl0ZW1zLnR5cGUgPT09IDAgPyBcImNsb25lQXNzZXRzXCIgOiBcIm1vdmVBc3NldHNcIjtcclxuXHJcbiAgICAgICAgICAgICAgLyogQ2hhbmdlIHBheWxvYWQgZGVwZW5kaW5nIHVwb24gY3V0IG9yIGNvcHkgKi9cclxuICAgICAgICAgICAgICBsZXQgcGF5bG9hZCA9IHtcclxuICAgICAgICAgICAgICAgIGFzc2V0SWQ6IGl0ZW1zLmRhdGEubWFwKHggPT4geC5faWQpLFxyXG4gICAgICAgICAgICAgICAgc291cmNlSWQ6IGl0ZW1zLnR5cGUgPT09IDAgPyB1bmRlZmluZWQgOiBpdGVtcy5zb3VyY2UsXHJcbiAgICAgICAgICAgICAgICBkZXN0SWQ6IGl0ZW1zLnR5cGUgPT09IDAgPyB1bmRlZmluZWQgOiBkZXN0SWQsXHJcbiAgICAgICAgICAgICAgICBoaWVyYXJjaHlJZDogaXRlbXMudHlwZSA9PT0gMCA/IGRlc3RJZCA6IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgIGFwaUZhY3RvcnlbYXBpVHlwZV0ocGF5bG9hZClcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBOb3RpZmljYXRpb24uc3VjY2VzcyhyZXNwLmRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgIC8qIENsZWFyIGNsaXBib2FyZCBhZnRlciBwYXN0aW5nICovXHJcbiAgICAgICAgICAgICAgICAgIGl0ZW1zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBudWxsXHJcbiAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICAgICAgICAgICAgcmVqZWN0KGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICB9KSgpLFxyXG5cclxuICAgICAgbmF2aWdhdGlvblN0YWNrOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBsZXQgc3RhY2sgPSBbXSxcclxuICAgICAgICAgIGhlYWQgPSBzdGFjay5sZW5ndGggLSAxLFxyXG4gICAgICAgICAgLy8gVE9ETzogbm8gYWN0aW9uIGhhbmRsZXIgcmVxdWlyZWQgZm9yIG5vd1xyXG4gICAgICAgICAgYXR0YWNoSGFuZGxlciA9IGFjdGlvbiA9PiB7XHJcbiAgICAgICAgICAgIGxldCBvYmogPSB7fTtcclxuICAgICAgICAgICAgcmV0dXJuIG9iajtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHB1c2g6IGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBzdGFjay5zcGxpY2UoaGVhZCArIDEsIHN0YWNrLmxlbmd0aCwgaXRlbSk7XHJcbiAgICAgICAgICAgIGhlYWQgPSBzdGFjay5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGZvcndhcmQ6ICgpID0+IHtcclxuICAgICAgICAgICAgbGV0IG9iajtcclxuICAgICAgICAgICAgaWYgKCFzdGFjay5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAvKiBJZ25vcmUgZm9yIGVtcHR5IHN0YWNrICovXHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChoZWFkID09PSBzdGFjay5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgLyogSWdub3JlIGZvciBlbmQgb2YgdGhlIHN0YWNrICovXHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBoZWFkKys7XHJcbiAgICAgICAgICAgIGlmIChzdGFja1toZWFkXSkge1xyXG4gICAgICAgICAgICAgIHN0YWNrW2hlYWRdLnRvZ2dsZSgpO1xyXG4gICAgICAgICAgICAgIG9iaiA9IHN0YWNrW2hlYWRdO1xyXG4gICAgICAgICAgICAgIHJldHVybiBvYmo7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBiYWNrd2FyZDogKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgb2JqO1xyXG4gICAgICAgICAgICBpZiAoIXN0YWNrLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgIC8qIElnbm9yZSBmb3IgZW1wdHkgc3RhY2sgKi9cclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChoZWFkIDwgMCkge1xyXG4gICAgICAgICAgICAgIC8qIElnbm9yZSBmb3IgZW5kIG9mIHRoZSBzdGFjayAqL1xyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc3RhY2tbaGVhZF0pIHtcclxuICAgICAgICAgICAgICBzdGFja1toZWFkXS50b2dnbGUoKTtcclxuICAgICAgICAgICAgICBoZWFkLS07XHJcbiAgICAgICAgICAgICAgb2JqID0gc3RhY2tbaGVhZF07XHJcbiAgICAgICAgICAgICAgcmV0dXJuIG9iajtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBicmVhZENydW1iOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBsZXQgYnJlYWRDcnVtYnMgPSBbXTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgc2V0OiB2YWwgPT4ge1xyXG4gICAgICAgICAgICBicmVhZENydW1icy5wdXNoKHZhbCk7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZ2V0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBicmVhZENydW1icztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBmaWxlT2JqXHJcbiAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9ICB7IHMzOiBbZmlsZXNdLCBjbG91ZGluYXJ5OiBbZmlsZXNdIH1cclxuICAgICAgICovXHJcblxyXG4gICAgICBzcGxpdERlc3RpbmF0aW9uOiBmaWxlc0FycmF5ID0+IHtcclxuICAgICAgICByZXR1cm4gZmlsZXNBcnJheS5yZWR1Y2UoXHJcbiAgICAgICAgICAoYWNjLCB4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICB4LnNpemUgPCA1MDAwMDAwMCAmJlxyXG4gICAgICAgICAgICAgICh4LnR5cGUgPT09IFwiYXBwbGljYXRpb24vcGRmXCIgfHwgL2ltYWdlKi8udGVzdCh4LnR5cGUpKVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICBhY2MuY2xvdWRpbmFyeS5wdXNoKHgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8qIElmIGZpbGUgc2l6ZSBpcyBncmVhdGVyIHRoYW4gNTBtYiBhbmQgdGhlIGZpbGUgaXMgYSBwZGYsIGdlbmVyYXRlIGEgdGh1bWJuYWlsICovXHJcbiAgICAgICAgICAgICAgYWNjLnMzLnB1c2goeCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGFjYztcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB7IHMzOiBbXSwgY2xvdWRpbmFyeTogW10gfVxyXG4gICAgICAgICk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQHBhcmFtIHtPYmplY3R9IGZpbGVcclxuICAgICAgICogQHJldHVybnMge051bWJlcn0gIDEgLSBkaXJlY3QgczMsIDIgLSBzMyAtPiBjbG91ZGluYXJ5XHJcbiAgICAgICAqL1xyXG5cclxuICAgICAgcmVzb2x2ZURlc3RUeXBlOiBmaWxlID0+IHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBmaWxlLnNpemUgPCA1MDAwMDAwMCAmJlxyXG4gICAgICAgICAgKGZpbGUudHlwZSA9PT0gXCJhcHBsaWNhdGlvbi9wZGZcIiB8fCAvaW1hZ2UqLy50ZXN0KGZpbGUudHlwZSkpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICByZXR1cm4gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQHBhcmFtIHtPYmplY3RbXX0gZmlsZXNcclxuICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XHJcbiAgICAgICAqL1xyXG4gICAgICBjaGVja1VwbG9hZENvbXBsZXRpb246IGZpbGVzID0+IHtcclxuICAgICAgICBsZXQgYm9vbCA9IHRydWU7XHJcbiAgICAgICAgZmlsZXMuczMuZm9yRWFjaCh4ID0+IHtcclxuICAgICAgICAgIGlmICgheC5jb21wbGV0ZWQgJiYgIXguYWJvcnRlZCAmJiBib29sKSB7XHJcbiAgICAgICAgICAgIGJvb2wgPSBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBmaWxlcy5jbG91ZGluYXJ5LmZvckVhY2goeCA9PiB7XHJcbiAgICAgICAgICBpZiAoIXguY29tcGxldGVkICYmICF4LmFib3J0ZWQgJiYgYm9vbCkge1xyXG4gICAgICAgICAgICBib29sID0gZmFsc2U7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGJvb2w7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQHBhcmFtIHtPYmplY3RbXX0gZmlsZXMgLSBBcnJheSBvZiBmaWxlXHJcbiAgICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSAtIFJlc29sdmluZyB3aWxsIGZldGNoIGFuIG9iamVjdCBvZiBmaWxlcyBjYXRlZ29yaXplZCBpbnRvIHR3byBhcnJheXNcclxuICAgICAgICovXHJcblxyXG4gICAgICBjaGVja0R1cGxpY2F0ZUZpbGVzOiAoZmlsZXMsIGRlc3RJZCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgICAgIC5jaGVja0Fzc2V0RHVwbGljYXRlKHtcclxuICAgICAgICAgICAgICBhc3NldE5hbWVzOiBmaWxlcy5tYXAoeCA9PiB4Lm5hbWUpLFxyXG4gICAgICAgICAgICAgIGRlc3RJZFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgICAvKiBHZXQgZHVwbGljYXRlIGZpbGUgb2JqICovXHJcbiAgICAgICAgICAgICAgbGV0IGR1cGxpY2F0ZUZpbGVzID0gZmlsZXNcclxuICAgICAgICAgICAgICAgIC5tYXAoeCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHguYWN0aW9uID0gXCJyZW5hbWVcIjtcclxuICAgICAgICAgICAgICAgICAgeC5hc3NldE5hbWUgPSB4Lm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiB4O1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5yZWR1Y2UoXHJcbiAgICAgICAgICAgICAgICAgIChhY2MsIHgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXNwLmRhdGEuZHVwbGljYXRlcy5pbmRleE9mKHgubmFtZSkgPT09IC0xXHJcbiAgICAgICAgICAgICAgICAgICAgICA/IGFjYy51cGxvYWRGaWxlcy5wdXNoKHgpXHJcbiAgICAgICAgICAgICAgICAgICAgICA6IGFjYy5kdXBsaWNhdGVzLnB1c2goeCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XHJcbiAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgIHsgZHVwbGljYXRlczogW10sIHVwbG9hZEZpbGVzOiBbXSB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICByZXNvbHZlKGR1cGxpY2F0ZUZpbGVzKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICAgIHJlamVjdChlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQHBhcmFtIHtPYmplY3RbXX0gZmlsZXMgLSBBcnJheSBvZiBmaWxlXHJcbiAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxyXG4gICAgICAgKi9cclxuXHJcbiAgICAgIGNoZWNrTmFtZUNoYW5nZTogZmlsZXMgPT4ge1xyXG4gICAgICAgIHJldHVybiBmaWxlcy5maWx0ZXIoeCA9PiB4LmFjdGlvbiA9PT0gXCJyZW5hbWVcIikucmVkdWNlKChhY2MsIHgpID0+IHtcclxuICAgICAgICAgIGFjYyA9IGFjYyB8fCB4LmFzc2V0TmFtZSA9PT0geC5uYW1lO1xyXG4gICAgICAgICAgcmV0dXJuIGFjYztcclxuICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGZpbGVOYW1lXHJcbiAgICAgICAqIEByZXR1cm5zIHtTdHJpbmd9XHJcbiAgICAgICAqL1xyXG5cclxuICAgICAgZ2VuZXJhdGVWZXJzaW9uOiBmaWxlTmFtZSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGAke2ZpbGVOYW1lfSAodiR7RGF0ZS5ub3coKX0pYDtcclxuICAgICAgfSxcclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBmaWxlXHJcbiAgICAgICAqL1xyXG4gICAgICBnZW5lcmF0ZVRodW1ibmFpbDogZmlsZSA9PiB7XHJcbiAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgcGRmanNMaWIuZ2V0RG9jdW1lbnQoeyB1cmw6IHJlYWRlci5yZXN1bHQgfSkudGhlbihkb2MgPT4ge1xyXG4gICAgICAgICAgICBkb2MuZ2V0UGFnZSgxKS50aGVuKHBhZ2UgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicGFnZSEhIVwiLCBwYWdlKTtcclxuICAgICAgICAgICAgICB2YXIgc2NhbGUgPSAxO1xyXG4gICAgICAgICAgICAgIHZhciB2aWV3cG9ydCA9IHBhZ2UuZ2V0Vmlld3BvcnQoc2NhbGUpO1xyXG4gICAgICAgICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICAgICAgICAgIHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gdmlld3BvcnQuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IHZpZXdwb3J0LndpZHRoO1xyXG5cclxuICAgICAgICAgICAgICB2YXIgdGFzayA9IHBhZ2UucmVuZGVyKHtcclxuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQ6IGNvbnRleHQsXHJcbiAgICAgICAgICAgICAgICB2aWV3cG9ydDogdmlld3BvcnRcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB0YXNrLnByb21pc2UudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhVVJMID0gY2FudmFzLnRvRGF0YVVSTChcImltYWdlL3BuZ1wiKTtcclxuICAgICAgICAgICAgICAgIHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcbiAgICAgICAgICAgICAgICBsaW5rLmRvd25sb2FkID0gXCJyb29mcGxhbl9pbWFnZV9cIiArIERhdGUubm93KCk7XHJcbiAgICAgICAgICAgICAgICBsaW5rLmhyZWYgPSBkYXRhVVJMO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTtcclxuICAgICAgICAgICAgICAgIGxpbmsuY2xpY2soKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHNwbGl0RmlsZURlc3Q6IGZpbGVzQXJyYXkgPT4ge1xyXG4gICAgICAgIHJldHVybiBmaWxlc0FycmF5LnJlZHVjZShcclxuICAgICAgICAgIChhY2MsIHgpID0+IHtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgIHguZmlsZS5zaXplIDwgMjAwMDAwMDAgJiZcclxuICAgICAgICAgICAgICAoeC5maWxlLnR5cGUgPT09IFwiYXBwbGljYXRpb24vcGRmXCIgfHwgL2ltYWdlKi8udGVzdCh4LmZpbGUudHlwZSkpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgIGFjYy5jbG91ZGluYXJ5LnB1c2goeCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgYWNjLnMzLnB1c2goeCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGFjYztcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB7IHMzOiBbXSwgY2xvdWRpbmFyeTogW10gfVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmZhY3RvcnkoXCJnbG9iYWxzXCIsIGdsb2JhbHMpO1xyXG5cclxuICBmdW5jdGlvbiBnbG9iYWxzKFxyXG4gICAgJGh0dHAsXHJcbiAgICAkc3RhdGUsXHJcbiAgICAkbG9jYXRpb24sXHJcbiAgICBuZ1Byb2dyZXNzRmFjdG9yeSxcclxuICAgIE5vdGlmaWNhdGlvbixcclxuICAgIGxvY2FsU3RvcmFnZVNlcnZpY2VcclxuICApIHtcclxuICAgIC8qIFRvIGF2b2lkIHJlZHVuZGFudCBmdW5jdGlvbiBjYWxscyBvZiB0aGUgc2FtZSB0eXBlIChFZy4gbXVsdGlwbGUgdG9rZW4gZXhwaXJlZCBtZXNzYWdlcykgKi9cclxuICAgIGxldCB0aHJvdHRsZXIgPSAoKCkgPT4ge1xyXG4gICAgICBsZXQgZW5hYmxlZCA9IHRydWU7XHJcbiAgICAgIHJldHVybiBmbiA9PiB7XHJcbiAgICAgICAgaWYgKGVuYWJsZWQpIHtcclxuICAgICAgICAgIGVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBlbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgZm4oKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICB9KSgpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHByb2dyZXNzOiAoKCkgPT4ge1xyXG4gICAgICAgIGxldCBwcm9ncmVzc2JhciA9IG5nUHJvZ3Jlc3NGYWN0b3J5LmNyZWF0ZUluc3RhbmNlKCk7XHJcbiAgICAgICAgcmV0dXJuIHByb2dyZXNzYmFyO1xyXG4gICAgICB9KSgpLFxyXG4gICAgICBsb2dvdXQ6ICgpID0+IHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLnJlbW92ZShcImFjY2Vzcy10b2tlblwiKTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLnJlbW92ZShcInVzZXJEYXRhXCIpO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZVNlcnZpY2UucmVtb3ZlKFwiY29tcGFueURhdGFcIik7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlU2VydmljZS5zZXQoXCJjdXJyZW50UHJvamVjdFwiLCBudWxsKTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLnJlbW92ZShcImludmVudG9yeVN0YXRlXCIpO1xyXG5cclxuICAgICAgICAkc3RhdGUuZ28oXCJwcmVMb2dpblwiKTtcclxuICAgICAgICB0aHJvdHRsZXIoKCkgPT4gTm90aWZpY2F0aW9uLmVycm9yKFwiUGxlYXNlIGxvZ2luXCIpKTtcclxuICAgICAgfSxcclxuICAgICAgLyogQWNjZXNzIHVzZXIgaW5mbyBnbG9iYWxseSAqL1xyXG4gICAgICB1c2VyU3RvcmU6ICgoKSA9PiB7XHJcbiAgICAgICAgbGV0IHVzZXJEYXRhID0gbG9jYWxTdG9yYWdlU2VydmljZS5nZXQoXCJ1c2VyRGF0YVwiKSB8fCB7fTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHNldDogZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVzZXJSb2xlcyA9IFtcclxuICAgICAgICAgICAgICBcImFkbWluXCIsXHJcbiAgICAgICAgICAgICAgXCJtYW5hZ2VyXCIsXHJcbiAgICAgICAgICAgICAgXCJzdWJfY29udHJhY3RvclwiLFxyXG4gICAgICAgICAgICAgIFwidGVhbV9sZWFkZXJcIixcclxuICAgICAgICAgICAgICBcIndvcmtlclwiXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIGRhdGEucHJpdmlsZWdlID0gdXNlclJvbGVzLmluZGV4T2YoZGF0YS5kZXNpZ25hdGlvbik7XHJcblxyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldChcInVzZXJEYXRhXCIsIGRhdGEpO1xyXG4gICAgICAgICAgICB1c2VyRGF0YSA9IGRhdGE7XHJcbiAgICAgICAgICAgIHJldHVybiB1c2VyRGF0YTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBnZXQ6ICgpID0+IHVzZXJEYXRhLFxyXG4gICAgICAgICAgcmVzZXQ6ICgpID0+IHtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlU2VydmljZS5yZW1vdmUoXCJ1c2VyRGF0YVwiKTtcclxuICAgICAgICAgICAgdXNlckRhdGEgPSB7fTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICB9KSgpLFxyXG5cclxuICAgICAgY29tcGFueVN0b3JlOiAoKCkgPT4ge1xyXG4gICAgICAgIGxldCBjb21wYW55RGF0YSA9IGxvY2FsU3RvcmFnZVNlcnZpY2UuZ2V0KFwiY29tcGFueURhdGFcIikgfHwgbnVsbDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHNldDogZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZVNlcnZpY2Uuc2V0KFwiY29tcGFueURhdGFcIiwgZGF0YSk7XHJcbiAgICAgICAgICAgIGNvbXBhbnlEYXRhID0gZGF0YTtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbXBhbnlEYXRhO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGdldDogKCkgPT4gY29tcGFueURhdGEsXHJcbiAgICAgICAgICAvKiBDYWxsIHJlZmV0Y2ggd2hlbiBjb21wYW55IGRlcGVuZGFudCBkYXRhIGlzIG1vZGlmaWVkICovXHJcbiAgICAgICAgICByZWZldGNoOiBpZCA9PiB7XHJcbiAgICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgXCJ4LWFjY2Vzcy10b2tlblwiOiBsb2NhbFN0b3JhZ2VTZXJ2aWNlLmdldChcImFjY2Vzcy10b2tlblwiKSxcclxuICAgICAgICAgICAgICAgIHBsYXRmb3JtOiBKU09OLnN0cmluZ2lmeSh7IHNvdXJjZTogXCJ3ZWJcIiB9KVxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgdXJsOiBgaHR0cHM6Ly9hcGkuc3RhZ2luZy5jbG91ZGVzLmV1L2FwaS9nZXRDb21wYW55QnlJZC8ke2lkfWBcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZVNlcnZpY2Uuc2V0KFwiY29tcGFueURhdGFcIiwgcmVzcC5kYXRhKTtcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHJlc2V0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZVNlcnZpY2UucmVtb3ZlKFwiY29tcGFueURhdGFcIik7XHJcbiAgICAgICAgICAgIGNvbXBhbnlEYXRhID0ge307XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfSkoKSxcclxuXHJcbiAgICAgIHByb2plY3RTdG9yZTogKCgpID0+IHtcclxuICAgICAgICBsZXQgY3VycmVudFByb2plY3QgPSBsb2NhbFN0b3JhZ2VTZXJ2aWNlLmdldChcImN1cnJlbnRQcm9qZWN0XCIpIHx8IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHNldDogZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZVNlcnZpY2Uuc2V0KFwiY3VycmVudFByb2plY3RcIiwgZGF0YSk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRQcm9qZWN0ID0gZGF0YTtcclxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRQcm9qZWN0O1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGdldDogKCkgPT4gbG9jYWxTdG9yYWdlU2VydmljZS5nZXQoXCJjdXJyZW50UHJvamVjdFwiKSxcclxuICAgICAgICAgIHJlc2V0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZVNlcnZpY2UucmVtb3ZlKFwiY3VycmVudFByb2plY3RcIik7XHJcbiAgICAgICAgICAgIGN1cnJlbnRQcm9qZWN0ID0gbnVsbDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICB9KSgpLFxyXG5cclxuICAgICAgaW52ZW50b3J5U3RhdGU6ICgpID0+IHtcclxuICAgICAgICBsZXQgc3RhdGUgPSBsb2NhbFN0b3JhZ2VTZXJ2aWNlLmdldChcImludmVudG9yeVN0YXRlXCIpIHx8IHtcclxuICAgICAgICAgIHRhYjogMCxcclxuICAgICAgICAgIHNlYXJjaFRleHQ6IFwiXCIsXHJcbiAgICAgICAgICBwYWdlOiB7XHJcbiAgICAgICAgICAgIG1hdGVyaWFsOiAxLFxyXG4gICAgICAgICAgICBjb21ibzogMVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBzZXRQYWdlOiAodHlwZSwgdmFsdWUpID0+IHtcclxuICAgICAgICAgICAgc3RhdGUucGFnZVt0eXBlXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldChcImludmVudG9yeVN0YXRlXCIsIHN0YXRlKTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBzZXRUYWI6IHZhbCA9PiB7XHJcbiAgICAgICAgICAgIHN0YXRlLnRhYiA9IHZhbDtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlU2VydmljZS5zZXQoXCJpbnZlbnRvcnlTdGF0ZVwiLCBzdGF0ZSk7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgdGV4dDogdGV4dCA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0ZXh0KSB7XHJcbiAgICAgICAgICAgICAgc3RhdGUuc2VhcmNoVGV4dCA9IHRleHQ7XHJcbiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlU2VydmljZS5zZXQoXCJpbnZlbnRvcnlTdGF0ZVwiLCBzdGF0ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBnZXQ6ICgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBtVW5pdHM6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBuYW1lOiBcIm10XCIsXHJcbiAgICAgICAgICB2YWx1ZTogXCJtdFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBuYW1lOiBcInNxLm10XCIsXHJcbiAgICAgICAgICB2YWx1ZTogXCJzcS5tdFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICB2YWx1ZTogXCJjdS5tdFwiLFxyXG4gICAgICAgICAgbmFtZTogXCJjdS5tdFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBuYW1lOiBcImZ0XCIsXHJcbiAgICAgICAgICB2YWx1ZTogXCJmdFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBuYW1lOiBcInNxLmZ0XCIsXHJcbiAgICAgICAgICB2YWx1ZTogXCJzcS5mdFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICB2YWx1ZTogXCJjdS5mdFwiLFxyXG4gICAgICAgICAgbmFtZTogXCJjdS5mdFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICB2YWx1ZTogXCJ1bml0XCIsXHJcbiAgICAgICAgICBuYW1lOiBcInVuaXRcIlxyXG4gICAgICAgIH1cclxuICAgICAgXSxcclxuXHJcbiAgICAgIGdldEN1cnJlbmN5OiAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuICRodHRwLmdldChcIi9kYXRhL2N1cnJlbmNpZXMuanNvblwiKTtcclxuICAgICAgfSxcclxuICAgICAgZ2V0Q291bnRyeUNvZGU6ICgpID0+IHtcclxuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KFwiL2RhdGEvQ291bnRyeUNvZGUuanNvblwiKTtcclxuICAgICAgfSxcclxuICAgICAgZ2V0SW5kdXN0cnk6ICgpID0+IHtcclxuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KFwiL2RhdGEvaW5kdXN0cnkuanNvblwiKTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGRlYm91bmNlOiByYXRlID0+IHtcclxuICAgICAgICBsZXQgdGltZXI7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGZuLCBhcmdzKSB7XHJcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xyXG4gICAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgZm4uYXBwbHkobnVsbCwgYXJncyk7XHJcbiAgICAgICAgICB9LCByYXRlKTtcclxuICAgICAgICB9O1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgZ2VuZXJpY1N0b3JlOiAoKSA9PiB7XHJcbiAgICAgICAgbGV0IGl0ZW07XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHN0b3JlOiB2YWwgPT4ge1xyXG4gICAgICAgICAgICBpdGVtID0gdmFsO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGdldDogKCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwZGZMaW5rXHJcbiAgICAgICAqIEByZXR1cm5zIHtPYmplY3RbXX0gLSBsaW5rcyBvZiBpbmRpdmlkdWFsIHBhZ2VzIGFzIGltYWdlIChjbG91ZGluYXJ5KVxyXG4gICAgICAgKi9cclxuXHJcbiAgICAgIGV4dHJhY3RQYWdlc0Zyb21QZGY6IChwZGZMaW5rLCBwYWdlQ291bnQpID0+IHtcclxuICAgICAgICByZXR1cm4gWy4uLkFycmF5KHBhZ2VDb3VudCkua2V5cygpXS5yZWR1Y2UoKGFjYywgXywgaSkgPT4ge1xyXG4gICAgICAgICAgbGV0IHBhZ2VPYmogPSB7XHJcbiAgICAgICAgICAgIHBhZ2VObzogaSxcclxuICAgICAgICAgICAgdXJsOiBwZGZMaW5rXHJcbiAgICAgICAgICAgICAgLnJlcGxhY2UoXCIvdXBsb2FkL1wiLCBgL3VwbG9hZC9wZ18ke2kgKyAxfS9gKVxyXG4gICAgICAgICAgICAgIC5yZXBsYWNlKC9cXC5wZGYkLywgXCIucG5nXCIpLFxyXG4gICAgICAgICAgICB0aXRsZTogYHRpdGxlXyR7RGF0ZS5ub3coKX1gLFxyXG4gICAgICAgICAgICBzZWxlY3RlZDogZmFsc2UsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlwiXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgYWNjLnB1c2gocGFnZU9iaik7XHJcbiAgICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICAgIH0sIFtdKTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAcGFyYW0ge09iamVjdH0gcGRmIC0gRmlsZSBvYmplY3RcclxuICAgICAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICAgICAqL1xyXG5cclxuICAgICAgY3JlYXRlUGFnZXNGcm9tUGRmOiBwZGYgPT4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICBwZGZqc0xpYlxyXG4gICAgICAgICAgICAuZ2V0RG9jdW1lbnQocGRmLnNlY3VyZV91cmwpXHJcbiAgICAgICAgICAgIC5wcm9taXNlLnRoZW4oZG9jID0+IHtcclxuICAgICAgICAgICAgICBQcm9taXNlLmFsbChcclxuICAgICAgICAgICAgICAgIFsuLi5BcnJheShkb2MubnVtUGFnZXMpLmtleXMoKV0ubWFwKChfLCBpKSA9PlxyXG4gICAgICAgICAgICAgICAgICBkb2MuZ2V0UGFnZShpICsgMSlcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAudGhlbihwYWdlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHJlc29sdmUoXHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZXMubWFwKCh4LCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAoeC5wYWdlTm8gPSBpKSwgKHgudGl0bGUgPSBgdGl0bGVfJHtEYXRlLm5vdygpfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgeC5zZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgeC5kZXNjcmlwdGlvbiA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geDtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICAgICAgICByZWplY3QoZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgcmVuZGVyUGFnZTogKHBhZ2UsIGNhbnZhcykgPT4ge1xyXG4gICAgICAgIHZhciB2aWV3cG9ydCA9IHBhZ2UuZ2V0Vmlld3BvcnQoXHJcbiAgICAgICAgICBjYW52YXMud2lkdGggLyBwYWdlLmdldFZpZXdwb3J0KDEpLndpZHRoXHJcbiAgICAgICAgKTtcclxuICAgICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHZpZXdwb3J0LmhlaWdodDtcclxuXHJcbiAgICAgICAgdmFyIHRhc2sgPSBwYWdlLnJlbmRlcih7XHJcbiAgICAgICAgICBjYW52YXNDb250ZXh0OiBjb250ZXh0LFxyXG4gICAgICAgICAgdmlld3BvcnQ6IHZpZXdwb3J0XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuZmFjdG9yeShcImlzc3VlY3JlYXRlRmFjdG9yeVwiLCBpc3N1ZWNyZWF0ZUZhY3RvcnkpO1xyXG4gIFxyXG4gICAgZnVuY3Rpb24gaXNzdWVjcmVhdGVGYWN0b3J5KFxyXG4gICAgICAkaHR0cCxcclxuICAgICAgJHN0YXRlLFxyXG4gICAgICAkbG9jYXRpb24sXHJcbiAgICAgIGxvY2FsU3RvcmFnZVNlcnZpY2UsXHJcbiAgICAgIGdsb2JhbHMsXHJcbiAgICAgIFVwbG9hZCxcclxuICAgICAgTm90aWZpY2F0aW9uLFxyXG4gICAgICAkcSxcclxuICAgICAgYXBpRmFjdG9yeSxcclxuICAgICAgdXBsb2FkRmFjdG9yeSxcclxuICAgICAgZmlsZU1hbmFnZXJGYWN0b3J5XHJcbiAgICApIHtcclxuICAgICAgICBsZXQgdm09dGhpcztcclxuICAgICAgICBsZXQgczNGaWxlT2JqZXRzPVtdO1xyXG4gICAgICAgIC8vY29uc3QgdXJsID0gXCJodHRwczovL2FwaS5zdGFnaW5nLmNsb3VkZXMuZXVcIixcclxuICAgICAgIFxyXG4gICAgICAgIGhlYWRlcnMgPSAobWV0aG9kLCB0b2tlbikgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogbWV0aG9kID09PSBcIkdFVFwiID8gdW5kZWZpbmVkIDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgICAgIFwieC1hY2Nlc3MtdG9rZW5cIjogdG9rZW5cclxuICAgICAgICAgICAgICA/IGxvY2FsU3RvcmFnZVNlcnZpY2UuZ2V0KFwiYWNjZXNzLXRva2VuXCIpXHJcbiAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHBsYXRmb3JtOiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgc291cmNlOiBcIndlYlwiXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyBwcm9ncmVzcywgdXNlclN0b3JlLCBsb2dvdXQgfSA9IGdsb2JhbHM7XHJcblxyXG4gICAgICAgcmV0dXJue1xyXG4gICAgICAgICAgICBnZXRBbGxBdE9uY2UgOiBmdW5jdGlvbihvYmplY3QsZmlsZXNhcnJheSl7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIk9CSkVDVDogXCIsb2JqZWN0KTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQVJSQVkgT0YgRklMRVM6IFwiLCBmaWxlc2FycmF5KTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQVJSQVkgT0YgRklMRVMgczM6IFwiLCBmaWxlc2FycmF5LnMzKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQVJSQVkgT0YgRklMRVMgY2xvdWRpbmFyeTogXCIsIGZpbGVzYXJyYXkuY2xvdWRpbmFyeSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAvLyBtYWtlIG91ciBvd24gcHJvbWlzZVxyXG4gICAgICAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XHJcblxyXG4gICAgICAgICAgICAgIGlmKGZpbGVzYXJyYXkuczMubGVuZ3RoKXtcclxuICAgICAgICAgICAgICAgIGxldCBhcnJheT1maWxlc2FycmF5LnMzO1xyXG4gICAgICAgICAgICAgICB2YXIgUzM9ICBhcnJheS5mb3JFYWNoKCAoeCxpLGFycmF5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh4LGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJTMyBGSUxFIEZPUkVBQ0ggTUV0aG9kIGFzIGFycmF5IGlzIG5vdCBudWxsXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIEF0dGFjaCBldmVudHMgYW5kIHByb3BzIHRvIGZpbGVPYmogc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHZpZXcgKi9cclxuICAgICAgICAgICAgICAgICAgICBsZXQgdXBsb2FkSGFuZGxlciA9IGV2YXBvcmF0ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAvKiB1cGxvYWQgdG8gczMgaWYgdmFsdWUgaXMgbGVzcyB0aGFuIDMgKi9cclxuICAgICAgICAgICAgICAgICAgICAgIHguZmlsZS5wYXVzZSA9IHVwbG9hZEZhY3RvcnkucGF1c2UuYmluZChldmFwb3JhdGUsIHgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgeC5maWxlLnJlc3VtZSA9IHVwbG9hZEZhY3RvcnkucmVzdW1lLmJpbmQoZXZhcG9yYXRlLCB4KTtcclxuICAgICAgICAgICAgICAgICAgICAgIHguZmlsZS5hYm9ydCA9IHVwbG9hZEZhY3RvcnkuYWJvcnQuYmluZChldmFwb3JhdGUsIHgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgbGV0IGFkZENvbmZpZyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogeC5maWxlLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGU6IHguZmlsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IChwLCBzdGF0cykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC8vICAgY29uc29sZS5sb2cocCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLyogQVdTIHByb2dyZXNzIHBlcmNlbnRhZ2UgZmFsbHMgYmFjayBzb21ldGltZXMgZHVlIHRvIG1pc3NpbmcgZnJhZ21lbnRhdGlvbi4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgVXBkYXRlIHByb2dyZXNzIHZhbHVlIG9ubHkgd2hlbiBpdCdzIGhpZ2hlciB0aGFuIHRoZSBwcmV2aW91cyB2YWx1ZSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHguZmlsZS5wcm9ncmVzcyA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4LmZpbGUucHJvZ3Jlc3MgPiBNYXRoLnJvdW5kKHAgKiAxMDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8geC5maWxlLnByb2dyZXNzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogTWF0aC5yb3VuZChwICogMTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBDaGVjayBjb21wbGV0aW9uICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uY29tcGxldGVkQWxsID0gZmlsZU1hbmFnZXJGYWN0b3J5LmNoZWNrVXBsb2FkQ29tcGxldGlvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVzYXJyYXlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJlZnJlc2ggdmlldyB3aXRoIHNjb3BlID4gYXBwbHkgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAkdGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAkc2NvcGUuJGFwcGx5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiAoX3hociwgYXdzS2V5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgeC5maWxlLmNvbXBsZXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLyogUmVmcmVzaCB2aWV3IHdpdGggc2NvcGUgPiBhcHBseSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vICR0aW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICRzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNvbXBsZXRlIVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICBldmFwb3JhdGUuYWRkKGFkZENvbmZpZykudGhlbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oYXdzT2JqZWN0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLyogU3VjY2VzcyBibG9jayAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXlsb2FkID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZmlsZU1hbmFnZXJGYWN0b3J5LnJlc29sdmVEZXN0VHlwZSh4LmZpbGUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldERhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXROYW1lOiB4LmZpbGUubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRkZXNjcmlwdGlvbjp4LmNvbW1lbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1Y2tldDogXCIzZGZpbGVzZGF0YVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGB0ZXN0LyR7eC5maWxlLm5hbWV9YCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWltZXR5cGU6IHguZmlsZS50eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBieXRlczogeC5maWxlLnNpemVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGFwaUZhY3RvcnlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIC5uZXdJc3N1ZXMzRmlsZVVwbG9hZChwYXlsb2FkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9uZXdJc3N1ZXMzRmlsZVVwbG9hZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHBheWxvYWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUE9TVFwiLCB0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiczMgcmVzcDogXCIscmVzcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzRmlsZU9iamV0cy5wdXNoKHJlc3ApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGk9PWZpbGVzYXJyYXkuczMubGVuZ3RoLTEpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJhbGVydHMgY2FsbGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImFycmF5OlwiLCB4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAvLyAgIE5vdGlmaWNhdGlvbi5zdWNjZXNzKFwiRmlsZSBzdWNjZXNzZnVsbHkgdXBsb2FkZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkZpbGUgc3VjY2Vzc2Z1bGx5IHVwbG9hZGVkIHRvOlwiLCBhd3NPYmplY3RLZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZWFzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBGYWlsdXJlIGJsb2NrICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgeC5hYm9ydGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBDaGVjayBjb21wbGV0aW9uICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uY29tcGxldGVkQWxsID0gZmlsZU1hbmFnZXJGYWN0b3J5LmNoZWNrVXBsb2FkQ29tcGxldGlvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVzYXJyYXlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJlZnJlc2ggdmlldyB3aXRoIHNjb3BlID4gYXBwbHkgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAkdGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAkc2NvcGUuJGFwcGx5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkZpbGUgZGlkIG5vdCB1cGxvYWQgc3VjZXNzZnVsbHk6XCIsIHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdXBsb2FkRmFjdG9yeS5zdGFydCh1cGxvYWRIYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgLy9jbG91ZGluYXJ5IHVwbG9hZCBmdW5jdGlvbiAgXHJcbiAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgIGlmIChmaWxlc2FycmF5LmNsb3VkaW5hcnkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIHZhciBjbG91ZGluYXJ5UGF5bG9hZCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICBmaWxlczogZmlsZXNhcnJheS5jbG91ZGluYXJ5LFxyXG4gICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgYXBpRmFjdG9yeVxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgLmlzc3VlSW1hZ2UoJHNjb3BlLmNsb3VkaW5hcnlQYXlsb2FkKVxyXG4gICAgICAgICAgICAgICAgdmFyIGNsb3VkID0gIFVwbG9hZC51cGxvYWQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9pc3N1ZUltYWdlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGNsb3VkaW5hcnlQYXlsb2FkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUE9TVFwiLCB0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInJlc3BvbnNlIG9mIGNsb3VkaW5hcnk6IFwiLCByZXNwKTtcclxuICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIENoZWNrIGNvbXBsZXRpb24gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdm0uY29tcGxldGVkQWxsID0gZmlsZU1hbmFnZXJGYWN0b3J5LmNoZWNrVXBsb2FkQ29tcGxldGlvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlc2FycmF5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gJHEuYWxsKFtTMywgY2xvdWRdKS50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICBkZWZlcnJlZC5yZXNvbHZlKHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgczNkYXRhOiBkYXRhWzBdLFxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBjbG91ZGRhdGE6IGRhdGFbMV1cclxuICAgICAgICAgICAgICAgIC8vICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgfSxcclxuXHJcblxyXG4gICAgICAgICAgICBzZW5kRGF0YTpmdW5jdGlvbihvYmplY3QsZmlsZXMpe1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKG9iamVjdClcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhmaWxlcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgLy8gc2VuZEFsbDpmdW5jdGlvbihvYmplY3QsIGZpbGVzYXJyYXkpe1xyXG4gICAgICAgICAgICAvLyAgIGlmKGZpbGVzYXJyYXkpXHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFxyXG4gICAgfVxyXG4gICAgXHJcblxyXG5cclxufSkoKTsiLCIoKCkgPT4ge1xyXG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmZhY3RvcnkoXCJ1cGxvYWRGYWN0b3J5XCIsIHVwbG9hZEZhY3RvcnkpO1xyXG5cclxuICBmdW5jdGlvbiB1cGxvYWRGYWN0b3J5KFxyXG4gICAgJGh0dHAsXHJcbiAgICAkbG9jYXRpb24sXHJcbiAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLFxyXG4gICAgYXBpRmFjdG9yeSxcclxuICAgIFVwbG9hZCxcclxuICAgIGNsb3VkaW5hcnksXHJcbiAgICBOb3RpZmljYXRpb25cclxuICApIHtcclxuICAgIC8qIEFXUyBDT05GSUcgKi9cclxuICAgIGNvbnN0IGJ1Y2tldE5hbWUgPSBcIjNkZmlsZXNkYXRhXCI7XHJcbiAgICBjb25zdCBidWNrZXRSZWdpb24gPSBcImFwLXNvdXRoLTFcIjtcclxuICAgIGxldCBjb25maWcgPSB7XHJcbiAgICAgIHNpZ25lclVybDogYGh0dHBzOi8vYXBpLnN0YWdpbmcuY2xvdWRlcy5ldS9zaWdudjRfYXV0aGAsXHJcbiAgICAgIGF3c19rZXk6IFwiQUtJQUpNTzNZSlRQS1lWNURONUFcIixcclxuICAgICAgYnVja2V0OiBcIjNkZmlsZXNkYXRhL3Rlc3RcIixcclxuICAgICAgYXdzUmVnaW9uOiBidWNrZXRSZWdpb24sXHJcbiAgICAgIGNvbXB1dGVDb250ZW50TWQ1OiB0cnVlLFxyXG4gICAgICBhbGxvd1MzRXhpc3RlbmNlT3B0aW1pemF0aW9uOiB0cnVlLFxyXG4gICAgICBjcnlwdG9NZDVNZXRob2Q6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gQVdTLnV0aWwuY3J5cHRvLm1kNShkYXRhLCBcImJhc2U2NFwiKTtcclxuICAgICAgfSxcclxuICAgICAgY3J5cHRvSGV4RW5jb2RlZEhhc2gyNTY6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gQVdTLnV0aWwuY3J5cHRvLnNoYTI1NihkYXRhLCBcImhleFwiKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpbml0OiAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIEV2YXBvcmF0ZS5jcmVhdGUoY29uZmlnKTtcclxuICAgICAgfSxcclxuICAgICAgc3RhcnQ6IGZ1bmN0aW9uKGhhbmRsZXIpIHtcclxuICAgICAgICBsZXQgZmlsZVVwbG9hZCA9IHRoaXMuaW5pdCgpO1xyXG5cclxuICAgICAgICBmaWxlVXBsb2FkLnRoZW4oaGFuZGxlcikuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSxcclxuICAgICAgcGF1c2U6IGZ1bmN0aW9uKGZpbGUpIHtcclxuICAgICAgICB0aGlzLnBhdXNlKGAzZGZpbGVzZGF0YS90ZXN0LyR7ZmlsZS5uYW1lfWAsIHsgZm9yY2U6IHRydWUgfSlcclxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBmaWxlLmlzUGF1c2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJQYXVzZWQhXCIpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSxcclxuICAgICAgcmVzdW1lOiBmdW5jdGlvbihmaWxlKSB7XHJcbiAgICAgICAgdGhpcy5yZXN1bWUoYDNkZmlsZXNkYXRhL3Rlc3QvJHtmaWxlLm5hbWV9YClcclxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBmaWxlLmlzUGF1c2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVzdW1lZCFcIik7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG4gICAgICBhYm9ydDogZnVuY3Rpb24oZmlsZSkge1xyXG4gICAgICAgIHRoaXMuY2FuY2VsKGAzZGZpbGVzZGF0YS90ZXN0LyR7ZmlsZS5uYW1lfWApXHJcbiAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy9maWxlLmFib3J0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNhbmNlbGVkIVwiKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gdXBsb2FkOiBmaWxlID0+IHtcclxuICAgICAgLy8gICBjb25zb2xlLmxvZyhcImZpbGUhIVwiLCBmaWxlKTtcclxuICAgICAgLy8gICAvKiBDaGVjayBmaWxlIHNpemUgKi9cclxuICAgICAgLy8gICBpZiAoZmlsZS5zaXplID4gMTAwMDAwMDApIHtcclxuICAgICAgLy8gICAgIC8qIHMzIGZvciBmaWxlcyBsYXJnZXIgdGhhbiAxMG1iICovXHJcbiAgICAgIC8vICAgICBjb25zdCBwYXJhbXMgPSB7IEtleTogZmlsZS5uYW1lLCBDb250ZW50VHlwZTogZmlsZS50eXBlLCBCb2R5OiBmaWxlIH07XHJcbiAgICAgIC8vICAgICBzMy5wdXRPYmplY3QocGFyYW1zKVxyXG4gICAgICAvLyAgICAgICAub24oXCJodHRwVXBsb2FkUHJvZ3Jlc3NcIiwgcHJvZ3Jlc3MgPT4ge1xyXG4gICAgICAvLyAgICAgICAgIC8qIFRPRE86IEdyYWJiaW5nIHByb2dyZXNzIGV2ZW50ICovXHJcbiAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coXCJwcm9ncmVzXCIsIHByb2dyZXNzKTtcclxuICAgICAgLy8gICAgICAgfSlcclxuICAgICAgLy8gICAgICAgLnNlbmQoKGVyciwgZGF0YSkgPT4ge1xyXG4gICAgICAvLyAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgLy8gICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIC8vICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgLy8gICAgICAgICAgIGNvbnNvbGUubG9nKFwiZG9uZVwiLCBkYXRhKTtcclxuICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgIC8vICAgICAgIH0pO1xyXG4gICAgICAvLyAgIH0gZWxzZSB7XHJcbiAgICAgIC8vICAgICAvKiBTZW5kIHRvIGNsb3VkaW5hcnkgKi9cclxuICAgICAgLy8gICAgIFVwbG9hZC51cGxvYWQoe1xyXG4gICAgICAvLyAgICAgICB1cmw6XHJcbiAgICAgIC8vICAgICAgICAgXCJodHRwczovL2FwaS5jbG91ZGluYXJ5LmNvbS92MV8xL1wiICtcclxuICAgICAgLy8gICAgICAgICBjbG91ZGluYXJ5LmNvbmZpZygpLmNsb3VkX25hbWUgK1xyXG4gICAgICAvLyAgICAgICAgIFwiL3VwbG9hZFwiLFxyXG4gICAgICAvLyAgICAgICBkYXRhOiB7XHJcbiAgICAgIC8vICAgICAgICAgdXBsb2FkX3ByZXNldDogY2xvdWRpbmFyeS5jb25maWcoKS51cGxvYWRfcHJlc2V0LFxyXG4gICAgICAvLyAgICAgICAgIHRhZ3M6IGZpbGUubmFtZSxcclxuICAgICAgLy8gICAgICAgICBjb250ZXh0OiBcInBob3RvPVwiICsgRGF0ZS5ub3coKSxcclxuICAgICAgLy8gICAgICAgICBmaWxlOiBmaWxlXHJcbiAgICAgIC8vICAgICAgIH1cclxuICAgICAgLy8gICAgIH0pXHJcbiAgICAgIC8vICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKFwicmVzcCEhXCIsIHJlc3ApO1xyXG4gICAgICAvLyAgICAgICB9KVxyXG4gICAgICAvLyAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coXCJlcnJcIiwgZSk7XHJcbiAgICAgIC8vICAgICAgIH0pO1xyXG4gICAgICAvLyAgIH1cclxuICAgICAgLy8gfVxyXG4gICAgfTtcclxuICB9XHJcbn0pKCk7XHJcbiIsIihmdW5jdGlvbigpIHtcclxuICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuZmFjdG9yeShcImNvbW1vblZQRmFjdG9yeVwiLCBjb21tb25WUEZhY3RvcnkpO1xyXG5cclxuICAvKiogQG5nSW5qZWN0ICovXHJcbiAgZnVuY3Rpb24gY29tbW9uVlBGYWN0b3J5KCRyb290U2NvcGUpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIC8vIEluaXRpYWxpemVzIGEgc3RhZ2UgZm9yIHRoZSB2aXN1YWwgcGxhbm5lclxyXG4gICAgICBjcmVhdGVTdGFnZTogZnVuY3Rpb24oZGl2SWQsIGluaXRpYWxTaXplLCBwbGFubmVyRGF0YSkge1xyXG4gICAgICAgIHZhciBzdGFnZTtcclxuICAgICAgICBpZiAocGxhbm5lckRhdGEgJiYgcGxhbm5lckRhdGEuanNvblN0cmluZykge1xyXG4gICAgICAgICAgc3RhZ2UgPSBLb252YS5Ob2RlLmNyZWF0ZShwbGFubmVyRGF0YS5qc29uU3RyaW5nLCBcInN0YWdlXCIpO1xyXG4gICAgICAgICAgc3RhZ2Uud2lkdGgoaW5pdGlhbFNpemUud2lkdGgpO1xyXG4gICAgICAgICAgc3RhZ2UuaGVpZ2h0KGluaXRpYWxTaXplLmhlaWdodCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHN0YWdlID0gbmV3IEtvbnZhLlN0YWdlKHtcclxuICAgICAgICAgICAgY29udGFpbmVyOiBkaXZJZCxcclxuICAgICAgICAgICAgeDogMSxcclxuICAgICAgICAgICAgeTogMSxcclxuICAgICAgICAgICAgd2lkdGg6IGluaXRpYWxTaXplLndpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IGluaXRpYWxTaXplLmhlaWdodFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBnZXRTdGFnZVNpemUgPSB0aGlzLmdldFN0YWdlU2l6ZTtcclxuICAgICAgICBzdGFnZS5vbihcIndpbmRvd1Jlc2l6ZWRcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB2YXIgZGltZW5zaW9ucyA9IGdldFN0YWdlU2l6ZShkaXZJZCk7XHJcbiAgICAgICAgICBzdGFnZS53aWR0aChkaW1lbnNpb25zLndpZHRoKTtcclxuICAgICAgICAgIHN0YWdlLmhlaWdodChkaW1lbnNpb25zLmhlaWdodCk7XHJcbiAgICAgICAgICBzdGFnZS5kcmF3KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHN0YWdlO1xyXG4gICAgICB9LFxyXG4gICAgICBnZXRTdGFnZVNpemU6IGZ1bmN0aW9uKGRpdklkKSB7XHJcbiAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGl2SWQpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBoZWlnaHQ6IGVsLmNsaWVudEhlaWdodCxcclxuICAgICAgICAgIHdpZHRoOiBlbC5jbGllbnRXaWR0aFxyXG4gICAgICAgIH07XHJcbiAgICAgIH0sXHJcbiAgICAgIC8vIGdlbmVyYXRlcyBzaGFwZSBJZCBhbmQgaW5jcmVtZW50cyBpdCBldmVyeXRpbWUgeW91IGNhbGwgaXRcclxuXHJcbiAgICAgIHNoYXBlSWQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBkZWZhdWx0Q291bnQgPSB7XHJcbiAgICAgICAgICBzaGFwZXM6IHtcclxuICAgICAgICAgICAgcmVjdGFuZ2xlOiAwLFxyXG4gICAgICAgICAgICBzcXVhcmU6IDAsXHJcbiAgICAgICAgICAgIGNpcmNsZTogMCxcclxuICAgICAgICAgICAgZWxsaXBzZTogMCxcclxuICAgICAgICAgICAgY2FsaWJyYXRvcjogMCxcclxuICAgICAgICAgICAgZnJlZUhhbmQ6IDAsXHJcbiAgICAgICAgICAgIHBvbHlnb246IDBcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBtYXJraW5nczoge1xyXG4gICAgICAgICAgICBsaW5lOiAwLFxyXG4gICAgICAgICAgICBzaW5nbGVBcnJvdzogMCxcclxuICAgICAgICAgICAgZG91YmxlQXJyb3c6IDAsXHJcbiAgICAgICAgICAgIGJlemllcjogMCxcclxuICAgICAgICAgICAgZnJlZWhhbmQ6IDAsXHJcbiAgICAgICAgICAgIHRleHQ6IDAsXHJcbiAgICAgICAgICAgIHNlbGVjdGlvbjogMFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIG1lYXN1cmVtZW50OiB7XHJcbiAgICAgICAgICAgIHJlY3RhbmdsZTogMCxcclxuICAgICAgICAgICAgc3F1YXJlOiAwLFxyXG4gICAgICAgICAgICBjaXJjbGU6IDAsXHJcbiAgICAgICAgICAgIGVsbGlwc2U6IDAsXHJcbiAgICAgICAgICAgIGNhbGlicmF0b3I6IDAsXHJcbiAgICAgICAgICAgIHBvbHlnb246IDAsXHJcbiAgICAgICAgICAgIGZyZWVIYW5kOiAwXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGN1cnJlbnRDb3VudCA9IGRlZmF1bHRDb3VudDtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgbG9hZDogZnVuY3Rpb24oY291bnQpIHtcclxuICAgICAgICAgICAgY3VycmVudENvdW50ID0gY291bnQ7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZ2V0Q291bnQ6IGZ1bmN0aW9uKHR5cGUsIHNoYXBlKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRDb3VudFt0eXBlXVtzaGFwZV0rKztcclxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRDb3VudFt0eXBlXVtzaGFwZV07XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRDb3VudDtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICByZXNldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRDb3VudCA9IGRlZmF1bHRDb3VudDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICB9LFxyXG4gICAgICAvKiBcclxuICAgICAgIERyYXdzdGF0ZSBmdW5jdGlvbiBsZXRzIHlvdSBzZXQgYW5kIGNoZWNrIHRoZSBjdXJyZW50IGRyYXdpbmcgc3RhdGUgZm9yIHRoZSBjYW52YXMuIChFZy4gU3F1YXJlLCBlbGxpcHNlIGV0YylcclxuICAgICAgIFlvdSBjYW4ndCBkcmF3IGEgc2hhcGUgb24gdGhlIGNhbnZhcyB1bmxlc3MgdGhlIHN0YXRlIGZvciB0aGUgcGFydGljdWxhciBzaGFwZSBpcyB0cnVlLiBUaGVzZSBzdGF0cyB3aWxsIGNoZWNrZWRcclxuICAgICAgIGluIHRoZSBldmVudCBsaXN0ZW5lcnMgb2YgdGhlIHRhcmdldCBzdWNoIGFzIHN0YWdlICwgbGF5ZXIgZXRjLlxyXG4gICAgICAqL1xyXG4gICAgICBkcmF3U3RhdGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8qICBEbyBub3QgbW9kaWZ5IHRoaXMgdmFyICovXHJcbiAgICAgICAgdmFyIGluaXRpYWxEcmF3U3RhdGVzID0ge1xyXG4gICAgICAgICAgc2hhcGVzOiB7XHJcbiAgICAgICAgICAgIHJlY3RhbmdsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIHNxdWFyZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGNpcmNsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGVsbGlwc2U6IGZhbHNlLFxyXG4gICAgICAgICAgICBjYWxpYnJhdG9yOiBmYWxzZSxcclxuICAgICAgICAgICAgcG9seWdvbjogZmFsc2VcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBtYXJraW5nczoge1xyXG4gICAgICAgICAgICBsaW5lOiBmYWxzZSxcclxuICAgICAgICAgICAgc2luZ2xlQXJyb3c6IGZhbHNlLFxyXG4gICAgICAgICAgICBkb3VibGVBcnJvdzogZmFsc2UsXHJcbiAgICAgICAgICAgIGJlemllcjogZmFsc2UsXHJcbiAgICAgICAgICAgIGZyZWVoYW5kOiBmYWxzZSxcclxuICAgICAgICAgICAgdGV4dDogZmFsc2UsXHJcbiAgICAgICAgICAgIHNlbGVjdGlvbjogZmFsc2VcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBtZWFzdXJlbWVudDoge1xyXG4gICAgICAgICAgICByZWN0YW5nbGU6IGZhbHNlLFxyXG4gICAgICAgICAgICBzcXVhcmU6IGZhbHNlLFxyXG4gICAgICAgICAgICBjaXJjbGU6IGZhbHNlLFxyXG4gICAgICAgICAgICBlbGxpcHNlOiBmYWxzZSxcclxuICAgICAgICAgICAgY2FsaWJyYXRvcjogZmFsc2UsXHJcbiAgICAgICAgICAgIHBvbHlnb246IGZhbHNlLFxyXG4gICAgICAgICAgICBmcmVlSGFuZDogZmFsc2VcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKiBEcmF3IHN0YXRlcyBmcm9tIHRoZSB2aWV3IGFyZSBhc3NpZ25lZCB0byB0aGlzIHZhciAqL1xyXG4gICAgICAgIHZhciBkcmF3U3RhdGVzID0gYW5ndWxhci5jb3B5KGluaXRpYWxEcmF3U3RhdGVzKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIC8vIGZ1bmN0aW9uIHRvIHNldCB0aGUgZHJhd1N0YXRlc1xyXG4gICAgICAgICAgc2V0OiBmdW5jdGlvbih0eXBlKSB7XHJcbiAgICAgICAgICAgIHZhciBrZXlzID0gdHlwZS5zcGxpdChcIi5cIik7XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXQoKTsgLy8gcmVzZXQgZHJhd3N0YXRlcyBiZWZvcmUgYXNzaWduaW5nIHN0YXRlc1xyXG4gICAgICAgICAgICBkcmF3U3RhdGVzW2tleXNbMF1dW2tleXNbMV1dID0gdHJ1ZTtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KFwiZHJhd1N0YXRlQ2hhbmdlXCIsIGRyYXdTdGF0ZXMpO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIC8vIHRvIGNoZWNrIHRoZSBkcmF3U3RhdGVzXHJcbiAgICAgICAgICBjaGVjazogZnVuY3Rpb24odHlwZSkge1xyXG4gICAgICAgICAgICB2YXIga2V5cyA9IHR5cGUgPyB0eXBlLnNwbGl0KFwiLlwiKSA6IFwiXCI7XHJcbiAgICAgICAgICAgIHJldHVybiB0eXBlID8gZHJhd1N0YXRlc1trZXlzWzBdXVtrZXlzWzFdXSA6IGRyYXdTdGF0ZXM7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBkcmF3U3RhdGVzID0gYW5ndWxhci5jb3B5KGluaXRpYWxEcmF3U3RhdGVzKTtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KFwiZHJhd1N0YXRlQ2hhbmdlXCIsIGRyYXdTdGF0ZXMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvLyBjYWxpYnJhdGlvbiBzdGF0ZVxyXG5cclxuICAgICAgY2FsaWJyYXRpb25TdGF0ZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHN0YXRlID0ge1xyXG4gICAgICAgICAgdmFsdWU6IDEsXHJcbiAgICAgICAgICB1bml0OiBcInVuaXRzXCJcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgc2V0OiBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgc3RhdGUgPSBvYmo7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvLyBVbmRvIHJlZG8gZnVuY3Rpb25hbGl0eVxyXG4gICAgICBhY3Rpb25TdGF0ZXM6IGZ1bmN0aW9uKGFjdGlvbnMpIHtcclxuICAgICAgICB2YXIgc3RhY2sgPSBhY3Rpb25zIHx8IFtdO1xyXG4gICAgICAgIHZhciBoZWFkID0gc3RhY2subGVuZ3RoIC0gMTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgcHVzaDogZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgICAgICAgIHN0YWNrLnNwbGljZShoZWFkICsgMSwgc3RhY2subGVuZ3RoLCB2YWwpO1xyXG4gICAgICAgICAgICBoZWFkID0gc3RhY2subGVuZ3RoIC0gMTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBzaG93OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0YWNrO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHBlZWs6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RhY2tbaGVhZF07XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgdW5kbzogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmIChoZWFkID4gLTEpIHtcclxuICAgICAgICAgICAgICBzdGFja1toZWFkXS5kZWxldGUoKTtcclxuICAgICAgICAgICAgICBoZWFkID0gaGVhZCAtIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICByZWRvOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKGhlYWQgPCBzdGFjay5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICBoZWFkID0gaGVhZCA9PT0gc3RhY2subGVuZ3RoIC0gMSA/IGhlYWQgOiBoZWFkICsgMTtcclxuICAgICAgICAgICAgICBzdGFja1toZWFkXS5yZXN0b3JlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyogQXR0YWNoIGFjdGlvbiBoYW5kbGVycyB0byBlbnRpdGllcyBiZWZvcmUgcHVzaGluZyBpbnRvIGFjdGlvbiBzdGF0ZSBzdGFjayAqL1xyXG4gICAgICBhY3Rpb25IYW5kbGVyOiBmdW5jdGlvbihzdGFnZSwgZW50aXR5LCBwcm9jZXNzLCBhY3Rpb25UeXBlLCBwcm9wcykge1xyXG4gICAgICAgIHZhciBlbnRpdHkgPSBlbnRpdHk7XHJcbiAgICAgICAgdmFyIHN0YWdlID0gc3RhZ2U7XHJcbiAgICAgICAgdmFyIHByb2Nlc3MgPSBwcm9jZXNzO1xyXG4gICAgICAgIHZhciBwcm9wcyA9IHByb3BzO1xyXG5cclxuICAgICAgICAvKiBIYW5kbGVycyAqL1xyXG4gICAgICAgIHZhciBoYW5kbGVycyA9IHtcclxuICAgICAgICAgIGNyZWF0ZToge1xyXG4gICAgICAgICAgICBkZWxldGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGVudGl0eS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICBzdGFnZS5iYXRjaERyYXcoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcmVzdG9yZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgcHJvY2Vzcy5hZGQoZW50aXR5KTtcclxuICAgICAgICAgICAgICBzdGFnZS5iYXRjaERyYXcoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIG1vdmU6IHtcclxuICAgICAgICAgICAgZGVsZXRlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICBlbnRpdHkucG9zaXRpb24ocHJvcHMuc3RhcnQpO1xyXG4gICAgICAgICAgICAgIHN0YWdlLmJhdGNoRHJhdygpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByZXN0b3JlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICBlbnRpdHkucG9zaXRpb24ocHJvcHMuZW5kKTtcclxuICAgICAgICAgICAgICBzdGFnZS5iYXRjaERyYXcoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGRlbGV0ZToge1xyXG4gICAgICAgICAgICBkZWxldGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIHByb2Nlc3MuYWRkKGVudGl0eSk7XHJcbiAgICAgICAgICAgICAgc3RhZ2UuYmF0Y2hEcmF3KCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHJlc3RvcmU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGVudGl0eS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICBzdGFnZS5iYXRjaERyYXcoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHNoYXBlUHJvcHM6IHtcclxuICAgICAgICAgICAgZGVsZXRlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gcHJvcHMuc3RhcnQpIHtcclxuICAgICAgICAgICAgICAgIGVudGl0eVtrZXldKHByb3BzLnN0YXJ0W2tleV0pO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgc3RhZ2UuYmF0Y2hEcmF3KCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHJlc3RvcmU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBwcm9wcy5lbmQpIHtcclxuICAgICAgICAgICAgICAgIGVudGl0eVtrZXldKHByb3BzLmVuZFtrZXldKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgc3RhZ2UuYmF0Y2hEcmF3KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgZW50aXR5OiBlbnRpdHksXHJcbiAgICAgICAgICByZXN0b3JlOiBoYW5kbGVyc1thY3Rpb25UeXBlXS5yZXN0b3JlLFxyXG4gICAgICAgICAgZGVsZXRlOiBoYW5kbGVyc1thY3Rpb25UeXBlXS5kZWxldGVcclxuICAgICAgICB9O1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyogVGhpcyBmdW5jdGlvbiByZXR1cm5zIG1vdmVtZW50IHZhbHVlcyBmb3IgdW5kby9yZWRvICovXHJcbiAgICAgIG1vdmVtZW50OiBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgc3RhcnQ7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGFkZDogZnVuY3Rpb24ocG9zaXRpb24pIHtcclxuICAgICAgICAgICAgaWYgKCFzdGFydCkge1xyXG4gICAgICAgICAgICAgIHN0YXJ0ID0gcG9zaXRpb247XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0OiBzdGFydCxcclxuICAgICAgICAgICAgICAgIGVuZDogcG9zaXRpb25cclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIHNoYXBlUHJvcGVydHlIaXN0b3J5OiBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgc3RhcnQ7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGFkZDogZnVuY3Rpb24ocHJvcHMpIHtcclxuICAgICAgICAgICAgaWYgKCFzdGFydCkge1xyXG4gICAgICAgICAgICAgIHN0YXJ0ID0gcHJvcHM7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0OiBzdGFydCxcclxuICAgICAgICAgICAgICAgIGVuZDogcHJvcHNcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qIFRyYW5zZm9ybWVycyAqL1xyXG4gICAgICB0cmFuc2Zvcm1lcnM6IGZ1bmN0aW9uKGxheWVyKSB7XHJcbiAgICAgICAgdmFyIHN0YWdlID0gc3RhZ2U7XHJcbiAgICAgICAgdmFyIGxheWVyID0gbGF5ZXI7XHJcbiAgICAgICAgdmFyIHRyYW5zZm9ybWVycyA9IFtdO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgYWRkOiBmdW5jdGlvbih0cmFuc2Zvcm1lcikge1xyXG4gICAgICAgICAgICB0cmFuc2Zvcm1lcnMucHVzaCh0cmFuc2Zvcm1lcik7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgcmVtb3ZlQWxsOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHRyYW5zZm9ybWVycywgZnVuY3Rpb24oeCkge1xyXG4gICAgICAgICAgICAgIHgucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBsYXllci5kcmF3KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfSxcclxuICAgICAgLyogXHJcbiAgICAgICAgVGhlIHBvc2l0aW9uIG9mIHRoZSBwb2ludGVyIGRvZXNuJ3QgY2hhbmdlIHdoZW4gdGhlIGJhY2tncm91bmQgaW1hZ2UgbGF5ZXIgaXMgYmVpbmcgZHJhZ2dlZCBhcm91bmQuXHJcbiAgICAgICAgSW4gb3JkZXIgdG8gY29tcGVuc2F0ZSB0aGF0IG9mZnNldCwgVGhlIHN0YWdlIHBvaW50ZXIgcG9zaXRpb24gbXVzdCBiZSBzdWJ0cmFjdGVkIGZyb20gdGhlIGxheWVyIHBvc2l0aW9uXHJcbiAgICAgICovXHJcbiAgICAgIGRyYWdPZmZzZXQ6IGZ1bmN0aW9uKHN0YWdlUG9zaXRpb24sIGxheWVyT2Zmc2V0LCBzdGFnZVNjYWxlKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHg6IChzdGFnZVBvc2l0aW9uLnggLSBsYXllck9mZnNldC54KSAvIHN0YWdlU2NhbGUueCxcclxuICAgICAgICAgIHk6IChzdGFnZVBvc2l0aW9uLnkgLSBsYXllck9mZnNldC55KSAvIHN0YWdlU2NhbGUueVxyXG4gICAgICAgIH07XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKiBTZWxlY3RlZCBTaGFwZSAqL1xyXG4gICAgICBzZWxlY3RlZFNoYXBlOiBmdW5jdGlvbihzaGFwZSkge1xyXG4gICAgICAgIHZhciBzaGFwZTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNoYXBlO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHNldDogZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgICAgICAgIHNoYXBlID0gdmFsO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHJlc2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgc2hhcGUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qIFNlbGVjdGlvbiBzdG9yZSAtIFRvIHN0b3JlIGFuZCByZXRyaWV2ZSBzZWxlY3RlZCBzaGFwZXMgKi9cclxuXHJcbiAgICAgIHNlbGVjdGlvblN0b3JlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgc2VsZWN0aW9ucyA9IFtdO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBzdG9yZTogZnVuY3Rpb24oc2hhcGVzKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGlvbnMgPSBzaGFwZXM7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGlvbnM7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgcHVsbDogZnVuY3Rpb24oc2hhcGVOYW1lKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGlvbnMgPSBzZWxlY3Rpb25zLmZpbHRlcihmdW5jdGlvbihzaGFwZSkge1xyXG4gICAgICAgICAgICAgIGlmIChzaGFwZS5uYW1lKCkgPT09IHNoYXBlTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgcHVzaDogZnVuY3Rpb24oc2hhcGUpIHtcclxuICAgICAgICAgICAgdmFyIHNoYXBlTmFtZXMgPSBzZWxlY3Rpb25zLm1hcChmdW5jdGlvbihzaGFwZSkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBzaGFwZS5uYW1lKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoIShzaGFwZU5hbWVzLmluZGV4T2Yoc2hhcGUubmFtZSgpKSA+IC0xKSkge1xyXG4gICAgICAgICAgICAgIHNlbGVjdGlvbnMucHVzaChzaGFwZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBjbGVhcjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGlvbnMgPSBbXTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgYXNzb2NpYXRpb25zOiAoKSA9PiB7XHJcbiAgICAgICAgbGV0IGFzc29jaWF0aW9ucyA9IHt9O1xyXG5cclxuICAgICAgICBsZXQgbWV0aG9kcyA9IHtcclxuICAgICAgICAgIGNyZWF0ZUFzc29jaWF0aW9uOiAoc2hhcGVJZCwgZW50aXR5SWQsIHR5cGUpID0+IHtcclxuICAgICAgICAgICAgbGV0IGtleSA9IGAke3NoYXBlSWR9LSR7ZW50aXR5SWR9LSR7RGF0ZS5ub3coKX1gO1xyXG4gICAgICAgICAgICBhc3NvY2lhdGlvbnNba2V5XSA9IHtcclxuICAgICAgICAgICAgICBzaGFwZUlkLFxyXG4gICAgICAgICAgICAgIGVudGl0eUlkLFxyXG4gICAgICAgICAgICAgIHR5cGVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmV0dXJuIGtleTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBnZXRBc3NvY2lhdGlvbnM6IGtleSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBrZXkgPyBhc3NvY2lhdGlvbnNba2V5XSA6IGFzc29jaWF0aW9ucztcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBnZXRBc3NvY2lhdGlvbnNGb3JTYXZlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhhc3NvY2lhdGlvbnMpLnJlZHVjZSgoYWNjLCB4KSA9PiB7XHJcbiAgICAgICAgICAgICAgbGV0IG9iaiA9IHtcclxuICAgICAgICAgICAgICAgIHNoYXBlSWQ6IGFzc29jaWF0aW9uc1t4XS5zaGFwZUlkLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogYXNzb2NpYXRpb25zW3hdLnR5cGVcclxuICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICBzd2l0Y2ggKGFzc29jaWF0aW9uc1t4XS50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgIG9iai5tYXRlcmlhbElkID0gYXNzb2NpYXRpb25zW3hdLmVudGl0eUlkO1xyXG4gICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgb2JqLmNvbWJvSWQgPSBhc3NvY2lhdGlvbnNbeF0uZW50aXR5SWQ7XHJcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICBvYmouZXF1aXBtZW50SWQgPSBhc3NvY2lhdGlvbnNbeF0uZW50aXR5SWQ7XHJcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBhY2MucHVzaChvYmopO1xyXG4gICAgICAgICAgICAgIHJldHVybiBhY2M7XHJcbiAgICAgICAgICAgIH0sIFtdKTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICByZW1vdmVBc3NvY2lhdGlvbjoga2V5ID0+IHtcclxuICAgICAgICAgICAgYXNzb2NpYXRpb25zW2tleV0gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgcmVzZXQ6ICgpID0+IHtcclxuICAgICAgICAgICAgYXNzb2NpYXRpb25zID0ge307XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5mcmVlemUobWV0aG9kcyk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmZhY3RvcnkoXCJldmVudHNWUEZhY3RvcnlcIiwgZXZlbnRzVlBGYWN0b3J5KTtcclxuXHJcbiAgLyoqIEBuZ0luamVjdCAqL1xyXG4gIGZ1bmN0aW9uIGV2ZW50c1ZQRmFjdG9yeSgkcm9vdFNjb3BlKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB3aW5kb3dFdmVudHM6IGZ1bmN0aW9uKHdpbmRvd09iamVjdCkge1xyXG4gICAgICAgIHZhciBvYmo7XHJcbiAgICAgICAgdmFyIGVudGl0aWVzID0gW107XHJcbiAgICAgICAgd2luZG93T2JqZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChlbnRpdGllcywgZnVuY3Rpb24odikge1xyXG4gICAgICAgICAgICB2LmZpcmUoXCJ3aW5kb3dSZXNpemVkXCIpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHJlZ2lzdGVyOiBmdW5jdGlvbihlbnRpdHkpIHtcclxuICAgICAgICAgICAgZW50aXRpZXMucHVzaChlbnRpdHkpO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHNob3c6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIH0sXHJcbiAgICAgIHN0YWdlRXZlbnRzOiBmdW5jdGlvbihzdGFnZSkge1xyXG4gICAgICAgIHZhciBzdGFnZSA9IHN0YWdlO1xyXG4gICAgICAgIHZhciBldmVudHMgPSBbXTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgcmVnaXN0ZXI6IGZ1bmN0aW9uKGV2ZW50LCBoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIGlmICghc3RhZ2UpIHtcclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZXZlbnRzLnB1c2goZXZlbnQpO1xyXG4gICAgICAgICAgICBzdGFnZS5vbihldmVudCwgaGFuZGxlcik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfSxcclxuICAgICAgc2hhcGVFdmVudHM6IGZ1bmN0aW9uKHNoYXBlKSB7XHJcbiAgICAgICAgdmFyIHNoYXBlID0gc2hhcGU7XHJcbiAgICAgICAgdmFyIGV2ZW50cyA9IFtdO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICByZWdpc3RlcjogZnVuY3Rpb24oZXZlbnQsIGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50cy5pbmRleE9mKGV2ZW50KSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgLyogQ2hlY2sgZm9yIGR1cGxpY2F0ZSBldmVudHMgKi9cclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgZXZlbnRzLnB1c2goZXZlbnQpO1xyXG4gICAgICAgICAgICAgIHNoYXBlLm9uKGV2ZW50LCBoYW5kbGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIH0sXHJcbiAgICAgIGxheWVyRXZlbnRzOiBmdW5jdGlvbihsYXllcikge1xyXG4gICAgICAgIHZhciBsYXllciA9IGxheWVyO1xyXG4gICAgICAgIHZhciBldmVudHMgPSBbXTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgcmVnaXN0ZXI6IGZ1bmN0aW9uKGV2ZW50LCBoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudHMuaW5kZXhPZihldmVudCkgPiAtMSkge1xyXG4gICAgICAgICAgICAgIC8qIENoZWNrIGZvciBkdXBsaWNhdGUgZXZlbnRzICovXHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGV2ZW50cy5wdXNoKGV2ZW50KTtcclxuICAgICAgICAgICAgICBsYXllci5vbihldmVudCwgaGFuZGxlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxufSkoKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5mYWN0b3J5KFwibGF5ZXJzVlBGYWN0b3J5XCIsIGxheWVyc1ZQRmFjdG9yeSk7XHJcblxyXG4gIC8qKiBAbmdJbmplY3QgKi9cclxuICBmdW5jdGlvbiBsYXllcnNWUEZhY3RvcnkoJHJvb3RTY29wZSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgY3JlYXRlTGF5ZXI6IGZ1bmN0aW9uKHN0YWdlKSB7XHJcbiAgICAgICAgdmFyIGxheWVyID0gbmV3IEtvbnZhLkxheWVyKCk7XHJcbiAgICAgICAgc3RhZ2UuYWRkKGxheWVyKTtcclxuICAgICAgICByZXR1cm4gbGF5ZXI7XHJcbiAgICAgIH0sXHJcbiAgICAgIGluaXRpYXRlUHJvY2VzczogZnVuY3Rpb24oc3RhZ2UsIGJhc2VMYXllcikge1xyXG4gICAgICAgIHZhciBwcm9jZXNzZXMgPSBbXSxcclxuICAgICAgICAgIGhlYWQ7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGNyZWF0ZVByb2Nlc3M6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgZ3JvdXAgPSBuZXcgS29udmEuR3JvdXAoe1xyXG4gICAgICAgICAgICAgIG5hbWU6IFwicHJvY2Vzcy1cIiArIERhdGUubm93KClcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHByb2Nlc3Nlcy5wdXNoKGdyb3VwKTtcclxuICAgICAgICAgICAgaGVhZCA9IHByb2Nlc3Nlcy5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICBiYXNlTGF5ZXIuYWRkKGdyb3VwKTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBnZXRQcm9jZXNzZXM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcHJvY2Vzc2VzO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGdldEN1cnJlbnQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcHJvY2Vzc2VzW2hlYWRdO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHNldEN1cnJlbnQ6IGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgICAgIGhlYWQgPSBpbmRleDtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBzaG93UHJvY2VzczogZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICBiYXNlTGF5ZXIuYWRkKHByb2Nlc3Nlc1tpbmRleF0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChwcm9jZXNzZXMsIGZ1bmN0aW9uKHgpIHtcclxuICAgICAgICAgICAgICAgIGJhc2VMYXllci5hZGQoeCk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYmFzZUxheWVyLmRyYXcoKTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBoaWRlUHJvY2VzczogZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICBwcm9jZXNzZXNbaW5kZXhdLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChwcm9jZXNzZXMsIGZ1bmN0aW9uKHgpIHtcclxuICAgICAgICAgICAgICAgIHgucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYmFzZUxheWVyLmRyYXcoKTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICAvKiBMb2FkaW5nIHByb2Nlc3MgZnJvbSBqc29uICovXHJcbiAgICAgICAgICBsb2FkUHJvY2Vzc2VzOiBmdW5jdGlvbihwcm9jZXNzZXNGcm9tSnNvbikge1xyXG4gICAgICAgICAgICBwcm9jZXNzZXMgPSBwcm9jZXNzZXNGcm9tSnNvbjtcclxuICAgICAgICAgICAgaGVhZCA9IHByb2Nlc3Nlcy5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmZhY3RvcnkoXCJzaGFwZXNWUEZhY3RvcnlcIiwgc2hhcGVzVlBGYWN0b3J5KTtcclxuXHJcbiAgLyoqIEBuZ0luamVjdCAqL1xyXG4gIGZ1bmN0aW9uIHNoYXBlc1ZQRmFjdG9yeShcclxuICAgICRyb290U2NvcGUsXHJcbiAgICBldmVudHNWUEZhY3RvcnksXHJcbiAgICBjb21tb25WUEZhY3RvcnksXHJcbiAgICB0b29sc1ZQRmFjdG9yeVxyXG4gICkge1xyXG4gICAgdmFyIHNoYXBlSWQgPSBjb21tb25WUEZhY3Rvcnkuc2hhcGVJZCgpO1xyXG4gICAgdmFyIGNyZWF0ZWRTaGFwZTtcclxuXHJcbiAgICAvKiBPcHRpb25zIGNvbW1vbiBmb3IgcG9seWdvbiBjcmVhdGlvbiAqL1xyXG4gICAgdmFyIHBvbHlnb25PcHRpb25zID0ge1xyXG4gICAgICBpbml0OiBmYWxzZSxcclxuICAgICAgLyogdG8gY2hlY2sgaWYgYSBwb2x5Z29uIGlzIGluaXRhdGVkIG9yIG5vdCAqL1xyXG4gICAgICBwb2ludHM6IFtdLFxyXG4gICAgICBwb2ludFNldDogdHJ1ZSAvKiB0cnVlIGZvciBjbGljayBldmVudCBhbmQgZmFsc2UgZm9yIG1vdXNlIG92ZXIgZXZlbnQgKi9cclxuICAgIH07XHJcblxyXG4gICAgdmFyIHNoYXBlVG9vbHM7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgLyogVGhpcyBtZXRob2QgaXMgZmlyZWQgaW4gdGhlIGNvbnRyb2xsZXIgYW5kIHNldHMgdGhlIGdsb2JhbCBzaGFwZVRvb2xzICovXHJcbiAgICAgIGdldFNoYXBlVG9vbHM6IGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgIHNoYXBlVG9vbHMgPSBvYmo7XHJcbiAgICAgIH0sXHJcbiAgICAgIC8qIFxyXG4gICAgICAgIFRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgc2hhcGUgd2hpY2ggaXMgaW50dXJuIHBhc3NlZCB0byB0aGUgZHJhd1NoYXBlIGZ1bmN0aW9uLlxyXG4gICAgICAgIEJhc2VlZCBvbiBtb3VzZSBjbGljayBldmVudFxyXG4gICAgICAqL1xyXG5cclxuICAgICAgbG9hZFNoYXBlSWQ6IGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgIHNoYXBlSWQubG9hZChvYmopO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgZ2V0U2hhcGVJZDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHNoYXBlSWQuZ2V0KCk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBjcmVhdGVTaGFwZTogZnVuY3Rpb24odHlwZSwgcG9zaXRpb24pIHtcclxuICAgICAgICAvKiAwIC0gUmVjdGFuZ2xlL1NxdWFyZSAsIDEgLSBFbGxpcHNlL0NpcmNsZSAqL1xyXG4gICAgICAgIGlmIChjcmVhdGVkU2hhcGUpIHtcclxuICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN0YXJ0OiBmYWxzZSxcclxuICAgICAgICAgICAgc2hhcGU6IGNyZWF0ZWRTaGFwZVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHNoYXBlO1xyXG4gICAgICAgIHZhciBzaGFwZVByb3BzID0gc2hhcGVUb29scy5nZXQoKTtcclxuXHJcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgIHNoYXBlID0gbmV3IEtvbnZhLkxpbmUoe1xyXG4gICAgICAgICAgICAgIHBvaW50czogW1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb24ueCxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uLnksXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbi54LFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb24ueSxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uLngsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbi55LFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb24ueCxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uLnksXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbi54LFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb24ueVxyXG4gICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgc3Ryb2tlOiBzaGFwZVByb3BzLnN0cm9rZSB8fCBcImJsYWNrXCIsXHJcbiAgICAgICAgICAgICAgbmFtZTogXCJSZWN0XCIgKyBzaGFwZUlkLmdldENvdW50KFwic2hhcGVzXCIsIFwicmVjdGFuZ2xlXCIpLFxyXG4gICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiBzaGFwZVByb3BzLnN0cm9rZVdpZHRoIHx8IDEsXHJcbiAgICAgICAgICAgICAgZmlsbDogc2hhcGVQcm9wcy5maWxsLFxyXG4gICAgICAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICBjbG9zZWQ6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICBzaGFwZSA9IG5ldyBLb252YS5FbGxpcHNlKHtcclxuICAgICAgICAgICAgICB4OiBwb3NpdGlvbi54LFxyXG4gICAgICAgICAgICAgIHk6IHBvc2l0aW9uLnksXHJcbiAgICAgICAgICAgICAgcmFkaXVzOiB7XHJcbiAgICAgICAgICAgICAgICB4OiAxLFxyXG4gICAgICAgICAgICAgICAgeTogMVxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgc3Ryb2tlOiBzaGFwZVByb3BzLnN0cm9rZSB8fCBcImJsYWNrXCIsXHJcbiAgICAgICAgICAgICAgbmFtZTogXCJFbGxpcHNlXCIgKyBzaGFwZUlkLmdldENvdW50KFwic2hhcGVzXCIsIFwiZWxsaXBzZVwiKSxcclxuICAgICAgICAgICAgICBzdHJva2VXaWR0aDogc2hhcGVQcm9wcy5zdHJva2VXaWR0aCB8fCAxLFxyXG4gICAgICAgICAgICAgIGZpbGw6IHNoYXBlUHJvcHMuZmlsbCxcclxuICAgICAgICAgICAgICBkcmFnZ2FibGU6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjcmVhdGVkU2hhcGUgPSBzaGFwZTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHN0YXJ0OiB0cnVlLFxyXG4gICAgICAgICAgc2hhcGU6IGNyZWF0ZWRTaGFwZVxyXG4gICAgICAgIH07XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKiBcclxuICAgICAgICBUaGlzIGZ1bmN0aW9uIGRyYXdzIHRoZSBzaGFwZSB3aGljaCBpcyBhbHJlYWR5IGNyZWF0ZWQgYnkgY3JlYXRlU2hhcGVcclxuICAgICAgICBCYXNlZCBvbiBtb3VzZW1vdmUgZXZlbnRcclxuICAgICAgKi9cclxuICAgICAgZHJhd1NoYXBlOiBmdW5jdGlvbihwb3NpdGlvbiwgc2hhcGVMb2NrLCBtaXNjKSB7XHJcbiAgICAgICAgLyogaWYgc2hhcGVsb2NrIGlzIHRydWUgLCBsb2NrIHRoZSBhc3BlY3QgcmF0aW8gKi9cclxuXHJcbiAgICAgICAgLyogTWlzYyBpcyBhIHNwZWNpYWwgcGFyYW0gZm9yIHJlY3RhbmdsZXMgc3VjaCBhcyBncmFiIHNlbGVjdG9yIGFuZCB0ZXh0IHdyYXBwZXIgKi9cclxuXHJcbiAgICAgICAgaWYgKGNyZWF0ZWRTaGFwZSkge1xyXG4gICAgICAgICAgc3dpdGNoIChjcmVhdGVkU2hhcGUuY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJMaW5lXCI6XHJcbiAgICAgICAgICAgICAgLyogVHJlYXRpbmcgcmVjdGFuZ2xlIGxpa2UgYSBwb2x5Z29uICovXHJcblxyXG4gICAgICAgICAgICAgIHRoaXMuZHJhd1JlY3RhbmdsZShwb3NpdGlvbiwgY3JlYXRlZFNoYXBlLCBzaGFwZUxvY2ssIG1pc2MpO1xyXG5cclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIkVsbGlwc2VcIjpcclxuICAgICAgICAgICAgICBjcmVhdGVkU2hhcGUucmFkaXVzKHtcclxuICAgICAgICAgICAgICAgIC8qIE1ha2Ugc3VyZSByYWRpdXMgaXNuJ3QgbmVnYXRpdmUgKi9cclxuICAgICAgICAgICAgICAgIHg6IE1hdGguYWJzKHBvc2l0aW9uLnggLSBjcmVhdGVkU2hhcGUueCgpKSxcclxuICAgICAgICAgICAgICAgIHk6IE1hdGguYWJzKFxyXG4gICAgICAgICAgICAgICAgICBzaGFwZUxvY2tcclxuICAgICAgICAgICAgICAgICAgICA/IHBvc2l0aW9uLnggLSBjcmVhdGVkU2hhcGUueCgpXHJcbiAgICAgICAgICAgICAgICAgICAgOiBwb3NpdGlvbi55IC0gY3JlYXRlZFNoYXBlLnkoKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuXHJcbiAgICAgIGRyYXdSZWN0YW5nbGU6IGZ1bmN0aW9uKHBvc2l0aW9uLCBzaGFwZSwgc2hhcGVsb2NrLCBtaXNjKSB7XHJcbiAgICAgICAgdmFyIHBvaW50cyA9IHNoYXBlLnBvaW50cygpOyAvKiBnZXQgcmVjdGFuZ2xlIHZlcnRpY2VzICovXHJcbiAgICAgICAgLyogRGlhZ29uYWwgaGluZ2UgLSBSZWFzc2lnbiBib3RoIHggYW5kIHkgYmFzZWQgb24gcG9zaXRpb24gKi9cclxuXHJcbiAgICAgICAgcG9pbnRzWzRdID0gcG9zaXRpb24ueDtcclxuICAgICAgICBwb2ludHNbNV0gPSBzaGFwZWxvY2tcclxuICAgICAgICAgID8gTWF0aC5hYnMocG9pbnRzWzFdICsgKHBvc2l0aW9uLnggLSBwb2ludHNbMF0pKVxyXG4gICAgICAgICAgOiBwb3NpdGlvbi55O1xyXG5cclxuICAgICAgICAvKiBZIC0gYXhpcyBoaW5nZSAoY2hhbmdlIHggLSBheGlzIGFuZCBrZWVwIHkgLSBmaXhlZCkqL1xyXG5cclxuICAgICAgICBwb2ludHNbN10gPSBzaGFwZWxvY2tcclxuICAgICAgICAgID8gTWF0aC5hYnMocG9pbnRzWzFdICsgKHBvc2l0aW9uLnggLSBwb2ludHNbMF0pKVxyXG4gICAgICAgICAgOiBwb3NpdGlvbi55O1xyXG4gICAgICAgIC8qIFggLSBheGlzIGhpbmdlIChjaGFuZ2UgeSAtIGF4aXMgYW5kIGtlZXAgeCAtIGZpeGVkKSAqL1xyXG5cclxuICAgICAgICBwb2ludHNbMl0gPSBwb3NpdGlvbi54O1xyXG4gICAgICAgIC8qIEhhbmRsZSBzZWxlY3Rpb24gKi9cclxuXHJcbiAgICAgICAgc3dpdGNoIChtaXNjKSB7XHJcbiAgICAgICAgICBjYXNlIFwiZ3JhYmJlclwiOlxyXG4gICAgICAgICAgICBzaGFwZS5kYXNoKFsxMCwgMTBdKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFwid3JhcHBlclwiOlxyXG4gICAgICAgICAgICBzaGFwZS5zdHJva2UoXCJncmV5XCIpO1xyXG4gICAgICAgICAgICBzaGFwZS5kcmFnZ2FibGUoZmFsc2UpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIFJlYXNzaWduIHRvIHNoYXBlICovXHJcbiAgICAgICAgc2hhcGUucG9pbnRzKHBvaW50cyk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKiBUaGlzIGZ1bmN0aW9uIGRvZXNuJ3QgYWN0dWFsbHkgZGVzdHJveSB0aGUgc2hhcGUgdGhhdCBoYXMgYmVlbiBkcmF3cy4gSXQgc2ltcGx5IHJlbW92ZXMgdGhlIHZhciBpbnNpZGUgdGhpcyBmYWN0b3J5IGZ1bnRpb24gKi9cclxuICAgICAgZGVzdHJveVNoYXBlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBjcmVhdGVkU2hhcGUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgcG9seWdvbk9wdGlvbnMgPSB7XHJcbiAgICAgICAgICBpbml0OiBmYWxzZSxcclxuICAgICAgICAgIHBvaW50czogW10sXHJcbiAgICAgICAgICBwb2ludFNldDogdHJ1ZVxyXG4gICAgICAgIH07XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gY2xlYXIgdGhlIGRyYXdpbmcgd2hlbiB0aGUgdXNlciBjYW5jZWxzIGl0IG1pZHdheSAqL1xyXG4gICAgICBjYW5jZWxEcmF3aW5nOiBmdW5jdGlvbihzZWxlY3Rpb24pIHtcclxuICAgICAgICB2YXIgc2VsZWN0aW9uUG9pbnRzID0gY3JlYXRlZFNoYXBlLnBvaW50cygpO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gXCJkZWZhdWx0XCI7XHJcbiAgICAgICAgY3JlYXRlZFNoYXBlICYmIGNyZWF0ZWRTaGFwZS5yZW1vdmUoKTtcclxuICAgICAgICBjcmVhdGVkU2hhcGUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgcG9seWdvbk9wdGlvbnMgPSB7XHJcbiAgICAgICAgICBpbml0OiBmYWxzZSxcclxuICAgICAgICAgIHBvaW50czogW10sXHJcbiAgICAgICAgICBwb2ludFNldDogdHJ1ZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHNlbGVjdGlvblBvaW50cztcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qIFxyXG4gICAgICAgIEBwYXJhbSBwb3NpdGlvbiA9IHN0YWdlIHBvaW50ZXIgcG9zaXRpb25cclxuICAgICAgICBAcGFyYW0gZnJlZUhhbmQgPSBCb29sZWFuIChlbmFibGluZyBmcmVlaGFuZClcclxuICAgICAgICBAcGFyYW0gZnJlZUhhbmRNYWtlciA9IEJvb2xlYW4gKGVuYWJsaW5nIG1hcmtlciBmdW5jdGlvbmFsaXR5IHdoaWNoIGRvZXNuJ3QgY2hlY2sgZm9yIHRocmVzaG9sZClcclxuICAgICAgKi9cclxuXHJcbiAgICAgIGNyZWF0ZVBvbHlnb246IGZ1bmN0aW9uKHBvc2l0aW9uLCBmcmVlSGFuZCwgZnJlZUhhbmRNYXJrZXIpIHtcclxuICAgICAgICBpZiAoIXBvbHlnb25PcHRpb25zLmluaXQgJiYgIWNyZWF0ZWRTaGFwZSkge1xyXG4gICAgICAgICAgLyogQ2hlY2sgaWYgYSBwb2x5Z29uIGhhcyBiZWVuIGluaXRpYWxpemVkIGFuZCBhbHNvIGlmIGFueSBvdGhlciBzaGFwZSBleGlzdHMgKi9cclxuICAgICAgICAgIHZhciBzaGFwZVByb3BzID0gc2hhcGVUb29scy5nZXQoKTsgLyogR2V0IHNoYXBlIHByb3BzICovXHJcbiAgICAgICAgICBwb2x5Z29uT3B0aW9ucy5wb2ludHMgPSBbcG9zaXRpb24ueCwgcG9zaXRpb24ueV07XHJcblxyXG4gICAgICAgICAgaWYgKGZyZWVIYW5kTWFya2VyKSB7XHJcbiAgICAgICAgICAgIC8qIEZvciBNYXJrZXIgKi9cclxuICAgICAgICAgICAgY3JlYXRlZFNoYXBlID0gbmV3IEtvbnZhLkxpbmUoe1xyXG4gICAgICAgICAgICAgIG5hbWU6IFwibWFya2VyRnJlZUhhbmRcIiArIHNoYXBlSWQuZ2V0Q291bnQoXCJtYXJraW5nc1wiLCBcImZyZWVoYW5kXCIpLFxyXG4gICAgICAgICAgICAgIHBvaW50czogcG9seWdvbk9wdGlvbnMucG9pbnRzLFxyXG4gICAgICAgICAgICAgIGZpbGw6IHNoYXBlUHJvcHMuZmlsbCxcclxuICAgICAgICAgICAgICBzdHJva2U6IHNoYXBlUHJvcHMuc3Ryb2tlIHx8IFwiYmxhY2tcIixcclxuICAgICAgICAgICAgICBzdHJva2VXaWR0aDogc2hhcGVQcm9wcy5zdHJva2VXaWR0aCB8fCAxXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLyogRm9yIGNsb3NhYmxlIGZyZWVoYW5kIGFuZCBwb2x5Z29uICovXHJcbiAgICAgICAgICAgIGNyZWF0ZWRTaGFwZSA9IG5ldyBLb252YS5MaW5lKHtcclxuICAgICAgICAgICAgICBuYW1lOiBmcmVlSGFuZFxyXG4gICAgICAgICAgICAgICAgPyBcImZyZWVIYW5kXCIgKyBzaGFwZUlkLmdldENvdW50KFwic2hhcGVzXCIsIFwiZnJlZUhhbmRcIilcclxuICAgICAgICAgICAgICAgIDogXCJwb2x5Z29uXCIgKyBzaGFwZUlkLmdldENvdW50KFwic2hhcGVzXCIsIFwicG9seWdvblwiKSxcclxuICAgICAgICAgICAgICBwb2ludHM6IHBvbHlnb25PcHRpb25zLnBvaW50cyxcclxuICAgICAgICAgICAgICBmaWxsOiBzaGFwZVByb3BzLmZpbGwsXHJcbiAgICAgICAgICAgICAgc3Ryb2tlOiBzaGFwZVByb3BzLnN0cm9rZSB8fCBcImJsYWNrXCIsXHJcbiAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IHNoYXBlUHJvcHMuc3Ryb2tlV2lkdGggfHwgMVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBwb2x5Z29uT3B0aW9ucy5pbml0ID0gdHJ1ZTtcclxuICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN0YXJ0OiB0cnVlLFxyXG4gICAgICAgICAgICBwb2x5Z29uOiBjcmVhdGVkU2hhcGVcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8qIEVuZCBmb3IgZnJlZWhhbmQgbWFya2VyICovXHJcbiAgICAgICAgICBpZiAoZnJlZUhhbmRNYXJrZXIpIHtcclxuICAgICAgICAgICAgcG9seWdvbk9wdGlvbnMucG9pbnRTZXQgPSB0cnVlO1xyXG4gICAgICAgICAgICBjcmVhdGVkU2hhcGUuZHJhZ2dhYmxlKHRydWUpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgIHN0YXJ0OiBmYWxzZSxcclxuICAgICAgICAgICAgICBwb2x5Z29uOiBjcmVhdGVkU2hhcGVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvKiBDbG9zZSBvbmx5IHdoZW4gdGhyZXNob2xkIGlzIGF0dGFpbmVkIGZvciByZWd1bGFyIHBvbHlnb25zIGFuZCBmcmVlaGFuZCAqL1xyXG5cclxuICAgICAgICAgIGlmICh0aGlzLmNoZWNrVGhyZXNob2xkKHBvc2l0aW9uKSkge1xyXG4gICAgICAgICAgICAvKiBDbG9zZSBpZiB0aHJlc2hvbGQgaXMgcmVhY2hlZCAqL1xyXG4gICAgICAgICAgICBwb2x5Z29uT3B0aW9ucy5wb2ludHMuc3BsaWNlKFxyXG4gICAgICAgICAgICAgIC0yXHJcbiAgICAgICAgICAgICk7IC8qIFJlbW92ZSBleGlzdGluZyBtb3VzZSBvdmVyIHBvaW50cyAqL1xyXG4gICAgICAgICAgICBwb2x5Z29uT3B0aW9ucy5wb2ludHMucHVzaChcclxuICAgICAgICAgICAgICBwb2x5Z29uT3B0aW9ucy5wb2ludHNbMF0sXHJcbiAgICAgICAgICAgICAgcG9seWdvbk9wdGlvbnMucG9pbnRzWzFdXHJcbiAgICAgICAgICAgICk7IC8qIENsb3NlIHBvbHlnb24gd2l0aCBpbml0YWwgcG9pbnRzICovXHJcbiAgICAgICAgICAgIGNyZWF0ZWRTaGFwZS5wb2ludHMocG9seWdvbk9wdGlvbnMucG9pbnRzKTtcclxuICAgICAgICAgICAgcG9seWdvbk9wdGlvbnMucG9pbnRTZXQgPSB0cnVlO1xyXG4gICAgICAgICAgICBjcmVhdGVkU2hhcGUuY2xvc2VkKHRydWUpO1xyXG4gICAgICAgICAgICBjcmVhdGVkU2hhcGUuZHJhZ2dhYmxlKHRydWUpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgIHN0YXJ0OiBmYWxzZSxcclxuICAgICAgICAgICAgICBwb2x5Z29uOiBjcmVhdGVkU2hhcGVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHBvbHlnb25PcHRpb25zLnBvaW50cy5zcGxpY2UoXHJcbiAgICAgICAgICAgICAgLTJcclxuICAgICAgICAgICAgKTsgLyogUmVtb3ZlIGV4aXN0aW5nIG1vdXNlIG92ZXIgcG9pbnRzICovXHJcbiAgICAgICAgICAgIHBvbHlnb25PcHRpb25zLnBvaW50cy5wdXNoKHBvc2l0aW9uLngsIHBvc2l0aW9uLnkpO1xyXG4gICAgICAgICAgICBjcmVhdGVkU2hhcGUucG9pbnRzKHBvbHlnb25PcHRpb25zLnBvaW50cyk7XHJcbiAgICAgICAgICAgIHBvbHlnb25PcHRpb25zLnBvaW50U2V0ID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBkcmF3UG9seWdvbjogZnVuY3Rpb24ocG9zaXRpb24sIGZyZWVIYW5kKSB7XHJcbiAgICAgICAgaWYgKGNyZWF0ZWRTaGFwZSkge1xyXG4gICAgICAgICAgaWYgKGZyZWVIYW5kKSB7XHJcbiAgICAgICAgICAgIC8qIEZyZWVoYW5kIGJsb2NrICovXHJcbiAgICAgICAgICAgIHBvbHlnb25PcHRpb25zLnBvaW50cy5wdXNoKHBvc2l0aW9uLngsIHBvc2l0aW9uLnkpO1xyXG4gICAgICAgICAgICBjcmVhdGVkU2hhcGUucG9pbnRzKHBvbHlnb25PcHRpb25zLnBvaW50cyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvKiBQb2x5Z29uIGJsb2NrICovXHJcbiAgICAgICAgICAgIGlmIChwb2x5Z29uT3B0aW9ucy5wb2ludFNldCkge1xyXG4gICAgICAgICAgICAgIHBvbHlnb25PcHRpb25zLnBvaW50cy5wdXNoKHBvc2l0aW9uLngsIHBvc2l0aW9uLnkpO1xyXG4gICAgICAgICAgICAgIHBvbHlnb25PcHRpb25zLnBvaW50U2V0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgY3JlYXRlZFNoYXBlLnBvaW50cyhwb2x5Z29uT3B0aW9ucy5wb2ludHMpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHBvbHlnb25PcHRpb25zLnBvaW50c1twb2x5Z29uT3B0aW9ucy5wb2ludHMubGVuZ3RoIC0gMl0gPVxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb24ueDtcclxuICAgICAgICAgICAgICBwb2x5Z29uT3B0aW9ucy5wb2ludHNbcG9seWdvbk9wdGlvbnMucG9pbnRzLmxlbmd0aCAtIDFdID1cclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uLnk7XHJcbiAgICAgICAgICAgICAgY3JlYXRlZFNoYXBlLnBvaW50cyhwb2x5Z29uT3B0aW9ucy5wb2ludHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgY3JlYXRlTGluZTogZnVuY3Rpb24ocG9zaXRpb24sIHR5cGUpIHtcclxuICAgICAgICBpZiAoY3JlYXRlZFNoYXBlKSB7XHJcbiAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzdGFydDogZmFsc2UsXHJcbiAgICAgICAgICAgIGxpbmU6IGNyZWF0ZWRTaGFwZVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBsaW5lO1xyXG4gICAgICAgIHZhciBzaGFwZVByb3BzID0gc2hhcGVUb29scy5nZXQoKTtcclxuXHJcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICBjYXNlIFwibGluZVwiOlxyXG4gICAgICAgICAgICBsaW5lID0gbmV3IEtvbnZhLkxpbmUoe1xyXG4gICAgICAgICAgICAgIG5hbWU6IFwibGluZVNpbXBsZVwiICsgc2hhcGVJZC5nZXRDb3VudChcIm1hcmtpbmdzXCIsIFwibGluZVwiKSxcclxuICAgICAgICAgICAgICBwb2ludHM6IFtwb3NpdGlvbi54LCBwb3NpdGlvbi55XSxcclxuICAgICAgICAgICAgICBzdHJva2VXaWR0aDogc2hhcGVQcm9wcy5zdHJva2VXaWR0aCB8fCAxLFxyXG4gICAgICAgICAgICAgIHN0cm9rZTogc2hhcGVQcm9wcy5zdHJva2UgfHwgXCJibGFja1wiLFxyXG4gICAgICAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFwic2luZ2xlQXJyb3dcIjpcclxuICAgICAgICAgICAgbGluZSA9IG5ldyBLb252YS5BcnJvdyh7XHJcbiAgICAgICAgICAgICAgbmFtZTogXCJsaW5lQXJyb3dcIiArIHNoYXBlSWQuZ2V0Q291bnQoXCJtYXJraW5nc1wiLCBcInNpbmdsZUFycm93XCIpLFxyXG4gICAgICAgICAgICAgIHBvaW50czogW3Bvc2l0aW9uLngsIHBvc2l0aW9uLnldLFxyXG4gICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAxLFxyXG4gICAgICAgICAgICAgIHN0cm9rZTogc2hhcGVQcm9wcy5zdHJva2UgfHwgXCJibGFja1wiLFxyXG4gICAgICAgICAgICAgIGZpbGw6IHNoYXBlUHJvcHMuZmlsbCB8fCBcImJsYWNrXCIsXHJcbiAgICAgICAgICAgICAgZHJhZ2dhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgIHBvaW50ZXJMZW5ndGg6IDEwLFxyXG4gICAgICAgICAgICAgIHBvaW50ZXJXaWR0aDogMTBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgIGNhc2UgXCJkb3VibGVBcnJvd1wiOlxyXG4gICAgICAgICAgICBsaW5lID0gbmV3IEtvbnZhLkFycm93KHtcclxuICAgICAgICAgICAgICBuYW1lOlxyXG4gICAgICAgICAgICAgICAgXCJsaW5lQXJyb3dEb3VibGVcIiArIHNoYXBlSWQuZ2V0Q291bnQoXCJtYXJraW5nc1wiLCBcImRvdWJsZUFycm93XCIpLFxyXG4gICAgICAgICAgICAgIHBvaW50czogW3Bvc2l0aW9uLngsIHBvc2l0aW9uLnldLFxyXG4gICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiBzaGFwZVByb3BzLnN0cm9rZVdpZHRoIHx8IDEsXHJcbiAgICAgICAgICAgICAgc3Ryb2tlOiBzaGFwZVByb3BzLnN0cm9rZSB8fCBcImJsYWNrXCIsXHJcbiAgICAgICAgICAgICAgZmlsbDogc2hhcGVQcm9wcy5maWxsIHx8IFwiYmxhY2tcIixcclxuICAgICAgICAgICAgICBkcmFnZ2FibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgcG9pbnRlckxlbmd0aDogMTAsXHJcbiAgICAgICAgICAgICAgcG9pbnRlcldpZHRoOiAxMCxcclxuICAgICAgICAgICAgICBwb2ludGVyQXRCZWdpbm5pbmc6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjcmVhdGVkU2hhcGUgPSBsaW5lO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBzdGFydDogdHJ1ZSxcclxuICAgICAgICAgIGxpbmU6IGNyZWF0ZWRTaGFwZVxyXG4gICAgICAgIH07XHJcbiAgICAgIH0sXHJcbiAgICAgIGRyYXdMaW5lOiBmdW5jdGlvbihwb3NpdGlvbikge1xyXG4gICAgICAgIGlmIChjcmVhdGVkU2hhcGUpIHtcclxuICAgICAgICAgIHZhciBwb2ludHMgPSBjcmVhdGVkU2hhcGUucG9pbnRzKCk7XHJcbiAgICAgICAgICBwb2ludHNbMl0gPSBwb3NpdGlvbi54O1xyXG4gICAgICAgICAgcG9pbnRzWzNdID0gcG9zaXRpb24ueTtcclxuICAgICAgICAgIGNyZWF0ZWRTaGFwZS5wb2ludHMocG9pbnRzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBjcmVhdGVCZXppZXJMaW5lOiBmdW5jdGlvbihwb3NpdGlvbikge1xyXG4gICAgICAgIGlmIChjcmVhdGVkU2hhcGUpIHtcclxuICAgICAgICAgIHZhciBjcmVhdGVkUG9pbnRzID0gY3JlYXRlZFNoYXBlLnBvaW50cygpO1xyXG5cclxuICAgICAgICAgIHZhciBxID0gW1xyXG4gICAgICAgICAgICAoY3JlYXRlZFBvaW50c1syXSAtIGNyZWF0ZWRQb2ludHNbMF0pICogMC41ICsgY3JlYXRlZFBvaW50c1swXSxcclxuICAgICAgICAgICAgKGNyZWF0ZWRQb2ludHNbM10gLSBjcmVhdGVkUG9pbnRzWzFdKSAqIDAuNSArIGNyZWF0ZWRQb2ludHNbMV1cclxuICAgICAgICAgIF07XHJcblxyXG4gICAgICAgICAgdmFyIGIxID0gW1xyXG4gICAgICAgICAgICAoY3JlYXRlZFBvaW50c1syXSAtIGNyZWF0ZWRQb2ludHNbMF0pICogMC4yNSArIGNyZWF0ZWRQb2ludHNbMF0sXHJcbiAgICAgICAgICAgIChjcmVhdGVkUG9pbnRzWzNdIC0gY3JlYXRlZFBvaW50c1sxXSkgKiAwLjI1ICsgY3JlYXRlZFBvaW50c1sxXVxyXG4gICAgICAgICAgXTtcclxuICAgICAgICAgIHZhciBiMiA9IFtcclxuICAgICAgICAgICAgKGNyZWF0ZWRQb2ludHNbMl0gLSBjcmVhdGVkUG9pbnRzWzBdKSAqIDAuNzUgKyBjcmVhdGVkUG9pbnRzWzBdLFxyXG4gICAgICAgICAgICAoY3JlYXRlZFBvaW50c1szXSAtIGNyZWF0ZWRQb2ludHNbMV0pICogMC43NSArIGNyZWF0ZWRQb2ludHNbMV1cclxuICAgICAgICAgIF07XHJcblxyXG4gICAgICAgICAgY3JlYXRlZFBvaW50cy5wdXNoKHFbMF0sIHFbMV0pO1xyXG5cclxuICAgICAgICAgIGNyZWF0ZWRTaGFwZS5wb2ludHMoY3JlYXRlZFBvaW50cyk7XHJcbiAgICAgICAgICBjcmVhdGVkU2hhcGUudGVuc2lvbigxLjEpO1xyXG5cclxuICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN0YXJ0OiBmYWxzZSxcclxuICAgICAgICAgICAgbGluZTogY3JlYXRlZFNoYXBlXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHNoYXBlUHJvcHMgPSBzaGFwZVRvb2xzLmdldCgpO1xyXG5cclxuICAgICAgICB2YXIgYmV6aWVyID0gbmV3IEtvbnZhLkxpbmUoe1xyXG4gICAgICAgICAgbmFtZTogXCJiZXppZXJcIiArIHNoYXBlSWQuZ2V0Q291bnQoXCJtYXJraW5nc1wiLCBcImJlemllclwiKSxcclxuICAgICAgICAgIGxpbmVKb2luOiBcInJvdW5kXCIsXHJcbiAgICAgICAgICBwb2ludHM6IFtwb3NpdGlvbi54LCBwb3NpdGlvbi55XSxcclxuICAgICAgICAgIHN0cm9rZVdpZHRoOiBzaGFwZVByb3BzLnN0cm9rZVdpZHRoIHx8IDEsXHJcbiAgICAgICAgICBzdHJva2U6IHNoYXBlUHJvcHMuc3Ryb2tlIHx8IFwiYmxhY2tcIixcclxuICAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNyZWF0ZWRTaGFwZSA9IGJlemllcjtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHN0YXJ0OiB0cnVlLFxyXG4gICAgICAgICAgbGluZTogY3JlYXRlZFNoYXBlXHJcbiAgICAgICAgfTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGRyYXdCZXppZXJMaW5lOiBmdW5jdGlvbihwb3NpdGlvbikge1xyXG4gICAgICAgIGlmIChjcmVhdGVkU2hhcGUpIHtcclxuICAgICAgICAgIHZhciBwb2ludHMgPSBjcmVhdGVkU2hhcGUucG9pbnRzKCk7XHJcbiAgICAgICAgICBwb2ludHNbMl0gPSBwb3NpdGlvbi54O1xyXG4gICAgICAgICAgcG9pbnRzWzNdID0gcG9zaXRpb24ueTtcclxuICAgICAgICAgIGNyZWF0ZWRTaGFwZS5wb2ludHMocG9pbnRzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvLyB0ZXh0XHJcblxyXG4gICAgICBjcmVhdGVUZXh0OiBmdW5jdGlvbihwcm9wcykge1xyXG4gICAgICAgIHZhciB0ZXh0U2hhcGUgPSBuZXcgS29udmEuVGV4dCh7XHJcbiAgICAgICAgICB4OiBwcm9wcy5wb3NpdGlvbi54LFxyXG4gICAgICAgICAgeTogcHJvcHMucG9zaXRpb24ueSxcclxuICAgICAgICAgIG5hbWU6IFwidGV4dFwiLFxyXG4gICAgICAgICAgdGV4dDogXCJQbGFjZWhvbGRlciB0ZXh0XCIsXHJcbiAgICAgICAgICB3aWR0aDogcHJvcHMud2lkdGgsXHJcbiAgICAgICAgICBmb250U2l6ZTogMTYsXHJcbiAgICAgICAgICBmb250RmFtaWx5OiBcIkNhbGlicmlcIixcclxuICAgICAgICAgIGZpbGw6IFwiYmxhY2tcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0ZXh0U2hhcGU7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBjcmVhdGVUZXh0R3JvdXA6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciB0ZXh0R3JvdXAgPSBuZXcgS29udmEuR3JvdXAoe1xyXG4gICAgICAgICAgbmFtZTogXCJ0ZXh0R3JvdXBcIiArIHNoYXBlSWQuZ2V0Q291bnQoXCJtYXJraW5nc1wiLCBcInRleHRcIiksXHJcbiAgICAgICAgICBkcmFnZ2FibGU6IHRydWVcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRleHRHcm91cDtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8vIGNhbGlicmF0b3IgZnVuY3Rpb25cclxuICAgICAgY2FsaWJyYXRvcjogZnVuY3Rpb24oc3RhZ2UsIGxheWVyKSB7XHJcbiAgICAgICAgdmFyIHBvaW50cyA9IFtdO1xyXG4gICAgICAgIHZhciBpc0RvbmUgPSBmYWxzZTtcclxuICAgICAgICB2YXIgaW5pdCA9IHRydWU7XHJcbiAgICAgICAgdmFyIGxpbmU7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHBvc2l0aW9uLCBzZXQsIGtpbGwpIHtcclxuICAgICAgICAgIC8vIGtpbGxsaW5nIHRoZSBmdW5jdGlvblxyXG5cclxuICAgICAgICAgIGlmIChraWxsKSB7XHJcbiAgICAgICAgICAgIGxpbmUuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICBsYXllci5kcmF3KCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBwb3NpdGlvbiA9IHtcclxuICAgICAgICAgICAgeDogcG9zaXRpb24ueCAvIHN0YWdlLnNjYWxlKCkueCxcclxuICAgICAgICAgICAgeTogcG9zaXRpb24ueSAvIHN0YWdlLnNjYWxlKCkueVxyXG4gICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICBpZiAoIWlzRG9uZSkge1xyXG4gICAgICAgICAgICBpZiAoaW5pdCAmJiBzZXQpIHtcclxuICAgICAgICAgICAgICBwb2ludHMucHVzaChwb3NpdGlvbi54LCBwb3NpdGlvbi55KTtcclxuICAgICAgICAgICAgICBsaW5lID0gbmV3IEtvbnZhLkxpbmUoe1xyXG4gICAgICAgICAgICAgICAgcG9pbnRzOiBwb2ludHMsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBcImdyZXlcIixcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogXCJibGFja1wiLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IDEsXHJcbiAgICAgICAgICAgICAgICBkYXNoOiBbNSwgMV1cclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICBpbml0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgbGF5ZXIuYWRkKGxpbmUpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFpbml0KSB7XHJcbiAgICAgICAgICAgICAgaWYgKHNldCkge1xyXG4gICAgICAgICAgICAgICAgcG9pbnRzWzJdID0gcG9zaXRpb24ueDtcclxuICAgICAgICAgICAgICAgIHBvaW50c1szXSA9IHBvc2l0aW9uLnk7XHJcbiAgICAgICAgICAgICAgICBsaW5lLnBvaW50cyhwb2ludHMpO1xyXG4gICAgICAgICAgICAgICAgaXNEb25lID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdChcImNhbGlicmF0ZWRcIiwgbGluZSk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHBvaW50c1syXSA9IHBvc2l0aW9uLng7XHJcbiAgICAgICAgICAgICAgICBwb2ludHNbM10gPSBwb3NpdGlvbi55O1xyXG4gICAgICAgICAgICAgICAgbGluZS5wb2ludHMocG9pbnRzKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGxheWVyLmRyYXcoKTtcclxuICAgICAgICB9O1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgY2hlY2tUaHJlc2hvbGQ6IGZ1bmN0aW9uKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgdmFyIHByb3hpbWl0eSA9IDEwO1xyXG4gICAgICAgIC8vIGNhbHVsYXRpb24gdG8gaWRlbnRpZnkgdGhlIHByb3hpbWl0eSB0byBjbG9zZSB0aGUgcG9seWdvblxyXG4gICAgICAgIHZhciB4VXBwZXJUaHJlc2hvbGQgPSBwb2x5Z29uT3B0aW9ucy5wb2ludHNbMF0gKyBwcm94aW1pdHk7XHJcbiAgICAgICAgdmFyIHlVcHBlclRocmVzaG9sZCA9IHBvbHlnb25PcHRpb25zLnBvaW50c1sxXSArIHByb3hpbWl0eTtcclxuICAgICAgICB2YXIgeExvd2VyVGhyZXNob2xkID0gcG9seWdvbk9wdGlvbnMucG9pbnRzWzBdIC0gcHJveGltaXR5O1xyXG4gICAgICAgIHZhciB5TG93ZXJUaHJlc2hvbGQgPSBwb2x5Z29uT3B0aW9ucy5wb2ludHNbMV0gLSBwcm94aW1pdHk7XHJcbiAgICAgICAgcmV0dXJuIHhVcHBlclRocmVzaG9sZCA+IHBvc2l0aW9uLnggJiZcclxuICAgICAgICAgIHhMb3dlclRocmVzaG9sZCA8IHBvc2l0aW9uLnggJiZcclxuICAgICAgICAgICh5VXBwZXJUaHJlc2hvbGQgPiBwb3NpdGlvbi55ICYmIHlMb3dlclRocmVzaG9sZCA8IHBvc2l0aW9uLnkpXHJcbiAgICAgICAgICA/IHRydWVcclxuICAgICAgICAgIDogZmFsc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKiBFeHRyYWN0IGFsbCBzaGFwZXMgKi9cclxuICAgICAgZXh0cmFjdEFsbFNoYXBlczogZnVuY3Rpb24obGF5ZXIpIHtcclxuICAgICAgICB2YXIgYWxsU2hhcGVzID0gbGF5ZXIuZmluZChcIkdyb3VwXCIpLnJlZHVjZShmdW5jdGlvbihhY2MsIHgpIHtcclxuICAgICAgICAgIGlmICgvcHJvY2VzcyovLnRlc3QoeC5uYW1lKCkpKSB7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh4LmdldENoaWxkcmVuKCksIGZ1bmN0aW9uKGNoaWxkKSB7XHJcbiAgICAgICAgICAgICAgYWNjLnB1c2goY2hpbGQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBhY2M7XHJcbiAgICAgICAgfSwgW10pO1xyXG4gICAgICAgIHJldHVybiBhbGxTaGFwZXM7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBzZWxlY3RTaGFwZXM6IGZ1bmN0aW9uKGxheWVyLCBwb2ludHMpIHtcclxuICAgICAgICB2YXIgYWxsU2hhcGVzID0gdGhpcy5leHRyYWN0QWxsU2hhcGVzKGxheWVyKTtcclxuXHJcbiAgICAgICAgdmFyIHAxID0gW3BvaW50c1swXSwgcG9pbnRzWzFdXTtcclxuICAgICAgICB2YXIgcDIgPSBbcG9pbnRzWzRdLCBwb2ludHNbNV1dO1xyXG5cclxuICAgICAgICB2YXIgbWluID0ge1xyXG4gICAgICAgICAgeDogcG9pbnRzWzBdID4gcG9pbnRzWzRdID8gcG9pbnRzWzRdIDogcG9pbnRzWzBdLFxyXG4gICAgICAgICAgeTogcG9pbnRzWzFdID4gcG9pbnRzWzVdID8gcG9pbnRzWzVdIDogcG9pbnRzWzFdXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIG1heCA9IHtcclxuICAgICAgICAgIHg6IHBvaW50c1swXSA8IHBvaW50c1s0XSA/IHBvaW50c1s0XSA6IHBvaW50c1swXSxcclxuICAgICAgICAgIHk6IHBvaW50c1sxXSA8IHBvaW50c1s1XSA/IHBvaW50c1s1XSA6IHBvaW50c1sxXVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBjaGVja1NlbGVjdGlvbiA9IHRoaXMuY2hlY2tTZWxlY3Rpb247XHJcbiAgICAgICAgdmFyIHNlbGVjdGVkU2hhcGVzID0gYWxsU2hhcGVzLmZpbHRlcihmdW5jdGlvbih4KSB7XHJcbiAgICAgICAgICB2YXIgc2hhcGVOYW1lID0geC5uYW1lKCk7XHJcbiAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIC9SZWN0Ki8udGVzdChzaGFwZU5hbWUpIHx8XHJcbiAgICAgICAgICAgIC9wb2x5Z29uKi8udGVzdChzaGFwZU5hbWUpIHx8XHJcbiAgICAgICAgICAgIC9mcmVlSGFuZCovLnRlc3Qoc2hhcGVOYW1lKSB8fFxyXG4gICAgICAgICAgICAvbWFya2VyRnJlZUhhbmQvLnRlc3Qoc2hhcGVOYW1lKVxyXG4gICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHZhciBwb2ludHMgPSB4LnBvaW50cygpO1xyXG4gICAgICAgICAgICB2YXIgcG9zaXRpb25PZmZzZXQgPSB4LnBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgIHZhciB2ZXJ0aWNlcyA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGggLSAyOyBpICs9IDIpIHtcclxuICAgICAgICAgICAgICAvLyBpZ25vcmUgdGhlIGxhc3QgcGFpciBzaW5jZSBpdCdzIHNpbWlsYXIgdG8gdGhlIGZpcnN0IHBhaXJcclxuICAgICAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKFtcclxuICAgICAgICAgICAgICAgIHBvaW50c1tpXSArIHBvc2l0aW9uT2Zmc2V0LngsXHJcbiAgICAgICAgICAgICAgICBwb2ludHNbaSArIDFdICsgcG9zaXRpb25PZmZzZXQueVxyXG4gICAgICAgICAgICAgIF0pOyAvLyBjaHVua2lmeSBhbmQgb2Zmc2V0IHBvaW50cyBwb2ludHNcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvKiBDaGVja3MgaWYgYSBzaGFwZSBpcyBzZWxlY3RlZCBhbmQgcmV0dXJucyBCb29sZWFuICovXHJcbiAgICAgICAgICAgIHJldHVybiBjaGVja1NlbGVjdGlvbihcclxuICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBtaW46IG1pbixcclxuICAgICAgICAgICAgICAgIG1heDogbWF4XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICB2ZXJ0aWNlcyxcclxuICAgICAgICAgICAgICBcInJlY3RhbmdsZVwiXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKC9saW5lKi8udGVzdChzaGFwZU5hbWUpKSB7XHJcbiAgICAgICAgICAgIHZhciBwb2ludHMgPSB4LnBvaW50cygpO1xyXG4gICAgICAgICAgICB2YXIgcG9zaXRpb25PZmZzZXQgPSB4LnBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgIHZhciB2ZXJ0aWNlcyA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGg7IGkgKz0gMikge1xyXG4gICAgICAgICAgICAgIC8vIGlnbm9yZSB0aGUgbGFzdCBwYWlyIHNpbmNlIGl0J3Mgc2ltaWxhciB0byB0aGUgZmlyc3QgcGFpclxyXG4gICAgICAgICAgICAgIHZlcnRpY2VzLnB1c2goW1xyXG4gICAgICAgICAgICAgICAgcG9pbnRzW2ldICsgcG9zaXRpb25PZmZzZXQueCxcclxuICAgICAgICAgICAgICAgIHBvaW50c1tpICsgMV0gKyBwb3NpdGlvbk9mZnNldC55XHJcbiAgICAgICAgICAgICAgXSk7IC8vIGNodW5raWZ5IGFuZCBvZmZzZXQgcG9pbnRzIHBvaW50c1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8qIENoZWNrcyBpZiBhIHNoYXBlIGlzIHNlbGVjdGVkIGFuZCByZXR1cm5zIEJvb2xlYW4gKi9cclxuICAgICAgICAgICAgcmV0dXJuIGNoZWNrU2VsZWN0aW9uKFxyXG4gICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG1pbjogbWluLFxyXG4gICAgICAgICAgICAgICAgbWF4OiBtYXhcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIHZlcnRpY2VzLFxyXG4gICAgICAgICAgICAgIFwicmVjdGFuZ2xlXCJcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoL0VsbGlwc2UqLy50ZXN0KHNoYXBlTmFtZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNoZWNrU2VsZWN0aW9uKFxyXG4gICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG1pbjogbWluLFxyXG4gICAgICAgICAgICAgICAgbWF4OiBtYXhcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIHgucG9zaXRpb24oKSxcclxuICAgICAgICAgICAgICBcImVsbGlwc2VcIlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyogcmV0dXJuIG9ubHkgbmFtZXMgb2YgdGhvc2Ugc2hhcGVzICovXHJcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkU2hhcGVzO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgY2hlY2tTZWxlY3Rpb246IGZ1bmN0aW9uKHJhbmdlLCBwcm9wLCB0eXBlKSB7XHJcbiAgICAgICAgLyogU2VsZWN0aW9uIGxvZ2ljIGZvciByZWN0YW5nbGUgKi9cclxuICAgICAgICBpZiAodHlwZSA9PT0gXCJyZWN0YW5nbGVcIikge1xyXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICBwcm9wW2ldWzBdID49IHJhbmdlLm1pbi54ICYmXHJcbiAgICAgICAgICAgICAgcHJvcFtpXVswXSA8PSByYW5nZS5tYXgueCAmJiAvLyB4IC0gYXhpc1xyXG4gICAgICAgICAgICAgIChwcm9wW2ldWzFdID49IHJhbmdlLm1pbi55ICYmIHByb3BbaV1bMV0gPD0gcmFuZ2UubWF4LnkpIC8vIHkgLSBheGlzXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qIFNlbGVjdGlvbiBsb2dpYyBmb3IgZWxsaXBzZSAqL1xyXG4gICAgICAgIGlmICh0eXBlID09PSBcImVsbGlwc2VcIikge1xyXG4gICAgICAgICAgLy8gQ29tcGFyaW5nIHdpdGggY2VudGVyIHBvc2l0aW9uc1xyXG4gICAgICAgICAgcmV0dXJuIHByb3AueCA+PSByYW5nZS5taW4ueCAmJlxyXG4gICAgICAgICAgcHJvcC54IDw9IHJhbmdlLm1heC54ICYmIC8vIHggLSBheGlzXHJcbiAgICAgICAgICAgIChwcm9wLnkgPj0gcmFuZ2UubWluLnkgJiYgcHJvcC55IDw9IHJhbmdlLm1heC55KSAvLyAtYXhpc1xyXG4gICAgICAgICAgICA/IHRydWVcclxuICAgICAgICAgICAgOiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmZhY3RvcnkoXCJ0b29sc1ZQRmFjdG9yeVwiLCB0b29sc1ZQRmFjdG9yeSk7XHJcblxyXG4gIC8qKiBAbmdJbmplY3QgKi9cclxuICBmdW5jdGlvbiB0b29sc1ZQRmFjdG9yeSgkcm9vdFNjb3BlLCBldmVudHNWUEZhY3RvcnkpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIC8vIFJldHVybnMgYXJlYSBvZiBwb2x5Z29uXHJcbiAgICAgIC8qIFxyXG4gICAgICAgIEBwYXJhbSBwb2ludHMgPSBBcnJheSwgc2NhbGUgPSBOdW1iZXJcclxuICAgICAgICBAcmV0dXJuIE51bWJlclxyXG4gICAgICAqL1xyXG4gICAgICBwb2x5Z29uQXJlYTogZnVuY3Rpb24ocG9pbnRzLCBzY2FsZSkge1xyXG4gICAgICAgIHZhciBkZXQgPSAwO1xyXG4gICAgICAgIHZhciByZXN1bHQ7XHJcbiAgICAgICAgdmFyIGNodW5rZWRBcnJheSA9IFtdO1xyXG4gICAgICAgIHZhciBjaHVuayA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBpZiAoY2h1bmsubGVuZ3RoIDwgMikge1xyXG4gICAgICAgICAgICBjaHVuay5wdXNoKHBvaW50c1tpXSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjaHVua2VkQXJyYXkucHVzaCh7XHJcbiAgICAgICAgICAgICAgeDogY2h1bmtbMF0sXHJcbiAgICAgICAgICAgICAgeTogY2h1bmtbMV1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNodW5rID0gW107XHJcbiAgICAgICAgICAgIGNodW5rLnB1c2gocG9pbnRzW2ldKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGwgPSBjaHVua2VkQXJyYXkubGVuZ3RoO1xyXG5cclxuICAgICAgICBpZiAoY2h1bmtlZEFycmF5WzBdICE9IGNodW5rZWRBcnJheVtjaHVua2VkQXJyYXkubGVuZ3RoIC0gMV0pXHJcbiAgICAgICAgICBjaHVua2VkQXJyYXkgPSBjaHVua2VkQXJyYXkuY29uY2F0KGNodW5rZWRBcnJheVswXSk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbDsgaSsrKVxyXG4gICAgICAgICAgZGV0ICs9XHJcbiAgICAgICAgICAgIGNodW5rZWRBcnJheVtpXS54ICogY2h1bmtlZEFycmF5W2kgKyAxXS55IC1cclxuICAgICAgICAgICAgY2h1bmtlZEFycmF5W2ldLnkgKiBjaHVua2VkQXJyYXlbaSArIDFdLng7XHJcblxyXG4gICAgICAgIGlmIChzY2FsZSkge1xyXG4gICAgICAgICAgcmVzdWx0ID0gKE1hdGguYWJzKGRldCkgLyAyKSAqIHNjYWxlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXN1bHQgPSBNYXRoLmFicyhkZXQpIC8gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIE51bWJlci5wYXJzZUZsb2F0KHJlc3VsdCkudG9GaXhlZCgyKTtcclxuICAgICAgfSxcclxuICAgICAgLy8gQ2FsY3VsYXRlIGFyZWEgb2YgcmVjdGFuZ2xlXHJcblxyXG4gICAgICByZWN0YW5nbGVBcmVhOiBmdW5jdGlvbihoZWlnaHQsIHdpZHRoLCBzY2FsZSkge1xyXG4gICAgICAgIHZhciBhcmVhID0gaGVpZ2h0ICogd2lkdGggKiBzY2FsZTtcclxuICAgICAgICByZXR1cm4gYXJlYTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8vIFJldHVybiBhcmVhIG9mIGVsbGlwc2VcclxuICAgICAgZWxsaXBzZUFyZWE6IGZ1bmN0aW9uKHJhZGlpLCBzY2FsZSkge1xyXG4gICAgICAgIHZhciBhcmVhID0gTWF0aC5QSSAqIHJhZGlpLnggKiByYWRpaS55O1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBzY2FsZSA/IGFyZWEgKiBzY2FsZSA6IGFyZWE7XHJcbiAgICAgICAgcmV0dXJuIE51bWJlci5wYXJzZUZsb2F0KHJlc3VsdCkudG9GaXhlZCgyKTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGVsbGlwc2VUcmFuc2ZvbWVyOiBmdW5jdGlvbihzdGFnZSwgbGF5ZXIsIGVsbGlwc2UpIHtcclxuICAgICAgICB2YXIgdmVydGljZXMgPSBbXTtcclxuICAgICAgICB2YXIgc2V0ID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIGdyb3VwID0gbmV3IEtvbnZhLkdyb3VwKHtcclxuICAgICAgICAgIG5hbWU6IFwidHJhbnNmb3JtZXJzXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgc2V0OiBmdW5jdGlvbihyYWRpdXMpIHtcclxuICAgICAgICAgICAgdmFyIGVsbGlwc2VQb3NpdGlvbiA9IGVsbGlwc2UucG9zaXRpb24oKTtcclxuICAgICAgICAgICAgdmVydGljZXMucHVzaChcclxuICAgICAgICAgICAgICBbZWxsaXBzZVBvc2l0aW9uLnggLSByYWRpdXMueCwgZWxsaXBzZVBvc2l0aW9uLnldLFxyXG4gICAgICAgICAgICAgIFtlbGxpcHNlUG9zaXRpb24ueCArIHJhZGl1cy54LCBlbGxpcHNlUG9zaXRpb24ueV0sXHJcbiAgICAgICAgICAgICAgW2VsbGlwc2VQb3NpdGlvbi54LCBlbGxpcHNlUG9zaXRpb24ueSArIHJhZGl1cy55XSxcclxuICAgICAgICAgICAgICBbZWxsaXBzZVBvc2l0aW9uLngsIGVsbGlwc2VQb3NpdGlvbi55IC0gcmFkaXVzLnldXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHZhciBpbmMgPSAwO1xyXG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2godmVydGljZXMsIGZ1bmN0aW9uKHgsICRpbmRleCkge1xyXG4gICAgICAgICAgICAgIHZhciBjaXJjbGUgPSBuZXcgS29udmEuQ2lyY2xlKHtcclxuICAgICAgICAgICAgICAgIHg6IHhbMF0sXHJcbiAgICAgICAgICAgICAgICB5OiB4WzFdLFxyXG4gICAgICAgICAgICAgICAgcmFkaXVzOiA1IC8gbGF5ZXIuc2NhbGVYKCksXHJcbiAgICAgICAgICAgICAgICBuYW1lOlxyXG4gICAgICAgICAgICAgICAgICAoJGluZGV4ICsgaW5jKS50b1N0cmluZygpICtcclxuICAgICAgICAgICAgICAgICAgXCIsXCIgK1xyXG4gICAgICAgICAgICAgICAgICAoJGluZGV4ICsgaW5jICsgMSkudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIC8qIEFzc2lnbiBuYW1lcyBhcyBjby1vcmRpbmF0ZXMgKi9cclxuICAgICAgICAgICAgICAgIGZpbGw6IFwid2hpdGVcIixcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogXCJibGFja1wiLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IDMgLyBsYXllci5zY2FsZVgoKSxcclxuICAgICAgICAgICAgICAgIGRyYWdCb3VuZEZ1bmM6IGZ1bmN0aW9uKHBvcykge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHg6ICRpbmRleCA+IDEgPyB0aGlzLmdldEFic29sdXRlUG9zaXRpb24oKS54IDogcG9zLngsXHJcbiAgICAgICAgICAgICAgICAgICAgeTogJGluZGV4IDw9IDEgPyB0aGlzLmdldEFic29sdXRlUG9zaXRpb24oKS55IDogcG9zLnlcclxuICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IHRydWVcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICBpbmMrKztcclxuICAgICAgICAgICAgICB2YXIgY2lyY2xlRXZlbnQgPSBldmVudHNWUEZhY3Rvcnkuc2hhcGVFdmVudHMoY2lyY2xlKTtcclxuICAgICAgICAgICAgICBjaXJjbGVFdmVudC5yZWdpc3RlcihcImRyYWdtb3ZlLnRyYW5zZm9ybWVyXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHByZXZpb3VzUmFkaXVzID0gZWxsaXBzZS5yYWRpdXMoKTtcclxuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFZlcnRleCA9IGNpcmNsZS5uYW1lKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgaXNOZWdhdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChzZWxlY3RlZFZlcnRleCkge1xyXG4gICAgICAgICAgICAgICAgICBjYXNlIFwiMCwxXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgaXNOZWdhdGl2ZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICBlbGxpcHNlLnBvc2l0aW9uKCkueCAtIGNpcmNsZS54KCkgPCAwID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsbGlwc2UucmFkaXVzKHtcclxuICAgICAgICAgICAgICAgICAgICAgIHg6IE1hdGguYWJzKGVsbGlwc2UucG9zaXRpb24oKS54IC0gY2lyY2xlLngoKSksXHJcbiAgICAgICAgICAgICAgICAgICAgICB5OiBwcmV2aW91c1JhZGl1cy55XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGdyb3VwLmNoaWxkcmVuLCBmdW5jdGlvbih6KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoei5uYW1lKCkgPT09IFwiMiwzXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05lZ2F0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgei54KGVsbGlwc2UucG9zaXRpb24oKS54ICsgZWxsaXBzZS5yYWRpdXMoKS54KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB6LngoZWxsaXBzZS5wb3NpdGlvbigpLnggLSBlbGxpcHNlLnJhZGl1cygpLngpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgIGNhc2UgXCIyLDNcIjpcclxuICAgICAgICAgICAgICAgICAgICBpc05lZ2F0aXZlID1cclxuICAgICAgICAgICAgICAgICAgICAgIGVsbGlwc2UucG9zaXRpb24oKS54IC0gY2lyY2xlLngoKSA8IDAgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxsaXBzZS5yYWRpdXMoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgeDogTWF0aC5hYnMoZWxsaXBzZS5wb3NpdGlvbigpLnggLSBjaXJjbGUueCgpKSxcclxuICAgICAgICAgICAgICAgICAgICAgIHk6IHByZXZpb3VzUmFkaXVzLnlcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goZ3JvdXAuY2hpbGRyZW4sIGZ1bmN0aW9uKHopIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGlmICh6Lm5hbWUoKSA9PT0gXCIwLDFcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmVnYXRpdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB6LngoZWxsaXBzZS5wb3NpdGlvbigpLnggKyBlbGxpcHNlLnJhZGl1cygpLngpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHoueChlbGxpcHNlLnBvc2l0aW9uKCkueCAtIGVsbGlwc2UucmFkaXVzKCkueCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgY2FzZSBcIjQsNVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGlzTmVnYXRpdmUgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgZWxsaXBzZS5wb3NpdGlvbigpLnkgLSBjaXJjbGUueSgpIDwgMCA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBlbGxpcHNlLnJhZGl1cyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICB4OiBwcmV2aW91c1JhZGl1cy54LFxyXG4gICAgICAgICAgICAgICAgICAgICAgeTogTWF0aC5hYnMoZWxsaXBzZS5wb3NpdGlvbigpLnkgLSBjaXJjbGUueSgpKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChncm91cC5jaGlsZHJlbiwgZnVuY3Rpb24oeikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHoubmFtZSgpID09PSBcIjYsN1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNOZWdhdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHoueShlbGxpcHNlLnBvc2l0aW9uKCkueSArIGVsbGlwc2UucmFkaXVzKCkueSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgei55KGVsbGlwc2UucG9zaXRpb24oKS55IC0gZWxsaXBzZS5yYWRpdXMoKS55KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICBjYXNlIFwiNiw3XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgaXNOZWdhdGl2ZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICBlbGxpcHNlLnBvc2l0aW9uKCkueSAtIGNpcmNsZS55KCkgPCAwID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsbGlwc2UucmFkaXVzKHtcclxuICAgICAgICAgICAgICAgICAgICAgIHg6IHByZXZpb3VzUmFkaXVzLngsXHJcbiAgICAgICAgICAgICAgICAgICAgICB5OiBNYXRoLmFicyhlbGxpcHNlLnBvc2l0aW9uKCkueSAtIGNpcmNsZS55KCkpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGdyb3VwLmNoaWxkcmVuLCBmdW5jdGlvbih6KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoei5uYW1lKCkgPT09IFwiNCw1XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05lZ2F0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgei55KGVsbGlwc2UucG9zaXRpb24oKS55ICsgZWxsaXBzZS5yYWRpdXMoKS55KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB6LnkoZWxsaXBzZS5wb3NpdGlvbigpLnkgLSBlbGxpcHNlLnJhZGl1cygpLnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsYXllci5kcmF3KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZWxsaXBzZS5maXJlKFwidHJhbnNmb3JtRWxsaXBzZVwiKTtcclxuICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgLyogU2NhbGUgdHJhbnNmb21lciBiYXNlZCBvbiB6b29tICovXHJcblxyXG4gICAgICAgICAgICAgIGNpcmNsZUV2ZW50LnJlZ2lzdGVyKFwic2NhbGVPblpvb21cIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgZS50YXJnZXQucmFkaXVzKDUgLyBsYXllci5zY2FsZVgoKSk7XHJcbiAgICAgICAgICAgICAgICBlLnRhcmdldC5zdHJva2VXaWR0aCgzIC8gbGF5ZXIuc2NhbGVYKCkpO1xyXG4gICAgICAgICAgICAgICAgbGF5ZXIuZHJhdygpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICBjaXJjbGVFdmVudC5yZWdpc3RlcihcIm1vdXNlZW50ZXJcIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSBcIm1vdmVcIjtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICBjaXJjbGVFdmVudC5yZWdpc3RlcihcIm1vdXNlbGVhdmVcIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSBcImRlZmF1bHRcIjtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICBncm91cC5hZGQoY2lyY2xlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGVsbGlwc2UuZmlyZShcInRyYW5zZm9ybUVsbGlwc2VcIik7XHJcblxyXG4gICAgICAgICAgICBzZXQgPSB0cnVlO1xyXG4gICAgICAgICAgICBsYXllci5hZGQoZ3JvdXApO1xyXG4gICAgICAgICAgICByZXR1cm4gZ3JvdXA7XHJcbiAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgIGdldEdyb3VwOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdyb3VwO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBncm91cC5kZXN0cm95KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qIEN1c3RvbSB0cmFuc2Zvcm1lciBmb3IgcG9seWdvbiAqL1xyXG4gICAgICBjdXN0b21UcmFuc2Zvcm1lcjogZnVuY3Rpb24oc3RhZ2UsIGxheWVyLCBwb2x5Z29uLCBpc1JlY3RhbmdsZSkge1xyXG4gICAgICAgIC8qIENoYW5nZSB0cmFuc2Zvcm1lciBiZWhhdmlvdXMgYmFzZWQgb24gaXNSZWN0YW5nbGUgcGFyYW1ldGVyICovXHJcbiAgICAgICAgdmFyIHZlcnRpY2VzID0gW107XHJcbiAgICAgICAgdmFyIHNldCA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBncm91cCA9IG5ldyBLb252YS5Hcm91cCh7XHJcbiAgICAgICAgICBuYW1lOiBcInRyYW5zZm9ybWVyc1wiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIHBvbHlnb24gPSBwb2x5Z29uO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAvLyBtZXRob2QgdG8gc2V0IHRoZSBwb2ludHNcclxuICAgICAgICAgIHNldDogZnVuY3Rpb24ocG9pbnRzKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aCAtIDI7IGkgKz0gMikge1xyXG4gICAgICAgICAgICAgIC8vIGlnbm9yZSB0aGUgbGFzdCBwYWlyIHNpbmNlIGl0J3Mgc2ltaWxhciB0byB0aGUgZmlyc3QgcGFpclxyXG4gICAgICAgICAgICAgIHZlcnRpY2VzLnB1c2goW3BvaW50c1tpXSwgcG9pbnRzW2kgKyAxXV0pOyAvLyBjaHVua2lmeSBwb2ludHNcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyogQ291bnRlciB0byBnZW5lcmF0ZSBjaXJjbGUgbmFtZXMgdG8gbWFwIHRoZW0gd2l0aCBjby1vcmRpbmF0ZXMgKi9cclxuICAgICAgICAgICAgdmFyIGluYyA9IDA7XHJcblxyXG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2godmVydGljZXMsIGZ1bmN0aW9uKHgsICRpbmRleCkge1xyXG4gICAgICAgICAgICAgIHZhciBjaXJjbGUgPSBuZXcgS29udmEuQ2lyY2xlKHtcclxuICAgICAgICAgICAgICAgIHg6IHhbMF0sXHJcbiAgICAgICAgICAgICAgICB5OiB4WzFdLFxyXG4gICAgICAgICAgICAgICAgcmFkaXVzOiA1IC8gbGF5ZXIuc2NhbGVYKCksXHJcbiAgICAgICAgICAgICAgICBuYW1lOlxyXG4gICAgICAgICAgICAgICAgICAoJGluZGV4ICsgaW5jKS50b1N0cmluZygpICtcclxuICAgICAgICAgICAgICAgICAgXCIsXCIgK1xyXG4gICAgICAgICAgICAgICAgICAoJGluZGV4ICsgaW5jICsgMSkudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIC8qIEFzc2lnbiBuYW1lcyBhcyBjby1vcmRpbmF0ZXMgKi9cclxuICAgICAgICAgICAgICAgIGZpbGw6IFwid2hpdGVcIixcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogXCJibGFja1wiLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IDMgLyBsYXllci5zY2FsZVgoKSxcclxuICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIGluYysrO1xyXG5cclxuICAgICAgICAgICAgICAvKiBSZWdpc3RlciBkcmFnbW92ZSBldmVudHMgZm9yIHRoZSB0cmFuc2Zvcm1lcidzIHZlcnRleCAqL1xyXG4gICAgICAgICAgICAgIHZhciBjaXJjbGVFdmVudCA9IGV2ZW50c1ZQRmFjdG9yeS5zaGFwZUV2ZW50cyhjaXJjbGUpO1xyXG4gICAgICAgICAgICAgIGNpcmNsZUV2ZW50LnJlZ2lzdGVyKFwiZHJhZ21vdmUudHJhbnNmb3JtZXJcIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzUmVjdGFuZ2xlKSB7XHJcbiAgICAgICAgICAgICAgICAgIC8qIEJpbmQgb3RoZXIgdmVydGljZXMgZm9yIHJlY3RhbmdsZSAqL1xyXG4gICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRWZXJ0ZXggPSBjaXJjbGUubmFtZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgLyogRmluZCB4IGFuZCB5IGhpbmdlcyBiYXNlZCB1cG9uIGRpYWdvbmFsIGhpbmdlICovXHJcblxyXG4gICAgICAgICAgICAgICAgICBzd2l0Y2ggKHNlbGVjdGVkVmVydGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIjAsMVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgdmVydGljZXNbMF0gPSBbY2lyY2xlLngoKSwgY2lyY2xlLnkoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNlc1sxXVsxXSA9IGNpcmNsZS55KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNlc1szXVswXSA9IGNpcmNsZS54KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goZ3JvdXAuY2hpbGRyZW4sIGZ1bmN0aW9uKHopIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogeCAtIGNpcmNsZSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoei5uYW1lKCkgPT09IFwiNiw3XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB6LngoY2lyY2xlLngoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogeSAtIGNpcmNsZSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoei5uYW1lKCkgPT09IFwiMiwzXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB6LnkoY2lyY2xlLnkoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCIyLDNcIjpcclxuICAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2VzWzFdID0gW2NpcmNsZS54KCksIGNpcmNsZS55KCldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdmVydGljZXNbMF1bMV0gPSBjaXJjbGUueSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdmVydGljZXNbMl1bMF0gPSBjaXJjbGUueCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGdyb3VwLmNoaWxkcmVuLCBmdW5jdGlvbih6KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIHggLSBjaXJjbGUgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHoubmFtZSgpID09PSBcIjQsNVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgei54KGNpcmNsZS54KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIHkgLSBjaXJjbGUgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHoubmFtZSgpID09PSBcIjAsMVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgei55KGNpcmNsZS55KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCI0LDVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2VzWzJdID0gW2NpcmNsZS54KCksIGNpcmNsZS55KCldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdmVydGljZXNbM11bMV0gPSBjaXJjbGUueSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdmVydGljZXNbMV1bMF0gPSBjaXJjbGUueCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGdyb3VwLmNoaWxkcmVuLCBmdW5jdGlvbih6KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIHggLSBjaXJjbGUgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHoubmFtZSgpID09PSBcIjIsM1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgei54KGNpcmNsZS54KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIHkgLSBjaXJjbGUgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHoubmFtZSgpID09PSBcIjYsN1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgei55KGNpcmNsZS55KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCI2LDdcIjpcclxuICAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2VzWzNdID0gW2NpcmNsZS54KCksIGNpcmNsZS55KCldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdmVydGljZXNbMl1bMV0gPSBjaXJjbGUueSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdmVydGljZXNbMF1bMF0gPSBjaXJjbGUueCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGdyb3VwLmNoaWxkcmVuLCBmdW5jdGlvbih6KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIHggLSBjaXJjbGUgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHoubmFtZSgpID09PSBcIjAsMVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgei54KGNpcmNsZS54KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIHkgLSBjaXJjbGUgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHoubmFtZSgpID09PSBcIjQsNVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgei55KGNpcmNsZS55KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAvKiBJZ25vcmUgb3RoZXIgY2lyY2xlcyBmb3IgcG9seWdvbiAqL1xyXG4gICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goZ3JvdXAuY2hpbGRyZW4sIGZ1bmN0aW9uKHgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wLnB1c2goW3gueCgpLCB4LnkoKV0pO1xyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgdmVydGljZXMgPSBhbmd1bGFyLmNvcHkodGVtcCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwb2x5Z29uLmZpcmUoXCJ0cmFuc2Zvcm1Qb2x5Z29uXCIpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAvKiBTY2FsZSB0cmFuc2ZvbWVyIGJhc2VkIG9uIHpvb20gKi9cclxuICAgICAgICAgICAgICBjaXJjbGVFdmVudC5yZWdpc3RlcihcInNjYWxlT25ab29tXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgIGUudGFyZ2V0LnJhZGl1cyg1IC8gbGF5ZXIuc2NhbGVYKCkpO1xyXG4gICAgICAgICAgICAgICAgZS50YXJnZXQuc3Ryb2tlV2lkdGgoMyAvIGxheWVyLnNjYWxlWCgpKTtcclxuICAgICAgICAgICAgICAgIGxheWVyLmRyYXcoKTtcclxuICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgY2lyY2xlRXZlbnQucmVnaXN0ZXIoXCJtb3VzZWVudGVyXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gXCJtb3ZlXCI7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgY2lyY2xlRXZlbnQucmVnaXN0ZXIoXCJtb3VzZWxlYXZlXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gXCJkZWZhdWx0XCI7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgZ3JvdXAuYWRkKGNpcmNsZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgc2V0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgbGF5ZXIuYWRkKGdyb3VwKTtcclxuICAgICAgICAgICAgcmV0dXJuIGdyb3VwO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIC8vIHVwZGF0ZSB0cmFuc2Zvcm1lciBwb3NpdGlvbiB3aGVuIHNoYXBlIGlzIG1vdmVkXHJcbiAgICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uKG9mZnNldCkge1xyXG4gICAgICAgICAgICBncm91cC54KG9mZnNldC54KTtcclxuICAgICAgICAgICAgZ3JvdXAueShvZmZzZXQueSk7XHJcbiAgICAgICAgICAgIGxheWVyLmRyYXcoKTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBnZXRQb2ludHM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdmVydGljZXMucmVkdWNlKGZ1bmN0aW9uKGFjYywgeCwgaSkge1xyXG4gICAgICAgICAgICAgIGFjYy5wdXNoKHhbMF0sIHhbMV0pO1xyXG4gICAgICAgICAgICAgIGlmIChpID09PSB2ZXJ0aWNlcy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpbmNsdWRlIHRoZSBzdGFydCB2ZXJ0ZXggdHdpY2UgdG8gY29tcGxldGUgdGhlIHBvbHlnb25cclxuICAgICAgICAgICAgICAgIGFjYy5wdXNoKHZlcnRpY2VzWzBdLCB2ZXJ0aWNlc1sxXSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHJldHVybiBhY2M7XHJcbiAgICAgICAgICAgIH0sIFtdKTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBnZXRHcm91cDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBncm91cDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyogQmV6aWVyIFRyYW5zZm9ybWVyICovXHJcblxyXG4gICAgICBiZXppZXJUcmFuc2Zvcm1lcjogZnVuY3Rpb24oc3RhZ2UsIGxheWVyLCBiZXppZXIpIHtcclxuICAgICAgICB2YXIgdmVydGljZXMgPSBbXTtcclxuICAgICAgICB2YXIgc2V0ID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIGdyb3VwID0gbmV3IEtvbnZhLkdyb3VwKHtcclxuICAgICAgICAgIG5hbWU6IFwidHJhbnNmb3JtZXJzXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgYmV6aWVyID0gYmV6aWVyO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAvLyBtZXRob2QgdG8gc2V0IHRoZSBwb2ludHNcclxuICAgICAgICAgIHNldDogZnVuY3Rpb24ocG9pbnRzKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSArPSAyKSB7XHJcbiAgICAgICAgICAgICAgdmVydGljZXMucHVzaChbcG9pbnRzW2ldLCBwb2ludHNbaSArIDFdXSk7IC8vIGNodW5raWZ5IHBvaW50c1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiBDb3VudGVyIHRvIGdlbmVyYXRlIGNpcmNsZSBuYW1lcyB0byBtYXAgdGhlbSB3aXRoIGNvLW9yZGluYXRlcyAqL1xyXG4gICAgICAgICAgICB2YXIgaW5jID0gMDtcclxuXHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh2ZXJ0aWNlcywgZnVuY3Rpb24oeCwgJGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgdmFyIGNpcmNsZSA9IG5ldyBLb252YS5DaXJjbGUoe1xyXG4gICAgICAgICAgICAgICAgeDogeFswXSxcclxuICAgICAgICAgICAgICAgIHk6IHhbMV0sXHJcbiAgICAgICAgICAgICAgICByYWRpdXM6IDUgLyBsYXllci5zY2FsZVgoKSxcclxuICAgICAgICAgICAgICAgIG5hbWU6XHJcbiAgICAgICAgICAgICAgICAgICgkaW5kZXggKyBpbmMpLnRvU3RyaW5nKCkgK1xyXG4gICAgICAgICAgICAgICAgICBcIixcIiArXHJcbiAgICAgICAgICAgICAgICAgICgkaW5kZXggKyBpbmMgKyAxKS50b1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgLyogQXNzaWduIG5hbWVzIGFzIGNvLW9yZGluYXRlcyAqL1xyXG4gICAgICAgICAgICAgICAgZmlsbDogXCJ3aGl0ZVwiLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBcImJsYWNrXCIsXHJcbiAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogMyAvIGxheWVyLnNjYWxlWCgpLFxyXG4gICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiB0cnVlXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgaW5jKys7XHJcblxyXG4gICAgICAgICAgICAgIC8qIFJlZ2lzdGVyIGRyYWdtb3ZlIGV2ZW50cyBmb3IgdGhlIHRyYW5zZm9ybWVyJ3MgdmVydGV4ICovXHJcbiAgICAgICAgICAgICAgdmFyIGNpcmNsZUV2ZW50ID0gZXZlbnRzVlBGYWN0b3J5LnNoYXBlRXZlbnRzKGNpcmNsZSk7XHJcbiAgICAgICAgICAgICAgY2lyY2xlRXZlbnQucmVnaXN0ZXIoXCJkcmFnbW92ZS50cmFuc2Zvcm1lclwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGdyb3VwLmNoaWxkcmVuLCBmdW5jdGlvbih4KSB7XHJcbiAgICAgICAgICAgICAgICAgIHRlbXAucHVzaChbeC54KCksIHgueSgpXSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHZlcnRpY2VzID0gYW5ndWxhci5jb3B5KHRlbXApO1xyXG4gICAgICAgICAgICAgICAgYmV6aWVyLmZpcmUoXCJ0cmFuc2Zvcm1CZXppZXJcIik7XHJcbiAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgIC8qIFNjYWxlIHRyYW5zZm9tZXIgYmFzZWQgb24gem9vbSAqL1xyXG4gICAgICAgICAgICAgIGNpcmNsZUV2ZW50LnJlZ2lzdGVyKFwic2NhbGVPblpvb21cIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgZS50YXJnZXQucmFkaXVzKDUgLyBsYXllci5zY2FsZVgoKSk7XHJcbiAgICAgICAgICAgICAgICBlLnRhcmdldC5zdHJva2VXaWR0aCgzIC8gbGF5ZXIuc2NhbGVYKCkpO1xyXG4gICAgICAgICAgICAgICAgbGF5ZXIuZHJhdygpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICBjaXJjbGVFdmVudC5yZWdpc3RlcihcIm1vdXNlZW50ZXJcIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSBcIm1vdmVcIjtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICBjaXJjbGVFdmVudC5yZWdpc3RlcihcIm1vdXNlbGVhdmVcIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSBcImRlZmF1bHRcIjtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICBncm91cC5hZGQoY2lyY2xlKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBzZXQgPSB0cnVlO1xyXG4gICAgICAgICAgICBsYXllci5hZGQoZ3JvdXApO1xyXG4gICAgICAgICAgICByZXR1cm4gZ3JvdXA7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgLy8gdXBkYXRlIHRyYW5zZm9ybWVyIHBvc2l0aW9uIHdoZW4gc2hhcGUgaXMgbW92ZWRcclxuICAgICAgICAgIHVwZGF0ZTogZnVuY3Rpb24ob2Zmc2V0KSB7XHJcbiAgICAgICAgICAgIGdyb3VwLngob2Zmc2V0LngpO1xyXG4gICAgICAgICAgICBncm91cC55KG9mZnNldC55KTtcclxuICAgICAgICAgICAgbGF5ZXIuZHJhdygpO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGdldFBvaW50czogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2ZXJ0aWNlcy5yZWR1Y2UoZnVuY3Rpb24oYWNjLCB4LCBpKSB7XHJcbiAgICAgICAgICAgICAgYWNjLnB1c2goeFswXSwgeFsxXSk7XHJcbiAgICAgICAgICAgICAgaWYgKGkgPT09IHZlcnRpY2VzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgIC8vIGluY2x1ZGUgdGhlIHN0YXJ0IHZlcnRleCB0d2ljZSB0byBjb21wbGV0ZSB0aGUgcG9seWdvblxyXG4gICAgICAgICAgICAgICAgYWNjLnB1c2godmVydGljZXNbMF0sIHZlcnRpY2VzWzFdKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGFjYztcclxuICAgICAgICAgICAgfSwgW10pO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGdldEdyb3VwOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdyb3VwO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvLyBmdW5jdGlvbiB0byBzY2FsZSB0cmFuc2Zvcm1lciBiYXNlZCBvbiB6b29tXHJcblxyXG4gICAgICBzY2FsZVRyYW5zZm9ybWVyQmFzZWRPblpvb206IGZ1bmN0aW9uKGJhc2VMYXllcikge1xyXG4gICAgICAgIHZhciB0cmFuc2Zvcm1lckdyb3VwID0gYmFzZUxheWVyLmZpbmQoXCIudHJhbnNmb3JtZXJzXCIpO1xyXG4gICAgICAgIGlmICh0cmFuc2Zvcm1lckdyb3VwLmxlbmd0aCkge1xyXG4gICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHRyYW5zZm9ybWVyR3JvdXBbMF0uZ2V0Q2hpbGRyZW4oKSwgZnVuY3Rpb24oY2hpbGQpIHtcclxuICAgICAgICAgICAgY2hpbGQuZmlyZShcInNjYWxlT25ab29tXCIpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgbWV0cmljczogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHNoYXBlSW5mbztcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHNldFNoYXBlSW5mbzogZnVuY3Rpb24oaW5mbykge1xyXG4gICAgICAgICAgICBzaGFwZUluZm8gPSBpbmZvO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGdldFNoYXBlSW5mbzogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzaGFwZUluZm87XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGNvbG9yUGlja2VyOiBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgcHJvcHMgPSB7XHJcbiAgICAgICAgICBzdHJva2U6IFwiYmxhY2tcIixcclxuICAgICAgICAgIG9wYWNpdHk6IDEsXHJcbiAgICAgICAgICBmaWxsOiBcInJnYmEoMjU1LCAyNTUsIDI1NSwgMClcIixcclxuICAgICAgICAgIHN0cm9rZVdpZHRoOiAxXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHNldDogZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgIHByb3BzID0gT2JqZWN0LmFzc2lnbihwcm9wcywgb2JqKTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKHByb3ApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHByb3AgPyBwcm9wc1twcm9wXSA6IHByb3BzO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuY29udHJvbGxlcihcIl8zZERhc2hib2FyZEN0cmxcIiwgXzNkRGFzaGJvYXJkQ3RybCk7XHJcblxyXG4gICAgZnVuY3Rpb24gXzNkRGFzaGJvYXJkQ3RybChcclxuICAgICRzY29wZSxcclxuICAgICR0aW1lb3V0LFxyXG4gICAgYXV0aEZhY3RvcnksXHJcbiAgICAkc3RhdGUsXHJcbiAgICBhcGlGYWN0b3J5LFxyXG4gICAgTm90aWZpY2F0aW9uLFxyXG4gICAgbG9jYWxTdG9yYWdlU2VydmljZSxcclxuICAgIGdsb2JhbHMsXHJcbiAgICBOZ01hcFxyXG4gICkge1xyXG4gICAgLyogUmVxdWlyaW5nIHZhcnMgKi9cclxuXHJcbiAgICBsZXQgdm0gPSB0aGlzO1xyXG4gICAgICB2bS5sb2dnZWRJbiA9IHRydWVcclxuICAgIGNvbnN0IHsgbG9nb3V0LCB1c2VyU3RvcmUsIHRocm90dGxlciB9ID0gZ2xvYmFscztcclxuXHJcbiAgICBpZiAoIWF1dGhGYWN0b3J5LmNoZWNrVXNlcigpKSB7XHJcbiAgICAgIGxvZ291dCgpO1xyXG4gICAgICB2bS5sb2dnZWRJbiA9IGZhbHNlXHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBcclxuXHJcbiAgICB2bS5sb2dvdXQgPSAoKSA9PiB7XHJcbiAgICAgIGxvZ291dCgpO1xyXG4gICAgfTtcclxuICB9XHJcbn0pKCk7XHJcbiIsIigoKSA9PiB7XHJcbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwiXzNkdmlld2VyQ3RybFwiLCBfM2R2aWV3ZXJDdHJsKTtcclxuXHJcbiAgICBmdW5jdGlvbiBfM2R2aWV3ZXJDdHJsKFxyXG4gICAgICAgICRzY29wZSxcclxuICAgICAgICAkdGltZW91dCxcclxuICAgICAgICBhdXRoRmFjdG9yeSxcclxuICAgICAgICAkc3RhdGUsXHJcbiAgICAgICAgYXBpRmFjdG9yeSxcclxuICAgICAgICBOb3RpZmljYXRpb24sXHJcbiAgICAgICAgTmdNYXAsXHJcbiAgICAgICAgZ2xvYmFscyxcclxuICAgICAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLFxyXG4gICAgICApIHtcclxuICAgICAgICBsZXQgdm0gPSB0aGlzO1xyXG5cclxuICAgICAgICBjb25zdCB7IGxvZ291dCB9ID0gZ2xvYmFscztcclxuICAgIFxyXG4gICAgICAgIGlmICghYXV0aEZhY3RvcnkuY2hlY2tVc2VyKCkpIHtcclxuICAgICAgICAgIGxvZ291dCgpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHZtLmxvZ291dCA9ICgpID0+IHtcclxuICAgICAgICAgIGxvZ291dCgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgICAgXHJcblxyXG59KSgpOyIsIigoKSA9PiB7XHJcbiAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuY29udHJvbGxlcihcImJpbGxpbmdBcmNoaXZlQ3RybFwiLCBiaWxsaW5nQXJjaGl2ZUN0cmwpO1xyXG5cclxuICBmdW5jdGlvbiBiaWxsaW5nQXJjaGl2ZUN0cmwoXHJcbiAgICAkc2NvcGUsXHJcbiAgICAkdGltZW91dCxcclxuICAgICRsb2NhdGlvbixcclxuICAgIGF1dGhGYWN0b3J5LFxyXG4gICAgJHN0YXRlLFxyXG4gICAgYXBpRmFjdG9yeSxcclxuICAgIE5vdGlmaWNhdGlvbixcclxuICAgIGdsb2JhbHNcclxuICApIHtcclxuICAgIC8qIFJlcXVpcmluZyB2YXJzICovXHJcbiAgICBsZXQgdm0gPSB0aGlzO1xyXG4gICAgY29uc3QgeyBsb2dvdXQsIHVzZXJTdG9yZSB9ID0gZ2xvYmFscztcclxuICAgIGlmICghYXV0aEZhY3RvcnkuY2hlY2tVc2VyKCkpIHtcclxuICAgICAgbG9nb3V0KCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvKiBHZXQgcHJvamVjdCBsaXN0ICovXHJcbiAgICB2bS51c2VyRGF0YSA9IHVzZXJTdG9yZS5nZXQoKTtcclxuICAgIHZtLmxvZ291dCA9ICgpID0+IHsgbG9nb3V0KCk7IH07XHJcblxyXG5cclxuICAgIHZhciB1cmwgPSAkbG9jYXRpb24ucGF0aCgpO1xyXG4gICAgXHJcbiAgICBpZiAodXJsID09ICcvcGF5cm9sbCcpIHtcclxuICAgICAgJCgnLnBheXJvbGxNZW51JykuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrICFpbXBvcnRhbnQnKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICAkKCcucGF5cm9sbExpc3QnKS5EYXRhVGFibGUoKTtcclxuICAgIFxyXG4gICAgXHJcbiAgfVxyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJjYWxjdWxhdGlvbkN0cmxcIiwgY2FsY3VsYXRpb25DdHJsKTtcclxuXHJcbiAgZnVuY3Rpb24gY2FsY3VsYXRpb25DdHJsKFxyXG4gICAgJHNjb3BlLFxyXG4gICAgJHRpbWVvdXQsXHJcbiAgICAkbG9jYXRpb24sXHJcbiAgICBhdXRoRmFjdG9yeSxcclxuICAgICRzdGF0ZSxcclxuICAgIGFwaUZhY3RvcnksXHJcbiAgICBOb3RpZmljYXRpb24sXHJcbiAgICBnbG9iYWxzXHJcbiAgKSB7XHJcbiAgICAvKiBSZXF1aXJpbmcgdmFycyAqL1xyXG4gICAgbGV0IHZtID0gdGhpcztcclxuICAgIGNvbnN0IHsgbG9nb3V0LCB1c2VyU3RvcmUgfSA9IGdsb2JhbHM7XHJcbiAgICBpZiAoIWF1dGhGYWN0b3J5LmNoZWNrVXNlcigpKSB7XHJcbiAgICAgIGxvZ291dCgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLyogR2V0IHByb2plY3QgbGlzdCAqL1xyXG4gICAgdm0udXNlckRhdGEgPSB1c2VyU3RvcmUuZ2V0KCk7XHJcbiAgICB2bS5sb2dvdXQgPSAoKSA9PiB7IGxvZ291dCgpOyB9O1xyXG5cclxuXHJcbiAgICAkKCcucGF5cm9sbExpc3QnKS5EYXRhVGFibGUoKTtcclxuICAgIFxyXG4gICAgXHJcbiAgfVxyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJjYWxlbmRlckN0cmxcIiwgY2FsZW5kZXJDdHJsKTtcclxuXHJcbiAgZnVuY3Rpb24gY2FsZW5kZXJDdHJsKFxyXG4gICAgJHNjb3BlLFxyXG4gICAgJHRpbWVvdXQsXHJcbiAgICBhdXRoRmFjdG9yeSxcclxuICAgICRzdGF0ZSxcclxuICAgIGFwaUZhY3RvcnksXHJcbiAgICBOb3RpZmljYXRpb24sXHJcbiAgICBnbG9iYWxzLFxyXG4gICAgVXBsb2FkXHJcbiAgKSB7XHJcblxyXG4gICAgJHNjb3BlLmludml0ZWVzID0gW1xyXG4gICAgICAgIHsgaWQ6ICcxJywgaW1nOiAnL2Fzc2V0cy9pbWFnZXMvdXNlcl9waWMyLnBuZycsIG5hbWU6ICdMaXNhIEd1ZXJyZXJvJywgbGI6IHRydWUsICdzdGF0dXMnOiBmYWxzZSB9LFxyXG4gICAgICAgIHsgaWQ6ICcyJywgaW1nOiAnL2Fzc2V0cy9pbWFnZXMvdXNlcl9waWMzLnBuZycsIG5hbWU6ICdQZXRlciBHcmVnb3InLCBsYjogZmFsc2UsICdzdGF0dXMnOiBmYWxzZSB9LFxyXG4gICAgICAgIHsgaWQ6ICczJywgaW1nOiAnL2Fzc2V0cy9pbWFnZXMvdXNlcl9waWMyLnBuZycsIG5hbWU6ICdMaXNhIEd1ZXJyZXJvJywgbGI6IGZhbHNlLCAnc3RhdHVzJzogZmFsc2UgfSxcclxuICAgICAgICB7IGlkOiAnNCcsIGltZzogJy9hc3NldHMvaW1hZ2VzL3VzZXJfcGljMy5wbmcnLCBuYW1lOiAnUGV0ZXIgR3JlZ29yJywgbGI6IGZhbHNlLCAnc3RhdHVzJzogZmFsc2UgfVxyXG4gICAgXVxyXG4gICAgXHJcbiAgICAvKiBSZXF1aXJpbmcgdmFycyAqL1xyXG4gICAgbGV0IHZtID0gdGhpcztcclxuICAgIGNvbnN0IHsgbG9nb3V0LCB1c2VyU3RvcmUgfSA9IGdsb2JhbHM7XHJcbiAgICBpZiAoIWF1dGhGYWN0b3J5LmNoZWNrVXNlcigpKSB7XHJcbiAgICAgIGxvZ291dCgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB2bS5sb2dvdXQgPSAoKSA9PiB7XHJcbiAgICAgICAgbG9nb3V0KCk7XHJcbiAgICB9O1xyXG4gICAgLyogR2V0IHByb2plY3QgbGlzdCAqL1xyXG4gICAgdm0udXNlckRhdGEgPSB1c2VyU3RvcmUuZ2V0KCk7XHJcbiAgICBcclxuICB9XHJcbn0pKCk7XHJcbiIsIigoKSA9PiB7XHJcbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwiY2xpZW50c0N0cmxcIiwgY2xpZW50c0N0cmwpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNsaWVudHNDdHJsKFxyXG4gICAgICAgICRzY29wZSxcclxuICAgICAgICAkdGltZW91dCxcclxuICAgICAgICBhdXRoRmFjdG9yeSxcclxuICAgICAgICAkc3RhdGUsXHJcbiAgICAgICAgYXBpRmFjdG9yeSxcclxuICAgICAgICBOb3RpZmljYXRpb24sXHJcbiAgICAgICAgTmdNYXAsXHJcbiAgICAgICAgZ2xvYmFscyxcclxuICAgICAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLFxyXG4gICAgICApIHtcclxuICAgICAgICBsZXQgdm0gPSB0aGlzO1xyXG5cclxuICAgICAgICBjb25zdCB7IGxvZ291dCxkZWJvdW5jZSAsdXNlclN0b3JlfSA9IGdsb2JhbHM7XHJcbiAgICBcclxuICAgICAgICBpZiAoIWF1dGhGYWN0b3J5LmNoZWNrVXNlcigpKSB7XHJcbiAgICAgICAgICBsb2dvdXQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICBcclxuICAgICAgICB2bS51c2VyRGF0YSA9IHVzZXJTdG9yZS5nZXQoKTtcclxuICAgICAgICB2bS5sb2dvdXQgPSAoKSA9PiB7XHJcbiAgICAgICAgICBsb2dvdXQoKTtcclxuICAgICAgICB9O1xyXG4gICAgICBcclxuICAgICAgICAkc2NvcGUuJHdhdGNoKCd2bS5jbGllbnREYXRhLmNsaWVudENvbnRhY3QuZGlhbENvZGUnLCBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICQoJ2EuaXRlbS1zZWxlY3RlZCBzcGFuJykucmVtb3ZlQ2xhc3MoJ2dseXBoaWNvbiBnbHlwaGljb24tcmVtb3ZlJylcclxuICAgICAgICAgICQoJ2EuaXRlbS1zZWxlY3RlZCBzcGFuJykuYWRkQ2xhc3MoJ2ZhcyBmYS10aW1lcyBtci0zJylcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJChcIi5jbGllbnRzTGlzdFwiKS5EYXRhVGFibGUoKTtcclxuICAgICAgICAkc2NvcGUuYWN0aXZlSnVzdGlmaWVkID0gMDtcclxuXHJcbiAgICAgICAgdm0uY3VycmVudFBhZ2UgPSAxO1xyXG4gICAgXHJcbiAgICAgICAgdm0udG9nZ2xlT2JqID0ge1xyXG4gICAgICAgICAgdG9nZ2xlQ2xpZW50OiB7XHJcbiAgICAgICAgICAgIGNsaWVudE5hbWU6IGZhbHNlLFxyXG4gICAgICAgICAgICBwaG9uZU5vOiBmYWxzZSxcclxuICAgICAgICAgICAgZW1haWw6IGZhbHNlLFxyXG4gICAgICAgICAgICBwcmltYXJ5QWRkOiBmYWxzZSxcclxuICAgICAgICAgICAgY3JlYXRlZDogdHJ1ZSxcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHZtLnNlYXJjaFRleHQgPSBcIlwiO1xyXG4gICAgICAgIHZtLnNvcnRjbGllbnRzID0gKHR5cGUsIHJlc291cmNlKSA9PiB7XHJcbiAgICAgICAgICAvKiBGb3IgdG9nZ2xpbmcgYXNjZW5kaW5nIGFuZCBkZXNjZW5kaW5nIG9yZGVyICovXHJcbiAgICAgICAgICB2bS50b2dnbGVPYmpbcmVzb3VyY2VdW3R5cGVdID09PSB1bmRlZmluZWRcclxuICAgICAgICAgICAgPyAodm0udG9nZ2xlT2JqW3Jlc291cmNlXVt0eXBlXSA9IHRydWUpXHJcbiAgICAgICAgICAgIDogKHZtLnRvZ2dsZU9ialtyZXNvdXJjZV1bdHlwZV0gPSAhdm0udG9nZ2xlT2JqW3Jlc291cmNlXVt0eXBlXSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgICAgYXBpRmFjdG9yeVxyXG4gICAgICAgICAgICAubGlzdEFsbENsaWVudHMoe1xyXG4gICAgICAgICAgICAgIHBhZ2U6IDEsXHJcbiAgICAgICAgICAgICAgY2h1bms6IDEwLFxyXG4gICAgICAgICAgICAgIHNvcnQ6IHR5cGUsXHJcbiAgICAgICAgICAgICAgc2VhcmNoOiB2bS5zZWFyY2hUZXh0LFxyXG4gICAgICAgICAgICAgIHNvcnRUeXBlOiB2bS50b2dnbGVPYmpbcmVzb3VyY2VdW3R5cGVdXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICB2bS5hbGxDbGllbnRzID0gcmVzcC5kYXRhLmxpc3Q7XHJcbiAgICAgICAgICAgICAgdm0uY2xpZW50Q291bnQgPSByZXNwLmRhdGEudG90YWw7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICR0aW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICQoXCIjcGFnaW5hdGlvblwiKS5wYWdpbmF0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgaXRlbXM6IHZtLmNsaWVudENvdW50LFxyXG4gICAgICAgICAgICAgICAgICBpdGVtc09uUGFnZTogMTAsXHJcbiAgICAgICAgICAgICAgICAgIGNzc1N0eWxlOiBcImxpZ2h0LXRoZW1lXCIsXHJcbiAgICAgICAgICAgICAgICAgIGhyZWZUZXh0UHJlZml4OiBcIiNcIixcclxuICAgICAgICAgICAgICAgICAgb3JkZXJpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICBjdXJyZW50UGFnZTogMSxcclxuICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgb25QYWdlQ2xpY2s6IGZ1bmN0aW9uKHBhZ2UsIGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgICAgICAgICAgICAgICAubGlzdEFsbENsaWVudHMoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlOiBwYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVuazogMTAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnQ6IHR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRUeXBlOiB2bS50b2dnbGVPYmpbdHlwZV1cclxuICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm0uYWxsQ2xpZW50cyA9IHJlc3AuZGF0YS5saXN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2bS5zZWFyY2hUZXh0ID0gXCJcIjtcclxuICAgICAgICBjb25zdCBzZWFyY2hEZWJvdW5jZSA9IGRlYm91bmNlKDI1MCk7IC8qIFBhc3NpbmcgaW4gdGhlIGRlYm91bmNlIHJhdGUgKi9cclxuICAgICAgICB2bS5zZWFyY2hDbGllbnRzID0gdGV4dCA9PiB7XHJcbiAgICAgICAgICAvKipcclxuICAgICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGZuIC0gcGFzcyB0aGUgZnVuY3Rpb24gd2hpY2ggeW91IHdhbnQgdG8gZGVib3VuY2VcclxuICAgICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGFyZ3MgLSBwYXNzIHRoZSBhcmd1bWVudHMgZnJvbSB0aGUgdmlldyBhcyBhbiBhcnJheVxyXG4gICAgICAgICAgICovXHJcbiAgICAgICAgICBzZWFyY2hEZWJvdW5jZShcclxuICAgICAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAgICAgICAgLmxpc3RBbGxDbGllbnRzKHtcclxuICAgICAgICAgICAgICAgIHBhZ2U6IDEsXHJcbiAgICAgICAgICAgICAgICBjaHVuazogMTAsXHJcbiAgICAgICAgICAgICAgICBzZWFyY2g6IHRleHQsXHJcbiAgICAgICAgICAgICAgICBzb3J0OiBcImNyZWF0ZWRcIixcclxuICAgICAgICAgICAgICAgIHNvcnRUeXBlOiBmYWxzZVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgICAgICAgdm0uYWxsQ2xpZW50cyA9IHJlc3AuZGF0YS5saXN0O1xyXG4gICAgICAgICAgICAgICAgICB2bS5jbGllbnRDb3VudCA9IHJlc3AuZGF0YS50b3RhbDtcclxuICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICQoXCIjcGFnaW5hdGlvblwiKS5wYWdpbmF0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiB2bS5jbGllbnRDb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zT25QYWdlOiAxMCxcclxuICAgICAgICAgICAgICAgICAgICAgIGNzc1N0eWxlOiBcImxpZ2h0LXRoZW1lXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBocmVmVGV4dFByZWZpeDogXCIjXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBvcmRlcmluZzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGFnZTogMSxcclxuICAgICAgICAgICAgICAgICAgICAgIG9uUGFnZUNsaWNrOiBmdW5jdGlvbihwYWdlLCBldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGlGYWN0b3J5Lmxpc3RBbGxDbGllbnRzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlOiBwYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rOiAxMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0OiB0eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRUeXBlOiB2bS50b2dnbGVPYmpbcmVzb3VyY2VdW3R5cGVdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5hbGxDbGllbnRzID0gcmVzcC5kYXRhLmxpc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBbdGV4dF1cclxuICAgICAgICAgICAgLy9bdGV4dCwgcmVzb3VyY2VdXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICAvKiBJbml0aWFsbHkgc29ydCBjbGllbnRzIGluIGRlc2NlbmRpbmcgb3JkZXIgKi9cclxuICAgICAgICAgIHZtLnNvcnRjbGllbnRzKFwiY3JlYXRlZFwiLCBcInRvZ2dsZUNsaWVudFwiKTtcclxuICAgICAgICB2bS5kdE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIHBhZ2luZzogZmFsc2UsXHJcbiAgICAgICAgICAgIGluZm86IGZhbHNlLFxyXG4gICAgICAgICAgICBvcmRlcmluZzogZmFsc2UsXHJcbiAgICAgICAgICAgIHNlYXJjaGluZzogZmFsc2VcclxuICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgZ2xvYmFscy5nZXRDb3VudHJ5Q29kZSgpLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgIHZtLmdldENvdW50cnlDb2RlID0gcmVzcC5kYXRhO1xyXG4gICAgICAgICAgIFxyXG4gICAgICAgICAgICB2bS5sb2FkQ291bnRyeUNvZGUgPSAkcXVlcnkgPT4ge1xyXG4gICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3AuZGF0YSk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGdsb2JhbHMuZ2V0SW5kdXN0cnkoKS50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICB2bS5nZXRJbmR1c3RyaWVzID0gcmVzcC5kYXRhO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdm0ubG9hZEluZHVzdHJ5ID0gJHF1ZXJ5ID0+IHtcclxuICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwLmRhdGEpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBnbG9iYWxzLmdldEN1cnJlbmN5KCkudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgdm0uZ2V0Q3VycmVuY2llcyA9IHJlc3AuZGF0YTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHZtLmxvYWRDdXJyZW5jeSA9ICRxdWVyeSA9PiB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcC5kYXRhKTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIHZtLmFkZE5ld0NsaWVudD1mdW5jdGlvbih2YWxpZCxjbGllbnRkYXRhKXtcclxuICAgICAgICAgICAgdmFyIGNsaWVudD17fTtcclxuICAgICAgICAgICAgdmFyIGluZHVzdHJpZXM9W107XHJcbiAgICAgICAgICBcclxuICAgICAgICAgICBcclxuICAgICAgICAgICAgICBpZihjbGllbnRkYXRhPT09dW5kZWZpbmVkfHxjbGllbnRkYXRhPT09bnVsbCl7XHJcbiAgICAgICAgICAgICAgICBOb3RpZmljYXRpb24uZXJyb3IoXCJDYW5ub3Qgc2F2ZSBlbXB0eSByZWNvcmRcIik7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmKGNsaWVudGRhdGEuY2xpZW50TmFtZT09PXVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICBOb3RpZmljYXRpb24uZXJyb3IoXCJQbGVhc2UgZW50ZXIgbmFtZSBvZiBjbGllbnRcIik7XHJcbiAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBjbGllbnQuY2xpZW50TmFtZT1jbGllbnRkYXRhLmNsaWVudE5hbWU7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmKGNsaWVudGRhdGEuY2xpZW50Q29udGFjdD09PXVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICBOb3RpZmljYXRpb24uZXJyb3IoXCJQbGVhc2UgZW50ZXIgcGhvbmUgZGV0YWlsc1wiKTtcclxuICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGNsaWVudC5jbGllbnRDb250YWN0PXtcclxuICAgICAgICAgICAgICAgICAgZGlhbENvZGU6IGNsaWVudGRhdGEuY2xpZW50Q29udGFjdC5kaWFsQ29kZVswXS5kaWFsQ29kZSxcclxuICAgICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IGNsaWVudGRhdGEuY2xpZW50Q29udGFjdC5waG9uZU51bWJlclxyXG4gICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgaWYoY2xpZW50ZGF0YS5kZXNjcmlwdGlvbiE9dW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgIGNsaWVudC5kZXNjcmlwdGlvbiA9IGNsaWVudGRhdGEuZGVzY3JpcHRpb247XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmKGNsaWVudGRhdGEueWVhckZvdW5kZWQhPXVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICBjbGllbnQueWVhckZvdW5kZWQgPSBjbGllbnRkYXRhLnllYXJGb3VuZGVkO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZihjbGllbnRkYXRhLmNsaWVudFdlYnNpdGUhPXVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICBjbGllbnQuY2xpZW50V2Vic2l0ZSA9IGNsaWVudGRhdGEuY2xpZW50V2Vic2l0ZTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgaWYoY2xpZW50ZGF0YS5lbWFpbCE9dW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgIGNsaWVudC5lbWFpbD1jbGllbnRkYXRhLmVtYWlsXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmKGNsaWVudGRhdGEuaW5kdXN0cnkhPXVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICBjbGllbnRkYXRhLmluZHVzdHJ5LmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIGluZHVzdHJpZXMucHVzaChlbGVtZW50LnR5cGUpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjbGllbnQuaW5kdXN0cnk9aW5kdXN0cmllcztcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGlmKGNsaWVudGRhdGEuY2xpZW50Q29udGFjdFBlcnNvbiE9dW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgIGlmKGNsaWVudGRhdGEuY2xpZW50Q29udGFjdFBlcnNvbi5kaWFsQ29kZSl7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZGlhbCBjb2RlIGV4aXN0XCIpO1xyXG4gICAgICAgICAgICAgICAgICBjbGllbnQuY2xpZW50Q29udGFjdFBlcnNvbj17XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lOiBjbGllbnRkYXRhLmNsaWVudENvbnRhY3RQZXJzb24uZmlyc3ROYW1lLCBcclxuICAgICAgICAgICAgICAgICAgICBtaWRkbGVOYW1lOiBjbGllbnRkYXRhLmNsaWVudENvbnRhY3RQZXJzb24ubWlkZGxlTmFtZSwgXHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdE5hbWU6Y2xpZW50ZGF0YS5jbGllbnRDb250YWN0UGVyc29uLmxhc3ROYW1lLCBcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogY2xpZW50ZGF0YS5jbGllbnRDb250YWN0UGVyc29uLmVtYWlsLCBcclxuICAgICAgICAgICAgICAgICAgICBtb2JpbGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlhbENvZGU6IGNsaWVudGRhdGEuY2xpZW50Q29udGFjdFBlcnNvbi5kaWFsQ29kZVswXS5kaWFsQ29kZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IGNsaWVudGRhdGEuY2xpZW50Q29udGFjdFBlcnNvbi5waG9uZU51bWJlclxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgIGNsaWVudC5jbGllbnRDb250YWN0UGVyc29uPXtcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IGNsaWVudGRhdGEuY2xpZW50Q29udGFjdFBlcnNvbi5maXJzdE5hbWUsIFxyXG4gICAgICAgICAgICAgICAgICAgIG1pZGRsZU5hbWU6IGNsaWVudGRhdGEuY2xpZW50Q29udGFjdFBlcnNvbi5taWRkbGVOYW1lLCBcclxuICAgICAgICAgICAgICAgICAgICBsYXN0TmFtZTpjbGllbnRkYXRhLmNsaWVudENvbnRhY3RQZXJzb24ubGFzdE5hbWUsIFxyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiBjbGllbnRkYXRhLmNsaWVudENvbnRhY3RQZXJzb24uZW1haWwsIFxyXG4gICAgICAgICAgICAgICAgICAgIG1vYmlsZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwaG9uZU51bWJlcjogY2xpZW50ZGF0YS5jbGllbnRDb250YWN0UGVyc29uLnBob25lTnVtYmVyXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgaWYoY2xpZW50ZGF0YS5hbm51YWxSZXZlbnVlIT11bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgaWYoY2xpZW50ZGF0YS5hbm51YWxSZXZlbnVlLmN1cnJlbmN5Q29kZSl7XHJcbiAgICAgICAgICAgICAgICAgIGNsaWVudC5hbm51YWxSZXZlbnVlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBjbGllbnRkYXRhLmFubnVhbFJldmVudWUudmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVuY3lDb2RlOiBjbGllbnRkYXRhLmFubnVhbFJldmVudWUuY3VycmVuY3lDb2RlWzBdLmNjXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgY2xpZW50LmFubnVhbFJldmVudWUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNsaWVudGRhdGEuYW5udWFsUmV2ZW51ZS52YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICBpZihjbGllbnRkYXRhLmFkZHJlc3MyIT11bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgaWYoY2xpZW50ZGF0YS5hZGRyZXNzMi5jb3VudHJ5Q29kZSl7XHJcbiAgICAgICAgICAgICAgICAgIGNsaWVudC5hZGRyZXNzMj17XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZTE6IGNsaWVudGRhdGEuYWRkcmVzczIubGluZTEsIFxyXG4gICAgICAgICAgICAgICAgICAgIGxpbmUyOiBjbGllbnRkYXRhLmFkZHJlc3MyLmxpbmUyLCBcclxuICAgICAgICAgICAgICAgICAgICBsaW5lMzogY2xpZW50ZGF0YS5hZGRyZXNzMi5saW5lMyxcclxuICAgICAgICAgICAgICAgICAgICBjaXR5OiBjbGllbnRkYXRhLmFkZHJlc3MyLmNpdHksIFxyXG4gICAgICAgICAgICAgICAgICAgIHBvc3RhbENvZGU6IGNsaWVudGRhdGEuYWRkcmVzczIucG9zdGFsQ29kZSwgXHJcbiAgICAgICAgICAgICAgICAgICAgY291bnRyeUNvZGU6IGNsaWVudGRhdGEuYWRkcmVzczIuY291bnRyeUNvZGVbMF0uY29kZSBcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgIGNsaWVudC5hZGRyZXNzMj17XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZTE6IGNsaWVudGRhdGEuYWRkcmVzczIubGluZTEsIFxyXG4gICAgICAgICAgICAgICAgICAgIGxpbmUyOiBjbGllbnRkYXRhLmFkZHJlc3MyLmxpbmUyLCBcclxuICAgICAgICAgICAgICAgICAgICBsaW5lMzogY2xpZW50ZGF0YS5hZGRyZXNzMi5saW5lMyxcclxuICAgICAgICAgICAgICAgICAgICBjaXR5OiBjbGllbnRkYXRhLmFkZHJlc3MyLmNpdHksIFxyXG4gICAgICAgICAgICAgICAgICAgIHBvc3RhbENvZGU6IGNsaWVudGRhdGEuYWRkcmVzczIucG9zdGFsQ29kZSwgXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmKGNsaWVudGRhdGEuYWRkcmVzczEhPXVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICBpZihjbGllbnRkYXRhLmFkZHJlc3MxLmNvdW50cnlDb2RlKXtcclxuICAgICAgICAgICAgICAgICAgY2xpZW50LmFkZHJlc3MxPXtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lMTogY2xpZW50ZGF0YS5hZGRyZXNzMS5saW5lMSwgXHJcbiAgICAgICAgICAgICAgICAgICAgbGluZTI6IGNsaWVudGRhdGEuYWRkcmVzczEubGluZTIsIFxyXG4gICAgICAgICAgICAgICAgICAgIGxpbmUzOiBjbGllbnRkYXRhLmFkZHJlc3MxLmxpbmUzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNpdHk6IGNsaWVudGRhdGEuYWRkcmVzczEuY2l0eSwgXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zdGFsQ29kZTogY2xpZW50ZGF0YS5hZGRyZXNzMS5wb3N0YWxDb2RlLCBcclxuICAgICAgICAgICAgICAgICAgICBjb3VudHJ5Q29kZTogY2xpZW50ZGF0YS5hZGRyZXNzMS5jb3VudHJ5Q29kZVswXS5jb2RlXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICBjbGllbnQuYWRkcmVzczE9e1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmUxOiBjbGllbnRkYXRhLmFkZHJlc3MxLmxpbmUxLCBcclxuICAgICAgICAgICAgICAgICAgICBsaW5lMjogY2xpZW50ZGF0YS5hZGRyZXNzMS5saW5lMiwgXHJcbiAgICAgICAgICAgICAgICAgICAgbGluZTM6IGNsaWVudGRhdGEuYWRkcmVzczEubGluZTMsXHJcbiAgICAgICAgICAgICAgICAgICAgY2l0eTogY2xpZW50ZGF0YS5hZGRyZXNzMS5jaXR5LCBcclxuICAgICAgICAgICAgICAgICAgICBwb3N0YWxDb2RlOiBjbGllbnRkYXRhLmFkZHJlc3MxLnBvc3RhbENvZGUsIFxyXG4gICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgYXBpRmFjdG9yeS5jcmVhdGVDbGllbnQoY2xpZW50KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzcCA9PntcclxuICAgICAgICAgICAgICAgICAgTm90aWZpY2F0aW9uLnN1Y2Nlc3MoXCJJc3N1ZSBoYXMgYmVlbiBzYXZlZCBzdWNjZXNzZnVsbHlcIik7XHJcbiAgICAgICAgICAgICAgICAgIHZtLmNsaWVudERhdGE9e307XHJcbiAgICAgICAgICAgICAgICAgICQoJyNhZGRDbGllbnQnKS5tb2RhbCgnaGlkZScpXHJcbiAgICAgICAgICAgICAgICAgIHZtLnNvcnRjbGllbnRzKFwiY3JlYXRlZFwiLCBcInRvZ2dsZUNsaWVudFwiKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgLmNhdGNoKGU9PntcclxuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICAgICAgICAgIE5vdGlmaWNhdGlvbi5lcnJvcihcIlNvbWV0aGluZyB3ZW50IHdyb25nXCIpO1xyXG4gICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgfVxyXG4gICAgIFxyXG5cclxufSkoKTsiLCIoKCkgPT4ge1xyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoXCJhcHBcIilcclxuICAgIC5jb250cm9sbGVyKFwiY29tYm9NYXRlcmlhbFZpZXdDdHJsXCIsIGNvbWJvTWF0ZXJpYWxWaWV3Q3RybCk7XHJcblxyXG4gIGZ1bmN0aW9uIGNvbWJvTWF0ZXJpYWxWaWV3Q3RybChcclxuICAgICRzY29wZSxcclxuICAgICR0aW1lb3V0LFxyXG4gICAgYXV0aEZhY3RvcnksXHJcbiAgICAkc3RhdGUsXHJcbiAgICAkc3RhdGVQYXJhbXMsXHJcbiAgICBhcGlGYWN0b3J5LFxyXG4gICAgTm90aWZpY2F0aW9uLFxyXG4gICAgZ2xvYmFscyxcclxuICAgICRsb2NhdGlvbixcclxuICAgIFVwbG9hZFxyXG4gICkge1xyXG4gICAgLyogUmVxdWlyaW5nIHZhcnMgKi9cclxuICAgIGxldCB2bSA9IHRoaXM7XHJcbiAgICBjb25zdCB7IGxvZ291dCwgdXNlclN0b3JlIH0gPSBnbG9iYWxzO1xyXG4gICAgaWYgKCFhdXRoRmFjdG9yeS5jaGVja1VzZXIoKSkge1xyXG4gICAgICBsb2dvdXQoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB2bS5lZGl0RmxhZyA9IGZhbHNlXHJcbiAgICB2bS5jb21ib0lkID0gJHN0YXRlUGFyYW1zLmlkO1xyXG4gICAgdm0ubVVuaXRzID0gZ2xvYmFscy5tVW5pdHM7XHJcbiAgICB2bS5yZW1vdmVkRmlsZXMgPSBbXTtcclxuICAgIHZtLm1hdGVyaWFsVG90YWwgPSAwO1xyXG4gICAgdm0ucm9vZmVyVG90YWwgPSAwXHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIGdldENvbWJvTWF0RGV0YWlsKCkge1xyXG4gICAgICBhcGlGYWN0b3J5LmdldENvbWJvTWF0ZXJpYWxCeUlkKHZtLmNvbWJvSWQpLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgdm0uY29tYm9EYXRhID0gcmVzcC5kYXRhLmRhdGE7XHJcbiAgICAgICAgdm0uY29tYm9NbWF0cmlhbE5hbWUgPSB2bS5jb21ib0RhdGEubmFtZVxyXG4gICAgICAgIHZtLmRlc2NyaXB0aW9uID0gdm0uY29tYm9EYXRhLmRlc2NyaXB0aW9uXHJcbiAgICAgICAgdm0udW9tID0gdm0uY29tYm9EYXRhLnVuaXRcclxuICAgICAgICBjb25zb2xlLmxvZyh2bS5jb21ib0RhdGEpXHJcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKHZtLmNvbWJvRGF0YS5jb21ib01hdGVyaWFsTGlzdCwgZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgIHZtLm1hdGVyaWFsQ29zdCA9IGl0ZW0ubWF0ZXJpYWxJZC5jdXJyZW50UmF0ZS5tYXRlcmlhbENvc3QudmFsdWUgKiBpdGVtLnF1YW50aXR5O1xyXG4gICAgICAgICAgdm0ubWF0ZXJpYWxUb3RhbCA9IHZtLm1hdGVyaWFsVG90YWwgKyB2bS5tYXRlcmlhbENvc3RcclxuICAgICAgICAgIHZtLnJvb2ZlckNvc3QgPSBpdGVtLm1hdGVyaWFsSWQuY3VycmVudFJhdGUucm9vZmVyQ29zdC52YWx1ZSAqIGl0ZW0ucXVhbnRpdHk7XHJcbiAgICAgICAgICB2bS5yb29mZXJUb3RhbCA9IHZtLnJvb2ZlclRvdGFsICsgdm0ucm9vZmVyQ29zdFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHZtLmNvbWJvRGF0YSk7XHJcbiAgICAgICAgJHRpbWVvdXQoaW1nU2xpZGVyLCAxNTAwKTtcclxuICAgICAgfSkuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZ2V0Q29tYm9NYXREZXRhaWwoKVxyXG5cclxuICAgIHZtLnJlbW92ZUltZyA9IChpbWcpID0+IHtcclxuICAgICAgdm0ucmVtb3ZlZEZpbGVzLnB1c2godm0ubWF0cmlhbERhdGEuZmlsZXNbaW1nXS5faWQpXHJcbiAgICAgIHZtLm1hdHJpYWxEYXRhLmZpbGVzLnNwbGljZShpbWcsIDEpXHJcbiAgICB9XHJcblxyXG4gICAgdm0uZWRpdENvbWJvTWF0ZXJpYWxMaXN0ID0gKGl0ZW0pID0+IHtcclxuICAgICAgdm0ubWF0ZXJpYWxMaXN0ID0gdm0uY29tYm9EYXRhLmNvbWJvTWF0ZXJpYWxMaXN0W2l0ZW1dXHJcbiAgICAgIHZtLm1hdGVyaWFsUXR5ID0gdm0ubWF0ZXJpYWxMaXN0LnF1YW50aXR5XHJcbiAgICAgIHZtLnNlbGVjdGVkTWF0ZXJpYWxDb3N0ID0gdm0ubWF0ZXJpYWxRdHkgKiB2bS5tYXRlcmlhbExpc3QubWF0ZXJpYWxJZC5jdXJyZW50UmF0ZS5tYXRlcmlhbENvc3QudmFsdWVcclxuICAgICAgdm0uc2VsZWN0ZWRNYXRlcmlhbFJvb2ZlckNvc3QgPSB2bS5tYXRlcmlhbFF0eSAqIHZtLm1hdGVyaWFsTGlzdC5tYXRlcmlhbElkLmN1cnJlbnRSYXRlLnJvb2ZlckNvc3QudmFsdWVcclxuICAgICAgaWYgKHZtLm1hdGVyaWFsTGlzdC5wZXJjZW50YWdlQWRkaXRpb25zLmxlbmd0aCAhPSAwICYmIHZtLm1hdGVyaWFsTGlzdC5wZXJjZW50YWdlQWRkaXRpb25zLmxlbmd0aCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICB2bS5wZXJjZW50YWdlQWRkaXRpb24gPSB2bS5tYXRlcmlhbExpc3QucGVyY2VudGFnZUFkZGl0aW9uc1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZtLnBlcmNlbnRhZ2VBZGRpdGlvbiA9IFtdXHJcbiAgICAgIH1cclxuICAgICAgdm0ubWF0ZXJpYWxJbmRleCA9IGl0ZW1cclxuICAgICAgJCgnI2VkaXRDb21ib01hdGVyaWFsJykubW9kYWwoJ3Nob3cnKTtcclxuICAgICAgaWYoaXRlbSA9PSAnbmV3Jykge1xyXG4gICAgICAgICQoJyNlZGl0Q29tYm9NYXRlcmlhbCAubW9kYWwtaGVhZGVyIGg1JykudGV4dCgnQWRkIENvbWJvIE1hdGVyaWFsIERldGFpbHMnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkKCcjZWRpdENvbWJvTWF0ZXJpYWwgLm1vZGFsLWhlYWRlciBoNScpLnRleHQoJ1VwZGF0ZSBDb21ibyBNYXRlcmlhbCBEZXRhaWxzJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2bS5hZGRQZXJjZW50YWdlVmFsdWUgPSAoKSA9PiB7XHJcbiAgICAgIHZtLnBlcmNlbnRhZ2VBZGRpdGlvbi5wdXNoKHtcclxuICAgICAgICBwZXJjZW50YWdlVHlwZTogXCJcIixcclxuICAgICAgICB2YWx1ZTogXCJcIlxyXG4gICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2bS5yZW1vdmVQZXJjZW50YWdlQWRkaXRpb24gPSBpbmRleCA9PiB7XHJcbiAgICAgIHZtLnBlcmNlbnRhZ2VBZGRpdGlvbi5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2bS5maWxlVXBkYXRlZCA9IChmaWxlcywgZXZlbnQpID0+IHtcclxuICAgICAgbGV0IGZpbGVPYmogPSBldmVudC50YXJnZXQuZmlsZXM7XHJcbiAgICAgIHZtLmZpbGVOYW1lcyA9IE9iamVjdC5rZXlzKGZpbGVPYmopLm1hcCh4ID0+IGZpbGVPYmpbeF0ubmFtZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLmVkaXRDb21ib01hdGVyaWFsID0gKHZhbCkgPT4ge1xyXG4gICAgICBpZiAodmFsID09IDEpIHsgLy8gZWRpdCBNYXRlcmlhbFxyXG4gICAgICAgIHZtLmVkaXRGbGFnID0gdHJ1ZVxyXG4gICAgICAgICQoJy5tYXRlcmlhbERldGFpbCB0ZXh0YXJlYSwgLm1hdGVyaWFsRGV0YWlsIGlucHV0LCAubWF0ZXJpYWxEZXRhaWwgc2VsZWN0JykuYXR0cignZGlzYWJsZWQnLCBmYWxzZSlcclxuICAgICAgICBjb25zb2xlLmxvZyh2bS5jb21ib0RhdGEuY29tYm9NYXRlcmlhbExpc3QpXHJcbiAgICAgIH0gZWxzZSBpZiAodmFsID09IDIpIHtcclxuICAgICAgICAkKCcubWF0ZXJpYWxEZXRhaWwgdGV4dGFyZWEsIC5tYXRlcmlhbERldGFpbCBpbnB1dCwgLm1hdGVyaWFsRGV0YWlsIHNlbGVjdCcpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSlcclxuICAgICAgICB2bS5lZGl0RmxhZyA9IGZhbHNlXHJcblxyXG4gICAgICAgIHZhciBjb21ib0xpc3REYXRhID0ge1xyXG4gICAgICAgICAgY29tYm9MaXN0QXJyYXk6IHZtLmNvbWJvRGF0YS5jb21ib01hdGVyaWFsTGlzdFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBjb21ib01hdGVyaWFsRGF0YSA9IHtcclxuICAgICAgICAgIG5hbWU6IHZtLmNvbWJvTW1hdHJpYWxOYW1lLFxyXG4gICAgICAgICAgZGVzY3JpcHRpb246IHZtLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgdW5pdDogdm0udW9tLFxyXG4gICAgICAgICAgLy8gcmVtb3ZlZEZpbGVzOiAkc2NvcGUucmVtb3ZlZEZpbGVzLFxyXG4gICAgICAgICAgZmlsZXM6IHZtLmlucHV0RmlsZXNcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGNvbWJvTGlzdERhdGEpXHJcblxyXG4gICAgICAgIGFwaUZhY3RvcnkudXBkYXRlQ29tYm9NYXRlcmlhbExpc3Qodm0uY29tYm9EYXRhLl9pZCwgY29tYm9MaXN0RGF0YSkudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3ApO1xyXG5cclxuICAgICAgICAgIGFwaUZhY3RvcnkudXBkYXRlQ29tYm9NYXRlcmlhbCh2bS5jb21ib0RhdGEuX2lkLCBjb21ib01hdGVyaWFsRGF0YSkudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcCk7XHJcbiAgICAgICAgICAgIE5vdGlmaWNhdGlvbi5zdWNjZXNzKHJlc3AuZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgZ2V0Q29tYm9NYXREZXRhaWwoKVxyXG4gICAgICAgICAgICB2bS5maWxlTmFtZXMgPSBbXVxyXG4gICAgICAgICAgICAkdGltZW91dChpbWdTbGlkZXIsIDEwMDApO1xyXG4gICAgICAgICAgfSkuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0pLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIHZhciBjb21ib01hdGVyaWFsRGF0YSA9IHtcclxuICAgICAgICAvLyAgIG5hbWU6ICRzY29wZS5yYXRlQW5hbHlzaXNPQkoubmFtZSxcclxuICAgICAgICAvLyAgIGRlc2NyaXB0aW9uOiAkc2NvcGUucmF0ZUFuYWx5c2lzT0JKLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgIC8vICAgdW5pdFN5bWJvbDogJHNjb3BlLnJhdGVBbmFseXNpc09CSi51bml0U3ltYm9sLFxyXG4gICAgICAgIC8vICAgcmVtb3ZlZEZpbGVzOiAkc2NvcGUucmVtb3ZlZEZpbGVzLFxyXG4gICAgICAgIC8vICAgZmlsZXM6IHZtLm5ld0ZpbGVzXHJcbiAgICAgICAgLy8gfTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZtLnVwZGF0ZUNvbWJvID0gKGl0ZW0sIGRhdGEpID0+IHtcclxuICAgICAgdm0uY29tYm9EYXRhLmNvbWJvTWF0ZXJpYWxMaXN0W2l0ZW1dLnF1YW50aXR5ID0gdm0ubWF0ZXJpYWxRdHlcclxuICAgICAgdm0uY29tYm9EYXRhLmNvbWJvTWF0ZXJpYWxMaXN0W2l0ZW1dLnBlcmNlbnRhZ2VBZGRpdGlvbnMgPSBkYXRhXHJcbiAgICAgIGNvbnNvbGUubG9nKHZtLmNvbWJvRGF0YS5jb21ib01hdGVyaWFsTGlzdFtpdGVtXS5wZXJjZW50YWdlQWRkaXRpb25zKVxyXG4gICAgICAkKCcjZWRpdENvbWJvTWF0ZXJpYWwnKS5tb2RhbCgnaGlkZScpXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaW1nU2xpZGVyKCkge1xyXG4gICAgICAkKFwiI2NvbWJvQ2Fyb3VzZWxcIikuZmxleHNsaWRlcih7XHJcbiAgICAgICAgYW5pbWF0aW9uOiBcInNsaWRlXCIsXHJcbiAgICAgICAgY29udHJvbE5hdjogZmFsc2UsXHJcbiAgICAgICAgYW5pbWF0aW9uTG9vcDogZmFsc2UsXHJcbiAgICAgICAgc2xpZGVzaG93OiBmYWxzZSxcclxuICAgICAgICBpdGVtV2lkdGg6IDc1LFxyXG4gICAgICAgIGl0ZW1NYXJnaW46IDUsXHJcbiAgICAgICAgYXNOYXZGb3I6IFwiI2NvbWJvU2xpZGVyXCJcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAkKFwiI2NvbWJvU2xpZGVyXCIpLmZsZXhzbGlkZXIoe1xyXG4gICAgICAgIGFuaW1hdGlvbjogXCJzbGlkZVwiLFxyXG4gICAgICAgIGNvbnRyb2xOYXY6IGZhbHNlLFxyXG4gICAgICAgIGFuaW1hdGlvbkxvb3A6IGZhbHNlLFxyXG4gICAgICAgIHNsaWRlc2hvdzogZmFsc2UsXHJcbiAgICAgICAgc3luYzogXCIjY29tYm9DYXJvdXNlbFwiXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxufSkoKTtcclxuIiwiKCgpID0+IHtcclxuICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwiY3JlYXRlUHJvamVjdEN0cmxcIiwgY3JlYXRlUHJvamVjdEN0cmwpO1xyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVQcm9qZWN0Q3RybChcclxuICAgICRzY29wZSxcclxuICAgICR0aW1lb3V0LFxyXG4gICAgYXV0aEZhY3RvcnksXHJcbiAgICAkc3RhdGUsXHJcbiAgICBhcGlGYWN0b3J5LFxyXG4gICAgTm90aWZpY2F0aW9uLFxyXG4gICAgTmdNYXAsXHJcbiAgICBnbG9iYWxzXHJcbiAgKSB7XHJcbiAgICAvKiBSZXF1aXJpbmcgdmFycyAqL1xyXG5cclxuICAgIGxldCB2bSA9IHRoaXM7XHJcblxyXG4gICAgY29uc3Qge1xyXG4gICAgICBsb2dvdXQsXHJcbiAgICAgIHVzZXJTdG9yZSxcclxuICAgICAgY29tcGFueVN0b3JlXHJcbiAgICB9ID0gZ2xvYmFscztcclxuXHJcbiAgICBpZiAoIWF1dGhGYWN0b3J5LmNoZWNrVXNlcigpKSB7XHJcbiAgICAgIGxvZ291dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghYXV0aEZhY3RvcnkuY2hlY2tQcml2aWxlZ2UoXCJwcm9qZWN0XCIsIFwiY3JlYXRlUHJvamVjdFwiKSkge1xyXG4gICAgICBOb3RpZmljYXRpb24ud2FybmluZyhcIkluc3VmZmljaWVudCBwZXJtaXNzaW9uc1wiKTtcclxuICAgICAgJHN0YXRlLmdvKFwiZGFzaGJvYXJkXCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB2bS5jbGllbnRzID0gW107XHJcbiAgICAvLyBhcGlGYWN0b3J5Lmxpc3RBbGxDbGllbnRzKCkudGhlbihyZXNwID0+IHtcclxuICAgIC8vICAgdm0uY2xpZW50cyA9IHJlc3AuZGF0YS5saXN0O1xyXG4gICAgLy8gfSk7XHJcblxyXG4gICAgJHNjb3BlLiR3YXRjaChcInZtLnByb2plY3REYXRhLmNsaWVudFwiLCBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgJChcImEuaXRlbS1zZWxlY3RlZCBzcGFuXCIpLnJlbW92ZUNsYXNzKFwiZ2x5cGhpY29uIGdseXBoaWNvbi1yZW1vdmVcIik7XHJcbiAgICAgICQoXCJhLml0ZW0tc2VsZWN0ZWQgc3BhblwiKS5hZGRDbGFzcyhcImZhcyBmYS10aW1lcyBtci0zXCIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgIGFwaUZhY3RvcnkubGlzdEFsbENsaWVudHMoKSxcclxuICAgICAgICBhcGlGYWN0b3J5LmdldEhpZXJhcmNoeVRlbXBsYXRlKClcclxuICAgICAgXSlcclxuICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgdm0uY2xpZW50cyA9IHJlc3BbMF0uZGF0YS5saXN0O1xyXG4gICAgICAgIHZtLnRlbXBsYXRlTGlzdCA9IHJlc3BbMV0uZGF0YS5kYXRhO1xyXG4gICAgICAgIGxldCBzYW1wbGVUZW1wbGF0ZSA9IHZtLnRlbXBsYXRlTGlzdC5maWx0ZXIoKGl0ZW0pID0+IHtcclxuICAgICAgICAgIHJldHVybiBpdGVtLl9pZCA9PSBcIjViODkxMGZiZGQ2ZmE4MWEyMGJmZTc0NVwiO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdm0uZmlsZW1hbmFnZXJUZW1wbGF0ZSA9IFwiNWI4OTEwZmJkZDZmYTgxYTIwYmZlNzQ1XCI7XHJcblxyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIHZtLmdtYXAgPSB7XHJcbiAgICAgIHVybDogXCJodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvanM/a2V5PUFJemFTeUEzTUlBLW1LV3FfNjBxMUswek9IZ3VyYXhULTFRUHhOVSZsaWJyYXJpZXM9cGxhY2VzXCIsXHJcbiAgICAgIG1hcmtlcnM6IFtdLFxyXG4gICAgICBzdHlsZXM6IFtdLFxyXG4gICAgICBjZW50ZXI6IFwiNDEsLTg3XCIsXHJcbiAgICAgIHpvb206IDNcclxuICAgIH07XHJcblxyXG4gICAgdm0ucHJvamVjdERhdGEgPSB7XHJcbiAgICAgIGFkZHJlc3M6IHt9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zZWxlY3QyT3B0aW9ucyA9IHtcclxuICAgICAgYWxsb3dDbGVhcjogdHJ1ZVxyXG4gICAgfTtcclxuXHJcbiAgICB2bS5wbGFjZU1hcmtlciA9IGZ1bmN0aW9uIChtYXApIHtcclxuICAgICAgY29uc3QgcGxhY2VEYXRhID0gdGhpcy5nZXRQbGFjZSgpLmdlb21ldHJ5LmxvY2F0aW9uO1xyXG4gICAgICB2bS5nbWFwLm1hcmtlcnMgPSBbXHJcbiAgICAgICAgW3BsYWNlRGF0YS5sYXQoKSwgcGxhY2VEYXRhLmxuZygpXVxyXG4gICAgICBdO1xyXG4gICAgICB2bS5nbWFwLnpvb20gPSAxNTtcclxuICAgICAgdm0uZ21hcC5jZW50ZXIgPSBgJHtwbGFjZURhdGEubGF0KCl9LCR7cGxhY2VEYXRhLmxuZygpfWA7XHJcbiAgICAgIHZtLnByb2plY3REYXRhLmFkZHJlc3MubG9jID0ge1xyXG4gICAgICAgIGNvb3JkaW5hdGVzOiBbcGxhY2VEYXRhLmxhdCgpLCBwbGFjZURhdGEubG5nKCldXHJcbiAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLmFkZFByb2plY3QgPSBmb3JtRGF0YSA9PiB7XHJcbiAgICAgIGZvcm1EYXRhLmNsaWVudCA9IGZvcm1EYXRhLmNsaWVudC5faWQ7XHJcbiAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAuY3JlYXRlUHJvamVjdChmb3JtRGF0YSlcclxuICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgIE5vdGlmaWNhdGlvbi5zdWNjZXNzKFwiUHJvamVjdCBoYXMgYmVlbiBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcclxuXHJcbiAgICAgICAgICBsZXQgcGF5bG9hZCA9IHtcclxuICAgICAgICAgICAgcHJvamVjdElkOiByZXNwLmRhdGEuX2lkLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZUlkOiByZXNwLmRhdGEuX2lkICYmXHJcbiAgICAgICAgICAgICAgKHZtLmZpbGVtYW5hZ2VyVGVtcGxhdGUgJiYgdm0uZmlsZW1hbmFnZXJUZW1wbGF0ZSAhPSBcImZhbHNlXCIpID9cclxuICAgICAgICAgICAgICB2bS5maWxlbWFuYWdlclRlbXBsYXRlIDogXCI1Yjg5MTBmYmRkNmZhODFhMjBiZmU3NDVcIlxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAgICAgLmxvYWRIaWVyYXJjaHlUcmVlKHBheWxvYWQpXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3AuZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcInByb2plY3RpZFwiLCByZXNwLmRhdGEuX2lkKTtcclxuICAgICAgICAgICRzdGF0ZS5nbyhcImRhc2hib2FyZFwiKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgTm90aWZpY2F0aW9uLmVycm9yKFwiU29tZXRoaW5nIHdlbnQgd3JvbmdcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLnVwZGF0ZU1hcmtlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgbGV0IHBvcyA9IHRoaXMuZ2V0UG9zaXRpb24oKTtcclxuICAgICAgdm0ucHJvamVjdERhdGEuYWRkcmVzcy5sb2MgPSB7XHJcbiAgICAgICAgY29vcmRpbmF0ZXM6IFtwb3MubGF0KCksIHBvcy5sbmcoKV1cclxuICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgTmdNYXAuZ2V0TWFwKCkudGhlbihtYXAgPT4ge1xyXG4gICAgICB2bS5tYXAgPSBtYXA7XHJcbiAgICAgIG1hcC5zZXRPcHRpb25zKHtcclxuICAgICAgICBzdHlsZXM6IHZtLmdtYXAuc3R5bGVzLFxyXG4gICAgICAgIGRpc2FibGVEZWZhdWx0VUk6IHRydWUsXHJcbiAgICAgICAgem9vbUNvbnRyb2w6IHRydWUsXHJcbiAgICAgICAgem9vbTogMSxcclxuICAgICAgICBjZW50ZXI6IHtcclxuICAgICAgICAgIGxhdDogMCxcclxuICAgICAgICAgIGxuZzogMFxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB2bS5sb2dvdXQgPSAoKSA9PiB7XHJcbiAgICAgIGxvZ291dCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2bS5hc3NpZ25UZW1wbGF0ZSA9ICgpID0+IHtcclxuICAgICAgdm0uZmlsZW1hbmFnZXJUZW1wbGF0ZSA9IHZtLnNlbGVjdGVkVGVtcGxhdGUuX2lkO1xyXG4gICAgICAkKCcjYXNzaWduVGVtcGxhdGVNb2RhbCcpLm1vZGFsKCdoaWRlJylcclxuICAgIH1cclxuICB9XHJcbn0pKCk7IiwiKCgpID0+IHtcclxuICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwiZGFzaGJvYXJkQ3RybFwiLCBkYXNoYm9hcmRDdHJsKTtcclxuXHJcbiAgZnVuY3Rpb24gZGFzaGJvYXJkQ3RybChcclxuICAgICRzY29wZSxcclxuICAgICR0aW1lb3V0LFxyXG4gICAgYXV0aEZhY3RvcnksXHJcbiAgICAkc3RhdGUsXHJcbiAgICAkd2luZG93LFxyXG4gICAgJGxvY2F0aW9uLFxyXG4gICAgYXBpRmFjdG9yeSxcclxuICAgIE5vdGlmaWNhdGlvbixcclxuICAgIGxvY2FsU3RvcmFnZVNlcnZpY2UsXHJcbiAgICBnbG9iYWxzLFxyXG4gICAgTmdNYXBcclxuICApIHtcclxuICAgIC8qIFJlcXVpcmluZyB2YXJzICovXHJcblxyXG4gICAgbGV0IHZtID0gdGhpcztcclxuICAgIHZtLmxvZ2dlZEluID0gdHJ1ZTtcclxuXHJcbiAgICBjb25zdCB7XHJcbiAgICAgIGxvZ291dCxcclxuICAgICAgdXNlclN0b3JlLFxyXG4gICAgICBjb21wYW55U3RvcmUsXHJcbiAgICAgIHByb2plY3RTdG9yZSxcclxuICAgICAgdGhyb3R0bGVyXHJcbiAgICB9ID0gZ2xvYmFscztcclxuXHJcbiAgICBpZiAoIWF1dGhGYWN0b3J5LmNoZWNrVXNlcigpKSB7XHJcbiAgICAgIGxvZ291dCgpO1xyXG4gICAgICB2bS5sb2dnZWRJbiA9IGZhbHNlO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB2bS5sb2FkZXIgPSBmYWxzZTtcclxuXHJcbiAgICAvKiBHZXQgcHJvamVjdCBsaXN0ICovXHJcbiAgICB2bS51c2VyRGF0YSA9IHVzZXJTdG9yZS5nZXQoKTtcclxuICAgIHZtLmNsaWVudFVybCA9XHJcbiAgICAgIFwiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGt0bmhtc2p4L2ltYWdlL3VwbG9hZC92MTQ4NjEyOTIzNC9kZWZhdWx0L2NvbXBhbnkucG5nXCI7XHJcbiAgICB2bS5nbWFwID0ge1xyXG4gICAgICB1cmw6XHJcbiAgICAgICAgXCJodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvanM/a2V5PUFJemFTeUEzTUlBLW1LV3FfNjBxMUswek9IZ3VyYXhULTFRUHhOVVwiLFxyXG4gICAgICBzdHlsZXM6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBlbGVtZW50VHlwZTogXCJnZW9tZXRyeVwiLFxyXG4gICAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29sb3I6IFwiIzIxMjEyMVwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGVsZW1lbnRUeXBlOiBcImxhYmVscy5pY29uXCIsXHJcbiAgICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICB2aXNpYmlsaXR5OiBcIm9mZlwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGVsZW1lbnRUeXBlOiBcImxhYmVscy50ZXh0LmZpbGxcIixcclxuICAgICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNvbG9yOiBcIiM3NTc1NzVcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBlbGVtZW50VHlwZTogXCJsYWJlbHMudGV4dC5zdHJva2VcIixcclxuICAgICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNvbG9yOiBcIiMyMTIxMjFcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBmZWF0dXJlVHlwZTogXCJhZG1pbmlzdHJhdGl2ZVwiLFxyXG4gICAgICAgICAgZWxlbWVudFR5cGU6IFwiZ2VvbWV0cnlcIixcclxuICAgICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNvbG9yOiBcIiM3NTc1NzVcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBmZWF0dXJlVHlwZTogXCJhZG1pbmlzdHJhdGl2ZS5jb3VudHJ5XCIsXHJcbiAgICAgICAgICBlbGVtZW50VHlwZTogXCJsYWJlbHMudGV4dC5maWxsXCIsXHJcbiAgICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjb2xvcjogXCIjOWU5ZTllXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZmVhdHVyZVR5cGU6IFwiYWRtaW5pc3RyYXRpdmUubGFuZF9wYXJjZWxcIixcclxuICAgICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIHZpc2liaWxpdHk6IFwib2ZmXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZmVhdHVyZVR5cGU6IFwiYWRtaW5pc3RyYXRpdmUubG9jYWxpdHlcIixcclxuICAgICAgICAgIGVsZW1lbnRUeXBlOiBcImxhYmVscy50ZXh0LmZpbGxcIixcclxuICAgICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNvbG9yOiBcIiNiZGJkYmRcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBmZWF0dXJlVHlwZTogXCJwb2lcIixcclxuICAgICAgICAgIGVsZW1lbnRUeXBlOiBcImxhYmVscy50ZXh0LmZpbGxcIixcclxuICAgICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNvbG9yOiBcIiM3NTc1NzVcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBmZWF0dXJlVHlwZTogXCJwb2kucGFya1wiLFxyXG4gICAgICAgICAgZWxlbWVudFR5cGU6IFwiZ2VvbWV0cnlcIixcclxuICAgICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNvbG9yOiBcIiMxODE4MThcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBmZWF0dXJlVHlwZTogXCJwb2kucGFya1wiLFxyXG4gICAgICAgICAgZWxlbWVudFR5cGU6IFwibGFiZWxzLnRleHQuZmlsbFwiLFxyXG4gICAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29sb3I6IFwiIzYxNjE2MVwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGZlYXR1cmVUeXBlOiBcInBvaS5wYXJrXCIsXHJcbiAgICAgICAgICBlbGVtZW50VHlwZTogXCJsYWJlbHMudGV4dC5zdHJva2VcIixcclxuICAgICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNvbG9yOiBcIiMxYjFiMWJcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBmZWF0dXJlVHlwZTogXCJyb2FkXCIsXHJcbiAgICAgICAgICBlbGVtZW50VHlwZTogXCJnZW9tZXRyeS5maWxsXCIsXHJcbiAgICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjb2xvcjogXCIjMmMyYzJjXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZmVhdHVyZVR5cGU6IFwicm9hZFwiLFxyXG4gICAgICAgICAgZWxlbWVudFR5cGU6IFwibGFiZWxzLnRleHQuZmlsbFwiLFxyXG4gICAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29sb3I6IFwiIzhhOGE4YVwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGZlYXR1cmVUeXBlOiBcInJvYWQuYXJ0ZXJpYWxcIixcclxuICAgICAgICAgIGVsZW1lbnRUeXBlOiBcImdlb21ldHJ5XCIsXHJcbiAgICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjb2xvcjogXCIjMzczNzM3XCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZmVhdHVyZVR5cGU6IFwicm9hZC5oaWdod2F5XCIsXHJcbiAgICAgICAgICBlbGVtZW50VHlwZTogXCJnZW9tZXRyeVwiLFxyXG4gICAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29sb3I6IFwiIzNjM2MzY1wiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGZlYXR1cmVUeXBlOiBcInJvYWQuaGlnaHdheS5jb250cm9sbGVkX2FjY2Vzc1wiLFxyXG4gICAgICAgICAgZWxlbWVudFR5cGU6IFwiZ2VvbWV0cnlcIixcclxuICAgICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNvbG9yOiBcIiM0ZTRlNGVcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBmZWF0dXJlVHlwZTogXCJyb2FkLmxvY2FsXCIsXHJcbiAgICAgICAgICBlbGVtZW50VHlwZTogXCJsYWJlbHMudGV4dC5maWxsXCIsXHJcbiAgICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjb2xvcjogXCIjNjE2MTYxXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZmVhdHVyZVR5cGU6IFwidHJhbnNpdFwiLFxyXG4gICAgICAgICAgZWxlbWVudFR5cGU6IFwibGFiZWxzLnRleHQuZmlsbFwiLFxyXG4gICAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29sb3I6IFwiIzc1NzU3NVwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGZlYXR1cmVUeXBlOiBcIndhdGVyXCIsXHJcbiAgICAgICAgICBlbGVtZW50VHlwZTogXCJnZW9tZXRyeVwiLFxyXG4gICAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29sb3I6IFwiIzAwMDAwMFwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGZlYXR1cmVUeXBlOiBcIndhdGVyXCIsXHJcbiAgICAgICAgICBlbGVtZW50VHlwZTogXCJsYWJlbHMudGV4dC5maWxsXCIsXHJcbiAgICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjb2xvcjogXCIjM2QzZDNkXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH1cclxuICAgICAgXSxcclxuICAgICAgbWFya2VyczogW11cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gYWRkTWFya2Vycyhwcm9qZWN0TGlzdCkge1xyXG4gICAgICBsZXQgbXhMYXQgPSAwLFxyXG4gICAgICAgIG14TG5nID0gMCxcclxuICAgICAgICBtbkxhdCA9IDAsXHJcbiAgICAgICAgbW5MbmcgPSAwLFxyXG4gICAgICAgIG1hcmtlcnMgPSBbXTtcclxuICAgICAgcHJvamVjdExpc3QuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICBpZiAoZWxlbWVudC5hZGRyZXNzKSB7XHJcbiAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkcmVzcy5sb2MuY29vcmRpbmF0ZXNbMF0gIT0gMCB8fFxyXG4gICAgICAgICAgICBlbGVtZW50LmFkZHJlc3MubG9jLmNvb3JkaW5hdGVzWzFdICE9IDBcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICB2YXIgbXJrciA9IHtcclxuICAgICAgICAgICAgICBpZDogZWxlbWVudC5faWQsXHJcbiAgICAgICAgICAgICAgbGF0aXR1ZGU6IGVsZW1lbnQuYWRkcmVzcy5sb2MuY29vcmRpbmF0ZXNbMV0sXHJcbiAgICAgICAgICAgICAgbG9uZ2l0dWRlOiBlbGVtZW50LmFkZHJlc3MubG9jLmNvb3JkaW5hdGVzWzBdXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIG14TGF0ID0gbXhMYXQgPiBtcmtyLmxhdGl0dWRlID8gbXJrci5sYXRpdHVkZSA6IG14TGF0O1xyXG4gICAgICAgICAgICBtbkxhdCA9IG1uTGF0IDwgbXJrci5sYXRpdHVkZSA/IG1ya3IubGF0aXR1ZGUgOiBtbkxhdDtcclxuICAgICAgICAgICAgbXhMbmcgPSBteExuZyA+IG1ya3IubG9uZ2l0dWRlID8gbXJrci5sb25naXR1ZGUgOiBteExuZztcclxuICAgICAgICAgICAgbW5MbmcgPSBtbkxuZyA8IG1ya3IubG9uZ2l0dWRlID8gbXJrci5sb25naXR1ZGUgOiBtbkxuZztcclxuICAgICAgICAgICAgbWFya2Vycy5wdXNoKFttcmtyLmxhdGl0dWRlLCBtcmtyLmxvbmdpdHVkZV0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBtYXJrZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIEdldCBhbGwgZGFzaGJvYXJkIGRhdGEgKi9cclxuXHJcbiAgICBQcm9taXNlLmFsbChbXHJcbiAgICAgIGFwaUZhY3RvcnkuZ2V0Q29tcGFueUJ5SWQodm0udXNlckRhdGEuY29tcGFueUlkKSxcclxuICAgICAgYXBpRmFjdG9yeS5saXN0QWxsUHJvamVjdHMoKSxcclxuICAgICAgYXBpRmFjdG9yeS5saXN0QWxsQ2xpZW50cygpXHJcbiAgICBdKVxyXG4gICAgICAudGhlbihkYXRhID0+IHtcclxuICAgICAgICAvKiBBZGQgY29tcGFueURhdGEgdG8gc3RvcmUgKi9cclxuICAgICAgICBjb21wYW55U3RvcmUuc2V0KGRhdGFbMF0uZGF0YSk7XHJcbiAgICAgICAgLyogQWRkIG1hcmtlcnMgZnJvbSBwcm9qZWN0IGRhdGEgKi9cclxuICAgICAgICB2bS5nbWFwLm1hcmtlcnMgPSBhZGRNYXJrZXJzKGRhdGFbMV0uZGF0YS5saXN0KTtcclxuICAgICAgICB2bS5kYXNoYm9hcmREYXRhID0ge1xyXG4gICAgICAgICAgY29tcGFueTogZGF0YVswXS5kYXRhLFxyXG4gICAgICAgICAgcHJvamVjdHM6IGRhdGFbMV0uZGF0YS5saXN0LFxyXG4gICAgICAgICAgY2xpZW50czogZGF0YVsyXS5kYXRhLmxpc3RcclxuICAgICAgICB9O1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIE5nTWFwLmdldE1hcCgpLnRoZW4obWFwID0+IHtcclxuICAgICAgbWFwLnNldE9wdGlvbnMoe1xyXG4gICAgICAgIHN0eWxlczogdm0uZ21hcC5zdHlsZXMsXHJcbiAgICAgICAgZGlzYWJsZURlZmF1bHRVSTogdHJ1ZSxcclxuICAgICAgICB6b29tOiAxLFxyXG4gICAgICAgIGNlbnRlcjoge1xyXG4gICAgICAgICAgbGF0OiAwLFxyXG4gICAgICAgICAgbG5nOiAwXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8qIFByb2plY3QgcGlja2VyIGxvYWQgZnVuY3Rpb25hbGl0eSAqL1xyXG5cclxuICAgIGxldCBlbmFibGVkID0gdHJ1ZSxcclxuICAgICAgY2h1bmtTaXplID0gNTtcclxuICAgIHZtLnByb2plY3RTZWFyY2ggPSBcIlwiO1xyXG4gICAgdm0uZW5hYmxlTGF6eUxvYWQgPSBmYWxzZTtcclxuICAgIHZtLnNvcnRQYXJhbXMgPSB7XHJcbiAgICAgIGZpZWxkOiBcImNyZWF0ZWRcIixcclxuICAgICAgdHlwZTogZmFsc2VcclxuICAgIH07XHJcblxyXG4gICAgdm0ucHJvamVjdE5hbWUgPSBcIlBST0pFQ1RcIjtcclxuXHJcbiAgICAvKiBHZXQgYm9va21hcmtlZCBwcm9qZWN0IExpc3QgKi9cclxuICAgICRzY29wZS5nZXRCb29rbWFya2VkUHJvamVjdCA9ICgpID0+IHtcclxuICAgICAgYXBpRmFjdG9yeVxyXG4gICAgICAgIC5nZXRCb29rbWFya3MoKVxyXG4gICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgdm0uYm9va21hcmtlZFByb2plY3QgPSByZXNwLmRhdGEuYm9va21hcmtzO1xyXG4gICAgICAgICAgdm0uYm9va21hcmtlZFByb2plY3RMaXN0ID0gYW5ndWxhci5jb3B5KHZtLmJvb2ttYXJrZWRQcm9qZWN0KTtcclxuICAgICAgICAgIHZtLmJvb2ttYXJrZWRQcm9qZWN0TGlzdC5wdXNoKHtcclxuICAgICAgICAgICAgX2lkOiBcIm90aGVyc1wiLFxyXG4gICAgICAgICAgICBwcm9qZWN0TmFtZTogXCJBbGwgUHJvamVjdCBMaXN0XCJcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgLy8gdm0uYm9va21hcmtlZFByb2plY3RMaXN0LnVuc2hpZnQoe1xyXG4gICAgICAgICAgLy8gICBfaWQ6IFwiTkFcIixcclxuICAgICAgICAgIC8vICAgcHJvamVjdE5hbWU6IFwiU2VsZWN0IGEgcHJvamVjdFwiXHJcbiAgICAgICAgICAvLyB9KTtcclxuICAgICAgICAgIC8vIHZtLnByb2plY3QgPSB2bS5ib29rbWFya2VkUHJvamVjdExpc3RbMF07XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAkc2NvcGUuZ2V0Qm9va21hcmtlZFByb2plY3QoKTtcclxuXHJcbiAgICB2bS5sb2FkUHJvamVjdEZpbGVzID0gaWQgPT4ge1xyXG4gICAgICBsZXQgbGltaXQgPSA1O1xyXG4gICAgICBhcGlGYWN0b3J5LnNob3dQcm9qZWN0RmlsZXMoaWQsIGxpbWl0KS50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgIHZtLnByb2plY3RGaWxlcyA9IHJlc3AuZGF0YS5kYXRhO1xyXG4gICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2bS5ib29rbWFya0ZsYWcgPSBmYWxzZTtcclxuICAgIC8qIGNob29zZSBwcm9qZWN0IGZyb20gYm9va21hcmtlZCBwcm9qZWN0IGxpc3QgKi9cclxuICAgIHZtLnNlbGVjdGVkUHJvamVjdCA9IHByb2plY3QgPT4ge1xyXG4gICAgICBpZiAocHJvamVjdC5faWQgPT0gXCJvdGhlcnNcIikge1xyXG4gICAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAgIC5saXN0QWxsUHJvamVjdHMoKVxyXG4gICAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgIHZtLnByb2plY3RQaWNrZXJEYXRhID0gcmVzcC5kYXRhLmxpc3Q7XHJcbiAgICAgICAgICAgICQoXCIjY2hvb3NlUHJvamVjdFwiKS5tb2RhbChcInNob3dcIik7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZtLmJvb2ttYXJrRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh2bS5ib29rbWFya2VkUHJvamVjdCwgZnVuY3Rpb24oeCkge1xyXG4gICAgICAgICAgaWYgKHguX2lkID09IHByb2plY3QuX2lkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAodm0uYm9va21hcmtGbGFnID0gdHJ1ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdm0ucHJvamVjdE5hbWUgPSBwcm9qZWN0LnByb2plY3ROYW1lO1xyXG4gICAgICAgIHByb2plY3RTdG9yZS5zZXQocHJvamVjdCk7XHJcbiAgICAgICAgdm0ubG9hZFByb2plY3RGaWxlcyhwcm9qZWN0Ll9pZCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyogQ2hvb3NlIHByb2plY3QgZm9ybSBhbGwgcHJvamVjdCBsaXN0ICovXHJcbiAgICB2bS5jaG9vc2VQcm9qZWN0ID0gcHJvamVjdCA9PiB7XHJcbiAgICAgIHZhciBpbmRleCA9IHZtLmJvb2ttYXJrZWRQcm9qZWN0TGlzdC5maW5kSW5kZXgoZnVuY3Rpb24oeCkge1xyXG4gICAgICAgIHJldHVybiB4Ll9pZCA9PSBcIm90aGVyc1wiO1xyXG4gICAgICB9KTtcclxuICAgICAgdm0uYm9va21hcmtlZFByb2plY3RMaXN0LnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgIGxldCBhbHJlYWR5RXhpc3QgPSB0cnVlO1xyXG4gICAgICBhbmd1bGFyLmZvckVhY2godm0uYm9va21hcmtlZFByb2plY3QsIGZ1bmN0aW9uKHgpIHtcclxuICAgICAgICBpZiAoeC5faWQgPT0gcHJvamVjdC5faWQpIHtcclxuICAgICAgICAgIGFscmVhZHlFeGlzdCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIGlmIChhbHJlYWR5RXhpc3QpIHtcclxuICAgICAgICB2bS5ib29rbWFya2VkUHJvamVjdExpc3QucHVzaChwcm9qZWN0KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdm0uYm9va21hcmtlZFByb2plY3RMaXN0LnB1c2goe1xyXG4gICAgICAgIF9pZDogXCJvdGhlcnNcIixcclxuICAgICAgICBwcm9qZWN0TmFtZTogXCJBbGwgUHJvamVjdCBMaXN0XCJcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB2bS5wcm9qZWN0ID0gcHJvamVjdDtcclxuICAgICAgdm0ucHJvamVjdE5hbWUgPSBwcm9qZWN0LnByb2plY3ROYW1lO1xyXG4gICAgICB2bS5ib29rbWFya0ZsYWcgPSBmYWxzZTtcclxuICAgICAgcHJvamVjdFN0b3JlLnNldChwcm9qZWN0KTtcclxuXHJcbiAgICAgICQoXCIjY2hvb3NlUHJvamVjdFwiKS5tb2RhbChcImhpZGVcIik7XHJcbiAgICB9O1xyXG5cclxuICAgIGlmIChsb2NhbFN0b3JhZ2VTZXJ2aWNlLmdldChcImN1cnJlbnRQcm9qZWN0XCIpKSB7XHJcbiAgICAgIGxldCBjdXJyZW50UHJvamVjdCA9IGxvY2FsU3RvcmFnZVNlcnZpY2UuZ2V0KFwiY3VycmVudFByb2plY3RcIik7XHJcbiAgICAgIHZtLnByb2plY3QgPSBjdXJyZW50UHJvamVjdDtcclxuICAgICAgLy8gY29uc29sZS5sb2codm0ucHJvamVjdCwgXCJ2bS5wcm9qZWN0XCIpXHJcbiAgICAgIHZtLnByb2plY3ROYW1lID0gY3VycmVudFByb2plY3QucHJvamVjdE5hbWU7XHJcbiAgICAgIHZtLmxvYWRQcm9qZWN0RmlsZXModm0ucHJvamVjdC5faWQpO1xyXG5cclxuICAgICAgbGV0IGFscmVhZHlCb29rbWFya2VkID0gZmFsc2U7XHJcbiAgICAgIGFuZ3VsYXIuZm9yRWFjaCh2bS5ib29rbWFya2VkUHJvamVjdCwgZnVuY3Rpb24oeCkge1xyXG4gICAgICAgIGlmICh4Ll9pZCA9PSBjdXJyZW50UHJvamVjdC5faWQpIHtcclxuICAgICAgICAgIHJldHVybiAoYWxyZWFkeUJvb2ttYXJrZWQgPSB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKCFhbHJlYWR5Qm9va21hcmtlZCkge1xyXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIGluZGV4ID0gdm0uYm9va21hcmtlZFByb2plY3RMaXN0LmZpbmRJbmRleChmdW5jdGlvbih4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB4Ll9pZCA9PSBcIm90aGVyc1wiO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICB2bS5ib29rbWFya2VkUHJvamVjdExpc3Quc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgIHZtLmJvb2ttYXJrZWRQcm9qZWN0TGlzdC5wdXNoKGN1cnJlbnRQcm9qZWN0KTtcclxuICAgICAgICAgIHZtLmJvb2ttYXJrZWRQcm9qZWN0TGlzdC5wdXNoKHtcclxuICAgICAgICAgICAgX2lkOiBcIm90aGVyc1wiLFxyXG4gICAgICAgICAgICBwcm9qZWN0TmFtZTogXCJBbGwgUHJvamVjdCBMaXN0XCJcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIDE1MDApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyogRXZlbnQgaGFuZGxlciB0byByZXNldCBhZGQgbWF0ZXJpYWwgbW9kYWwgKi9cclxuICAgICQoXCIjY2hvb3NlUHJvamVjdFwiKS5vbihcImhpZGUuYnMubW9kYWxcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZtLmVuYWJsZUxhenlMb2FkID0gZmFsc2U7XHJcbiAgICB9KTtcclxuXHJcbiAgICB2bS5jbG9zZVByb2plY3RQaWNrZXIgPSAoKSA9PiB7XHJcbiAgICAgICQoXCIjY2hvb3NlUHJvamVjdFwiKS5tb2RhbChcImhpZGVcIik7XHJcbiAgICAgIHZtLnByb2plY3QgPSBudWxsO1xyXG4gICAgICBwcm9qZWN0U3RvcmUuc2V0KFwiXCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2bS5jaGVja0Jvb2ttYXJrID0gZGF0YSA9PiB7XHJcbiAgICAgIGxldCBib29rbWFyayA9IHRydWU7XHJcbiAgICAgIGxldCBhbHJlYWR5Qm9va21hcmtlZCA9IGZhbHNlO1xyXG4gICAgICBhbmd1bGFyLmZvckVhY2godm0uYm9va21hcmtlZFByb2plY3QsIGZ1bmN0aW9uKHgpIHtcclxuICAgICAgICBpZiAoeC5faWQgPT0gZGF0YS5faWQpIHtcclxuICAgICAgICAgIHJldHVybiAoYWxyZWFkeUJvb2ttYXJrZWQgPSB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBpZiAoYWxyZWFkeUJvb2ttYXJrZWQpIHtcclxuICAgICAgICBib29rbWFyayA9IGZhbHNlO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJvb2ttYXJrID0gdHJ1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgYXBpRmFjdG9yeVxyXG4gICAgICAgIC5ib29rTWFya1Byb2plY3QocHJvamVjdFN0b3JlLmdldCgpLl9pZCwgYm9va21hcmspXHJcbiAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICBpZiAoYm9va21hcmspIHtcclxuICAgICAgICAgICAgTm90aWZpY2F0aW9uLnN1Y2Nlc3MoXCJQcm9qZWN0IHN1Y2Nlc3NmdWxseSBib29rbWFya2VkXCIpO1xyXG4gICAgICAgICAgICB2bS5ib29rbWFya2VkUHJvamVjdC5wdXNoKGRhdGEpO1xyXG4gICAgICAgICAgICB2bS5ib29rbWFya0ZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgTm90aWZpY2F0aW9uLnN1Y2Nlc3MoXHJcbiAgICAgICAgICAgICAgXCJQcm9qZWN0IHN1Y2Nlc3NmdWxseSByZW1vdmVkIGZyb20gYm9va21hcmsgbGlzdFwiXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHZtLmJvb2ttYXJrZWRQcm9qZWN0LmZpbmRJbmRleChmdW5jdGlvbih4KSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHguX2lkID09IGRhdGEuX2lkO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdm0uYm9va21hcmtlZFByb2plY3Quc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgdm0uYm9va21hcmtGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLmFkZE1vcmUgPSAoKSA9PiB7XHJcbiAgICAgIGlmIChlbmFibGVkKSB7XHJcbiAgICAgICAgZW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICR0aW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIGVuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgY2h1bmtTaXplICs9IDU7XHJcbiAgICAgICAgYXBpRmFjdG9yeVxyXG4gICAgICAgICAgLmxpc3RBbGxQcm9qZWN0cyh7XHJcbiAgICAgICAgICAgIHNlYXJjaDogdm0ucHJvamVjdFNlYXJjaCxcclxuICAgICAgICAgICAgY2h1bms6IGNodW5rU2l6ZSxcclxuICAgICAgICAgICAgcGFnZTogMSxcclxuICAgICAgICAgICAgc29ydDogdm0uc29ydFBhcmFtcy5maWVsZCxcclxuICAgICAgICAgICAgc29ydFR5cGU6IHZtLnNvcnRQYXJhbXMudHlwZVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICB2bS5wcm9qZWN0UGlja2VyRGF0YSA9IHJlc3AuZGF0YS5saXN0O1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qIEZpbGUgcGlja2VyIG9wdGlvbnMgKi9cclxuXHJcbiAgICB2bS5maWxlUGlja2VyT3B0aW9ucyA9IHtcclxuICAgICAgZmlsdGVyOiBcInBkZlwiXHJcbiAgICB9O1xyXG4gICAgLyogRnVuY3Rpb24gdG8gc2VhcmNoIHByb2plY3RzICovXHJcbiAgICB2bS5zZWFyY2hQcm9qZWN0cyA9IHRleHQgPT4ge1xyXG4gICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgLmxpc3RBbGxQcm9qZWN0cyh7XHJcbiAgICAgICAgICBzZWFyY2g6IHZtLnByb2plY3RTZWFyY2gsXHJcbiAgICAgICAgICBjaHVuazogY2h1bmtTaXplLFxyXG4gICAgICAgICAgcGFnZTogMSxcclxuICAgICAgICAgIHNvcnQ6IHZtLnNvcnRQYXJhbXMuZmllbGQsXHJcbiAgICAgICAgICBzb3J0VHlwZTogdm0uc29ydFBhcmFtcy50eXBlXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgIHZtLnByb2plY3RQaWNrZXJEYXRhID0gcmVzcC5kYXRhLmxpc3Q7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyogRnVuY3Rpb24gdG8gc29ydCBwcm9qZWN0cyAqL1xyXG4gICAgdm0uc29ydCA9IGZpZWxkID0+IHtcclxuICAgICAgaWYgKHZtLnNvcnRQYXJhbXMuZmllbGQgPT09IGZpZWxkKSB7XHJcbiAgICAgICAgdm0uc29ydFBhcmFtcy50eXBlID0gIXZtLnNvcnRQYXJhbXMudHlwZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2bS5zb3J0UGFyYW1zLmZpZWxkID0gZmllbGQ7XHJcbiAgICAgICAgdm0uc29ydFBhcmFtcy50eXBlID0gdHJ1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgYXBpRmFjdG9yeVxyXG4gICAgICAgIC5saXN0QWxsUHJvamVjdHMoe1xyXG4gICAgICAgICAgc2VhcmNoOiB2bS5wcm9qZWN0U2VhcmNoLFxyXG4gICAgICAgICAgY2h1bms6IGNodW5rU2l6ZSxcclxuICAgICAgICAgIHBhZ2U6IDEsXHJcbiAgICAgICAgICBzb3J0OiB2bS5zb3J0UGFyYW1zLmZpZWxkLFxyXG4gICAgICAgICAgc29ydFR5cGU6IHZtLnNvcnRQYXJhbXMudHlwZVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICB2bS5wcm9qZWN0UGlja2VyRGF0YSA9IHJlc3AuZGF0YS5saXN0O1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLmxvZ291dCA9ICgpID0+IHtcclxuICAgICAgbG9nb3V0KCk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5yZWRpcmVjdFRvM0QgPSBmdW5jdGlvbigpIHtcclxuICAgICAgY29uc29sZS5sb2coXCJyZWRpZWN0aW9uIGNhbGxlZFwiKTtcclxuXHJcbiAgICAgIGFwaUZhY3RvcnkuZ2V0M0RQYWdlKCkudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJyZXNwb25zZTpcIiwgcmVzcG9uc2UpO1xyXG4gICAgICAgIC8vIGlmIChyZXNwb25zZS5kYXRhID09IFwidHJ1ZVwiKSB7XHJcbiAgICAgICAgLy8gICBjb25zb2xlLmxvZyhcImNvbnNvbGUgd2hlbiByZXNwb25zZSB0cnVlXCIscmVzcG9uc2UpO1xyXG4gICAgICAgIC8vICAgJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCJodHRwczovL2Nsb3VkZXMtM2QuY29tXCI7XHJcbiAgICAgICAgLy8gfSBlbHNlIHtcclxuICAgICAgICAvLyAgIGNvbnNvbGUubG9nKFwiY29uc29sZSB3aGVuIHJlc3BvbnNlIGZhbHNlXCIscmVzcG9uc2UpO1xyXG4gICAgICAgIC8vICAgJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCJodHRwczovL2Nsb3VkZXMtM2QuY29tXCI7XHJcblxyXG4gICAgICAgIC8vIH1cclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLmdvVG9GaWxlTWFuYWdlciA9ICgpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coXCJwcm9qZWN0XCIsIHByb2plY3RTdG9yZS5nZXQoKSk7XHJcbiAgICAgIGlmIChwcm9qZWN0U3RvcmUuZ2V0KCkpIHtcclxuICAgICAgICAkc3RhdGUuZ28oXCJmaWxlTWFuYWdlclwiKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBOb3RpZmljYXRpb24ud2FybmluZyhcIlBsZWFzZSBzZWxlY3QgYSBwcm9qZWN0XCIpO1xyXG4gICAgICAgICQoXCJodG1sLCBib2R5XCIpLmFuaW1hdGUoXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHNjcm9sbFRvcDogJChcIi5wcm9qZWN0XCIpLm9mZnNldCgpLnRvcFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIDUwMCxcclxuICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkKFwiI3NlbGVjdFByb2plY3RcIilcclxuICAgICAgICAgICAgICAuZm9jdXMoKVxyXG4gICAgICAgICAgICAgIC5hZGRDbGFzcyhcImJsaW5rXCIpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAkKFwiI3NlbGVjdFByb2plY3RcIikucmVtb3ZlQ2xhc3MoXCJibGlua1wiKTtcclxuICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKiBSb29mIHBsYW4gZnVuY3Rpb25hbGl0aWVzICovXHJcblxyXG4gICAgdm0ucGxhblBpY2tlclBsYW5zID0gW107XHJcbiAgICB2bS5yb290Rm9sZGVycyA9IFtdO1xyXG5cclxuICAgIHZtLm9wZW5QbGFuUGlja2VyID0gKCkgPT4ge1xyXG4gICAgICBpZiAoIXByb2plY3RTdG9yZS5nZXQoKSkge1xyXG4gICAgICAgIE5vdGlmaWNhdGlvbi53YXJuaW5nKFwiTm8gcHJvamVjdCBzZWxlY3RlZFwiKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgYXBpRmFjdG9yeVxyXG4gICAgICAgIC5nZXRQcm9qZWN0Um9vZlBsYW5zKHByb2plY3RTdG9yZS5nZXQoKS5faWQpXHJcbiAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICBsZXQgcm9vZlBsYW5zID0gcmVzcC5kYXRhLmRhdGE7XHJcbiAgICAgICAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldChcInJvb2ZQbGFuUHJvamVjdFwiLCBwcm9qZWN0U3RvcmUuZ2V0KCkuX2lkKTtcclxuICAgICAgICAgIGxvY2FsU3RvcmFnZVNlcnZpY2Uuc2V0KFwicm9vZlBsYW5zXCIsIHJvb2ZQbGFucyk7XHJcbiAgICAgICAgICB2bS5wbGFuUGlja2VyUGxhbnMgPSByb29mUGxhbnM7XHJcbiAgICAgICAgICAkKFwiI2Nob29zZVJvb2ZNb2RhbFwiKS5tb2RhbChcInNob3dcIik7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAuZ2V0SGllcmFyY2h5KHByb2plY3RTdG9yZS5nZXQoKS5faWQpXHJcblxyXG4gICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgdm0uc2hvd1RyZWUgPSB0cnVlO1xyXG4gICAgICAgICAgdm0ucm9vdEZvbGRlcnMgPSByZXNwLmRhdGEuZGF0YS5oaWVyYXJjaGllcztcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB2bS5jaG9vc2VQbGFuID0gcGxhbiA9PiB7XHJcbiAgICAgICQoXCIjY2hvb3NlUm9vZk1vZGFsXCIpLm1vZGFsKFwiaGlkZVwiKTtcclxuICAgICAgbG9jYWxTdG9yYWdlU2VydmljZS5zZXQoXCJzZWxlY3RlZFBsYW5cIiwgcGxhbik7XHJcbiAgICAgICRzdGF0ZS5nbyhcInZpc3VhbFBsYW5uZXJcIik7XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLmFsbE1vZGFsQ2xvc2UgPSAoKSA9PiB7XHJcbiAgICAgICQoXCIjY2hvb3NlRmlsZSwgI3NlbGVjdEZpbGVDYW52YXMsICNzZWxlY3RGaWxlLCAjY2hvb3NlUm9vZk1vZGFsXCIpLm1vZGFsKFxyXG4gICAgICAgIFwiaGlkZVwiXHJcbiAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLmZpbGVDaG9vc2UgPSAoKSA9PiB7XHJcbiAgICAgIHZtLnBpY2tlckZvbGRlcnMgPSBhbmd1bGFyLmNvcHkodm0ucm9vdEZvbGRlcnMpO1xyXG4gICAgICAkKFwiI2Nob29zZUZpbGVcIikubW9kYWwoXCJzaG93XCIpO1xyXG4gICAgICAkKFwiI2Nob29zZUZpbGVcIikuY3NzKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xyXG4gICAgICAkKFwiI2Nob29zZUZpbGUgLm1vZGFsLWRpYWxvZ1wiKS5jc3Moe1xyXG4gICAgICAgIFwiLXdlYmtpdC1ib3gtc2hhZG93XCI6IFwiMHB4IDBweCA0N3B4IDZweCByZ2JhKDAsIDAsIDAsIDAuNzUpXCIsXHJcbiAgICAgICAgXCItbW96LWJveC1zaGFkb3dcIjogXCIwcHggMHB4IDQ3cHggNnB4IHJnYmEoMCwgMCwgMCwgMC43NSlcIixcclxuICAgICAgICBcImJveC1zaGFkb3dcIjogXCIwcHggMHB4IDQ3cHggNnB4IHJnYmEoMCwgMCwgMCwgMC43NSlcIlxyXG4gICAgICB9KTtcclxuICAgICAgJChcIi5yb290Rm9sZGVyXCIpLnNob3coKTtcclxuICAgICAgJChcIi5jaGlsZEZvbGRlclwiKS5oaWRlKCk7XHJcbiAgICAgIHZtLm1vdmV0byA9IFwibW92ZSBUb1wiO1xyXG4gICAgICAkc2NvcGUuZm9sZGVyTmFtZSA9IFwiUm9vdCBGb2xkZXJcIjtcclxuICAgICAgaWYgKCRzY29wZS5mb2xkZXJOYW1lID09IFwiUm9vdCBGb2xkZXJcIikge1xyXG4gICAgICAgICRzY29wZS5iYWNrQnRuVmlldyA9IHRydWU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJHNjb3BlLmJhY2tCdG5WaWV3ID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICAkc2NvcGUuJG9uKFwibG9hZGVyXCIsIChlLCBkYXRhKSA9PiB7XHJcbiAgICAgIHZtLmxvYWRlciA9IGRhdGE7XHJcbiAgICAgIGlmICh2bS5sb2FkZXIpIHtcclxuICAgICAgICAkKFwiYm9keVwiKS5hZGRDbGFzcyhcIm1vZGFsLW9wZW5cIik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJChcImJvZHlcIikucmVtb3ZlQ2xhc3MoXCJtb2RhbC1vcGVuXCIpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgICRzY29wZS4kb24oXCJzZWxlY3RlZFJvb2ZQbGFuRG9jXCIsIChlLCBkYXRhKSA9PiB7XHJcbiAgICAgIHZtLnNlbGVjdGVkQXNzZXRGb3JQbGFuID0gZGF0YTtcclxuXHJcbiAgICAgIHZtLnJvb2ZwbGFuQnJlYWRDcnVtYiA9XHJcbiAgICAgICAgZGF0YS5icmVhZENydW1icy5yZWR1Y2UoKGFjYywgeCkgPT4ge1xyXG4gICAgICAgICAgYWNjICs9IGAke3gubmFtZX0gPiBgO1xyXG4gICAgICAgICAgcmV0dXJuIGFjYztcclxuICAgICAgICB9LCBcIlwiKSArIGRhdGEuYXNzZXROYW1lO1xyXG5cclxuICAgICAgaWYgKC9jbG91ZGluYXJ5Ly50ZXN0KGRhdGEuc2VjdXJlX3VybCkpIHtcclxuICAgICAgICB2bS5maWxlQXJyYXkgPSBnbG9iYWxzLmV4dHJhY3RQYWdlc0Zyb21QZGYoZGF0YS5zZWN1cmVfdXJsLCBkYXRhLnBhZ2VzKTtcclxuICAgICAgICB2bS5sb2FkZXIgPSBmYWxzZTtcclxuICAgICAgICAkKFwiI2Nob29zZVJvb2ZNb2RhbFwiKS5jc3MoXCJ2aXNpYmlsaXR5XCIsIFwiaGlkZGVuXCIpO1xyXG4gICAgICAgICQoXCIjc2VsZWN0RmlsZVwiKS5tb2RhbChcInNob3dcIik7XHJcbiAgICAgICAgJChcIiNzZWxlY3RGaWxlXCIpLmNzcyhcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcclxuICAgICAgICB2bS5wZGZGaWxlcyA9IGFuZ3VsYXIuY29weSh2bS5maWxlQXJyYXkpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHZtLmZpbGVBcnJheSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKGRhdGEucGxhbkRvY3VtZW50KSB7XHJcbiAgICAgICAgICAkdGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICRzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgdm0ucGRmUGFnZXNEYXRhID0gdm0ucGRmRmlsZXMgPSBkYXRhLnBsYW5JbWFnZXMubWFwKCh4LCBpKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBvYmogPSB7XHJcbiAgICAgICAgICAgICAgcGFnZU5vOiBpLFxyXG4gICAgICAgICAgICAgIHRpdGxlOiBgdGl0bGVfJHtEYXRlLm5vdygpfWAsXHJcbiAgICAgICAgICAgICAgdXJsOiB4LFxyXG4gICAgICAgICAgICAgIHNlbGVjdGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJcIlxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG9iajtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIHZtLmxvYWRlciA9IGZhbHNlO1xyXG4gICAgICAgICAgJChcIiNjaG9vc2VSb29mTW9kYWxcIikuY3NzKFwidmlzaWJpbGl0eVwiLCBcImhpZGRlblwiKTtcclxuICAgICAgICAgICQoXCIjc2VsZWN0RmlsZVwiKS5tb2RhbChcInNob3dcIik7XHJcbiAgICAgICAgICAkKFwiI3NlbGVjdEZpbGVcIikuY3NzKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBnbG9iYWxzLmNyZWF0ZVBhZ2VzRnJvbVBkZihkYXRhKS50aGVuKHBhZ2VzID0+IHtcclxuICAgICAgICAgICAgJHRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICRzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZtLnBkZlBhZ2VzRGF0YSA9IHBhZ2VzO1xyXG4gICAgICAgICAgICB2bS5wZGZGaWxlcyA9IHBhZ2VzO1xyXG4gICAgICAgICAgICB2bS5sb2FkZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgJChcIiNjaG9vc2VSb29mTW9kYWxcIikuY3NzKFwidmlzaWJpbGl0eVwiLCBcImhpZGRlblwiKTtcclxuICAgICAgICAgICAgJChcIiNzZWxlY3RGaWxlQ2FudmFzXCIpLm1vZGFsKFwic2hvd1wiKTtcclxuICAgICAgICAgICAgJChcIiNzZWxlY3RGaWxlQ2FudmFzXCIpLmNzcyhcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB2bS5oaWRlU2VsZWN0RmlsZSA9ICgpID0+IHtcclxuICAgICAgJChcIiNjaG9vc2VSb29mTW9kYWxcIikuY3NzKFwidmlzaWJpbGl0eVwiLCBcInZpc2libGVcIik7XHJcbiAgICAgICQoXCIjc2VsZWN0RmlsZVwiKS5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcclxuICAgIH07XHJcbiAgICB2bS5zZWxlY3RlZEZpbGVMaXN0ID0gKHZhbCwgdHlwZSwgYXNzZXQpID0+IHtcclxuICAgICAgaWYgKHZhbCA9PSBcInN1Ym1pdFwiKSB7XHJcbiAgICAgICAgJChcIiNjaG9vc2VGaWxlLCAjc2VsZWN0RmlsZSwgI3NlbGVjdEZpbGVDYW52YXNcIikuY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XHJcbiAgICAgICAgJChcIiNjaG9vc2VSb29mTW9kYWxcIikuY3NzKFwidmlzaWJpbGl0eVwiLCBcInZpc2libGVcIik7XHJcbiAgICAgICAgdm0uc2VsZWN0ZWRGaWxlcyA9IFtdO1xyXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh2bS5wZGZGaWxlcywgeCA9PiB7XHJcbiAgICAgICAgICBpZiAoeC5zZWxlY3RlZCkge1xyXG4gICAgICAgICAgICB2bS5zZWxlY3RlZEZpbGVzLnB1c2goeCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHR5cGUgPT09IDEpIHtcclxuICAgICAgICAgIGxldCBlbmRwb2ludCA9XHJcbiAgICAgICAgICAgICFhc3NldC5wbGFuRG9jdW1lbnQgJiYgL2Nsb3VkaW5hcnkvLnRlc3QoYXNzZXQuc2VjdXJlX3VybClcclxuICAgICAgICAgICAgICA/IFwiYWRkUHJvamVjdFJvb2ZQbGFuXCJcclxuICAgICAgICAgICAgICA6IFwiYWRkUm9vZlBsYW5zRnJvbUFzc2V0XCI7XHJcbiAgICAgICAgICAvKiBDbG91ZGluYXJ5IHBsYW5zICovXHJcbiAgICAgICAgICBsZXQgcGF5bG9hZCA9IHtcclxuICAgICAgICAgICAgYXNzZXRJZDogYXNzZXQuX2lkLFxyXG4gICAgICAgICAgICBwcm9qZWN0SWQ6IHByb2plY3RTdG9yZS5nZXQoKS5faWQsXHJcbiAgICAgICAgICAgIHBhZ2VzOiB2bS5zZWxlY3RlZEZpbGVzXHJcbiAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgIGFwaUZhY3RvcnlbZW5kcG9pbnRdKHBheWxvYWQpXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgIE5vdGlmaWNhdGlvbi5zdWNjZXNzKHJlc3AuZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgICAgICAgICAuZ2V0UHJvamVjdFJvb2ZQbGFucyhwcm9qZWN0U3RvcmUuZ2V0KCkuX2lkKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIGxldCByb29mUGxhbnMgPSByZXNwLmRhdGEuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlU2VydmljZS5zZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgXCJyb29mUGxhblByb2plY3RcIixcclxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0U3RvcmUuZ2V0KCkuX2lkXHJcbiAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZVNlcnZpY2Uuc2V0KFwicm9vZlBsYW5zXCIsIHJvb2ZQbGFucyk7XHJcbiAgICAgICAgICAgICAgICAgIHZtLnBsYW5QaWNrZXJQbGFucyA9IHJvb2ZQbGFucztcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8qIFMzIHBsYW5zICovXHJcbiAgICAgICAgICBsZXQgcGF5bG9hZCA9IHtcclxuICAgICAgICAgICAgYXNzZXRJZDogYXNzZXQuX2lkLFxyXG4gICAgICAgICAgICBwZGZVcmw6IGFzc2V0LnNlY3VyZV91cmwsXHJcbiAgICAgICAgICAgIHByb2plY3RJZDogcHJvamVjdFN0b3JlLmdldCgpLl9pZCxcclxuICAgICAgICAgICAgcGFnZXM6IHZtLnNlbGVjdGVkRmlsZXMucmVkdWNlKChhY2MsIHgpID0+IHtcclxuICAgICAgICAgICAgICBsZXQgb2JqID0ge1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6IHgudGl0bGUsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogeC5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgIHBhZ2VObzogeC5wYWdlTm9cclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgIGFjYy5wdXNoKG9iaik7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGFjYztcclxuICAgICAgICAgICAgfSwgW10pXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgYXBpRmFjdG9yeVxyXG4gICAgICAgICAgICAuZ2VuZXJhdGVSb29mUGxhbnMocGF5bG9hZClcclxuICAgICAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgTm90aWZpY2F0aW9uLnN1Y2Nlc3MocmVzcC5kYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAgICAgICAgIC5nZXRQcm9qZWN0Um9vZlBsYW5zKHByb2plY3RTdG9yZS5nZXQoKS5faWQpXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgICAgICAgbGV0IHJvb2ZQbGFucyA9IHJlc3AuZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldChcclxuICAgICAgICAgICAgICAgICAgICBcInJvb2ZQbGFuUHJvamVjdFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RTdG9yZS5nZXQoKS5faWRcclxuICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlU2VydmljZS5zZXQoXCJyb29mUGxhbnNcIiwgcm9vZlBsYW5zKTtcclxuICAgICAgICAgICAgICAgICAgdm0ucGxhblBpY2tlclBsYW5zID0gcm9vZlBsYW5zO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZiAodmFsID09IFwiY2xvc2VcIikge1xyXG4gICAgICAgICQoXCIjY2hvb3NlRmlsZSwgI3NlbGVjdEZpbGUsICNzZWxlY3RGaWxlQ2FudmFzXCIpLmNzcyhcImRpc3BsYXlcIiwgXCJub25lXCIpO1xyXG4gICAgICAgICQoXCIjY2hvb3NlUm9vZk1vZGFsXCIpLmNzcyhcInZpc2liaWxpdHlcIiwgXCJ2aXNpYmxlXCIpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxufSkoKTtcclxuIiwiKCgpID0+IHtcclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJlbXBsb3llZXNDdHJsXCIsIGVtcGxveWVlc0N0cmwpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGVtcGxveWVlc0N0cmwoXHJcbiAgICAgICAgJHNjb3BlLFxyXG4gICAgICAgICR0aW1lb3V0LFxyXG4gICAgICAgIGF1dGhGYWN0b3J5LFxyXG4gICAgICAgICRzdGF0ZSxcclxuICAgICAgICBhcGlGYWN0b3J5LFxyXG4gICAgICAgIE5vdGlmaWNhdGlvbixcclxuICAgICAgICBOZ01hcCxcclxuICAgICAgICBnbG9iYWxzLFxyXG4gICAgICAgIGxvY2FsU3RvcmFnZVNlcnZpY2UsXHJcbiAgICAgICkge1xyXG4gICAgICAgIGxldCB2bSA9IHRoaXM7XHJcblxyXG4gICAgICAgIGNvbnN0IHsgbG9nb3V0IH0gPSBnbG9iYWxzO1xyXG4gICAgXHJcbiAgICAgICAgaWYgKCFhdXRoRmFjdG9yeS5jaGVja1VzZXIoKSkge1xyXG4gICAgICAgICAgbG9nb3V0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgdm0ubG9nb3V0ID0gKCkgPT4ge1xyXG4gICAgICAgICAgbG9nb3V0KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgICBcclxuXHJcbn0pKCk7IiwiKCgpID0+IHtcclxuICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwiZXF1aXBtZW50Q3RybFwiLCBlcXVpcG1lbnRDdHJsKTtcclxuXHJcbiAgZnVuY3Rpb24gZXF1aXBtZW50Q3RybChcclxuICAgICRzY29wZSxcclxuICAgICR0aW1lb3V0LFxyXG4gICAgYXV0aEZhY3RvcnksXHJcbiAgICAkc3RhdGUsXHJcbiAgICBhcGlGYWN0b3J5LFxyXG4gICAgTm90aWZpY2F0aW9uLFxyXG4gICAgZ2xvYmFscyxcclxuICAgIFVwbG9hZFxyXG4gICkge1xyXG4gICAgLyogUmVxdWlyaW5nIHZhcnMgKi9cclxuXHJcbiAgICAkc2NvcGUuZXF1aXBtZW50ID0gW1xyXG4gICAgICB7IGltZzogJy9hc3NldHMvaW1hZ2VzL2VxdWlwbWVudC5wbmcnLCB0aXRsZTogJ0VxdWlwbWVudCBBQkMnLCBzdWJ0aXRsZTogJ0VRIC0gMTIzNCcsIHdvcms6ICdXb3JrZXIgSUQnLCB0YWc6ICdOTlMxIC0gS2ltIE1vc2VnYWFyZCcgfSxcclxuICAgICAgeyBpbWc6ICcvYXNzZXRzL2ltYWdlcy9lcXVpcG1lbnQucG5nJywgdGl0bGU6ICdFcXVpcG1lbnQgQUJDJywgc3VidGl0bGU6ICdFUSAtIDEyMzQnLCB3b3JrOiAnQ2FyJywgdGFnOiAnTlIuIDk5JyB9LFxyXG4gICAgICB7IGltZzogJy9hc3NldHMvaW1hZ2VzL2VxdWlwbWVudC5wbmcnLCB0aXRsZTogJ0VxdWlwbWVudCBBQkMnLCBzdWJ0aXRsZTogJ0VRIC0gMTIzNCcsIHdvcms6ICdXb3JrZXIgSUQnLCB0YWc6ICdOTlMxIC0gS2ltIE1vc2VnYWFyZCcgfSxcclxuICAgICAgeyBpbWc6ICcvYXNzZXRzL2ltYWdlcy9lcXVpcG1lbnQucG5nJywgdGl0bGU6ICdFcXVpcG1lbnQgQUJDJywgc3VidGl0bGU6ICdFUSAtIDEyMzQnLCB3b3JrOiAnV29ya2VyIElEJywgdGFnOiAnTk5TMSAtIEtpbSBNb3NlZ2FhcmQnIH0sXHJcbiAgICAgIHsgaW1nOiAnL2Fzc2V0cy9pbWFnZXMvZXF1aXBtZW50LnBuZycsIHRpdGxlOiAnRXF1aXBtZW50IEFCQycsIHN1YnRpdGxlOiAnRVEgLSAxMjM0Jywgd29yazogJ0NhcicsIHRhZzogJ05SLiA5OScgfSxcclxuICAgICAgeyBpbWc6ICcvYXNzZXRzL2ltYWdlcy9lcXVpcG1lbnQucG5nJywgdGl0bGU6ICdFcXVpcG1lbnQgQUJDJywgc3VidGl0bGU6ICdFUSAtIDEyMzQnLCB3b3JrOiAnV29ya2VyIElEJywgdGFnOiAnTk5TMSAtIEtpbSBNb3NlZ2FhcmQnIH0sXHJcbiAgICAgIHsgaW1nOiAnL2Fzc2V0cy9pbWFnZXMvZXF1aXBtZW50LnBuZycsIHRpdGxlOiAnRXF1aXBtZW50IEFCQycsIHN1YnRpdGxlOiAnRVEgLSAxMjM0Jywgd29yazogJ1dvcmtlciBJRCcsIHRhZzogJ05OUzEgLSBLaW0gTW9zZWdhYXJkJyB9LFxyXG4gICAgICB7IGltZzogJy9hc3NldHMvaW1hZ2VzL2VxdWlwbWVudC5wbmcnLCB0aXRsZTogJ0VxdWlwbWVudCBBQkMnLCBzdWJ0aXRsZTogJ0VRIC0gMTIzNCcsIHdvcms6ICdDYXInLCB0YWc6ICdOUi4gOTknIH0sXHJcbiAgICAgIHsgaW1nOiAnL2Fzc2V0cy9pbWFnZXMvZXF1aXBtZW50LnBuZycsIHRpdGxlOiAnRXF1aXBtZW50IEFCQycsIHN1YnRpdGxlOiAnRVEgLSAxMjM0Jywgd29yazogJ1dvcmtlciBJRCcsIHRhZzogJ05OUzEgLSBLaW0gTW9zZWdhYXJkJyB9XHJcbiAgICBdXHJcbiAgICAkc2NvcGUuaW1nX3VwbG9hZCA9IFtcclxuICAgICAgeyBpbWc6ICcvYXNzZXRzL2ltYWdlcy9lcXVpcG1lbnQzLnBuZycgfSxcclxuICAgICAgeyBpbWc6ICcvYXNzZXRzL2ltYWdlcy9lcXVpcG1lbnQzLnBuZycgfSxcclxuICAgICAgeyBpbWc6ICcvYXNzZXRzL2ltYWdlcy9lcXVpcG1lbnQzLnBuZycgfVxyXG4gICAgXVxyXG4gICAgJHNjb3BlLmVxdWlwZG9jdW1lbnRzID0gW1xyXG4gICAgICB7IGltZzogJy9hc3NldHMvaW1hZ2VzL3BkZi5wbmcnLCB0eXBlOiAnRG9jdW1lbnRfMS5wZGYnIH0sXHJcbiAgICAgIHsgaW1nOiAnL2Fzc2V0cy9pbWFnZXMvcGRmLnBuZycsIHR5cGU6ICdEb2N1bWVudF8yLnBkZicgfSxcclxuICAgICAgeyBpbWc6ICcvYXNzZXRzL2ltYWdlcy9wZGYucG5nJywgdHlwZTogJ0RvY3VtZW50XzMucGRmJyB9XHJcbiAgICBdXHJcblxyXG4gICAgbGV0IHZtID0gdGhpcztcclxuICAgIGNvbnN0IHsgbG9nb3V0LCB1c2VyU3RvcmUgfSA9IGdsb2JhbHM7XHJcbiAgICBpZiAoIWF1dGhGYWN0b3J5LmNoZWNrVXNlcigpKSB7XHJcbiAgICAgIGxvZ291dCgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAkKFwiLnBheXJvbGxNZW51XCIpLmhpZGUoKTtcclxuICAgIC8qIEdldCBwcm9qZWN0IGxpc3QgKi9cclxuXHJcbiAgICB2bS51c2VyRGF0YSA9IHVzZXJTdG9yZS5nZXQoKTtcclxuXHJcbiAgICB2bS5sb2dvdXQgPSAoKSA9PiB7XHJcbiAgICAgIGxvZ291dCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAkKFwiLm1hdGVyaWFsTGlzdFwiKS5EYXRhVGFibGUoKTtcclxuICAgIGFwaUZhY3RvcnlcclxuICAgICAgLmxpc3RBbGxFcXVpcG1lbnRzKClcclxuICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgdm0uZXF1aXBtZW50ID0gcmVzcC5kYXRhLmxpc3Q7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgLyogRGF0YSB0YWJsZSBzZXR1cCAqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAgIHZtLmR0T3B0aW9ucyA9IHtcclxuICAgICAgcGFnaW5nOiBmYWxzZSxcclxuICAgICAgaW5mbzogZmFsc2UsXHJcbiAgICAgIG9yZGVyaW5nOiBmYWxzZVxyXG4gICAgfTtcclxuICAgICQoXCIuZXF1aXBtZW50TGlzdFwiKS5EYXRhVGFibGUoKTtcclxuXHJcbiAgICAkc2NvcGUuYWN0aXZlSnVzdGlmaWVkID0gMDtcclxuXHJcbiAgICB2bS5jdXJyZW50UGFnZSA9IDE7XHJcblxyXG4gICAgdm0udG9nZ2xlT2JqID0ge1xyXG4gICAgICBzeXN0ZW1UYWc6IHRydWUsXHJcbiAgICAgIG1hdGVyaWFsQ29zdDogZmFsc2UsXHJcbiAgICAgIHJvb2ZlckNvc3Q6IGZhbHNlLFxyXG4gICAgICBjcmVhdGVkQXQ6IGZhbHNlLFxyXG4gICAgICBuYW1lOiBmYWxzZVxyXG4gICAgfTtcclxuICAgIHZtLnNlYXJjaFRleHQgPSBcIlwiO1xyXG4gICAgdm0uc29ydEVxdWlwbWVudCA9IHR5cGUgPT4ge1xyXG4gICAgICAvKiBGb3IgdG9nZ2xpbmcgYXNjZW5kaW5nIGFuZCBkZXNjZW5kaW5nIG9yZGVyICovXHJcbiAgICAgIHZtLnRvZ2dsZU9ialt0eXBlXSA9PT0gdW5kZWZpbmVkXHJcbiAgICAgICAgPyAodm0udG9nZ2xlT2JqW3R5cGVdID0gdHJ1ZSlcclxuICAgICAgICA6ICh2bS50b2dnbGVPYmpbdHlwZV0gPSAhdm0udG9nZ2xlT2JqW3R5cGVdKTtcclxuXHJcbiAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAubGlzdEFsbEVxdWlwbWVudHMoe1xyXG4gICAgICAgICAgcGFnZTogMSxcclxuICAgICAgICAgIGNodW5rOiAxMCxcclxuICAgICAgICAgIHNvcnQ6IHR5cGUsXHJcbiAgICAgICAgICBzZWFyY2g6IHZtLnNlYXJjaFRleHQsXHJcbiAgICAgICAgICBzb3J0VHlwZTogdm0udG9nZ2xlT2JqW3R5cGVdXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgIHZtLmVxdWlwbWVudCA9IHJlc3AuZGF0YS5saXN0O1xyXG4gICAgICAgICAgdm0uZXF1aXBtZW50Q291bnQgPSByZXNwLmRhdGEudG90YWw7XHJcbiAgICAgICAgICAkdGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICQoXCIjZXF1aXBtZW50UGFnaW5hdGlvblwiKS5wYWdpbmF0aW9uKHtcclxuICAgICAgICAgICAgICBpdGVtczogdm0uZXF1aXBtZW50Q291bnQsXHJcbiAgICAgICAgICAgICAgaXRlbXNPblBhZ2U6IDEwLFxyXG4gICAgICAgICAgICAgIGNzc1N0eWxlOiBcImxpZ2h0LXRoZW1lXCIsXHJcbiAgICAgICAgICAgICAgaHJlZlRleHRQcmVmaXg6IFwiI1wiLFxyXG4gICAgICAgICAgICAgIG9yZGVyaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgICBjdXJyZW50UGFnZTogMSxcclxuICAgICAgICAgICAgICBvblBhZ2VDbGljazogZnVuY3Rpb24ocGFnZSwgZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgICAgICAgICAgIC5saXN0QWxsRXF1aXBtZW50cyh7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZTogcGFnZSxcclxuICAgICAgICAgICAgICAgICAgICBjaHVuazogMTAsXHJcbiAgICAgICAgICAgICAgICAgICAgc29ydDogdHlwZSxcclxuICAgICAgICAgICAgICAgICAgICBzb3J0VHlwZTogdm0udG9nZ2xlT2JqW3R5cGVdXHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLmVxdWlwbWVudCA9IHJlc3AuZGF0YS5saXN0O1xyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB2bS5zZWFyY2hFcXVpcG1lbnQgPSB0ZXh0ID0+IHtcclxuICAgICAgYXBpRmFjdG9yeVxyXG4gICAgICAgIC5saXN0QWxsRXF1aXBtZW50cyh7XHJcbiAgICAgICAgICBwYWdlOiAxLFxyXG4gICAgICAgICAgY2h1bms6IDEwLFxyXG4gICAgICAgICAgc2VhcmNoOiB0ZXh0LFxyXG4gICAgICAgICAgc29ydDogXCJjcmVhdGVkRGF0ZVwiLFxyXG4gICAgICAgICAgc29ydFR5cGU6IGZhbHNlXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgIHZtLmVxdWlwbWVudCA9IHJlc3AuZGF0YS5saXN0O1xyXG4gICAgICAgICAgdm0uZXF1aXBtZW50Q291bnQgPSByZXNwLmRhdGEudG90YWw7XHJcbiAgICAgICAgICAkdGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICQoXCIjZXF1aXBtZW50UGFnaW5hdGlvblwiKS5wYWdpbmF0aW9uKHtcclxuICAgICAgICAgICAgICBpdGVtczogdm0uZXF1aXBtZW50Q291bnQsXHJcbiAgICAgICAgICAgICAgaXRlbXNPblBhZ2U6IDEwLFxyXG4gICAgICAgICAgICAgIGNzc1N0eWxlOiBcImxpZ2h0LXRoZW1lXCIsXHJcbiAgICAgICAgICAgICAgaHJlZlRleHRQcmVmaXg6IFwiI1wiLFxyXG4gICAgICAgICAgICAgIG9yZGVyaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgICBjdXJyZW50UGFnZTogMSxcclxuICAgICAgICAgICAgICBvblBhZ2VDbGljazogZnVuY3Rpb24ocGFnZSwgZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgICAgICAgICAgIC5saXN0QWxsRXF1aXBtZW50cyh7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZTogcGFnZSxcclxuICAgICAgICAgICAgICAgICAgICBjaHVuazogMTAsXHJcbiAgICAgICAgICAgICAgICAgICAgc29ydDogdHlwZSxcclxuICAgICAgICAgICAgICAgICAgICBzb3J0VHlwZTogdm0udG9nZ2xlT2JqW3R5cGVdXHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLmVxdWlwbWVudCA9IHJlc3AuZGF0YS5saXN0O1xyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKiBJbml0aWFsbHkgZ2V0dGluZyB0aGUgdmFsdWVzIG9mIG1hdGVyaWFsIGFuZCBjb21ibyBtYXRlcmlhbHMgKi9cclxuICAgIHZtLnNvcnRFcXVpcG1lbnQoXCJjcmVhdGVkQXRcIik7XHJcbiAgICAvKiBFbmQgb2YgIERhdGEgdGFibGUgc2V0dXAgKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAvKiBBZGQgbWF0ZXJpYWwgZnVuY3Rpb25hbGl0eSAqL1xyXG5cclxuICAgIHZtLmFkZE1hdGVyaWFsID0ge1xyXG4gICAgICBjb252ZXJzaW9uRmFjdG9yOiAxXHJcbiAgICB9O1xyXG5cclxuICAgIHZtLnRhYlNldHRpbmdzID0ge1xyXG4gICAgICBkaXNhYmxlOiB0cnVlXHJcbiAgICB9O1xyXG5cclxuICAgIGFwaUZhY3RvcnlcclxuICAgICAgLmdldENvbXBhbnlCeUlkKHZtLnVzZXJEYXRhLmNvbXBhbnlJZClcclxuICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgdm0uY29tcGFueURhdGEgPSByZXNwLmRhdGE7XHJcbiAgICAgICAgdm0uYWRkTWF0ZXJpYWwuY3VycmVuY3kgPSB2bS5jb21wYW55RGF0YS5jdXJyZW50Q3VycmVuY3kuY3VycmVuY3lDb2RlO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbihlID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgdm0uc2hvd0NvbnZlcnNpb25SYXRlID0gKGZyb20sIHRvKSA9PiB7XHJcbiAgICAgIGxldCBjdXJyZW5jeURhdGEgPSB7XHJcbiAgICAgICAgZnJvbSxcclxuICAgICAgICB0b1xyXG4gICAgICB9O1xyXG4gICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgLnNob3dDb252ZXJzaW9uUmF0ZShjdXJyZW5jeURhdGEpXHJcbiAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICB2bS5hZGRNYXRlcmlhbC5jb252ZXJzaW9uRmFjdG9yID0gcmVzcC5kYXRhLmNvbnZlcnNpb25GYWN0b3I7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdm0ubVVuaXRzID0gZ2xvYmFscy5tVW5pdHM7XHJcblxyXG4gICAgZ2xvYmFscy5nZXRDdXJyZW5jeSgpLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgIHZtLmN1cnJlbmNpZXMgPSByZXNwLmRhdGE7XHJcbiAgICB9KTtcclxuXHJcbiAgICB2bS50YWJTdHlsZSA9ICgpID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIHZtLmFkZE1hdGVyaWFsLm1hdGVyaWFsTmFtZSAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgdm0uYWRkTWF0ZXJpYWwubWF0ZXJpYWxOYW1lICE9PSBcIiBcIlxyXG4gICAgICApIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB2bS5hZGRNYXRlcmlhbC5tYXRlcmlhbFVuaXQgIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgdm0uYWRkTWF0ZXJpYWwubWF0ZXJpYWxVbml0ICE9PSBcIiBcIlxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB2bS5hZGRNYXRlcmlhbC5jdXJyZW5jeSAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIHZtLmFkZE1hdGVyaWFsLmN1cnJlbmN5ICE9PSBcIlwiXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgIHZtLmFkZE1hdGVyaWFsLmNvbnZlcnNpb25GYWN0b3IgIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICAgIHZtLmFkZE1hdGVyaWFsLmNvbnZlcnNpb25GYWN0b3IgIT09IFwiXCJcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgJChcInVpYi10YWItaGVhZGluZy5pbmZvIGkuZmFcIikuYXR0cihcclxuICAgICAgICAgICAgICAgIFwic3R5bGVcIixcclxuICAgICAgICAgICAgICAgIFwiZGlzcGxheTogaW5saW5lLWJsb2NrICFpbXBvcnRhbnQ7IGNvbG9yOiAjM2NiZGFhXCJcclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICQoXCJ1aWItdGFiLWhlYWRpbmcuaW5mbyAubnVtYmVyXCIpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAkKFwiLmJ0bi1zdWNjZXNzLm5leHRcIikuYXR0cihcImRpc2FibGVkXCIsIGZhbHNlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkKFwidWliLXRhYi1oZWFkaW5nLmluZm8gaS5mYVwiKS5hdHRyKFxyXG4gICAgICAgICAgICAgICAgXCJzdHlsZVwiLFxyXG4gICAgICAgICAgICAgICAgXCJkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IGNvbG9yOiAjM2NiZGFhXCJcclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICQoXCJ1aWItdGFiLWhlYWRpbmcuaW5mbyAubnVtYmVyXCIpLnNob3coKTtcclxuICAgICAgICAgICAgICAkKFwiLmJ0bi1zdWNjZXNzLm5leHRcIikuYXR0cihcImRpc2FibGVkXCIsIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKFwidWliLXRhYi1oZWFkaW5nLmluZm8gaS5mYVwiKS5hdHRyKFxyXG4gICAgICAgICAgICAgIFwic3R5bGVcIixcclxuICAgICAgICAgICAgICBcImRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgY29sb3I6ICMzY2JkYWFcIlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAkKFwidWliLXRhYi1oZWFkaW5nLmluZm8gLm51bWJlclwiKS5zaG93KCk7XHJcbiAgICAgICAgICAgICQoXCIuYnRuLXN1Y2Nlc3MubmV4dFwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICQoXCJ1aWItdGFiLWhlYWRpbmcuaW5mbyBpLmZhXCIpLmF0dHIoXHJcbiAgICAgICAgICAgIFwic3R5bGVcIixcclxuICAgICAgICAgICAgXCJkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IGNvbG9yOiAjM2NiZGFhXCJcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICAkKFwidWliLXRhYi1oZWFkaW5nLmluZm8gLm51bWJlclwiKS5zaG93KCk7XHJcbiAgICAgICAgICAkKFwiLmJ0bi1zdWNjZXNzLm5leHRcIikuYXR0cihcImRpc2FibGVkXCIsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkKFwidWliLXRhYi1oZWFkaW5nLmluZm8gaS5mYVwiKS5hdHRyKFxyXG4gICAgICAgICAgXCJzdHlsZVwiLFxyXG4gICAgICAgICAgXCJkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IGNvbG9yOiAjM2NiZGFhXCJcclxuICAgICAgICApO1xyXG4gICAgICAgICQoXCJ1aWItdGFiLWhlYWRpbmcuaW5mbyAubnVtYmVyXCIpLnNob3coKTtcclxuICAgICAgICAkKFwiLmJ0bi1zdWNjZXNzLm5leHRcIikuYXR0cihcImRpc2FibGVkXCIsIHRydWUpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLmFkZE1hdGVyaWFsTmV4dCA9ICgpID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIHZtLmFkZE1hdGVyaWFsLm1hdGVyaWFsTmFtZSA9PSB1bmRlZmluZWQgfHxcclxuICAgICAgICB2bS5hZGRNYXRlcmlhbC5tYXRlcmlhbE5hbWUgPT0gXCIgXCJcclxuICAgICAgKSB7XHJcbiAgICAgICAgTm90aWZpY2F0aW9uLmVycm9yKFwiUGxlYXNlIGVudGVyIG1hdGVyaWFsIG5hbWVcIik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgdm0uYWRkTWF0ZXJpYWwubWF0ZXJpYWxVbml0ID09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgIHZtLmFkZE1hdGVyaWFsLm1hdGVyaWFsVW5pdCA9PSBcIiBcIlxyXG4gICAgICApIHtcclxuICAgICAgICBOb3RpZmljYXRpb24uZXJyb3IoXCJQbGVhc2Ugc2VsZWN0IG1hdGVyaWFsIFVuaXRcIik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgdm0uYWRkTWF0ZXJpYWwuY3VycmVuY3kgPT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgdm0uYWRkTWF0ZXJpYWwuY3VycmVuY3kgPT0gXCIgXCJcclxuICAgICAgKSB7XHJcbiAgICAgICAgTm90aWZpY2F0aW9uLmVycm9yKFwiUGxlYXNlIHNlbGVjdCBDdXJyZW5jeVwiKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgICRzY29wZS5hY3RpdmVKdXN0aWZpZWQgPSAxO1xyXG4gICAgfTtcclxuXHJcbiAgICB2bS5jaGFuZ2VDb3N0ID0gKGNvc3QsIGNvbnZlcnNpb25SYXRlKSA9PiB7XHJcbiAgICAgIHJldHVybiBjb3N0ICogY29udmVyc2lvblJhdGU7XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLmFkZE1hdGVyaWFsRGV0YWlscyA9ICgpID0+IHtcclxuICAgICAgdmFyIGZvcm1EYXRhID0ge1xyXG4gICAgICAgIG5hbWU6IHZtLmFkZE1hdGVyaWFsLm1hdGVyaWFsTmFtZSxcclxuICAgICAgICB1bml0OiB2bS5hZGRNYXRlcmlhbC5tYXRlcmlhbFVuaXQsXHJcbiAgICAgICAgZXF1aXBtZW50Q29zdHM6IHtcclxuICAgICAgICAgIHZhbHVlOiB2bS5jaGFuZ2VDb3N0KFxyXG4gICAgICAgICAgICB2bS5hZGRNYXRlcmlhbC5lcXVpcG1lbnRDb3N0VmFsdWUsXHJcbiAgICAgICAgICAgIHZtLmFkZE1hdGVyaWFsLmNvbnZlcnNpb25GYWN0b3JcclxuICAgICAgICAgICksXHJcbiAgICAgICAgICBjdXJyZW5jeUNvZGU6IHZtLmNvbXBhbnlEYXRhLmN1cnJlbnRDdXJyZW5jeS5jdXJyZW5jeUNvZGVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJvb2ZlckNvc3Q6IHtcclxuICAgICAgICAgIHZhbHVlOiB2bS5jaGFuZ2VDb3N0KFxyXG4gICAgICAgICAgICB2bS5hZGRNYXRlcmlhbC5yb29mZXJDb3N0VmFsdWUsXHJcbiAgICAgICAgICAgIHZtLmFkZE1hdGVyaWFsLmNvbnZlcnNpb25GYWN0b3JcclxuICAgICAgICAgICksXHJcbiAgICAgICAgICBjdXJyZW5jeUNvZGU6IHZtLmNvbXBhbnlEYXRhLmN1cnJlbnRDdXJyZW5jeS5jdXJyZW5jeUNvZGVcclxuICAgICAgICB9LFxyXG4gICAgICAgIGZpbGVzOiB2bS5pbnB1dEZpbGVzXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgLmNyZWF0ZUVxdWlwbWVudChmb3JtRGF0YSlcclxuICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICQoXCIjYWRkRXF1aXBtZW50c1wiKS5tb2RhbChcImhpZGVcIik7XHJcbiAgICAgICAgICBOb3RpZmljYXRpb24uc3VjY2VzcyhyZXNwLmRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICB2bS5zb3J0RXF1aXBtZW50KFwiY3JlYXRlZEF0XCIpO1xyXG5cclxuICAgICAgICAgIHZtLmFkZE1hdGVyaWFsID0ge1xyXG4gICAgICAgICAgICBjb252ZXJzaW9uRmFjdG9yOiAxXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gIH1cclxufSkoKTtcclxuIiwiKCgpID0+IHtcclxuICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwiZXF1aXBtZW50Vmlld0N0cmxcIiwgZXF1aXBtZW50Vmlld0N0cmwpO1xyXG5cclxuICBmdW5jdGlvbiBlcXVpcG1lbnRWaWV3Q3RybChcclxuICAgICRzY29wZSxcclxuICAgICR0aW1lb3V0LFxyXG4gICAgYXV0aEZhY3RvcnksXHJcbiAgICAkc3RhdGUsXHJcbiAgICBhcGlGYWN0b3J5LFxyXG4gICAgTm90aWZpY2F0aW9uLFxyXG4gICAgZ2xvYmFscyxcclxuICAgICRzdGF0ZVBhcmFtcyxcclxuICAgIFVwbG9hZFxyXG4gICkge1xyXG4gICAgLyogUmVxdWlyaW5nIHZhcnMgKi9cclxuXHJcbiAgICBsZXQgdm0gPSB0aGlzO1xyXG4gICAgY29uc3QgeyBsb2dvdXQsIHVzZXJTdG9yZSB9ID0gZ2xvYmFscztcclxuICAgIGlmICghYXV0aEZhY3RvcnkuY2hlY2tVc2VyKCkpIHtcclxuICAgICAgbG9nb3V0KCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZtLmxvZ291dCA9ICgpID0+IHtcclxuICAgICAgICBsb2dvdXQoKTtcclxuICAgIH07XHJcbiAgICAvKiBHZXQgcHJvamVjdCBsaXN0ICovXHJcbiAgICB2bS51c2VyRGF0YSA9IHVzZXJTdG9yZS5nZXQoKTtcclxuICAgICAgXHJcbiAgICB2bS5lcXVpcG1lbnRJZCA9ICRzdGF0ZVBhcmFtcy5pZDtcclxuICAgIGFwaUZhY3RvcnkuZ2V0RXF1aXBtZW50QnlJZCh2bS5lcXVpcG1lbnRJZCkudGhlbihyZXNwID0+IHtcclxuICAgIGNvbnNvbGUubG9nKHJlc3ApXHJcbiAgICB9KS5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuICB9XHJcbn0pKCk7XHJcbiIsIigoKSA9PiB7XHJcbiAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuY29udHJvbGxlcihcImZpbGVNYW5hZ2VyQ3RybFwiLCBmaWxlTWFuYWdlckN0cmwpO1xyXG5cclxuICBmdW5jdGlvbiBmaWxlTWFuYWdlckN0cmwoXHJcbiAgICAkc2NvcGUsXHJcbiAgICAkaHR0cCxcclxuICAgICR3aW5kb3csXHJcbiAgICAkdGltZW91dCxcclxuICAgIGF1dGhGYWN0b3J5LFxyXG4gICAgJHN0YXRlLFxyXG4gICAgYXBpRmFjdG9yeSxcclxuICAgIE5vdGlmaWNhdGlvbixcclxuICAgIGdsb2JhbHMsXHJcbiAgICBmaWxlTWFuYWdlckZhY3RvcnksXHJcbiAgICB1cGxvYWRGYWN0b3J5XHJcbiAgKSB7XHJcbiAgICAvKiBSZXF1aXJpbmcgdmFycyAqL1xyXG5cclxuICAgIGxldCB2bSA9IHRoaXM7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgIGxvZ291dCxcclxuICAgICAgdXNlclN0b3JlLFxyXG4gICAgICBwcm9qZWN0U3RvcmUsXHJcbiAgICAgIGdlbmVyaWNTdG9yZSxcclxuICAgICAgYnJlYWtjcnVtYlN0b3JlXHJcbiAgICB9ID0gZ2xvYmFscztcclxuICAgIGNvbnN0IHsgY2xpcEJvYXJkIH0gPSBmaWxlTWFuYWdlckZhY3Rvcnk7XHJcbiAgICBpZiAoIWF1dGhGYWN0b3J5LmNoZWNrVXNlcigpKSB7XHJcbiAgICAgIGxvZ291dCgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLyogR2V0IHByb2plY3QgbGlzdCAqL1xyXG4gICAgdm0udXNlckRhdGEgPSB1c2VyU3RvcmUuZ2V0KCk7XHJcbiAgICB2bS5sb2dvdXQgPSAoKSA9PiB7XHJcbiAgICAgIGxvZ291dCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICBhcGlGYWN0b3J5XHJcbiAgICAgIC5saXN0QWxsUHJvamVjdHMoKVxyXG4gICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICB2bS5wcm9qZWN0TGlzdCA9IHJlc3AuZGF0YTtcclxuICAgICAgICAvKiBJbml0aWFsbHkgbG9hZCB0aGUgZmlyc3QgcHJvamVjdCBhcyBkZWZhdWx0ICovXHJcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRQcm9qZWN0ID0gcHJvamVjdFN0b3JlLmdldCgpO1xyXG5cclxuICAgICAgICB2bS5zZWxlY3RlZFByb2plY3QgPSBzZWxlY3RlZFByb2plY3QuX2lkO1xyXG5cclxuICAgICAgICB2bS5nZXRQcmltYXJ5Rm9sZGVycyhzZWxlY3RlZFByb2plY3QpO1xyXG4gICAgICAgIC8qIFNldCBiYWNrdXAgZm9sZGVycyAqL1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIHZtLnJvb3RGb2xkZXJzID0gW107XHJcblxyXG4gICAgdm0uYmFja3VwRm9sZGVycyA9IHByb2plY3RTdG9yZS5nZXQoKS5iYWNrdXBGb2xkZXJzO1xyXG5cclxuICAgIHZtLndpbmRvd0l0ZW1zID0ge1xyXG4gICAgICBmb2xkZXJEYXRhOiBcIlwiLFxyXG4gICAgICBmb2xkZXJzOiBbXSxcclxuICAgICAgZmlsZXM6IFtdXHJcbiAgICB9O1xyXG5cclxuICAgIHZtLnJlc29sdmVBc3NldEljb24gPSBhc3NldE9iaiA9PiB7XHJcbiAgICAgIGxldCBhc3NldEZvcm1hdCA9IGFzc2V0T2JqLmZvcm1hdC50cmltKCksXHJcbiAgICAgICAgaWNvbjtcclxuXHJcbiAgICAgIGlmICgvanAqZy8udGVzdChhc3NldEZvcm1hdCkpIHtcclxuICAgICAgICBpY29uID0gXCJqcGdcIjtcclxuICAgICAgfSBlbHNlIGlmICgvcG5nLy50ZXN0KGFzc2V0Rm9ybWF0KSkge1xyXG4gICAgICAgIGljb24gPSBcInBuZ1wiO1xyXG4gICAgICB9IGVsc2UgaWYgKC9wZGYvLnRlc3QoYXNzZXRGb3JtYXQpKSB7XHJcbiAgICAgICAgaWNvbiA9IFwicGRmXCI7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGljb247XHJcbiAgICB9O1xyXG4gICAgdm0uc2hvd1RyZWUgPSBmYWxzZTtcclxuICAgIHZtLmdldFByaW1hcnlGb2xkZXJzID0gKHNlbGVjdGVkUHJvamVjdCwgbGlzdCkgPT4ge1xyXG4gICAgICBpZiAobGlzdCkge1xyXG4gICAgICAgIC8qIEZpbHRlcmluZyB0aHJvdWdoIHRoZSBsaXN0IG9mIHByb2ogaWYgcGFyYW0gaXMgYSBzdHJpbmcgKi9cclxuICAgICAgICBwcm9qZWN0U3RvcmUuc2V0KFxyXG4gICAgICAgICAgbGlzdC5maWx0ZXIoeCA9PiB7XHJcbiAgICAgICAgICAgIGlmICh4Ll9pZCA9PT0gc2VsZWN0ZWRQcm9qZWN0KSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgfSlbMF1cclxuICAgICAgICApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHByb2plY3RTdG9yZS5zZXQoc2VsZWN0ZWRQcm9qZWN0KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdm0uYmFja3VwRm9sZGVycyA9IHByb2plY3RTdG9yZS5nZXQoKS5iYWNrdXBGb2xkZXJzO1xyXG5cclxuICAgICAgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgIGFwaUZhY3RvcnkuZ2V0SGllcmFyY2h5KHByb2plY3RTdG9yZS5nZXQoKS5faWQpLFxyXG4gICAgICAgIGFwaUZhY3Rvcnkudmlld1Byb2plY3RBc3NldHMocHJvamVjdFN0b3JlLmdldCgpLl9pZClcclxuICAgICAgXSlcclxuICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgIHZtLnNob3dUcmVlID0gdHJ1ZTtcclxuICAgICAgICAgIHZtLnJvb3RGb2xkZXJzID0gcmVzcFswXS5kYXRhLmRhdGEuaGllcmFyY2hpZXM7XHJcbiAgICAgICAgICB2bS5wcm9qZWN0RmlsZXMgPSByZXNwWzFdLmRhdGEuZGF0YTtcclxuICAgICAgICAgIHZtLmxvYWRGaWxlc1RvQXV0b0NvbXBsZXRlID0gJHF1ZXJ5ID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICByZXNvbHZlKHZtLnByb2plY3RGaWxlcyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyB2bS5zZWxlY3RlZFByb2plY3QgPSBcIjVhZmQ0NTIwZDA4ZDRiMzg1OWZlOWJkNlwiO1xyXG4gICAgLy8gdm0uZ2V0UHJpbWFyeUZvbGRlcnModm0uc2VsZWN0ZWRQcm9qZWN0KTtcclxuXHJcbiAgICB2bS5nZXRGb2xkZXIgPSBpZCA9PiB7XHJcbiAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAuZ2V0SGllcmFyY2h5Q2hpbGRyZW4oaWQpXHJcbiAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwLmRhdGEpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qIFN0b3JpbmcgdGhlIGZpbGUgcGF0aCBpbiBhIHN0b3JlIGR1ZSB0byBsaW1pdGF0aW9ucyBpbiB0aGUgcGx1Z2luICovXHJcblxyXG4gICAgY29uc3QgZmlsZURlc3RpbmF0aW9uID0gZ2VuZXJpY1N0b3JlKCk7XHJcblxyXG4gICAgdm0udHJlZU9wdGlvbnMgPSB7XHJcbiAgICAgIGFjY2VwdDogZnVuY3Rpb24oc291cmNlLCBkZXN0LCBkZXN0SW5kZXgpIHtcclxuICAgICAgICBpZiAoc291cmNlLmZpbGUpIHtcclxuICAgICAgICAgIGZpbGVEZXN0aW5hdGlvbi5zdG9yZShkZXN0KTtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH0sXHJcbiAgICAgIGRyYWdTdG9wOiBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgIGxldCB7IHNvdXJjZSwgZGVzdCB9ID0gZXZlbnQ7XHJcbiAgICAgICAgLyogRXhjbHVzaXZlIGZvciBmaWxlcyAqL1xyXG4gICAgICAgIGlmIChzb3VyY2Uubm9kZVNjb3BlLmZpbGUpIHtcclxuICAgICAgICAgIC8qIFN0ZXAgMTogIEdldCB0aGUgZGVzdCB2YWx1ZSBmcm9tIHRoZSBleHRlcm5hbCBzdG9yZSBhbmQgYXBwZW5kIHRvIGRlc3QgKi9cclxuICAgICAgICAgIGxldCBkZXN0aW5hdGlvbiA9IGZpbGVEZXN0aW5hdGlvbi5nZXQoKTtcclxuICAgICAgICAgIGlmICghZGVzdGluYXRpb24uJG5vZGVTY29wZSkge1xyXG4gICAgICAgICAgICAvKiBSZXR1cm4gZm9yIGludmFsaWQgZHJhZ3MgKi9cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgbGV0IHBheWxvYWQgPSB7XHJcbiAgICAgICAgICAgIGFzc2V0SWQ6IHNvdXJjZS5ub2RlU2NvcGUuZmlsZS5faWQsXHJcbiAgICAgICAgICAgIHNvdXJjZUlkOiBzb3VyY2Uubm9kZVNjb3BlLiRwYXJlbnQuJG5vZGVTY29wZS4kbW9kZWxWYWx1ZS5faWQsXHJcbiAgICAgICAgICAgIGRlc3RJZDogZGVzdGluYXRpb24uJG5vZGVTY29wZS4kbW9kZWxWYWx1ZS5faWRcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICAvKiBTdGVwIDI6IFN5bmMgd2l0aCBiYWNrZW5kIGJ1dCBkb24ndCB3YWl0IGZvciB0aGUgcmVzcG9uc2UgICovXHJcbiAgICAgICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgICAgIC5tb3ZlQXNzZXRzKHBheWxvYWQpXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgIE5vdGlmaWNhdGlvbi5zdWNjZXNzKHJlc3AuZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBpZiAoZGVzdGluYXRpb24uJG5vZGVTY29wZS4kbW9kZWxWYWx1ZS5maWxlcykge1xyXG4gICAgICAgICAgICBkZXN0aW5hdGlvbi4kbm9kZVNjb3BlLiRtb2RlbFZhbHVlLmZpbGVzLnB1c2goXHJcbiAgICAgICAgICAgICAgc291cmNlLm5vZGVTY29wZS5maWxlXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkZXN0aW5hdGlvbi4kbm9kZVNjb3BlLiRtb2RlbFZhbHVlLmZpbGVzID0gW3NvdXJjZS5ub2RlU2NvcGUuZmlsZV07XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLyogU3RlcCAzOiBSZW1vdmUgdGhlIGZpbGUgZnJvbSB0aGUgc291cmNlIGZvbGRlciAqL1xyXG4gICAgICAgICAgc291cmNlLm5vZGVTY29wZS4kcGFyZW50LiRub2RlU2NvcGUuJG1vZGVsVmFsdWUuZmlsZXMgPSBzb3VyY2Uubm9kZVNjb3BlLiRwYXJlbnQuJG5vZGVTY29wZS4kbW9kZWxWYWx1ZS5maWxlcy5maWx0ZXIoXHJcbiAgICAgICAgICAgIHggPT4geC5faWQgIT09IHNvdXJjZS5ub2RlU2NvcGUuZmlsZS5faWRcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBkcm9wcGVkOiBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgIGxldCB7IHNvdXJjZSwgZGVzdCB9ID0gZXZlbnQ7XHJcbiAgICAgICAgbGV0IHBheWxvYWQ7XHJcblxyXG4gICAgICAgIC8qIEZvciBtb3ZpbmcgZm9sZGVycyAqL1xyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBkZXN0Lm5vZGVzU2NvcGUuJG5vZGVTY29wZSA9PT0gbnVsbCAmJlxyXG4gICAgICAgICAgc291cmNlLm5vZGVTY29wZS4kcGFyZW50Tm9kZVNjb3BlID09PSBudWxsXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAvKiBJZ25vcmUgc2FtZSBsZXZlbCBkcmFncyAqL1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICBkZXN0Lm5vZGVzU2NvcGUuJG5vZGVTY29wZSA9PT0gbnVsbCAmJlxyXG4gICAgICAgICAgc291cmNlLm5vZGVTY29wZS4kcGFyZW50Tm9kZVNjb3BlICE9PSBudWxsXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAvKiBEcmFnZ2luZyB0byByb290ICovXHJcbiAgICAgICAgICBwYXlsb2FkID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAxLFxyXG4gICAgICAgICAgICBoaWVyYXJjaHlJZDogc291cmNlLm5vZGVTY29wZS4kbW9kZWxWYWx1ZS5faWQsXHJcbiAgICAgICAgICAgIHBhcmVudElkOiBzb3VyY2Uubm9kZVNjb3BlLiRwYXJlbnROb2RlU2NvcGUuJG1vZGVsVmFsdWUuX2lkLFxyXG4gICAgICAgICAgICBwcm9qZWN0SWQ6IHByb2plY3RTdG9yZS5nZXQoKS5faWRcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgIGRlc3Qubm9kZXNTY29wZS4kbm9kZVNjb3BlICE9PSBudWxsICYmXHJcbiAgICAgICAgICBzb3VyY2Uubm9kZVNjb3BlLiRwYXJlbnROb2RlU2NvcGUgPT09IG51bGxcclxuICAgICAgICApIHtcclxuICAgICAgICAgIC8qIERyYWdnaW5nIGZyb20gcm9vdCAqL1xyXG4gICAgICAgICAgcGF5bG9hZCA9IHtcclxuICAgICAgICAgICAgdHlwZTogMixcclxuICAgICAgICAgICAgaGllcmFyY2h5SWQ6IHNvdXJjZS5ub2RlU2NvcGUuJG1vZGVsVmFsdWUuX2lkLFxyXG4gICAgICAgICAgICBwcm9qZWN0SWQ6IHByb2plY3RTdG9yZS5nZXQoKS5faWQsXHJcbiAgICAgICAgICAgIGRlc3RJZDogZGVzdC5ub2Rlc1Njb3BlLiRub2RlU2NvcGUuJG1vZGVsVmFsdWUuX2lkXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvKiBEcmFnZ2luZyBiZXR3ZWVuIHN1YiBmb2xkZXJzICovXHJcbiAgICAgICAgICBwYXlsb2FkID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAzLFxyXG4gICAgICAgICAgICBoaWVyYXJjaHlJZDogc291cmNlLm5vZGVTY29wZS4kbW9kZWxWYWx1ZS5faWQsXHJcbiAgICAgICAgICAgIHBhcmVudElkOiBzb3VyY2Uubm9kZVNjb3BlLiRwYXJlbnROb2RlU2NvcGUuJG1vZGVsVmFsdWUuX2lkLFxyXG4gICAgICAgICAgICBkZXN0SWQ6IGRlc3Qubm9kZXNTY29wZS4kbm9kZVNjb3BlLiRtb2RlbFZhbHVlLl9pZFxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAgIC5kcmFnTW92ZU5vZGVzKHBheWxvYWQpXHJcbiAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgTm90aWZpY2F0aW9uLnN1Y2Nlc3MocmVzcC5kYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCByb290Rm9sZGVyU3RvcmUgPSBnZW5lcmljU3RvcmUoKTtcclxuXHJcbiAgICB2bS5zZXRSb290Rm9sZGVyID0gb2JqID0+IHtcclxuICAgICAgcm9vdEZvbGRlclN0b3JlLnN0b3JlKG9iaik7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qIGFkZCBtb2RhbCBzZXR0aW5ncyAqL1xyXG4gICAgdm0uYWRkTW9kYWxBY3RpdmVUYWIgPSAwO1xyXG4gICAgJChcIiNhZGRNb2RhbFwiKS5vbihcImhpZGUuYnMubW9kYWxcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZtLmZpbGVOYW1lcyA9IFtdO1xyXG4gICAgICB2bS5hZGRNb2RhbEFjdGl2ZVRhYiA9IDA7XHJcbiAgICB9KTtcclxuXHJcbiAgICB2bS5hZGRQcmltYXJ5Rm9sZGVyID0gKG5hbWUsIHByb2plY3RJZCkgPT4ge1xyXG4gICAgICBsZXQgcGF5bG9hZCA9IHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGlzUGFyZW50OiB0cnVlLFxyXG4gICAgICAgIHByb2plY3RJZDogcHJvamVjdElkXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IG5vZGVPYmogPSByb290Rm9sZGVyU3RvcmUuZ2V0KCk7XHJcbiAgICAgICQoXCIjYWRkTW9kYWxcIikubW9kYWwoXCJoaWRlXCIpO1xyXG4gICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgLmFkZEhpZXJhcmNoeShwYXlsb2FkKVxyXG4gICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgbm9kZU9iai4kbm9kZXNTY29wZS4kbW9kZWxWYWx1ZS5wdXNoKHJlc3AuZGF0YS5kYXRhKTtcclxuICAgICAgICAgIE5vdGlmaWNhdGlvbi5zdWNjZXNzKHJlc3AuZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFwicm9vdGZvbGRlclwiLCByb290Rm9sZGVyU3RvcmUuZ2V0KCkpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLm9wZW5BZGRNb2RhbCA9IChzb3VyY2UsIG9iaikgPT4ge1xyXG4gICAgICB2bS5hZGRNb2RhbFNvdXJjZSA9IHNvdXJjZTtcclxuICAgICAgdm0ubm9kZU9iaiA9IG9iajtcclxuICAgICAgJChcIiNhZGRNb2RhbFwiKS5tb2RhbChcInNob3dcIik7XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLnNob3dMb2FkZXIgPSBmYWxzZTtcclxuXHJcbiAgICB2bS50b2dnbGVGb2xkZXIgPSAoZm9sZGVyLCBpY29uLCBub2RlKSA9PiB7XHJcbiAgICAgIGlmIChmb2xkZXIuJG1vZGVsVmFsdWUuYmFja3VwKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKGZvbGRlci4kdHJlZVNjb3BlLiRlbGVtZW50WzBdKVxyXG4gICAgICAvLyBjb25zb2xlLmxvZygkKGZvbGRlci4kZWxlbWVudFswXSkuZmluZCgnLnJvdyAuZmlsZS1saXN0aW5nJylbMF0uYWRkQ2xhc3MoJ2JnLWRhcmsnKSlcclxuICAgICAgJChmb2xkZXIuJHRyZWVTY29wZS4kZWxlbWVudFswXSlcclxuICAgICAgICAuZmluZChcIi5mb2xkZXItb3BlblwiKVxyXG4gICAgICAgIC5yZW1vdmVDbGFzcyhcImZvbGRlci1vcGVuXCIpO1xyXG4gICAgICAkKGZvbGRlci4kZWxlbWVudFswXSlcclxuICAgICAgICAuZmluZChcIi5yb3dcIilcclxuICAgICAgICAuZmlyc3QoKVxyXG4gICAgICAgIC5hZGRDbGFzcyhcImZvbGRlci1vcGVuXCIpO1xyXG5cclxuICAgICAgdm0uc2hvd0xvYWRlciA9IHRydWU7XHJcbiAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAudmlld0hpZXJhcmNoeShmb2xkZXIuJG1vZGVsVmFsdWUuX2lkKVxyXG4gICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgLyogQXBwZW5kIGZpbGVzIHRvIHRoZSBmb2xkZXIgKi9cclxuICAgICAgICAgIHZtLndpbmRvd0l0ZW1zID0ge1xyXG4gICAgICAgICAgICBmb2xkZXJEYXRhOiBmb2xkZXIsXHJcbiAgICAgICAgICAgIGZvbGRlcnM6IGZvbGRlci4kbW9kZWxWYWx1ZS5jaGlsZHJlbixcclxuICAgICAgICAgICAgZmlsZXM6IHJlc3AuZGF0YS5maWxlc1xyXG4gICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICB2bS5icmVhZENydW1iTGlzdCA9IHJlc3AuZGF0YS5icmVhZGNydW1icztcclxuICAgICAgICAgIHZtLnNob3dMb2FkZXIgPSBmYWxzZTtcclxuICAgICAgICAgIGZvbGRlci4kbW9kZWxWYWx1ZS5maWxlcyA9IHJlc3AuZGF0YS5maWxlcztcclxuICAgICAgICAgIG5hdmlnYXRpb25TdGFjay5wdXNoKGZvbGRlcik7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgaWYgKGZvbGRlci5jb2xsYXBzZWQpIHtcclxuICAgICAgICBmb2xkZXIudG9nZ2xlKCk7XHJcbiAgICAgIH0gZWxzZSBpZiAoaWNvbikge1xyXG4gICAgICAgIG5hdmlnYXRpb25TdGFjay5wdXNoKGZvbGRlcik7XHJcbiAgICAgICAgLy8gZm9sZGVyLnRvZ2dsZSgpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IG5hdmlnYXRpb25TdGFjayA9IGZpbGVNYW5hZ2VyRmFjdG9yeS5uYXZpZ2F0aW9uU3RhY2soKTtcclxuXHJcbiAgICB2bS5uYXZpZ2F0ZSA9IGZvcndhcmQgPT4ge1xyXG4gICAgICBsZXQgZm9sZGVyID0gZm9yd2FyZFxyXG4gICAgICAgID8gbmF2aWdhdGlvblN0YWNrLmZvcndhcmQoKVxyXG4gICAgICAgIDogbmF2aWdhdGlvblN0YWNrLmJhY2t3YXJkKCk7XHJcblxyXG4gICAgICAvLyBpZiAoZm9sZGVyID8gKGZvbGRlci5jb2xsYXBzZWQgPyB0cnVlIDogZmFsc2UpIDogZmFsc2UpIHtcclxuICAgICAgaWYgKGZvbGRlcikge1xyXG4gICAgICAgIHZtLnNob3dMb2FkZXIgPSB0cnVlO1xyXG4gICAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAgIC52aWV3SGllcmFyY2h5KGZvbGRlci4kbW9kZWxWYWx1ZS5faWQpXHJcbiAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgLyogQXBwZW5kIGZpbGVzIHRvIHRoZSBmb2xkZXIgKi9cclxuICAgICAgICAgICAgdm0ud2luZG93SXRlbXMgPSB7XHJcbiAgICAgICAgICAgICAgZm9sZGVyRGF0YTogZm9sZGVyLFxyXG4gICAgICAgICAgICAgIGZvbGRlcnM6IGZvbGRlci4kbW9kZWxWYWx1ZS5jaGlsZHJlbixcclxuICAgICAgICAgICAgICBmaWxlczogcmVzcC5kYXRhLmZpbGVzXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZtLnNob3dMb2FkZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgZm9sZGVyLiRtb2RlbFZhbHVlLmZpbGVzID0gcmVzcC5kYXRhLmZpbGVzO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB2bS5vcGVuRm9sZGVyID0gaWQgPT4ge1xyXG4gICAgICAvKiBHZXQgdGhlIG5vZGUgb2JqIGZyb20gdGhlIHdpbmRvdyBpdGVtIG9iaiAqL1xyXG4gICAgICBsZXQgZm9sZGVyRGF0YSA9IHZtLndpbmRvd0l0ZW1zLmZvbGRlckRhdGFcclxuICAgICAgICAuY2hpbGROb2RlcygpXHJcbiAgICAgICAgLnJlZHVjZSgoYWNjLCB4KSA9PiB7XHJcbiAgICAgICAgICBpZiAoeC4kbW9kZWxWYWx1ZS5faWQgPT09IGlkKSB7XHJcbiAgICAgICAgICAgIGFjYyA9IHg7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICAgIH0sIG51bGwpO1xyXG5cclxuICAgICAgdm0uc2hvd0xvYWRlciA9IHRydWU7XHJcbiAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAudmlld0hpZXJhcmNoeShpZClcclxuICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgIG5hdmlnYXRpb25TdGFjay5wdXNoKGZvbGRlckRhdGEpO1xyXG4gICAgICAgICAgLyogQXBwZW5kIGZpbGVzIHRvIHRoZSBmb2xkZXIgKi9cclxuICAgICAgICAgIHZtLndpbmRvd0l0ZW1zID0ge1xyXG4gICAgICAgICAgICBmb2xkZXJEYXRhOiBmb2xkZXJEYXRhLFxyXG4gICAgICAgICAgICBmb2xkZXJzOiByZXNwLmRhdGEuZm9sZGVycyxcclxuICAgICAgICAgICAgZmlsZXM6IHJlc3AuZGF0YS5maWxlc1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIHZtLmJyZWFkQ3J1bWJMaXN0ID0gcmVzcC5kYXRhLmJyZWFkY3J1bWJzO1xyXG4gICAgICAgICAgdm0uc2hvd0xvYWRlciA9IGZhbHNlO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLmFkZEZvbGRlciA9IChuYW1lLCBmb2xkZXIpID0+IHtcclxuICAgICAgJChcIiNhZGRNb2RhbFwiKS5tb2RhbChcImhpZGVcIik7XHJcbiAgICAgIGxldCBwYXlsb2FkID0ge1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgaXNQYXJlbnQ6IGZhbHNlLFxyXG4gICAgICAgIHBhcmVudDogZm9sZGVyXHJcbiAgICAgIH07XHJcbiAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAuYWRkSGllcmFyY2h5KHBheWxvYWQpXHJcbiAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICBmb2xkZXIuY2hpbGRyZW4ucHVzaChyZXNwLmRhdGEuZGF0YSk7XHJcbiAgICAgICAgICBOb3RpZmljYXRpb24uc3VjY2VzcyhyZXNwLmRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdm0uYWRkRmlsZVRvSGllcmFyY2h5ID0gKGFzc2V0cywgZm9sZGVyKSA9PiB7XHJcbiAgICAgICQoXCIjYWRkTW9kYWxcIikubW9kYWwoXCJoaWRlXCIpO1xyXG4gICAgICBjb25zdCBhc3NldElkID0gYXNzZXRzLm1hcCh4ID0+IHguX2lkKTtcclxuICAgICAgY29uc3QgaGllcmFyY2h5SWQgPSBmb2xkZXIuX2lkO1xyXG4gICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgLmFkZEZpbGVUb0hpZXJhcmNoeSh7XHJcbiAgICAgICAgICBhc3NldElkLFxyXG4gICAgICAgICAgaGllcmFyY2h5SWRcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2cocmVzcCk7XHJcbiAgICAgICAgICBOb3RpZmljYXRpb24uc3VjY2VzcyhyZXNwLmRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdm0uZGVsZXRlRmlsZSA9IChpZCwgZm9sZGVyRGF0YSkgPT4ge1xyXG4gICAgICAkKFwiI2ZpbGVWaWV3XCIpLm1vZGFsKFwiaGlkZVwiKTtcclxuICAgICAgYXBpRmFjdG9yeVxyXG4gICAgICAgIC5kZWxldGVBc3NldHMoe1xyXG4gICAgICAgICAgYXNzZXRJZDogaWRcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgdm0uc2hvd0xvYWRlciA9IHRydWU7XHJcbiAgICAgICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgICAgIC52aWV3SGllcmFyY2h5KGZvbGRlckRhdGEuJG1vZGVsVmFsdWUuX2lkKVxyXG4gICAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgICAvKiBBcHBlbmQgZmlsZXMgdG8gdGhlIGZvbGRlciAqL1xyXG4gICAgICAgICAgICAgIHZtLndpbmRvd0l0ZW1zID0ge1xyXG4gICAgICAgICAgICAgICAgZm9sZGVyRGF0YTogZm9sZGVyRGF0YSxcclxuICAgICAgICAgICAgICAgIGZvbGRlcnM6IGZvbGRlckRhdGEuJG1vZGVsVmFsdWUuY2hpbGRyZW4sXHJcbiAgICAgICAgICAgICAgICBmaWxlczogcmVzcC5kYXRhLmZpbGVzXHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICB2bS5zaG93TG9hZGVyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgZm9sZGVyRGF0YS4kbW9kZWxWYWx1ZS5maWxlcyA9IHJlc3AuZGF0YS5maWxlcztcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKiBGaWxlICAgaGFuZGxpbmcgKi9cclxuICAgIHZtLnVwbG9hZFN0YXRlID0gZmFsc2U7XHJcbiAgICB2bS5jb21wbGV0ZWRBbGwgPSBmYWxzZTtcclxuXHJcbiAgICB2bS5maWxlVXBkYXRlZCA9IChmaWxlcywgZXZlbnQpID0+IHtcclxuICAgICAgLyogUmVmcmVzaCB1cGxvYWQgc3RhdGVzIHdpdGggbmV3IGZpbGVzICovXHJcbiAgICAgIGxldCBmaWxlT2JqID0gZXZlbnQudGFyZ2V0LmZpbGVzO1xyXG4gICAgICB2bS51cGxvYWRTdGF0ZSA9IGZhbHNlO1xyXG4gICAgICB2bS5jb21wbGV0ZWRBbGwgPSBmYWxzZTtcclxuXHJcbiAgICAgIHZtLmZpbGVOYW1lcyA9IE9iamVjdC5rZXlzKGZpbGVPYmopLm1hcCh4ID0+IHtcclxuICAgICAgICBsZXQgdmFsID0gZmlsZU9ialt4XTtcclxuICAgICAgICB2YWwucHJvZ3Jlc3MgPSAwO1xyXG4gICAgICAgIHZhbC5pc1BhdXNlZCA9IGZhbHNlO1xyXG4gICAgICAgIHZhbC5jb21wbGV0ZWQgPSBmYWxzZTtcclxuICAgICAgICB2YWwuYWJvcnRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHZhbC5wbGFuID0gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIHZhbDtcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdm0udG9nZ2xlVXBsb2FkVmlld01heGltaXplID0gdmFsID0+IHtcclxuICAgICAgdm0udXBsb2FkVmlld01heGltaXplID0gIXZhbDtcclxuICAgIH07XHJcblxyXG4gICAgLyogQ2FwdHVyZSByZWxvYWQgYW5kIGJhY2sgZXZlbnRzICovXHJcblxyXG4gICAgLy8gd2luZG93Lm9uYmVmb3JldW5sb2FkID0gZnVuY3Rpb24oZSkge1xyXG4gICAgLy8gICAvLyB2bS51cGxvYWRTdGF0ZSAmJlxyXG4gICAgLy8gICByZXR1cm4gKGZ1bmN0aW9uKCkge1xyXG4gICAgLy8gICAgIGlmICh3aW5kb3cuY29uZmlybShcIkFyZSB5b3Ugc3VyZT8gRmlsZSB1cGxvYWQgd2lsbCBiZSBhYm9ydGVkXCIpKSB7XHJcbiAgICAvLyAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gICB9KSgpO1xyXG4gICAgLy8gfTtcclxuXHJcbiAgICAvKiBNYWluIHVwbG9hZCBmdW5jdGlvbmFsaXR5ICovXHJcblxyXG4gICAgdm0ucHJlVXBsb2FkID0gKGZpbGVzLCBmb2xkZXIpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZmlsZXMpO1xyXG4gICAgICAkKFwiI2FkZE1vZGFsXCIpLm1vZGFsKFwiaGlkZVwiKTtcclxuICAgICAgZmlsZU1hbmFnZXJGYWN0b3J5XHJcbiAgICAgICAgLmNoZWNrRHVwbGljYXRlRmlsZXMoZmlsZXMsIGZvbGRlci5faWQpXHJcbiAgICAgICAgLnRoZW4ocHJvY2Vzc2VkID0+IHtcclxuICAgICAgICAgIGlmIChwcm9jZXNzZWQuZHVwbGljYXRlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdm0ucHJlVXBsb2FkRmlsZXMgPSBwcm9jZXNzZWQ7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHZtLnByZVVwbG9hZEZpbGVzKTtcclxuICAgICAgICAgICAgJChcIiN2ZXJzaW9uaW5nTW9kYWxcIikubW9kYWwoXCJzaG93XCIpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocHJvY2Vzc2VkKTtcclxuICAgICAgICAgICAgdm0udXBsb2FkRmlsZShwcm9jZXNzZWQsIHByb2plY3RTdG9yZS5nZXQoKS5faWQsIGZvbGRlcik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdm0ucHJvY2Vzc0R1cGxpY2F0ZUZpbGVOYW1lID0gZmlsZSA9PiB7XHJcbiAgICAgIGlmIChmaWxlLmFjdGlvbiA9PT0gXCJ2ZXJzaW9uXCIpIHtcclxuICAgICAgICBmaWxlLmFzc2V0TmFtZSA9IGZpbGVNYW5hZ2VyRmFjdG9yeS5nZW5lcmF0ZVZlcnNpb24oZmlsZS5uYW1lKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBmaWxlLmFzc2V0TmFtZSA9IGZpbGUubmFtZTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB2bS51cGxvYWRGaWxlID0gKGZpbGVzLCBwcm9qZWN0SWQsIGZvbGRlcikgPT4ge1xyXG4gICAgICAvKiBWYWxpZGF0ZSBkdXBsaWNhdGUgZmlsZXMgKi9cclxuICAgICAgaWYgKGZpbGVNYW5hZ2VyRmFjdG9yeS5jaGVja05hbWVDaGFuZ2UoZmlsZXMuZHVwbGljYXRlcykpIHtcclxuICAgICAgICBOb3RpZmljYXRpb24ud2FybmluZyhcIkZpbGUgbmFtZXMgY2FuJ3QgYmUgdGhlIHNhbWVcIik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIC8qIENvbGxhdGUgZmlsZXMgKi9cclxuICAgICAgJChcIiN2ZXJzaW9uaW5nTW9kYWxcIikubW9kYWwoXCJoaWRlXCIpO1xyXG4gICAgICBmaWxlcyA9IFsuLi5maWxlcy5kdXBsaWNhdGVzLCAuLi5maWxlcy51cGxvYWRGaWxlc107XHJcbiAgICAgIHZtLnVwbG9hZFN0YXRlID0gdHJ1ZTtcclxuICAgICAgJChcIiNhZGRNb2RhbFwiKS5tb2RhbChcImhpZGVcIik7XHJcbiAgICAgIHZtLnVwbG9hZFZpZXdGaWxlcyA9IGZpbGVNYW5hZ2VyRmFjdG9yeS5zcGxpdERlc3RpbmF0aW9uKGZpbGVzKTtcclxuICAgICAgLyogQ2F0ZWdvcml6ZSBmaWxlcyAqL1xyXG4gICAgICBhbmd1bGFyLmZvckVhY2godm0udXBsb2FkVmlld0ZpbGVzLnMzLCB4ID0+IHtcclxuICAgICAgICAvKiBBdHRhY2ggZXZlbnRzIGFuZCBwcm9wcyB0byBmaWxlT2JqIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSB2aWV3ICovXHJcbiAgICAgICAgbGV0IHVwbG9hZEhhbmRsZXIgPSBldmFwb3JhdGUgPT4ge1xyXG4gICAgICAgICAgLyogdXBsb2FkIHRvIHMzIGlmIHZhbHVlIGlzIGxlc3MgdGhhbiAzICovXHJcbiAgICAgICAgICB4LnBhdXNlID0gdXBsb2FkRmFjdG9yeS5wYXVzZS5iaW5kKGV2YXBvcmF0ZSwgeCk7XHJcbiAgICAgICAgICB4LnJlc3VtZSA9IHVwbG9hZEZhY3RvcnkucmVzdW1lLmJpbmQoZXZhcG9yYXRlLCB4KTtcclxuICAgICAgICAgIHguYWJvcnQgPSB1cGxvYWRGYWN0b3J5LmFib3J0LmJpbmQoZXZhcG9yYXRlLCB4KTtcclxuICAgICAgICAgIGxldCBhZGRDb25maWcgPSB7XHJcbiAgICAgICAgICAgIG5hbWU6IHgubmFtZSxcclxuICAgICAgICAgICAgZmlsZTogeCxcclxuICAgICAgICAgICAgcHJvZ3Jlc3M6IChwLCBzdGF0cykgPT4ge1xyXG4gICAgICAgICAgICAgIC8qIEFXUyBwcm9ncmVzcyBwZXJjZW50YWdlIGZhbGxzIGJhY2sgc29tZXRpbWVzIGR1ZSB0byBtaXNzaW5nIGZyYWdtZW50YXRpb24uIFxyXG4gICAgICAgICAgICAgIFVwZGF0ZSBwcm9ncmVzcyB2YWx1ZSBvbmx5IHdoZW4gaXQncyBoaWdoZXIgdGhhbiB0aGUgcHJldmlvdXMgdmFsdWUgKi9cclxuICAgICAgICAgICAgICB4LnByb2dyZXNzID1cclxuICAgICAgICAgICAgICAgIHgucHJvZ3Jlc3MgPiBNYXRoLnJvdW5kKHAgKiAxMDApXHJcbiAgICAgICAgICAgICAgICAgID8geC5wcm9ncmVzc1xyXG4gICAgICAgICAgICAgICAgICA6IE1hdGgucm91bmQocCAqIDEwMCk7XHJcbiAgICAgICAgICAgICAgLyogQ2hlY2sgY29tcGxldGlvbiAqL1xyXG4gICAgICAgICAgICAgIHZtLmNvbXBsZXRlZEFsbCA9IGZpbGVNYW5hZ2VyRmFjdG9yeS5jaGVja1VwbG9hZENvbXBsZXRpb24oXHJcbiAgICAgICAgICAgICAgICB2bS51cGxvYWRWaWV3RmlsZXNcclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgIC8qIFJlZnJlc2ggdmlldyB3aXRoIHNjb3BlID4gYXBwbHkgKi9cclxuICAgICAgICAgICAgICAkdGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuJGFwcGx5KCk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNvbXBsZXRlOiAoX3hociwgYXdzS2V5KSA9PiB7XHJcbiAgICAgICAgICAgICAgeC5jb21wbGV0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIC8qIFJlZnJlc2ggdmlldyB3aXRoIHNjb3BlID4gYXBwbHkgKi9cclxuICAgICAgICAgICAgICAkdGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuJGFwcGx5KCk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDb21wbGV0ZSFcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgZXZhcG9yYXRlLmFkZChhZGRDb25maWcpLnRoZW4oXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKGF3c09iamVjdEtleSkge1xyXG4gICAgICAgICAgICAgIC8qIFN1Y2Nlc3MgYmxvY2sgKi9cclxuICAgICAgICAgICAgICBsZXQgcGF5bG9hZCA9IHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IGZpbGVNYW5hZ2VyRmFjdG9yeS5yZXNvbHZlRGVzdFR5cGUoeCksXHJcbiAgICAgICAgICAgICAgICBwcm9qZWN0SWQ6IHByb2plY3RTdG9yZS5nZXQoKS5faWQsXHJcbiAgICAgICAgICAgICAgICBmb2xkZXJJZDogZm9sZGVyLl9pZCxcclxuICAgICAgICAgICAgICAgIGFzc2V0RGF0YToge1xyXG4gICAgICAgICAgICAgICAgICBhc3NldE5hbWU6IHguYXNzZXROYW1lLFxyXG4gICAgICAgICAgICAgICAgICBidWNrZXQ6IFwiM2RmaWxlc2RhdGFcIixcclxuICAgICAgICAgICAgICAgICAga2V5OiBgdGVzdC8ke3gubmFtZX1gLFxyXG4gICAgICAgICAgICAgICAgICBtaW1ldHlwZTogeC50eXBlLFxyXG4gICAgICAgICAgICAgICAgICBieXRlczogeC5zaXplLFxyXG4gICAgICAgICAgICAgICAgICBwbGFuRG9jdW1lbnQ6IHgucGxhblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgYXBpRmFjdG9yeVxyXG4gICAgICAgICAgICAgICAgLm5ld0ZpbGVVcGxvYWQocGF5bG9hZClcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBpZiAoZm9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9sZGVyLmZpbGVzLnB1c2gocmVzcC5kYXRhLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIE5vdGlmaWNhdGlvbi5zdWNjZXNzKFwiRmlsZSBzdWNjZXNzZnVsbHkgdXBsb2FkZWRcIik7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGaWxlIHN1Y2Nlc3NmdWxseSB1cGxvYWRlZCB0bzpcIiwgYXdzT2JqZWN0S2V5KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24ocmVhc29uKSB7XHJcbiAgICAgICAgICAgICAgLyogRmFpbHVyZSBibG9jayAqL1xyXG4gICAgICAgICAgICAgIHguYWJvcnRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgLyogQ2hlY2sgY29tcGxldGlvbiAqL1xyXG4gICAgICAgICAgICAgIHZtLmNvbXBsZXRlZEFsbCA9IGZpbGVNYW5hZ2VyRmFjdG9yeS5jaGVja1VwbG9hZENvbXBsZXRpb24oXHJcbiAgICAgICAgICAgICAgICB2bS51cGxvYWRWaWV3RmlsZXNcclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgIC8qIFJlZnJlc2ggdmlldyB3aXRoIHNjb3BlID4gYXBwbHkgKi9cclxuICAgICAgICAgICAgICAkdGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuJGFwcGx5KCk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGaWxlIGRpZCBub3QgdXBsb2FkIHN1Y2Vzc2Z1bGx5OlwiLCByZWFzb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHVwbG9hZEZhY3Rvcnkuc3RhcnQodXBsb2FkSGFuZGxlcik7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKHZtLnVwbG9hZFZpZXdGaWxlcy5jbG91ZGluYXJ5Lmxlbmd0aCkge1xyXG4gICAgICAgIGxldCBjbG91ZGluYXJ5UGF5bG9hZCA9IHtcclxuICAgICAgICAgIGZpbGVzOiB2bS51cGxvYWRWaWV3RmlsZXMuY2xvdWRpbmFyeSxcclxuICAgICAgICAgIC8qIFNlbmQgYXNzZXQgbmFtZXMgc2VwYXJhdGVseSAqL1xyXG4gICAgICAgICAgYXNzZXROYW1lczogdm0udXBsb2FkVmlld0ZpbGVzLmNsb3VkaW5hcnkubWFwKHggPT4geC5hc3NldE5hbWUpLFxyXG4gICAgICAgICAgcHJvamVjdElkLFxyXG4gICAgICAgICAgaGllcmFyY2h5SWQ6IGZvbGRlci5faWRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgICAudXBsb2FkRmlsZUluRmlsZU1hbmFnZXIoY2xvdWRpbmFyeVBheWxvYWQpXHJcbiAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgdm0udXBsb2FkVmlld0ZpbGVzLmNsb3VkaW5hcnkgPSB2bS51cGxvYWRWaWV3RmlsZXMuY2xvdWRpbmFyeS5tYXAoXHJcbiAgICAgICAgICAgICAgeCA9PiB7XHJcbiAgICAgICAgICAgICAgICB4LmNvbXBsZXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geDtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIC8qIENoZWNrIGNvbXBsZXRpb24gKi9cclxuICAgICAgICAgICAgdm0uY29tcGxldGVkQWxsID0gZmlsZU1hbmFnZXJGYWN0b3J5LmNoZWNrVXBsb2FkQ29tcGxldGlvbihcclxuICAgICAgICAgICAgICB2bS51cGxvYWRWaWV3RmlsZXNcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgLyogUmVmcmVzaCB2aWV3IHdpdGggc2NvcGUgPiBhcHBseSAqL1xyXG4gICAgICAgICAgICAkdGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChmb2xkZXIpIHtcclxuICAgICAgICAgICAgICByZXNwLmRhdGEuZGF0YS5mb3JFYWNoKHggPT4ge1xyXG4gICAgICAgICAgICAgICAgZm9sZGVyLmZpbGVzLnB1c2goeCk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIE5vdGlmaWNhdGlvbi5zdWNjZXNzKHJlc3AuZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdm0uY2xvc2VVcGxvYWRWaWV3ID0gKCkgPT4ge1xyXG4gICAgICB2bS51cGxvYWRTdGF0ZSA9IGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICB2bS5maWxlVmlldyA9IGZpbGUgPT4ge1xyXG4gICAgICAkKFwiI2ZpbGVWaWV3XCIpLm1vZGFsKFwic2hvd1wiKTtcclxuICAgICAgdm0ucHJldmlld0RhdGEgPSBmaWxlO1xyXG4gICAgICB2bS5wcmV2aWV3RGF0YS5jdXN0b21VcmwgPVxyXG4gICAgICAgIGZpbGUuZm9ybWF0ID09PSBcInBkZlwiXHJcbiAgICAgICAgICA/IGZpbGUuc2VjdXJlX3VybC5yZXBsYWNlKC9cXC5wZGYvLCBcIi5wbmdcIilcclxuICAgICAgICAgIDogZmlsZS5zZWN1cmVfdXJsO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKiBUb2dnbGluZyBlZGl0ICovXHJcblxyXG4gICAgdm0uZWRpdEVuYWJsZWQgPSBmYWxzZTtcclxuICAgIHZtLnRvZ2dsZUVkaXQgPSBib29sID0+IHtcclxuICAgICAgdm0uZWRpdEVuYWJsZWQgPSBib29sO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKiBDb250ZXh0IG1lbnUgZnVuY3Rpb25hbGl0eSAqL1xyXG4gICAgJHNjb3BlLmJhY2tCdG5WaWV3ID0gZmFsc2U7XHJcbiAgICB2bS5jb250ZXh0TWVudU9wdGlvbnMgPSB7XHJcbiAgICAgIGV4cGxvcmVyOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdGV4dDogXCJQYXN0ZSBpdGVtKHMpXCIsXHJcbiAgICAgICAgICBjbGljazogZnVuY3Rpb24oJGl0ZW1TY29wZSwgJGV2ZW50LCBtb2RlbFZhbHVlLCB0ZXh0LCAkbGkpIHtcclxuICAgICAgICAgICAgaWYgKHZtLndpbmRvd0l0ZW1zLmZvbGRlckRhdGEpIHtcclxuICAgICAgICAgICAgICBjbGlwQm9hcmRcclxuICAgICAgICAgICAgICAgIC5wYXN0ZSh2bS53aW5kb3dJdGVtcy5mb2xkZXJEYXRhLiRtb2RlbFZhbHVlLl9pZClcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBpZiAocmVzcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAgICAgICAgICAgICAgIC52aWV3SGllcmFyY2h5KHZtLndpbmRvd0l0ZW1zLmZvbGRlckRhdGEuJG1vZGVsVmFsdWUuX2lkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIEFwcGVuZCBmaWxlcyB0byB0aGUgZm9sZGVyICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZtLndpbmRvd0l0ZW1zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvbGRlckRhdGE6IHZtLndpbmRvd0l0ZW1zLmZvbGRlckRhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9sZGVyczogcmVzcC5kYXRhLmZvbGRlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZXM6IHJlc3AuZGF0YS5maWxlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBOb3RpZmljYXRpb24ud2FybmluZyhcIkNhbm5vdCBwYXN0ZSBmaWxlIGluIHJvb3QgbG9jYXRpb25cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIF0sXHJcbiAgICAgIGZpbGU6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICB0ZXh0OiBcIkNvcHlcIixcclxuICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigkaXRlbVNjb3BlLCAkZXZlbnQsIG1vZGVsVmFsdWUsIHRleHQsICRsaSkge1xyXG4gICAgICAgICAgICBjbGlwQm9hcmQuY29weSgkaXRlbVNjb3BlLmZpbGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdGV4dDogXCJDdXRcIixcclxuICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigkaXRlbVNjb3BlLCAkZXZlbnQsIG1vZGVsVmFsdWUsIHRleHQsICRsaSkge1xyXG4gICAgICAgICAgICBjbGlwQm9hcmQuY3V0KFxyXG4gICAgICAgICAgICAgICRpdGVtU2NvcGUuZmlsZSxcclxuICAgICAgICAgICAgICB2bS53aW5kb3dJdGVtcy5mb2xkZXJEYXRhLiRtb2RlbFZhbHVlLl9pZFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdGV4dDogXCJNb3ZlIHRvXCIsXHJcbiAgICAgICAgICBjbGljazogZnVuY3Rpb24oJGl0ZW1TY29wZSkge1xyXG4gICAgICAgICAgICB2bS5wZGZvbmx5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZtLnBpY2tlckZvbGRlcnMgPSBhbmd1bGFyLmNvcHkodm0ucm9vdEZvbGRlcnMpO1xyXG4gICAgICAgICAgICB2bS5tb3ZlVG9Tb3VyY2VGaWxlID0gJGl0ZW1TY29wZS5maWxlO1xyXG4gICAgICAgICAgICAkKFwiI21vdmVUb1wiKS5tb2RhbChcInNob3dcIik7XHJcbiAgICAgICAgICAgICQoXCIucm9vdEZvbGRlclwiKS5zaG93KCk7XHJcbiAgICAgICAgICAgICQoXCIuY2hpbGRGb2xkZXJcIikuaGlkZSgpO1xyXG4gICAgICAgICAgICB2bS5tb3ZldG8gPSBcIm1vdmUgVG9cIjtcclxuICAgICAgICAgICAgJHNjb3BlLmZvbGRlck5hbWUgPSBcIlJvb3QgRm9sZGVyXCI7XHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuZm9sZGVyTmFtZSA9PSBcIlJvb3QgRm9sZGVyXCIpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuYmFja0J0blZpZXcgPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICRzY29wZS5iYWNrQnRuVmlldyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICBdXHJcbiAgICB9O1xyXG4gICAgdm0uY2hpbGRGb2xkZXJWaWV3ID0gdmFsID0+IHtcclxuICAgICAgdm0uY2hpbGRGb2xkZXJzID0gdmFsLmNoaWxkcmVuO1xyXG4gICAgICB2bS5tb3ZldG8gPSB2YWwubmFtZTtcclxuICAgICAgJChcIi5yb290Rm9sZGVyXCIpLmhpZGUoKTtcclxuICAgICAgJChcIi5jaGlsZEZvbGRlclwiKS5zaG93KCk7XHJcbiAgICB9O1xyXG4gICAgJHNjb3BlLmJhY2tCdG5WaWV3ID0gZmFsc2U7XHJcbiAgICBpZiAoJHNjb3BlLmZvbGRlck5hbWUgPT0gXCJSb290IEZvbGRlclwiKSB7XHJcbiAgICAgICRzY29wZS5iYWNrQnRuVmlldyA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkc2NvcGUuYmFja0J0blZpZXcgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKiBIaWVyYXJjaHkgdGVtcGxhdGUgKi9cclxuICAgIHZtLnNhdmVIaWVyYXJjaHlUcmVlID0gbmFtZSA9PiB7XHJcbiAgICAgIGlmICghbmFtZSkge1xyXG4gICAgICAgIE5vdGlmaWNhdGlvbi5lcnJvcihcIlBsZWFzZSBlbnRlciB0ZW1wbGF0ZSBuYW1lXCIpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoXCIjc2F2ZVRlbXBsYXRlTW9kYWxcIikubW9kYWwoXCJoaWRlXCIpO1xyXG4gICAgICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgICAgbmFtZTogbmFtZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgYXBpRmFjdG9yeVxyXG4gICAgICAgICAgLnNhdmVIaWVyYXJjaHlUcmVlKHByb2plY3RTdG9yZS5nZXQoKS5faWQsIGRhdGEpXHJcbiAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgTm90aWZpY2F0aW9uLnN1Y2Nlc3MocmVzcC5kYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jb25zb2xlLmxvZyhlID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB2bS5zZWxlY3RlZFRlbXBsYXRlID0gXCJcIjtcclxuXHJcbiAgICAvLyBnZXRIaWVyYXJjaHlUZW1wbGF0ZVxyXG5cclxuICAgIGFwaUZhY3RvcnlcclxuICAgICAgLmdldEhpZXJhcmNoeVRlbXBsYXRlKClcclxuICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgdm0udGVtcGxhdGVMaXN0ID0gcmVzcC5kYXRhLmRhdGE7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgdm0uYXNzaWduVGVtcGxhdGUgPSAoKSA9PiB7XHJcbiAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgIHByb2plY3RJZDogcHJvamVjdFN0b3JlLmdldCgpLl9pZCxcclxuICAgICAgICB0ZW1wbGF0ZUlkOiB2bS5zZWxlY3RlZFRlbXBsYXRlLl9pZFxyXG4gICAgICB9O1xyXG4gICAgICAkKFwiI2Fzc2lnblRlbXBsYXRlTW9kYWxcIikubW9kYWwoXCJoaWRlXCIpO1xyXG4gICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgLmNoYW5nZVByb2plY3RUZW1wbGF0ZShkYXRhKVxyXG4gICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgTm90aWZpY2F0aW9uLnN1Y2Nlc3MocmVzcC5kYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgdm0uZ2V0UHJpbWFyeUZvbGRlcnMocHJvamVjdFN0b3JlLmdldCgpKTtcclxuICAgICAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAgICAgLmdldFByb2plY3RCeUlkKHByb2plY3RTdG9yZS5nZXQoKS5faWQpXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgIHByb2plY3RTdG9yZS5zZXQocmVzcC5kYXRhKTtcclxuICAgICAgICAgICAgICB2bS5iYWNrdXBGb2xkZXJzID0gcHJvamVjdFN0b3JlLmdldCgpLmJhY2t1cEZvbGRlcnM7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdm0uc2hvd0JhY2t1cEZpbGVzID0gZmFsc2U7XHJcbiAgICB2bS5zaG93UmVjZW50RmlsZXMgPSBmYWxzZTtcclxuXHJcbiAgICB2bS50b2dnbGVCb29rbWFya3MgPSAodmFsLCBrZXkpID0+IHtcclxuICAgICAgdm1ba2V5XSA9ICF2YWw7XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLmxvYWRQcm9qZWN0RmlsZXMgPSBpZCA9PiB7XHJcbiAgICAgIGxldCBsaW1pdCA9IDU7XHJcbiAgICAgIGFwaUZhY3Rvcnkuc2hvd1Byb2plY3RGaWxlcyhpZCwgbGltaXQpLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgIHZtLnByb2plY3RGaWxlcyA9IHJlc3BvbnNlLmRhdGEuZGF0YTtcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdm0ubG9hZFByb2plY3RGaWxlcyhwcm9qZWN0U3RvcmUuZ2V0KCkuX2lkKTtcclxuICB9XHJcbn0pKCk7XHJcbiIsIigoKSA9PiB7XHJcbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwiaXNzdWVEZXRhaWxDdHJsXCIsIGlzc3VlRGV0YWlsQ3RybCk7XHJcblxyXG4gICAgZnVuY3Rpb24gaXNzdWVEZXRhaWxDdHJsKFxyXG4gICAgICAgICRzY29wZSxcclxuICAgICAgICAkdGltZW91dCxcclxuICAgICAgICBhdXRoRmFjdG9yeSxcclxuICAgICAgICAkc3RhdGUsXHJcbiAgICAgICAgJHN0YXRlUGFyYW1zLFxyXG4gICAgICAgIGFwaUZhY3RvcnksXHJcbiAgICAgICAgTm90aWZpY2F0aW9uLFxyXG4gICAgICAgIE5nTWFwLFxyXG4gICAgICAgIGdsb2JhbHMsXHJcbiAgICAgICAgbG9jYWxTdG9yYWdlU2VydmljZSxcclxuICAgICAgICBGaWxlU2F2ZXJcclxuICAgICAgICBcclxuICAgICAgKSB7XHJcblxyXG4gICAgICAgIGxldCB2bSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgeyBsb2dvdXQsdXNlclN0b3JlIH0gPSBnbG9iYWxzO1xyXG4gICAgICAgIGlmICghYXV0aEZhY3RvcnkuY2hlY2tVc2VyKCkpIHtcclxuICAgICAgICAgICAgbG9nb3V0KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB2bS51c2VyRGF0YSA9IHVzZXJTdG9yZS5nZXQoKTtcclxuXHJcbiAgXHJcbiAgICAgICAgICB2bS5sb2dvdXQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxvZ291dCgpO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIHZtLmlzc3VlSWQgPSAkc3RhdGVQYXJhbXMuaWQ7XHJcbiAgICAgICAgICB2bS5JbWFnZUFzc2V0cz1bXTtcclxuICAgICAgICAgIHZtLkRvY3VtZW50QXNzZXRzPVtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgJHNjb3BlLmN1cnJlbnRQYWdlID0gMTtcclxuICAgICAgICAgICRzY29wZS5pdGVtc1BlclBhZ2UgPSAzO1xyXG4gICAgICAgICAgXHJcblxyXG4gICAgICAgICAgdm0uZ2V0SXNzdWVEZXRhaWwgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAgICAgICAuZ2V0SXNzdWVCeUlkKHZtLmlzc3VlSWQpXHJcbiAgICAgICAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgICB2bS5pc3N1ZURhdGEgPSByZXNwLmRhdGE7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImlzc3VlZGF0YTogXCIsdm0uaXNzdWVEYXRhKTtcclxuICAgICAgICAgICAgICAgdm0udG90YWxJdGVtcyA9IHZtLmlzc3VlRGF0YS5jb21tZW50cy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICRzY29wZS5BcnJheUNvbW1lbnRzPXZtLmlzc3VlRGF0YS5jb21tZW50cy5yZXZlcnNlKCk7XHJcbiAgICAgICAgICAgICAgICRzY29wZS5BcnJheUFjdGl2aXRpZXM9dm0uaXNzdWVEYXRhLmlzc3VlQWN0aXZpdHkucmV2ZXJzZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZtLmFsbENvbW1lbnRzID0gJHNjb3BlLkFycmF5Q29tbWVudHMuc2xpY2UoMCwzKTtcclxuICAgICAgICAgICAgICAgIHZtLmFsbEFjdGl2aXRpZXM9JHNjb3BlLkFycmF5QWN0aXZpdGllcy5zbGljZSgwLDYpO1xyXG4gICAgICAgICAgICAgICAgJHRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgJChcIiNwYWdpbmF0aW9uXCIpLnBhZ2luYXRpb24oe1xyXG4gICAgICAgICAgICAgICAgICBpdGVtczogdm0udG90YWxJdGVtcyxcclxuICAgICAgICAgICAgICAgICAgaXRlbXNPblBhZ2U6ICRzY29wZS5pdGVtc1BlclBhZ2UsXHJcbiAgICAgICAgICAgICAgICAgIGNzc1N0eWxlOiBcImxpZ2h0LXRoZW1lXCIsXHJcbiAgICAgICAgICAgICAgICAgIGhyZWZUZXh0UHJlZml4OiBcIiNcIixcclxuICAgICAgICAgICAgICAgICAgb3JkZXJpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICBjdXJyZW50UGFnZTogMSxcclxuICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgb25QYWdlQ2xpY2s6IGZ1bmN0aW9uKHBhZ2UsIGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRQYWdpbmdEYXRhKHBhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICQoXCIjcGFnaW5hdGlvbkFjdGl2aXR5XCIpLnBhZ2luYXRpb24oe1xyXG4gICAgICAgICAgICAgICAgICBpdGVtczogdm0uaXNzdWVEYXRhLmlzc3VlQWN0aXZpdHkubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICBpdGVtc09uUGFnZTogNyxcclxuICAgICAgICAgICAgICAgICAgY3NzU3R5bGU6IFwibGlnaHQtdGhlbWVcIixcclxuICAgICAgICAgICAgICAgICAgaHJlZlRleHRQcmVmaXg6IFwiI1wiLFxyXG4gICAgICAgICAgICAgICAgICBvcmRlcmluZzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlOiAxLFxyXG4gICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICBvblBhZ2VDbGljazogZnVuY3Rpb24ocGFnZSwgZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldEFjdGl2aXR5UGFnaW5nRGF0YShwYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgIHZtLmlzc3VlRGF0YS5saXN0QXNzZXRzLm1hcCh4PT57XHJcbiAgICAgICAgICAgICAgICBpZih4Lm1pbWV0eXBlPT1cImltYWdlL3BuZ1wifHx4Lm1pbWV0eXBlPT1cImltYWdlL2pwZ1wiKXtcclxuICAgICAgICAgICAgICAgICAgdm0uSW1hZ2VBc3NldHMucHVzaCh4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICB2bS5Eb2N1bWVudEFzc2V0cy5wdXNoKHgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICBcclxuICAgICAgICAgXHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNldFBhZ2luZ0RhdGEocGFnZSkge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICB2YXIgcGFnZWREYXRhID0gdm0uaXNzdWVEYXRhLmNvbW1lbnRzLnNsaWNlKFxyXG4gICAgICAgICAgICAgICAgKHBhZ2UgLSAxKSAqICAkc2NvcGUuaXRlbXNQZXJQYWdlLFxyXG4gICAgICAgICAgICAgICAgcGFnZSAqICRzY29wZS5pdGVtc1BlclBhZ2VcclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgIHZtLmFsbENvbW1lbnRzID0gcGFnZWREYXRhO1xyXG4gICAgICAgICAgICAgIC8qKnRvIHJlZnJlc2ggdGhlIGNvbW1lbnRzIHdoZW4gcGFnZSBjbGljayB1c2UgJGFwcGx5ICovXHJcbiAgICAgICAgICAgICAgJHNjb3BlLiRhcHBseSgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZnVuY3Rpb24gc2V0QWN0aXZpdHlQYWdpbmdEYXRhKHBhZ2UpIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgdmFyIHBhZ2VkRGF0YSA9IHZtLmlzc3VlRGF0YS5pc3N1ZUFjdGl2aXR5LnNsaWNlKFxyXG4gICAgICAgICAgICAgICAgKHBhZ2UgLSAxKSAqICA3LFxyXG4gICAgICAgICAgICAgICAgcGFnZSAqIDdcclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgIHZtLmFsbEFjdGl2aXRpZXMgPSBwYWdlZERhdGE7XHJcbiAgICAgICAgICAgICAgLyoqdG8gcmVmcmVzaCB0aGUgY29tbWVudHMgd2hlbiBwYWdlIGNsaWNrIHVzZSAkYXBwbHkgKi9cclxuICAgICAgICAgICAgICAkc2NvcGUuJGFwcGx5KClcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdm0uZ2V0SXNzdWVEZXRhaWwoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgICAgXHJcbiAgICAgIC8vQWRkIGNvbW1lbnRzLi4uLlxyXG4gICAgICB2bS5wb3N0Q29tbWVudCA9IGZ1bmN0aW9uKGNvbW1lbnQpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiY29tbWVudDogXCIsY29tbWVudCk7XHJcbiAgICAgICBsZXQgY29tbWVudDEgPSBjb21tZW50LnJlcGxhY2UoL1xcblxccj8vZywgJzxiciAvPicpO1xyXG4gICAgICAgY29uc29sZS5sb2coXCJjb21tZW50OiBcIixjb21tZW50MSk7XHJcblxyXG4gICAgICAgaWYoY29tbWVudD09dW5kZWZpbmVkKXtcclxuICAgICAgICAgTm90aWZpY2F0aW9uLmVycm9yKFwiUGxlYXNlIGFkZCBjb21tZW50LlwiKTtcclxuICAgICAgIH1lbHNle1xyXG4gICAgICAgICB2YXIgY29tbWVudG9iaj17XCJjb21tZW50XCI6Y29tbWVudH1cclxuICAgICAgICAgYXBpRmFjdG9yeVxyXG4gICAgICAgICAgICAucG9zdENvbW1lbnRGb3JJc3N1ZSh2bS5pc3N1ZUlkLGNvbW1lbnRvYmopXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3A9PntcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVzcDpcIixyZXNwKTtcclxuICAgICAgICAgICAgICB2bS5nZXRJc3N1ZURldGFpbCgpO1xyXG4gICAgICAgICAgICAgICQoXCIjY29tbWVudGFyZWFcIikudmFsKCcnKTtcclxuICAgICAgICAgICAgICBOb3RpZmljYXRpb24uc3VjY2VzcyhcIkNvbW1lbnQgYWRkZWQgc3VjY2Vzc2Z1bGx5Li5cIik7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGU9PntcclxuICAgICAgICAgICAgICBOb3RpZmljYXRpb24uZXJyb3IoXCJDb3VsZG4ndCB1cGRhdGUgY29tbWVudFwiKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgICRzY29wZS5jaGFuZ2VDb21wbGV0aW9uU3RhdHVzID0gZnVuY3Rpb24oKXtcclxuICAgICAgICBhbGVydChcImNvbXBsZXRpb25cIik7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvL2Rvd25sb2FkIGF0dGFjaG1lbnQgZmlsZVxyXG4gICAgICB2bS5kb3dubG9hZEZpbGUgPSBmdW5jdGlvbihkb2NzKXtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImRvY3NcIixkb2NzKTtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtkb2NzXSwge3R5cGU6IGRvY3MubWltZXR5cGV9KTtcclxuICAgICAgICAgY29uc29sZS5sb2coXCJibG9iXCIsYmxvYik7XHJcbiAgICAgICAgIHNhdmVBcyhibG9iLCBkb2NzLm9yaWdpb25hbG5hbWUpO1xyXG4gICAgICAgIC8vd2luZG93LmxvY2F0aW9uLmhyZWYgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcclxuICAgICAgXHJcbiAgICAgIH1cclxuXHJcblxyXG4gICAgICAkc2NvcGUucmVPcGVuSXNzdWUgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIC8vdmFyIFRlbXBPYmplY3Q9e1wiY29tcGxldGlvblN0YXR1c1wiOk9QRU59XHJcbiAgICAgICAgYXBpRmFjdG9yeVxyXG4gICAgICAgICAgIC5yZU9wZW5Jc3N1ZVN0YXR1c1VwZGF0ZSh2bS5pc3N1ZUlkKVxyXG4gICAgICAgICAgIC50aGVuKHJlc3A9PntcclxuICAgICAgICAgICAgIHZtLmdldElzc3VlRGV0YWlsKCk7XHJcbiAgICAgICAgICAgICAkKFwiI2NvbmZpcm1tb2RhbFwiKS5tb2RhbChcImhpZGVcIik7XHJcbiAgICAgICAgICAgICBOb3RpZmljYXRpb24uc3VjY2VzcyhcIklzc3VlIHN0YXR1cyBpcyBub3cgb3BlblwiKTtcclxuICAgICAgICAgICB9KS5jYXRjaChlPT57XHJcbiAgICAgICAgICAgICBOb3RpZmljYXRpb24uZXJyb3IoXCJjb3VsZCBub3QgdXBkYXRlIFN0YXR1c1wiKTtcclxuICAgICAgICAgICB9KVxyXG4gICAgICB9XHJcblxyXG4gICAgICAkc2NvcGUubWFya0lzc3VlQXNDb21wbGV0ZSA9IGZ1bmN0aW9uKGNvbW1lbnQsaW1hZ2VGaWxlcyl7XHJcbiAgICAgICAgY29uc29sZS5sb2coY29tbWVudCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coaW1hZ2VGaWxlcyk7XHJcbiAgICAgICAgdmFyIGVkaXRPYmplY3Q9e2NvbW1lbnQ6Y29tbWVudCxJbWFnZXM6aW1hZ2VGaWxlc307XHJcbiAgICAgICAgYXBpRmFjdG9yeS5zYXZlSXNzdWVBc0NvbXBsZXRlKHZtLmlzc3VlSWQsZWRpdE9iamVjdClcclxuICAgICAgICAgIC50aGVuKHJlc3A9PntcclxuICAgICAgICAgICAgdm0uZ2V0SXNzdWVEZXRhaWwoKTtcclxuICAgICAgICAgICAgICQoXCIjY29tcGxldGlvbnN0YXR1c21vZGFsXCIpLm1vZGFsKFwiaGlkZVwiKTtcclxuICAgICAgICAgICAgIE5vdGlmaWNhdGlvbi5zdWNjZXNzKFwiSXNzdWUgaXMgYmVlbiBtYXJrZWQgYXMgY29tcGxldGVkXCIpO1xyXG4gICAgICAgICAgfSkuY2F0Y2goZT0+e1xyXG4gICAgICAgICAgICBOb3RpZmljYXRpb24uZXJyb3IoXCJTb21ldGhpbmcgd3JvbmcgaGFwcGVuZWQuIGNvdWxkZW50IHVwZGF0ZSBjaGFuZ2VzXCIpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgIH1cclxuICAgIH0pKCk7XHJcblxyXG4gICIsIigoKSA9PiB7XHJcbiAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuY29udHJvbGxlcihcImlzc3Vlc0N0cmxcIiwgaXNzdWVzQ3RybCk7XHJcblxyXG4gIGZ1bmN0aW9uIGlzc3Vlc0N0cmwoXHJcbiAgICAgICRzY29wZSxcclxuICAgICAgJHJvb3RTY29wZSxcclxuICAgICAgJHRpbWVvdXQsXHJcbiAgICAgIGF1dGhGYWN0b3J5LFxyXG4gICAgICAkc3RhdGUsXHJcbiAgICAgICRxLFxyXG4gICAgICBhcGlGYWN0b3J5LFxyXG4gICAgICBOb3RpZmljYXRpb24sXHJcbiAgICAgIGdsb2JhbHMsXHJcbiAgICAgIGZpbGVNYW5hZ2VyRmFjdG9yeSxcclxuICAgICAgVXBsb2FkLFxyXG4gICAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLFxyXG4gICAgICB1cGxvYWRGYWN0b3J5LFxyXG4gICAgKSB7XHJcbiAgICAgIGxldCB2bSA9IHRoaXM7XHJcbiAgICAgIGNvbnN0IHsgbG9nb3V0LCB1c2VyU3RvcmUsZGVib3VuY2UgfSA9IGdsb2JhbHM7XHJcbiAgICAgICRzY29wZS5VcGxvYWRlZEZpbGVzPVtdO1xyXG4gICAgICB2bS5pc3N1ZURhdGEgPSB7fTtcclxuICAgICAgJHNjb3BlLmlzc3VlTW9kZWw9e307XHJcbiAgICAgICRzY29wZS5maWxlO1xyXG4gICAgICAkc2NvcGUuY29tbWVudD1cIlwiO1xyXG4gICAgICAkc2NvcGUuaW5wdXRGaWxlcyA9IFtdO1xyXG4gICAgICAkc2NvcGUub3BlbkVkaXQ9ZmFsc2U7XHJcbiAgICAgICRzY29wZS5maWxlc1RvUmVtb3ZlPVtdO1xyXG4gICAgICAkc2NvcGUuaXNTZWxlY3RlZEJ0bj1mYWxzZTtcclxuICAgICAgJHNjb3BlLnVwZGF0ZWZvcm09ZmFsc2U7XHJcbiAgICAgICRzY29wZS5VbmRvQXJyYXk9W107XHJcbiAgICAgICRzY29wZS5yZWRvQXJyYXk9W107XHJcbiAgICAgIHZtLnBsYW5Ub01hcms9W107XHJcbiAgICAgIHZtLkxvY2FsSW1ncz1bXTtcclxuICAgICAvLyBjb25zdCB7IGxvZ291dCB9ID0gZ2xvYmFscztcclxuICAgICAgJHNjb3BlLnNlYXJjaGluZ1RleHQ9IGZhbHNlO1xyXG4gICAgICAkc2NvcGUub3BlbkZpbGxDb2xvcj1mYWxzZTtcclxuICAgICAgLy9jb2xvciBwaWNrZXIgdmFyaWFibGVzXHJcbiAgICAgICRzY29wZS5jb2xvcnBpY2sgPSBcIiMwMDAwZmZcIjtcclxuICAgICAgJHNjb3BlLmNvbG9yV2VsbDtcclxuICAgICAgJHNjb3BlLmZpbGxXZWxsO1xyXG4gICAgICAkc2NvcGUuZmlsbENvbG9yID0gJ3RyYW5zcGFyZW50JztcclxuICAgICAgJHNjb3BlLnRleHRGb3JtPWZhbHNlO1xyXG4gICAgICB2bS5lcnJvckltYWdlPVwiYXNzZXRzL2ltYWdlcy9lbmR1c2VyaXNzdWUucG5nXCI7XHJcbiAgICAgJHNjb3BlLmJ0bk1hcmtlcj1cIi4uL2Fzc2V0cy9pbWFnZXMvZ3BzLnBuZ1wiO1xyXG4gICAgICRzY29wZS5idG5DaXJjbGU9XCIuLi9hc3NldHMvaW1hZ2VzL2NpcmNsZS1zaGFwZS1vdXRsaW5lLnBuZ1wiO1xyXG4gICAgICRzY29wZS5idG5MaW5lPVwiLi4vYXNzZXRzL2ltYWdlcy9saW5laWNvbi5wbmdcIjtcclxuICAgICAkc2NvcGUuYnRuVGV4dD1cIi4uL2Fzc2V0cy9pbWFnZXMvdGV4dC1vcHRpb24taW50ZXJmYWNlLXN5bWJvbC5wbmdcIjtcclxuIFxyXG4gICAgICBpZiAoIWF1dGhGYWN0b3J5LmNoZWNrVXNlcigpKSB7XHJcbiAgICAgICAgbG9nb3V0KCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAgLyogR2V0IHByb2plY3QgbGlzdCAqL1xyXG4gICAgICB2bS51c2VyRGF0YSA9IHVzZXJTdG9yZS5nZXQoKTtcclxuXHJcbiAgICAgIHZtLmxvZ291dCA9ICgpID0+IHtcclxuICAgICAgICBsb2dvdXQoKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgICAvKiBEYXRhIHRhYmxlIHNldHVwICoqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gICAgICAkKFwiLmlzc3Vlc0xpc3RcIikuRGF0YVRhYmxlKCk7XHJcbiAgICAgICRzY29wZS5hY3RpdmVKdXN0aWZpZWQgPSAwO1xyXG5cclxuICAgICAgdm0uY3VycmVudFBhZ2UgPSAxO1xyXG4gIFxyXG4gICAgICB2bS50b2dnbGVPYmogPSB7XHJcbiAgICAgICAgdG9nZ2xlSXNzdWU6IHtcclxuICAgICAgICAgIHN5c3RlbVRhZzogZmFsc2UsXHJcbiAgICAgICAgICB0aXRsZTogZmFsc2UsXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogZmFsc2UsXHJcbiAgICAgICAgICBwcm9qZWN0TmFtZTogZmFsc2UsXHJcbiAgICAgICAgICBjcmVhdGVkOiB0cnVlLFxyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgdm0uc2VhcmNoVGV4dCA9IFwiXCI7XHJcbiAgICAgIHZtLnNvcnRpc3N1ZXMgPSAodHlwZSwgcmVzb3VyY2UpID0+IHtcclxuICAgICAgICAvKiBGb3IgdG9nZ2xpbmcgYXNjZW5kaW5nIGFuZCBkZXNjZW5kaW5nIG9yZGVyICovXHJcbiAgICAgICAgdm0udG9nZ2xlT2JqW3Jlc291cmNlXVt0eXBlXSA9PT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICA/ICh2bS50b2dnbGVPYmpbcmVzb3VyY2VdW3R5cGVdID0gdHJ1ZSlcclxuICAgICAgICAgIDogKHZtLnRvZ2dsZU9ialtyZXNvdXJjZV1bdHlwZV0gPSAhdm0udG9nZ2xlT2JqW3Jlc291cmNlXVt0eXBlXSk7XHJcbiAgICAgICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgICAubGlzdEFsbElzc3Vlcyh7XHJcbiAgICAgICAgICAgIHBhZ2U6IDEsXHJcbiAgICAgICAgICAgIGNodW5rOiAxMCxcclxuICAgICAgICAgICAgc29ydDogdHlwZSxcclxuICAgICAgICAgICAgc2VhcmNoOiB2bS5zZWFyY2hUZXh0LFxyXG4gICAgICAgICAgICBzb3J0VHlwZTogdm0udG9nZ2xlT2JqW3Jlc291cmNlXVt0eXBlXVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAvLyB2bVtyZXNvdXJjZV09IHJlc3AuZGF0YS5saXN0O1xyXG4gICAgICAgICAgICAvLyB2bVtyZXNvdXJjZSArIFwiQ291bnRcIl0gPSByZXNwLmRhdGEudG90YWw7XHJcbiAgICAgICAgICAgIHZtLmFsbElzc3VlcyA9IHJlc3AuZGF0YS5saXN0O1xyXG4gICAgICAgICAgICB2bS5pc3N1ZUNvdW50ID0gcmVzcC5kYXRhLnRvdGFsO1xyXG4gICAgICAgICAgICAkdGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnNlYXJjaGluZ1RleHQ9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICQoXCIjcGFnaW5hdGlvblwiKS5wYWdpbmF0aW9uKHtcclxuICAgICAgICAgICAgICAgIGl0ZW1zOiB2bS5pc3N1ZUNvdW50LFxyXG4gICAgICAgICAgICAgICAgaXRlbXNPblBhZ2U6IDEwLFxyXG4gICAgICAgICAgICAgICAgY3NzU3R5bGU6IFwibGlnaHQtdGhlbWVcIixcclxuICAgICAgICAgICAgICAgIGhyZWZUZXh0UHJlZml4OiBcIiNcIixcclxuICAgICAgICAgICAgICAgIG9yZGVyaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlOiAxLFxyXG4gICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIG9uUGFnZUNsaWNrOiBmdW5jdGlvbihwYWdlLCBldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgICAgICAgICAgICAgLmxpc3RBbGxJc3N1ZXMoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgcGFnZTogcGFnZSxcclxuICAgICAgICAgICAgICAgICAgICAgIGNodW5rOiAxMCxcclxuICAgICAgICAgICAgICAgICAgICAgIHNvcnQ6IHR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICBzb3J0VHlwZTogdm0udG9nZ2xlT2JqW3R5cGVdXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIHZtLmFsbElzc3VlcyA9IHJlc3AuZGF0YS5saXN0O1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBzZWFyY2hEZWJvdW5jZSA9IGRlYm91bmNlKDI1MCk7IC8qIFBhc3NpbmcgaW4gdGhlIGRlYm91bmNlIHJhdGUgKi9cclxuICB2bS5zZWFyY2hJc3N1ZXMgPSB0ZXh0ID0+IHtcclxuICAgICAvKipcclxuICAgICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGZuIC0gcGFzcyB0aGUgZnVuY3Rpb24gd2hpY2ggeW91IHdhbnQgdG8gZGVib3VuY2VcclxuICAgICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGFyZ3MgLSBwYXNzIHRoZSBhcmd1bWVudHMgZnJvbSB0aGUgdmlldyBhcyBhbiBhcnJheVxyXG4gICAgICAgICAgICovXHJcbiAgc2VhcmNoRGVib3VuY2UoXHJcbiAgICAoKSA9PiB7XHJcbiAgICBhcGlGYWN0b3J5XHJcbiAgICAgIC5saXN0QWxsSXNzdWVzKHtcclxuICAgICAgICBwYWdlOiAxLFxyXG4gICAgICAgIGNodW5rOiAxMCxcclxuICAgICAgICBzZWFyY2g6IHRleHQsXHJcbiAgICAgICAgc29ydDogXCJjcmVhdGVkXCIsXHJcbiAgICAgICAgc29ydFR5cGU6IGZhbHNlXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG5cclxuICAgICAgICB2bS5hbGxJc3N1ZXMgPSByZXNwLmRhdGEubGlzdDtcclxuICAgICAgICB2bS5pc3N1ZUNvdW50ID0gcmVzcC5kYXRhLnRvdGFsO1xyXG4gICAgICBcclxuICAgICAgICAkdGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAkc2NvcGUuc2VhcmNoaW5nVGV4dD0gdHJ1ZTtcclxuICAgICAgICAgICQoXCIjcGFnaW5nXCIpLnBhZ2luYXRpb24oe1xyXG4gICAgICAgICAgIFxyXG4gICAgICAgICAgICBpdGVtczogdm0uaXNzdWVDb3VudCxcclxuICAgICAgICAgICAgaXRlbXNPblBhZ2U6IDEwLFxyXG4gICAgICAgICAgICBjc3NTdHlsZTogXCJsaWdodC10aGVtZVwiLFxyXG4gICAgICAgICAgICBocmVmVGV4dFByZWZpeDogXCIjXCIsXHJcbiAgICAgICAgICAgIG9yZGVyaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgY3VycmVudFBhZ2U6IDEsXHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG9uUGFnZUNsaWNrOiBmdW5jdGlvbihwYWdlLCBldmVudCkge1xyXG4gICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgYXBpRmFjdG9yeVxyXG4gICAgICAgICAgICAgICAgLmxpc3RBbGxJc3N1ZXMoe1xyXG4gICAgICAgICAgICAgICAgICBwYWdlOiBwYWdlLFxyXG4gICAgICAgICAgICAgICAgICBjaHVuazogMTAsXHJcbiAgICAgICAgICAgICAgICAgIHNvcnQ6IHR5cGUsXHJcbiAgICAgICAgICAgICAgICAgIHNvcnRUeXBlOiB2bS50b2dnbGVPYmpbcmVzb3VyY2VdW3R5cGVdXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHZtLmFsbElzc3VlcyA9IHJlc3AuZGF0YS5saXN0O1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgW3RleHRdXHJcbiAgIFxyXG4gICk7XHJcbiAgfTtcclxuXHJcbiAgIC8qIEluaXRpYWxseSBzb3J0IGlzc3VlIGluIGRlc2NlbmRpbmcgb3JkZXIgKi9cclxuICAgdm0uc29ydGlzc3VlcyhcImNyZWF0ZWRcIiwgXCJ0b2dnbGVJc3N1ZVwiKTtcclxuXHJcbiAgIHZtLmR0T3B0aW9ucyA9IHtcclxuICAgICBwYWdpbmc6IGZhbHNlLFxyXG4gICAgIGluZm86IGZhbHNlLFxyXG4gICAgIG9yZGVyaW5nOiBmYWxzZSxcclxuICAgICBzZWFyY2hpbmc6IGZhbHNlXHJcbiAgIH07XHJcblxyXG4gICAvKiBFbmQgb2YgIERhdGEgdGFibGUgc2V0dXAgKioqKioqKioqKioqKioqKioqKioqKi9cclxuICBcclxuICAgICAgJHNjb3BlLmlzc3VlQ2F0ZWdvcnkgPSBbJ1NhZmV0eScsICdRdWFsaXR5JywgJ0lzc3VlJ107XHJcbiAgICBcclxuXHJcbiAgICAgIGFwaUZhY3RvcnkubGlzdEFsbFVzZXJzKCkudGhlbihyZXNwID0+IHtcclxuICAgICAgICB2bS5hbGxVc2VycyA9IHJlc3AuZGF0YS5saXN0O1xyXG4gICAgICBcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBhcGlGYWN0b3J5Lmxpc3RBbGxSb29mZXJzKCkudGhlbihyZXNwID0+IHtcclxuICAgICAgICB2bS5hbGxSb29mZXJzID0gcmVzcC5kYXRhLmxpc3Q7XHJcbiAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgIGFwaUZhY3RvcnkubGlzdEFsbFByb2plY3RzKCkudGhlbihyZXNwID0+IHtcclxuICAgICAgICB2bS5hbGxQcm9qZWN0cyA9IHJlc3AuZGF0YS5saXN0O1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGFwaUZhY3RvcnkuZ2V0SXNzdWVzTGlzdCgpLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICB2bS5saXN0T2ZJc3N1ZSA9IHJlc3AuZGF0YS5saXN0O1xyXG4gICAgICAgIFxyXG4gICAgICAgfSk7XHJcbiAgICAgICBcclxuICAgICAgIC8vcmVhZGluZyBmaWxlIGltYWdlc1xyXG4gICAgICAkc2NvcGUucmVhZEltZyA9IGZ1bmN0aW9uKGZpbGVJbWcpe1xyXG4gICAgICAgIHZhciBvdXRwdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmxhaCcpO1xyXG4gICAgICAgIG91dHB1dC5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGVJbWcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAgJHNjb3BlLmFkZEZpbGUgPSBmdW5jdGlvbihmaWxlLGNvbW1lbnQpe1xyXG4gICAgIFxyXG4gICAgICAvLyAgaWYoZmlsZS50eXBlPT0naW1hZ2UvcG5nJ3x8ZmlsZS50eXBlPT0naW1hZ2UvanBnJ3x8ZmlsZS50eXBlPT0naW1hZ2UvanBlZycpe1xyXG4gICAgICAvLyAgIHZhciBTUkMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpO1xyXG4gICAgICAvLyAgICRzY29wZS5pbnB1dEZpbGVzLnB1c2goe2ZpbGU6ZmlsZSxjb21tZW50OmNvbW1lbnQsc291cmNlOlNSQ30pO1xyXG5cclxuICAgICAgLy8gIH1lbHNle1xyXG4gICAgICAgICRzY29wZS5pbnB1dEZpbGVzLnB1c2goe2ZpbGU6ZmlsZSxjb21tZW50OmNvbW1lbnQsc291cmNlOlwiTlNcIn0pO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiaW5wdXQ6XCIsJHNjb3BlLmlucHV0RmlsZXMpO1xyXG4gICAgICAgLy99XHJcbiAgICAgIC8vICB2YXIgU1JDID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcclxuICAgICAgLy8gIGNvbnNvbGUubG9nKFwiU1JDXCIsU1JDKTtcclxuICAgICAgLy8gICAkc2NvcGUuaW5wdXRGaWxlcy5wdXNoKHtmaWxlOmZpbGUsY29tbWVudDpjb21tZW50LHNvdXJjZTpTUkN9KTtcclxuICAgICAgIFxyXG4gICAgICAvLyAgIGNvbnNvbGUubG9nKCRzY29wZS5pbnB1dEZpbGVzKTtcclxuICAgICAgLy8gICAkc2NvcGUuZmlsZT0nJztcclxuICAgICAgLy8gICAkc2NvcGUuY29tbWVudD0nJztcclxuICAgICAgIC8vICQoXCIjY29tbWVudGRpdlwiKS5oaWRlKCk7XHJcbiAgICAgICB9XHJcblxyXG4gICAgICAgJHNjb3BlLmRlbGV0ZUltZyA9IGZ1bmN0aW9uKGluZGV4LGFycmF5KXtcclxuICAgICAgICBhcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgIH1cclxuXHJcbiAgICAgICRzY29wZS5maWxlVXBFdmVudCA9IGZ1bmN0aW9uKGZpbGUpe1xyXG4gICAgICAgIFxyXG4gICAgICAgICAkc2NvcGUudGh1bWJuYWlsPVwiXCI7XHJcbiAgICAgICAgIGNvbnNvbGUubG9nKFwiZmlsZSBldmVudFwiLGZpbGUpO1xyXG4gICAgICAgIGlmKGZpbGUhPT1udWxsKXtcclxuICAgICAgICAgIGlmKGZpbGUubGVuZ3RoPjApe1xyXG4gICAgICAgICAgICBmaWxlLmZvckVhY2gob25lZmlsZT0+e1xyXG4gICAgICAgICAgICAgIGlmKG9uZWZpbGUudHlwZT09J2ltYWdlL3BuZyd8fG9uZWZpbGUudHlwZT09J2ltYWdlL2pwZyd8fG9uZWZpbGUudHlwZT09J2ltYWdlL2pwZWcnKXtcclxuICAgICAgICAgICAgICAgIHZhciBTUkMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG9uZWZpbGUpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnRodW1ibmFpbD1TUkNcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgZWxzZSBpZihvbmVmaWxlLnR5cGU9PSdhcHBsaWNhdGlvbi9wZGYnKXtcclxuICAgICAgICAgICAgICAgICRzY29wZS50aHVtYm5haWw9J2Fzc2V0cy9pbWFnZXMvZmlsZV9pY29uL3BkZmljb24uanBnJ1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBlbHNlIGlmKG9uZWZpbGUudHlwZT09J2FwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50Jyl7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudGh1bWJuYWlsPSdhc3NldHMvaW1hZ2VzL2ZpbGVfaWNvbi9tc3dvcmQucG5nJ1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBlbHNlIGlmKG9uZWZpbGUudHlwZT09J2FwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbCd8fG9uZWZpbGUudHlwZT09J2FwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0Jyl7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudGh1bWJuYWlsPSdhc3NldHMvaW1hZ2VzL2ZpbGVfaWNvbi9leGNlbC5qcGcnXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGVsc2UgaWYob25lZmlsZS50eXBlPT0nYXBwbGljYXRpb24veC16aXAtY29tcHJlc3NlZCcpe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnRodW1ibmFpbD0nYXNzZXRzL2ltYWdlcy9maWxlX2ljb24vemlwLnBuZydcclxuICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICRzY29wZS50aHVtYm5haWw9J2Fzc2V0cy9pbWFnZXMvZmlsZV9pY29uL2FueXR5cGUuanBnJ1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAkc2NvcGUuaW5wdXRGaWxlcy5wdXNoKHtmaWxlOm9uZWZpbGUsaW1hZ2U6JHNjb3BlLnRodW1ibmFpbH0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICBcclxuICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgJHNjb3BlLmdldERlc2NyaXB0aW9uPWZ1bmN0aW9uKGluZGV4LGFycmF5LGNvbWVudCl7XHJcbiAgICAgICAgIGFycmF5W2luZGV4XS5jb21tZW50PWNvbWVudDtcclxuICAgICAgICBcclxuICAgICAgfVxyXG5cclxuICAgICAgXHJcblxyXG4gICAgICB2bS5maWxlczNVcGRhdGU9ZnVuY3Rpb24oYXJyYXksaXNzdWVkYXRhKXtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImluIHMzIGZ1bmN0aW9uXCIsaXNzdWVkYXRhKTtcclxuICAgICAgICBhcnJheS5mb3JFYWNoKCh4LGksYXJyYXkpID0+IHtcclxuICAgICAgICAgIC8vY29uc29sZS5sb2coXCJTMyBGSUxFIEZPUkVBQ0ggTUV0aG9kIGFzIGFycmF5IGlzIG5vdCBudWxsXCIpO1xyXG4gICAgICAgICAgLyogQXR0YWNoIGV2ZW50cyBhbmQgcHJvcHMgdG8gZmlsZU9iaiBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgdmlldyAqL1xyXG4gICAgICAgICAgbGV0IHVwbG9hZEhhbmRsZXIgPSBldmFwb3JhdGUgPT4ge1xyXG4gICAgICAgICAgICBOb3RpZmljYXRpb24uaW5mbyh4LmZpbGUubmFtZStcIiBpcyB1cGxvYWRpbmcgLi4uXCIpO1xyXG4gICAgICAgICAgICAvKiB1cGxvYWQgdG8gczMgaWYgdmFsdWUgaXMgbGVzcyB0aGFuIDMgKi9cclxuICAgICAgICAgICAgeC5maWxlLnBhdXNlID0gdXBsb2FkRmFjdG9yeS5wYXVzZS5iaW5kKGV2YXBvcmF0ZSwgeCk7XHJcbiAgICAgICAgICAgIHguZmlsZS5yZXN1bWUgPSB1cGxvYWRGYWN0b3J5LnJlc3VtZS5iaW5kKGV2YXBvcmF0ZSwgeCk7XHJcbiAgICAgICAgICAgIHguZmlsZS5hYm9ydCA9IHVwbG9hZEZhY3RvcnkuYWJvcnQuYmluZChldmFwb3JhdGUsIHgpO1xyXG4gICAgICAgICAgICBsZXQgYWRkQ29uZmlnID0ge1xyXG4gICAgICAgICAgICAgIG5hbWU6IHguZmlsZS5uYW1lLFxyXG4gICAgICAgICAgICAgIGZpbGU6IHguZmlsZSxcclxuICAgICAgICAgICAgICBwcm9ncmVzczogKHAsIHN0YXRzKSA9PiB7XHJcbiAgICAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKHApO1xyXG4gICAgICAgICAgICAgICAgLyogQVdTIHByb2dyZXNzIHBlcmNlbnRhZ2UgZmFsbHMgYmFjayBzb21ldGltZXMgZHVlIHRvIG1pc3NpbmcgZnJhZ21lbnRhdGlvbi4gXHJcbiAgICAgICAgICAgICAgICBVcGRhdGUgcHJvZ3Jlc3MgdmFsdWUgb25seSB3aGVuIGl0J3MgaGlnaGVyIHRoYW4gdGhlIHByZXZpb3VzIHZhbHVlICovXHJcbiAgICAgICAgICAgICAgICB4LmZpbGUucHJvZ3Jlc3MgPVxyXG4gICAgICAgICAgICAgICAgICB4LmZpbGUucHJvZ3Jlc3MgPiBNYXRoLnJvdW5kKHAgKiAxMDApXHJcbiAgICAgICAgICAgICAgICAgICAgPyB4LmZpbGUucHJvZ3Jlc3NcclxuICAgICAgICAgICAgICAgICAgICA6IE1hdGgucm91bmQocCAqIDEwMCk7XHJcbiAgICAgICAgICAgICAgICAvKiBDaGVjayBjb21wbGV0aW9uICovXHJcbiAgICAgICAgICAgICAgICB2bS5jb21wbGV0ZWRBbGwgPSBmaWxlTWFuYWdlckZhY3RvcnkuY2hlY2tVcGxvYWRDb21wbGV0aW9uKFxyXG4gICAgICAgICAgICAgICAgICB2bS51cGxvYWRWaWV3RmlsZXNcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAvKiBSZWZyZXNoIHZpZXcgd2l0aCBzY29wZSA+IGFwcGx5ICovXHJcbiAgICAgICAgICAgICAgICAkdGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgY29tcGxldGU6IChfeGhyLCBhd3NLZXkpID0+IHtcclxuICAgICAgICAgICAgICAgIHguZmlsZS5jb21wbGV0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgLyogUmVmcmVzaCB2aWV3IHdpdGggc2NvcGUgPiBhcHBseSAqL1xyXG4gICAgICAgICAgICAgICAgJHRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuJGFwcGx5KCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ29tcGxldGUhXCIpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICBcclxuICAgICAgICAgICAgZXZhcG9yYXRlLmFkZChhZGRDb25maWcpLnRoZW4oXHJcbiAgICAgICAgICAgICAgZnVuY3Rpb24oYXdzT2JqZWN0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICAvKiBTdWNjZXNzIGJsb2NrICovXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh4KTtcclxuICAgICAgICAgICAgICAgIGxldCBwYXlsb2FkID0ge1xyXG4gICAgICAgICAgICAgICAgICB0eXBlOiBmaWxlTWFuYWdlckZhY3RvcnkucmVzb2x2ZURlc3RUeXBlKHguZmlsZSksXHJcbiAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIGFzc2V0RGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0TmFtZTogeC5maWxlLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRkZXNjcmlwdGlvbjp4LmNvbW1lbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgYnVja2V0OiBcIjNkZmlsZXNkYXRhXCIsXHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiBgdGVzdC8ke3guZmlsZS5uYW1lfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgbWltZXR5cGU6IHguZmlsZS50eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVzOiB4LmZpbGUuc2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICBpc3N1ZUlkOmlzc3VlZGF0YS5kYXRhLl9pZFxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJJTkRFWDogIFwiLCBpKTtcclxuICAgICAgICAgICAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAgICAgICAgICAgLm5ld0lzc3VlczNGaWxlVXBsb2FkKHBheWxvYWQpXHJcbiAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpID09PSAoYXJyYXkubGVuZ3RoIC0xKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmlucHV0RmlsZXMgPSBbXTtcclxuICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgIHZtLmlzc3VlRGF0YSA9e307XHJcbiAgICAgICAgICAgICAgICAgICAgICAkKCcjaXNzdWVfbW9kYWwnKS5tb2RhbCgnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJCgnI2lzc3VlX21hcmtlcicpLm1vZGFsKCdzaG93Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgdm0uc29ydGlzc3VlcyhcImNyZWF0ZWRcIiwgXCJ0b2dnbGVJc3N1ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICBOb3RpZmljYXRpb24uc3VjY2VzcyhcIkFzc2V0IHNhdmVkIHN1Y2Nlc3NmdWxseVwiKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIE5vdGlmaWNhdGlvbi5lcnJvcihcIkNvdWxkIG5vdCBzYXZlIGFzc2V0IG9iamVjdFwiKTtcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBmdW5jdGlvbihyZWFzb24pIHtcclxuICAgICAgICAgICAgICAgIC8qIEZhaWx1cmUgYmxvY2sgKi9cclxuICAgICAgICAgICAgICAgIHguYWJvcnRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvKiBDaGVjayBjb21wbGV0aW9uICovXHJcbiAgICAgICAgICAgICAgICB2bS5jb21wbGV0ZWRBbGwgPSBmaWxlTWFuYWdlckZhY3RvcnkuY2hlY2tVcGxvYWRDb21wbGV0aW9uKFxyXG4gICAgICAgICAgICAgICAgICB2bS51cGxvYWRWaWV3RmlsZXNcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAvKiBSZWZyZXNoIHZpZXcgd2l0aCBzY29wZSA+IGFwcGx5ICovXHJcbiAgICAgICAgICAgICAgICAkdGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkZpbGUgZGlkIG5vdCB1cGxvYWQgc3VjZXNzZnVsbHk6XCIsIHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfTtcclxuICBcclxuICAgICAgICAgIHVwbG9hZEZhY3Rvcnkuc3RhcnQodXBsb2FkSGFuZGxlcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICB2bS5maWxlc2Nsb3VkaW5hcnlVcGRhdGU9ZnVuY3Rpb24oYXJyYXkpe1xyXG4gICAgICAgIGlmIChhcnJheS5sZW5ndGgpIHtcclxuICAgICAgICAgICRzY29wZS5jbG91ZGluYXJ5UGF5bG9hZCA9IHtcclxuICAgICAgICAgICAgZmlsZXM6IGFycmF5LFxyXG4gICAgICAgICAgfTtcclxuICAgICAgICBcclxuICBcclxuICAgICAgICAgICAgYXBpRmFjdG9yeVxyXG4gICAgICAgICAgICAuaXNzdWVJbWFnZSgkc2NvcGUuY2xvdWRpbmFyeVBheWxvYWQpXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmVzcG9uc2Ugb2YgY2xvdWRpbmFyeTogXCIsIHJlc3AuZGF0YSk7XHJcbiAgICAgICAgICAgICAgLy8gdm0udXBsb2FkVmlld0ZpbGVzLmNsb3VkaW5hcnkgPSB2bS51cGxvYWRWaWV3RmlsZXMuY2xvdWRpbmFyeS5tYXAoXHJcbiAgICAgICAgICAgICAgLy8gICB4ID0+IHtcclxuICAgICAgICAgICAgICAvLyAgICAgeC5jb21wbGV0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIC8vICAgICByZXR1cm4geDtcclxuICAgICAgICAgICAgICAvLyAgIH1cclxuICAgICAgICAgICAgICAvLyApO1xyXG4gICAgICAgICAgICAgIC8qIENoZWNrIGNvbXBsZXRpb24gKi9cclxuICAgICAgICAgICAgICB2bS5jb21wbGV0ZWRBbGwgPSBmaWxlTWFuYWdlckZhY3RvcnkuY2hlY2tVcGxvYWRDb21wbGV0aW9uKFxyXG4gICAgICAgICAgICAgICAgdm0udXBsb2FkVmlld0ZpbGVzXHJcbiAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAvKiBSZWZyZXNoIHZpZXcgd2l0aCBzY29wZSA+IGFwcGx5ICovXHJcbiAgICAgICAgICAgICAgJHRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gIFxyXG4gICAgICAgICAgICAgIE5vdGlmaWNhdGlvbi5zdWNjZXNzKHJlc3AuZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICByZXR1cm4gXCJyZXNwb25zZSBmcm9tIGNsb3VkaW5hcnlcIjtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFwiTm8gZmlsZSBmb3VuZCB0byBzYXZlIG4gY2xvdWRpbmFyeVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICB2bS5zYXZlSXNzdWVEZXRhaWw9ZnVuY3Rpb24oaXNzdWVEYXRhKXtcclxuICAgICAgICB2YXIgaXNzdWVPYmplY3QgPSB7fTtcclxuICAgICAgICBpc3N1ZU9iamVjdC50aXRsZSA9ICBpc3N1ZURhdGEudGl0bGU7XHJcbiAgICAgICAgaXNzdWVPYmplY3QuZGVzY3JpcHRpb24gPSAgaXNzdWVEYXRhLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgIGlzc3VlT2JqZWN0LnByb2plY3QgPSAgaXNzdWVEYXRhLnByb2plY3QuX2lkO1xyXG4gICAgICAgIGlzc3VlT2JqZWN0Lmlzc3VlQ2F0ZWdvcnkgPSAgaXNzdWVEYXRhLmNhdGVnb3J5O1xyXG4gICAgICAgIGlzc3VlT2JqZWN0Lm93bmVySWQgPSBpc3N1ZURhdGEub3duZXIuX2lkO1xyXG4gICAgICAgIGlzc3VlT2JqZWN0LmRlYWRMaW5lID0gaXNzdWVEYXRhLmRlYWRMaW5lO1xyXG4gICAgICAgIGlmKGlzc3VlT2JqZWN0LmRlcGVuZGVuY3lPbil7XHJcbiAgICAgICAgIGlzc3VlT2JqZWN0LmRlcGVuZGVuY3lPbj1pc3N1ZURhdGEuZGVwZW5kZW5jeU9uLl9pZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAvLyBpc3N1ZU9iamVjdC5hc3NpZ25lZFRvPWlzc3VlRGF0YS5hc3NpZ25lZFRvLl9pZDtcclxuICAgICAgICBpc3N1ZU9iamVjdC5pc3N1ZVN0YXR1cz1pc3N1ZURhdGEuaXNzdWVTdGF0dXM7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJpc3N1ZU9iajpcIixpc3N1ZURhdGEpO1xyXG4gICAgICBcclxuICBcclxuICAgICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgICAuY3JlYXRlSXNzdWUoaXNzdWVPYmplY3QpXHJcbiAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgTm90aWZpY2F0aW9uLnN1Y2Nlc3MoXCJJc3N1ZSBoYXMgYmVlbiBzYXZlZCBzdWNjZXNzZnVsbHlcIik7XHJcbiAgICAgICAgICAgICRzY29wZS5pbnB1dEZpbGVzID0gW107XHJcbiAgICAgICAgICAgICRzY29wZS51cGRhdGVmb3JtPWZhbHNlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gJCgnI2lzc3VlX21vZGFsJykubW9kYWwoJ2hpZGUnKTtcclxuICAgICAgICAgICAgLy8gJCgnI2lzc3VlX21hcmtlcicpLm1vZGFsKCk7XHJcbiAgICAgICAgICAgIHZtLnNvcnRpc3N1ZXMoXCJjcmVhdGVkXCIsIFwidG9nZ2xlSXNzdWVcIik7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuXHJcbiAgICAgIFxyXG4gICAgICBcclxuICAgICAgdm0uQURESVNTVUUgPSBmdW5jdGlvbihpc3N1ZURhdGEpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGlzc3VlRGF0YSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAkc2NvcGUuZmlsZXNBcnJheT0kc2NvcGUuaW5wdXRGaWxlcztcclxuICAgICAgIHZtLnVwbG9hZFZpZXdGaWxlcyA9IGZpbGVNYW5hZ2VyRmFjdG9yeS5zcGxpdEZpbGVEZXN0KCRzY29wZS5maWxlc0FycmF5KTtcclxuXHJcbiAgICAgICB2YXIgaXNzdWVPYmplY3QgPSB7fTtcclxuICAgICAgIGlzc3VlT2JqZWN0LmFzc2lnbmVkVG89W107XHJcbiAgICAgICBpc3N1ZU9iamVjdC50aXRsZSA9ICBpc3N1ZURhdGEudGl0bGU7XHJcbiAgICAgICBpc3N1ZU9iamVjdC5kZXNjcmlwdGlvbiA9ICBpc3N1ZURhdGEuZGVzY3JpcHRpb247XHJcbiAgICAgICBpc3N1ZU9iamVjdC5wcm9qZWN0SWQgPSAgaXNzdWVEYXRhLnByb2plY3QuX2lkO1xyXG4gICAgICAgaXNzdWVPYmplY3QuaXNzdWVDYXRlZ29yeSA9ICBpc3N1ZURhdGEuY2F0ZWdvcnk7XHJcbiAgICAgICBpc3N1ZU9iamVjdC5vd25lcklkID0gaXNzdWVEYXRhLm93bmVyLl9pZDtcclxuICAgICAgIGlzc3VlT2JqZWN0LmRlYWRMaW5lID0gaXNzdWVEYXRhLmRlYWRMaW5lO1xyXG4gICAgICBcclxuICAgICAgICBpc3N1ZU9iamVjdC5kZXBlbmRlbmN5T249aXNzdWVEYXRhLmRlcGVuZGVuY3lPbi5faWQ7XHJcbiAgICAgICBcclxuICAgICAgIFxyXG4gICAgICAgaXNzdWVEYXRhLmFzc2lnbmVkVG8ubWFwKHg9PntcclxuICAgICAgICBpc3N1ZU9iamVjdC5hc3NpZ25lZFRvLnB1c2goeC5faWQpO1xyXG4gICAgICAgfSk7XHJcbiAgICAgICBpc3N1ZU9iamVjdC5pc3N1ZVN0YXR1cz1pc3N1ZURhdGEuaXNzdWVTdGF0dXM7XHJcbiAgICAgICBpc3N1ZU9iamVjdC5maWxlcz12bS51cGxvYWRWaWV3RmlsZXMuY2xvdWRpbmFyeTtcclxuICAgICAgIGNvbnNvbGUubG9nKFwiaXNzdWVPYmplY3Q6IFwiLGlzc3VlT2JqZWN0KTtcclxuICAgICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgICAuY3JlYXRlSXNzdWUoaXNzdWVPYmplY3QpXHJcbiAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgTm90aWZpY2F0aW9uLnN1Y2Nlc3MoXCJJc3N1ZSBoYXMgYmVlbiBzYXZlZCBzdWNjZXNzZnVsbHlcIik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3ApO1xyXG4gICAgICAgICAgICBpZih2bS51cGxvYWRWaWV3RmlsZXMuczMpe1xyXG4gICAgICAgICAgICAgIHZtLmZpbGVzM1VwZGF0ZSh2bS51cGxvYWRWaWV3RmlsZXMuczMscmVzcC5kYXRhKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgJHNjb3BlLmlucHV0RmlsZXMgPSBbXTtcclxuICAgICAgICAgICBcclxuICAgICAgICAgICAgdm0uaXNzdWVEYXRhID17fTtcclxuICAgICAgICAgICAgJCgnI2lzc3VlX21vZGFsJykubW9kYWwoJ2hpZGUnKTtcclxuICAgICAgICAgICAgJCgnI2lzc3VlX21hcmtlcicpLm1vZGFsKCdzaG93Jyk7XHJcbiAgICAgICAgICAgICB2bS5zb3J0aXNzdWVzKFwiY3JlYXRlZFwiLCBcInRvZ2dsZUlzc3VlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vdm0uc2F2ZWRJc3N1ZU9iamVjdCA9IHJlc3AuZGF0YTtcclxuICAgICAgICAgICBcclxuICAgICAgICAgICAvLyByZXR1cm4gcmVzcDtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgICBOb3RpZmljYXRpb24uZXJyb3IoXCJjb3VsZG4ndCBzYXZlIGlzc3VlXCIpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICB9O1xyXG5cclxuICAgICAgdm0ubG9jYWxGaWxlcz1bXTtcclxuICAgICAgJHNjb3BlLmdldEZpbGVzRnJvbUxvY2FsID0gZnVuY3Rpb24oZmlsZXMpe1xyXG4gICAgICAgY29uc29sZS5sb2coXCJsb2NhbCBmaWxlczogXCIsZmlsZXMpO1xyXG4gICAgICAgIGlmKGZpbGVzKXtcclxuICAgICAgICAgIGZpbGVzLmZvckVhY2gob25lZmlsZT0+e1xyXG4gICAgICAgICAgICB2YXIgU1JDID0gVVJMLmNyZWF0ZU9iamVjdFVSTChvbmVmaWxlKTtcclxuICAgICAgICAgICAgdm0ucGxhblRvTWFyay5wdXNoKHt1cmw6U1JDfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJhZnRlciBzcmMgY2FsbGVkXCIpO1xyXG4gICAgICAgICQoXCIjaXNzdWVfbWFya2VyXCIpLm1vZGFsKFwiaGlkZVwiKTtcclxuICAgICAgICB2YXIgZmlyc3RDYW52YXNJbWc9dm0ucGxhblRvTWFyay5zbGljZSgtMSk7XHJcbiAgICAgICAgICQoXCIjc2xpZGVDYW52YXNcIikuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLFwidXJsKFwiK2ZpcnN0Q2FudmFzSW1nWzBdLnVybCtcIilcIik7XHJcbiAgICAgICAgICBcclxuICAgICAgIC8vICAkKFwiI2xvY2FsZmlsZXNtb2RlbFwiKS5tb2RhbChcInNob3dcIik7XHJcbiAgICAgICBcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgIE5vdGlmaWNhdGlvbi5lcnJvcihcIk5vIEZpbGVzIHNlbGVjdGVkLlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gJChcIiNpc3N1ZV9tb2RhbFwiKS5tb2RhbChcImhpZGVcIik7XHJcbiAgICAgICAgLy8gJChcIiNpc3N1ZV9tYXJrZXJcIikubW9kYWwoXCJzaG93XCIpO1xyXG5cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICBcclxuICAgICAgJCggXCIjaXNzdWVfbWFya2VyXCIpLm9uKCdoaWRkZW4uYnMubW9kYWwnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIC8vIGFsZXJ0KFwibG9jYWxwb3B1cFwiKTtcclxuICAgICAgXHJcbiAgICAgICAgICAkKHRoaXMpLnJlbW92ZURhdGEoJ2JzLm1vZGFsJyk7XHJcbiAgICAgICAgICBpZigkKCcjY2hvb3NlSXNzdWVSb29mTW9kYWwnKS5pcygnOnZpc2libGUnKSl7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIk1vZGFsIGlzIG9wZW5cIik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIk1vZGFsIGlzIGNsb3NlZFwiKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5tb2RhbChcInNob3dcIik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICBcclxuICAgICAgIFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgICRzY29wZS5nZXRJbWFnZXNJbkNhcm9zZWwgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBwcm9qZWN0SUQ9JzU4ZWI5ZDJlYzkyMWQ2NzAzNjc4NzgzMic7XHJcbiAgICAgICAgXHJcbiAgICAgICAgYXBpRmFjdG9yeVxyXG4gICAgICAgIC5nZXRQcm9qZWN0Um9vZlBsYW5zKHByb2plY3RJRClcclxuICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgIC8vJChcIiNpc3N1ZV9tb2RhbFwiKS5tb2RhbChcImhpZGVcIik7XHJcbiAgICAgICAgICBsZXQgUHJvamVjdFBsYW5zID0gcmVzcC5kYXRhLmRhdGE7XHJcbiAgICAgICAgICB2bS5wbGFuUGlja2VyUGxhbnMgPSBQcm9qZWN0UGxhbnM7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcInBsYW5waWNrZXI6IFwiLHZtLnBsYW5QaWNrZXJQbGFucyk7XHJcbiAgICAgICAgICAkKFwiI2lzc3VlX21hcmtlclwiKS5tb2RhbChcImhpZGVcIik7XHJcbiAgICAgICAgICAkKFwiI2Nob29zZUlzc3VlUm9vZk1vZGFsXCIpLm1vZGFsKFwic2hvd1wiKTtcclxuICAgICAgICAgXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgfVxyXG4gXHJcbiAgICAgIHZtLmNob29zZVBsYW5EYXRhID0gZnVuY3Rpb24ocGxhbil7XHJcbiAgICAgICAgIHZtLnBsYW5Ub01hcmsucHVzaChwbGFuLmFzc2V0T2JqKTtcclxuICAgICAgICAvLyAgY29uc29sZS5sb2codm0ucGxhblRvTWFyayk7XHJcbiAgICAgIH1cclxuICAgICAgLy9UZXN0IHBhblxyXG4gICAgICB2bS5jaG9vc2VQbGFuRGF0YTEgPSBmdW5jdGlvbihwbGFuKXtcclxuICAgICAgICB2bS5wbGFuVG9NYXJrLnB1c2gocGxhbik7XHJcbiAgICAgICAvLyAgY29uc29sZS5sb2codm0ucGxhblRvTWFyayk7XHJcbiAgICAgfVxyXG5cclxuICAgICAgJHNjb3BlLmFkZFRvRGV0YWlscyA9IGZ1bmN0aW9uKGltZ2FycmF5KXtcclxuICAgICAgICAkKFwiI2Nob29zZUlzc3VlUm9vZk1vZGFsXCIpLm1vZGFsKFwiaGlkZVwiKTtcclxuICAgICAgICAkKFwiI2lzc3VlX21hcmtlclwiKS5tb2RhbChcInNob3dcIik7XHJcbiAgICAgICBjb25zb2xlLmxvZyhcInZtLnBsYW4gdG8gbXJrOlwiLCB2bS5wbGFuVG9NYXJrKTtcclxuXHJcblxyXG4gICAgICAgIHZhciBmaXJzdENhbnZhc0ltZz1pbWdhcnJheS5zbGljZSgtMSk7XHJcbiAgICAgICAgJChcIiNzbGlkZUNhbnZhc1wiKS5jc3MoXCJiYWNrZ3JvdW5kLWltYWdlXCIsXCJ1cmwoXCIrZmlyc3RDYW52YXNJbWdbMF0udXJsK1wiKVwiKTtcclxuICAgICAgIFxyXG4gICAgICBcclxuICAgICAgfVxyXG5cclxuICAgICAgXHJcblxyXG4gICAgICAvL3Rlc3QgZ2V0IGRldGFpbHNcclxuICAgICAgJHNjb3BlLmFkZFRvRGV0YWlsczEgPSBmdW5jdGlvbihpbWdhcnJheSl7XHJcbiAgICAgICAgJChcIiNsb2NhbGZpbGVzbW9kZWxcIikubW9kYWwoXCJoaWRlXCIpO1xyXG4gICAgICAgICQoXCIjaXNzdWVfbWFya2VyXCIpLm1vZGFsKFwic2hvd1wiKTtcclxuICAgICAgIFxyXG4gICAgICAgIHZhciBmaXJzdENhbnZhc0ltZz1pbWdhcnJheS5zbGljZSgtMSk7XHJcbiAgICAgICAgICQoXCIjc2xpZGVDYW52YXNcIikuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLFwidXJsKFwiK2ZpcnN0Q2FudmFzSW1nWzBdLnVybCtcIilcIik7XHJcbiAgICAgICBcclxuICAgICAgXHJcbiAgICAgIH1cclxuXHJcbiAgICAgICRzY29wZS5nZXREZXRhaWwgPSBmdW5jdGlvbihpc3N1ZSl7XHJcbiAgICAgICAgJCgnI2lzc3VlZGV0YWlsJykubW9kYWwoKTtcclxuICAgICAgICAkc2NvcGUuaXNzdWVNb2RlbCA9IGlzc3VlO1xyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS5UaXRsZT0gICRzY29wZS5pc3N1ZU1vZGVsLnRpdGxlO1xyXG4gICAgICAgICRzY29wZS5EZXNjcmlwdGlvbj0gJHNjb3BlLmlzc3VlTW9kZWwuZGVzY3JpcHRpb247XHJcbiAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLkRlYWRMaW5lRGF0ZSA9bmV3IERhdGUoJHNjb3BlLmlzc3VlTW9kZWwuZGVhZExpbmUpO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVhZGxpbmVcIikuZGVmYXVsdFZhbHVlID0kc2NvcGUuRGVhZExpbmVEYXRlO1xyXG4gICAgICAgICRzY29wZS5kYXkgPSAkc2NvcGUuRGVhZExpbmVEYXRlLmdldERhdGUoKS0xO1xyXG4gICAgICAgXHJcbiAgICAgICAgJHNjb3BlLm1vbnRoID0gJHNjb3BlLkRlYWRMaW5lRGF0ZS5nZXRNb250aCgpKzE7XHJcbiAgICAgICBcclxuICAgICAgICAkc2NvcGUueWVhciA9ICRzY29wZS5EZWFkTGluZURhdGUuZ2V0RnVsbFllYXIoKTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmRlYWRMaW5lRGF0ZSA9ICAkc2NvcGUubW9udGgrXCIvXCIrJHNjb3BlLmRheStcIi9cIisgJHNjb3BlLnllYXI7XHJcbiAgICAgICBcclxuICAgICAgIFxyXG4gICAgICAgICRzY29wZS5TdGF0dXMgPSAkc2NvcGUuaXNzdWVNb2RlbC5pc3N1ZVN0YXR1cztcclxuICAgICAgICBcclxuICAgICAgIFxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAkc2NvcGUuYWRkRmlsZVRvVXBkYXRlID0gZnVuY3Rpb24oZmlsZSxjb21tZW50KXtcclxuICAgICAgICAkc2NvcGUuaW5wdXRGaWxlcy5wdXNoKHtmaWxlOmZpbGUsY29tbWVudDpjb21tZW50fSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmlucHV0RmlsZXMpO1xyXG4gICAgICAgICRzY29wZS5maWxlPScnO1xyXG4gICAgICAgICRzY29wZS5jb21tZW50PScnO1xyXG4gICAgICB9XHJcbiAgICAgXHJcblxyXG4gICAgICAkc2NvcGUudXBkYXRlUmVxdWVzdCA9IGZ1bmN0aW9uKHVwZGF0ZW9iail7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJ0byB1cGRhdGUgZGF0YVwiLHVwZGF0ZW9iaik7XHJcbiAgICAgICBcclxuICAgICAgICAkc2NvcGUudXBkYXRlZm9ybSA9IHRydWU7XHJcbiAgICAgICAgJHNjb3BlLm9wZW5FZGl0PWZhbHNlO1xyXG4gICAgICAgIFxyXG4gICAgICB9XHJcblxyXG4gICAgICAkc2NvcGUucmVtb3ZlRmlsZXMgPSBmdW5jdGlvbihpbmRleCxhcnJheSxpbWFnZUlkKXtcclxuICAgICAgICBhcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwicmVtb3ZpbmcgZmlsZXNcIixcImluZGV4XCIsaW5kZXgsXCJpbWFnZUlkXCIsaW1hZ2VJZCk7XHJcbiAgICAgICAgJHNjb3BlLmZpbGVzVG9SZW1vdmUucHVzaChpbWFnZUlkKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInJlbW92aW5nIGZpbGVzXCIsJHNjb3BlLmZpbGVzVG9SZW1vdmUpO1xyXG4gICAgICB9XHJcbiAgICAgIHZtLmNsb3NlVXBkdGVNb2RlbCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLnVwZGF0ZWZvcm09ZmFsc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgJHNjb3BlLm9wZW5FZGl0RGF0ZSA9IGZ1bmN0aW9uKCl7XHJcbiAgIFxyXG4gICAgICAgJHNjb3BlLm9wZW5FZGl0PXRydWU7XHJcbiAgICAgfVxyXG4gICAgICRzY29wZS5jbG9zZUVkaXREYXRlID0gZnVuY3Rpb24oKXtcclxuICAgICBcclxuICAgICAgJHNjb3BlLm9wZW5FZGl0PWZhbHNlO1xyXG4gICAgIH1cclxuXHJcbiAgICAgIHZtLnVwZGF0ZUlzc3VlRGV0YWlscyA9IGZvcm1EYXRhID0+IHtcclxuICAgICAgIFxyXG4gICAgICAgIHZhciBpc3N1ZU9iamVjdD17fTtcclxuICAgICAgICBpZih2bS51cGRhdGVJc3N1ZT09dW5kZWZpbmVkKXtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFwidXBkYXRlIGlzc3VlIGlzIHVuZGVmaW5lZFwiKTtcclxuICAgICAgICAgIGlzc3VlT2JqZWN0LlRpdGxlID0gICRzY29wZS5pc3N1ZU1vZGVsLnRpdGxlO1xyXG4gICAgICAgICAgaXNzdWVPYmplY3QuZGVzY3JpcHRpb24gPSAkc2NvcGUuaXNzdWVNb2RlbC5kZXNjcmlwdGlvbjtcclxuICAgICAgICAgIGlzc3VlT2JqZWN0LmRlYWRMaW5lPSRzY29wZS5pc3N1ZU1vZGVsLmRlYWRMaW5lO1xyXG4gICAgICAgICAgaXNzdWVPYmplY3QuaXNzdWVTdGF0dXM9JHNjb3BlLmlzc3VlTW9kZWwuaXNzdWVTdGF0dXM7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcInVwZGF0ZSBpc3V1ZSBpcyBub3QgdW5kZmluZWQgc28gaW4gZXNsZSBjYXNlXCIpO1xyXG4gICAgICAgICAgaWYodm0udXBkYXRlSXNzdWUudGl0bGU9PXVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIGlzc3VlT2JqZWN0LlRpdGxlID0gICRzY29wZS5pc3N1ZU1vZGVsLnRpdGxlO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBpc3N1ZU9iamVjdC5UaXRsZSA9ICB2bS51cGRhdGVJc3N1ZS50aXRsZTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICAgICAgaWYodm0udXBkYXRlSXNzdWUuZGVzY3JpcHRpb249PXVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIGlzc3VlT2JqZWN0LmRlc2NyaXB0aW9uID0gJHNjb3BlLmlzc3VlTW9kZWwuZGVzY3JpcHRpb247XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIGlzc3VlT2JqZWN0LmRlc2NyaXB0aW9uID0gdm0udXBkYXRlSXNzdWUuZGVzY3JpcHRpb247XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgICAgIGlmKHZtLnVwZGF0ZUlzc3VlLmRlYWRMaW5lPT11bmRlZmluZWQpe1xyXG5cclxuICAgICAgICAgICAgaXNzdWVPYmplY3QuZGVhZExpbmU9JHNjb3BlLmlzc3VlTW9kZWwuZGVhZExpbmU7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICBpc3N1ZU9iamVjdC5kZWFkTGluZT12bS51cGRhdGVJc3N1ZS5kZWFkTGluZTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICAgICAgaWYodm0udXBkYXRlSXNzdWUuaXNzdWVTdGF0dXM9PXVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIGlzc3VlT2JqZWN0Lmlzc3VlU3RhdHVzPSRzY29wZS5pc3N1ZU1vZGVsLmlzc3VlU3RhdHVzO1xyXG4gICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBpc3N1ZU9iamVjdC5pc3N1ZVN0YXR1cz12bS51cGRhdGVJc3N1ZS5pc3N1ZVN0YXR1cztcclxuICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKCRzY29wZS5pbnB1dEZpbGVzLmxlbmd0aD4wKXtcclxuICAgICAgICAgIGlzc3VlT2JqZWN0LmZpbGVzID0gJHNjb3BlLmlucHV0RmlsZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKCRzY29wZS5maWxlc1RvUmVtb3ZlLmxlbmd0aD4wKXtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFwiZmlsZXMgdG8gcmVtb3ZlXCIsJHNjb3BlLmZpbGVzVG9SZW1vdmUpO1xyXG4gICAgICAgICAgaXNzdWVPYmplY3QucmVtb3ZlZEZpbGVzID0gJHNjb3BlLmZpbGVzVG9SZW1vdmU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiSVNVVUVPQkpFQ1RcIiwgaXNzdWVPYmplY3QpO1xyXG4gICAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAudXBkYXRlSXNzdWUoaXNzdWVPYmplY3QsJHNjb3BlLmlzc3VlTW9kZWwuX2lkKVxyXG4gICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgTm90aWZpY2F0aW9uLnN1Y2Nlc3MoXCJJc3N1ZSBoYXMgYmVlbiB1cGRhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcclxuICAgICAgICAgICRzY29wZS5pbnB1dEZpbGVzID0gW107XHJcbiAgICAgICAgICAkc2NvcGUuZmlsZXNUb1JlbW92ZT1bXTtcclxuICAgICAgICAgICRzY29wZS51cGRhdGVmb3JtPWZhbHNlO1xyXG4gICAgICAgICAgJCgnI2lzc3VlZGV0YWlsJykubW9kYWwoJ2hpZGUnKVxyXG4gICAgICAgICAgdm0uc29ydGlzc3VlcyhcImNyZWF0ZWRcIiwgXCJ0b2dnbGVJc3N1ZVwiKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgJHNjb3BlLmlucHV0RmlsZXMgPSBbXTtcclxuICAgICAgICAgICRzY29wZS5maWxlc1RvUmVtb3ZlPVtdO1xyXG4gICAgICAgICAgJHNjb3BlLnVwZGF0ZWZvcm09ZmFsc2U7XHJcbiAgICAgICAgICBOb3RpZmljYXRpb24uZXJyb3IoXCJTb21ldGhpbmcgd2VudCB3cm9uZ1wiKTtcclxuICAgICAgICB9KTtcclxuICAgICAgIFxyXG4gICAgICB9XHJcblxyXG4gICAgIFxyXG4gICAgICAkc2NvcGUuaW1hZ2VUZW1wVXJsPVwiLi4vYXNzZXRzL2ltYWdlcy9yb29mdGVzdGltYWdlcy9pbWFnZTEuanBnXCI7XHJcbiAgICAgICRzY29wZS5yb29mdGVzdERlbW89ZnVuY3Rpb24oc3RyaW5nKXtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInN0cmluZ1wiLHN0cmluZyk7XHJcbiAgICAgICAgJHNjb3BlLmltYWdlVGVtcFVybD1cIi4uXCIrc3RyaW5nO1xyXG4gICAgICAgXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIFxyXG5cclxuICAgICAgJHNjb3BlLmNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbGlkZUNhbnZhcycpO1xyXG4gICAgJCggXCIjaXNzdWVfbWFya2VyXCIpLm9uKCdzaG93bi5icy5tb2RhbCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgIFxyXG4gICAgXHJcbiAgICAgJChcIiNjYXJvdXNlbGxpc3RcIikuZmxleHNsaWRlcih7XHJcbiAgICAgIGFuaW1hdGlvbjogXCJzbGlkZVwiLFxyXG4gICAgICBjb250cm9sTmF2OiBmYWxzZSxcclxuICAgICAgYW5pbWF0aW9uTG9vcDogZmFsc2UsXHJcbiAgICAgIHNsaWRlc2hvdzogZmFsc2UsXHJcbiAgICAgIGl0ZW1XaWR0aDogMjAwLFxyXG4gICAgICBpdGVtTWFyZ2luOiAzLFxyXG4gICAgIFxyXG4gICAgfSk7XHJcbiAgICAvLyRzY29wZS5jYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2xpZGVDYW52YXMnKTtcclxuICAgIFxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgXHJcbiAgICAkc2NvcGUub3BlblNsaWRlckltYWdlID1mdW5jdGlvbih1cmwsaW5kZXgpe1xyXG4gICAgICBjb25zb2xlLmxvZyhcInVybDogXCIsdXJsKTtcclxuICAgICAkKFwiI3NsaWRlQ2FudmFzXCIpLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIixcInVybChcIit1cmwrXCIpXCIpO1xyXG4gICAgXHJcbiAgICB9XHJcblxyXG4gICAgLy9DQU5WQVMgTUVUSE9EUyBFVkVOVFNcclxuICAgICRzY29wZS5pc0xpbmU9ZmFsc2U7XHJcbiAgICAkc2NvcGUuaXNDaXJjbGU9ZmFsc2U7XHJcbiAgICAkc2NvcGUuaXNNYXJrZXI9ZmFsc2U7XHJcbiAgICAkc2NvcGUuaXNUZXh0PWZhbHNlO1xyXG4gICBcclxuICAgICRzY29wZS5kcmF3TGluZU9uQ2FudmFzID0gZnVuY3Rpb24oKXtcclxuICAgICAgJHNjb3BlLm9wZW5GaWxsQ29sb3I9ZmFsc2U7XHJcbiAgICAgICRzY29wZS5zbmFwc2hvdDtcclxuICAgICAgJHNjb3BlLnRleHRGb3JtPWZhbHNlO1xyXG4gICAgICAkc2NvcGUuZHJhZ2dpbmc9ZmFsc2U7XHJcbiAgICAgICRzY29wZS5kcmFnU3RhcnRMb2NhdGlvbjtcclxuICAgICAgJCgnI2dwc2J0bicpLmNzcyhcImJhY2tncm91bmQtY29sb3JcIixcIiNEM0QzRDNcIik7XHJcblxyXG4gICAgICAkc2NvcGUuYnRuTWFya2VyPVwiLi4vYXNzZXRzL2ltYWdlcy9ncHMucG5nXCI7XHJcbiAgICAgICRzY29wZS5idG5DaXJjbGU9XCIuLi9hc3NldHMvaW1hZ2VzL2NpcmNsZS1zaGFwZS1vdXRsaW5lLnBuZ1wiO1xyXG4gICAgICAkc2NvcGUuYnRuTGluZT1cIi4uL2Fzc2V0cy9pbWFnZXMvbGluZXdoaXRlLnBuZ1wiO1xyXG4gICAgICAkc2NvcGUuYnRuVGV4dD1cIi4uL2Fzc2V0cy9pbWFnZXMvdGV4dC1vcHRpb24taW50ZXJmYWNlLXN5bWJvbC5wbmdcIjtcclxuXHJcblxyXG4gICAgICAkKCcjdHh0YnRuJykuY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiLFwiI0QzRDNEM1wiKTtcclxuICAgICAgICQoJyNjaXJjbGVidG4nKS5jc3MoXCJiYWNrZ3JvdW5kLWNvbG9yXCIsXCIjRDNEM0QzXCIpO1xyXG4gICAgICAgJCgnI2xpbmVidXR0b24nKS5jc3MoXCJiYWNrZ3JvdW5kLWNvbG9yXCIsXCIjMDA5QUNEXCIpO1xyXG4gICAgICAkc2NvcGUuY29udGV4dD0kc2NvcGUuY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICBcclxuICAgICAgJHNjb3BlLnJlY3QgPSAkc2NvcGUuY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICBpZigkc2NvcGUuaXNDaXJjbGU9PXRydWV8fCRzY29wZS5pc01hcmtlcj09dHJ1ZXx8JHNjb3BlLmlzVGV4dD09dHJ1ZSl7XHJcbiAgICAgICAgJHNjb3BlLmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLGRyYWdTdGFydCk7XHJcbiAgICAgICAgJHNjb3BlLmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLGRyYWcpO1xyXG4gICAgICAgICRzY29wZS5jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsZHJhZ1N0b3ApO1xyXG4gICAgICAgICRzY29wZS5jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJyxNYXJrV3JpdGUpO1xyXG4gICAgICAgICRzY29wZS5jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJyxUZXh0V3JpdGUpO1xyXG5cclxuICAgIH1cclxuICAgICAgJHNjb3BlLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLGRyYWdTdGFydExpbmUpO1xyXG4gICAgICAkc2NvcGUuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsZHJhZ0xpbmUpO1xyXG4gICAgICAkc2NvcGUuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLGRyYWdTdG9wTGluZSk7XHJcblxyXG4gICAgfVxyXG4gICBcclxuXHJcbiAgICAvL0xpbmUgRnVuY3Rpb25zXHJcbiAgICBmdW5jdGlvbiBkcmFnU3RhcnRMaW5lKGUpe1xyXG4gICAgICAkc2NvcGUuaXNMaW5lPXRydWU7XHJcbiAgICAgICRzY29wZS5kcmFnZ2luZz10cnVlO1xyXG4gICAgICAgIHZhciB4PSBNYXRoLmZsb29yKCAoIGUuY2xpZW50WCAtICRzY29wZS5yZWN0LmxlZnQgKSAvICggJHNjb3BlLnJlY3QucmlnaHQgLSAkc2NvcGUucmVjdC5sZWZ0ICkgKiAkc2NvcGUuY2FudmFzLndpZHRoICksXHJcbiAgICAgICAgIHk9TWF0aC5mbG9vciggKCBlLmNsaWVudFkgLSAkc2NvcGUucmVjdC50b3AgKSAvICggJHNjb3BlLnJlY3QuYm90dG9tIC0gJHNjb3BlLnJlY3QudG9wICkgKiAkc2NvcGUuY2FudmFzLmhlaWdodCApXHJcbiAgICAgICAgJHNjb3BlLmRyYWdTdGFydExvY2F0aW9uPSB7J1gnOngsJ1knOnl9O1xyXG4gICAgICAgICRzY29wZS5zbmFwc2hvdD0kc2NvcGUuY29udGV4dC5nZXRJbWFnZURhdGEoMCwwLCRzY29wZS5jYW52YXMud2lkdGgsJHNjb3BlLmNhbnZhcy5oZWlnaHQpO1xyXG4gICAgIFxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gZHJhZ0xpbmUoZSl7XHJcbiAgICAgIHZhciBwb3NpdGlvbjtcclxuICAgICAgdmFyIHg9TWF0aC5mbG9vciggKCBlLmNsaWVudFggLSAkc2NvcGUucmVjdC5sZWZ0ICkgLyAoICRzY29wZS5yZWN0LnJpZ2h0IC0gJHNjb3BlLnJlY3QubGVmdCApICogJHNjb3BlLmNhbnZhcy53aWR0aCApLFxyXG4gICAgICB5PU1hdGguZmxvb3IoICggZS5jbGllbnRZIC0gJHNjb3BlLnJlY3QudG9wICkgLyAoICRzY29wZS5yZWN0LmJvdHRvbSAtICRzY29wZS5yZWN0LnRvcCApICogJHNjb3BlLmNhbnZhcy5oZWlnaHQgKVxyXG4gICAgICBpZigkc2NvcGUuZHJhZ2dpbmc9PT10cnVlKXtcclxuICAgICAgICAkc2NvcGUuY29udGV4dC5wdXRJbWFnZURhdGEoJHNjb3BlLnNuYXBzaG90LDAsMCk7XHJcbiAgICAgICAgcG9zaXRpb249eydYJzp4LCdZJzp5fTtcclxuICAgICAgICAkc2NvcGUuY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICAkc2NvcGUuY29udGV4dC5tb3ZlVG8oJHNjb3BlLmRyYWdTdGFydExvY2F0aW9uLlgsJHNjb3BlLmRyYWdTdGFydExvY2F0aW9uLlkpO1xyXG4gICAgICAgICRzY29wZS5jb250ZXh0LmxpbmVUbyhwb3NpdGlvbi5YLHBvc2l0aW9uLlkpO1xyXG4gICAgICAgICRzY29wZS5jb250ZXh0LnN0cm9rZVN0eWxlID0gJHNjb3BlLmNvbG9ycGljaztcclxuICAgICAgICAkc2NvcGUuY29udGV4dC5saW5lV2lkdGg9MjtcclxuICAgICAgICAkc2NvcGUuY29udGV4dC5saW5lQ2FwPSdyb3VuZCc7XHJcbiAgICAgICAgJHNjb3BlLmNvbnRleHQuc3Ryb2tlKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGRyYWdTdG9wTGluZShlKXtcclxuICAgICAgICAkc2NvcGUuZHJhZ2dpbmc9ZmFsc2U7XHJcbiAgICAgICAgJHNjb3BlLmNvbnRleHQucHV0SW1hZ2VEYXRhKCRzY29wZS5zbmFwc2hvdCwwLDApO1xyXG4gICAgICAgIHZhciBwb3NpdGlvbjtcclxuICAgICAgICB2YXIgeD1NYXRoLmZsb29yKCAoIGUuY2xpZW50WCAtICRzY29wZS5yZWN0LmxlZnQgKSAvICggJHNjb3BlLnJlY3QucmlnaHQgLSAkc2NvcGUucmVjdC5sZWZ0ICkgKiAkc2NvcGUuY2FudmFzLndpZHRoICksXHJcbiAgICAgICAgeT1NYXRoLmZsb29yKCAoIGUuY2xpZW50WSAtICRzY29wZS5yZWN0LnRvcCApIC8gKCAkc2NvcGUucmVjdC5ib3R0b20gLSAkc2NvcGUucmVjdC50b3AgKSAqICRzY29wZS5jYW52YXMuaGVpZ2h0IClcclxuICAgICAgICBwb3NpdGlvbj17J1gnOngsJ1knOnl9O1xyXG4gICAgICAgLy8gY29uc29sZS5sb2coXCJkcmFnIGxvY2F0aW9uXCIscG9zaXRpb24uWCxwb3NpdGlvbi5ZKTtcclxuICAgICAgICAkc2NvcGUuY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICAkc2NvcGUuY29udGV4dC5tb3ZlVG8oJHNjb3BlLmRyYWdTdGFydExvY2F0aW9uLlgsJHNjb3BlLmRyYWdTdGFydExvY2F0aW9uLlkpO1xyXG4gICAgICAgICRzY29wZS5jb250ZXh0LmxpbmVUbyhwb3NpdGlvbi5YLHBvc2l0aW9uLlkpO1xyXG4gICAgICAgICRzY29wZS5jb250ZXh0LnN0cm9rZVN0eWxlID0gJHNjb3BlLmNvbG9ycGljaztcclxuICAgICAgICAkc2NvcGUuY29udGV4dC5saW5lV2lkdGg9MjtcclxuICAgICAgICAkc2NvcGUuY29udGV4dC5saW5lQ2FwPSdyb3VuZCc7XHJcbiAgICAgICAgJHNjb3BlLmNvbnRleHQuc3Ryb2tlKCk7XHJcbiAgICAgICB2YXIgaW1hZ2VEYXRhID0gJHNjb3BlLmNvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsMCwkc2NvcGUuY2FudmFzLndpZHRoLCRzY29wZS5jYW52YXMuaGVpZ2h0KTtcclxuICAgICAgICRzY29wZS5VbmRvQXJyYXkucHVzaChpbWFnZURhdGEpO1xyXG4gICAgICAgY29uc29sZS5sb2coXCJ1bmRvQXJyYXk6IFwiLCRzY29wZS5VbmRvQXJyYXkpO1xyXG4gICAgICAgXHJcbiAgICB9XHJcblxyXG4gICBcclxuXHJcbiAgICBcclxuXHJcbiAgICAkc2NvcGUuVW5kb0RyYXdpbmcgPSBmdW5jdGlvbigpe1xyXG4gICAgICBpZigkc2NvcGUuVW5kb0FycmF5Lmxlbmd0aD4wKXtcclxuICAgICAgICAgdmFyIHVuZG9DdHggPSAkc2NvcGUuY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgICAgIHVuZG9DdHguY2xlYXJSZWN0KDAsMCwkc2NvcGUuY2FudmFzLndpZHRoLCRzY29wZS5jYW52YXMuaGVpZ2h0KTtcclxuICAgICAgICAgdmFyIGltZ2RhdGE9JHNjb3BlLlVuZG9BcnJheS5wb3AoKTtcclxuICAgICAgICAgJHNjb3BlLnJlZG9BcnJheS5wdXNoKGltZ2RhdGEpO1xyXG4gICAgICAgXHJcbiAgICAgICAgICRzY29wZS5VbmRvQXJyYXkuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgdW5kb0N0eC5wdXRJbWFnZURhdGEoZWxlbWVudCwwLDApO1xyXG4gICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgIFxyXG4gICAgJHNjb3BlLlJlZG9EcmF3aW5nID0gZnVuY3Rpb24oKXtcclxuICAgICAgdmFyIHVuZG9DdHggPSAkc2NvcGUuY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgIGlmKCRzY29wZS5yZWRvQXJyYXkubGVuZ3RoPjApe1xyXG4gICAgICAgIHZhciByZWRvID0gJHNjb3BlLnJlZG9BcnJheS5wb3AoKTtcclxuICAgICAgICBcclxuICAgICAgICB1bmRvQ3R4LnB1dEltYWdlRGF0YShyZWRvLDAsMCk7XHJcbiAgICAgICBcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZtLnNhdmVNYXJrSW5mbz1mdW5jdGlvbigpe1xyXG4gICAgICB2YXIgbGluayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW5rJyk7XHJcbiAgbGluay5zZXRBdHRyaWJ1dGUoJ2Rvd25sb2FkJywgJ01pbnR5UGFwZXIucG5nJyk7XHJcbiAgbGluay5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCAkc2NvcGUuY2FudmFzLnRvRGF0YVVSTChcImltYWdlL3BuZ1wiKS5yZXBsYWNlKFwiaW1hZ2UvcG5nXCIsIFwiaW1hZ2Uvb2N0ZXQtc3RyZWFtXCIpKTtcclxuICBsaW5rLmNsaWNrKCk7XHJcbiAgICAvLyAgIHZhciBpbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgLy8gIHZhciBkdD0gJHNjb3BlLmNhbnZhcy50b0RhdGFVUkwoXCJpbWFnZS9wbmdcIik7XHJcbiAgICAvLyAgIGNvbnNvbGUubG9nKFwidm0uSU1HU1RPUkUgaW4gcG5nOiBcIixkdCk7XHJcbiAgICAvLyAgIHVybHRvRmlsZShkdCwgJ2hlbGxvLnBuZycsICdpbWFnZS9wbmcnKVxyXG4gICAgLy8gLnRoZW4oZnVuY3Rpb24oZmlsZSl7XHJcbiAgICAvLyAgIHZtLklNR1NUT1JFID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcclxuICAgIC8vICAgY29uc29sZS5sb2coXCJGSUxFIFNSQzogXCIsdm0uSU1HU1RPUkUpO1xyXG4gICAgICAvLyAgIGFwaUZhY3RvcnkucG9zdE1hcmtJbWcoZmlsZSkudGhlbihyZXNwPT57XHJcbiAgICAgIC8vICAgIGNvbnNvbGUubG9nKHJlc3ApO1xyXG4gICAgICAvLyAgICBjb25zb2xlLmxvZyhcIkNPTlZFUlRFRCBGSUxFOiBcIixmaWxlKTtcclxuICAgICAgLy8gfSlcclxuICAvLyB9KVxyXG4gICAgICBcclxuICAgIH1cclxuXHJcbiAgIC8vcmV0dXJuIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYSBGaWxlIGluc3RhbmNlXHJcbiAgZnVuY3Rpb24gdXJsdG9GaWxlKHVybCwgZmlsZW5hbWUsIG1pbWVUeXBlKXtcclxuICByZXR1cm4gKGZldGNoKHVybClcclxuICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKXtyZXR1cm4gcmVzLmFycmF5QnVmZmVyKCk7fSlcclxuICAgICAgLnRoZW4oZnVuY3Rpb24oYnVmKXtyZXR1cm4gbmV3IEZpbGUoW2J1Zl0sIGZpbGVuYW1lLCB7dHlwZTptaW1lVHlwZX0pO30pXHJcbiAgKTtcclxufVxyXG4gICAgXHJcblxyXG4gIH1cclxufSkoKTsiLCIoKCkgPT4ge1xyXG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJtYXRlcmlhbEN0cmxcIiwgbWF0ZXJpYWxDdHJsKTtcclxuXHJcbiAgZnVuY3Rpb24gbWF0ZXJpYWxDdHJsKFxyXG4gICAgJHNjb3BlLFxyXG4gICAgJHRpbWVvdXQsXHJcbiAgICBhdXRoRmFjdG9yeSxcclxuICAgICRzdGF0ZSxcclxuICAgIGFwaUZhY3RvcnksXHJcbiAgICBOb3RpZmljYXRpb24sXHJcbiAgICBnbG9iYWxzLFxyXG4gICAgTmdNYXAsXHJcbiAgICBVcGxvYWQsXHJcbiAgICBtb21lbnRcclxuICApIHtcclxuICAgIC8qIFJlcXVpcmluZyB2YXJzICovXHJcbiAgICBsZXQgdm0gPSB0aGlzO1xyXG4gICAgY29uc3QgeyBsb2dvdXQsIHVzZXJTdG9yZSwgZGVib3VuY2UgfSA9IGdsb2JhbHM7XHJcbiAgICBpZiAoIWF1dGhGYWN0b3J5LmNoZWNrVXNlcigpKSB7XHJcbiAgICAgIGxvZ291dCgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLyogR2V0IHByb2plY3QgbGlzdCAqL1xyXG4gICAgdm0udXNlckRhdGEgPSB1c2VyU3RvcmUuZ2V0KCk7XHJcblxyXG4gICAgdm0ubG9nb3V0ID0gKCkgPT4ge1xyXG4gICAgICBsb2dvdXQoKTtcclxuICAgIH07XHJcblxyXG4gICAgXHJcbiAgICB2bS5pbnB1dEltZyA9IFtdO1xyXG4gICAgdm0uaW5wdXRGaWxlcyA9IFtdO1xyXG4gICAgLyogRGF0YSB0YWJsZSBzZXR1cCAqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAgIHZtLmR0T3B0aW9ucyA9IHtcclxuICAgICAgcmV0cmlldmU6IHRydWUsXHJcbiAgICAgIHBhZ2luZzogZmFsc2UsXHJcbiAgICAgIGluZm86IGZhbHNlLFxyXG4gICAgICBvcmRlcmluZzogZmFsc2VcclxuICAgIH07XHJcblxyXG4gICAgLy8gJChcIi5tYXRlcmlhbExpc3RcIikuRGF0YVRhYmxlKCk7XHJcblxyXG4gICAgLyogU2V0dGluZyB1cCBpbnZlbnRvcnkgc3RhdGUgKi9cclxuICAgIGNvbnN0IGludmVudG9yeVN0YXRlID0gZ2xvYmFscy5pbnZlbnRvcnlTdGF0ZSgpO1xyXG4gICAgdm0uYWN0aXZlVGFiID0gaW52ZW50b3J5U3RhdGUuZ2V0KCkudGFiO1xyXG4gICAgJChcIi50YWItY29udGVudCAudGFiLXBhbmVcIilcclxuICAgICAgLmVxKGludmVudG9yeVN0YXRlLmdldCgpLnRhYilcclxuICAgICAgLmFkZENsYXNzKFwic2hvd1wiKTtcclxuICAgIHZtLmN1cnJlbnRQYWdlID0gMTtcclxuXHJcbiAgICB2bS50b2dnbGVUYWIgPSB2YWwgPT4ge1xyXG4gICAgICBpbnZlbnRvcnlTdGF0ZS5zZXRUYWIodmFsKTtcclxuICAgIH07XHJcblxyXG4gICAgdm0udG9nZ2xlT2JqID0ge1xyXG4gICAgICBtYXRlcmlhbDoge1xyXG4gICAgICAgIHN5c3RlbVRhZzogdHJ1ZSxcclxuICAgICAgICBtYXRlcmlhbENvc3Q6IGZhbHNlLFxyXG4gICAgICAgIHJvb2ZlckNvc3Q6IGZhbHNlLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogdHJ1ZSxcclxuICAgICAgICBuYW1lOiBmYWxzZVxyXG4gICAgICB9LFxyXG4gICAgICBjb21ibzoge1xyXG4gICAgICAgIHN5c3RlbVRhZzogdHJ1ZSxcclxuICAgICAgICBtYXRlcmlhbENvc3Q6IGZhbHNlLFxyXG4gICAgICAgIHJvb2ZlckNvc3Q6IGZhbHNlLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogdHJ1ZSxcclxuICAgICAgICBuYW1lOiBmYWxzZVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGFwaUZhY3RvcnlcclxuICAgICAgLmdldEFsbFN1cHBsaWVycygpXHJcbiAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgIHZtLnN1cHBsaWVycyA9IHJlc3AuZGF0YS5saXN0O1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIHZtLnNlYXJjaFRleHQgPSBpbnZlbnRvcnlTdGF0ZS5nZXQoKS5zZWFyY2hUZXh0O1xyXG5cclxuICAgICRzY29wZS4kd2F0Y2goXHJcbiAgICAgIFwidm0uc2VhcmNoVGV4dFwiLFxyXG4gICAgICB0ZXh0ID0+IHtcclxuICAgICAgICBpbnZlbnRvcnlTdGF0ZS50ZXh0KHRleHQpO1xyXG4gICAgICB9LFxyXG4gICAgICB0cnVlXHJcbiAgICApO1xyXG5cclxuICAgIHZtLnVuaXRTZWxlY3QgPSBkYXRhID0+IHtcclxuICAgICAgdm0uc2VsZWN0ZWRVbml0ID0gZGF0YS5uYW1lO1xyXG4gICAgfTtcclxuXHJcbiAgICB2bS5zb3J0RGlzcGxheSA9ICh0eXBlLCByZXNvdXJjZSkgPT4ge1xyXG4gICAgICBpZiAodHlwZSAmJiByZXNvdXJjZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwidHlcIiwgdm0udG9nZ2xlT2JqW3Jlc291cmNlXVt0eXBlXSk7XHJcbiAgICAgICAgcmV0dXJuIGBTb3J0ZWQgQnk6ICR7dHlwZX0gLSAke1xyXG4gICAgICAgICAgdm0udG9nZ2xlT2JqW3Jlc291cmNlXVt0eXBlXSA/IFwiQVNDXCIgOiBcIkRTQ1wiXHJcbiAgICAgICAgfWA7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdm0uc29ydE1hdGVyaWFscyA9ICh0eXBlLCByZXNvdXJjZSkgPT4ge1xyXG4gICAgICAvKiBGb3IgdG9nZ2xpbmcgYXNjZW5kaW5nIGFuZCBkZXNjZW5kaW5nIG9yZGVyICovXHJcbiAgICAgIHZtLnRvZ2dsZU9ialtyZXNvdXJjZV1bdHlwZV0gPT09IHVuZGVmaW5lZFxyXG4gICAgICAgID8gKHZtLnRvZ2dsZU9ialtyZXNvdXJjZV1bdHlwZV0gPSB0cnVlKVxyXG4gICAgICAgIDogKHZtLnRvZ2dsZU9ialtyZXNvdXJjZV1bdHlwZV0gPSAhdm0udG9nZ2xlT2JqW3Jlc291cmNlXVt0eXBlXSk7XHJcbiAgICAgIGxldCBhcGlOYW1lID1cclxuICAgICAgICByZXNvdXJjZSA9PT0gXCJtYXRlcmlhbFwiID8gXCJsaXN0QWxsTWF0ZXJpYWxzXCIgOiBcImxpc3RBbGxDb21ib01hdGVyaWFsc1wiO1xyXG5cclxuICAgICAgYXBpRmFjdG9yeVthcGlOYW1lXSh7XHJcbiAgICAgICAgcGFnZTogaW52ZW50b3J5U3RhdGUuZ2V0KCkucGFnZVtyZXNvdXJjZV0sXHJcbiAgICAgICAgY2h1bms6IDEwLFxyXG4gICAgICAgIHNvcnQ6IHR5cGUsXHJcbiAgICAgICAgc2VhcmNoOiBpbnZlbnRvcnlTdGF0ZS5nZXQoKS5zZWFyY2hUZXh0LFxyXG4gICAgICAgIHNvcnRUeXBlOiB2bS50b2dnbGVPYmpbcmVzb3VyY2VdW3R5cGVdXHJcbiAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICB2bVtyZXNvdXJjZV0gPSByZXNwLmRhdGEubGlzdDtcclxuICAgICAgICAgIHZtW3Jlc291cmNlICsgXCJDb3VudFwiXSA9IHJlc3AuZGF0YS50b3RhbDtcclxuICAgICAgICAgICR0aW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgJChcIiNcIiArIHJlc291cmNlICsgXCJQYWdpbmF0aW9uXCIpLnBhZ2luYXRpb24oe1xyXG4gICAgICAgICAgICAgIGl0ZW1zOiB2bVtyZXNvdXJjZSArIFwiQ291bnRcIl0sXHJcbiAgICAgICAgICAgICAgaXRlbXNPblBhZ2U6IDEwLFxyXG4gICAgICAgICAgICAgIGNzc1N0eWxlOiBcImxpZ2h0LXRoZW1lXCIsXHJcbiAgICAgICAgICAgICAgaHJlZlRleHRQcmVmaXg6IFwiI1wiLFxyXG4gICAgICAgICAgICAgIG9yZGVyaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgICBjdXJyZW50UGFnZTogaW52ZW50b3J5U3RhdGUuZ2V0KCkucGFnZVtyZXNvdXJjZV0sXHJcbiAgICAgICAgICAgICAgb25QYWdlQ2xpY2s6IGZ1bmN0aW9uKHBhZ2UsIGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgaW52ZW50b3J5U3RhdGUuc2V0UGFnZShyZXNvdXJjZSwgcGFnZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgYXBpRmFjdG9yeVthcGlOYW1lXSh7XHJcbiAgICAgICAgICAgICAgICAgIHBhZ2U6IHBhZ2UsXHJcbiAgICAgICAgICAgICAgICAgIGNodW5rOiAxMCxcclxuICAgICAgICAgICAgICAgICAgc29ydDogdHlwZSxcclxuICAgICAgICAgICAgICAgICAgc2VhcmNoOiBpbnZlbnRvcnlTdGF0ZS5nZXQoKS5zZWFyY2hUZXh0LFxyXG4gICAgICAgICAgICAgICAgICBzb3J0VHlwZTogdm0udG9nZ2xlT2JqW3Jlc291cmNlXVt0eXBlXVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdm1bcmVzb3VyY2VdID0gcmVzcC5kYXRhLmxpc3Q7XHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHNlYXJjaERlYm91bmNlID0gZGVib3VuY2UoMjUwKTsgLyogUGFzc2luZyBpbiB0aGUgZGVib3VuY2UgcmF0ZSAqL1xyXG4gICAgdm0uc2VhcmNoTWF0ZXJpYWxzID0gKHRleHQsIHJlc291cmNlKSA9PiB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmbiAtIHBhc3MgdGhlIGZ1bmN0aW9uIHdoaWNoIHlvdSB3YW50IHRvIGRlYm91bmNlXHJcbiAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGFyZ3MgLSBwYXNzIHRoZSBhcmd1bWVudHMgZnJvbSB0aGUgdmlldyBhcyBhbiBhcnJheVxyXG4gICAgICAgKi9cclxuICAgICAgc2VhcmNoRGVib3VuY2UoXHJcbiAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgbGV0IGFwaU5hbWUgPVxyXG4gICAgICAgICAgICByZXNvdXJjZSA9PT0gXCJtYXRlcmlhbFwiXHJcbiAgICAgICAgICAgICAgPyBcImxpc3RBbGxNYXRlcmlhbHNcIlxyXG4gICAgICAgICAgICAgIDogXCJsaXN0QWxsQ29tYm9NYXRlcmlhbHNcIjtcclxuXHJcbiAgICAgICAgICBhcGlGYWN0b3J5W2FwaU5hbWVdKHtcclxuICAgICAgICAgICAgcGFnZTogMSxcclxuICAgICAgICAgICAgY2h1bms6IDEwLFxyXG4gICAgICAgICAgICBzZWFyY2g6IHRleHQsXHJcbiAgICAgICAgICAgIHNvcnQ6IFwiY3JlYXRlZERhdGVcIixcclxuICAgICAgICAgICAgc29ydFR5cGU6IGZhbHNlXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgICB2bVtyZXNvdXJjZV0gPSByZXNwLmRhdGEubGlzdDtcclxuICAgICAgICAgICAgICB2bVtyZXNvdXJjZSArIFwiQ291bnRcIl0gPSByZXNwLmRhdGEudG90YWw7XHJcbiAgICAgICAgICAgICAgJHRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgJChcIiNcIiArIHJlc291cmNlICsgXCJQYWdpbmF0aW9uXCIpLnBhZ2luYXRpb24oe1xyXG4gICAgICAgICAgICAgICAgICBpdGVtczogdm1bcmVzb3VyY2UgKyBcIkNvdW50XCJdLFxyXG4gICAgICAgICAgICAgICAgICBpdGVtc09uUGFnZTogMTAsXHJcbiAgICAgICAgICAgICAgICAgIGNzc1N0eWxlOiBcImxpZ2h0LXRoZW1lXCIsXHJcbiAgICAgICAgICAgICAgICAgIGhyZWZUZXh0UHJlZml4OiBcIiNcIixcclxuICAgICAgICAgICAgICAgICAgb3JkZXJpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICBjdXJyZW50UGFnZTogMSxcclxuICAgICAgICAgICAgICAgICAgb25QYWdlQ2xpY2s6IGZ1bmN0aW9uKHBhZ2UsIGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBhcGlGYWN0b3J5W2FwaU5hbWVdKHtcclxuICAgICAgICAgICAgICAgICAgICAgIHBhZ2U6IHBhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICBjaHVuazogMTAsXHJcbiAgICAgICAgICAgICAgICAgICAgICBzb3J0OiB0eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgc29ydFR5cGU6IHZtLnRvZ2dsZU9ialtyZXNvdXJjZV1bdHlwZV1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZtLm1hdGVyaWFscyA9IHJlc3AuZGF0YS5saXN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBbdGV4dCwgcmVzb3VyY2VdXHJcbiAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qIEluaXRpYWxseSBnZXR0aW5nIHRoZSB2YWx1ZXMgb2YgbWF0ZXJpYWwgYW5kIGNvbWJvIG1hdGVyaWFscyAqL1xyXG4gICAgdm0uc29ydE1hdGVyaWFscyhcImNyZWF0ZWRBdFwiLCBcIm1hdGVyaWFsXCIpO1xyXG4gICAgdm0uc29ydE1hdGVyaWFscyhcImNyZWF0ZWRBdFwiLCBcImNvbWJvXCIpO1xyXG4gICAgLyogRW5kIG9mICBEYXRhIHRhYmxlIHNldHVwICoqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgLyogQWRkIG1hdGVyaWFsIGZ1bmN0aW9uYWxpdHkgKi9cclxuICAgIGxldCBkZWZhdWx0TWFpbnRlbmFuY2VQZXJpb2QgPSA5MDtcclxuICAgIHZtLmFkZE1hdGVyaWFsID0ge1xyXG4gICAgICBjb252ZXJzaW9uRmFjdG9yOiAxLFxyXG4gICAgICBtYWludGVuYW5jZVBlcmlvZDogZGVmYXVsdE1haW50ZW5hbmNlUGVyaW9kLFxyXG4gICAgICBtYWludGVuYW5jZURhdGU6IG1vbWVudCgpXHJcbiAgICAgICAgLmFkZChkZWZhdWx0TWFpbnRlbmFuY2VQZXJpb2QsIFwiZGF5c1wiKVxyXG4gICAgICAgIC5mb3JtYXQoKVxyXG4gICAgfTtcclxuICAgIHZtLmNoYW5nZU1haW50ZW5hbmNlUGVyaW9kID0gZGF5cyA9PiB7XHJcbiAgICAgIHZtLmFkZE1hdGVyaWFsLm1haW50ZW5hbmNlRGF0ZSA9IG1vbWVudCgpXHJcbiAgICAgICAgLmFkZChkYXlzLCBcImRheXNcIilcclxuICAgICAgICAuZm9ybWF0KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLnRhYlNldHRpbmdzID0geyBkaXNhYmxlOiB0cnVlIH07XHJcblxyXG4gICAgdm0udGFiQ2hhbmdlID0gKHZhbCwgZmxhZykgPT4ge1xyXG4gICAgICBpZiAoZmxhZyA9PSBcImNvbWJvXCIpIHtcclxuICAgICAgICBpZiAodmFsID09IDApIHtcclxuICAgICAgICB9IGVsc2UgaWYgKHZhbCA9PSAxKSB7XHJcbiAgICAgICAgICBpZiAoIXZtLmFkZENvbWJvTWF0ZXJpYWxGb3JtLm5hbWUpIHtcclxuICAgICAgICAgICAgTm90aWZpY2F0aW9uLmVycm9yKFwiUGxlYXNlIGVudGVyIGNvbWJvIG1hdGVyaWFsIG5hbWVcIik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoIXZtLnNlbGVjdGVkVW5pdCkge1xyXG4gICAgICAgICAgICBOb3RpZmljYXRpb24uZXJyb3IoXCJQbGVhc2Ugc2VsZWN0IHVuaXRcIik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoIXZtLmFkZENvbWJvTWF0ZXJpYWxGb3JtLmRlc2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgIE5vdGlmaWNhdGlvbi5lcnJvcihcIlBsZWFzZSBlbnRlciBjb21ibyBkZXNjcmlwdGlvblwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGFiQ2hhbmdlRnVuKHZhbCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICh2YWwgPT0gMikge1xyXG4gICAgICAgICAgaWYgKHZtLmNvbWJvTWF0ZXJpYWxMaXN0Lmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgIE5vdGlmaWNhdGlvbi5lcnJvcihcIlBsZWFzZSBhZGQgQ29tYmluYXRpb24gbGlzdFwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdm0uVG90YWxNQyA9IDA7XHJcbiAgICAgICAgICAgIHZtLlRvdGFsUkMgPSAwO1xyXG5cclxuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHZtLmNvbWJvTWF0ZXJpYWxMaXN0LCBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICAgIHZtLlRvdGFsTUMgPVxyXG4gICAgICAgICAgICAgICAgcGFyc2VGbG9hdCh2bS5Ub3RhbE1DKSArIHBhcnNlRmxvYXQodmFsdWUubWF0ZXJpYWxDb3N0KTtcclxuICAgICAgICAgICAgICB2bS5Ub3RhbFJDID1cclxuICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQodm0uVG90YWxSQykgKyBwYXJzZUZsb2F0KHZhbHVlLnJvb2ZlckNvc3QpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdm0uVG90YWxNQyA9IHBhcnNlRmxvYXQoTWF0aC5yb3VuZCh2bS5Ub3RhbE1DICogMTAwKSAvIDEwMCk7XHJcbiAgICAgICAgICAgIHZtLlRvdGFsUkMgPSBwYXJzZUZsb2F0KE1hdGgucm91bmQodm0uVG90YWxSQyAqIDEwMCkgLyAxMDApO1xyXG4gICAgICAgICAgICB0YWJDaGFuZ2VGdW4odmFsKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gdGFiQ2hhbmdlRnVuKHZhbCkge1xyXG4gICAgICAgICAgJChcIi5kY3BfbW9kYWwgLm5hdi10YWJzIGxpIC5uYXYtbGlua1wiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICQoXCIuZGNwX21vZGFsIC5uYXYtdGFicyBsaSAubmF2LWxpbmtcIilcclxuICAgICAgICAgICAgLmVxKHZhbClcclxuICAgICAgICAgICAgLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG5cclxuICAgICAgICAgICQoXCIuZGNwX21vZGFsIC50YWItY29udGVudCAudGFiLXBhbmVcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAkKFwiLmRjcF9tb2RhbCAudGFiLWNvbnRlbnQgLnRhYi1wYW5lXCIpLnJlbW92ZUNsYXNzKFwic2hvd1wiKTtcclxuICAgICAgICAgICQoXCIuZGNwX21vZGFsIC50YWItY29udGVudCAudGFiLXBhbmVcIilcclxuICAgICAgICAgICAgLmVxKHZhbClcclxuICAgICAgICAgICAgLmFkZENsYXNzKFwic2hvd1wiKTtcclxuICAgICAgICAgICQoXCIuZGNwX21vZGFsIC50YWItY29udGVudCAudGFiLXBhbmVcIilcclxuICAgICAgICAgICAgLmVxKHZhbClcclxuICAgICAgICAgICAgLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoIXZtLmFkZE1hdGVyaWFsLm1hdGVyaWFsTmFtZSkge1xyXG4gICAgICAgICAgTm90aWZpY2F0aW9uLmVycm9yKFwiUGxlYXNlIGVudGVyIG1hdGVyaWFsIG5hbWVcIik7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgLyogfSBlbHNlIGlmICghdm0uc2VsZWN0ZWRVbml0KSB7XHJcbiAgICAgICAgICBOb3RpZmljYXRpb24uZXJyb3IoXCJQbGVhc2Ugc2VsZWN0IG1hdGVyaWFsIHVuaXRcIik7XHJcbiAgICAgICAgICByZXR1cm47ICovXHJcbiAgICAgICAgfSBlbHNlIGlmICghdm0uYWRkTWF0ZXJpYWwuY3VycmVuY3kpIHtcclxuICAgICAgICAgIE5vdGlmaWNhdGlvbi5lcnJvcihcIlBsZWFzZSBzZWxlY3QgY3VycmVuY3lcIik7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICQoXCIubWF0ZXJpYWxfbW9kYWwgLm5hdi10YWJzIGxpIC5uYXYtbGlua1wiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICQoXCIubWF0ZXJpYWxfbW9kYWwgLm5hdi10YWJzIGxpIC5uYXYtbGlua1wiKVxyXG4gICAgICAgICAgICAuZXEodmFsKVxyXG4gICAgICAgICAgICAuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcblxyXG4gICAgICAgICAgJChcIi5tYXRlcmlhbF9tb2RhbCAudGFiLWNvbnRlbnQgLnRhYi1wYW5lXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgJChcIi5tYXRlcmlhbF9tb2RhbCAudGFiLWNvbnRlbnQgLnRhYi1wYW5lXCIpLnJlbW92ZUNsYXNzKFwic2hvd1wiKTtcclxuICAgICAgICAgICQoXCIubWF0ZXJpYWxfbW9kYWwgLnRhYi1jb250ZW50IC50YWItcGFuZVwiKVxyXG4gICAgICAgICAgICAuZXEodmFsKVxyXG4gICAgICAgICAgICAuYWRkQ2xhc3MoXCJzaG93XCIpO1xyXG4gICAgICAgICAgJChcIi5tYXRlcmlhbF9tb2RhbCAudGFiLWNvbnRlbnQgLnRhYi1wYW5lXCIpXHJcbiAgICAgICAgICAgIC5lcSh2YWwpXHJcbiAgICAgICAgICAgIC5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgYXBpRmFjdG9yeVxyXG4gICAgICAuZ2V0Q29tcGFueUJ5SWQodm0udXNlckRhdGEuY29tcGFueUlkKVxyXG4gICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICB2bS5jb21wYW55RGF0YSA9IHJlc3AuZGF0YTtcclxuICAgICAgICB2bS5hZGRNYXRlcmlhbC5jdXJyZW5jeSA9IHZtLmNvbXBhbnlEYXRhLmN1cnJlbnRDdXJyZW5jeS5jdXJyZW5jeUNvZGU7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKGUgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAkc2NvcGUuJHdhdGNoKFwidm0uYWRkTWF0ZXJpYWwuY3VycmVuY3lcIiwgZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgJChcImEuaXRlbS1zZWxlY3RlZCBzcGFuXCIpLnJlbW92ZUNsYXNzKFwiZ2x5cGhpY29uIGdseXBoaWNvbi1yZW1vdmVcIik7XHJcbiAgICAgICQoXCJhLml0ZW0tc2VsZWN0ZWQgc3BhblwiKS5hZGRDbGFzcyhcImZhcyBmYS10aW1lcyBtci0zXCIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdm0uc2hvd0NvbnZlcnNpb25SYXRlID0gKGZyb20sIHRvKSA9PiB7XHJcbiAgICAgICQoXCIubG9hZGVyXCIpLnNob3coKTtcclxuICAgICAgbGV0IGN1cnJlbmN5RGF0YSA9IHtcclxuICAgICAgICBmcm9tLFxyXG4gICAgICAgIHRvXHJcbiAgICAgIH07XHJcbiAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAuc2hvd0NvbnZlcnNpb25SYXRlKGN1cnJlbmN5RGF0YSlcclxuICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgIHZtLmFkZE1hdGVyaWFsLmNvbnZlcnNpb25GYWN0b3IgPSByZXNwLmRhdGEuY29udmVyc2lvbkZhY3RvcjtcclxuICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkKFwiLmxvYWRlclwiKS5oaWRlKCk7XHJcbiAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLmFkZE1hdGVyaWFsTmV4dCA9ICgpID0+IHtcclxuICAgICAgY29uc29sZS5sb2codm0uYWRkTWF0ZXJpYWwubWF0ZXJpYWxVbml0KTtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIHZtLmFkZE1hdGVyaWFsLm1hdGVyaWFsTmFtZSA9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICB2bS5hZGRNYXRlcmlhbC5tYXRlcmlhbE5hbWUgPT0gXCJcIlxyXG4gICAgICApIHtcclxuICAgICAgICBOb3RpZmljYXRpb24uZXJyb3IoXCJQbGVhc2UgZW50ZXIgbWF0ZXJpYWwgbmFtZVwiKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghdm0uYWRkTWF0ZXJpYWwubWF0ZXJpYWxVbml0ICYmIHZtLmFkZE1hdGVyaWFsLm1hdGVyaWFsVW5pdCA9PSBcIlwiKSB7XHJcbiAgICAgICAgTm90aWZpY2F0aW9uLmVycm9yKFwiUGxlYXNlIHNlbGVjdCBtYXRlcmlhbCBVbml0XCIpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKFxyXG4gICAgICAgIHZtLmFkZE1hdGVyaWFsLmN1cnJlbmN5ID09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgIHZtLmFkZE1hdGVyaWFsLmN1cnJlbmN5ID09IFwiXCJcclxuICAgICAgKSB7XHJcbiAgICAgICAgTm90aWZpY2F0aW9uLmVycm9yKFwiUGxlYXNlIHNlbGVjdCBDdXJyZW5jeVwiKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgICRzY29wZS5hY3RpdmVKdXN0aWZpZWQgPSAxO1xyXG4gICAgfTtcclxuXHJcbiAgICB2bS5jaGFuZ2VDb3N0ID0gKGNvc3QsIGNvbnZlcnNpb25SYXRlKSA9PiB7XHJcbiAgICAgIHJldHVybiBjb3N0ICogY29udmVyc2lvblJhdGU7XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLmRlbGV0ZUZpbGUgPSAoaW5kZXhWYWwsdHlwZSkgPT4ge1xyXG4gICAgICBpZih0eXBlPSdpbWFnZScpIHtcclxuICAgICAgICB2bS5pbnB1dEltZy5zcGxpY2UoaW5kZXhWYWwsIDEpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZtLmlucHV0RmlsZXMuc3BsaWNlKGluZGV4VmFsLCAxKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZtLmRlc2NyaXB0aW9uUG9wb3ZlciA9IChpbmRleFZhbCx0eXBlKSA9PiB7XHJcbiAgICAgICRzY29wZS5maWxlVHlwZSA9IHR5cGU7XHJcbiAgICAgICRzY29wZS5maWxlSW5kZXggPSBpbmRleFZhbDtcclxuICAgIH1cclxuICAgIHZtLmFkZERlc2NyaXB0aW9uID0gKGluZGV4LCBkYXRhKSA9PiB7XHJcbiAgICAgIGlmKCRzY29wZS5maWxlVHlwZSA9PSAnaW1hZ2UnKSB7XHJcbiAgICAgICAgdm0uaW5wdXRJbWdbaW5kZXhdLmRlc2NyaXB0aW9uID0gZGF0YTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2bS5pbnB1dEZpbGVzW2luZGV4XS5kZXNjcmlwdGlvbiA9IGRhdGE7XHJcbiAgICAgIH1cclxuICAgICAgY29uc29sZS5sb2coJCh0aGlzKS5wYXJlbnQoKS5hdHRyKCdjbGFzcycpKVxyXG4gICAgfVxyXG4gICAgdm0uYWRkTWF0ZXJpYWxEZXRhaWxzID0gKCkgPT4ge1xyXG4gICAgICAkc2NvcGUudXBsb2FkRmlsZXMgPSBbXS5jb25jYXQodm0uaW5wdXRJbWcsIHZtLmlucHV0RmlsZXMpO1xyXG4gICAgICBjb25zb2xlLmxvZygkc2NvcGUudXBsb2FkRmlsZXMpXHJcbiAgICAgIHZhciBmb3JtRGF0YSA9IHtcclxuICAgICAgICBuYW1lOiB2bS5hZGRNYXRlcmlhbC5tYXRlcmlhbE5hbWUsXHJcbiAgICAgICAgdW5pdDogdm0uc2VsZWN0ZWRVbml0LFxyXG4gICAgICAgIG1hdGVyaWFsQ29zdDoge1xyXG4gICAgICAgICAgdmFsdWU6IHZtLmNoYW5nZUNvc3QoXHJcbiAgICAgICAgICAgIHZtLmFkZE1hdGVyaWFsLm1hdGVyaWFsQ29zdFZhbHVlLFxyXG4gICAgICAgICAgICB2bS5hZGRNYXRlcmlhbC5jb252ZXJzaW9uRmFjdG9yXHJcbiAgICAgICAgICApLFxyXG4gICAgICAgICAgY3VycmVuY3lDb2RlOiB2bS5jb21wYW55RGF0YS5jdXJyZW50Q3VycmVuY3kuY3VycmVuY3lDb2RlXHJcbiAgICAgICAgfSxcclxuICAgICAgICByb29mZXJDb3N0OiB7XHJcbiAgICAgICAgICB2YWx1ZTogdm0uY2hhbmdlQ29zdChcclxuICAgICAgICAgICAgdm0uYWRkTWF0ZXJpYWwucm9vZmVyQ29zdFZhbHVlLFxyXG4gICAgICAgICAgICB2bS5hZGRNYXRlcmlhbC5jb252ZXJzaW9uRmFjdG9yXHJcbiAgICAgICAgICApLFxyXG4gICAgICAgICAgY3VycmVuY3lDb2RlOiB2bS5jb21wYW55RGF0YS5jdXJyZW50Q3VycmVuY3kuY3VycmVuY3lDb2RlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdXBwbGllcnM6IHZtLmFkZE1hdGVyaWFsLnN1cHBsaWVycyxcclxuICAgICAgICBmaWxlczogJHNjb3BlLnVwbG9hZEZpbGVzLFxyXG4gICAgICAgIGFzc2V0T2JqOiAkc2NvcGUudXBsb2FkRmlsZXMubWFwKCh4LCBpKSA9PiAge1xyXG4gICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYXNzZXREZXNjcmlwdGlvbiA6IHguZGVzY3JpcHRpb25cclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgYXBpRmFjdG9yeVxyXG4gICAgICAgIC5jcmVhdGVNYXRlcmlhbHMoZm9ybURhdGEpXHJcbiAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAkc2NvcGUudGFiID0gMTtcclxuICAgICAgICAgICQoXCIjdG9kb19tb2RhbFwiKS5tb2RhbChcImhpZGVcIik7XHJcbiAgICAgICAgICBOb3RpZmljYXRpb24uc3VjY2VzcyhyZXNwLmRhdGEubWVzc2FnZSk7XHJcblxyXG4gICAgICAgICAgLyogU2V0dGluZyBiZWxvdyBwcm9wIHRydWUgdG8gZm9yY2UgZGVjZW5kaW5nIG9yZGVyIG9uIG1hdGVyaWFsIGFkZCBpbnN0ZWFkIG9mIHRvZ2dsaW5nIHN0YXRlcyAqL1xyXG4gICAgICAgICAgdm0udG9nZ2xlT2JqLm1hdGVyaWFsLmNyZWF0ZWRBdCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgdm0uc29ydE1hdGVyaWFscyhcImNyZWF0ZWRBdFwiLCBcIm1hdGVyaWFsXCIpO1xyXG5cclxuICAgICAgICAgIHZtLmFkZE1hdGVyaWFsID0ge1xyXG4gICAgICAgICAgICBjb252ZXJzaW9uRmFjdG9yOiAxXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLmdldE1hdGVyaWFsQnlJZCA9IGlkID0+IHtcclxuICAgICAgYXBpRmFjdG9yeVxyXG4gICAgICAgIC5nZXRNYXRlcmlhbEJ5SWQoaWQpXHJcbiAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKiBFdmVudCBoYW5kbGVyIHRvIHJlc2V0IGFkZCBtYXRlcmlhbCBtb2RhbCAqL1xyXG4gICAgJChcIiNhZGRNYXRlcmlhbFwiKS5vbihcImhpZGUuYnMubW9kYWxcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICRzY29wZS5hY3RpdmVKdXN0aWZpZWQgPSAwO1xyXG4gICAgICB2bS5hZGRNYXRlcmlhbCA9IHtcclxuICAgICAgICBjb252ZXJzaW9uRmFjdG9yOiAxXHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKiBBZGQgQ29tYm8gTWF0ZXJpYWwgKi9cclxuICAgIHZtLmNvbWJvTWF0ZXJpYWxMaXN0ID0gW107XHJcbiAgICB2bS5hZGRDb21ib01hdGVyaWFsRm9ybSA9IHt9O1xyXG4gICAgdm0ucGVyY2VudGFnZUFkZGl0aW9uID0gW107XHJcblxyXG4gICAgLyogZ2V0IGFsbCBtYXRlcmlhbCBMaXN0ICovXHJcbiAgICB2bS5tVW5pdHMgPSBnbG9iYWxzLm1Vbml0cztcclxuICAgIGdsb2JhbHMuZ2V0Q3VycmVuY3koKS50aGVuKHJlc3AgPT4ge1xyXG4gICAgICB2bS5jdXJyZW5jaWVzID0gcmVzcC5kYXRhO1xyXG4gICAgICB2bS5sb2FkQ3VycmVuY2llcyA9ICRxdWVyeSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgIHJlc29sdmUocmVzcC5kYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuICAgIH0pO1xyXG5cclxuICAgIGFwaUZhY3RvcnlcclxuICAgICAgLmxpc3RBbGxNYXRlcmlhbHMoKVxyXG4gICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICB2bS5hbGxtYXRlcmlsYUxpc3QgPSByZXNwLmRhdGEubGlzdDtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB2bS5jb21ib0xpc3QgPSB7XHJcbiAgICAgIHF1YW50aXR5OiAxLFxyXG4gICAgICBtYXRlcmlhbENvc3Q6IDAsXHJcbiAgICAgIHJvb2ZlckNvc3Q6IDBcclxuICAgIH07XHJcblxyXG4gICAgdm0uZ2V0TWF0ZXJpYWxJbmZvID0gbWF0ZXJpYWwgPT4ge1xyXG4gICAgICBsZXQgbWF0ZXJpYWxJbmZvID0gSlNPTi5wYXJzZShtYXRlcmlhbCk7XHJcbiAgICAgIGlmIChtYXRlcmlhbCkge1xyXG4gICAgICAgIHZtLmNvbWJvTGlzdC5tYXRlcmlhbENvc3QgPSBwYXJzZUZsb2F0KFxyXG4gICAgICAgICAgTWF0aC5yb3VuZChcclxuICAgICAgICAgICAgdm0uY29tYm9MaXN0LnF1YW50aXR5ICpcclxuICAgICAgICAgICAgICBtYXRlcmlhbEluZm8uY3VycmVudFJhdGUubWF0ZXJpYWxDb3N0LnZhbHVlICpcclxuICAgICAgICAgICAgICAxMDBcclxuICAgICAgICAgICkgLyAxMDBcclxuICAgICAgICApO1xyXG4gICAgICAgIHZtLmNvbWJvTGlzdC5yb29mZXJDb3N0ID0gcGFyc2VGbG9hdChcclxuICAgICAgICAgIE1hdGgucm91bmQoXHJcbiAgICAgICAgICAgIHZtLmNvbWJvTGlzdC5xdWFudGl0eSAqXHJcbiAgICAgICAgICAgICAgbWF0ZXJpYWxJbmZvLmN1cnJlbnRSYXRlLnJvb2ZlckNvc3QudmFsdWUgKlxyXG4gICAgICAgICAgICAgIDEwMFxyXG4gICAgICAgICAgKSAvIDEwMFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgJChcImEuaXRlbS1zZWxlY3RlZCBzcGFuXCIpLnJlbW92ZUNsYXNzKFwiZ2x5cGhpY29uIGdseXBoaWNvbi1yZW1vdmVcIik7XHJcbiAgICAgICAgJChcImEuaXRlbS1zZWxlY3RlZCBzcGFuXCIpLmFkZENsYXNzKFwiZmFzIGZhLXRpbWVzIG1yLTNcIik7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdm0uUXR5Q2hhbmdlID0gKHZhbCwgZGF0YSkgPT4ge1xyXG4gICAgICBsZXQgbWF0ZXJpYWwgPSBKU09OLnBhcnNlKGRhdGEpO1xyXG4gICAgICBpZiAodmFsID09IFwiXCIgfHwgdmFsID09IDApIHtcclxuICAgICAgICB2bS5jb21ib0xpc3QucXVhbnRpdHkgPSAxO1xyXG4gICAgICAgIHZhbCA9IDE7XHJcbiAgICAgICAgdm0uY29tYm9MaXN0Lm1hdGVyaWFsQ29zdCA9IHBhcnNlRmxvYXQoXHJcbiAgICAgICAgICBNYXRoLnJvdW5kKHZhbCAqIG1hdGVyaWFsLmN1cnJlbnRSYXRlLm1hdGVyaWFsQ29zdC52YWx1ZSAqIDEwMCkgLyAxMDBcclxuICAgICAgICApO1xyXG4gICAgICAgIHZtLmNvbWJvTGlzdC5yb29mZXJDb3N0ID0gcGFyc2VGbG9hdChcclxuICAgICAgICAgIE1hdGgucm91bmQodmFsICogbWF0ZXJpYWwuY3VycmVudFJhdGUucm9vZmVyQ29zdC52YWx1ZSAqIDEwMCkgLyAxMDBcclxuICAgICAgICApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZtLmNvbWJvTGlzdC5tYXRlcmlhbENvc3QgPSBwYXJzZUZsb2F0KFxyXG4gICAgICAgICAgTWF0aC5yb3VuZCh2YWwgKiBtYXRlcmlhbC5jdXJyZW50UmF0ZS5tYXRlcmlhbENvc3QudmFsdWUgKiAxMDApIC8gMTAwXHJcbiAgICAgICAgKTtcclxuICAgICAgICB2bS5jb21ib0xpc3Qucm9vZmVyQ29zdCA9IHBhcnNlRmxvYXQoXHJcbiAgICAgICAgICBNYXRoLnJvdW5kKHZhbCAqIG1hdGVyaWFsLmN1cnJlbnRSYXRlLnJvb2ZlckNvc3QudmFsdWUgKiAxMDApIC8gMTAwXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB2bS5hZGRQZXJjZW50YWdlVmFsdWUgPSAoKSA9PiB7XHJcbiAgICAgIHZtLnBlcmNlbnRhZ2VBZGRpdGlvbi5wdXNoKHtcclxuICAgICAgICBwZXJjZW50YWdlVHlwZTogXCJcIixcclxuICAgICAgICBwZXJjZW50YWdlVmFsdWU6IFwiXCJcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdm0ucmVtb3ZlUGVyY2VudGFnZUFkZGl0aW9uID0gaW5kZXggPT4ge1xyXG4gICAgICB2bS5wZXJjZW50YWdlQWRkaXRpb24uc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIH07XHJcblxyXG4gICAgdm0ubWF0ZXJpYWxDb21iaW5hdGlvbiA9IG1hdGVyaWFsID0+IHtcclxuICAgICAgbGV0IGRhdGEgPSBKU09OLnBhcnNlKG1hdGVyaWFsKTtcclxuICAgICAgY29uc29sZS5sb2coXCJtYXRlcmlhbC0tXCIsIGRhdGEpO1xyXG4gICAgICBpZiAoZGF0YSAhPSBcIlwiKSB7XHJcbiAgICAgICAgdm0uY29tYm9NYXRlcmlhbExpc3QucHVzaCh7XHJcbiAgICAgICAgICBtYXRlcmlhbElkOiBkYXRhLl9pZCxcclxuICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgIHF1YW50aXR5OiB2bS5jb21ib0xpc3QucXVhbnRpdHksXHJcbiAgICAgICAgICBtYXRlcmlhbENvc3Q6IHZtLmNvbWJvTGlzdC5tYXRlcmlhbENvc3QsXHJcbiAgICAgICAgICByb29mZXJDb3N0OiB2bS5jb21ib0xpc3Qucm9vZmVyQ29zdCxcclxuICAgICAgICAgIHBlcmNlbnRhZ2VBZGRpdGlvbnM6IHZtLnBlcmNlbnRhZ2VBZGRpdGlvblxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZtLnBlcmNlbnRhZ2VBZGRpdGlvbiA9IFtdO1xyXG4gICAgICAgIHZtLmNvbWJvTGlzdCA9IHtcclxuICAgICAgICAgIHF1YW50aXR5OiAxLFxyXG4gICAgICAgICAgbWF0ZXJpYWxDb3N0OiAwLFxyXG4gICAgICAgICAgcm9vZmVyQ29zdDogMFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZtLmFkZENvbWJvTWF0ZXJpYWxGb3JtLmNvbWJvTWF0ZXJpYWwgPSBcIlwiO1xyXG4gICAgICAgICQoXCIuc2VsZWN0Mi1jaG9pY2UgLnNlbGVjdDItY2hvc2VuXCIpLnRleHQoXCJcIik7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdm0uZmlsZVVwZGF0ZWQgPSAoZmlsZXMsIGV2ZW50LCBtb2RlbCkgPT4ge1xyXG4gICAgICBsZXQgZmlsZU9iaiA9IGV2ZW50LnRhcmdldC5maWxlcztcclxuICAgICAgdm0uZmlsZU5hbWVzID0gT2JqZWN0LmtleXMoZmlsZU9iaikubWFwKHggPT4gZmlsZU9ialt4XS5uYW1lKTtcclxuICAgICAgYW5ndWxhci5mb3JFYWNoKGZpbGVzLCBmdW5jdGlvbiAoeCwgaW5kZXgpIHtcclxuICAgICAgICB4LmRlc2NyaXB0aW9uID0gJydcclxuICAgICAgfSlcclxuICAgIH07XHJcblxyXG4gICAgdm0uY3JlYXRlQ29tYm9NYXRlcmlhbExpc3QgPSAoKSA9PiB7XHJcbiAgICAgIHZhciBjbUxpc3QgPSBbXTtcclxuXHJcbiAgICAgIHZtLmNvbWJvTWF0ZXJpYWxMaXN0LmZvckVhY2goeCA9PiB7XHJcbiAgICAgICAgdmFyIHBlckFkZGl0aW9ucyA9IHt9O1xyXG4gICAgICAgIGlmICh4LnBlcmNlbnRhZ2VBZGRpdGlvbnMubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgICB4LnBlcmNlbnRhZ2VBZGRpdGlvbnMuZm9yRWFjaCh4ID0+IHtcclxuICAgICAgICAgICAgcGVyQWRkaXRpb25zW3gucGVyY2VudGFnZVR5cGVdID0gTnVtYmVyKHgucGVyY2VudGFnZVZhbHVlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjbUxpc3QucHVzaCh7XHJcbiAgICAgICAgICBtYXRlcmlhbElkOiB4Lm1hdGVyaWFsSWQsXHJcbiAgICAgICAgICBxdWFudGl0eTogeC5xdWFudGl0eSxcclxuICAgICAgICAgIHBlcmNlbnRhZ2VBZGRpdGlvbnM6IHBlckFkZGl0aW9uc1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgIG5hbWU6IHZtLmFkZENvbWJvTWF0ZXJpYWxGb3JtLm5hbWUsXHJcbiAgICAgICAgdW5pdDogdm0uYWRkQ29tYm9NYXRlcmlhbEZvcm0udW5pdFN5bWJvbCxcclxuICAgICAgICBjb21ib01hdGVyaWFsTGlzdDogY21MaXN0LFxyXG4gICAgICAgIGZpbGVzOiB2bS5pbnB1dEltZ1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgYXBpRmFjdG9yeVxyXG4gICAgICAgIC5nZXRTeXN0ZW1UYWcoKVxyXG4gICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgdmFyIHN5c3RlbVRhZyA9IHsgc3lzdGVtVGFnOiByZXNwLmRhdGEuY29tYm9UYWcgfTtcclxuICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKGRhdGEsIHN5c3RlbVRhZyk7XHJcbiAgICAgICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgICAgIC5jcmVhdGVDb21ib01hdGVyaWFsKGRhdGEpXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgIE5vdGlmaWNhdGlvbi5zdWNjZXNzKHJlc3AuZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAkKFwiI2FkZENvbWJvTWF0ZXJpYWxcIikubW9kYWwoXCJoaWRlXCIpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgICAgTm90aWZpY2F0aW9uLmVycm9yKGUuZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICBOb3RpZmljYXRpb24uZXJyb3IoZS5kYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB2bS5yZW1vdmVNYXRlcmlsID0gaXRlbSA9PiB7XHJcbiAgICAgIHZtLmNvbWJvTWF0ZXJpYWxMaXN0LnNwbGljZShpdGVtLCAxKTtcclxuICAgIH07XHJcbiAgfVxyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJtYXRlcmlhbFZpZXdDdHJsXCIsIG1hdGVyaWFsVmlld0N0cmwpO1xyXG5cclxuICBmdW5jdGlvbiBtYXRlcmlhbFZpZXdDdHJsKFxyXG4gICAgJHNjb3BlLFxyXG4gICAgJHRpbWVvdXQsXHJcbiAgICBhdXRoRmFjdG9yeSxcclxuICAgICRzdGF0ZSxcclxuICAgICRzdGF0ZVBhcmFtcyxcclxuICAgIGFwaUZhY3RvcnksXHJcbiAgICBOb3RpZmljYXRpb24sXHJcbiAgICBnbG9iYWxzLFxyXG4gICAgJGxvY2F0aW9uLFxyXG4gICAgVXBsb2FkXHJcbiAgKSB7XHJcbiAgICAvKiBSZXF1aXJpbmcgdmFycyAqL1xyXG4gICAgbGV0IHZtID0gdGhpcztcclxuICAgIGNvbnN0IHsgbG9nb3V0LCB1c2VyU3RvcmUgfSA9IGdsb2JhbHM7XHJcbiAgICBpZiAoIWF1dGhGYWN0b3J5LmNoZWNrVXNlcigpKSB7XHJcbiAgICAgIGxvZ291dCgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLyogR2V0IHByb2plY3QgbGlzdCAqL1xyXG4gICAgdm0udXNlckRhdGEgPSB1c2VyU3RvcmUuZ2V0KCk7XHJcbiAgICB2bS5sb2dvdXQgPSAoKSA9PiB7XHJcbiAgICAgIGxvZ291dCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2bS5tYXRlcmlhbElkID0gJHN0YXRlUGFyYW1zLmlkO1xyXG4gICAgdm0ubVVuaXRzID0gZ2xvYmFscy5tVW5pdHM7XHJcbiAgICBnbG9iYWxzLmdldEN1cnJlbmN5KCkudGhlbihyZXNwID0+IHtcclxuICAgICAgdm0uY3VycmVuY2llcyA9IHJlc3AuZGF0YTtcclxuICAgICAgdm0ubG9hZEN1cnJlbmNpZXMgPSAkcXVlcnkgPT4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICByZXNvbHZlKHJlc3AuZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuXHJcbiAgICB2bS5zaG93Q29udmVyc2lvblJhdGUgPSAoZnJvbSwgdG8pID0+IHtcclxuICAgICAgJChcIi5sb2FkZXJcIikuc2hvdygpO1xyXG4gICAgICBsZXQgY3VycmVuY3lEYXRhID0ge1xyXG4gICAgICAgIGZyb20sXHJcbiAgICAgICAgdG9cclxuICAgICAgfTtcclxuICAgICAgaWYgKGZyb20pIHtcclxuICAgICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgICAuc2hvd0NvbnZlcnNpb25SYXRlKGN1cnJlbmN5RGF0YSlcclxuICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICB2bS5lZGl0TWF0ZXJpYWwuY29udmVyc2lvbkZhY3RvciA9IHJlc3AuZGF0YS5jb252ZXJzaW9uRmFjdG9yO1xyXG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgJChcIi5sb2FkZXJcIikuaGlkZSgpO1xyXG4gICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgIH07XHJcblxyXG4gICAgdm0udGFiQ2hhbmdlID0gKHZhbCkgPT4ge1xyXG4gICAgICBpZiAoIXZtLmVkaXRNYXRlcmlhbC5uYW1lKSB7XHJcbiAgICAgICAgTm90aWZpY2F0aW9uLmVycm9yKFwiUGxlYXNlIGVudGVyIG1hdGVyaWFsIG5hbWVcIik7XHJcbiAgICAgIH0gZWxzZSBpZiAoIXZtLnNlbGVjdGVkVW5pdCkge1xyXG4gICAgICAgIE5vdGlmaWNhdGlvbi5lcnJvcihcIlBsZWFzZSBzZWxlY3QgbWF0ZXJpYWwgdW5pdFwiKTtcclxuICAgICAgfSBlbHNlIGlmICghdm0uZWRpdE1hdGVyaWFsLmN1cnJlbmN5KSB7XHJcbiAgICAgICAgTm90aWZpY2F0aW9uLmVycm9yKFwiUGxlYXNlIHNlbGVjdCBjdXJyZW5jeVwiKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkKFwiLm1hdGVyaWFsX21vZGFsIC5uYXYtdGFicyBsaSAubmF2LWxpbmtcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgJChcIi5tYXRlcmlhbF9tb2RhbCAubmF2LXRhYnMgbGkgLm5hdi1saW5rXCIpLmVxKHZhbCkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcblxyXG4gICAgICAgICQoXCIubWF0ZXJpYWxfbW9kYWwgLnRhYi1jb250ZW50IC50YWItcGFuZVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAkKFwiLm1hdGVyaWFsX21vZGFsIC50YWItY29udGVudCAudGFiLXBhbmVcIikucmVtb3ZlQ2xhc3MoXCJzaG93XCIpO1xyXG4gICAgICAgICQoXCIubWF0ZXJpYWxfbW9kYWwgLnRhYi1jb250ZW50IC50YWItcGFuZVwiKS5lcSh2YWwpLmFkZENsYXNzKFwic2hvd1wiKTtcclxuICAgICAgICAkKFwiLm1hdGVyaWFsX21vZGFsIC50YWItY29udGVudCAudGFiLXBhbmVcIikuZXEodmFsKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB2bS5lZGl0RmxhZyA9IGZhbHNlO1xyXG4gICAgdm0ucmVtb3ZlZEZpbGVzID0gW107XHJcbiAgICAkc2NvcGUuZ2V0TWF0RGV0YWlsID0gKCkgPT4ge1xyXG4gICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgLmdldE1hdGVyaWFsQnlJZCh2bS5tYXRlcmlhbElkKVxyXG4gICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgdm0ubWF0cmlhbERhdGEgPSByZXNwLmRhdGE7XHJcbiAgICAgICAgICB2bS5tYXRyaWFsTmFtZSA9IHZtLm1hdHJpYWxEYXRhLm5hbWU7XHJcbiAgICAgICAgICB2bS5tYXRyaWFsVW5pdCA9IHZtLm1hdHJpYWxEYXRhLnVuaXQ7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyh2bS5tYXRyaWFsRGF0YSlcclxuICAgICAgICAgIHZtLm1hdHJpYWxDb3N0ID0gTnVtYmVyKFxyXG4gICAgICAgICAgICB2bS5tYXRyaWFsRGF0YS5jdXJyZW50UmF0ZS5tYXRlcmlhbENvc3QudmFsdWVcclxuICAgICAgICAgICkudG9GaXhlZCgyKTtcclxuICAgICAgICAgIHZtLm1hdHJpYWxDdXJyZW5jeUNvZGUgPVxyXG4gICAgICAgICAgICB2bS5tYXRyaWFsRGF0YS5jdXJyZW50UmF0ZS5tYXRlcmlhbENvc3QuY3VycmVuY3lDb2RlO1xyXG4gICAgICAgICAgdm0ubWF0cmlhbFJvb2ZlckNvc3QgPSBOdW1iZXIoXHJcbiAgICAgICAgICAgIHZtLm1hdHJpYWxEYXRhLmN1cnJlbnRSYXRlLnJvb2ZlckNvc3QudmFsdWVcclxuICAgICAgICAgICkudG9GaXhlZCgyKTtcclxuICAgICAgICAgIHZtLm1hdHJpYWxSb29mZXJDdXJyZW5jeUNvZGUgPVxyXG4gICAgICAgICAgICB2bS5tYXRyaWFsRGF0YS5jdXJyZW50UmF0ZS5yb29mZXJDb3N0LmN1cnJlbmN5Q29kZTtcclxuICAgICAgICAgIHZtLm1hdHJpYWxDcmVhdGVkQnkgPSB2bS5tYXRyaWFsRGF0YS5wcm92aWRlckRhdGEudXBkYXRlZEJ5Lm5hbWU7XHJcbiAgICAgICAgICB2bS5tYXRyaWFsQ3JlYXRlZEF0ID0gdm0ubWF0cmlhbERhdGEuY3JlYXRlZEF0O1xyXG4gICAgICAgICAgdm0ubWF0cmlhbFVwZGF0ZWRBdCA9IHZtLm1hdHJpYWxEYXRhLmNyZWF0ZWRBdDtcclxuICAgICAgICAgICRzY29wZS5ncmF5X2JveCA9IFtcclxuICAgICAgICAgICAgeyAnaW1nJzogJy9hc3NldHMvaW1hZ2VzL1VuaXQtSWNvbi5wbmcnLCAndGl0bGUnOiAnVW5pdCcsICd2YWx1ZSc6IHZtLm1hdHJpYWxVbml0IH0sXHJcbiAgICAgICAgICAgIHsgJ2ltZyc6ICcvYXNzZXRzL2ltYWdlcy9Eb2xsYXItSWNvbi5wbmcnLCAndGl0bGUnOiAnTWF0ZXJpYWwgQ29zdCcsICd2YWx1ZSc6IHZtLm1hdHJpYWxDb3N0LCAnY3VycmVuY3lDb2RlJzogdm0ubWF0cmlhbEN1cnJlbmN5Q29kZSB9LFxyXG4gICAgICAgICAgICB7ICdpbWcnOiAnL2Fzc2V0cy9pbWFnZXMvRG9sbGFyLUljb24ucG5nJywgJ3RpdGxlJzogJ1Jvb2ZlciBDb3N0JywgJ3ZhbHVlJzogdm0ubWF0cmlhbFJvb2ZlckNvc3QsICdjdXJyZW5jeUNvZGUnOiB2bS5tYXRyaWFsUm9vZmVyQ3VycmVuY3lDb2RlIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgJHNjb3BlLmdldE1hdERldGFpbCgpO1xyXG5cclxuICAgIHZtLnJlbW92ZUltZyA9IGltZyA9PiB7XHJcbiAgICAgIHZtLnJlbW92ZWRGaWxlcy5wdXNoKHZtLm1hdHJpYWxEYXRhLmZpbGVzW2ltZ10uX2lkKTtcclxuICAgICAgdm0uZWRpdE1hdGVyaWFsLmZpbGVzLnNwbGljZShpbWcsIDEpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdm0uZWRpdE1hdGVyaWFsRnVuY3Rpb24gPSB2YWwgPT4ge1xyXG4gICAgICBpZiAodmFsID09IDEpIHtcclxuICAgICAgICAvLyBlZGl0IE1hdGVyaWFsXHJcbiAgICAgICAgdm0uZWRpdEZsYWcgPSB0cnVlO1xyXG4gICAgICAgIHZtLmVkaXRNYXRlcmlhbCA9IGFuZ3VsYXIuY29weSh2bS5tYXRyaWFsRGF0YSlcclxuICAgICAgICB2bS5zZWxlY3RlZFVuaXQgPSB2bS5lZGl0TWF0ZXJpYWwudW5pdFxyXG4gICAgICAgIHZtLmN1cnJlbnRDdXJyZW5jeSA9IHZtLmVkaXRNYXRlcmlhbC5jdXJyZW50UmF0ZS5yb29mZXJDb3N0LmN1cnJlbmN5Q29kZVxyXG4gICAgICAgIHZtLmVkaXRNYXRlcmlhbC5jdXJyZW5jeSA9IHZtLmVkaXRNYXRlcmlhbC5jdXJyZW50UmF0ZS5yb29mZXJDb3N0LmN1cnJlbmN5Q29kZVxyXG4gICAgICAgIHZtLnNob3dDb252ZXJzaW9uUmF0ZSh2bS5jdXJyZW50Q3VycmVuY3ksIHZtLmVkaXRNYXRlcmlhbC5jdXJyZW5jeSlcclxuICAgICAgICBjb25zb2xlLmxvZyh2bS5lZGl0TWF0ZXJpYWwpXHJcbiAgICAgICAgJCgnI3RvZG9fbW9kYWwubWF0ZXJpYWxfbW9kYWwnKS5tb2RhbCgnc2hvdycpXHJcbiAgICAgICAgLy8gJChcIi5tYXRlcmlhbERldGFpbCBpbnB1dCwgLm1hdGVyaWFsRGV0YWlsIHNlbGVjdFwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgZmFsc2UgKTtcclxuICAgICAgfSBlbHNlIGlmICh2YWwgPT0gMikge1xyXG4gICAgICAgIC8vIHVwZGF0ZSBNYXRlcmlhbFxyXG4gICAgICAgIHZtLmVkaXRGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIG1hdGVyaWFsdXBkYXRlZGF0YSA9IHtcclxuICAgICAgICAgIG5hbWU6IHZtLmVkaXRNYXRlcmlhbC5uYW1lLFxyXG4gICAgICAgICAgdW5pdDogdm0uc2VsZWN0ZWRVbml0LFxyXG4gICAgICAgICAgcmVtb3ZlZEZpbGVzOiB2bS5yZW1vdmVkRmlsZXMsXHJcbiAgICAgICAgICBjdXJyZW50UmF0ZToge1xyXG4gICAgICAgICAgICBtYXRlcmlhbENvc3Q6IHtcclxuICAgICAgICAgICAgICB2YWx1ZTogdm0uZWRpdE1hdGVyaWFsLmN1cnJlbnRSYXRlLm1hdGVyaWFsQ29zdC52YWx1ZSxcclxuICAgICAgICAgICAgICBjdXJyZW5jeUNvZGU6IHZtLmVkaXRNYXRlcmlhbC5jdXJyZW5jeSAvLyRzY29wZS5jaGVja051bGwoJHNjb3BlLm1hdGVyaWFsT2JqLm1hdGVyaWFsQ29zdGN1cnJlbmN5Q29kZSlbXCJjY1wiXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByb29mZXJDb3N0OiB7XHJcbiAgICAgICAgICAgICAgdmFsdWU6IHZtLmVkaXRNYXRlcmlhbC5jdXJyZW50UmF0ZS5yb29mZXJDb3N0LnZhbHVlLFxyXG4gICAgICAgICAgICAgIGN1cnJlbmN5Q29kZTogdm0uZWRpdE1hdGVyaWFsLmN1cnJlbmN5IC8vJHNjb3BlLmNoZWNrTnVsbCgkc2NvcGUubWF0ZXJpYWxPYmoucm9vZmVyQ29zdGN1cnJlbmN5Q29kZSlbXCJjY1wiXVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZmlsZTogdm0uaW5wdXRGaWxlc1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgYXBpRmFjdG9yeVxyXG4gICAgICAgICAgLnVwZGF0ZU1hdGVyaWFsQnlJZCh2bS5tYXRlcmlhbElkLCBtYXRlcmlhbHVwZGF0ZWRhdGEpXHJcbiAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgTm90aWZpY2F0aW9uLnN1Y2Nlc3MocmVzcC5kYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAkKCcjdG9kb19tb2RhbC5tYXRlcmlhbF9tb2RhbCcpLm1vZGFsKCdoaWRlJylcclxuICAgICAgICAgICAgJHNjb3BlLmdldE1hdERldGFpbCgpO1xyXG4gICAgICAgICAgICB2bS5maWxlTmFtZXM9W107XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLmZpbGVVcGRhdGVkID0gKGZpbGVzLCBldmVudCkgPT4ge1xyXG4gICAgICBsZXQgZmlsZU9iaiA9IGV2ZW50LnRhcmdldC5maWxlcztcclxuICAgICAgdm0uZmlsZU5hbWVzID0gT2JqZWN0LmtleXMoZmlsZU9iaikubWFwKHggPT4gZmlsZU9ialt4XS5uYW1lKTtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gaW1nU2xpZGVyKCkge1xyXG4gICAgICAkKFwiI2Nhcm91c2VsXCIpLmZsZXhzbGlkZXIoe1xyXG4gICAgICAgIGFuaW1hdGlvbjogXCJzbGlkZVwiLFxyXG4gICAgICAgIGNvbnRyb2xOYXY6IGZhbHNlLFxyXG4gICAgICAgIGFuaW1hdGlvbkxvb3A6IGZhbHNlLFxyXG4gICAgICAgIHNsaWRlc2hvdzogZmFsc2UsXHJcbiAgICAgICAgaXRlbVdpZHRoOiA3NSxcclxuICAgICAgICBpdGVtTWFyZ2luOiA1LFxyXG4gICAgICAgIGFzTmF2Rm9yOiBcIiNzbGlkZXJcIlxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgICQoXCIjc2xpZGVyXCIpLmZsZXhzbGlkZXIoe1xyXG4gICAgICAgIGFuaW1hdGlvbjogXCJzbGlkZVwiLFxyXG4gICAgICAgIGNvbnRyb2xOYXY6IGZhbHNlLFxyXG4gICAgICAgIGFuaW1hdGlvbkxvb3A6IGZhbHNlLFxyXG4gICAgICAgIHNsaWRlc2hvdzogZmFsc2UsXHJcbiAgICAgICAgc3luYzogXCIjY2Fyb3VzZWxcIlxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAkc2NvcGUubWF0X2hlYWRlcnMgPSBbXHJcbiAgICAgIHsgbWF0X2hlYWQ6ICdTLiBOby4nIH0sXHJcbiAgICAgIHsgbWF0X2hlYWQ6ICdEYXRlJyB9LFxyXG4gICAgICB7IG1hdF9oZWFkOiAnTWF0ZXJpYWwgQ29zdCcgfSxcclxuICAgICAgeyBtYXRfaGVhZDogJ1dvcmtlciBDb3N0JyB9XHJcbiAgICBdXHJcbiAgICAkc2NvcGUubWF0X2l0ZW1zID0gW1xyXG4gICAgICB7IHNfbm86ICcxJywgZGF0ZTogJ1NlcCAyNSwgMjAxOCcsIG1fY29zdDogJzIwMCBES0snLCB3X2Nvc3Q6ICcyMDAgREtLJyB9LFxyXG4gICAgICB7IHNfbm86ICcyJywgZGF0ZTogJ1NlcCAyNSwgMjAxOCcsIG1fY29zdDogJzIwMCBES0snLCB3X2Nvc3Q6ICcyMDAgREtLJyB9LFxyXG4gICAgICB7IHNfbm86ICczJywgZGF0ZTogJ1NlcCAyNSwgMjAxOCcsIG1fY29zdDogJzIwMCBES0snLCB3X2Nvc3Q6ICcyMDAgREtLJyB9LFxyXG4gICAgICB7IHNfbm86ICc0JywgZGF0ZTogJ1NlcCAyNSwgMjAxOCcsIG1fY29zdDogJzIwMCBES0snLCB3X2Nvc3Q6ICcyMDAgREtLJyB9LFxyXG4gICAgICB7IHNfbm86ICc1JywgZGF0ZTogJ1NlcCAyNSwgMjAxOCcsIG1fY29zdDogJzIwMCBES0snLCB3X2Nvc3Q6ICcyMDAgREtLJyB9LFxyXG4gICAgICB7IHNfbm86ICc2JywgZGF0ZTogJ1NlcCAyNSwgMjAxOCcsIG1fY29zdDogJzIwMCBES0snLCB3X2Nvc3Q6ICcyMDAgREtLJyB9LFxyXG4gICAgICB7IHNfbm86ICc3JywgZGF0ZTogJ1NlcCAyNSwgMjAxOCcsIG1fY29zdDogJzIwMCBES0snLCB3X2Nvc3Q6ICcyMDAgREtLJyB9LFxyXG4gICAgICB7IHNfbm86ICc4JywgZGF0ZTogJ1NlcCAyNSwgMjAxOCcsIG1fY29zdDogJzIwMCBES0snLCB3X2Nvc3Q6ICcyMDAgREtLJyB9LFxyXG4gICAgICB7IHNfbm86ICc5JywgZGF0ZTogJ1NlcCAyNSwgMjAxOCcsIG1fY29zdDogJzIwMCBES0snLCB3X2Nvc3Q6ICcyMDAgREtLJyB9LFxyXG4gICAgICB7IHNfbm86ICcxMCcsIGRhdGU6ICdTZXAgMjUsIDIwMTgnLCBtX2Nvc3Q6ICcyMDAgREtLJywgd19jb3N0OiAnMjAwIERLSycgfSxcclxuICAgICAgeyBzX25vOiAnMTEnLCBkYXRlOiAnU2VwIDI1LCAyMDE4JywgbV9jb3N0OiAnMjAwIERLSycsIHdfY29zdDogJzIwMCBES0snIH0sXHJcbiAgICAgIHsgc19ubzogJzEyJywgZGF0ZTogJ1NlcCAyNSwgMjAxOCcsIG1fY29zdDogJzIwMCBES0snLCB3X2Nvc3Q6ICcyMDAgREtLJyB9XHJcbiAgICBdXHJcblxyXG5cclxuICB9XHJcbiAgXHJcbiAgXHJcbn0pKCk7XHJcbiIsIigoKSA9PiB7XHJcbiAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuY29udHJvbGxlcihcIm1lZXRpbmdSb29tQ3RybFwiLCBtZWV0aW5nUm9vbUN0cmwpO1xyXG5cclxuICBmdW5jdGlvbiBtZWV0aW5nUm9vbUN0cmwoXHJcbiAgICAkc2NvcGUsXHJcbiAgICAkdGltZW91dCxcclxuICAgIGF1dGhGYWN0b3J5LFxyXG4gICAgJHN0YXRlLFxyXG4gICAgYXBpRmFjdG9yeSxcclxuICAgIE5vdGlmaWNhdGlvbixcclxuICAgIGdsb2JhbHMsXHJcbiAgICBVcGxvYWRcclxuICApIHtcclxuICAgIC8qIFJlcXVpcmluZyB2YXJzICovXHJcblxyXG4gICAgJHNjb3BlLnRvZG9fbGlzdCA9IFtcclxuICAgICAgeyBpbWc6ICcvYXNzZXRzL2ltYWdlcy9Uby1Eby1JY29uLnBuZycsIHN1YnRpdGxlOiAnMS4nLCB0aXRsZTogJ0xvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LGNvbnNlY3RldHVyIGFkaXBpc2ljaW5nIGVsaXQsc2VkIGRvIGVpdXNtb2QgdGVtcG9yLicsIHdvcms6ICdJbiAxIEhvdXInLCBjbGFzc25hbWU6ICdyZWQtY29sb3InIH0sXHJcbiAgICAgIHsgaW1nOiAnL2Fzc2V0cy9pbWFnZXMvVG8tRG8tSWNvbi5wbmcnLCBzdWJ0aXRsZTogJzIuJywgdGl0bGU6ICdMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCxjb25zZWN0ZXR1ciBhZGlwaXNpY2luZyBlbGl0LHNlZCBkbyBlaXVzbW9kIHRlbXBvci4nLCB3b3JrOiAnSW4gMSBEYXknLCBjbGFzc25hbWU6ICd5ZWxsb3ctY29sb3InIH0sXHJcbiAgICAgIHsgaW1nOiAnL2Fzc2V0cy9pbWFnZXMvVG8tRG8tSWNvbi5wbmcnLCBzdWJ0aXRsZTogJzMuJywgdGl0bGU6ICdMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCxjb25zZWN0ZXR1ciBhZGlwaXNpY2luZyBlbGl0LHNlZCBkbyBlaXVzbW9kIHRlbXBvci4nLCB3b3JrOiAnSW4gMSBXZWVrJywgY2xhc3NuYW1lOiAnZ3JlZW4tY29sb3InIH0sXHJcbiAgICAgIHsgaW1nOiAnL2Fzc2V0cy9pbWFnZXMvVG8tRG8tSWNvbi5wbmcnLCBzdWJ0aXRsZTogJzQuJywgdGl0bGU6ICdMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCxjb25zZWN0ZXR1ciBhZGlwaXNpY2luZyBlbGl0LHNlZCBkbyBlaXVzbW9kIHRlbXBvci4nLCB3b3JrOiAnSW4gMiBXZWVrcycsIGNsYXNzbmFtZTogJ2dyYXktY29sb3InIH0sXHJcbiAgICAgIHsgaW1nOiAnL2Fzc2V0cy9pbWFnZXMvVG8tRG8tSWNvbi5wbmcnLCBzdWJ0aXRsZTogJzUuJywgdGl0bGU6ICdMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCxjb25zZWN0ZXR1ciBhZGlwaXNpY2luZyBlbGl0LHNlZCBkbyBlaXVzbW9kIHRlbXBvci4nLCB3b3JrOiAnSW4gMyBXZWVrcycsIGNsYXNzbmFtZTogJ2dyYXktY29sb3InIH0sXHJcbiAgICAgIHsgaW1nOiAnL2Fzc2V0cy9pbWFnZXMvVG8tRG8tSWNvbi5wbmcnLCBzdWJ0aXRsZTogJzYuJywgdGl0bGU6ICdMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCxjb25zZWN0ZXR1ciBhZGlwaXNpY2luZyBlbGl0LHNlZCBkbyBlaXVzbW9kIHRlbXBvci4nLCB3b3JrOiAnSW4gNCBXZWVrcycsIGNsYXNzbmFtZTogJ2dyYXktY29sb3InIH1cclxuICAgIF1cclxuXHJcbiAgICBcclxuICAgIGxldCB2bSA9IHRoaXM7XHJcbiAgICBjb25zdCB7IGxvZ291dCwgdXNlclN0b3JlIH0gPSBnbG9iYWxzO1xyXG4gICAgaWYgKCFhdXRoRmFjdG9yeS5jaGVja1VzZXIoKSkge1xyXG4gICAgICBsb2dvdXQoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdm0ubG9nb3V0ID0gKCkgPT4ge1xyXG4gICAgICAgIGxvZ291dCgpO1xyXG4gICAgfTtcclxuICAgIC8qIEdldCBwcm9qZWN0IGxpc3QgKi9cclxuICAgIHZtLnVzZXJEYXRhID0gdXNlclN0b3JlLmdldCgpO1xyXG4gICAgXHJcbiAgfVxyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJwYXlyb2xsQ3RybFwiLCBwYXlyb2xsQ3RybCk7XHJcblxyXG4gIGZ1bmN0aW9uIHBheXJvbGxDdHJsKFxyXG4gICAgJHNjb3BlLFxyXG4gICAgJHRpbWVvdXQsXHJcbiAgICAkbG9jYXRpb24sXHJcbiAgICBhdXRoRmFjdG9yeSxcclxuICAgICRzdGF0ZSxcclxuICAgIGFwaUZhY3RvcnksXHJcbiAgICBOb3RpZmljYXRpb24sXHJcbiAgICBnbG9iYWxzXHJcbiAgKSB7XHJcbiAgICAvKiBSZXF1aXJpbmcgdmFycyAqL1xyXG4gICAgbGV0IHZtID0gdGhpcztcclxuICAgIGNvbnN0IHsgbG9nb3V0LCB1c2VyU3RvcmUgfSA9IGdsb2JhbHM7XHJcbiAgICBpZiAoIWF1dGhGYWN0b3J5LmNoZWNrVXNlcigpKSB7XHJcbiAgICAgIGxvZ291dCgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLyogR2V0IHByb2plY3QgbGlzdCAqL1xyXG4gICAgdm0udXNlckRhdGEgPSB1c2VyU3RvcmUuZ2V0KCk7XHJcbiAgICB2bS5sb2dvdXQgPSAoKSA9PiB7IGxvZ291dCgpOyB9O1xyXG5cclxuXHJcbiAgICB2YXIgdXJsID0gJGxvY2F0aW9uLnBhdGgoKTtcclxuICAgIFxyXG4gICAgXHJcbiAgICAkKCcucGF5cm9sbE1lbnUnKS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2sgIWltcG9ydGFudCcpO1xyXG4gICAgXHJcbiAgICAkKCcucGF5cm9sbExpc3QnKS5EYXRhVGFibGUoKTtcclxuICAgIFxyXG4gICAgXHJcbiAgfVxyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJwcmVMb2dpbkN0cmxcIiwgcHJlTG9naW5DdHJsKTtcclxuXHJcbiAgZnVuY3Rpb24gcHJlTG9naW5DdHJsKFxyXG4gICAgJHNjb3BlLFxyXG4gICAgJHRpbWVvdXQsXHJcbiAgICAkc3RhdGUsXHJcbiAgICBhdXRoRmFjdG9yeSxcclxuICAgIGFwaUZhY3RvcnksXHJcbiAgICBnbG9iYWxzLFxyXG4gICAgbG9jYWxTdG9yYWdlU2VydmljZSxcclxuICAgIE5vdGlmaWNhdGlvbixcclxuICAgIE5nTWFwXHJcbiAgKSB7XHJcbiAgICAvKiBSZXF1aXJpbmcgdmFycyAqL1xyXG4gICAgbGV0IHZtID0gdGhpcztcclxuICAgIGNvbnN0IHsgcHJvZ3Jlc3MsIGxvZ291dCwgdXNlclN0b3JlIH0gPSBnbG9iYWxzO1xyXG4gICAgdm0ubG9nZ2VkSW4gPSBmYWxzZTtcclxuXHJcbiAgICBpZiAoYXV0aEZhY3RvcnkuY2hlY2tVc2VyKCkpIHtcclxuICAgICAgJHN0YXRlLmdvKFwiZGFzaGJvYXJkXCIpO1xyXG4gICAgICB2bS5sb2dnZWRJbiA9IHRydWU7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvKiBHb29nbGUgbWFwIGNvbmZpZyAqL1xyXG5cclxuICAgIHZtLmdtYXAgPSB7XHJcbiAgICAgIHVybDpcclxuICAgICAgICBcImh0dHBzOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9qcz9rZXk9QUl6YVN5QTNNSUEtbUtXcV82MHExSzB6T0hndXJheFQtMVFQeE5VXCIsXHJcbiAgICAgIHN0eWxlczogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGVsZW1lbnRUeXBlOiBcImdlb21ldHJ5XCIsXHJcbiAgICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjb2xvcjogXCIjMjEyMTIxXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZWxlbWVudFR5cGU6IFwibGFiZWxzLmljb25cIixcclxuICAgICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIHZpc2liaWxpdHk6IFwib2ZmXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZWxlbWVudFR5cGU6IFwibGFiZWxzLnRleHQuZmlsbFwiLFxyXG4gICAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29sb3I6IFwiIzc1NzU3NVwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGVsZW1lbnRUeXBlOiBcImxhYmVscy50ZXh0LnN0cm9rZVwiLFxyXG4gICAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29sb3I6IFwiIzIxMjEyMVwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGZlYXR1cmVUeXBlOiBcImFkbWluaXN0cmF0aXZlXCIsXHJcbiAgICAgICAgICBlbGVtZW50VHlwZTogXCJnZW9tZXRyeVwiLFxyXG4gICAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29sb3I6IFwiIzc1NzU3NVwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGZlYXR1cmVUeXBlOiBcImFkbWluaXN0cmF0aXZlLmNvdW50cnlcIixcclxuICAgICAgICAgIGVsZW1lbnRUeXBlOiBcImxhYmVscy50ZXh0LmZpbGxcIixcclxuICAgICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNvbG9yOiBcIiM5ZTllOWVcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBmZWF0dXJlVHlwZTogXCJhZG1pbmlzdHJhdGl2ZS5sYW5kX3BhcmNlbFwiLFxyXG4gICAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgdmlzaWJpbGl0eTogXCJvZmZcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBmZWF0dXJlVHlwZTogXCJhZG1pbmlzdHJhdGl2ZS5sb2NhbGl0eVwiLFxyXG4gICAgICAgICAgZWxlbWVudFR5cGU6IFwibGFiZWxzLnRleHQuZmlsbFwiLFxyXG4gICAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29sb3I6IFwiI2JkYmRiZFwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGZlYXR1cmVUeXBlOiBcInBvaVwiLFxyXG4gICAgICAgICAgZWxlbWVudFR5cGU6IFwibGFiZWxzLnRleHQuZmlsbFwiLFxyXG4gICAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29sb3I6IFwiIzc1NzU3NVwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGZlYXR1cmVUeXBlOiBcInBvaS5wYXJrXCIsXHJcbiAgICAgICAgICBlbGVtZW50VHlwZTogXCJnZW9tZXRyeVwiLFxyXG4gICAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29sb3I6IFwiIzE4MTgxOFwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGZlYXR1cmVUeXBlOiBcInBvaS5wYXJrXCIsXHJcbiAgICAgICAgICBlbGVtZW50VHlwZTogXCJsYWJlbHMudGV4dC5maWxsXCIsXHJcbiAgICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjb2xvcjogXCIjNjE2MTYxXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZmVhdHVyZVR5cGU6IFwicG9pLnBhcmtcIixcclxuICAgICAgICAgIGVsZW1lbnRUeXBlOiBcImxhYmVscy50ZXh0LnN0cm9rZVwiLFxyXG4gICAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29sb3I6IFwiIzFiMWIxYlwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGZlYXR1cmVUeXBlOiBcInJvYWRcIixcclxuICAgICAgICAgIGVsZW1lbnRUeXBlOiBcImdlb21ldHJ5LmZpbGxcIixcclxuICAgICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNvbG9yOiBcIiMyYzJjMmNcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBmZWF0dXJlVHlwZTogXCJyb2FkXCIsXHJcbiAgICAgICAgICBlbGVtZW50VHlwZTogXCJsYWJlbHMudGV4dC5maWxsXCIsXHJcbiAgICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjb2xvcjogXCIjOGE4YThhXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZmVhdHVyZVR5cGU6IFwicm9hZC5hcnRlcmlhbFwiLFxyXG4gICAgICAgICAgZWxlbWVudFR5cGU6IFwiZ2VvbWV0cnlcIixcclxuICAgICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNvbG9yOiBcIiMzNzM3MzdcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBmZWF0dXJlVHlwZTogXCJyb2FkLmhpZ2h3YXlcIixcclxuICAgICAgICAgIGVsZW1lbnRUeXBlOiBcImdlb21ldHJ5XCIsXHJcbiAgICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjb2xvcjogXCIjM2MzYzNjXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZmVhdHVyZVR5cGU6IFwicm9hZC5oaWdod2F5LmNvbnRyb2xsZWRfYWNjZXNzXCIsXHJcbiAgICAgICAgICBlbGVtZW50VHlwZTogXCJnZW9tZXRyeVwiLFxyXG4gICAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29sb3I6IFwiIzRlNGU0ZVwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGZlYXR1cmVUeXBlOiBcInJvYWQubG9jYWxcIixcclxuICAgICAgICAgIGVsZW1lbnRUeXBlOiBcImxhYmVscy50ZXh0LmZpbGxcIixcclxuICAgICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNvbG9yOiBcIiM2MTYxNjFcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBmZWF0dXJlVHlwZTogXCJ0cmFuc2l0XCIsXHJcbiAgICAgICAgICBlbGVtZW50VHlwZTogXCJsYWJlbHMudGV4dC5maWxsXCIsXHJcbiAgICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjb2xvcjogXCIjNzU3NTc1XCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZmVhdHVyZVR5cGU6IFwid2F0ZXJcIixcclxuICAgICAgICAgIGVsZW1lbnRUeXBlOiBcImdlb21ldHJ5XCIsXHJcbiAgICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjb2xvcjogXCIjMDAwMDAwXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZmVhdHVyZVR5cGU6IFwid2F0ZXJcIixcclxuICAgICAgICAgIGVsZW1lbnRUeXBlOiBcImxhYmVscy50ZXh0LmZpbGxcIixcclxuICAgICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNvbG9yOiBcIiMzZDNkM2RcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfVxyXG4gICAgICBdLFxyXG4gICAgICBtYXJrZXJzOiBbWzI4LjcwNDEsIDc3LjEwMjVdLCBbMTMuMDgyNywgODAuMjcwN11dXHJcbiAgICB9O1xyXG5cclxuICAgIE5nTWFwLmdldE1hcCgpLnRoZW4obWFwID0+IHtcclxuICAgICAgbWFwLnNldE9wdGlvbnMoe1xyXG4gICAgICAgIHN0eWxlczogdm0uZ21hcC5zdHlsZXMsXHJcbiAgICAgICAgZGlzYWJsZURlZmF1bHRVSTogdHJ1ZSxcclxuICAgICAgICB6b29tOiAyLFxyXG4gICAgICAgIGNlbnRlcjoge1xyXG4gICAgICAgICAgbGF0OiAyOC43MDQxLFxyXG4gICAgICAgICAgbG5nOiA3Ny4xMDI1XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8qIExvZ2luICovXHJcbiAgICAvLyAkc2NvcGUubG9naW4gPSBmdW5jdGlvbiAoaXNWYWxpZCkge1xyXG4gICAgLy8gICBpZiAoaXNWYWxpZCkge1xyXG4gICAgLy8gICAgIGFsZXJ0KClcclxuICAgIC8vICAgICB2YXIgZm9ybURhdGEgPSB7XHJcbiAgICAvLyAgICAgICBlbWFpbDogJHNjb3BlLnVzZXJuYW1lLFxyXG4gICAgLy8gICAgICAgcGFzc3dvcmQ6ICRzY29wZS5wYXNzd29yZFxyXG4gICAgLy8gICAgIH1cclxuICAgIC8vICAgICBjb25zb2xlLmxvZyhmb3JtRGF0YSlcclxuICAgIC8vICAgICBhcGlGYWN0b3J5XHJcbiAgICAvLyAgICAgICAubG9naW4oZm9ybURhdGEpXHJcbiAgICAvLyAgICAgICAudGhlbihyZXNwID0+IHsgfSlcclxuICAgIC8vICAgICAgIC5jYXRjaChlcnIgPT4geyB9KTtcclxuICAgIC8vICAgfVxyXG4gICAgLy8gfVxyXG4gICAgdm0ucmVnc2l0ZXJNb2RhbCA9ICgpID0+IHtcclxuICAgICAgJChcIiNsb2dpbk1vZGFsLCAjZm9yZ290UGFzc01vZGFsXCIpLm1vZGFsKFwiaGlkZVwiKTtcclxuICAgICAgJChcIiNyZWdpc3Rlck1vZGFsXCIpLm1vZGFsKFwic2hvd1wiKTtcclxuICAgIH07XHJcbiAgICB2bS5sb2dpbk1vZGFsID0gKCkgPT4ge1xyXG4gICAgICAkKFwiI3JlZ2lzdGVyTW9kYWwsICNmb3Jnb3RQYXNzTW9kYWxcIikubW9kYWwoXCJoaWRlXCIpO1xyXG4gICAgICAkKFwiI2xvZ2luTW9kYWxcIikubW9kYWwoXCJzaG93XCIpO1xyXG4gICAgfTtcclxuICAgIHZtLmZvcmdvdFBhc3NNb2RhbCA9ICgpID0+IHtcclxuICAgICAgJChcIiNsb2dpbk1vZGFsXCIpLm1vZGFsKFwiaGlkZVwiKTtcclxuICAgICAgJChcIiNmb3Jnb3RQYXNzTW9kYWxcIikubW9kYWwoXCJzaG93XCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2bS5sb2dpbiA9IChpc1ZhbGlkLCBmb3JtRGF0YSkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhmb3JtRGF0YSk7XHJcbiAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAubG9naW4oZm9ybURhdGEpXHJcbiAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAkKFwiI2xvZ2luTW9kYWxcIikubW9kYWwoXCJoaWRlXCIpO1xyXG4gICAgICAgICAgJChcImJvZHlcIikucmVtb3ZlQ2xhc3MoXCJtb2RhbC1vcGVuXCIpO1xyXG4gICAgICAgICAgJChcIi5tb2RhbC1iYWNrZHJvcFwiKS5oaWRlKCk7XHJcbiAgICAgICAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldChcImFjY2Vzcy10b2tlblwiLCByZXNwLmRhdGEudG9rZW4pO1xyXG4gICAgICAgICAgdXNlclN0b3JlLnNldChyZXNwLmRhdGEudXNlcik7XHJcbiAgICAgICAgICAkc3RhdGUuZ28oXCJkYXNoYm9hcmRcIik7XHJcbiAgICAgICAgICBOb3RpZmljYXRpb24uc3VjY2VzcyhcIkxvZ2luIHN1Y2Nlc3NcIik7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgIE5vdGlmaWNhdGlvbi5lcnJvcihlcnIuZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdm0uZm9yZ290UGFzcyA9IChpc1ZhbGlkLCBmb3JtRGF0YSkgPT4ge1xyXG4gICAgICBpZiAoZm9ybURhdGEgPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgTm90aWZpY2F0aW9uLmVycm9yKFwicGxlYXNlIFZhbGlkIG1haWwgSWRcIik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSBmb3JtRGF0YTtcclxuICAgICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgICAuZm9yZ290UGFzc3dvcmQoZGF0YSlcclxuICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAkKFwiI2ZvcmdvdFBhc3NNb2RhbFwiKS5tb2RhbChcImhpZGVcIik7XHJcbiAgICAgICAgICAgIE5vdGlmaWNhdGlvbi5zdWNjZXNzKHJlc3AuZGF0YS5tZXNzYWdlKTtcclxuXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICAgIE5vdGlmaWNhdGlvbi5lcnJvcihlcnIuZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLnJlZ2lzdGVyID0gKGlzVmFsaWQsIGZvcm1EYXRhKSA9PiB7XHJcbiAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAucmVnaXN0cmF0aW9uKGZvcm1EYXRhKVxyXG4gICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgJChcIiNyZWdpc3Rlck1vZGFsXCIpLm1vZGFsKFwiaGlkZVwiKTtcclxuICAgICAgICAgIE5vdGlmaWNhdGlvbi5zdWNjZXNzKHJlc3AuZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgJChcIiNyZWdpc3Rlck1vZGFsXCIpLm1vZGFsKFwiaGlkZVwiKTtcclxuICAgICAgICAgIE5vdGlmaWNhdGlvbi5lcnJvcihlcnIuZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdm0uc3Vic2NyaWJlID0gZW1haWwgPT4ge1xyXG4gICAgICBsZXQgZW1haWxSZWdleCA9IC9eXFx3KyhbXFwuLV0/XFx3KykqQFxcdysoW1xcLi1dP1xcdyspKihcXC5cXHd7MiwzfSkrJC87XHJcbiAgICAgIGlmICghZW1haWxSZWdleC50ZXN0KGVtYWlsKSkge1xyXG4gICAgICAgIE5vdGlmaWNhdGlvbi5lcnJvcihcIkludmFsaWQgZW1haWxcIik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAuc3Vic2NyaWJlKHsgZW1haWw6IGVtYWlsIH0pXHJcbiAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICB2bS5zdWJzY3JpYmVFbWFpbCA9IFwiXCI7XHJcbiAgICAgICAgICBOb3RpZmljYXRpb24uc3VjY2VzcyhyZXNwLmRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgIE5vdGlmaWNhdGlvbi5lcnJvcihlcnIuZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgfVxyXG4gIChmdW5jdGlvbigkKSB7XHJcbiAgICAkKHdpbmRvdykub24oXCJsb2FkXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAkKFwiI3JlZ2lzdGVyTW9kYWwgLm1vZGFsLWJvZHlcIikubUN1c3RvbVNjcm9sbGJhcih7XHJcbiAgICAgICAgc2V0SGVpZ2h0OiAzNDAsXHJcbiAgICAgICAgdGhlbWU6IFwibWluaW1hbC1kYXJrXCJcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSkoKTtcclxuIiwiKCgpID0+IHtcclxuICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwicHJvamVjdEN0cmxcIiwgcHJvamVjdEN0cmwpO1xyXG5cclxuICBmdW5jdGlvbiBwcm9qZWN0Q3RybChcclxuICAgICRzY29wZSxcclxuICAgICR0aW1lb3V0LFxyXG4gICAgYXV0aEZhY3RvcnksXHJcbiAgICAkc3RhdGUsXHJcbiAgICBhcGlGYWN0b3J5LFxyXG4gICAgTm90aWZpY2F0aW9uLFxyXG4gICAgZ2xvYmFscyxcclxuICAgIE5nTWFwXHJcbiAgKSB7XHJcbiAgICAvKiBSZXF1aXJpbmcgdmFycyAqL1xyXG5cclxuICAgIGxldCB2bSA9IHRoaXM7XHJcblxyXG4gICAgY29uc3QgeyBsb2dvdXQsIHVzZXJTdG9yZSB9ID0gZ2xvYmFscztcclxuXHJcbiAgICBpZiAoIWF1dGhGYWN0b3J5LmNoZWNrVXNlcigpKSB7XHJcbiAgICAgIGxvZ291dCgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLyogR2V0IHByb2plY3QgbGlzdCAqL1xyXG5cclxuICAgIHZtLnVzZXJEYXRhID0gdXNlclN0b3JlLmdldCgpO1xyXG5cclxuICAgIGFwaUZhY3RvcnlcclxuICAgICAgLmxpc3RBbGxQcm9qZWN0cygpXHJcbiAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3AuZGF0YSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgdm0ubG9nb3V0ID0gKCkgPT4ge1xyXG4gICAgICBsb2dvdXQoKTtcclxuICAgIH07XHJcbiAgfVxyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuY29udHJvbGxlcihcInJlcG9ydERldGFpbEN0cmxcIiwgcmVwb3J0RGV0YWlsQ3RybCk7XHJcblxyXG4gICAgZnVuY3Rpb24gcmVwb3J0RGV0YWlsQ3RybChcclxuICAgICAgICAkc2NvcGUsXHJcbiAgICAgICAgJHRpbWVvdXQsXHJcbiAgICAgICAgYXV0aEZhY3RvcnksXHJcbiAgICAgICAgJHN0YXRlLFxyXG4gICAgICAgIGFwaUZhY3RvcnksXHJcbiAgICAgICAgTm90aWZpY2F0aW9uLFxyXG4gICAgICAgIE5nTWFwLFxyXG4gICAgICAgIGdsb2JhbHMsXHJcbiAgICAgICAgbG9jYWxTdG9yYWdlU2VydmljZSxcclxuICAgICAgKSB7XHJcbiAgICAgICAgbGV0IHZtID0gdGhpcztcclxuICAgICAgICAkc2NvcGUuaW1hZ2UxPVwiLi4vYXNzZXRzL2ltYWdlcy9yZXBvcnRpbWdzL3JlcC5qcGdcIjtcclxuICAgICAgICAkc2NvcGUuaW1hZ2UyPVwiLi4vYXNzZXRzL2ltYWdlcy9yZXBvcnRpbWdzL2ZpbGUuanBnXCI7XHJcbiAgICAgICAgY29uc3QgeyBsb2dvdXQgfSA9IGdsb2JhbHM7XHJcbiAgICAgICAgJHNjb3BlLnJlcG9ydE9iaj17fTtcclxuICAgICAgICAkc2NvcGUuc2h3Q29tbWVudFNlY3Rpb249ZmFsc2U7XHJcbiAgICAgICAgJHNjb3BlLlJlcG9ydElzc3VlPXt9O1xyXG4gICAgICAgICRzY29wZS5pc3N1ZVRvQWRkPVtdO1xyXG4gICAgICAgICRzY29wZS5tb2RlbHMgPSB7XHJcbiAgICAgICAgICBzZWxlY3RlZDogbnVsbCxcclxuICAgICAgICAgXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoIWF1dGhGYWN0b3J5LmNoZWNrVXNlcigpKSB7XHJcbiAgICAgICAgICBsb2dvdXQoKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB2bS5sb2dvdXQgPSAoKSA9PiB7XHJcbiAgICAgICAgICBsb2dvdXQoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZXhwb3J0VG9QZGYgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgICAgaW1nLnNyYz1cIi4uL2Fzc2V0cy9pbWFnZXMvcmVwb3J0aW1ncy9yZXAuanBnXCI7XHJcbiAgICAgICAgICB2YXIgaW1nMSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgICAgaW1nMS5zcmM9XCIuLi9hc3NldHMvaW1hZ2VzL3JlcG9ydGltZ3MvZmlsZS5qcGdcIjtcclxuICAgICAgICB2YXIgZG9jID0gbmV3IGpzUERGKCdwJyk7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7ICdiYWNrZ3JvdW5kJzogJyNmZmYnIH07XHJcbiAgICAgICAgZG9jLmFkZEltYWdlKGltZywgJ3BuZycsIDE1LCAyMCwgOTAsIDkwKTtcclxuICAgICAgICBkb2MuYWRkSW1hZ2UoaW1nMSwncG5nJywxMTAsMjAsOTAsOTApO1xyXG4gICAgICBcclxuICAgICAgZG9jLmF1dG9UYWJsZSh7XHJcbiAgICAgICAgaHRtbDogJyNzdGF0aWN0YWJsZScsXHJcbiAgICAgICAgXHJcbiAgICAgICAgbWFyZ2luOiB7dG9wOiAxMjB9LFxyXG4gICAgICAgIHBhZ2VCcmVhazogJ2F1dG8nLCAvLyAnYXV0bycsICdhdm9pZCcgb3IgJ2Fsd2F5cydcclxuICAgICAgICB0YWJsZVdpZHRoOiAnYXV0bycsIC8vICdhdXRvJywgJ3dyYXAnIG9yIGEgbnVtYmVyLFxyXG4gICAgICAgIHNob3dIZWFkZXI6ICdldmVyeVBhZ2UnLCAvLyAnZXZlcnlQYWdlJywgJ2ZpcnN0UGFnZScsICduZXZlcicsIFxyXG4gICAgICAgXHJcbiAgICB9KTtcclxuXHJcbiAgICAgICAgZG9jLnNldEZvbnRTaXplKDI1KTtcclxuICAgICAgICBkb2MudGV4dCgyMCwgMTUwLCAnQ29tbWVudHMnKTtcclxuICAgICAgICBkb2Muc2V0Rm9udFNpemUoMTApO1xyXG4gICAgICAgIGRvYy5zZXRGb250KFwiaGVsdmV0aWNhXCIpO1xyXG4gICAgICAgXHJcbiAgICAgICAgZG9jLnRleHQoMjAsIDE2MCwgJ0xvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNjaW5nIGVsaXQsIHNlZCBkbyBlaXVzbW9kIHRlbXBvcicpO1xyXG4gICAgICAgIGRvYy50ZXh0KDIwLDE3MCwnaW5jaWRpZHVudCB1dCBsYWJvcmUgZXQgZG9sb3JlIG1hZ25hIGFsaXF1YS4gVXQgZW5pbSBhZCBtaW5pbSB2ZW5pYW0sIHF1aXMgbm9zdHJ1ZCBleGVyY2l0YXRpb24gdWxsYW1jbycpO1xyXG4gICAgICAgIC8vIGRvYy5hZGRIVE1MKCQoJyNwZGZpZDEnKVswXSwxNSwxNSwgb3B0aW9ucywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZG9jLnRleHQoMjAsMTgwLCcgbGFib3JpcyBuaXNpIHV0IGFsaXF1aXAgZXggZWEgY29tbW9kbyBjb25zZXF1YXQuJyk7XHJcbiAgICAgICAgLy8gICBkb2MuYXV0b1RhYmxlKHtcclxuICAgICAgICAvLyAgICAgaGVhZDogW1snTmFtZScsICdFbWFpbCcsICdDb3VudHJ5J11dLFxyXG4gICAgICAgIC8vICAgICBib2R5OiBbXHJcbiAgICAgICAgLy8gICAgICAgICBbJ0RhdmlkJywgJ2RhdmlkQGV4YW1wbGUuY29tJywgJ1N3ZWRlbiddLFxyXG4gICAgICAgIC8vICAgICAgICAgWydDYXN0aWxsZScsICdjYXN0aWxsZUBleGFtcGxlLmNvbScsICdOb3J3YXknXSxcclxuICAgICAgICAvLyAgICAgICAgIC8vIC4uLlxyXG4gICAgICAgIC8vICAgICBdXHJcbiAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgICBkb2Muc2F2ZShcImNvbHVtbjgucGRmXCIpO1xyXG4gICAgICAgIC8vIH0pO1xyXG4gICAgICAgXHJcbiAgICAgICAgICAvLyB2YXIgb3B0aW9ucyA9IHtcclxuICAgICAgICAgIC8vICAgcGFnZXNwbGl0OiB0cnVlIC8vaW5jbHVkZSB0aGlzIGluIHlvdXIgY29kZVxyXG4gICAgICAgICAgLy8gfTtcclxuICAgICAgICAgIC8vIHZhciBkb2MgPSBuZXcganNQREYoJ3AnLCAncHQnLCAnYTQnKVxyXG4gICAgICAgICAgLy8gZG9jLmFkZEhUTUwoJCgnI3BkZmlkJyksb3B0aW9ucywge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgIC8vICAgJ2JhY2tncm91bmQnOiAnI2ZmZicsXHJcbiAgICAgICAgICAvLyB9LCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIC8vICAgZG9jLnNhdmUoJ3NhbXBsZS1maWxlLnBkZicpO1xyXG4gICAgICAgICAgLy8gfSk7XHJcbiAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogUHJvamVjdCBwaWNrZXIgbG9hZCBmdW5jdGlvbmFsaXR5ICovXHJcblxyXG4gICAgICAgICAgICBsZXQgZW5hYmxlZCA9IHRydWUsXHJcbiAgICAgICAgICAgIGNodW5rU2l6ZSA9IDU7XHJcbiAgICAgICAgICAgIHZtLmlzc3VlU2VhcmNoID0gXCJcIjtcclxuICAgICAgICAgICAgdm0uZW5hYmxlTGF6eUxvYWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgdm0uc29ydFBhcmFtcyA9IHtcclxuICAgICAgICAgICAgZmllbGQ6IFwiY3JlYXRlZFwiLFxyXG4gICAgICAgICAgICB0eXBlOiBmYWxzZVxyXG4gICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gJHNjb3BlLm9wZW5SZXBvcnRQaWNrID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAvLyAgIHZtLmVuYWJsZUxhenlMb2FkID0gdHJ1ZTtcclxuICAgICAgICAvLyAgIGFwaUZhY3RvcnlcclxuICAgICAgICAvLyAgICAgLmxpc3RBbGxJc3N1ZXMoe1xyXG4gICAgICAgIC8vICAgICAgIHNlYXJjaDogdm0uaXNzdWVTZWFyY2gsXHJcbiAgICAgICAgLy8gICAgICAgY2h1bms6IGNodW5rU2l6ZSxcclxuICAgICAgICAvLyAgICAgICBwYWdlOiAxLFxyXG4gICAgICAgIC8vICAgICAgIHNvcnQ6IHZtLnNvcnRQYXJhbXMuZmllbGQsXHJcbiAgICAgICAgLy8gICAgICAgc29ydFR5cGU6IHZtLnNvcnRQYXJhbXMudHlwZVxyXG4gICAgICAgIC8vICAgICB9KVxyXG4gICAgICAgIC8vICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAvLyAgICAgICB2bS5pc3N1ZVBpY2tlckRhdGEgPSByZXNwLmRhdGEubGlzdDtcclxuICAgIFxyXG4gICAgICAgIC8vICAgICAgICR0aW1lb3V0KCgpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgIC8vIE9wZW4gaW4gdGhlIG5leHQgZXZlbnQgbG9vcFxyXG4gICAgICAgIC8vICAgICAgICAgJChcIiNjaG9vc2VJc3N1ZU1vZGFsXCIpLm1vZGFsKFwic2hvd1wiKTtcclxuICAgICAgICAvLyAgICAgICB9KTtcclxuICAgICAgICAvLyAgICAgfSlcclxuICAgICAgICAvLyAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgIC8vICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgIFxyXG4gICAgICAgICRzY29wZS5vcGVuUmVwb3J0UGlja2VyID0gZnVuY3Rpb24oKXtcclxuICAgICAgICBcclxuICAgICAgICAgIHZtLmVuYWJsZUxhenlMb2FkID0gdHJ1ZTtcclxuICAgICAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAgICAgLmxpc3RBbGxJc3N1ZXMoe1xyXG4gICAgICAgICAgICAgIHNlYXJjaDogdm0uaXNzdWVTZWFyY2gsXHJcbiAgICAgICAgICAgICAgY2h1bms6IGNodW5rU2l6ZSxcclxuICAgICAgICAgICAgICBwYWdlOiAxLFxyXG4gICAgICAgICAgICAgIHNvcnQ6IHZtLnNvcnRQYXJhbXMuZmllbGQsXHJcbiAgICAgICAgICAgICAgc29ydFR5cGU6IHZtLnNvcnRQYXJhbXMudHlwZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIHZtLmlzc3VlUGlja2VyRGF0YT1bXTtcclxuICAgICAgICAgICAgICBpZigkc2NvcGUuaXNzdWVUb0FkZC5sZW5ndGg+MCl7XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXNzdWVUb0FkZC5mb3JFYWNoKGVsZW1lbnQ9PntcclxuICAgICAgICAgICAgICAgIHJlc3AuZGF0YS5saXN0LmZvckVhY2goKHJlc2RhdGEsaW5kZXgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZWxlbWVudC5faWQ9PXJlc2RhdGEuX2lkKXtcclxuICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgcmVzcC5kYXRhLmxpc3Quc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZmFsc2VcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkdGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBPcGVuIGluIHRoZSBuZXh0IGV2ZW50IGxvb3BcclxuICAgICAgICAgICAgICAgIHZtLmlzc3VlUGlja2VyRGF0YSA9IHJlc3AuZGF0YS5saXN0O1xyXG4gICAgICAgICAgICAgICAgJChcIiNsaXN0aXNzdWVzbW9kYWxcIikubW9kYWwoXCJoaWRlXCIpO1xyXG4gICAgICAgICAgICAgICAgJChcIiNjaG9vc2VJc3N1ZU1vZGFsXCIpLm1vZGFsKFwic2hvd1wiKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5FZGl0TW9kZT1mYWxzZTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJChcIiNjaG9vc2VJc3N1ZU1vZGFsXCIpLm9uKFwiaGlkZS5icy5tb2RhbFwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHZtLmVuYWJsZUxhenlMb2FkID0gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZtLmNsb3NlSXNzdWVQaWNrZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgICAkKFwiI2Nob29zZUlzc3VlTW9kYWxcIikubW9kYWwoXCJoaWRlXCIpO1xyXG4gICAgICAgICAgdm0uaXNzdWVTZWFyY2ggPSBcIlwiO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5hZGRNb3JlID0gKCkgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coXCJjYWxsaW5nIGFkZCBtb3JlXCIpO1xyXG4gICAgICAgICAgaWYgKGVuYWJsZWQpIHtcclxuICAgICAgICAgICAgZW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkdGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgZW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgICAgIGNodW5rU2l6ZSArPSA1O1xyXG4gICAgICAgICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgICAgICAgLmxpc3RBbGxJc3N1ZXMoe1xyXG4gICAgICAgICAgICAgICAgc2VhcmNoOiB2bS5pc3N1ZVNlYXJjaCxcclxuICAgICAgICAgICAgICAgIGNodW5rOiBjaHVua1NpemUsXHJcbiAgICAgICAgICAgICAgICBwYWdlOiAxLFxyXG4gICAgICAgICAgICAgICAgc29ydDogdm0uc29ydFBhcmFtcy5maWVsZCxcclxuICAgICAgICAgICAgICAgIHNvcnRUeXBlOiB2bS5zb3J0UGFyYW1zLnR5cGVcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgIC8vIHZtLmlzc3VlUGlja2VyRGF0YSA9IHJlc3AuZGF0YS5saXN0O1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAgICAgdm0uaXNzdWVQaWNrZXJEYXRhPVtdO1xyXG4gICAgICAgICAgICAgIGlmKCRzY29wZS5pc3N1ZVRvQWRkLmxlbmd0aD4wKXtcclxuICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXNzdWVUb0FkZC5mb3JFYWNoKGVsZW1lbnQ9PntcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICByZXNwLmRhdGEubGlzdC5mb3JFYWNoKChyZXNkYXRhLGluZGV4KT0+e1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGVsZW1lbnQuX2lkPT1yZXNkYXRhLl9pZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXNwLmRhdGEubGlzdC5zcGxpY2UoaW5kZXgsMSlcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICR0aW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIE9wZW4gaW4gdGhlIG5leHQgZXZlbnQgbG9vcFxyXG4gICAgICAgICAgICAgICAgdm0uaXNzdWVQaWNrZXJEYXRhID0gcmVzcC5kYXRhLmxpc3Q7XHJcbiAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgIC8qIEZ1bmN0aW9uIHRvIHNlYXJjaCBwcm9qZWN0cyAqL1xyXG4gICAgdm0uc2VhcmNoSXNzdWVzID0gdGV4dCA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwic2VyY2h0ZXh0XCIsIHRleHQpO1xyXG4gICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgLmxpc3RBbGxJc3N1ZXMoe1xyXG4gICAgICAgICAgc2VhcmNoOiB2bS5pc3N1ZVNlYXJjaCxcclxuICAgICAgICAgIGNodW5rOiBjaHVua1NpemUsXHJcbiAgICAgICAgICBwYWdlOiAxLFxyXG4gICAgICAgICAgc29ydDogdm0uc29ydFBhcmFtcy5maWVsZCxcclxuICAgICAgICAgIHNvcnRUeXBlOiB2bS5zb3J0UGFyYW1zLnR5cGVcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgdm0uaXNzdWVQaWNrZXJEYXRhID0gcmVzcC5kYXRhLmxpc3Q7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgIH07XHJcblxyXG5cclxuICAgICAgIC8vQWRkIHJlbWFyayBidXR0b24gaW4gcmVwb3J0LXJlbWFya3MgcGFnZSBmb3JtXHJcbiAgICAgICAkc2NvcGUucmVtYXJrRGF0YT1bXTtcclxuICAgICAgICRzY29wZS5hZGRSZW1hcmsgPSBmdW5jdGlvbih0aXRsZSx2YWx1ZSl7XHJcbiAgICAgICAgaWYodGl0bGUhPXVuZGVmaW5lZHx8dmFsdWUhPXVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAkc2NvcGUucmVtYXJrRGF0YS5wdXNoKHtUaXRsZTp0aXRsZSwgVmFsdWU6dmFsdWV9KTtcclxuICAgICAgICAgICQoJyNyZW1hcmt0aXRsZScpLnZhbChcIlwiKTtcclxuICAgICAgICAgICQoJyNyZW1hcmt2YWx1ZScpLnZhbChcIlwiKTtcclxuICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICBcclxuICAgICAgIH0sXHJcblxyXG4gICAgICAgdm0uY2hvb3NlSXNzdWVzID0gZnVuY3Rpb24oaXNzdWUsaW5kZXgsYXJyYXkpe1xyXG4gICAgICAgIC8vJHNjb3BlLmN1cnJlbnRSZXBvcnQ9e307XHJcbiAgICAgICAgIGlmKGlzc3VlKXtcclxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiaVNTVUVcIixpc3N1ZSk7XHJcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImluZGV4XCIsaW5kZXgpO1xyXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coXCJBUlJBWVwiLGFycmF5KTtcclxuICAgICAgICAgIGFycmF5LnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAkc2NvcGUuaXNzdWVUb0FkZC5wdXNoKGlzc3VlKTtcclxuICAgICAgICAgICQoXCIjY2hvb3NlSXNzdWVNb2RhbFwiKS5tb2RhbChcImhpZGVcIik7XHJcbiAgICAgICAgICAkKFwiI2xpc3Rpc3N1ZXNtb2RhbFwiKS5tb2RhbChcInNob3dcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICBOb3RpZmljYXRpb24uZXJyb3IoXCJObyBzZWxlY3Rpb25cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgfVxyXG5cclxuICAgICAgICBcclxuICAgICAgIHZtLmFkZFRvTGlzdElzc3VlUGlja2VyID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAkKFwiI2Nob29zZUlzc3VlTW9kYWxcIikubW9kYWwoXCJoaWRlXCIpO1xyXG4gICAgICAgICQoXCIjbGlzdGlzc3Vlc21vZGFsXCIpLm1vZGFsKFwic2hvd1wiKTtcclxuICAgICAgIH1cclxuXHJcbiAgICAgICAkc2NvcGUuc2VuZElzc3VlVG9QZGYgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICQoXCIjbGlzdGlzc3Vlc21vZGFsXCIpLm1vZGFsKFwiaGlkZVwiKTtcclxuICAgICAgICAkc2NvcGUuc2h3Q29tbWVudFNlY3Rpb249dHJ1ZTtcclxuICAgICAgIH1cclxuICAgICAgLy8gdm0uY2hvb3NlSXNzdWVzID0gZnVuY3Rpb24oaXNzdWUpe1xyXG4gICAgICAvLyAgICRzY29wZS5jdXJyZW50UmVwb3J0PXt9O1xyXG4gICAgICAvLyAgIGlmKGlzc3VlKXtcclxuICAgICAgLy8gICAgIHZhciBwYXJlbnRFbGVtZW50ID0gYW5ndWxhci5lbGVtZW50KCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLnBhbmVsJyApICk7XHJcbiAgICAgIC8vICAgICB2YXIgdG9iZUNsb25lZEVsZW1lbnQgPSBhbmd1bGFyLmVsZW1lbnQoIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoICcuY2hpbGQnICkgKTtcclxuICAgICAgLy8gICAgIHBhcmVudEVsZW1lbnQuYXBwZW5kKHRvYmVDbG9uZWRFbGVtZW50LmNsb25lKCkpO1xyXG4gICAgICAvLyAgICAgJHNjb3BlLmlzc3VlVG9BZGQucHVzaChpc3N1ZSk7XHJcbiAgICAgIC8vICAgIC8vICQoXCIjY2hvb3NlSXNzdWVNb2RhbFwiKS5tb2RhbChcImhpZGVcIik7XHJcbiAgICAgIC8vICAgIGlmKCRzY29wZS5pc3N1ZVRvQWRkLmxlbmd0aD49MCl7XHJcbiAgICAgIC8vICAgICAkc2NvcGUuaXNzdWVUb0FkZC5mb3JFYWNoKG9uZWlzc3VlID0+IHtcclxuICAgICAgLy8gICAgICAgaWYoXy5pc0VxdWFsKG9uZWlzc3VlLCBpc3N1ZSkpe1xyXG4gICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKFwiZXF1YWxcIik7XHJcbiAgICAgIC8vICAgICAgICAgJHNjb3BlLmN1cnJlbnRSZXBvcnQ9aXNzdWU7XHJcbiAgICAgIC8vICAgICAgIH1lbHNle1xyXG4gICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKFwibm90IGVxdWFsXCIpO1xyXG4gICAgICAvLyAgICAgICB9XHJcbiAgICAgIC8vICAgICB9KTtcclxuICAgICAgLy8gICAgfVxyXG4gICAgICAgICBcclxuICAgICAgLy8gICB9XHJcbiAgICAgIC8vICAgZWxzZXtcclxuICAgICAgLy8gICAgIE5vdGlmaWNhdGlvbi5lcnJvcihcIk5vIHNlbGVjdGlvblwiKTtcclxuICAgICAgLy8gICB9XHJcbiAgICAgICAgXHJcbiAgICAgIC8vICB9XHJcbiAgICAvL0xvYWQgTW9kYWxzXHJcbiAgICAgICRzY29wZS5jb3ZlclBhZ2VNb2RhbCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJChcIiNjb3ZlcnBhZ2Vtb2RhbFwiKS5tb2RhbChcInNob3dcIik7XHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLmFib3V0VXNNb2RhbCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJChcIiNhYm91dHVzbW9kYWxcIikubW9kYWwoXCJzaG93XCIpO1xyXG4gICAgICB9XHJcbiAgICAgICRzY29wZS5wcm9qZWN0TWV0YU1vZGFsID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAkKFwiI3Byb2plY3RtZXRhbW9kYWxcIikubW9kYWwoXCJzaG93XCIpO1xyXG4gICAgICB9XHJcbiAgICAgICRzY29wZS5yZXBvcnRyZW1hcmtNb2RhbCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJChcIiNyZXBvcnRyZW1hcmttb2RhbFwiKS5tb2RhbChcInNob3dcIik7XHJcbiAgICAgIH1cclxuICAgICAgLy9uZXcgaXNzdWUgbGlzdGluZyBtb2RlbFxyXG4gICAgICAkc2NvcGUubGlzdElzc3VlTW9kZWxDbGljayA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJChcIiNsaXN0aXNzdWVzbW9kYWxcIikubW9kYWwoXCJzaG93XCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvL3NldCBvYmplY3QgZm9yIG1vZGFsc1xyXG4gICAgICAkc2NvcGUuc2V0UmVwb3J0T2JqID0gZnVuY3Rpb24ob2JqZWN0KXtcclxuICAgICAgICBjb25zb2xlLmxvZyhvYmplY3QpO1xyXG4gICAgICAgICRzY29wZS5SZXBvcnRJc3N1ZS50aXRsZSA9IG9iamVjdC50aXRsZTtcclxuICAgICAgICAkc2NvcGUuUmVwb3J0SXNzdWUuZGVzY3JpcHRpb24gPSBvYmplY3QuZGVzY3JpcHRpb247XHJcbiAgICAgICAgJHNjb3BlLlJlcG9ydElzc3VlLmNvbXBhbnlOYW1lID0gb2JqZWN0LmNvbXBhbnlOYW1lO1xyXG4gICAgICAgICRzY29wZS5SZXBvcnRJc3N1ZS5lbWFpbCA9IG9iamVjdC5lbWFpbDtcclxuICAgICAgICAkc2NvcGUuUmVwb3J0SXNzdWUud2Vic2l0ZSA9IG9iamVjdC53ZWJzaXRlO1xyXG4gICAgICAgICRzY29wZS5SZXBvcnRJc3N1ZS5waG9uZSA9IG9iamVjdC5waG9uZTtcclxuICAgICAgICAkc2NvcGUuUmVwb3J0SXNzdWUucHJvamVjdE5hbWUgPSBvYmplY3QucHJvamVjdE5hbWU7XHJcbiAgICAgICAgJHNjb3BlLlJlcG9ydElzc3VlLnNlcmlhbE5vID0gb2JqZWN0LnNlcmlhbE5vO1xyXG4gICAgICAgICRzY29wZS5SZXBvcnRJc3N1ZS5lbnRlcnByaXNlID0gb2JqZWN0LmVudGVycHJpc2U7XHJcbiAgICAgICAgaWYoJHNjb3BlLmlzc3VlVG9BZGQubGVuZ3RoPjApe1xyXG4gICAgICAgICAgJHNjb3BlLlJlcG9ydElzc3VlLmlzc3VlVG9BZGQgPSAkc2NvcGUuaXNzdWVUb0FkZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoJHNjb3BlLnJlbWFya0RhdGEubGVuZ3RoPjApe1xyXG4gICAgICAgICAgJHNjb3BlLlJlcG9ydElzc3VlLnJlbWFya0RhdGE9JHNjb3BlLnJlbWFya0RhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICRzY29wZS5SZXBvcnRJc3N1ZS5hdXRob3JOYW1lPW9iamVjdC5hdXRob3JOYW1lO1xyXG4gICAgICAgICRzY29wZS5SZXBvcnRJc3N1ZS5yZW1hcmtEYXRlPW9iamVjdC5yZW1hcmtEYXRlO1xyXG5cclxuICAgICAgICAkKFwiI2NvdmVycGFnZW1vZGFsXCIpLm1vZGFsKFwiaGlkZVwiKTtcclxuICAgICAgICAkKFwiI2Fib3V0dXNtb2RhbFwiKS5tb2RhbChcImhpZGVcIik7XHJcbiAgICAgICAgJChcIiNwcm9qZWN0bWV0YW1vZGFsXCIpLm1vZGFsKFwiaGlkZVwiKTtcclxuICAgICAgICAkKFwiI3JlcG9ydHJlbWFya21vZGFsXCIpLm1vZGFsKFwiaGlkZVwiKTtcclxuICAgICAgICAkKFwiI2Nob29zZUlzc3VlTW9kYWxcIikubW9kYWwoXCJoaWRlXCIpOyBcclxuICAgICAgfVxyXG5cclxuICAgICAgJHNjb3BlLkVkaXRNb2RlPWZhbHNlO1xyXG4gICAgICAkc2NvcGUuRWRpdElzc3VlRGF0YT1mdW5jdGlvbigpe1xyXG4gICAgICAgICRzY29wZS5FZGl0TW9kZT10cnVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkc2NvcGUucmVtb3ZlRnJvbUlzc3VlTGlzdD1mdW5jdGlvbihpbmRleCxhcnJheSl7XHJcbiAgICAgICAgYXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuaXNzdWVUb0FkZCk7IFxyXG4gICAgICB9XHJcbiAgICAgXHJcbiAgICAgXHJcbiAgICAgXHJcbiAgICB9XHJcbn0pKCk7IiwiKCgpID0+IHtcclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJyZXBvcnRzQ3RybFwiLCByZXBvcnRzQ3RybCk7XHJcblxyXG4gICAgZnVuY3Rpb24gcmVwb3J0c0N0cmwoXHJcbiAgICAgICAgJHNjb3BlLFxyXG4gICAgICAgICR0aW1lb3V0LFxyXG4gICAgICAgIGF1dGhGYWN0b3J5LFxyXG4gICAgICAgICRzdGF0ZSxcclxuICAgICAgICBhcGlGYWN0b3J5LFxyXG4gICAgICAgIE5vdGlmaWNhdGlvbixcclxuICAgICAgICBOZ01hcCxcclxuICAgICAgICBnbG9iYWxzLFxyXG4gICAgICAgIGxvY2FsU3RvcmFnZVNlcnZpY2UsXHJcbiAgICAgICkge1xyXG4gICAgICAgIGxldCB2bSA9IHRoaXM7XHJcblxyXG4gICAgICAgIGNvbnN0IHsgbG9nb3V0LCB1c2VyU3RvcmUgfSA9IGdsb2JhbHM7XHJcbiAgICAgXHJcbiAgICAgICAgaWYgKCFhdXRoRmFjdG9yeS5jaGVja1VzZXIoKSkge1xyXG4gICAgICAgICAgbG9nb3V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICRzY29wZS5jdXJyZW50VXNlciA9IGxvY2FsU3RvcmFnZVNlcnZpY2UuZ2V0KFwidXNlckRhdGFcIilcclxuICAgICAgICBcclxuICAgICAgICAkc2NvcGUucmVwb3J0Q2F0ZWdvcnkgPSBbJ2lzc3VlUmVwb3J0JywgJ3NhZmV0eVJlcG9ydCcsICdxYVJlcG9ydCddO1xyXG4gICAgICAgIGFwaUZhY3RvcnkubGlzdEFsbFVzZXJzKCkudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgIHZtLmFsbEFkbWluVXNlcnMgPSByZXNwLmRhdGEubGlzdDtcclxuICAgICAgICB9KTtcclxuICAgICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgLmxpc3RBbGxQcm9qZWN0cygpXHJcbiAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICB2bS5wcm9qZWN0TGlzdCA9IHJlc3AuZGF0YTtcclxuICAgICAgICAgIC8qIEluaXRpYWxseSBsb2FkIHRoZSBmaXJzdCBwcm9qZWN0IGFzIGRlZmF1bHQgKi9cclxuICAgICAgICAgXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2bS5sb2dvdXQgPSAoKSA9PiB7XHJcbiAgICAgICAgICBsb2dvdXQoKTtcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICAgIChmdW5jdGlvbigkKSB7XHJcbiAgICAgICAgJCh3aW5kb3cpLm9uKFwibG9hZFwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICQoXCIjcmVwb3J0TW9kYWwgLm1vZGFsLWJvZHlcIikubUN1c3RvbVNjcm9sbGJhcih7XHJcbiAgICAgICAgICAgIHNldEhlaWdodDogMzQwLFxyXG4gICAgICAgICAgICB0aGVtZTogXCJtaW5pbWFsLWRhcmtcIlxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG5cclxufSkoKTsiLCIoKCkgPT4ge1xyXG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJyZXBvcnRzTGlzdGluZ0N0cmxcIiwgcmVwb3J0c0xpc3RpbmdDdHJsKTtcclxuXHJcbiAgZnVuY3Rpb24gcmVwb3J0c0xpc3RpbmdDdHJsKFxyXG4gICAgJHNjb3BlLFxyXG4gICAgJHRpbWVvdXQsXHJcbiAgICAkbG9jYXRpb24sXHJcbiAgICBhdXRoRmFjdG9yeSxcclxuICAgICRzdGF0ZSxcclxuICAgIGFwaUZhY3RvcnksXHJcbiAgICBOb3RpZmljYXRpb24sXHJcbiAgICBnbG9iYWxzXHJcbiAgKSB7XHJcbiAgICAvKiBSZXF1aXJpbmcgdmFycyAqL1xyXG4gICAgbGV0IHZtID0gdGhpcztcclxuICAgIGNvbnN0IHsgbG9nb3V0LCB1c2VyU3RvcmUgfSA9IGdsb2JhbHM7XHJcbiAgICBpZiAoIWF1dGhGYWN0b3J5LmNoZWNrVXNlcigpKSB7XHJcbiAgICAgIGxvZ291dCgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLyogR2V0IHByb2plY3QgbGlzdCAqL1xyXG4gICAgdm0udXNlckRhdGEgPSB1c2VyU3RvcmUuZ2V0KCk7XHJcbiAgICB2bS5sb2dvdXQgPSAoKSA9PiB7IGxvZ291dCgpOyB9O1xyXG5cclxuXHJcbiAgICB2YXIgdXJsID0gJGxvY2F0aW9uLnBhdGgoKTtcclxuICAgIFxyXG4gICAgaWYgKHVybCA9PSAnL3BheXJvbGwnKSB7XHJcbiAgICAgICQoJy5wYXlyb2xsTWVudScpLmNzcygnZGlzcGxheScsICdibG9jayAhaW1wb3J0YW50Jyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgJCgnLnBheXJvbGxMaXN0JykuRGF0YVRhYmxlKCk7XHJcbiAgICBcclxuICAgIFxyXG4gIH1cclxufSkoKTtcclxuIiwiKCgpID0+IHtcclxuICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwic2V0UGFzc3dvcmRDdHJsXCIsIHNldFBhc3N3b3JkQ3RybCk7XHJcblxyXG4gIGZ1bmN0aW9uIHNldFBhc3N3b3JkQ3RybChcclxuICAgICRzY29wZSxcclxuICAgICR0aW1lb3V0LFxyXG4gICAgJGxvY2F0aW9uLFxyXG4gICAgYXV0aEZhY3RvcnksXHJcbiAgICAkc3RhdGUsXHJcbiAgICBhcGlGYWN0b3J5LFxyXG4gICAgTm90aWZpY2F0aW9uLFxyXG4gICAgZ2xvYmFsc1xyXG4gICkge1xyXG4gICAgLyogUmVxdWlyaW5nIHZhcnMgKi9cclxuICAgIGxldCB2bSA9IHRoaXM7XHJcblxyXG4gICAgY29uc3QgeyB0b2tlbiB9ID0gJGxvY2F0aW9uLnNlYXJjaCgpO1xyXG5cclxuICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGFwaUZhY3RvcnlcclxuICAgICAgLmlzVG9rZW5WYWxpZCh7IHRva2VuIH0pXHJcbiAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3AuZGF0YSk7XHJcbiAgICAgICAgaWYgKHJlc3AuZGF0YS50b2tlblZhbGlkKSB7XHJcbiAgICAgICAgICB2bS51c2VyID0gcmVzcC5kYXRhLnVzZXI7XHJcbiAgICAgICAgICAkKFwiLmZvcmdvdFBhc3NNb2RhbFwiKS5tb2RhbChcInNob3dcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICQoXCIudG9rZW5JbnZhbGlkXCIpLm1vZGFsKFwic2hvd1wiKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgdm0ucmVzZXRQYXNzID0gKGlzVmFsaWQsIGRhdGEpID0+IHtcclxuICAgICAgJChcIi5mb3Jnb3RQYXNzTW9kYWxcIikubW9kYWwoXCJoaWRlXCIpO1xyXG4gICAgICBpZiAodm0ucmVzZXRQYXNzLnBhc3N3b3JkID09PSB2bS5yZXNldFBhc3MuY19wYXNzd29yZCkge1xyXG4gICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgcGFzc3dvcmQ6IHZtLnJlc2V0UGFzcy5wYXNzd29yZCxcclxuICAgICAgICAgIHVzZXI6IHZtLnVzZXJcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAgIC5zZXRQYXNzd29yZChkYXRhKVxyXG4gICAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgIE5vdGlmaWNhdGlvbi5zdWNjZXNzKHJlc3AuZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgJHN0YXRlLmdvKFwicHJlTG9naW5cIik7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIE5vdGlmaWNhdGlvbi5lcnJvcihcIlBhc3N3b3JkIE1pc21hdGNoLCBQbGVhc2UgZW50ZXIgc2FtZSBwYXNzd29yZFwiKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIHZtLmJhY2sgPSAoKSA9PiB7XHJcbiAgICAgICQoXCIudG9rZW5JbnZhbGlkXCIpLm1vZGFsKFwiaGlkZVwiKTtcclxuICAgICAgJHRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICRzdGF0ZS5nbyhcInByZUxvZ2luXCIpO1xyXG4gICAgICB9KTtcclxuICAgIH07XHJcbiAgfVxyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJzZXR0aW5nQ3RybFwiLCBzZXR0aW5nQ3RybCk7XHJcblxyXG4gIGZ1bmN0aW9uIHNldHRpbmdDdHJsKFxyXG4gICAgJHNjb3BlLFxyXG4gICAgJHRpbWVvdXQsXHJcbiAgICBhdXRoRmFjdG9yeSxcclxuICAgICRzdGF0ZSxcclxuICAgIGFwaUZhY3RvcnksXHJcbiAgICBOb3RpZmljYXRpb24sXHJcbiAgICBnbG9iYWxzLFxyXG4gICAgVXBsb2FkXHJcbiAgKSB7XHJcbiAgICAvKiBSZXF1aXJpbmcgdmFycyAqL1xyXG5cclxuICAgIGxldCB2bSA9IHRoaXM7XHJcbiAgICBjb25zdCB7IGxvZ291dCwgdXNlclN0b3JlLCBjb21wYW55U3RvcmUgfSA9IGdsb2JhbHM7XHJcbiAgICBpZiAoIWF1dGhGYWN0b3J5LmNoZWNrVXNlcigpKSB7XHJcbiAgICAgIGxvZ291dCgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdm0udXNlckRhdGEgPSB1c2VyU3RvcmUuZ2V0KCk7XHJcbiAgICBpZiAoY29tcGFueVN0b3JlLmdldCgpKSB7XHJcbiAgICAgIHZtLmNvbXBhbnlEYXRhID0gY29tcGFueVN0b3JlLmdldCgpO1xyXG4gICAgICB2bS5wcml2aWxlZ2VzID0gdm0uY29tcGFueURhdGEucHJpdmlsZWdlcztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAuZ2V0Q29tcGFueUJ5SWQodm0udXNlckRhdGEuY29tcGFueUlkKVxyXG4gICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgdm0uY29tcGFueURhdGEgPSByZXNwLmRhdGE7XHJcbiAgICAgICAgICB2bS5wcml2aWxlZ2VzID0gdm0uY29tcGFueURhdGEucHJpdmlsZWdlcztcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHZtLnN1Ym1pdFJvbGVTZXR0aW5ncyA9IGZvcm1EYXRhID0+IHtcclxuICAgICAgYXBpRmFjdG9yeVxyXG4gICAgICAgIC51cGRhdGVSb2xlQmFzZWRBY2Nlc3MoZm9ybURhdGEpXHJcbiAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICBOb3RpZmljYXRpb24uc3VjY2VzcyhyZXNwLmRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICBjb21wYW55U3RvcmUucmVmZXRjaCh2bS51c2VyRGF0YS5jb21wYW55SWQpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgTm90aWZpY2F0aW9uLmVycm9yKFwiU29tZXRoaW5nIHdlbnQgd3JvbmdcIik7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdm0uZ29Ub0Rhc2hib2FyZCA9ICgpID0+IHtcclxuICAgICAgJHN0YXRlLmdvKFwiZGFzaGJvYXJkXCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2bS5sb2dvdXQgPSAoKSA9PiB7XHJcbiAgICAgIGxvZ291dCgpO1xyXG4gICAgfTtcclxuICB9XHJcbn0pKCk7XHJcbiIsIigoKSA9PiB7XHJcbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwic3ViY29udHJhY3RvckN0cmxcIiwgc3ViY29udHJhY3RvckN0cmwpO1xyXG5cclxuICAgIGZ1bmN0aW9uIHN1YmNvbnRyYWN0b3JDdHJsKFxyXG4gICAgICAgICRzY29wZSxcclxuICAgICAgICAkdGltZW91dCxcclxuICAgICAgICBhdXRoRmFjdG9yeSxcclxuICAgICAgICAkc3RhdGUsXHJcbiAgICAgICAgYXBpRmFjdG9yeSxcclxuICAgICAgICBOb3RpZmljYXRpb24sXHJcbiAgICAgICAgTmdNYXAsXHJcbiAgICAgICAgZ2xvYmFscyxcclxuICAgICAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLFxyXG4gICAgICApIHtcclxuICAgICAgICBsZXQgdm0gPSB0aGlzO1xyXG5cclxuICAgICAgICB2bS5zZWxlY3RlZE1hdGVyaWFscz1bXTtcclxuICAgICAgICB2bS5tZW1iZXJzMj1bXTtcclxuICAgICAgICBjb25zdCB7IGxvZ291dCxkZWJvdW5jZSwgdXNlclN0b3JlIH0gPSBnbG9iYWxzO1xyXG4gICAgICAgIGlmICghYXV0aEZhY3RvcnkuY2hlY2tVc2VyKCkpIHtcclxuICAgICAgICAgIGxvZ291dCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvKipHZXQgYWxsIHN1cHBsaWVyc2RhdGEgKi9cclxuICAgICAgICAgIHZtLmdldFN1YmNvbnRyYWN0b3JzID0gKHR5cGUpID0+IHtcclxuICAgICAgICAgICAgLyogRm9yIHRvZ2dsaW5nIGFzY2VuZGluZyBhbmQgZGVzY2VuZGluZyBvcmRlciAqL1xyXG4gICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAgICAgICAuZ2V0QWxsU3ViY29udHJhY3RvcnMoe1xyXG4gICAgICAgICAgICAgICAgcGFnZTogMSxcclxuICAgICAgICAgICAgICAgIGNodW5rOiAxMCxcclxuICAgICAgICAgICAgICAgIHNvcnQ6IHR5cGUsXHJcbiAgICAgICAgICAgICAgIC8vIHNlYXJjaDogdm0uc2VhcmNoVGV4dCxcclxuICAgICAgICAgICAgICAgLy8gc29ydFR5cGU6IHZtLnRvZ2dsZU9ialtyZXNvdXJjZV1bdHlwZV1cclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gdm1bcmVzb3VyY2VdPSByZXNwLmRhdGEubGlzdDtcclxuICAgICAgICAgICAgICAgIC8vIHZtW3Jlc291cmNlICsgXCJDb3VudFwiXSA9IHJlc3AuZGF0YS50b3RhbDtcclxuICAgICAgICAgICAgICAgIHZtLmFsbFN1YmNvbnRyYWN0b3IgPSByZXNwLmRhdGEubGlzdDtcclxuICAgICAgICAgICAgICAgIHZtLnN1YmNvbnRyYWN0b3JzQ291bnQgPSByZXNwLmRhdGEudG90YWw7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInN1cHBsaWVycyBhcmU6XCIsdm0uYWxsU3ViY29udHJhY3Rvcik7XHJcbiAgICAgICAgICAgICAgICAkdGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgLy8gJHNjb3BlLnNlYXJjaGluZ1RleHQ9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAkKFwiI3BhZ2luYXRpb25cIikucGFnaW5hdGlvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IHZtLnN1YmNvbnRyYWN0b3JzQ291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXNPblBhZ2U6IDEwLFxyXG4gICAgICAgICAgICAgICAgICAgIGNzc1N0eWxlOiBcImxpZ2h0LXRoZW1lXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaHJlZlRleHRQcmVmaXg6IFwiI1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGFnZTogMSxcclxuICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIG9uUGFnZUNsaWNrOiBmdW5jdGlvbihwYWdlLCBldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmdldEFsbFN1YmNvbnRyYWN0b3JzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlOiBwYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rOiAxMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzb3J0OiB0eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNvcnRUeXBlOiB2bS50b2dnbGVPYmpbdHlwZV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uYWxsU3ViY29udHJhY3RvciA9IHJlc3AuZGF0YS5saXN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIC8qIEluaXRpYWxseSBzb3J0IGlzc3VlIGluIGRlc2NlbmRpbmcgb3JkZXIgKi9cclxuICAgICAgICAgdm0uZ2V0U3ViY29udHJhY3RvcnMoXCJjcmVhdGVkXCIpO1xyXG5cclxuICAgICAgICAgLy9uZXh0IGFuZCBwcmV2aW91cyBidXR0b24gZnVuY3Rpb25zXHJcbiAgICAgICAgIHZtLmFkZFN1YmNvbnRyYWN0b3JOZXh0ID0gKCkgPT4ge1xyXG4gICAgICAgICAgaWYoJCgnI2hvbWUnKS5oYXNDbGFzcygnYWN0aXZlJykpe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImhvbWVcIik7XHJcbiAgICAgICAgICAgJCgnI25hdmlnYXRpb24gdWwgbGkgYS5hY3RpdmUnKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAkKCcjcHJvZmlsZS10YWInKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAkKCcjaG9tZScpLnJlbW92ZUNsYXNzKFwic2hvd1wiKTtcclxuICAgICAgICAgICAkKCcjaG9tZScpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICQoJyNwcm9maWxlJykuYWRkQ2xhc3MoXCJzaG93XCIpO1xyXG4gICAgICAgICAgICQoJyNwcm9maWxlJykuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICB9ZWxzZSBpZigkKCcjcHJvZmlsZS10YWInKS5oYXNDbGFzcygnYWN0aXZlJykpe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInByb2ZpbGVcIik7XHJcbiAgICAgICAgICAgICQoJyNuYXZpZ2F0aW9uIHVsIGxpIGEuYWN0aXZlJykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgICQoJyNjb250YWN0LXRhYicpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAkKCcjcHJvZmlsZScpLnJlbW92ZUNsYXNzKFwic2hvd1wiKTtcclxuICAgICAgICAgICAgJCgnI3Byb2ZpbGUnKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgJCgnI2NvbnRhY3QnKS5hZGRDbGFzcyhcInNob3dcIik7XHJcbiAgICAgICAgICAgICQoJyNjb250YWN0JykuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgIFxyXG4gICAgICAgIH07XHJcbiAgICAgICBcclxuXHJcbiAgICAgICAgdm0uYWRkU3ViY29udHJhY3RvclByZXZpb3VzPSgpPT57XHJcbiAgICAgICAgICBpZigkKCcjcHJvZmlsZS10YWInKS5oYXNDbGFzcygnYWN0aXZlJykpe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImhvbWVcIik7XHJcbiAgICAgICAgICAgJCgnI25hdmlnYXRpb24gdWwgbGkgYS5hY3RpdmUnKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAkKCcjaG9tZScpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICQoJyNwcm9maWxlJykucmVtb3ZlQ2xhc3MoXCJzaG93XCIpO1xyXG4gICAgICAgICAgICQoJyNwcm9maWxlJykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgJCgnI2hvbWUnKS5hZGRDbGFzcyhcInNob3dcIik7XHJcbiAgICAgICAgICAgJCgnI2hvbWUnKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgIH1lbHNlIGlmKCQoJyNjb250YWN0LXRhYicpLmhhc0NsYXNzKCdhY3RpdmUnKSl7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicHJvZmlsZVwiKTtcclxuICAgICAgICAgICAgJCgnI25hdmlnYXRpb24gdWwgbGkgYS5hY3RpdmUnKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgJCgnI3Byb2ZpbGUtdGFiJykuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgICQoJyNjb250YWN0JykucmVtb3ZlQ2xhc3MoXCJzaG93XCIpO1xyXG4gICAgICAgICAgICAkKCcjY29udGFjdCcpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAkKCcjcHJvZmlsZScpLmFkZENsYXNzKFwic2hvd1wiKTtcclxuICAgICAgICAgICAgJCgnI3Byb2ZpbGUnKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgXHJcbiAgICAgICAgfTtcclxuICAgICAgICAvL2RlbGV0ZSBtYXRlcmlhbCBmcm9tIGxpc3RcclxuICAgICAgICAkc2NvcGUuZGVsZXRlTWF0ZXJpYWwgPSBmdW5jdGlvbihpbmRleCxhcnJheSl7XHJcbiAgICAgICAgYXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgIH1cclxuXHJcbiAgICAgICAkc2NvcGUuZGVsZXRlU3RhZmYgPSBmdW5jdGlvbihpbmRleCxhcnJheSl7XHJcbiAgICAgICAgYXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqSW5zZXJ0IGZ1bmN0aW9ucyAqL1xyXG4gICAgICAgICAvKipJbnNlcnQgU3VwcGxpZXIgZnVuY3Rpb25zICovXHJcbiAgICAgICAgICRzY29wZS5vbkNoYW5nZSA9IGZ1bmN0aW9uIChmaWxlcykge1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZihmaWxlc1swXSA9PSB1bmRlZmluZWQpIHJldHVybjtcclxuICAgICAgICAgICRzY29wZS5GSUxFSU1HID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlc1swXSk7XHJcbiAgICAgICAgICAkc2NvcGUuZmlsZUV4dCA9IGZpbGVzWzBdLm5hbWUuc3BsaXQoXCIuXCIpLnBvcCgpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGdsb2JhbHMuZ2V0Q291bnRyeUNvZGUoKS50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgdm0uZ2V0Q291bnRyeUNvZGUgPSByZXNwLmRhdGE7XHJcbiAgICAgICAgIFxyXG4gICAgICAgICAgdm0ubG9hZENvdW50cnlDb2RlID0gJHF1ZXJ5ID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICByZXNvbHZlKHJlc3AuZGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYXBpRmFjdG9yeS5saXN0QWxsTWF0ZXJpYWxzKCkudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgIHZtLmFsbE1hdGVyaWFscyA9IHJlc3AuZGF0YS5saXN0O1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZtLmFkZE1hdGVyaWFsID0gZnVuY3Rpb24oaXRlbSl7XHJcbiAgICAgICAgICB2bS5zZWxlY3RlZE1hdGVyaWFscy5wdXNoKGl0ZW0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm0uYWRkTWVtYmVyID0gZnVuY3Rpb24obmFtZSl7XHJcbiAgICAgICAgICB2bS5tZW1iZXJzMi5wdXNoKG5hbWUpO1xyXG4gICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAkc2NvcGUuY3JlYXRlU3ViY29udHJhY3RvciA9IGZ1bmN0aW9uKHN1YmNvbnRyYWN0b3Ipe1xyXG4gICAgICAgICAgc3ViY29udHJhY3Rvci5zdXBwbGllcz1bXTtzdWJjb250cmFjdG9yLnN0YWZmPVtdO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coXCJzdWJjb250cmFjdG9yXCIsc3ViY29udHJhY3Rvcik7XHJcbiAgICAgICAgICBpZih2bS5zZWxlY3RlZE1hdGVyaWFscy5sZW5ndGg+MCl7XHJcbiAgICAgICAgICAgIHZtLnNlbGVjdGVkTWF0ZXJpYWxzLmZvckVhY2goZWxlbWVudD0+e1xyXG4gICAgICAgICAgICAgIHN1YmNvbnRyYWN0b3Iuc3VwcGxpZXMucHVzaChlbGVtZW50Ll9pZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYodm0ubWVtYmVyczIubGVuZ3RoPjApe1xyXG4gICAgICAgICAgICB2bS5tZW1iZXJzMi5mb3JFYWNoKGVsZW1lbnQ9PntcclxuICAgICAgICAgICAgICBzdWJjb250cmFjdG9yLnN0YWZmLnB1c2goZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY29uc29sZS5sb2coXCJzdWJjb250cmFjdG9yXCIsc3ViY29udHJhY3Rvcik7XHJcbiAgICAgICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgICAuY3JlYXRlTmV3U3ViY29udHJhY3RvcihzdWJjb250cmFjdG9yKVxyXG4gICAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgIE5vdGlmaWNhdGlvbi5zdWNjZXNzKFwiU3ViLWNvbnRyYWN0b3IgaGFzIGJlZW4gc2F2ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xyXG4gICAgICAgICAgICB2bS5zdXBwbGllcj17fTtcclxuICAgICAgICAgICAgdm0uc2VsZWN0ZWRNYXRlcmlhbHM9W107XHJcbiAgICAgICAgICAgIHZtLm1hbWJlcnMyPVtdO1xyXG4gICAgICAgICAgICAkc2NvcGUuaW5wdXRGaWxlcyA9IFtdO1xyXG4gICAgICAgICAgICBzdWJjb250cmFjdG9yLnN1cHBsaWVzPVtdO1xyXG4gICAgICAgICAgICBzdWJjb250cmFjdG9yLnN0YWZmPVtdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgJCgnI3N1Yi1jb250cmFjdG9yX21vZGFsJykubW9kYWwoJ2hpZGUnKTtcclxuICAgICAgICAgICAgdm0uZ2V0U3ViY29udHJhY3RvcnMoXCJjcmVhdGVkXCIpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICAgIC8vIHZtLnN1cHBsaWVyPXt9O1xyXG4gICAgICAgICAgICAvLyB2bS5zZWxlY3RlZE1hdGVyaWFscz1bXTtcclxuICAgICAgICAgICAgLy8gdm0ubWFtYmVyczI9W107XHJcbiAgICAgICAgICAgIC8vICRzY29wZS5pbnB1dEZpbGVzID0gW107XHJcbiAgICAgICAgICAgIC8vIHN1cHBsaWVyLnN1cHBsaWVzPVtdO1xyXG4gICAgICAgICAgICAvLyBzdXBwbGllci5zdGFmZj1bXTtcclxuICAgICAgICAgICAgTm90aWZpY2F0aW9uLmVycm9yKFwiU29tZXRoaW5nIHdlbnQgd3JvbmdcIik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJHNjb3BlLmNvbnRyYWN0cz1bXHJcbiAgICAgICAgICB7dGl0bGU6J1N1YmNvbnRyYWN0b3IgQScsdGltZTonU2VwIDI1LCAyMDE4IGF0IDQ6MDAgUE0nLGltZzonYXNzZXRzL2ltYWdlcy9zdXBwbGllcnMvdHJlZV9sb2dvLnBuZyd9LFxyXG4gICAgICAgICAge3RpdGxlOidTdWJjb250cmFjdG9yIEEnLHRpbWU6J1NlcCAyNSwgMjAxOCBhdCA0OjAwIFBNJyxpbWc6J2Fzc2V0cy9pbWFnZXMvc3VwcGxpZXJzL3RyZWVfbG9nby5wbmcnfSxcclxuICAgICAgICAgIHt0aXRsZTonU3ViY29udHJhY3RvciBBJyx0aW1lOidTZXAgMjUsIDIwMTggYXQgNDowMCBQTScsaW1nOidhc3NldHMvaW1hZ2VzL3N1cHBsaWVycy90cmVlX2xvZ28ucG5nJ30sXHJcbiAgICAgICAgICB7dGl0bGU6J1N1YmNvbnRyYWN0b3IgQScsdGltZTonU2VwIDI1LCAyMDE4IGF0IDQ6MDAgUE0nLGltZzonYXNzZXRzL2ltYWdlcy9zdXBwbGllcnMvdHJlZV9sb2dvLnBuZyd9LFxyXG4gICAgICAgICAge3RpdGxlOidTdWJjb250cmFjdG9yIEEnLHRpbWU6J1NlcCAyNSwgMjAxOCBhdCA0OjAwIFBNJyxpbWc6J2Fzc2V0cy9pbWFnZXMvc3VwcGxpZXJzL3RyZWVfbG9nby5wbmcnfSxcclxuICAgICAgICAgIHt0aXRsZTonU3ViY29udHJhY3RvciBBJyx0aW1lOidTZXAgMjUsIDIwMTggYXQgNDowMCBQTScsaW1nOidhc3NldHMvaW1hZ2VzL3N1cHBsaWVycy90cmVlX2xvZ28ucG5nJ31cclxuICAgICAgICBdXHJcbiAgICB9XHJcblxyXG4gICAgfSkoKTsiLCIoKCkgPT4ge1xyXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuY29udHJvbGxlcihcInN1YmNvbnRyYWN0b3JEZXRhaWxDdHJsXCIsIHN1YmNvbnRyYWN0b3JEZXRhaWxDdHJsKTtcclxuXHJcbiAgICBmdW5jdGlvbiBzdWJjb250cmFjdG9yRGV0YWlsQ3RybChcclxuICAgICAgICAkc2NvcGUsXHJcbiAgICAgICAgJHRpbWVvdXQsXHJcbiAgICAgICAgYXV0aEZhY3RvcnksXHJcbiAgICAgICAgJHN0YXRlLFxyXG4gICAgICAgICRzdGF0ZVBhcmFtcyxcclxuICAgICAgICBhcGlGYWN0b3J5LFxyXG4gICAgICAgIE5vdGlmaWNhdGlvbixcclxuICAgICAgICBOZ01hcCxcclxuICAgICAgICBnbG9iYWxzLFxyXG4gICAgICAgIGxvY2FsU3RvcmFnZVNlcnZpY2UsXHJcbiAgICAgICkge1xyXG4gICAgICAgIGxldCB2bSA9IHRoaXM7XHJcblxyXG4gICAgICAgIGNvbnN0IHsgbG9nb3V0LHVzZXJTdG9yZSB9ID0gZ2xvYmFscztcclxuICAgICAgICBpZiAoIWF1dGhGYWN0b3J5LmNoZWNrVXNlcigpKSB7XHJcbiAgICAgICAgICAgIGxvZ291dCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdm0udXNlckRhdGEgPSB1c2VyU3RvcmUuZ2V0KCk7XHJcblxyXG4gIFxyXG4gICAgICAgICAgdm0ubG9nb3V0ID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBsb2dvdXQoKTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICB2bS5zdWJjb250cmFjdG9ySWQgPSAkc3RhdGVQYXJhbXMuaWQ7XHJcbiAgICAgICAgICAkc2NvcGUuZ2V0U3ViY29udHJhY3RvckRldGFpbCA9ICgpID0+IHtcclxuICAgICAgICAgICAgYXBpRmFjdG9yeVxyXG4gICAgICAgICAgICAgIC5nZXRTdWJjb250cmFjdG9yQnlJZCh2bS5zdWJjb250cmFjdG9ySWQpXHJcbiAgICAgICAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgICB2bS5zdWJjb250cmFjdG9yRGF0YSA9IHJlc3AuZGF0YTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5nZXRTdWJjb250cmFjdG9yRGV0YWlsKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICB9KSgpOyIsIigoKSA9PiB7XHJcbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwic3VwcGxpZXJDdHJsXCIsIHN1cHBsaWVyQ3RybCk7XHJcblxyXG4gICAgZnVuY3Rpb24gc3VwcGxpZXJDdHJsKFxyXG4gICAgICAkc2NvcGUsXHJcbiAgICAgICRyb290U2NvcGUsXHJcbiAgICAgICR0aW1lb3V0LFxyXG4gICAgICBhdXRoRmFjdG9yeSxcclxuICAgICAgJHN0YXRlLFxyXG4gICAgICBhcGlGYWN0b3J5LFxyXG4gICAgICBOb3RpZmljYXRpb24sXHJcbiAgICAgIGdsb2JhbHMsXHJcbiAgICAgIGZpbGVNYW5hZ2VyRmFjdG9yeSxcclxuICAgICAgVXBsb2FkLFxyXG4gICAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLFxyXG4gICAgICApIHtcclxuICAgICAgICBsZXQgdm0gPSB0aGlzO1xyXG4gICAgICAgIHZtLnNlbGVjdGVkTWF0ZXJpYWxzPVtdO1xyXG4gICAgICAgIHZtLm1lbWJlcnMyPVtdO1xyXG4gICAgICAgIGNvbnN0IHsgbG9nb3V0LGRlYm91bmNlLCB1c2VyU3RvcmUgfSA9IGdsb2JhbHM7XHJcbiAgICAgICAgJHNjb3BlLmFjdGl2ZUp1c3RpZmllZCA9IDA7XHJcbiAgICAgXHJcbiAgICAgICAgaWYgKCFhdXRoRmFjdG9yeS5jaGVja1VzZXIoKSkge1xyXG4gICAgICAgICAgbG9nb3V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKkdldCBhbGwgc3VwcGxpZXJzZGF0YSAqL1xyXG4gICAgICAgIHZtLmdldFN1cHBsaWVycyA9ICh0eXBlKSA9PiB7XHJcbiAgICAgICAgICAvKiBGb3IgdG9nZ2xpbmcgYXNjZW5kaW5nIGFuZCBkZXNjZW5kaW5nIG9yZGVyICovXHJcbiAgICAgICAgIFxyXG4gICAgICAgICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgICAgIC5nZXRBbGxTdXBwbGllcnMoe1xyXG4gICAgICAgICAgICAgIHBhZ2U6IDEsXHJcbiAgICAgICAgICAgICAgY2h1bms6IDEwLFxyXG4gICAgICAgICAgICAgIHNvcnQ6IHR5cGUsXHJcbiAgICAgICAgICAgICAvLyBzZWFyY2g6IHZtLnNlYXJjaFRleHQsXHJcbiAgICAgICAgICAgICAvLyBzb3J0VHlwZTogdm0udG9nZ2xlT2JqW3Jlc291cmNlXVt0eXBlXVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgICAvLyB2bVtyZXNvdXJjZV09IHJlc3AuZGF0YS5saXN0O1xyXG4gICAgICAgICAgICAgIC8vIHZtW3Jlc291cmNlICsgXCJDb3VudFwiXSA9IHJlc3AuZGF0YS50b3RhbDtcclxuICAgICAgICAgICAgICB2bS5hbGxTdXBwbGllcnMgPSByZXNwLmRhdGEubGlzdDtcclxuICAgICAgICAgICAgICB2bS5zdXBwaWVyc0NvdW50ID0gcmVzcC5kYXRhLnRvdGFsO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic3VwcGxpZXJzIGFyZTpcIix2bS5hbGxTdXBwbGllcnMpO1xyXG4gICAgICAgICAgICAgICR0aW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgLy8gJHNjb3BlLnNlYXJjaGluZ1RleHQ9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgJChcIiNwYWdpbmF0aW9uXCIpLnBhZ2luYXRpb24oe1xyXG4gICAgICAgICAgICAgICAgICBpdGVtczogdm0uc3VwcGllcnNDb3VudCxcclxuICAgICAgICAgICAgICAgICAgaXRlbXNPblBhZ2U6IDEwLFxyXG4gICAgICAgICAgICAgICAgICBjc3NTdHlsZTogXCJsaWdodC10aGVtZVwiLFxyXG4gICAgICAgICAgICAgICAgICBocmVmVGV4dFByZWZpeDogXCIjXCIsXHJcbiAgICAgICAgICAgICAgICAgIG9yZGVyaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgY3VycmVudFBhZ2U6IDEsXHJcbiAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIG9uUGFnZUNsaWNrOiBmdW5jdGlvbihwYWdlLCBldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBpRmFjdG9yeVxyXG4gICAgICAgICAgICAgICAgICAgICAgLmdldEFsbFN1cHBsaWVycyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2U6IHBhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rOiAxMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc29ydDogdHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc29ydFR5cGU6IHZtLnRvZ2dsZU9ialt0eXBlXVxyXG4gICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5hbGxTdXBwbGllcnMgPSByZXNwLmRhdGEubGlzdDtcclxuICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyogSW5pdGlhbGx5IHNvcnQgaXNzdWUgaW4gZGVzY2VuZGluZyBvcmRlciAqL1xyXG4gICAgICAgdm0uZ2V0U3VwcGxpZXJzKFwiY3JlYXRlZFwiKTtcclxuXHJcbiAgICAgICAgLyoqSW5zZXJ0IFN1cHBsaWVyIGZ1bmN0aW9ucyAqL1xyXG4gICAgICAgICRzY29wZS5vbkNoYW5nZSA9IGZ1bmN0aW9uIChmaWxlcykge1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZihmaWxlc1swXSA9PSB1bmRlZmluZWQpIHJldHVybjtcclxuICAgICAgICAgICRzY29wZS5GSUxFSU1HID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlc1swXSk7XHJcbiAgICAgICAgICAkc2NvcGUuZmlsZUV4dCA9IGZpbGVzWzBdLm5hbWUuc3BsaXQoXCIuXCIpLnBvcCgpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGdsb2JhbHMuZ2V0Q291bnRyeUNvZGUoKS50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgdm0uZ2V0Q291bnRyeUNvZGUgPSByZXNwLmRhdGE7XHJcbiAgICAgICAgIFxyXG4gICAgICAgICAgdm0ubG9hZENvdW50cnlDb2RlID0gJHF1ZXJ5ID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICByZXNvbHZlKHJlc3AuZGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYXBpRmFjdG9yeS5saXN0QWxsTWF0ZXJpYWxzKCkudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgIHZtLmFsbE1hdGVyaWFscyA9IHJlc3AuZGF0YS5saXN0O1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZtLmFkZE1hdGVyaWFsID0gZnVuY3Rpb24oaXRlbSl7XHJcbiAgICAgICAgICB2bS5zZWxlY3RlZE1hdGVyaWFscy5wdXNoKGl0ZW0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm0uYWRkTWVtYmVyID0gZnVuY3Rpb24obmFtZSl7XHJcbiAgICAgICAgICB2bS5tZW1iZXJzMi5wdXNoKG5hbWUpO1xyXG4gICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgXHJcblxyXG4gICAgICAgIHZtLmFkZFN1cHBsaWVyTmV4dCA9ICgpID0+IHtcclxuICAgICAgICAgIGlmKCQoJyNob21lJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJob21lXCIpO1xyXG4gICAgICAgICAgICQoJyNuYXZpZ2F0aW9uIHVsIGxpIGEuYWN0aXZlJykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgJCgnI3Byb2ZpbGUtdGFiJykuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgJCgnI2hvbWUnKS5yZW1vdmVDbGFzcyhcInNob3dcIik7XHJcbiAgICAgICAgICAgJCgnI2hvbWUnKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAkKCcjcHJvZmlsZScpLmFkZENsYXNzKFwic2hvd1wiKTtcclxuICAgICAgICAgICAkKCcjcHJvZmlsZScpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgfWVsc2UgaWYoJCgnI3Byb2ZpbGUtdGFiJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJwcm9maWxlXCIpO1xyXG4gICAgICAgICAgICAkKCcjbmF2aWdhdGlvbiB1bCBsaSBhLmFjdGl2ZScpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAkKCcjY29udGFjdC10YWInKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgJCgnI3Byb2ZpbGUnKS5yZW1vdmVDbGFzcyhcInNob3dcIik7XHJcbiAgICAgICAgICAgICQoJyNwcm9maWxlJykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgICQoJyNjb250YWN0JykuYWRkQ2xhc3MoXCJzaG93XCIpO1xyXG4gICAgICAgICAgICAkKCcjY29udGFjdCcpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICBcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2bS5hZGRTdXBwbGllclByZXZpb3VzPSgpPT57XHJcbiAgICAgICAgICBpZigkKCcjcHJvZmlsZS10YWInKS5oYXNDbGFzcygnYWN0aXZlJykpe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImhvbWVcIik7XHJcbiAgICAgICAgICAgJCgnI25hdmlnYXRpb24gdWwgbGkgYS5hY3RpdmUnKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAkKCcjaG9tZScpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICQoJyNwcm9maWxlJykucmVtb3ZlQ2xhc3MoXCJzaG93XCIpO1xyXG4gICAgICAgICAgICQoJyNwcm9maWxlJykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgJCgnI2hvbWUnKS5hZGRDbGFzcyhcInNob3dcIik7XHJcbiAgICAgICAgICAgJCgnI2hvbWUnKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgIH1lbHNlIGlmKCQoJyNjb250YWN0LXRhYicpLmhhc0NsYXNzKCdhY3RpdmUnKSl7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicHJvZmlsZVwiKTtcclxuICAgICAgICAgICAgJCgnI25hdmlnYXRpb24gdWwgbGkgYS5hY3RpdmUnKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgJCgnI3Byb2ZpbGUtdGFiJykuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgICQoJyNjb250YWN0JykucmVtb3ZlQ2xhc3MoXCJzaG93XCIpO1xyXG4gICAgICAgICAgICAkKCcjY29udGFjdCcpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAkKCcjcHJvZmlsZScpLmFkZENsYXNzKFwic2hvd1wiKTtcclxuICAgICAgICAgICAgJCgnI3Byb2ZpbGUnKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgIC8vZGVsZXRlIG1hdGVyaWFsIGZyb20gbGlzdFxyXG4gICAgICAgICAkc2NvcGUuZGVsZXRlTWF0ZXJpYWwgPSBmdW5jdGlvbihpbmRleCxhcnJheSl7XHJcbiAgICAgICAgICBhcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICB9XHJcbiAgXHJcbiAgICAgICAgICRzY29wZS5kZWxldGVTdGFmZiA9IGZ1bmN0aW9uKGluZGV4LGFycmF5KXtcclxuICAgICAgICAgIGFycmF5LnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgJHNjb3BlLmNyZWF0ZVN1cHBsaWVyID0gZnVuY3Rpb24oc3VwcGxpZXIpe1xyXG4gICAgICAgICAgc3VwcGxpZXIuc3VwcGxpZXM9W107c3VwcGxpZXIuc3RhZmY9W107XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcInN1cHBsaWVyXCIsc3VwcGxpZXIpO1xyXG4gICAgICAgICAgaWYodm0uc2VsZWN0ZWRNYXRlcmlhbHMubGVuZ3RoPjApe1xyXG4gICAgICAgICAgICB2bS5zZWxlY3RlZE1hdGVyaWFscy5mb3JFYWNoKGVsZW1lbnQ9PntcclxuICAgICAgICAgICAgICBzdXBwbGllci5zdXBwbGllcy5wdXNoKGVsZW1lbnQuX2lkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZih2bS5tZW1iZXJzMi5sZW5ndGg+MCl7XHJcbiAgICAgICAgICAgIHZtLm1lbWJlcnMyLmZvckVhY2goZWxlbWVudD0+e1xyXG4gICAgICAgICAgICAgIHN1cHBsaWVyLnN0YWZmLnB1c2goZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY29uc29sZS5sb2coXCJzdXBwbGllclwiLHN1cHBsaWVyKTtcclxuICAgICAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAgIC5jcmVhdGVOZXdTdXBwbGllcihzdXBwbGllcilcclxuICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICBOb3RpZmljYXRpb24uc3VjY2VzcyhcIlN1cHBsaWVyIGhhcyBiZWVuIHNhdmVkIHN1Y2Nlc3NmdWxseVwiKTtcclxuICAgICAgICAgICAgdm0uc3VwcGxpZXI9e307XHJcbiAgICAgICAgICAgIHZtLnNlbGVjdGVkTWF0ZXJpYWxzPVtdO1xyXG4gICAgICAgICAgICB2bS5tYW1iZXJzMj1bXTtcclxuICAgICAgICAgICAgJHNjb3BlLmlucHV0RmlsZXMgPSBbXTtcclxuICAgICAgICAgICAgc3VwcGxpZXIuc3VwcGxpZXM9W107XHJcbiAgICAgICAgICAgIHN1cHBsaWVyLnN0YWZmPVtdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgJCgnI3N1cHBsaWVyX21vZGFsJykubW9kYWwoJ2hpZGUnKTtcclxuICAgICAgICAgICAgdm0uZ2V0U3VwcGxpZXJzKFwiY3JlYXRlZFwiKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgICAvLyB2bS5zdXBwbGllcj17fTtcclxuICAgICAgICAgICAgLy8gdm0uc2VsZWN0ZWRNYXRlcmlhbHM9W107XHJcbiAgICAgICAgICAgIC8vIHZtLm1hbWJlcnMyPVtdO1xyXG4gICAgICAgICAgICAvLyAkc2NvcGUuaW5wdXRGaWxlcyA9IFtdO1xyXG4gICAgICAgICAgICAvLyBzdXBwbGllci5zdXBwbGllcz1bXTtcclxuICAgICAgICAgICAgLy8gc3VwcGxpZXIuc3RhZmY9W107XHJcbiAgICAgICAgICAgIE5vdGlmaWNhdGlvbi5lcnJvcihcIlNvbWV0aGluZyB3ZW50IHdyb25nXCIpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRzY29wZS5jb250cmFjdHM9W1xyXG4gICAgICAgICAge3RpdGxlOidTdWJjb250cmFjdG9yIEEnLHRpbWU6J1NlcCAyNSwgMjAxOCBhdCA0OjAwIFBNJyxpbWc6J2Fzc2V0cy9pbWFnZXMvc3VwcGxpZXJzL3RyZWVfbG9nby5wbmcnfSxcclxuICAgICAgICAgIHt0aXRsZTonU3ViY29udHJhY3RvciBBJyx0aW1lOidTZXAgMjUsIDIwMTggYXQgNDowMCBQTScsaW1nOidhc3NldHMvaW1hZ2VzL3N1cHBsaWVycy90cmVlX2xvZ28ucG5nJ30sXHJcbiAgICAgICAgICB7dGl0bGU6J1N1YmNvbnRyYWN0b3IgQScsdGltZTonU2VwIDI1LCAyMDE4IGF0IDQ6MDAgUE0nLGltZzonYXNzZXRzL2ltYWdlcy9zdXBwbGllcnMvdHJlZV9sb2dvLnBuZyd9LFxyXG4gICAgICAgICAge3RpdGxlOidTdWJjb250cmFjdG9yIEEnLHRpbWU6J1NlcCAyNSwgMjAxOCBhdCA0OjAwIFBNJyxpbWc6J2Fzc2V0cy9pbWFnZXMvc3VwcGxpZXJzL3RyZWVfbG9nby5wbmcnfSxcclxuICAgICAgICAgIHt0aXRsZTonU3ViY29udHJhY3RvciBBJyx0aW1lOidTZXAgMjUsIDIwMTggYXQgNDowMCBQTScsaW1nOidhc3NldHMvaW1hZ2VzL3N1cHBsaWVycy90cmVlX2xvZ28ucG5nJ30sXHJcbiAgICAgICAgICB7dGl0bGU6J1N1YmNvbnRyYWN0b3IgQScsdGltZTonU2VwIDI1LCAyMDE4IGF0IDQ6MDAgUE0nLGltZzonYXNzZXRzL2ltYWdlcy9zdXBwbGllcnMvdHJlZV9sb2dvLnBuZyd9XHJcbiAgICAgICAgXVxyXG4gICAgfVxyXG5cclxuICAgIH0pKCk7IiwiKCgpID0+IHtcclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJzdXBwbGllckRldGFpbEN0cmxcIiwgc3VwcGxpZXJEZXRhaWxDdHJsKTtcclxuXHJcbiAgICBmdW5jdGlvbiBzdXBwbGllckRldGFpbEN0cmwoXHJcbiAgICAgICAgJHNjb3BlLFxyXG4gICAgICAgICR0aW1lb3V0LFxyXG4gICAgICAgIGF1dGhGYWN0b3J5LFxyXG4gICAgICAgICRzdGF0ZSxcclxuICAgICAgICAkc3RhdGVQYXJhbXMsXHJcbiAgICAgICAgYXBpRmFjdG9yeSxcclxuICAgICAgICBOb3RpZmljYXRpb24sXHJcbiAgICAgICAgTmdNYXAsXHJcbiAgICAgICAgZ2xvYmFscyxcclxuICAgICAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLFxyXG4gICAgICApIHtcclxuICAgICAgICBsZXQgdm0gPSB0aGlzO1xyXG5cclxuICAgICAgICBjb25zdCB7IGxvZ291dCx1c2VyU3RvcmUgfSA9IGdsb2JhbHM7XHJcbiAgICAgICAgaWYgKCFhdXRoRmFjdG9yeS5jaGVja1VzZXIoKSkge1xyXG4gICAgICAgICAgICBsb2dvdXQoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHZtLnVzZXJEYXRhID0gdXNlclN0b3JlLmdldCgpO1xyXG5cclxuICBcclxuICAgICAgICAgIHZtLmxvZ291dCA9ICgpID0+IHtcclxuICAgICAgICAgICAgbG9nb3V0KCk7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgdm0uc3VwcGxpZXJJZCA9ICRzdGF0ZVBhcmFtcy5pZDtcclxuICAgICAgICAgICRzY29wZS5nZXRTdXBwbGllckRldGFpbCA9ICgpID0+IHtcclxuICAgICAgICAgICAgYXBpRmFjdG9yeVxyXG4gICAgICAgICAgICAgIC5nZXRTdXBwbGllckJ5SWQodm0uc3VwcGxpZXJJZClcclxuICAgICAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgICAgIHZtLnN1cHBsaWVyRGF0YSA9IHJlc3AuZGF0YTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5nZXRTdXBwbGllckRldGFpbCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgfSkoKTsiLCIoKCkgPT4ge1xyXG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJ0b2RvQ3RybFwiLCB0b2RvQ3RybCk7XHJcblxyXG4gIGZ1bmN0aW9uIHRvZG9DdHJsKFxyXG4gICAgJHNjb3BlLFxyXG4gICAgJHRpbWVvdXQsXHJcbiAgICBhdXRoRmFjdG9yeSxcclxuICAgICRzdGF0ZSxcclxuICAgIGFwaUZhY3RvcnksXHJcbiAgICBOb3RpZmljYXRpb24sXHJcbiAgICBnbG9iYWxzLFxyXG4gICAgVXBsb2FkXHJcbiAgKSB7XHJcbiAgICAvKiBSZXF1aXJpbmcgdmFycyAqL1xyXG5cclxuICAgICRzY29wZS50b2RvX2xpc3QgPSBbXHJcbiAgICAgIHsgaW1nOiAnL2Fzc2V0cy9pbWFnZXMvVG8tRG8tSWNvbi5wbmcnLCBzdWJ0aXRsZTogJzEuJywgdGl0bGU6ICdMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCxjb25zZWN0ZXR1ciBhZGlwaXNpY2luZyBlbGl0LHNlZCBkbyBlaXVzbW9kIHRlbXBvci4nLCB3b3JrOiAnSW4gMSBIb3VyJywgY2xhc3NuYW1lOiAncmVkLWNvbG9yJyB9LFxyXG4gICAgICB7IGltZzogJy9hc3NldHMvaW1hZ2VzL1RvLURvLUljb24ucG5nJywgc3VidGl0bGU6ICcyLicsIHRpdGxlOiAnTG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsY29uc2VjdGV0dXIgYWRpcGlzaWNpbmcgZWxpdCxzZWQgZG8gZWl1c21vZCB0ZW1wb3IuJywgd29yazogJ0luIDEgRGF5JywgY2xhc3NuYW1lOiAneWVsbG93LWNvbG9yJyB9LFxyXG4gICAgICB7IGltZzogJy9hc3NldHMvaW1hZ2VzL1RvLURvLUljb24ucG5nJywgc3VidGl0bGU6ICczLicsIHRpdGxlOiAnTG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsY29uc2VjdGV0dXIgYWRpcGlzaWNpbmcgZWxpdCxzZWQgZG8gZWl1c21vZCB0ZW1wb3IuJywgd29yazogJ0luIDEgV2VlaycsIGNsYXNzbmFtZTogJ2dyZWVuLWNvbG9yJyB9LFxyXG4gICAgICB7IGltZzogJy9hc3NldHMvaW1hZ2VzL1RvLURvLUljb24ucG5nJywgc3VidGl0bGU6ICc0LicsIHRpdGxlOiAnTG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsY29uc2VjdGV0dXIgYWRpcGlzaWNpbmcgZWxpdCxzZWQgZG8gZWl1c21vZCB0ZW1wb3IuJywgd29yazogJ0luIDIgV2Vla3MnLCBjbGFzc25hbWU6ICdncmF5LWNvbG9yJyB9LFxyXG4gICAgICB7IGltZzogJy9hc3NldHMvaW1hZ2VzL1RvLURvLUljb24ucG5nJywgc3VidGl0bGU6ICc1LicsIHRpdGxlOiAnTG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsY29uc2VjdGV0dXIgYWRpcGlzaWNpbmcgZWxpdCxzZWQgZG8gZWl1c21vZCB0ZW1wb3IuJywgd29yazogJ0luIDMgV2Vla3MnLCBjbGFzc25hbWU6ICdncmF5LWNvbG9yJyB9LFxyXG4gICAgICB7IGltZzogJy9hc3NldHMvaW1hZ2VzL1RvLURvLUljb24ucG5nJywgc3VidGl0bGU6ICc2LicsIHRpdGxlOiAnTG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsY29uc2VjdGV0dXIgYWRpcGlzaWNpbmcgZWxpdCxzZWQgZG8gZWl1c21vZCB0ZW1wb3IuJywgd29yazogJ0luIDQgV2Vla3MnLCBjbGFzc25hbWU6ICdncmF5LWNvbG9yJyB9XHJcbiAgICBdXHJcblxyXG4gICAgXHJcbiAgICBsZXQgdm0gPSB0aGlzO1xyXG4gICAgY29uc3QgeyBsb2dvdXQsIHVzZXJTdG9yZSB9ID0gZ2xvYmFscztcclxuICAgIGlmICghYXV0aEZhY3RvcnkuY2hlY2tVc2VyKCkpIHtcclxuICAgICAgbG9nb3V0KCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZtLmxvZ291dCA9ICgpID0+IHtcclxuICAgICAgICBsb2dvdXQoKTtcclxuICAgIH07XHJcbiAgICAvKiBHZXQgcHJvamVjdCBsaXN0ICovXHJcbiAgICB2bS51c2VyRGF0YSA9IHVzZXJTdG9yZS5nZXQoKTtcclxuICAgIFxyXG4gIH1cclxufSkoKTtcclxuIiwiKCgpID0+IHtcclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJ0b2RvVmlld0N0cmxcIiwgdG9kb1ZpZXdDdHJsKTtcclxuXHJcbiAgZnVuY3Rpb24gdG9kb1ZpZXdDdHJsKFxyXG4gICAgJHNjb3BlLFxyXG4gICAgJHRpbWVvdXQsXHJcbiAgICBhdXRoRmFjdG9yeSxcclxuICAgICRzdGF0ZSxcclxuICAgIGFwaUZhY3RvcnksXHJcbiAgICBOb3RpZmljYXRpb24sXHJcbiAgICBnbG9iYWxzLFxyXG4gICAgVXBsb2FkXHJcbiAgKSB7XHJcbiAgICAvKiBSZXF1aXJpbmcgdmFycyAqL1xyXG5cclxuICAgICRzY29wZS50b2RvX2xpc3QgPSBbXHJcbiAgICAgICAgeyBpbWc6ICcvYXNzZXRzL2ltYWdlcy9Uby1Eby1JY29uLnBuZycsIHN1YnRpdGxlOiAnMS4nLCB0aXRsZTogJ0xvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LGNvbnNlY3RldHVyIGFkaXBpc2ljaW5nIGVsaXQsc2VkIGRvIGVpdXNtb2QgdGVtcG9yLicsIHdvcms6ICdJbiAxIEhvdXInLCBjbGFzc25hbWU6ICdyZWQtY29sb3InIH0sXHJcbiAgICAgICAgeyBpbWc6ICcvYXNzZXRzL2ltYWdlcy9Uby1Eby1JY29uLnBuZycsIHN1YnRpdGxlOiAnMi4nLCB0aXRsZTogJ0xvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LGNvbnNlY3RldHVyIGFkaXBpc2ljaW5nIGVsaXQsc2VkIGRvIGVpdXNtb2QgdGVtcG9yLicsIHdvcms6ICdJbiAxIERheScsIGNsYXNzbmFtZTogJ3llbGxvdy1jb2xvcicgfSxcclxuICAgICAgICB7IGltZzogJy9hc3NldHMvaW1hZ2VzL1RvLURvLUljb24ucG5nJywgc3VidGl0bGU6ICczLicsIHRpdGxlOiAnTG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsY29uc2VjdGV0dXIgYWRpcGlzaWNpbmcgZWxpdCxzZWQgZG8gZWl1c21vZCB0ZW1wb3IuJywgd29yazogJ0luIDEgV2VlaycsIGNsYXNzbmFtZTogJ2dyZWVuLWNvbG9yJyB9LFxyXG4gICAgICAgIHsgaW1nOiAnL2Fzc2V0cy9pbWFnZXMvVG8tRG8tSWNvbi5wbmcnLCBzdWJ0aXRsZTogJzQuJywgdGl0bGU6ICdMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCxjb25zZWN0ZXR1ciBhZGlwaXNpY2luZyBlbGl0LHNlZCBkbyBlaXVzbW9kIHRlbXBvci4nLCB3b3JrOiAnSW4gMiBXZWVrcycsIGNsYXNzbmFtZTogJ2dyYXktY29sb3InIH0sXHJcbiAgICAgICAgeyBpbWc6ICcvYXNzZXRzL2ltYWdlcy9Uby1Eby1JY29uLnBuZycsIHN1YnRpdGxlOiAnNS4nLCB0aXRsZTogJ0xvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LGNvbnNlY3RldHVyIGFkaXBpc2ljaW5nIGVsaXQsc2VkIGRvIGVpdXNtb2QgdGVtcG9yLicsIHdvcms6ICdJbiAzIFdlZWtzJywgY2xhc3NuYW1lOiAnZ3JheS1jb2xvcicgfSxcclxuICAgICAgICB7IGltZzogJy9hc3NldHMvaW1hZ2VzL1RvLURvLUljb24ucG5nJywgc3VidGl0bGU6ICc2LicsIHRpdGxlOiAnTG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsY29uc2VjdGV0dXIgYWRpcGlzaWNpbmcgZWxpdCxzZWQgZG8gZWl1c21vZCB0ZW1wb3IuJywgd29yazogJ0luIDQgV2Vla3MnLCBjbGFzc25hbWU6ICdncmF5LWNvbG9yJyB9XHJcbiAgICBdXHJcblxyXG4gICAgXHJcbiAgICBsZXQgdm0gPSB0aGlzO1xyXG4gICAgY29uc3QgeyBsb2dvdXQsIHVzZXJTdG9yZSB9ID0gZ2xvYmFscztcclxuICAgIGlmICghYXV0aEZhY3RvcnkuY2hlY2tVc2VyKCkpIHtcclxuICAgICAgbG9nb3V0KCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZtLmxvZ291dCA9ICgpID0+IHtcclxuICAgICAgICBsb2dvdXQoKTtcclxuICAgIH07XHJcbiAgICAvKiBHZXQgcHJvamVjdCBsaXN0ICovXHJcbiAgICB2bS51c2VyRGF0YSA9IHVzZXJTdG9yZS5nZXQoKTtcclxuICAgIFxyXG4gIH1cclxufSkoKTtcclxuIiwiKCgpID0+IHtcclxuICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwidmlzdWFsUGxhbm5lckN0cmxcIiwgdmlzdWFsUGxhbm5lckN0cmwpO1xyXG5cclxuICBmdW5jdGlvbiB2aXN1YWxQbGFubmVyQ3RybChcclxuICAgICRzY29wZSxcclxuICAgICR0aW1lb3V0LFxyXG4gICAgJHN0YXRlLFxyXG4gICAgJGxvY2F0aW9uLFxyXG4gICAgZ2xvYmFscyxcclxuICAgIGF1dGhGYWN0b3J5LFxyXG4gICAgYXBpRmFjdG9yeSxcclxuICAgIE5vdGlmaWNhdGlvbixcclxuICAgIGNvbW1vblZQRmFjdG9yeSxcclxuICAgIHRvb2xzVlBGYWN0b3J5LFxyXG4gICAgc2hhcGVzVlBGYWN0b3J5LFxyXG4gICAgbG9jYWxTdG9yYWdlU2VydmljZSxcclxuICAgIGV2ZW50c1ZQRmFjdG9yeSxcclxuICAgIGxheWVyc1ZQRmFjdG9yeVxyXG4gICkge1xyXG4gICAgY29uc3QgeyBsb2dvdXQsIHVzZXJTdG9yZSB9ID0gZ2xvYmFscztcclxuICAgIGlmICghYXV0aEZhY3RvcnkuY2hlY2tVc2VyKCkpIHtcclxuICAgICAgbG9nb3V0KCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyQoXCIjY2hvb3NlUm9vZk1vZGFsXCIpLm1vZGFsKFwic2hvd1wiKTtcclxuXHJcbiAgICAvKiBEcmFnIGFuZCBkcm9wICovXHJcbiAgICAvLyBkcmFnRWxlbWVudChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm15ZGl2XCIpKTtcclxuICAgICQoXCIuZHJhZ19lbGVtZW50XCIpLm1vdXNlZG93bihmdW5jdGlvbigpIHtcclxuICAgICAgZHJhZ0VsZW1lbnQoXHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgICAgICAgICAkKHRoaXMpXHJcbiAgICAgICAgICAgIC5jbG9zZXN0KFwiZGl2XCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwiaWRcIilcclxuICAgICAgICApXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBkcmFnRWxlbWVudChlbG1udCwgZSkge1xyXG4gICAgICB2YXIgcG9zMSA9IDAsXHJcbiAgICAgICAgcG9zMiA9IDAsXHJcbiAgICAgICAgcG9zMyA9IDAsXHJcbiAgICAgICAgcG9zNCA9IDA7XHJcbiAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbG1udC5pZCArIFwiaGVhZGVyXCIpKSB7XHJcbiAgICAgICAgLyogaWYgcHJlc2VudCwgdGhlIGhlYWRlciBpcyB3aGVyZSB5b3UgbW92ZSB0aGUgRElWIGZyb206Ki9cclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICAgICAgICAgIGVsbW50LmlkICsgXCJoZWFkZXJcIlxyXG4gICAgICAgICkub25tb3VzZWRvd24gPSBkcmFnTW91c2VEb3duO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8qIG90aGVyd2lzZSwgbW92ZSB0aGUgRElWIGZyb20gYW55d2hlcmUgaW5zaWRlIHRoZSBESVY6Ki9cclxuICAgICAgICBlbG1udC5vbm1vdXNlZG93biA9IGRyYWdNb3VzZURvd247XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIGRyYWdNb3VzZURvd24oZSkge1xyXG4gICAgICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgLy8gZ2V0IHRoZSBtb3VzZSBjdXJzb3IgcG9zaXRpb24gYXQgc3RhcnR1cDpcclxuICAgICAgICBwb3MzID0gZS5jbGllbnRYO1xyXG4gICAgICAgIHBvczQgPSBlLmNsaWVudFk7XHJcbiAgICAgICAgZG9jdW1lbnQub25tb3VzZXVwID0gY2xvc2VEcmFnRWxlbWVudDtcclxuICAgICAgICAvLyBjYWxsIGEgZnVuY3Rpb24gd2hlbmV2ZXIgdGhlIGN1cnNvciBtb3ZlczpcclxuICAgICAgICBkb2N1bWVudC5vbm1vdXNlbW92ZSA9IGVsZW1lbnREcmFnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBlbGVtZW50RHJhZyhlKSB7XHJcbiAgICAgICAgZSA9IGUgfHwgd2luZG93LmV2ZW50O1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIG5ldyBjdXJzb3IgcG9zaXRpb246XHJcbiAgICAgICAgcG9zMSA9IHBvczMgLSBlLmNsaWVudFg7XHJcbiAgICAgICAgcG9zMiA9IHBvczQgLSBlLmNsaWVudFk7XHJcbiAgICAgICAgcG9zMyA9IGUuY2xpZW50WDtcclxuICAgICAgICBwb3M0ID0gZS5jbGllbnRZO1xyXG4gICAgICAgIC8vIHNldCB0aGUgZWxlbWVudCdzIG5ldyBwb3NpdGlvbjpcclxuICAgICAgICBlbG1udC5zdHlsZS50b3AgPSBlbG1udC5vZmZzZXRUb3AgLSBwb3MyICsgXCJweFwiO1xyXG4gICAgICAgIGVsbW50LnN0eWxlLmxlZnQgPSBlbG1udC5vZmZzZXRMZWZ0IC0gcG9zMSArIFwicHhcIjtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gY2xvc2VEcmFnRWxlbWVudCgpIHtcclxuICAgICAgICAvKiBzdG9wIG1vdmluZyB3aGVuIG1vdXNlIGJ1dHRvbiBpcyByZWxlYXNlZDoqL1xyXG4gICAgICAgIGRvY3VtZW50Lm9ubW91c2V1cCA9IG51bGw7XHJcbiAgICAgICAgZG9jdW1lbnQub25tb3VzZW1vdmUgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyogZHJhZyBhbmQgZHJvcCAtZW5kICovXHJcblxyXG4gICAgLyogQXV0aG9yaXplIHVzZXIgKi9cclxuICAgIHZhciB1c2VyUHJlc2VudCA9IGF1dGhGYWN0b3J5LmNoZWNrVXNlcigpO1xyXG4gICAgaWYgKCF1c2VyUHJlc2VudCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLyogJG1kRGlhbG9nLnNob3coe1xyXG4gICAgICAgIGNvbnRlbnRFbGVtZW50OiAnI3Zpc3VhbFBsYW5uZXJEaWFsb2cnLFxyXG4gICAgICAgIHBhcmVudDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxyXG4gICAgICAgIGNsaWNrT3V0c2lkZVRvQ2xvc2U6IGZhbHNlLFxyXG4gICAgICAgIGVzY2FwZVRvQ2xvc2U6IGZhbHNlXHJcbiAgICAgIH0pOyAqL1xyXG5cclxuICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAvLyBXYWl0IGZvciB0aGUgZG9jdW1lbnQgdG8gbG9hZCBiZWZvcmUgc2V0dGluZyB1cCB0aGUgY2FudmFzIHN0YWdlXHJcbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBcclxuICAgICAgICBQcmVsb2FkIGZ1bmN0aW9uYWxpdHlcclxuICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgICB2bS5oaWRlSW5pdE1vZGFsID0gZmFsc2U7XHJcblxyXG4gICAgdm0ucm9vZlBsYW5zID0gbG9jYWxTdG9yYWdlU2VydmljZS5nZXQoXCJyb29mUGxhbnNcIik7XHJcblxyXG4gICAgdm0uc2VsZWN0UGxhbiA9IGZ1bmN0aW9uKHBsYW4pIHtcclxuICAgICAgdm0uc2VsZWN0ZWRQbGFuID0gcGxhbi5faWQ7XHJcbiAgICAgIGxvYWRQbGFubmVyKHBsYW4pO1xyXG4gICAgICB2bS5oaWRlSW5pdE1vZGFsID0gdHJ1ZTtcclxuICAgIH07XHJcbiAgICB2bS5zZWxlY3RQbGFuKGxvY2FsU3RvcmFnZVNlcnZpY2UuZ2V0KFwic2VsZWN0ZWRQbGFuXCIpKTtcclxuICAgIC8vIHZtLmNob29zZVBsYW4gPSBmdW5jdGlvbihwbGFuSWQpIHtcclxuICAgIC8vICAgdmFyIHBsYW4gPSB2bS5yb29mUGxhbnMuZmlsdGVyKGZ1bmN0aW9uKHgpIHtcclxuICAgIC8vICAgICByZXR1cm4geC5faWQgPT09IHBsYW5JZDtcclxuICAgIC8vICAgfSlbMF07XHJcbiAgICAvLyAgICQoXCIjY2hvb3NlUm9vZk1vZGFsXCIpLm1vZGFsKFwiaGlkZVwiKTtcclxuICAgIC8vICAgdm0uc2VsZWN0UGxhbihwbGFuKTtcclxuICAgIC8vIH07XHJcblxyXG4gICAgLy8gdm0uY2hvb3NlUGxhbihsb2NhbFN0b3JhZ2VTZXJ2aWNlLmdldChcInNlbGVjdGVkUGxhblwiKSk7XHJcblxyXG4gICAgdm0uY2xvc2VWaXN1YWxQbGFubmVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gXCJkZWZhdWx0XCI7XHJcbiAgICAgICQoXCIjY2hvb3NlUm9vZk1vZGFsXCIpLm1vZGFsKFwiaGlkZVwiKTtcclxuICAgICAgJHN0YXRlLmdvKFwiZGFzaGJvYXJkXCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBcclxuICAgICAgIEVuZCBvZiBQcmVsb2FkIGZ1bmN0aW9uYWxpdHlcclxuICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgZnVuY3Rpb24gbG9hZFBsYW5uZXIocm9vZlBsYW4pIHtcclxuICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogXHJcbiAgICAgICAgICBFc3NlbnRpYWwgdmFyc1xyXG4gICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gICAgICAvKiBIZWxwZXIgdmFycyAqL1xyXG5cclxuICAgICAgdmFyIGxvYWRGcm9tSnNvbiA9IHJvb2ZQbGFuLnBsYW5uZXJEYXRhXHJcbiAgICAgICAgPyByb29mUGxhbi5wbGFubmVyRGF0YS5pbml0aWFsaXplZFxyXG4gICAgICAgICAgPyB0cnVlXHJcbiAgICAgICAgICA6IGZhbHNlXHJcbiAgICAgICAgOiBmYWxzZTtcclxuXHJcbiAgICAgIC8qIEV4cG9zZSBzaGFwZSBzZWxlY3Rpb24gbWV0aG9kZHMgKi9cclxuXHJcbiAgICAgIHZhciBzZWxlY3RlZFNoYXBlID0gY29tbW9uVlBGYWN0b3J5LnNlbGVjdGVkU2hhcGUoKTtcclxuXHJcbiAgICAgIC8qIENvbG9yIHBpY2tlciBjb25maWcgKi9cclxuXHJcbiAgICAgIHZhciBjb2xvclBpY2tlciA9IHRvb2xzVlBGYWN0b3J5LmNvbG9yUGlja2VyKCk7XHJcbiAgICAgIC8qIG1ha2UgdGhpcyBvYmplY3QgYXZhaWxhYmxlIHRvIHNoYXBlIGZhY3Rvcnkgc28gaXQgY2FuIGZldGNoIHRoZSBwcm9wcyAqL1xyXG4gICAgICBzaGFwZXNWUEZhY3RvcnkuZ2V0U2hhcGVUb29scyhjb2xvclBpY2tlcik7XHJcblxyXG4gICAgICB2bS5zaGFwZVByb3BzID0ge1xyXG4gICAgICAgIGNvbG9yVHlwZTogXCJzdHJva2VDb2xvclwiLFxyXG4gICAgICAgIHN0cm9rZUNvbG9yOiBcInJnYmEoMCAsMCAsIDAgLCAxKVwiLFxyXG4gICAgICAgIGZpbGxDb2xvcjogXCJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNTcpXCIsXHJcbiAgICAgICAgc3Ryb2tlV2lkdGg6IDFcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8qIENvbG9yIFBpY2tlciBPcHRpb25zICovXHJcblxyXG4gICAgICB2bS5jcE9wdGlvbnMgPSB7XHJcbiAgICAgICAgc3dhdGNoOiB0cnVlLFxyXG4gICAgICAgIGlucHV0Q2xhc3M6IFwiaC0zMFwiLFxyXG4gICAgICAgIGZvcm1hdDogXCJyZ2JcIixcclxuICAgICAgICBjYXNlOiBcImxvd2VyXCIsXHJcbiAgICAgICAgYWxwaGE6IHRydWVcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8qIENvbG9yIFBpY2tlciBFdmVudHMgKi9cclxuICAgICAgdm0uY3BFdmVudHMgPSB7XHJcbiAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uKGFwaSwgY29sb3IsICRldmVudCkge1xyXG4gICAgICAgICAgdmFyIG9iaiA9IHt9O1xyXG4gICAgICAgICAgb2JqLnN0cm9rZSA9IHZtLnNoYXBlUHJvcHMuc3Ryb2tlQ29sb3I7XHJcbiAgICAgICAgICBvYmouZmlsbCA9IHZtLnNoYXBlUHJvcHMuZmlsbENvbG9yO1xyXG4gICAgICAgICAgY29sb3JQaWNrZXIuc2V0KG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLyogYm91bmQgdG8gbmcgY2hhbmdlIG9mIHRoZSBzbGlkZXIgKi9cclxuICAgICAgdm0uY2hhbmdlU3Ryb2tlV2lkdGggPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBjb2xvclBpY2tlci5zZXQoe1xyXG4gICAgICAgICAgc3Ryb2tlV2lkdGg6IHZtLnNoYXBlUHJvcHMuc3Ryb2tlV2lkdGhcclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8qIEVuZCBvZiBjb2xvciBwaWNrZXIgY29uZmlnICovXHJcblxyXG4gICAgICAvKiBDcmVhdGluZyB0aGUgc3RhZ2UgKi9cclxuXHJcbiAgICAgIHZhciBzdGFnZSA9IGNvbW1vblZQRmFjdG9yeS5jcmVhdGVTdGFnZShcclxuICAgICAgICBcInN0YWdlXCIsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQsXHJcbiAgICAgICAgICB3aWR0aDogd2luZG93LmlubmVyV2lkdGhcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJvb2ZQbGFuLnBsYW5uZXJEYXRhXHJcbiAgICAgICk7XHJcblxyXG4gICAgICAvKiBDaGVjayBpZiByb29mUGxhbnMgaGFzIGV4aXN0aW5nIGRyYXdpbmdzICovXHJcblxyXG4gICAgICB2YXIgc3RhZ2VFdmVudHMgPSBldmVudHNWUEZhY3Rvcnkuc3RhZ2VFdmVudHMoc3RhZ2UpO1xyXG5cclxuICAgICAgc3RhZ2VFdmVudHMucmVnaXN0ZXIoXCJtb3VzZW1vdmVcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLyogcmVnaXN0ZXIgbW91c2UgbW92ZSBldmVudCBmb3Igc3RhZ2UgKi9cclxuICAgICAgICB2bS5wb2ludGVyUG9zaXRpb24gPSB7XHJcbiAgICAgICAgICB4OiBzdGFnZS5nZXRQb2ludGVyUG9zaXRpb24oKS54LFxyXG4gICAgICAgICAgeTogc3RhZ2UuZ2V0UG9pbnRlclBvc2l0aW9uKCkueVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgJHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qIEluaXRpYWxpemluZyBkcmF3IHN0YXRlICovXHJcblxyXG4gICAgICB2YXIgZHJhd1N0YXRlID0gY29tbW9uVlBGYWN0b3J5LmRyYXdTdGF0ZSgpO1xyXG5cclxuICAgICAgJHNjb3BlLiRvbihcImRyYXdTdGF0ZUNoYW5nZVwiLCBmdW5jdGlvbihlLCBkcmF3U3RhdGVzKSB7XHJcbiAgICAgICAgdm0uY3VycmVudERyYXdTdGF0ZSA9IGRyYXdTdGF0ZXM7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyogQ3JlYXRpbmcgdGhlIGJhc2UgbGF5ZXIgKi9cclxuICAgICAgdmFyIGJhc2VMYXllciA9IGxvYWRGcm9tSnNvblxyXG4gICAgICAgID8gc3RhZ2UuZ2V0Q2hpbGRyZW4oKVswXVxyXG4gICAgICAgIDogbGF5ZXJzVlBGYWN0b3J5LmNyZWF0ZUxheWVyKHN0YWdlKTtcclxuXHJcbiAgICAgIHZhciBwcm9jZXNzU3RvcmUgPSBsYXllcnNWUEZhY3RvcnkuaW5pdGlhdGVQcm9jZXNzKHN0YWdlLCBiYXNlTGF5ZXIpO1xyXG5cclxuICAgICAgdmFyIHNlbGVjdGlvblN0b3JlID0gY29tbW9uVlBGYWN0b3J5LnNlbGVjdGlvblN0b3JlKCk7XHJcblxyXG4gICAgICAvKiBJbml0aWFsaXppbmcgdHJhbnNmb3JtZXIgc3RvcmUgZm9yIHNoYXBlcyAqL1xyXG5cclxuICAgICAgdmFyIHRyYW5zZm9ybWVyU3RvcmUgPSBjb21tb25WUEZhY3RvcnkudHJhbnNmb3JtZXJzKGJhc2VMYXllcik7XHJcblxyXG4gICAgICAvKiBBZGRpbmcgcm9vZiBwbGFuIGltYWdlIHRvIHRoZSBiYXNlIGxheWVyICovXHJcblxyXG4gICAgICAvKiAgSW5pdGlhbGl6aW5nIGNhbGlicmF0b3IgKi9cclxuXHJcbiAgICAgIHZhciBjYWxpYnJhdG9yID0gc2hhcGVzVlBGYWN0b3J5LmNhbGlicmF0b3Ioc3RhZ2UsIGJhc2VMYXllcik7XHJcblxyXG4gICAgICB2YXIgY2FsaWJyYXRpb25TdGF0ZSA9IGNvbW1vblZQRmFjdG9yeS5jYWxpYnJhdGlvblN0YXRlKCk7XHJcblxyXG4gICAgICAvKiBJbml0aWFsaXppbmcgbWV0cmljIGZ1bmN0aW9uICovXHJcblxyXG4gICAgICB2YXIgbWV0cmljcyA9IHRvb2xzVlBGYWN0b3J5Lm1ldHJpY3MoKTtcclxuXHJcbiAgICAgIHZtLnNob3dQYW5lbCA9IGZhbHNlO1xyXG4gICAgICB2bS56b29tTGV2ZWwgPSAxMDA7XHJcbiAgICAgIHZtLnNoYXBlSW5mbztcclxuXHJcbiAgICAgIC8qIFNldHRpbmcgdXAgdGhlIGNhbGlicmF0aW9uIGFuZCBsYXllcnMgdmFsdWUgdG8gYmluZCBpdCBpbiB0aGUgdmlldyAqL1xyXG4gICAgICBpZiAobG9hZEZyb21Kc29uKSB7XHJcbiAgICAgICAgaWYgKHJvb2ZQbGFuLnBsYW5uZXJEYXRhICYmIHJvb2ZQbGFuLnBsYW5uZXJEYXRhLmNhbGlicmF0aW9uKSB7XHJcbiAgICAgICAgICBjYWxpYnJhdGlvblN0YXRlLnNldChyb29mUGxhbi5wbGFubmVyRGF0YS5jYWxpYnJhdGlvbik7XHJcbiAgICAgICAgICAvKiBMb2FkIFByb2Nlc3MgaWYgYXZhaWxhYmxlICovXHJcbiAgICAgICAgICB2YXIgbG9hZGVkUHJvY2Vzc2VzID0gc3RhZ2VcclxuICAgICAgICAgICAgLmdldENoaWxkcmVuKClbMF1cclxuICAgICAgICAgICAgLmdldENoaWxkcmVuKClcclxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbih4KSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIC9wcm9jZXNzKi8udGVzdCh4Lm5hbWUoKSkgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgaWYgKGxvYWRlZFByb2Nlc3Nlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHByb2Nlc3NTdG9yZS5sb2FkUHJvY2Vzc2VzKGxvYWRlZFByb2Nlc3Nlcyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwcm9jZXNzU3RvcmUuY3JlYXRlUHJvY2VzcygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHJvb2ZQbGFuLnBsYW5uZXJEYXRhICYmIHJvb2ZQbGFuLnBsYW5uZXJEYXRhLmNvdW50RGF0YSkge1xyXG4gICAgICAgICAgc2hhcGVzVlBGYWN0b3J5LmxvYWRTaGFwZUlkKHJvb2ZQbGFuLnBsYW5uZXJEYXRhLmNvdW50RGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHByb2Nlc3NTdG9yZS5jcmVhdGVQcm9jZXNzKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8qIEJpbmRpbmcgY2FsaWJyYXRpb24gZGF0YSB0byB2aWV3ICovXHJcbiAgICAgIHZtLmNhbGlicmF0aW9uRGF0YSA9IGNhbGlicmF0aW9uU3RhdGUuZ2V0KCk7XHJcblxyXG4gICAgICB2bS5mb3JtYXRDYWxpYnJhdGlvbiA9IGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICAgIHJldHVybiB2YWwudG9GaXhlZCgzKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8qIEJpbmRpbmcgcHJvY2VzcyBkYXRhIHRvIHZpZXcgKi9cclxuICAgICAgdm0ucHJvY2Vzc2VzID0gcHJvY2Vzc1N0b3JlLmdldFByb2Nlc3NlcygpO1xyXG5cclxuICAgICAgLyogSW5pdGlhbGl6aW5nIGFzc29jaWF0aW9ucyBtb2R1bGUgKi9cclxuXHJcbiAgICAgIHZtLmFzc29jaWF0aW9ucyA9IGNvbW1vblZQRmFjdG9yeS5hc3NvY2lhdGlvbnMoKTtcclxuXHJcbiAgICAgIC8qIEluaXRpYWxpemluZyByb29mIHBsYW4gaW1hZ2UgKi9cclxuXHJcbiAgICAgIHZhciBpbWFnZU9iaiA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICBpbWFnZU9iai5jcm9zc09yaWdpbiA9IFwiQW5vbnltb3VzXCI7XHJcblxyXG4gICAgICBpZiAocm9vZlBsYW4ucGxhbm5lckRhdGEgJiYgcm9vZlBsYW4ucGxhbm5lckRhdGEuanNvblN0cmluZykge1xyXG4gICAgICAgIGltYWdlT2JqLnNyYyA9IHJvb2ZQbGFuLmFzc2V0T2JqLnVybDtcclxuICAgICAgICBpbWFnZU9iai5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHZhciBpbWFnZUNvbnRhaW5lciA9IGJhc2VMYXllci5nZXQoXCIjYmdJbWFnZVwiKVswXTtcclxuICAgICAgICAgIGltYWdlQ29udGFpbmVyLmltYWdlKGltYWdlT2JqKTtcclxuXHJcbiAgICAgICAgICB2bS5pbWFnZVByb3BzID0ge1xyXG4gICAgICAgICAgICB4OiBNYXRoLnJvdW5kKGltYWdlQ29udGFpbmVyLndpZHRoKCkpLFxyXG4gICAgICAgICAgICB5OiBNYXRoLnJvdW5kKGltYWdlQ29udGFpbmVyLmhlaWdodCgpKVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIHN0YWdlLmRyYXcoKTtcclxuICAgICAgICB9O1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGltYWdlT2JqLnNyYyA9IHJvb2ZQbGFuLmFzc2V0T2JqLnVybDtcclxuXHJcbiAgICAgICAgaW1hZ2VPYmoub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAvKiBTZXR0aW5nIGltYWdlIHByb3BzICovXHJcbiAgICAgICAgICB2YXIgaW1hZ2VIZWlnaHQgPSBNYXRoLnJvdW5kKHN0YWdlLmhlaWdodCgpIC0gNzUpO1xyXG4gICAgICAgICAgdmFyIGFzcGVjdFJhdGlvID0gaW1hZ2VPYmouaGVpZ2h0IC8gaW1hZ2VIZWlnaHQ7XHJcbiAgICAgICAgICB2YXIgaW1hZ2VXaWR0aCA9IE1hdGgucm91bmQoaW1hZ2VPYmoud2lkdGggLyBhc3BlY3RSYXRpbyk7XHJcblxyXG4gICAgICAgICAgdm0uaW1hZ2VQcm9wcyA9IHtcclxuICAgICAgICAgICAgeDogaW1hZ2VXaWR0aCxcclxuICAgICAgICAgICAgeTogaW1hZ2VIZWlnaHRcclxuICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgdmFyIGJnSW1hZ2UgPSBuZXcgS29udmEuSW1hZ2Uoe1xyXG4gICAgICAgICAgICBpbWFnZTogaW1hZ2VPYmosXHJcbiAgICAgICAgICAgIG5hbWU6IFwiYmdJbWFnZVwiLFxyXG4gICAgICAgICAgICBpZDogXCJiZ0ltYWdlXCIsXHJcbiAgICAgICAgICAgIGhlaWdodDogaW1hZ2VIZWlnaHQsXHJcbiAgICAgICAgICAgIHNoYWRvd09mZnNldFg6IDEsXHJcbiAgICAgICAgICAgIHNoYWRvd09mZnNldFk6IDEsXHJcbiAgICAgICAgICAgIHNoYWRvd09wYWNpdHk6IDAuNSxcclxuICAgICAgICAgICAgeDogc3RhZ2Uud2lkdGgoKSAvIDIgLSBpbWFnZVdpZHRoIC8gMixcclxuICAgICAgICAgICAgLyogQ2VudGVyaW5nIHRoZSBpbWFnZSBvbiB0aGUgc3RhZ2UgKi9cclxuICAgICAgICAgICAgeTogMjAsXHJcbiAgICAgICAgICAgIHdpZHRoOiBpbWFnZVdpZHRoXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBiZ0ltYWdlLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICB0cmFuc2Zvcm1lclN0b3JlLnJlbW92ZUFsbCgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICAvLyBhZGQgdGhlIHNoYXBlIHRvIHRoZSBsYXllclxyXG4gICAgICAgICAgYmFzZUxheWVyLmFkZChiZ0ltYWdlKTtcclxuICAgICAgICAgIGJhc2VMYXllci5kcmF3KCk7XHJcbiAgICAgICAgICAvLyBtb3ZlIEJHIGxheWVyIHRvIGJvdHRvbVxyXG4gICAgICAgICAgYmFzZUxheWVyLm1vdmVUb0JvdHRvbSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8qIEluaXRpYXRpbmcgYWN0aW9uIHN0YXRlcyBmb3IgdW5kbyBhbmQgcmVkbyAqL1xyXG4gICAgICB2YXIgYWN0aW9uU3RhdGVzID0gY29tbW9uVlBGYWN0b3J5LmFjdGlvblN0YXRlcygpO1xyXG5cclxuICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogXHJcbiAgICAgICAgICBFbmQgb2YgZXNzZW50aWFsIHZhcnNcclxuICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIFxyXG4gICAgICAgICAgUmVnaXN0ZXJpbmcgZXZlbnRzIFxyXG4gICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gICAgICB2YXIgd2luZG93RXZlbnQgPSBldmVudHNWUEZhY3Rvcnkud2luZG93RXZlbnRzKHdpbmRvdyk7XHJcbiAgICAgIHdpbmRvd0V2ZW50LnJlZ2lzdGVyKHN0YWdlKTtcclxuICAgICAgdm0uaGlzdG9yeVBvcyA9IHtcclxuICAgICAgICB4OiB1bmRlZmluZWQsXHJcbiAgICAgICAgeTogdW5kZWZpbmVkXHJcbiAgICAgIH07XHJcbiAgICAgIC8qIEV2ZW50IGxpc3RlbmVyIGZvciB6b29tIGZ1bmN0aW9uYWxpdHkgKi9cclxuXHJcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIHZhciBzY2FsZUJ5ID0gMS4xNTtcclxuXHJcbiAgICAgICAgLyogRGlzYWJsZSBzY3JvbGwgb25seSBvbiB2aXN1YWwgcGxhbm5lciBzdGF0ZSAqL1xyXG4gICAgICAgICRzdGF0ZS4kY3VycmVudC5uYW1lID09PSBcInZpc3VhbFBsYW5uZXJcIiAmJlxyXG4gICAgICAgICAgLyogQWxzbyBhbGxvdyBzY3JvbGwgaW5zaWRlIHBvcC11cHMgKi9cclxuICAgICAgICAgICEvbW9kYWwtb3Blbi8udGVzdChcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJib2R5XCIpWzBdLmNsYXNzTmFtZVxyXG4gICAgICAgICAgKSAmJlxyXG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAvKiBDZW50ZXIgcG9zaXRpb24gKi9cclxuXHJcbiAgICAgICAgdmFyIGNlbnRlclkgPSBNYXRoLnJvdW5kKHN0YWdlLmhlaWdodCgpIC8gMiksXHJcbiAgICAgICAgICBjZW50ZXJYID0gTWF0aC5yb3VuZChzdGFnZS53aWR0aCgpIC8gMik7XHJcblxyXG4gICAgICAgIGlmIChlLmN0cmxLZXkpIHtcclxuICAgICAgICAgIHZhciBvbGRTY2FsZSA9IGJhc2VMYXllci5zY2FsZVgoKTtcclxuICAgICAgICAgIHZhciBtb3VzZVBvaW50VG8gPSB7XHJcbiAgICAgICAgICAgIHg6XHJcbiAgICAgICAgICAgICAgc3RhZ2UuZ2V0UG9pbnRlclBvc2l0aW9uKCkueCAvIG9sZFNjYWxlIC1cclxuICAgICAgICAgICAgICBiYXNlTGF5ZXIueCgpIC8gb2xkU2NhbGUsXHJcbiAgICAgICAgICAgIHk6XHJcbiAgICAgICAgICAgICAgc3RhZ2UuZ2V0UG9pbnRlclBvc2l0aW9uKCkueSAvIG9sZFNjYWxlIC0gYmFzZUxheWVyLnkoKSAvIG9sZFNjYWxlXHJcbiAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgIHZhciBuZXdTY2FsZSA9IGUuZGVsdGFZIDwgMCA/IG9sZFNjYWxlICogc2NhbGVCeSA6IG9sZFNjYWxlIC8gc2NhbGVCeTtcclxuICAgICAgICAgIGJhc2VMYXllci5zY2FsZSh7XHJcbiAgICAgICAgICAgIHg6IG5ld1NjYWxlLFxyXG4gICAgICAgICAgICB5OiBuZXdTY2FsZVxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgdmFyIG5ld1BvcyA9IHtcclxuICAgICAgICAgICAgeDpcclxuICAgICAgICAgICAgICAtKG1vdXNlUG9pbnRUby54IC0gc3RhZ2UuZ2V0UG9pbnRlclBvc2l0aW9uKCkueCAvIG5ld1NjYWxlKSAqXHJcbiAgICAgICAgICAgICAgbmV3U2NhbGUsXHJcbiAgICAgICAgICAgIHk6XHJcbiAgICAgICAgICAgICAgLShtb3VzZVBvaW50VG8ueSAtIHN0YWdlLmdldFBvaW50ZXJQb3NpdGlvbigpLnkgLyBuZXdTY2FsZSkgKlxyXG4gICAgICAgICAgICAgIG5ld1NjYWxlXHJcbiAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgIC8qIENoYW5nZSBpbWFnZSByZXNvbHV0aW9uIHdpdGggc2NhbGUgKi9cclxuICAgICAgICAgIHZhciBpbWFnZVByb3BzID0ge1xyXG4gICAgICAgICAgICB5OiBNYXRoLnJvdW5kKGJhc2VMYXllci5maW5kKFwiI2JnSW1hZ2VcIilbMF0uaGVpZ2h0KCkgKiBuZXdTY2FsZSksXHJcbiAgICAgICAgICAgIHg6IE1hdGgucm91bmQoYmFzZUxheWVyLmZpbmQoXCIjYmdJbWFnZVwiKVswXS53aWR0aCgpICogbmV3U2NhbGUpXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgdm0uaW1hZ2VQcm9wcyA9IGltYWdlUHJvcHM7XHJcblxyXG4gICAgICAgICAgdm0uem9vbUxldmVsID0gTWF0aC5yb3VuZChiYXNlTGF5ZXIuc2NhbGUoKS54ICogMTAwKTtcclxuICAgICAgICAgIHRvb2xzVlBGYWN0b3J5LnNjYWxlVHJhbnNmb3JtZXJCYXNlZE9uWm9vbShiYXNlTGF5ZXIpO1xyXG5cclxuICAgICAgICAgIC8vIGFkZGluZyB6b29tIGxldmVsIGZvciBkaXNwbGF5XHJcbiAgICAgICAgICAkc2NvcGUuJGFwcGx5KCk7XHJcbiAgICAgICAgICBiYXNlTGF5ZXIucG9zaXRpb24obmV3UG9zKTtcclxuICAgICAgICAgIHN0YWdlLmJhdGNoRHJhdygpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBpZiAoZS50YXJnZXQudGFnTmFtZSA9PT0gXCJDQU5WQVNcIikge1xyXG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgc2hhcGVzVlBGYWN0b3J5LmNhbmNlbERyYXdpbmcoKTtcclxuICAgICAgICAgIGJhc2VMYXllci5kcmF3KCk7XHJcbiAgICAgICAgICBkcmF3U3RhdGUucmVzZXQoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyogWm9vbSB1c2luZyBidXR0b24gKi9cclxuXHJcbiAgICAgIHZtLnpvb21CdXR0b24gPSBmdW5jdGlvbih0eXBlKSB7XHJcbiAgICAgICAgLy8gMCAtIGluICwgMSAtIG91dFxyXG5cclxuICAgICAgICB2YXIgY2VudGVyWSA9IE1hdGgucm91bmQoc3RhZ2UuaGVpZ2h0KCkgLyAyKSxcclxuICAgICAgICAgIGNlbnRlclggPSBNYXRoLnJvdW5kKHN0YWdlLndpZHRoKCkgLyAyKTtcclxuICAgICAgICB2YXIgc2NhbGVCeSA9IDEuMTU7XHJcbiAgICAgICAgdmFyIG9sZFNjYWxlID0gYmFzZUxheWVyLnNjYWxlWCgpO1xyXG4gICAgICAgIHZhciBtb3VzZVBvaW50VG8gPSB7XHJcbiAgICAgICAgICB4OiBjZW50ZXJYIC8gb2xkU2NhbGUgLSBiYXNlTGF5ZXIueCgpIC8gb2xkU2NhbGUsXHJcbiAgICAgICAgICB5OiBjZW50ZXJZIC8gb2xkU2NhbGUgLSBiYXNlTGF5ZXIueSgpIC8gb2xkU2NhbGVcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBuZXdTY2FsZSA9IHR5cGUgPiAwID8gb2xkU2NhbGUgKiBzY2FsZUJ5IDogb2xkU2NhbGUgLyBzY2FsZUJ5O1xyXG4gICAgICAgIGJhc2VMYXllci5zY2FsZSh7XHJcbiAgICAgICAgICB4OiBuZXdTY2FsZSxcclxuICAgICAgICAgIHk6IG5ld1NjYWxlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIG5ld1BvcyA9IHtcclxuICAgICAgICAgIHg6IC0obW91c2VQb2ludFRvLnggLSBjZW50ZXJYIC8gbmV3U2NhbGUpICogbmV3U2NhbGUsXHJcbiAgICAgICAgICB5OiAtKG1vdXNlUG9pbnRUby55IC0gY2VudGVyWSAvIG5ld1NjYWxlKSAqIG5ld1NjYWxlXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyogQ2hhbmdlIGltYWdlIHJlc29sdXRpb24gd2l0aCBzY2FsZSAqL1xyXG4gICAgICAgIHZhciBpbWFnZVByb3BzID0ge1xyXG4gICAgICAgICAgeTogTWF0aC5yb3VuZChiYXNlTGF5ZXIuZmluZChcIiNiZ0ltYWdlXCIpWzBdLmhlaWdodCgpICogbmV3U2NhbGUpLFxyXG4gICAgICAgICAgeDogTWF0aC5yb3VuZChiYXNlTGF5ZXIuZmluZChcIiNiZ0ltYWdlXCIpWzBdLndpZHRoKCkgKiBuZXdTY2FsZSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZtLmltYWdlUHJvcHMgPSBpbWFnZVByb3BzO1xyXG4gICAgICAgIHRvb2xzVlBGYWN0b3J5LnNjYWxlVHJhbnNmb3JtZXJCYXNlZE9uWm9vbShiYXNlTGF5ZXIpO1xyXG4gICAgICAgIHZtLnpvb21MZXZlbCA9IE1hdGgucm91bmQoYmFzZUxheWVyLnNjYWxlKCkueCAqIDEwMCk7XHJcblxyXG4gICAgICAgIGJhc2VMYXllci5wb3NpdGlvbihuZXdQb3MpO1xyXG4gICAgICAgIHN0YWdlLmJhdGNoRHJhdygpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdm0uem9vbVNsaWRlciA9IGZ1bmN0aW9uKHBlcmNlbnRhZ2UpIHtcclxuICAgICAgICB2YXIgY2VudGVyWSA9IE1hdGgucm91bmQoc3RhZ2UuaGVpZ2h0KCkgLyAyKSxcclxuICAgICAgICAgIGNlbnRlclggPSBNYXRoLnJvdW5kKHN0YWdlLndpZHRoKCkgLyAyKTtcclxuXHJcbiAgICAgICAgdmFyIG9sZFNjYWxlID0gYmFzZUxheWVyLnNjYWxlWCgpO1xyXG4gICAgICAgIHZhciBtb3VzZVBvaW50VG8gPSB7XHJcbiAgICAgICAgICB4OiBjZW50ZXJYIC8gb2xkU2NhbGUgLSBiYXNlTGF5ZXIueCgpIC8gb2xkU2NhbGUsXHJcbiAgICAgICAgICB5OiBjZW50ZXJZIC8gb2xkU2NhbGUgLSBiYXNlTGF5ZXIueSgpIC8gb2xkU2NhbGVcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgbmV3U2NhbGUgPSBwZXJjZW50YWdlIC8gMTAwO1xyXG4gICAgICAgIGJhc2VMYXllci5zY2FsZSh7XHJcbiAgICAgICAgICB4OiBuZXdTY2FsZSxcclxuICAgICAgICAgIHk6IG5ld1NjYWxlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIG5ld1BvcyA9IHtcclxuICAgICAgICAgIHg6IC0obW91c2VQb2ludFRvLnggLSBjZW50ZXJYIC8gbmV3U2NhbGUpICogbmV3U2NhbGUsXHJcbiAgICAgICAgICB5OiAtKG1vdXNlUG9pbnRUby55IC0gY2VudGVyWSAvIG5ld1NjYWxlKSAqIG5ld1NjYWxlXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyogQ2hhbmdlIGltYWdlIHJlc29sdXRpb24gd2l0aCBzY2FsZSAqL1xyXG4gICAgICAgIHZhciBpbWFnZVByb3BzID0ge1xyXG4gICAgICAgICAgeTogTWF0aC5yb3VuZChiYXNlTGF5ZXIuZmluZChcIiNiZ0ltYWdlXCIpWzBdLmhlaWdodCgpICogbmV3U2NhbGUpLFxyXG4gICAgICAgICAgeDogTWF0aC5yb3VuZChiYXNlTGF5ZXIuZmluZChcIiNiZ0ltYWdlXCIpWzBdLndpZHRoKCkgKiBuZXdTY2FsZSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZtLmltYWdlUHJvcHMgPSBpbWFnZVByb3BzO1xyXG4gICAgICAgIHRvb2xzVlBGYWN0b3J5LnNjYWxlVHJhbnNmb3JtZXJCYXNlZE9uWm9vbShiYXNlTGF5ZXIpO1xyXG4gICAgICAgIHZtLnpvb21MZXZlbCA9IE1hdGgucm91bmQoYmFzZUxheWVyLnNjYWxlKCkueCAqIDEwMCk7XHJcblxyXG4gICAgICAgIGJhc2VMYXllci5wb3NpdGlvbihuZXdQb3MpO1xyXG4gICAgICAgIHN0YWdlLmJhdGNoRHJhdygpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgLyogZnVuY3Rpb24gdG8gcmVzZXQgem9vbSAqL1xyXG5cclxuICAgICAgdm0ucmVzZXRab29tID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdm0uem9vbUxldmVsID0gMTAwO1xyXG4gICAgICAgIGJhc2VMYXllci5wb3NpdGlvbih7XHJcbiAgICAgICAgICB4OiAwLFxyXG4gICAgICAgICAgeTogMFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGJhc2VMYXllci5zY2FsZSh7XHJcbiAgICAgICAgICB4OiAxLFxyXG4gICAgICAgICAgeTogMVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHN0YWdlLmJhdGNoRHJhdygpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdmFyIGJhc2VMYXllckV2ZW50ID0gZXZlbnRzVlBGYWN0b3J5LmxheWVyRXZlbnRzKGJhc2VMYXllcik7XHJcblxyXG4gICAgICAvKiBEZWZhdWx0IGJhc2VsYXllciBjbGljayBldmVudCAqL1xyXG4gICAgICBiYXNlTGF5ZXJFdmVudC5yZWdpc3RlcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NOYW1lID09PSBcIkltYWdlXCIpIHtcclxuICAgICAgICAgIHRyYW5zZm9ybWVyU3RvcmUucmVtb3ZlQWxsKCk7XHJcbiAgICAgICAgICB2bS5jbG9zZUluZm9XaWRnZXQoKTtcclxuICAgICAgICAgIHZtLmNsb3NlVGV4dEluZm9XaWRnZXQoKTtcclxuICAgICAgICAgIHNlbGVjdGVkU2hhcGUucmVzZXQoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyogRXZlbnQgd3JhcHBlcnMgKi9cclxuXHJcbiAgICAgIGZ1bmN0aW9uIHJlY3RhbmdsZUV2ZW50V3JhcHBlcihzaGFwZU9iamVjdCwgc2hhcGVUeXBlLCBwcm9jZXNzKSB7XHJcbiAgICAgICAgdmFyIHJlY3RhbmdsZUV2ZW50ID0gZXZlbnRzVlBGYWN0b3J5LnNoYXBlRXZlbnRzKFxyXG4gICAgICAgICAgc2hhcGVPYmplY3Quc2hhcGVcclxuICAgICAgICApOyAvKiBDcmVhdGUgYW4gZXZlbnQgb2JqIGZvciB0aGUgc2hhcGUgKi9cclxuICAgICAgICBpZiAoIXByb2Nlc3MpIHtcclxuICAgICAgICAgIC8qIERvIG5vdCBjcmVhdGUgcHJvY2VzcyBpZiBpdCdzIGFscmVhZHkgYXZhaWxhYmxlIGZyb20ganNvbiAqL1xyXG4gICAgICAgICAgdmFyIGN1cnJlbnRQcm9jZXNzID0gcHJvY2Vzc1N0b3JlLmdldEN1cnJlbnQoKTtcclxuICAgICAgICAgIGN1cnJlbnRQcm9jZXNzLmFkZChzaGFwZU9iamVjdC5zaGFwZSk7XHJcbiAgICAgICAgICBjdXJyZW50UHJvY2Vzcy5tb3ZlVG9Ub3AoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLyogaW5pdGlhdGluZyBjdXN0b20gdHJhbnNmb3JtZXJzICovXHJcbiAgICAgICAgdmFyIGN1c3RvbVRyYW5zZm9ybWVyID0gdG9vbHNWUEZhY3RvcnkuY3VzdG9tVHJhbnNmb3JtZXIoXHJcbiAgICAgICAgICBzdGFnZSxcclxuICAgICAgICAgIGJhc2VMYXllcixcclxuICAgICAgICAgIHNoYXBlT2JqZWN0LnNoYXBlLFxyXG4gICAgICAgICAgdHJ1ZVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY3VzdG9tVHJhbnNmb3JtZXIuc2V0KHNoYXBlT2JqZWN0LnNoYXBlLnBvaW50cygpKTtcclxuICAgICAgICB0cmFuc2Zvcm1lclN0b3JlLmFkZChjdXN0b21UcmFuc2Zvcm1lci5nZXRHcm91cCgpKTtcclxuXHJcbiAgICAgICAgLyogXHJcbiAgICAgICAgICAgIFJlZ2lzdGVyaW5nIGEgZHJhZ21vdmUgbWV0aG9kIHRvIGJpbmQgZHJhZ21vdmUgYW5kIGNsaWNrIGV2ZW50IHRvIHRoZSBjdXN0b20gdHJhbnNmb3JtZXJcclxuICAgICAgICAgICovXHJcbiAgICAgICAgcmVjdGFuZ2xlRXZlbnQucmVnaXN0ZXIoXCJkcmFnbW92ZS5cIiArIHNoYXBlVHlwZSwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgY3VzdG9tVHJhbnNmb3JtZXIudXBkYXRlKHtcclxuICAgICAgICAgICAgeDogc2hhcGVPYmplY3Quc2hhcGUueCgpLFxyXG4gICAgICAgICAgICB5OiBzaGFwZU9iamVjdC5zaGFwZS55KClcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKiBcclxuICAgICAgICAgICAgUmVnaXN0ZXJpbmcgY3VzdG9tIHRyYW5zZm9ybWVyIGV2ZW50IHRvIHRoZSBjcmVhdGVkIHBvbHlnb25cclxuICAgICAgICAgICovXHJcbiAgICAgICAgcmVjdGFuZ2xlRXZlbnQucmVnaXN0ZXIoXCJ0cmFuc2Zvcm1Qb2x5Z29uXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIHNjYWxlID1cclxuICAgICAgICAgICAgY2FsaWJyYXRpb25TdGF0ZS5nZXQoKS52YWx1ZSA9PT0gMFxyXG4gICAgICAgICAgICAgID8gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgOiBjYWxpYnJhdGlvblN0YXRlLmdldCgpLnZhbHVlO1xyXG5cclxuICAgICAgICAgIG1ldHJpY3Muc2V0U2hhcGVJbmZvKHtcclxuICAgICAgICAgICAgYXJlYTogdG9vbHNWUEZhY3RvcnkucG9seWdvbkFyZWEoc2hhcGVPYmplY3Quc2hhcGUucG9pbnRzKCksIHNjYWxlKSxcclxuICAgICAgICAgICAgdW5pdDogY2FsaWJyYXRpb25TdGF0ZS5nZXQoKS51bml0XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgICRzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgIHZtLnNoYXBlSW5mbyA9IG1ldHJpY3MuZ2V0U2hhcGVJbmZvKCk7XHJcblxyXG4gICAgICAgICAgc2hhcGVPYmplY3Quc2hhcGUucG9pbnRzKGN1c3RvbVRyYW5zZm9ybWVyLmdldFBvaW50cygpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyogRW5hYmxlIHRyYW5zZm9ybWVyIG9uIHNlbGVjdCAqL1xyXG4gICAgICAgIHJlY3RhbmdsZUV2ZW50LnJlZ2lzdGVyKFwiY2xpY2suXCIgKyBzaGFwZVR5cGUsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2hhcGVPYmplY3Quc2hhcGUubW92ZVRvVG9wKCk7XHJcbiAgICAgICAgICBzZWxlY3RlZFNoYXBlLnNldChzaGFwZU9iamVjdC5zaGFwZSk7XHJcbiAgICAgICAgICBiYXNlTGF5ZXIuZHJhdygpO1xyXG4gICAgICAgICAgY3VzdG9tVHJhbnNmb3JtZXIudXBkYXRlKHtcclxuICAgICAgICAgICAgeDogc2hhcGVPYmplY3Quc2hhcGUueCgpLFxyXG4gICAgICAgICAgICB5OiBzaGFwZU9iamVjdC5zaGFwZS55KClcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIHZtLm9wZW5JbmZvV2lkZ2V0KCk7XHJcbiAgICAgICAgICB2YXIgc2NhbGUgPVxyXG4gICAgICAgICAgICBjYWxpYnJhdGlvblN0YXRlLmdldCgpLnZhbHVlID09PSAwXHJcbiAgICAgICAgICAgICAgPyB1bmRlZmluZWRcclxuICAgICAgICAgICAgICA6IGNhbGlicmF0aW9uU3RhdGUuZ2V0KCkudmFsdWU7XHJcblxyXG4gICAgICAgICAgbWV0cmljcy5zZXRTaGFwZUluZm8oe1xyXG4gICAgICAgICAgICBhcmVhOiB0b29sc1ZQRmFjdG9yeS5wb2x5Z29uQXJlYShzaGFwZU9iamVjdC5zaGFwZS5wb2ludHMoKSwgc2NhbGUpLFxyXG4gICAgICAgICAgICB1bml0OiBjYWxpYnJhdGlvblN0YXRlLmdldCgpLnVuaXRcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICRzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgdm0uc2hhcGVJbmZvID0gbWV0cmljcy5nZXRTaGFwZUluZm8oKTtcclxuICAgICAgICAgIHZtLnNob3dQYW5lbCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgdHJhbnNmb3JtZXJTdG9yZS5yZW1vdmVBbGwoKTtcclxuICAgICAgICAgIGJhc2VMYXllci5hZGQoY3VzdG9tVHJhbnNmb3JtZXIuZ2V0R3JvdXAoKSk7XHJcbiAgICAgICAgICBiYXNlTGF5ZXIuZHJhdygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKiBcclxuICAgICAgICAgICAgRHJhZ3N0YXJ0IGFuZCBkcmFnZW5kIG1vdmVtZW50cyBmb3IgdW5kby9yZWRvIHN0YXRlc1xyXG4gICAgICAgICAgKi9cclxuICAgICAgICB2YXIgbW92ZW1lbnQgPSBjb21tb25WUEZhY3RvcnkubW92ZW1lbnQoKTtcclxuXHJcbiAgICAgICAgcmVjdGFuZ2xlRXZlbnQucmVnaXN0ZXIoXCJkcmFnc3RhcnQuXCIgKyBzaGFwZVR5cGUsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgIG1vdmVtZW50LmFkZChcclxuICAgICAgICAgICAgZS50YXJnZXQuZ2V0UG9zaXRpb24oKVxyXG4gICAgICAgICAgKTsgLyogR3JhYmJpbmcgc3RhcnQgcG9zaXRpb24gb2YgdGhlIG1vdmVtZW50ICovXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmVjdGFuZ2xlRXZlbnQucmVnaXN0ZXIoXCJkcmFnZW5kLlwiICsgc2hhcGVUeXBlLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAvKiBwdXNoaW5nIHRoZSBtb3ZlbWVudCB0byBhY3Rpb25TdGF0ZSBhZnRlciB0aGUgZW5kIHBvc2l0aW9uICovXHJcbiAgICAgICAgICBhY3Rpb25TdGF0ZXMucHVzaChcclxuICAgICAgICAgICAgY29tbW9uVlBGYWN0b3J5LmFjdGlvbkhhbmRsZXIoXHJcbiAgICAgICAgICAgICAgc3RhZ2UsXHJcbiAgICAgICAgICAgICAgc2hhcGVPYmplY3Quc2hhcGUsXHJcbiAgICAgICAgICAgICAgcHJvY2Vzc1N0b3JlLmdldEN1cnJlbnQoKSxcclxuICAgICAgICAgICAgICBcIm1vdmVcIixcclxuICAgICAgICAgICAgICBtb3ZlbWVudC5hZGQoZS50YXJnZXQuZ2V0UG9zaXRpb24oKSlcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gZWxsaXBzZUV2ZW50V3JhcHBlcihzaGFwZU9iamVjdCwgc2hhcGVUeXBlLCBwcm9jZXNzKSB7XHJcbiAgICAgICAgdmFyIGVsbGlwc2VFdmVudCA9IGV2ZW50c1ZQRmFjdG9yeS5zaGFwZUV2ZW50cyhcclxuICAgICAgICAgIHNoYXBlT2JqZWN0LnNoYXBlXHJcbiAgICAgICAgKTsgLyogQ3JlYXRlIGFuIGV2ZW50IG9iaiBmb3IgdGhlIGVsbGlwc2UgKi9cclxuICAgICAgICBpZiAoIXByb2Nlc3MpIHtcclxuICAgICAgICAgIC8qIERvIG5vdCBjcmVhdGUgcHJvY2VzcyBpZiBpdCdzIGFscmVhZHkgYXZhaWxhYmxlIGZyb20ganNvbiAqL1xyXG4gICAgICAgICAgdmFyIGN1cnJlbnRQcm9jZXNzID0gcHJvY2Vzc1N0b3JlLmdldEN1cnJlbnQoKTtcclxuICAgICAgICAgIGN1cnJlbnRQcm9jZXNzLmFkZChzaGFwZU9iamVjdC5zaGFwZSk7XHJcbiAgICAgICAgICBjdXJyZW50UHJvY2Vzcy5tb3ZlVG9Ub3AoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIEVsbGlwc2UgdHJhbnNmb3JtZXIgc2V0dXAgKi9cclxuXHJcbiAgICAgICAgdmFyIGVsbGlwc2VUcmFuc2ZvbWVyID0gdG9vbHNWUEZhY3RvcnkuZWxsaXBzZVRyYW5zZm9tZXIoXHJcbiAgICAgICAgICBzdGFnZSxcclxuICAgICAgICAgIGJhc2VMYXllcixcclxuICAgICAgICAgIHNoYXBlT2JqZWN0LnNoYXBlXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgZWxsaXBzZVRyYW5zZm9tZXIuc2V0KHNoYXBlT2JqZWN0LnNoYXBlLnJhZGl1cygpKTtcclxuICAgICAgICB0cmFuc2Zvcm1lclN0b3JlLmFkZChlbGxpcHNlVHJhbnNmb21lci5nZXRHcm91cCgpKTtcclxuXHJcbiAgICAgICAgZWxsaXBzZUV2ZW50LnJlZ2lzdGVyKFwiZHJhZ21vdmUuZWxsaXBzZVwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICBlbGxpcHNlVHJhbnNmb21lci5kZXN0cm95KCk7XHJcbiAgICAgICAgICBlbGxpcHNlVHJhbnNmb21lciA9IHRvb2xzVlBGYWN0b3J5LmVsbGlwc2VUcmFuc2ZvbWVyKFxyXG4gICAgICAgICAgICBzdGFnZSxcclxuICAgICAgICAgICAgYmFzZUxheWVyLFxyXG4gICAgICAgICAgICBzaGFwZU9iamVjdC5zaGFwZVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIGVsbGlwc2VUcmFuc2ZvbWVyLnNldChzaGFwZU9iamVjdC5zaGFwZS5yYWRpdXMoKSk7XHJcbiAgICAgICAgICB0cmFuc2Zvcm1lclN0b3JlLmFkZChlbGxpcHNlVHJhbnNmb21lci5nZXRHcm91cCgpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZWxsaXBzZUV2ZW50LnJlZ2lzdGVyKFwiY2xpY2suZWxsaXBzZVwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICBzaGFwZU9iamVjdC5zaGFwZS5tb3ZlVG9Ub3AoKTtcclxuICAgICAgICAgIGJhc2VMYXllci5kcmF3KCk7XHJcbiAgICAgICAgICAvKiByZW1vdmUgb3RoZXIgdHJhbnNmb3JtZXJzICovXHJcbiAgICAgICAgICB0cmFuc2Zvcm1lclN0b3JlLnJlbW92ZUFsbCgpO1xyXG4gICAgICAgICAgc2VsZWN0ZWRTaGFwZS5zZXQoc2hhcGVPYmplY3Quc2hhcGUpO1xyXG4gICAgICAgICAgdm0ub3BlbkluZm9XaWRnZXQoKTtcclxuICAgICAgICAgIC8qIEFyZWEgY2FsY3VsYXRpb24gKi9cclxuICAgICAgICAgIHZhciBzY2FsZSA9XHJcbiAgICAgICAgICAgIGNhbGlicmF0aW9uU3RhdGUuZ2V0KCkudmFsdWUgPT09IDBcclxuICAgICAgICAgICAgICA/IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgIDogY2FsaWJyYXRpb25TdGF0ZS5nZXQoKS52YWx1ZTtcclxuXHJcbiAgICAgICAgICBtZXRyaWNzLnNldFNoYXBlSW5mbyh7XHJcbiAgICAgICAgICAgIGFyZWE6IHRvb2xzVlBGYWN0b3J5LmVsbGlwc2VBcmVhKHNoYXBlT2JqZWN0LnNoYXBlLnJhZGl1cygpLCBzY2FsZSksXHJcbiAgICAgICAgICAgIHVuaXQ6IGNhbGlicmF0aW9uU3RhdGUuZ2V0KCkudW5pdFxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgZWxsaXBzZVRyYW5zZm9tZXIuZGVzdHJveSgpO1xyXG4gICAgICAgICAgZWxsaXBzZVRyYW5zZm9tZXIgPSB0b29sc1ZQRmFjdG9yeS5lbGxpcHNlVHJhbnNmb21lcihcclxuICAgICAgICAgICAgc3RhZ2UsXHJcbiAgICAgICAgICAgIGJhc2VMYXllcixcclxuICAgICAgICAgICAgc2hhcGVPYmplY3Quc2hhcGVcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBlbGxpcHNlVHJhbnNmb21lci5zZXQoc2hhcGVPYmplY3Quc2hhcGUucmFkaXVzKCkpO1xyXG4gICAgICAgICAgdHJhbnNmb3JtZXJTdG9yZS5hZGQoZWxsaXBzZVRyYW5zZm9tZXIuZ2V0R3JvdXAoKSk7XHJcbiAgICAgICAgICBiYXNlTGF5ZXIuZHJhdygpO1xyXG5cclxuICAgICAgICAgIHZtLnNoYXBlSW5mbyA9IG1ldHJpY3MuZ2V0U2hhcGVJbmZvKCk7XHJcbiAgICAgICAgICB2bS5zaG93UGFuZWwgPSB0cnVlO1xyXG4gICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICRzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBlbGxpcHNlRXZlbnQucmVnaXN0ZXIoXCJ0cmFuc2Zvcm1FbGxpcHNlXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgIC8qIEFyZWEgY2FsY3VsYXRpb24gKi9cclxuXHJcbiAgICAgICAgICB2YXIgc2NhbGUgPVxyXG4gICAgICAgICAgICBjYWxpYnJhdGlvblN0YXRlLmdldCgpLnZhbHVlID09PSAwXHJcbiAgICAgICAgICAgICAgPyB1bmRlZmluZWRcclxuICAgICAgICAgICAgICA6IGNhbGlicmF0aW9uU3RhdGUuZ2V0KCkudmFsdWU7XHJcblxyXG4gICAgICAgICAgbWV0cmljcy5zZXRTaGFwZUluZm8oe1xyXG4gICAgICAgICAgICBhcmVhOiB0b29sc1ZQRmFjdG9yeS5lbGxpcHNlQXJlYShzaGFwZU9iamVjdC5zaGFwZS5yYWRpdXMoKSwgc2NhbGUpLFxyXG4gICAgICAgICAgICB1bml0OiBjYWxpYnJhdGlvblN0YXRlLmdldCgpLnVuaXRcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIHZtLnNoYXBlSW5mbyA9IG1ldHJpY3MuZ2V0U2hhcGVJbmZvKCk7XHJcbiAgICAgICAgICB2bS5zaG93UGFuZWwgPSB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8qIFxyXG4gICAgICAgICAgICBEcmFnc3RhcnQgYW5kIGRyYWdlbmQgbW92ZW1lbnRzIGZvciB1bmRvL3JlZG8gc3RhdGVzXHJcbiAgICAgICAgICAqL1xyXG4gICAgICAgIHZhciBtb3ZlbWVudCA9IGNvbW1vblZQRmFjdG9yeS5tb3ZlbWVudCgpO1xyXG5cclxuICAgICAgICBlbGxpcHNlRXZlbnQucmVnaXN0ZXIoXCJkcmFnc3RhcnQuZWxsaXBzZVwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICBtb3ZlbWVudC5hZGQoXHJcbiAgICAgICAgICAgIGUudGFyZ2V0LmdldFBvc2l0aW9uKClcclxuICAgICAgICAgICk7IC8qIEdyYWJiaW5nIHN0YXJ0IHBvc2l0aW9uIG9mIHRoZSBtb3ZlbWVudCAqL1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGVsbGlwc2VFdmVudC5yZWdpc3RlcihcImRyYWdlbmQuZWxsaXBzZVwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAvKiBwdXNoaW5nIHRoZSBtb3ZlbWVudCB0byBhY3Rpb25TdGF0ZSBhZnRlciB0aGUgZW5kIHBvc2l0aW9uICovXHJcbiAgICAgICAgICBhY3Rpb25TdGF0ZXMucHVzaChcclxuICAgICAgICAgICAgY29tbW9uVlBGYWN0b3J5LmFjdGlvbkhhbmRsZXIoXHJcbiAgICAgICAgICAgICAgc3RhZ2UsXHJcbiAgICAgICAgICAgICAgc2hhcGVPYmplY3Quc2hhcGUsXHJcbiAgICAgICAgICAgICAgcHJvY2Vzc1N0b3JlLmdldEN1cnJlbnQoKSxcclxuICAgICAgICAgICAgICBcIm1vdmVcIixcclxuICAgICAgICAgICAgICBtb3ZlbWVudC5hZGQoZS50YXJnZXQuZ2V0UG9zaXRpb24oKSlcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gcG9seWdvbkV2ZW50V3JhcHBlcihzaGFwZU9iamVjdCwgcHJvY2Vzcykge1xyXG4gICAgICAgIHZhciBwb2x5Z29uRXZlbnQgPSBldmVudHNWUEZhY3Rvcnkuc2hhcGVFdmVudHMoXHJcbiAgICAgICAgICBzaGFwZU9iamVjdC5wb2x5Z29uXHJcbiAgICAgICAgKTsgLyogQ3JlYXRlIGFuIGV2ZW50IG9iaiBmb3IgdGhlIHBvbHlnb24gKi9cclxuICAgICAgICBpZiAoIXByb2Nlc3MpIHtcclxuICAgICAgICAgIC8qIERvIG5vdCBjcmVhdGUgcHJvY2VzcyBpZiBpdCdzIGFscmVhZHkgYXZhaWxhYmxlIGZyb20ganNvbiAqL1xyXG4gICAgICAgICAgdmFyIGN1cnJlbnRQcm9jZXNzID0gcHJvY2Vzc1N0b3JlLmdldEN1cnJlbnQoKTtcclxuICAgICAgICAgIGN1cnJlbnRQcm9jZXNzLmFkZChzaGFwZU9iamVjdC5wb2x5Z29uKTtcclxuICAgICAgICAgIGN1cnJlbnRQcm9jZXNzLm1vdmVUb1RvcCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvKiBpbml0aWF0aW5nIGN1c3RvbSB0cmFuc2Zvcm1lcnMgKi9cclxuICAgICAgICB2YXIgY3VzdG9tVHJhbnNmb3JtZXIgPSB0b29sc1ZQRmFjdG9yeS5jdXN0b21UcmFuc2Zvcm1lcihcclxuICAgICAgICAgIHN0YWdlLFxyXG4gICAgICAgICAgYmFzZUxheWVyLFxyXG4gICAgICAgICAgc2hhcGVPYmplY3QucG9seWdvbixcclxuICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjdXN0b21UcmFuc2Zvcm1lci5zZXQoc2hhcGVPYmplY3QucG9seWdvbi5wb2ludHMoKSk7XHJcbiAgICAgICAgdHJhbnNmb3JtZXJTdG9yZS5hZGQoY3VzdG9tVHJhbnNmb3JtZXIuZ2V0R3JvdXAoKSk7XHJcblxyXG4gICAgICAgIC8qIFxyXG4gICAgICAgICAgICBSZWdpc3RlcmluZyBhIGRyYWdtb3ZlIG1ldGhvZCB0byBiaW5kIGRyYWdtb3ZlIGFuZCBjbGljayBldmVudCB0byB0aGUgY3VzdG9tIHRyYW5zZm9ybWVyXHJcbiAgICAgICAgICAqL1xyXG4gICAgICAgIHBvbHlnb25FdmVudC5yZWdpc3RlcihcImRyYWdtb3ZlLnBvbHlnb25cIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgY3VzdG9tVHJhbnNmb3JtZXIudXBkYXRlKHtcclxuICAgICAgICAgICAgeDogc2hhcGVPYmplY3QucG9seWdvbi54KCksXHJcbiAgICAgICAgICAgIHk6IHNoYXBlT2JqZWN0LnBvbHlnb24ueSgpXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBwb2x5Z29uRXZlbnQucmVnaXN0ZXIoXCJjbGljay5wb2x5Z29uXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgIGN1c3RvbVRyYW5zZm9ybWVyLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgIHg6IHNoYXBlT2JqZWN0LnBvbHlnb24ueCgpLFxyXG4gICAgICAgICAgICB5OiBzaGFwZU9iamVjdC5wb2x5Z29uLnkoKVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qIFxyXG4gICAgICAgICAgICBEcmFnc3RhcnQgYW5kIGRyYWdlbmQgbW92ZW1lbnRzIGZvciB1bmRvL3JlZG8gc3RhdGVzXHJcbiAgICAgICAgICAqL1xyXG4gICAgICAgIHZhciBtb3ZlbWVudCA9IGNvbW1vblZQRmFjdG9yeS5tb3ZlbWVudCgpO1xyXG5cclxuICAgICAgICBwb2x5Z29uRXZlbnQucmVnaXN0ZXIoXCJkcmFnc3RhcnQucG9seWdvblwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICBtb3ZlbWVudC5hZGQoXHJcbiAgICAgICAgICAgIGUudGFyZ2V0LmdldFBvc2l0aW9uKClcclxuICAgICAgICAgICk7IC8qIEdyYWJiaW5nIHN0YXJ0IHBvc2l0aW9uIG9mIHRoZSBtb3ZlbWVudCAqL1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBvbHlnb25FdmVudC5yZWdpc3RlcihcImRyYWdlbmQucG9seWdvblwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAvKiBwdXNoaW5nIHRoZSBtb3ZlbWVudCB0byBhY3Rpb25TdGF0ZSBhZnRlciB0aGUgZW5kIHBvc2l0aW9uICovXHJcbiAgICAgICAgICBhY3Rpb25TdGF0ZXMucHVzaChcclxuICAgICAgICAgICAgY29tbW9uVlBGYWN0b3J5LmFjdGlvbkhhbmRsZXIoXHJcbiAgICAgICAgICAgICAgc3RhZ2UsXHJcbiAgICAgICAgICAgICAgc2hhcGVPYmplY3QucG9seWdvbixcclxuICAgICAgICAgICAgICBwcm9jZXNzU3RvcmUuZ2V0Q3VycmVudCgpLFxyXG4gICAgICAgICAgICAgIFwibW92ZVwiLFxyXG4gICAgICAgICAgICAgIG1vdmVtZW50LmFkZChlLnRhcmdldC5nZXRQb3NpdGlvbigpKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8qIFxyXG4gICAgICAgICAgICBSZWdpc3RlcmluZyBjdXN0b20gdHJhbnNmb3JtZXIgZXZlbnQgdG8gdGhlIGNyZWF0ZWQgcG9seWdvblxyXG4gICAgICAgICAgKi9cclxuICAgICAgICBwb2x5Z29uRXZlbnQucmVnaXN0ZXIoXCJ0cmFuc2Zvcm1Qb2x5Z29uXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIHNjYWxlID1cclxuICAgICAgICAgICAgY2FsaWJyYXRpb25TdGF0ZS5nZXQoKS52YWx1ZSA9PT0gMFxyXG4gICAgICAgICAgICAgID8gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgOiBjYWxpYnJhdGlvblN0YXRlLmdldCgpLnZhbHVlO1xyXG5cclxuICAgICAgICAgIG1ldHJpY3Muc2V0U2hhcGVJbmZvKHtcclxuICAgICAgICAgICAgYXJlYTogdG9vbHNWUEZhY3RvcnkucG9seWdvbkFyZWEoXHJcbiAgICAgICAgICAgICAgc2hhcGVPYmplY3QucG9seWdvbi5wb2ludHMoKSxcclxuICAgICAgICAgICAgICBzY2FsZVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICB1bml0OiBjYWxpYnJhdGlvblN0YXRlLmdldCgpLnVuaXRcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICRzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgdm0uc2hhcGVJbmZvID0gbWV0cmljcy5nZXRTaGFwZUluZm8oKTtcclxuXHJcbiAgICAgICAgICBzaGFwZU9iamVjdC5wb2x5Z29uLnBvaW50cyhjdXN0b21UcmFuc2Zvcm1lci5nZXRQb2ludHMoKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qIEVuYWJsZSB0cmFuc2Zvcm1lciBvbiBzZWxlY3QgKi9cclxuICAgICAgICBwb2x5Z29uRXZlbnQucmVnaXN0ZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHNoYXBlT2JqZWN0LnBvbHlnb24ubW92ZVRvVG9wKCk7XHJcbiAgICAgICAgICBiYXNlTGF5ZXIuZHJhdygpO1xyXG4gICAgICAgICAgc2VsZWN0ZWRTaGFwZS5zZXQoc2hhcGVPYmplY3QucG9seWdvbik7XHJcbiAgICAgICAgICB2bS5vcGVuSW5mb1dpZGdldCgpO1xyXG4gICAgICAgICAgdmFyIHNjYWxlID1cclxuICAgICAgICAgICAgY2FsaWJyYXRpb25TdGF0ZS5nZXQoKS52YWx1ZSA9PT0gMFxyXG4gICAgICAgICAgICAgID8gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgOiBjYWxpYnJhdGlvblN0YXRlLmdldCgpLnZhbHVlO1xyXG5cclxuICAgICAgICAgIG1ldHJpY3Muc2V0U2hhcGVJbmZvKHtcclxuICAgICAgICAgICAgYXJlYTogdG9vbHNWUEZhY3RvcnkucG9seWdvbkFyZWEoXHJcbiAgICAgICAgICAgICAgc2hhcGVPYmplY3QucG9seWdvbi5wb2ludHMoKSxcclxuICAgICAgICAgICAgICBzY2FsZVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICB1bml0OiBjYWxpYnJhdGlvblN0YXRlLmdldCgpLnVuaXRcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgJHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgICAgdm0uc2hhcGVJbmZvID0gbWV0cmljcy5nZXRTaGFwZUluZm8oKTtcclxuICAgICAgICAgIHZtLnNob3dQYW5lbCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgdHJhbnNmb3JtZXJTdG9yZS5yZW1vdmVBbGwoKTtcclxuICAgICAgICAgIGJhc2VMYXllci5hZGQoY3VzdG9tVHJhbnNmb3JtZXIuZ2V0R3JvdXAoKSk7XHJcbiAgICAgICAgICBiYXNlTGF5ZXIuZHJhdygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBmcmVlSGFuZEV2ZW50V3JhcHBlcihzaGFwZU9iamVjdCwgcHJvY2Vzcykge1xyXG4gICAgICAgIHZhciBmcmVlSGFuZEV2ZW50ID0gZXZlbnRzVlBGYWN0b3J5LnNoYXBlRXZlbnRzKFxyXG4gICAgICAgICAgc2hhcGVPYmplY3QucG9seWdvblxyXG4gICAgICAgICk7IC8qIENyZWF0ZSBhbiBldmVudCBvYmogZm9yIHRoZSBwb2x5Z29uICovXHJcbiAgICAgICAgaWYgKCFwcm9jZXNzKSB7XHJcbiAgICAgICAgICAvKiBEbyBub3QgY3JlYXRlIHByb2Nlc3MgaWYgaXQncyBhbHJlYWR5IGF2YWlsYWJsZSBmcm9tIGpzb24gKi9cclxuICAgICAgICAgIHZhciBjdXJyZW50UHJvY2VzcyA9IHByb2Nlc3NTdG9yZS5nZXRDdXJyZW50KCk7XHJcbiAgICAgICAgICBjdXJyZW50UHJvY2Vzcy5hZGQoc2hhcGVPYmplY3QucG9seWdvbik7XHJcbiAgICAgICAgICBjdXJyZW50UHJvY2Vzcy5tb3ZlVG9Ub3AoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLyogXHJcbiAgICAgICAgICAgIERyYWdzdGFydCBhbmQgZHJhZ2VuZCBtb3ZlbWVudHMgZm9yIHVuZG8vcmVkbyBzdGF0ZXNcclxuICAgICAgICAgICovXHJcbiAgICAgICAgdmFyIG1vdmVtZW50ID0gY29tbW9uVlBGYWN0b3J5Lm1vdmVtZW50KCk7XHJcblxyXG4gICAgICAgIGZyZWVIYW5kRXZlbnQucmVnaXN0ZXIoXCJkcmFnc3RhcnQucG9seWdvblwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICBtb3ZlbWVudC5hZGQoXHJcbiAgICAgICAgICAgIGUudGFyZ2V0LmdldFBvc2l0aW9uKClcclxuICAgICAgICAgICk7IC8qIEdyYWJiaW5nIHN0YXJ0IHBvc2l0aW9uIG9mIHRoZSBtb3ZlbWVudCAqL1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGZyZWVIYW5kRXZlbnQucmVnaXN0ZXIoXCJkcmFnZW5kLnBvbHlnb25cIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgLyogcHVzaGluZyB0aGUgbW92ZW1lbnQgdG8gYWN0aW9uU3RhdGUgYWZ0ZXIgdGhlIGVuZCBwb3NpdGlvbiAqL1xyXG4gICAgICAgICAgYWN0aW9uU3RhdGVzLnB1c2goXHJcbiAgICAgICAgICAgIGNvbW1vblZQRmFjdG9yeS5hY3Rpb25IYW5kbGVyKFxyXG4gICAgICAgICAgICAgIHN0YWdlLFxyXG4gICAgICAgICAgICAgIHNoYXBlT2JqZWN0LnBvbHlnb24sXHJcbiAgICAgICAgICAgICAgcHJvY2Vzc1N0b3JlLmdldEN1cnJlbnQoKSxcclxuICAgICAgICAgICAgICBcIm1vdmVcIixcclxuICAgICAgICAgICAgICBtb3ZlbWVudC5hZGQoZS50YXJnZXQuZ2V0UG9zaXRpb24oKSlcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyogRW5hYmxlIHRyYW5zZm9ybWVyIG9uIHNlbGVjdCAqL1xyXG4gICAgICAgIGZyZWVIYW5kRXZlbnQucmVnaXN0ZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHNoYXBlT2JqZWN0LnBvbHlnb24ubW92ZVRvVG9wKCk7XHJcbiAgICAgICAgICBiYXNlTGF5ZXIuZHJhdygpO1xyXG4gICAgICAgICAgc2VsZWN0ZWRTaGFwZS5zZXQoc2hhcGVPYmplY3QucG9seWdvbik7XHJcbiAgICAgICAgICB2bS5vcGVuSW5mb1dpZGdldCgpO1xyXG4gICAgICAgICAgdmFyIHNjYWxlID1cclxuICAgICAgICAgICAgY2FsaWJyYXRpb25TdGF0ZS5nZXQoKS52YWx1ZSA9PT0gMFxyXG4gICAgICAgICAgICAgID8gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgOiBjYWxpYnJhdGlvblN0YXRlLmdldCgpLnZhbHVlO1xyXG4gICAgICAgICAgbWV0cmljcy5zZXRTaGFwZUluZm8oe1xyXG4gICAgICAgICAgICBhcmVhOiB0b29sc1ZQRmFjdG9yeS5wb2x5Z29uQXJlYShcclxuICAgICAgICAgICAgICBzaGFwZU9iamVjdC5wb2x5Z29uLnBvaW50cygpLFxyXG4gICAgICAgICAgICAgIHNjYWxlXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIHVuaXQ6IGNhbGlicmF0aW9uU3RhdGUuZ2V0KCkudW5pdFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICB2bS5zaGFwZUluZm8gPSBtZXRyaWNzLmdldFNoYXBlSW5mbygpO1xyXG4gICAgICAgICAgdm0uc2hvd1BhbmVsID0gdHJ1ZTtcclxuICAgICAgICAgIHRyYW5zZm9ybWVyU3RvcmUucmVtb3ZlQWxsKCk7XHJcbiAgICAgICAgICBiYXNlTGF5ZXIuZHJhdygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBsaW5lRXZlbnRXcmFwcGVyKHNoYXBlT2JqZWN0LCBwcm9jZXNzKSB7XHJcbiAgICAgICAgdmFyIGxpbmVFdmVudCA9IGV2ZW50c1ZQRmFjdG9yeS5zaGFwZUV2ZW50cyhzaGFwZU9iamVjdC5saW5lKTtcclxuXHJcbiAgICAgICAgaWYgKCFwcm9jZXNzKSB7XHJcbiAgICAgICAgICAvKiBEbyBub3QgY3JlYXRlIHByb2Nlc3MgaWYgaXQncyBhbHJlYWR5IGF2YWlsYWJsZSBmcm9tIGpzb24gKi9cclxuICAgICAgICAgIHZhciBjdXJyZW50UHJvY2VzcyA9IHByb2Nlc3NTdG9yZS5nZXRDdXJyZW50KCk7XHJcbiAgICAgICAgICBjdXJyZW50UHJvY2Vzcy5hZGQoc2hhcGVPYmplY3QubGluZSk7XHJcbiAgICAgICAgICBjdXJyZW50UHJvY2Vzcy5tb3ZlVG9Ub3AoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLyogXHJcbiAgICAgICAgICAgIERyYWdzdGFydCBhbmQgZHJhZ2VuZCBtb3ZlbWVudHMgZm9yIHVuZG8vcmVkbyBzdGF0ZXNcclxuICAgICAgICAgICovXHJcbiAgICAgICAgdmFyIG1vdmVtZW50ID0gY29tbW9uVlBGYWN0b3J5Lm1vdmVtZW50KCk7XHJcblxyXG4gICAgICAgIGxpbmVFdmVudC5yZWdpc3RlcihcImRyYWdzdGFydC5saW5lXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgIG1vdmVtZW50LmFkZChcclxuICAgICAgICAgICAgZS50YXJnZXQuZ2V0UG9zaXRpb24oKVxyXG4gICAgICAgICAgKTsgLyogR3JhYmJpbmcgc3RhcnQgcG9zaXRpb24gb2YgdGhlIG1vdmVtZW50ICovXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbGluZUV2ZW50LnJlZ2lzdGVyKFwiZHJhZ2VuZC5saW5lXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgIC8qIHB1c2hpbmcgdGhlIG1vdmVtZW50IHRvIGFjdGlvblN0YXRlIGFmdGVyIHRoZSBlbmQgcG9zaXRpb24gKi9cclxuICAgICAgICAgIGFjdGlvblN0YXRlcy5wdXNoKFxyXG4gICAgICAgICAgICBjb21tb25WUEZhY3RvcnkuYWN0aW9uSGFuZGxlcihcclxuICAgICAgICAgICAgICBzdGFnZSxcclxuICAgICAgICAgICAgICBzaGFwZU9iamVjdC5saW5lLFxyXG4gICAgICAgICAgICAgIHByb2Nlc3NTdG9yZS5nZXRDdXJyZW50KCksXHJcbiAgICAgICAgICAgICAgXCJtb3ZlXCIsXHJcbiAgICAgICAgICAgICAgbW92ZW1lbnQuYWRkKGUudGFyZ2V0LmdldFBvc2l0aW9uKCkpXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qIEVuYWJsZSB0cmFuc2Zvcm1lciBvbiBzZWxlY3QgKi9cclxuICAgICAgICBsaW5lRXZlbnQucmVnaXN0ZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHNoYXBlT2JqZWN0LmxpbmUubW92ZVRvVG9wKCk7XHJcbiAgICAgICAgICBzZWxlY3RlZFNoYXBlLnNldChzaGFwZU9iamVjdC5saW5lKTtcclxuICAgICAgICAgIHZtLm9wZW5JbmZvV2lkZ2V0KCk7XHJcbiAgICAgICAgICAvL3ZtLnNob3dQYW5lbCA9IHRydWU7XHJcbiAgICAgICAgICB0cmFuc2Zvcm1lclN0b3JlLnJlbW92ZUFsbCgpO1xyXG4gICAgICAgICAgYmFzZUxheWVyLmRyYXcoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gZnJlZUhhbmRNYXJrZXJXcmFwcGVyKHNoYXBlT2JqZWN0LCBwcm9jZXNzKSB7XHJcbiAgICAgICAgdmFyIGZyZWVIYW5kRXZlbnQgPSBldmVudHNWUEZhY3Rvcnkuc2hhcGVFdmVudHMoXHJcbiAgICAgICAgICBzaGFwZU9iamVjdC5wb2x5Z29uXHJcbiAgICAgICAgKTsgLyogQ3JlYXRlIGFuIGV2ZW50IG9iaiBmb3IgdGhlIHBvbHlnb24gKi9cclxuICAgICAgICBpZiAoIXByb2Nlc3MpIHtcclxuICAgICAgICAgIC8qIERvIG5vdCBjcmVhdGUgcHJvY2VzcyBpZiBpdCdzIGFscmVhZHkgYXZhaWxhYmxlIGZyb20ganNvbiAqL1xyXG4gICAgICAgICAgdmFyIGN1cnJlbnRQcm9jZXNzID0gcHJvY2Vzc1N0b3JlLmdldEN1cnJlbnQoKTtcclxuICAgICAgICAgIGN1cnJlbnRQcm9jZXNzLmFkZChzaGFwZU9iamVjdC5wb2x5Z29uKTtcclxuICAgICAgICAgIGN1cnJlbnRQcm9jZXNzLm1vdmVUb1RvcCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvKiBcclxuICAgICAgICAgICAgRHJhZ3N0YXJ0IGFuZCBkcmFnZW5kIG1vdmVtZW50cyBmb3IgdW5kby9yZWRvIHN0YXRlc1xyXG4gICAgICAgICAgKi9cclxuICAgICAgICB2YXIgbW92ZW1lbnQgPSBjb21tb25WUEZhY3RvcnkubW92ZW1lbnQoKTtcclxuXHJcbiAgICAgICAgZnJlZUhhbmRFdmVudC5yZWdpc3RlcihcImRyYWdzdGFydC5mcmVlSGFuZE1hcmtlclwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICBtb3ZlbWVudC5hZGQoXHJcbiAgICAgICAgICAgIGUudGFyZ2V0LmdldFBvc2l0aW9uKClcclxuICAgICAgICAgICk7IC8qIEdyYWJiaW5nIHN0YXJ0IHBvc2l0aW9uIG9mIHRoZSBtb3ZlbWVudCAqL1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGZyZWVIYW5kRXZlbnQucmVnaXN0ZXIoXCJkcmFnZW5kLmZyZWVIYW5kTWFya2VyXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgIC8qIHB1c2hpbmcgdGhlIG1vdmVtZW50IHRvIGFjdGlvblN0YXRlIGFmdGVyIHRoZSBlbmQgcG9zaXRpb24gKi9cclxuICAgICAgICAgIGFjdGlvblN0YXRlcy5wdXNoKFxyXG4gICAgICAgICAgICBjb21tb25WUEZhY3RvcnkuYWN0aW9uSGFuZGxlcihcclxuICAgICAgICAgICAgICBzdGFnZSxcclxuICAgICAgICAgICAgICBzaGFwZU9iamVjdC5wb2x5Z29uLFxyXG4gICAgICAgICAgICAgIHByb2Nlc3NTdG9yZS5nZXRDdXJyZW50KCksXHJcbiAgICAgICAgICAgICAgXCJtb3ZlXCIsXHJcbiAgICAgICAgICAgICAgbW92ZW1lbnQuYWRkKGUudGFyZ2V0LmdldFBvc2l0aW9uKCkpXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qIEVuYWJsZSB0cmFuc2Zvcm1lciBvbiBzZWxlY3QgKi9cclxuICAgICAgICBmcmVlSGFuZEV2ZW50LnJlZ2lzdGVyKFwiY2xpY2suZnJlZUhhbmRNYXJrZXJcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBzaGFwZU9iamVjdC5wb2x5Z29uLm1vdmVUb1RvcCgpO1xyXG4gICAgICAgICAgYmFzZUxheWVyLmRyYXcoKTtcclxuXHJcbiAgICAgICAgICBzZWxlY3RlZFNoYXBlLnNldChzaGFwZU9iamVjdC5wb2x5Z29uKTtcclxuICAgICAgICAgIHZtLm9wZW5JbmZvV2lkZ2V0KCk7XHJcblxyXG4gICAgICAgICAgdHJhbnNmb3JtZXJTdG9yZS5yZW1vdmVBbGwoKTtcclxuICAgICAgICAgIGJhc2VMYXllci5kcmF3KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIGJlemllckV2ZW50V3JhcHBlcihzaGFwZU9iamVjdCwgcHJvY2Vzcykge1xyXG4gICAgICAgIHZhciBiZXppZXJFdmVudCA9IGV2ZW50c1ZQRmFjdG9yeS5zaGFwZUV2ZW50cyhcclxuICAgICAgICAgIHNoYXBlT2JqZWN0LmxpbmVcclxuICAgICAgICApOyAvKiBDcmVhdGUgYW4gZXZlbnQgb2JqIGZvciB0aGUgcG9seWdvbiAqL1xyXG4gICAgICAgIGlmICghcHJvY2Vzcykge1xyXG4gICAgICAgICAgLyogRG8gbm90IGNyZWF0ZSBwcm9jZXNzIGlmIGl0J3MgYWxyZWFkeSBhdmFpbGFibGUgZnJvbSBqc29uICovXHJcbiAgICAgICAgICB2YXIgY3VycmVudFByb2Nlc3MgPSBwcm9jZXNzU3RvcmUuZ2V0Q3VycmVudCgpO1xyXG4gICAgICAgICAgY3VycmVudFByb2Nlc3MuYWRkKHNoYXBlT2JqZWN0LmxpbmUpO1xyXG4gICAgICAgICAgY3VycmVudFByb2Nlc3MubW92ZVRvVG9wKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qIGluaXRpYXRpbmcgY3VzdG9tIHRyYW5zZm9ybWVycyAqL1xyXG4gICAgICAgIHZhciBiZXppZXJUcmFuc2Zvcm1lciA9IHRvb2xzVlBGYWN0b3J5LmJlemllclRyYW5zZm9ybWVyKFxyXG4gICAgICAgICAgc3RhZ2UsXHJcbiAgICAgICAgICBiYXNlTGF5ZXIsXHJcbiAgICAgICAgICBzaGFwZU9iamVjdC5saW5lXHJcbiAgICAgICAgKTtcclxuICAgICAgICBiZXppZXJUcmFuc2Zvcm1lci5zZXQoc2hhcGVPYmplY3QubGluZS5wb2ludHMoKSk7XHJcbiAgICAgICAgdHJhbnNmb3JtZXJTdG9yZS5hZGQoYmV6aWVyVHJhbnNmb3JtZXIuZ2V0R3JvdXAoKSk7XHJcblxyXG4gICAgICAgIC8qIFxyXG4gICAgICAgICAgICBSZWdpc3RlcmluZyBhIGRyYWdtb3ZlIG1ldGhvZCB0byBiaW5kIGRyYWdtb3ZlIGFuZCBjbGljayBldmVudCB0byB0aGUgY3VzdG9tIHRyYW5zZm9ybWVyXHJcbiAgICAgICAgICAqL1xyXG4gICAgICAgIGJlemllckV2ZW50LnJlZ2lzdGVyKFwiZHJhZ21vdmUucG9seWdvblwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICBiZXppZXJUcmFuc2Zvcm1lci51cGRhdGUoe1xyXG4gICAgICAgICAgICB4OiBzaGFwZU9iamVjdC5saW5lLngoKSxcclxuICAgICAgICAgICAgeTogc2hhcGVPYmplY3QubGluZS55KClcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGJlemllckV2ZW50LnJlZ2lzdGVyKFwiY2xpY2sucG9seWdvblwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICBiZXppZXJUcmFuc2Zvcm1lci51cGRhdGUoe1xyXG4gICAgICAgICAgICB4OiBzaGFwZU9iamVjdC5saW5lLngoKSxcclxuICAgICAgICAgICAgeTogc2hhcGVPYmplY3QubGluZS55KClcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKiBcclxuICAgICAgICAgICAgRHJhZ3N0YXJ0IGFuZCBkcmFnZW5kIG1vdmVtZW50cyBmb3IgdW5kby9yZWRvIHN0YXRlc1xyXG4gICAgICAgICAgKi9cclxuICAgICAgICB2YXIgbW92ZW1lbnQgPSBjb21tb25WUEZhY3RvcnkubW92ZW1lbnQoKTtcclxuXHJcbiAgICAgICAgYmV6aWVyRXZlbnQucmVnaXN0ZXIoXCJkcmFnc3RhcnQucG9seWdvblwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICBtb3ZlbWVudC5hZGQoXHJcbiAgICAgICAgICAgIGUudGFyZ2V0LmdldFBvc2l0aW9uKClcclxuICAgICAgICAgICk7IC8qIEdyYWJiaW5nIHN0YXJ0IHBvc2l0aW9uIG9mIHRoZSBtb3ZlbWVudCAqL1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGJlemllckV2ZW50LnJlZ2lzdGVyKFwiZHJhZ2VuZC5wb2x5Z29uXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgIC8qIHB1c2hpbmcgdGhlIG1vdmVtZW50IHRvIGFjdGlvblN0YXRlIGFmdGVyIHRoZSBlbmQgcG9zaXRpb24gKi9cclxuICAgICAgICAgIGFjdGlvblN0YXRlcy5wdXNoKFxyXG4gICAgICAgICAgICBjb21tb25WUEZhY3RvcnkuYWN0aW9uSGFuZGxlcihcclxuICAgICAgICAgICAgICBzdGFnZSxcclxuICAgICAgICAgICAgICBzaGFwZU9iamVjdC5saW5lLFxyXG4gICAgICAgICAgICAgIHByb2Nlc3NTdG9yZS5nZXRDdXJyZW50KCksXHJcbiAgICAgICAgICAgICAgXCJtb3ZlXCIsXHJcbiAgICAgICAgICAgICAgbW92ZW1lbnQuYWRkKGUudGFyZ2V0LmdldFBvc2l0aW9uKCkpXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLyogXHJcbiAgICAgICAgICAgIFJlZ2lzdGVyaW5nIGN1c3RvbSB0cmFuc2Zvcm1lciBldmVudCB0byB0aGUgY3JlYXRlZCBwb2x5Z29uXHJcbiAgICAgICAgICAqL1xyXG4gICAgICAgIGJlemllckV2ZW50LnJlZ2lzdGVyKFwidHJhbnNmb3JtQmV6aWVyXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2hhcGVPYmplY3QubGluZS5wb2ludHMoYmV6aWVyVHJhbnNmb3JtZXIuZ2V0UG9pbnRzKCkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKiBFbmFibGUgdHJhbnNmb3JtZXIgb24gc2VsZWN0ICovXHJcbiAgICAgICAgYmV6aWVyRXZlbnQucmVnaXN0ZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHNoYXBlT2JqZWN0LmxpbmUubW92ZVRvVG9wKCk7XHJcbiAgICAgICAgICBiYXNlTGF5ZXIuZHJhdygpO1xyXG4gICAgICAgICAgc2VsZWN0ZWRTaGFwZS5zZXQoc2hhcGVPYmplY3QubGluZSk7XHJcbiAgICAgICAgICB2bS5vcGVuSW5mb1dpZGdldCgpO1xyXG4gICAgICAgICAgdmFyIHNjYWxlID1cclxuICAgICAgICAgICAgY2FsaWJyYXRpb25TdGF0ZS5nZXQoKS52YWx1ZSA9PT0gMFxyXG4gICAgICAgICAgICAgID8gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgOiBjYWxpYnJhdGlvblN0YXRlLmdldCgpLnZhbHVlO1xyXG5cclxuICAgICAgICAgIG1ldHJpY3Muc2V0U2hhcGVJbmZvKHtcclxuICAgICAgICAgICAgYXJlYTogdG9vbHNWUEZhY3RvcnkucG9seWdvbkFyZWEoc2hhcGVPYmplY3QubGluZS5wb2ludHMoKSwgc2NhbGUpLFxyXG4gICAgICAgICAgICB1bml0OiBjYWxpYnJhdGlvblN0YXRlLmdldCgpLnVuaXRcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgdm0uc2hhcGVJbmZvID0gbWV0cmljcy5nZXRTaGFwZUluZm8oKTtcclxuICAgICAgICAgIHZtLnNob3dQYW5lbCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgdHJhbnNmb3JtZXJTdG9yZS5yZW1vdmVBbGwoKTtcclxuICAgICAgICAgIGJhc2VMYXllci5hZGQoYmV6aWVyVHJhbnNmb3JtZXIuZ2V0R3JvdXAoKSk7XHJcbiAgICAgICAgICBiYXNlTGF5ZXIuZHJhdygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiB0ZXh0RXZlbnRXcmFwcGVyKGdyb3VwLCBwcm9jZXNzKSB7XHJcbiAgICAgICAgdmFyIHRleHRFdmVudCA9IGV2ZW50c1ZQRmFjdG9yeS5zaGFwZUV2ZW50cyhcclxuICAgICAgICAgIGdyb3VwXHJcbiAgICAgICAgKTsgLyogQ3JlYXRlIGFuIGV2ZW50IG9iaiBmb3IgdGhlIHNoYXBlICovXHJcbiAgICAgICAgaWYgKCFwcm9jZXNzKSB7XHJcbiAgICAgICAgICAvKiBEbyBub3QgY3JlYXRlIHByb2Nlc3MgaWYgaXQncyBhbHJlYWR5IGF2YWlsYWJsZSBmcm9tIGpzb24gKi9cclxuICAgICAgICAgIHZhciBjdXJyZW50UHJvY2VzcyA9IHByb2Nlc3NTdG9yZS5nZXRDdXJyZW50KCk7XHJcbiAgICAgICAgICBjdXJyZW50UHJvY2Vzcy5hZGQoZ3JvdXApO1xyXG4gICAgICAgICAgY3VycmVudFByb2Nlc3MubW92ZVRvVG9wKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBpbml0aWF0aW5nIGN1c3RvbSB0cmFuc2Zvcm1lcnMgKi9cclxuICAgICAgICB2YXIgY3VzdG9tVHJhbnNmb3JtZXIgPSB0b29sc1ZQRmFjdG9yeS5jdXN0b21UcmFuc2Zvcm1lcihcclxuICAgICAgICAgIHN0YWdlLFxyXG4gICAgICAgICAgYmFzZUxheWVyLFxyXG4gICAgICAgICAgZ3JvdXAsXHJcbiAgICAgICAgICB0cnVlXHJcbiAgICAgICAgKTtcclxuICAgICAgICB2YXIgd3JhcHBlciA9IGdyb3VwLmdldENoaWxkcmVuKClbMF07XHJcbiAgICAgICAgdmFyIHRleHQgPSBncm91cC5nZXRDaGlsZHJlbigpWzFdO1xyXG5cclxuICAgICAgICBjdXN0b21UcmFuc2Zvcm1lci5zZXQod3JhcHBlci5wb2ludHMoKSk7XHJcbiAgICAgICAgdHJhbnNmb3JtZXJTdG9yZS5hZGQoY3VzdG9tVHJhbnNmb3JtZXIuZ2V0R3JvdXAoKSk7XHJcblxyXG4gICAgICAgIC8qIFxyXG4gICAgICAgICAgICBSZWdpc3RlcmluZyBhIGRyYWdtb3ZlIG1ldGhvZCB0byBiaW5kIGRyYWdtb3ZlIGFuZCBjbGljayBldmVudCB0byB0aGUgY3VzdG9tIHRyYW5zZm9ybWVyXHJcbiAgICAgICAgICAqL1xyXG4gICAgICAgIHRleHRFdmVudC5yZWdpc3RlcihcImRyYWdtb3ZlLnRleHRHcm91cFwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICBjdXN0b21UcmFuc2Zvcm1lci51cGRhdGUoe1xyXG4gICAgICAgICAgICB4OiBncm91cC54KCksXHJcbiAgICAgICAgICAgIHk6IGdyb3VwLnkoKVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qIFxyXG4gICAgICAgICAgICBSZWdpc3RlcmluZyBjdXN0b20gdHJhbnNmb3JtZXIgZXZlbnQgdG8gdGhlIGNyZWF0ZWQgcG9seWdvblxyXG4gICAgICAgICAgKi9cclxuICAgICAgICB0ZXh0RXZlbnQucmVnaXN0ZXIoXCJ0cmFuc2Zvcm1Qb2x5Z29uXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgd3JhcHBlci5wb2ludHMoY3VzdG9tVHJhbnNmb3JtZXIuZ2V0UG9pbnRzKCkpO1xyXG5cclxuICAgICAgICAgIHZhciB1cGRhdGVkUG9pbnRzID0gd3JhcHBlci5wb2ludHMoKTtcclxuXHJcbiAgICAgICAgICB0ZXh0LndpZHRoKE1hdGguYWJzKHVwZGF0ZWRQb2ludHNbMF0gLSB1cGRhdGVkUG9pbnRzWzJdKSAtIDEwKTtcclxuICAgICAgICAgIHRleHQucG9zaXRpb24oe1xyXG4gICAgICAgICAgICB4OiB1cGRhdGVkUG9pbnRzWzBdICsgNSxcclxuICAgICAgICAgICAgeTogdXBkYXRlZFBvaW50c1sxXSArIDVcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgYmFzZUxheWVyLmRyYXcoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyogRW5hYmxlIHRyYW5zZm9ybWVyIG9uIHNlbGVjdCAqL1xyXG4gICAgICAgIHRleHRFdmVudC5yZWdpc3RlcihcImNsaWNrLnRleHRHcm91cFwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGdyb3VwLm1vdmVUb1RvcCgpO1xyXG4gICAgICAgICAgc2VsZWN0ZWRTaGFwZS5zZXQodGV4dCk7XHJcbiAgICAgICAgICBiYXNlTGF5ZXIuZHJhdygpO1xyXG4gICAgICAgICAgY3VzdG9tVHJhbnNmb3JtZXIudXBkYXRlKHtcclxuICAgICAgICAgICAgeDogZ3JvdXAueCgpLFxyXG4gICAgICAgICAgICB5OiBncm91cC55KClcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuJGFwcGx5KCk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICB0cmFuc2Zvcm1lclN0b3JlLnJlbW92ZUFsbCgpO1xyXG4gICAgICAgICAgYmFzZUxheWVyLmFkZChjdXN0b21UcmFuc2Zvcm1lci5nZXRHcm91cCgpKTtcclxuICAgICAgICAgIHdyYXBwZXIuc3Ryb2tlKFwiZ3JleVwiKTtcclxuICAgICAgICAgIGJhc2VMYXllci5kcmF3KCk7XHJcbiAgICAgICAgICB2bS5vcGVuVGV4dEluZm9XaWRnZXQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyogIFxyXG4gICAgICAgICAgICBEcmFnc3RhcnQgYW5kIGRyYWdlbmQgbW92ZW1lbnRzIGZvciB1bmRvL3JlZG8gc3RhdGVzXHJcbiAgICAgICAgICAqL1xyXG4gICAgICAgIHZhciBtb3ZlbWVudCA9IGNvbW1vblZQRmFjdG9yeS5tb3ZlbWVudCgpO1xyXG5cclxuICAgICAgICB0ZXh0RXZlbnQucmVnaXN0ZXIoXCJkcmFnc3RhcnQudGV4dEdyb3VwXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgIG1vdmVtZW50LmFkZChcclxuICAgICAgICAgICAgZS50YXJnZXQuZ2V0UG9zaXRpb24oKVxyXG4gICAgICAgICAgKTsgLyogR3JhYmJpbmcgc3RhcnQgcG9zaXRpb24gb2YgdGhlIG1vdmVtZW50ICovXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGV4dEV2ZW50LnJlZ2lzdGVyKFwiZHJhZ2VuZC50ZXh0R3JvdXBcIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgLyogcHVzaGluZyB0aGUgbW92ZW1lbnQgdG8gYWN0aW9uU3RhdGUgYWZ0ZXIgdGhlIGVuZCBwb3NpdGlvbiAqL1xyXG4gICAgICAgICAgYWN0aW9uU3RhdGVzLnB1c2goXHJcbiAgICAgICAgICAgIGNvbW1vblZQRmFjdG9yeS5hY3Rpb25IYW5kbGVyKFxyXG4gICAgICAgICAgICAgIHN0YWdlLFxyXG4gICAgICAgICAgICAgIGdyb3VwLFxyXG4gICAgICAgICAgICAgIHByb2Nlc3NTdG9yZS5nZXRDdXJyZW50KCksXHJcbiAgICAgICAgICAgICAgXCJtb3ZlXCIsXHJcbiAgICAgICAgICAgICAgbW92ZW1lbnQuYWRkKGUudGFyZ2V0LmdldFBvc2l0aW9uKCkpXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8qIEF0dGFjaCBldmVudHMgd2hlbiBzaGFwZXMgYXJlIGxvYWRlZCBmcm9tIGpzb24gKi9cclxuICAgICAgKGZ1bmN0aW9uKGxvYWRUeXBlKSB7XHJcbiAgICAgICAgaWYgKGxvYWRUeXBlKSB7XHJcbiAgICAgICAgICAvKiBTZWFyY2ggZm9yIGdyb3VwcyB3aXRoIHRoZSBuYW1lIHByb2Nlc3MgYW5kIGZldGNoIHRoZSBzaGFwZXMgKi9cclxuICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChiYXNlTGF5ZXIuZ2V0Q2hpbGRyZW4oKSwgZnVuY3Rpb24oeCkge1xyXG4gICAgICAgICAgICBpZiAoL3Byb2Nlc3MqLy50ZXN0KHgubmFtZSgpKSkge1xyXG4gICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh4LmdldENoaWxkcmVuKCksIGZ1bmN0aW9uKGNoaWxkKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBGb3IgY2lyY2xlIGFuZCBlbGxpcHNlICovXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkLmNsYXNzTmFtZSA9PT0gXCJFbGxpcHNlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgZWxsaXBzZUV2ZW50V3JhcHBlcihcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBzaGFwZTogY2hpbGRcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIFwiZWxsaXBzZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHRydWVcclxuICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIC8qIEZvciBsaW5lcyBhbmQgcG9seWdvbnMgKi9cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICAgICAgICAgIGNoaWxkLmNsYXNzTmFtZSA9PT0gXCJMaW5lXCIgfHxcclxuICAgICAgICAgICAgICAgICAgY2hpbGQuY2xhc3NOYW1lID09PSBcIkFycm93XCJcclxuICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAvKiBDaGVjayBpZiBnaXZlbiBzaGFwZSBpcyBhIHJlY3RhbmdsZSBvciBhIHBvbHlnb24gKi9cclxuICAgICAgICAgICAgICAgICAgdmFyIHNoYXBlTmFtZSA9IGNoaWxkLm5hbWUoKTtcclxuICAgICAgICAgICAgICAgICAgaWYgKC9SZWN0Ki8udGVzdChzaGFwZU5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVjdGFuZ2xlRXZlbnRXcmFwcGVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFwZTogY2hpbGRcclxuICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICBcInJlY3RhbmdsZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoL3BvbHlnb24qLy50ZXN0KHNoYXBlTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBwb2x5Z29uRXZlbnRXcmFwcGVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2x5Z29uOiBjaGlsZFxyXG4gICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgIHRydWVcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKC9saW5lKi8udGVzdChzaGFwZU5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZUV2ZW50V3JhcHBlcihcclxuICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZTogY2hpbGRcclxuICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvZnJlZUhhbmQqLy50ZXN0KHNoYXBlTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBmcmVlSGFuZEV2ZW50V3JhcHBlcihcclxuICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9seWdvbjogY2hpbGRcclxuICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvbWFya2VyRnJlZUhhbmQqLy50ZXN0KHNoYXBlTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBmcmVlSGFuZE1hcmtlcldyYXBwZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvbHlnb246IGNoaWxkXHJcbiAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgIC8qIEZvciB0ZXh0ICovXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKC90ZXh0R3JvdXAqLy50ZXN0KGNoaWxkLm5hbWUoKSkpIHtcclxuICAgICAgICAgICAgICAgICAgdGV4dEV2ZW50V3JhcHBlcihjaGlsZCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIHRyYW5zZm9ybWVyU3RvcmUucmVtb3ZlQWxsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfSkobG9hZEZyb21Kc29uKTtcclxuXHJcbiAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIFxyXG4gICAgICAgICAgRW5kIG9mIGV2ZW50c1xyXG4gICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogXHJcbiAgICAgICAgICBWaWV3IGZ1bmN0aW9uc1xyXG4gICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgLyogRnVuY3Rpb24gdG8gZHJhdyByZWN0YW5nbGUvc3F1YXJlICovXHJcbiAgICAgIHZtLnJlY3RhbmdsZSA9IGZ1bmN0aW9uKHNxdWFyZSkge1xyXG4gICAgICAgIHZhciBzaGFwZVR5cGUgPSBzcXVhcmUgPyBcInNxdWFyZVwiIDogXCJyZWN0YW5nbGVcIjtcclxuICAgICAgICBkcmF3U3RhdGUuc2V0KFwic2hhcGVzLlwiICsgc2hhcGVUeXBlKTtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9IFwiY3Jvc3NoYWlyXCI7XHJcbiAgICAgICAgY29uc29sZS5sb2codm0uY3VycmVudERyYXdTdGF0ZS5zaGFwZXMuc3F1YXJlKTtcclxuICAgICAgICAvKiBFdmVudCBjb25maWd1cmF0aW9uICovXHJcbiAgICAgICAgYmFzZUxheWVyRXZlbnQucmVnaXN0ZXIoXCJjbGljay5cIiArIHNoYXBlVHlwZSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAoZHJhd1N0YXRlLmNoZWNrKFwic2hhcGVzLlwiICsgc2hhcGVUeXBlKSkge1xyXG4gICAgICAgICAgICB2YXIgc2hhcGVPYmplY3QgPSBzaGFwZXNWUEZhY3RvcnkuY3JlYXRlU2hhcGUoXHJcbiAgICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgICBjb21tb25WUEZhY3RvcnkuZHJhZ09mZnNldChcclxuICAgICAgICAgICAgICAgIHN0YWdlLmdldFBvaW50ZXJQb3NpdGlvbigpLFxyXG4gICAgICAgICAgICAgICAgYmFzZUxheWVyLmdldFBvc2l0aW9uKCksXHJcbiAgICAgICAgICAgICAgICBiYXNlTGF5ZXIuc2NhbGUoKVxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzaGFwZU9iamVjdC5zdGFydCkge1xyXG4gICAgICAgICAgICAgIGJhc2VMYXllci5hZGQoc2hhcGVPYmplY3Quc2hhcGUpO1xyXG4gICAgICAgICAgICAgIC8qIEFkZGluZyBhY3Rpb24gaGFuZGxlcnMgZm9yIHVuZG8gcmVkbyAqL1xyXG5cclxuICAgICAgICAgICAgICBhY3Rpb25TdGF0ZXMucHVzaChcclxuICAgICAgICAgICAgICAgIGNvbW1vblZQRmFjdG9yeS5hY3Rpb25IYW5kbGVyKFxyXG4gICAgICAgICAgICAgICAgICBzdGFnZSxcclxuICAgICAgICAgICAgICAgICAgc2hhcGVPYmplY3Quc2hhcGUsXHJcbiAgICAgICAgICAgICAgICAgIHByb2Nlc3NTdG9yZS5nZXRDdXJyZW50KCksXHJcbiAgICAgICAgICAgICAgICAgIFwiY3JlYXRlXCJcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgIGJhc2VMYXllci5kcmF3KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgLyogQWRkIHJlY3RhbmdsZSB0cmFuc2Zvcm1lcnMgKi9cclxuICAgICAgICAgICAgICByZWN0YW5nbGVFdmVudFdyYXBwZXIoc2hhcGVPYmplY3QsIHNoYXBlVHlwZSk7XHJcblxyXG4gICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gXCJkZWZhdWx0XCI7XHJcbiAgICAgICAgICAgICAgZHJhd1N0YXRlLnJlc2V0KCk7XHJcbiAgICAgICAgICAgICAgc2hhcGVzVlBGYWN0b3J5LmRlc3Ryb3lTaGFwZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYmFzZUxheWVyRXZlbnQucmVnaXN0ZXIoXCJtb3VzZW1vdmUuXCIgKyBzaGFwZVR5cGUsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKGRyYXdTdGF0ZS5jaGVjayhcInNoYXBlcy5cIiArIHNoYXBlVHlwZSkpIHtcclxuICAgICAgICAgICAgc2hhcGVzVlBGYWN0b3J5LmRyYXdTaGFwZShcclxuICAgICAgICAgICAgICBjb21tb25WUEZhY3RvcnkuZHJhZ09mZnNldChcclxuICAgICAgICAgICAgICAgIHN0YWdlLmdldFBvaW50ZXJQb3NpdGlvbigpLFxyXG4gICAgICAgICAgICAgICAgYmFzZUxheWVyLmdldFBvc2l0aW9uKCksXHJcbiAgICAgICAgICAgICAgICBiYXNlTGF5ZXIuc2NhbGUoKVxyXG4gICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgc3F1YXJlXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGJhc2VMYXllci5kcmF3KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvKiBGdW5jdGlvbiB0byBkcmF3IGVsbGlwc2UvY2lyY2xlICovXHJcbiAgICAgIHZtLmVsbGlwc2UgPSBmdW5jdGlvbihjaXJjbGUpIHtcclxuICAgICAgICB2YXIgc2hhcGVUeXBlID0gY2lyY2xlID8gXCJjaXJjbGVcIiA6IFwiZWxsaXBzZVwiO1xyXG4gICAgICAgIGRyYXdTdGF0ZS5zZXQoXCJzaGFwZXMuXCIgKyBzaGFwZVR5cGUpO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gXCJjcm9zc2hhaXJcIjtcclxuXHJcbiAgICAgICAgLyogRXZlbnQgY29uZmlndXJhdGlvbiAqL1xyXG5cclxuICAgICAgICBiYXNlTGF5ZXJFdmVudC5yZWdpc3RlcihcImNsaWNrLlwiICsgc2hhcGVUeXBlLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmIChkcmF3U3RhdGUuY2hlY2soXCJzaGFwZXMuXCIgKyBzaGFwZVR5cGUpKSB7XHJcbiAgICAgICAgICAgIHZhciBzaGFwZU9iamVjdCA9IHNoYXBlc1ZQRmFjdG9yeS5jcmVhdGVTaGFwZShcclxuICAgICAgICAgICAgICAxLFxyXG4gICAgICAgICAgICAgIGNvbW1vblZQRmFjdG9yeS5kcmFnT2Zmc2V0KFxyXG4gICAgICAgICAgICAgICAgc3RhZ2UuZ2V0UG9pbnRlclBvc2l0aW9uKCksXHJcbiAgICAgICAgICAgICAgICBiYXNlTGF5ZXIuZ2V0UG9zaXRpb24oKSxcclxuICAgICAgICAgICAgICAgIGJhc2VMYXllci5zY2FsZSgpXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBpZiAoc2hhcGVPYmplY3Quc3RhcnQpIHtcclxuICAgICAgICAgICAgICBiYXNlTGF5ZXIuYWRkKHNoYXBlT2JqZWN0LnNoYXBlKTtcclxuICAgICAgICAgICAgICBhY3Rpb25TdGF0ZXMucHVzaChcclxuICAgICAgICAgICAgICAgIGNvbW1vblZQRmFjdG9yeS5hY3Rpb25IYW5kbGVyKFxyXG4gICAgICAgICAgICAgICAgICBzdGFnZSxcclxuICAgICAgICAgICAgICAgICAgc2hhcGVPYmplY3Quc2hhcGUsXHJcbiAgICAgICAgICAgICAgICAgIHByb2Nlc3NTdG9yZS5nZXRDdXJyZW50KCksXHJcbiAgICAgICAgICAgICAgICAgIFwiY3JlYXRlXCJcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgIGJhc2VMYXllci5kcmF3KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSBcImRlZmF1bHRcIjtcclxuXHJcbiAgICAgICAgICAgICAgZWxsaXBzZUV2ZW50V3JhcHBlcihzaGFwZU9iamVjdCwgc2hhcGVUeXBlKTtcclxuXHJcbiAgICAgICAgICAgICAgZHJhd1N0YXRlLnJlc2V0KCk7XHJcbiAgICAgICAgICAgICAgc2hhcGVzVlBGYWN0b3J5LmRlc3Ryb3lTaGFwZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYmFzZUxheWVyRXZlbnQucmVnaXN0ZXIoXCJtb3VzZW1vdmUuXCIgKyBzaGFwZVR5cGUsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKGRyYXdTdGF0ZS5jaGVjayhcInNoYXBlcy5cIiArIHNoYXBlVHlwZSkpIHtcclxuICAgICAgICAgICAgc2hhcGVzVlBGYWN0b3J5LmRyYXdTaGFwZShcclxuICAgICAgICAgICAgICBjb21tb25WUEZhY3RvcnkuZHJhZ09mZnNldChcclxuICAgICAgICAgICAgICAgIHN0YWdlLmdldFBvaW50ZXJQb3NpdGlvbigpLFxyXG4gICAgICAgICAgICAgICAgYmFzZUxheWVyLmdldFBvc2l0aW9uKCksXHJcbiAgICAgICAgICAgICAgICBiYXNlTGF5ZXIuc2NhbGUoKVxyXG4gICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgY2lyY2xlXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGJhc2VMYXllci5kcmF3KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvKiBGdW5jdGlvbiB0byBkcmF3IHBvbHlnb24gKi9cclxuICAgICAgdm0ucG9seWdvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGRyYXdTdGF0ZS5zZXQoXCJzaGFwZXMucG9seWdvblwiKTtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9IFwiY3Jvc3NoYWlyXCI7XHJcblxyXG4gICAgICAgIC8qIEV2ZW50IGNvbmZpZ3VyYXRpb24gKi9cclxuICAgICAgICBiYXNlTGF5ZXJFdmVudC5yZWdpc3RlcihcImNsaWNrLnBvbHlnb25cIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAoZHJhd1N0YXRlLmNoZWNrKFwic2hhcGVzLnBvbHlnb25cIikpIHtcclxuICAgICAgICAgICAgdmFyIHNoYXBlT2JqZWN0ID0gc2hhcGVzVlBGYWN0b3J5LmNyZWF0ZVBvbHlnb24oXHJcbiAgICAgICAgICAgICAgY29tbW9uVlBGYWN0b3J5LmRyYWdPZmZzZXQoXHJcbiAgICAgICAgICAgICAgICBzdGFnZS5nZXRQb2ludGVyUG9zaXRpb24oKSxcclxuICAgICAgICAgICAgICAgIGJhc2VMYXllci5nZXRQb3NpdGlvbigpLFxyXG4gICAgICAgICAgICAgICAgYmFzZUxheWVyLnNjYWxlKClcclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGlmIChzaGFwZU9iamVjdCkge1xyXG4gICAgICAgICAgICAgIGlmIChzaGFwZU9iamVjdC5zdGFydCkge1xyXG4gICAgICAgICAgICAgICAgYWN0aW9uU3RhdGVzLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgIGNvbW1vblZQRmFjdG9yeS5hY3Rpb25IYW5kbGVyKFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YWdlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNoYXBlT2JqZWN0LnBvbHlnb24sXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc1N0b3JlLmdldEN1cnJlbnQoKSxcclxuICAgICAgICAgICAgICAgICAgICBcImNyZWF0ZVwiXHJcbiAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBiYXNlTGF5ZXIuYWRkKHNoYXBlT2JqZWN0LnBvbHlnb24pO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvKiBQb2x5Z29uIGZpbmlzaCBibG9jayAqL1xyXG5cclxuICAgICAgICAgICAgICAgIHBvbHlnb25FdmVudFdyYXBwZXIoc2hhcGVPYmplY3QpO1xyXG5cclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gXCJkZWZhdWx0XCI7XHJcbiAgICAgICAgICAgICAgICBkcmF3U3RhdGUucmVzZXQoKTtcclxuICAgICAgICAgICAgICAgIHNoYXBlc1ZQRmFjdG9yeS5kZXN0cm95U2hhcGUoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYmFzZUxheWVyLmRyYXcoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYmFzZUxheWVyRXZlbnQucmVnaXN0ZXIoXCJtb3VzZW1vdmUucG9seWdvblwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmIChkcmF3U3RhdGUuY2hlY2soXCJzaGFwZXMucG9seWdvblwiKSkge1xyXG4gICAgICAgICAgICBzaGFwZXNWUEZhY3RvcnkuZHJhd1BvbHlnb24oXHJcbiAgICAgICAgICAgICAgY29tbW9uVlBGYWN0b3J5LmRyYWdPZmZzZXQoXHJcbiAgICAgICAgICAgICAgICBzdGFnZS5nZXRQb2ludGVyUG9zaXRpb24oKSxcclxuICAgICAgICAgICAgICAgIGJhc2VMYXllci5nZXRQb3NpdGlvbigpLFxyXG4gICAgICAgICAgICAgICAgYmFzZUxheWVyLnNjYWxlKClcclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGJhc2VMYXllci5kcmF3KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvKiBGdW5jdGlvbiB0byBkcmF3IGEgZnJlZWhhbmQgc2hhcGUgKi9cclxuICAgICAgdm0uZnJlZUhhbmQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBkcmF3U3RhdGUuc2V0KFwibWVhc3VyZW1lbnQuZnJlZUhhbmRcIik7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSBcImNyb3NzaGFpclwiO1xyXG5cclxuICAgICAgICAvKiBFdmVudCBjb25maWd1cmF0aW9uICovXHJcbiAgICAgICAgYmFzZUxheWVyRXZlbnQucmVnaXN0ZXIoXCJtb3VzZWRvd24uZnJlZWhhbmRcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAoZHJhd1N0YXRlLmNoZWNrKFwibWVhc3VyZW1lbnQuZnJlZUhhbmRcIikpIHtcclxuICAgICAgICAgICAgdmFyIHNoYXBlT2JqZWN0ID0gc2hhcGVzVlBGYWN0b3J5LmNyZWF0ZVBvbHlnb24oXHJcbiAgICAgICAgICAgICAgY29tbW9uVlBGYWN0b3J5LmRyYWdPZmZzZXQoXHJcbiAgICAgICAgICAgICAgICBzdGFnZS5nZXRQb2ludGVyUG9zaXRpb24oKSxcclxuICAgICAgICAgICAgICAgIGJhc2VMYXllci5nZXRQb3NpdGlvbigpLFxyXG4gICAgICAgICAgICAgICAgYmFzZUxheWVyLnNjYWxlKClcclxuICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgIHRydWVcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgaWYgKHNoYXBlT2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgaWYgKHNoYXBlT2JqZWN0LnN0YXJ0KSB7XHJcbiAgICAgICAgICAgICAgICBhY3Rpb25TdGF0ZXMucHVzaChcclxuICAgICAgICAgICAgICAgICAgY29tbW9uVlBGYWN0b3J5LmFjdGlvbkhhbmRsZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hhcGVPYmplY3QucG9seWdvbixcclxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzU3RvcmUuZ2V0Q3VycmVudCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY3JlYXRlXCJcclxuICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGJhc2VMYXllci5hZGQoc2hhcGVPYmplY3QucG9seWdvbik7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8qIFBvbHlnb24gZmluaXNoIGJsb2NrICovXHJcblxyXG4gICAgICAgICAgICAgICAgZnJlZUhhbmRFdmVudFdyYXBwZXIoc2hhcGVPYmplY3QpO1xyXG5cclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gXCJkZWZhdWx0XCI7XHJcbiAgICAgICAgICAgICAgICBkcmF3U3RhdGUucmVzZXQoKTtcclxuICAgICAgICAgICAgICAgIHNoYXBlc1ZQRmFjdG9yeS5kZXN0cm95U2hhcGUoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYmFzZUxheWVyLmRyYXcoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYmFzZUxheWVyRXZlbnQucmVnaXN0ZXIoXCJtb3VzZW1vdmUuZnJlZWhhbmRcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAoZHJhd1N0YXRlLmNoZWNrKFwibWVhc3VyZW1lbnQuZnJlZUhhbmRcIikpIHtcclxuICAgICAgICAgICAgc2hhcGVzVlBGYWN0b3J5LmRyYXdQb2x5Z29uKFxyXG4gICAgICAgICAgICAgIGNvbW1vblZQRmFjdG9yeS5kcmFnT2Zmc2V0KFxyXG4gICAgICAgICAgICAgICAgc3RhZ2UuZ2V0UG9pbnRlclBvc2l0aW9uKCksXHJcbiAgICAgICAgICAgICAgICBiYXNlTGF5ZXIuZ2V0UG9zaXRpb24oKSxcclxuICAgICAgICAgICAgICAgIGJhc2VMYXllci5zY2FsZSgpXHJcbiAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICB0cnVlXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGJhc2VMYXllci5kcmF3KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvKiBNYXJrZXIgZnVuY3Rpb25zICovXHJcbiAgICAgIHZtLnNpbXBsZUxpbmUgPSBmdW5jdGlvbih0eXBlKSB7XHJcbiAgICAgICAgZHJhd1N0YXRlLnNldChcIm1hcmtpbmdzLlwiICsgdHlwZSk7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSBcImNyb3NzaGFpclwiO1xyXG5cclxuICAgICAgICAvKiBFdmVudCBjb25maWd1cmF0aW9uICovXHJcbiAgICAgICAgYmFzZUxheWVyRXZlbnQucmVnaXN0ZXIoXCJjbGljay5cIiArIHR5cGUsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKGRyYXdTdGF0ZS5jaGVjayhcIm1hcmtpbmdzLlwiICsgdHlwZSkpIHtcclxuICAgICAgICAgICAgdmFyIHNoYXBlT2JqZWN0ID0gc2hhcGVzVlBGYWN0b3J5LmNyZWF0ZUxpbmUoXHJcbiAgICAgICAgICAgICAgY29tbW9uVlBGYWN0b3J5LmRyYWdPZmZzZXQoXHJcbiAgICAgICAgICAgICAgICBzdGFnZS5nZXRQb2ludGVyUG9zaXRpb24oKSxcclxuICAgICAgICAgICAgICAgIGJhc2VMYXllci5nZXRQb3NpdGlvbigpLFxyXG4gICAgICAgICAgICAgICAgYmFzZUxheWVyLnNjYWxlKClcclxuICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgIHR5cGVcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgaWYgKHNoYXBlT2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgaWYgKHNoYXBlT2JqZWN0LnN0YXJ0KSB7XHJcbiAgICAgICAgICAgICAgICBhY3Rpb25TdGF0ZXMucHVzaChcclxuICAgICAgICAgICAgICAgICAgY29tbW9uVlBGYWN0b3J5LmFjdGlvbkhhbmRsZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hhcGVPYmplY3QubGluZSxcclxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzU3RvcmUuZ2V0Q3VycmVudCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY3JlYXRlXCJcclxuICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGJhc2VMYXllci5hZGQoc2hhcGVPYmplY3QubGluZSk7XHJcbiAgICAgICAgICAgICAgICBiYXNlTGF5ZXIuZHJhdygpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvKiBQb2x5Z29uIGZpbmlzaCBibG9jayAqL1xyXG4gICAgICAgICAgICAgICAgbGluZUV2ZW50V3JhcHBlcihzaGFwZU9iamVjdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSBcImRlZmF1bHRcIjtcclxuICAgICAgICAgICAgICAgIGRyYXdTdGF0ZS5yZXNldCgpO1xyXG4gICAgICAgICAgICAgICAgc2hhcGVzVlBGYWN0b3J5LmRlc3Ryb3lTaGFwZSgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBiYXNlTGF5ZXIuZHJhdygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBiYXNlTGF5ZXJFdmVudC5yZWdpc3RlcihcIm1vdXNlbW92ZS5cIiArIHR5cGUsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKGRyYXdTdGF0ZS5jaGVjayhcIm1hcmtpbmdzLlwiICsgdHlwZSkpIHtcclxuICAgICAgICAgICAgc2hhcGVzVlBGYWN0b3J5LmRyYXdMaW5lKFxyXG4gICAgICAgICAgICAgIGNvbW1vblZQRmFjdG9yeS5kcmFnT2Zmc2V0KFxyXG4gICAgICAgICAgICAgICAgc3RhZ2UuZ2V0UG9pbnRlclBvc2l0aW9uKCksXHJcbiAgICAgICAgICAgICAgICBiYXNlTGF5ZXIuZ2V0UG9zaXRpb24oKSxcclxuICAgICAgICAgICAgICAgIGJhc2VMYXllci5zY2FsZSgpXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBiYXNlTGF5ZXIuZHJhdygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdm0uYmV6aWVyTGluZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGRyYXdTdGF0ZS5zZXQoXCJtYXJraW5ncy5iZXppZXJcIik7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSBcImNyb3NzaGFpclwiO1xyXG4gICAgICAgIGJhc2VMYXllckV2ZW50LnJlZ2lzdGVyKFwiY2xpY2suYmV6aWVyXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKGRyYXdTdGF0ZS5jaGVjayhcIm1hcmtpbmdzLmJlemllclwiKSkge1xyXG4gICAgICAgICAgICB2YXIgc2hhcGVPYmplY3QgPSBzaGFwZXNWUEZhY3RvcnkuY3JlYXRlQmV6aWVyTGluZShcclxuICAgICAgICAgICAgICBjb21tb25WUEZhY3RvcnkuZHJhZ09mZnNldChcclxuICAgICAgICAgICAgICAgIHN0YWdlLmdldFBvaW50ZXJQb3NpdGlvbigpLFxyXG4gICAgICAgICAgICAgICAgYmFzZUxheWVyLmdldFBvc2l0aW9uKCksXHJcbiAgICAgICAgICAgICAgICBiYXNlTGF5ZXIuc2NhbGUoKVxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgaWYgKHNoYXBlT2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgaWYgKHNoYXBlT2JqZWN0LnN0YXJ0KSB7XHJcbiAgICAgICAgICAgICAgICBhY3Rpb25TdGF0ZXMucHVzaChcclxuICAgICAgICAgICAgICAgICAgY29tbW9uVlBGYWN0b3J5LmFjdGlvbkhhbmRsZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hhcGVPYmplY3QubGluZSxcclxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzU3RvcmUuZ2V0Q3VycmVudCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY3JlYXRlXCJcclxuICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGJhc2VMYXllci5hZGQoc2hhcGVPYmplY3QubGluZSk7XHJcbiAgICAgICAgICAgICAgICBiYXNlTGF5ZXIuZHJhdygpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvKiBQb2x5Z29uIGZpbmlzaCBibG9jayAqL1xyXG4gICAgICAgICAgICAgICAgYmV6aWVyRXZlbnRXcmFwcGVyKHNoYXBlT2JqZWN0KTtcclxuXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9IFwiZGVmYXVsdFwiO1xyXG4gICAgICAgICAgICAgICAgZHJhd1N0YXRlLnJlc2V0KCk7XHJcbiAgICAgICAgICAgICAgICBzaGFwZXNWUEZhY3RvcnkuZGVzdHJveVNoYXBlKCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJhc2VMYXllci5kcmF3KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGJhc2VMYXllckV2ZW50LnJlZ2lzdGVyKFwibW91c2Vtb3ZlLmJlemllclwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmIChkcmF3U3RhdGUuY2hlY2soXCJtYXJraW5ncy5iZXppZXJcIikpIHtcclxuICAgICAgICAgICAgc2hhcGVzVlBGYWN0b3J5LmRyYXdCZXppZXJMaW5lKFxyXG4gICAgICAgICAgICAgIGNvbW1vblZQRmFjdG9yeS5kcmFnT2Zmc2V0KFxyXG4gICAgICAgICAgICAgICAgc3RhZ2UuZ2V0UG9pbnRlclBvc2l0aW9uKCksXHJcbiAgICAgICAgICAgICAgICBiYXNlTGF5ZXIuZ2V0UG9zaXRpb24oKSxcclxuICAgICAgICAgICAgICAgIGJhc2VMYXllci5zY2FsZSgpXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBiYXNlTGF5ZXIuZHJhdygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgLyogRnJlZSBoYW5kIG1hcmtlciBmdW5jdGlvbnMgKi9cclxuICAgICAgdm0uZnJlZWhhbmRNYXJrZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBkcmF3U3RhdGUuc2V0KFwic2hhcGVzLmZyZWVIYW5kXCIpO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gXCJjcm9zc2hhaXJcIjtcclxuXHJcbiAgICAgICAgLyogRXZlbnQgY29uZmlndXJhdGlvbiAqL1xyXG4gICAgICAgIGJhc2VMYXllckV2ZW50LnJlZ2lzdGVyKFwibW91c2Vkb3duLmZyZWVoYW5kXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKGRyYXdTdGF0ZS5jaGVjayhcInNoYXBlcy5mcmVlSGFuZFwiKSkge1xyXG4gICAgICAgICAgICB2YXIgc2hhcGVPYmplY3QgPSBzaGFwZXNWUEZhY3RvcnkuY3JlYXRlUG9seWdvbihcclxuICAgICAgICAgICAgICBjb21tb25WUEZhY3RvcnkuZHJhZ09mZnNldChcclxuICAgICAgICAgICAgICAgIHN0YWdlLmdldFBvaW50ZXJQb3NpdGlvbigpLFxyXG4gICAgICAgICAgICAgICAgYmFzZUxheWVyLmdldFBvc2l0aW9uKCksXHJcbiAgICAgICAgICAgICAgICBiYXNlTGF5ZXIuc2NhbGUoKVxyXG4gICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgdHJ1ZSxcclxuICAgICAgICAgICAgICB0cnVlXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGlmIChzaGFwZU9iamVjdCkge1xyXG4gICAgICAgICAgICAgIGlmIChzaGFwZU9iamVjdC5zdGFydCkge1xyXG4gICAgICAgICAgICAgICAgYWN0aW9uU3RhdGVzLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgIGNvbW1vblZQRmFjdG9yeS5hY3Rpb25IYW5kbGVyKFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YWdlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNoYXBlT2JqZWN0LnBvbHlnb24sXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc1N0b3JlLmdldEN1cnJlbnQoKSxcclxuICAgICAgICAgICAgICAgICAgICBcImNyZWF0ZVwiXHJcbiAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBiYXNlTGF5ZXIuYWRkKHNoYXBlT2JqZWN0LnBvbHlnb24pO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmcmVlSGFuZE1hcmtlcldyYXBwZXIoc2hhcGVPYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSBcImRlZmF1bHRcIjtcclxuICAgICAgICAgICAgICAgIGRyYXdTdGF0ZS5yZXNldCgpO1xyXG4gICAgICAgICAgICAgICAgc2hhcGVzVlBGYWN0b3J5LmRlc3Ryb3lTaGFwZSgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBiYXNlTGF5ZXIuZHJhdygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBiYXNlTGF5ZXJFdmVudC5yZWdpc3RlcihcIm1vdXNlbW92ZS5mcmVlaGFuZFwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmIChkcmF3U3RhdGUuY2hlY2soXCJzaGFwZXMuZnJlZUhhbmRcIikpIHtcclxuICAgICAgICAgICAgc2hhcGVzVlBGYWN0b3J5LmRyYXdQb2x5Z29uKFxyXG4gICAgICAgICAgICAgIGNvbW1vblZQRmFjdG9yeS5kcmFnT2Zmc2V0KFxyXG4gICAgICAgICAgICAgICAgc3RhZ2UuZ2V0UG9pbnRlclBvc2l0aW9uKCksXHJcbiAgICAgICAgICAgICAgICBiYXNlTGF5ZXIuZ2V0UG9zaXRpb24oKSxcclxuICAgICAgICAgICAgICAgIGJhc2VMYXllci5zY2FsZSgpXHJcbiAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICB0cnVlXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGJhc2VMYXllci5kcmF3KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2bS50ZXh0V2lkZ2V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZHJhd1N0YXRlLnNldChcInNoYXBlcy50ZXh0XCIpO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gXCJjcm9zc2hhaXJcIjtcclxuICAgICAgICAvKiBFdmVudCBjb25maWd1cmF0aW9uICovXHJcbiAgICAgICAgYmFzZUxheWVyRXZlbnQucmVnaXN0ZXIoXCJjbGljay50ZXh0V3JhcHBlclwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmIChkcmF3U3RhdGUuY2hlY2soXCJzaGFwZXMudGV4dFwiKSkge1xyXG4gICAgICAgICAgICB2YXIgc2hhcGVPYmplY3QgPSBzaGFwZXNWUEZhY3RvcnkuY3JlYXRlU2hhcGUoXHJcbiAgICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgICBjb21tb25WUEZhY3RvcnkuZHJhZ09mZnNldChcclxuICAgICAgICAgICAgICAgIHN0YWdlLmdldFBvaW50ZXJQb3NpdGlvbigpLFxyXG4gICAgICAgICAgICAgICAgYmFzZUxheWVyLmdldFBvc2l0aW9uKCksXHJcbiAgICAgICAgICAgICAgICBiYXNlTGF5ZXIuc2NhbGUoKVxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzaGFwZU9iamVjdC5zdGFydCkge1xyXG4gICAgICAgICAgICAgIGJhc2VMYXllci5hZGQoc2hhcGVPYmplY3Quc2hhcGUpO1xyXG4gICAgICAgICAgICAgIC8qIEFkZGluZyBhY3Rpb24gaGFuZGxlcnMgZm9yIHVuZG8gcmVkbyAqL1xyXG5cclxuICAgICAgICAgICAgICBhY3Rpb25TdGF0ZXMucHVzaChcclxuICAgICAgICAgICAgICAgIGNvbW1vblZQRmFjdG9yeS5hY3Rpb25IYW5kbGVyKFxyXG4gICAgICAgICAgICAgICAgICBzdGFnZSxcclxuICAgICAgICAgICAgICAgICAgc2hhcGVPYmplY3Quc2hhcGUsXHJcbiAgICAgICAgICAgICAgICAgIHByb2Nlc3NTdG9yZS5nZXRDdXJyZW50KCksXHJcbiAgICAgICAgICAgICAgICAgIFwiY3JlYXRlXCJcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBncm91cCBmb3IgdGV4dFxyXG5cclxuICAgICAgICAgICAgICB2YXIgdGV4dEdyb3VwID0gc2hhcGVzVlBGYWN0b3J5LmNyZWF0ZVRleHRHcm91cCgpO1xyXG5cclxuICAgICAgICAgICAgICB0ZXh0R3JvdXAuYWRkKHNoYXBlT2JqZWN0LnNoYXBlKTtcclxuXHJcbiAgICAgICAgICAgICAgLyogQWRkIHByb3BlcnRpZXMgKi9cclxuICAgICAgICAgICAgICB2YXIgcG9pbnRzID0gc2hhcGVPYmplY3Quc2hhcGUucG9pbnRzKCk7XHJcbiAgICAgICAgICAgICAgdmFyIHRleHRQcm9wcyA9IHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICAgIHg6IHBvaW50c1swXSArIDEwLFxyXG4gICAgICAgICAgICAgICAgICB5OiBwb2ludHNbMV0gKyAxMFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiBNYXRoLmFicyhwb2ludHNbMF0gLSBwb2ludHNbMl0pIC0gMTBcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgIHZhciB0ZXh0T2JqID0gc2hhcGVzVlBGYWN0b3J5LmNyZWF0ZVRleHQodGV4dFByb3BzKTtcclxuICAgICAgICAgICAgICB0ZXh0R3JvdXAuYWRkKHRleHRPYmopO1xyXG5cclxuICAgICAgICAgICAgICB0ZXh0RXZlbnRXcmFwcGVyKHRleHRHcm91cCk7XHJcblxyXG4gICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gXCJkZWZhdWx0XCI7XHJcbiAgICAgICAgICAgICAgZHJhd1N0YXRlLnJlc2V0KCk7XHJcbiAgICAgICAgICAgICAgc2hhcGVzVlBGYWN0b3J5LmRlc3Ryb3lTaGFwZSgpO1xyXG5cclxuICAgICAgICAgICAgICBiYXNlTGF5ZXIuZHJhdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYmFzZUxheWVyRXZlbnQucmVnaXN0ZXIoXCJtb3VzZW1vdmUudGV4dFdyYXBwZXJcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAoZHJhd1N0YXRlLmNoZWNrKFwic2hhcGVzLnRleHRcIikpIHtcclxuICAgICAgICAgICAgc2hhcGVzVlBGYWN0b3J5LmRyYXdTaGFwZShcclxuICAgICAgICAgICAgICBjb21tb25WUEZhY3RvcnkuZHJhZ09mZnNldChcclxuICAgICAgICAgICAgICAgIHN0YWdlLmdldFBvaW50ZXJQb3NpdGlvbigpLFxyXG4gICAgICAgICAgICAgICAgYmFzZUxheWVyLmdldFBvc2l0aW9uKCksXHJcbiAgICAgICAgICAgICAgICBiYXNlTGF5ZXIuc2NhbGUoKVxyXG4gICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgZmFsc2UsXHJcbiAgICAgICAgICAgICAgXCJ3cmFwcGVyXCJcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgYmFzZUxheWVyLmRyYXcoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHZtLm1hbnVhbFNlbGVjdGlvbiA9IGZ1bmN0aW9uKHNoYXBlT2JqKSB7XHJcbiAgICAgICAgdHJhbnNmb3JtZXJTdG9yZS5yZW1vdmVBbGwoKTtcclxuICAgICAgICBzZWxlY3RlZFNoYXBlLnJlc2V0KCk7XHJcbiAgICAgICAgdmFyIHNoYXBlID0gc2VsZWN0ZWRTaGFwZS5zZXQoc2hhcGVPYmopO1xyXG4gICAgICAgIHNoYXBlT2JqLmZpcmUoXCJjbGlja1wiKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHZtLmRyYWdTZWxlY3Rpb24gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBkcmF3U3RhdGUuc2V0KFwibWFya2luZ3Muc2VsZWN0aW9uXCIpO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9IFwiY3Jvc3NoYWlyXCI7XHJcbiAgICAgICAgLyogRXZlbnQgY29uZmlndXJhdGlvbiAqL1xyXG4gICAgICAgIGJhc2VMYXllckV2ZW50LnJlZ2lzdGVyKFwibW91c2Vkb3duLnNlbGVjdGlvblwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmIChkcmF3U3RhdGUuY2hlY2soXCJtYXJraW5ncy5zZWxlY3Rpb25cIikpIHtcclxuICAgICAgICAgICAgdm0uc2VsZWN0QWxsU2hhcGVzKGZhbHNlKTtcclxuICAgICAgICAgICAgdmFyIHNoYXBlT2JqZWN0ID0gc2hhcGVzVlBGYWN0b3J5LmNyZWF0ZVNoYXBlKFxyXG4gICAgICAgICAgICAgIDAsXHJcbiAgICAgICAgICAgICAgY29tbW9uVlBGYWN0b3J5LmRyYWdPZmZzZXQoXHJcbiAgICAgICAgICAgICAgICBzdGFnZS5nZXRQb2ludGVyUG9zaXRpb24oKSxcclxuICAgICAgICAgICAgICAgIGJhc2VMYXllci5nZXRQb3NpdGlvbigpLFxyXG4gICAgICAgICAgICAgICAgYmFzZUxheWVyLnNjYWxlKClcclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGJhc2VMYXllci5hZGQoc2hhcGVPYmplY3Quc2hhcGUpO1xyXG4gICAgICAgICAgICBiYXNlTGF5ZXIuZHJhdygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBiYXNlTGF5ZXJFdmVudC5yZWdpc3RlcihcIm1vdXNldXAuc2VsZWN0aW9uXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKGRyYXdTdGF0ZS5jaGVjayhcIm1hcmtpbmdzLnNlbGVjdGlvblwiKSkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9IFwiZGVmYXVsdFwiO1xyXG4gICAgICAgICAgICBkcmF3U3RhdGUucmVzZXQoKTtcclxuXHJcbiAgICAgICAgICAgIC8qIFNlbGVjdGlvbiBsb2dpYyAqL1xyXG4gICAgICAgICAgICB2YXIgc2VsZWN0aW9uUG9pbnRzID0gc2hhcGVzVlBGYWN0b3J5LmNhbmNlbERyYXdpbmcoKTtcclxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkU2hhcGVzID0gc2hhcGVzVlBGYWN0b3J5LnNlbGVjdFNoYXBlcyhcclxuICAgICAgICAgICAgICBiYXNlTGF5ZXIsXHJcbiAgICAgICAgICAgICAgc2VsZWN0aW9uUG9pbnRzXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZFNoYXBlTmFtZXMgPSBzZWxlY3RlZFNoYXBlcy5tYXAoZnVuY3Rpb24oeCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiB4Lm5hbWUoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBzZWxlY3Rpb25TdG9yZS5zdG9yZShzZWxlY3RlZFNoYXBlcyk7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh2bS5wcm9jZXNzZXMsIGZ1bmN0aW9uKHByb2Nlc3MpIHtcclxuICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gocHJvY2Vzcy5nZXRDaGlsZHJlbigpLCBmdW5jdGlvbihjaGlsZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkU2hhcGVOYW1lcy5pbmRleE9mKGNoaWxkLm5hbWUoKSkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICBjaGlsZC5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgYmFzZUxheWVyLmRyYXcoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBiYXNlTGF5ZXJFdmVudC5yZWdpc3RlcihcIm1vdXNlbW92ZS5zZWxlY3Rpb25cIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAoZHJhd1N0YXRlLmNoZWNrKFwibWFya2luZ3Muc2VsZWN0aW9uXCIpKSB7XHJcbiAgICAgICAgICAgIHNoYXBlc1ZQRmFjdG9yeS5kcmF3U2hhcGUoXHJcbiAgICAgICAgICAgICAgY29tbW9uVlBGYWN0b3J5LmRyYWdPZmZzZXQoXHJcbiAgICAgICAgICAgICAgICBzdGFnZS5nZXRQb2ludGVyUG9zaXRpb24oKSxcclxuICAgICAgICAgICAgICAgIGJhc2VMYXllci5nZXRQb3NpdGlvbigpLFxyXG4gICAgICAgICAgICAgICAgYmFzZUxheWVyLnNjYWxlKClcclxuICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgIGZhbHNlLFxyXG4gICAgICAgICAgICAgIFwiZ3JhYmJlclwiXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGJhc2VMYXllci5kcmF3KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2bS5zZWxlY3RBbGxTaGFwZXMgPSBmdW5jdGlvbih0b2dnbGVWYWx1ZSkge1xyXG4gICAgICAgIHZhciBhbGxTaGFwZXMgPSBzaGFwZXNWUEZhY3RvcnkuZXh0cmFjdEFsbFNoYXBlcyhiYXNlTGF5ZXIpO1xyXG4gICAgICAgIGlmICh0b2dnbGVWYWx1ZSkge1xyXG4gICAgICAgICAgc2VsZWN0aW9uU3RvcmUuc3RvcmUoYWxsU2hhcGVzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2VsZWN0aW9uU3RvcmUuY2xlYXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKGFsbFNoYXBlcywgZnVuY3Rpb24oeCkge1xyXG4gICAgICAgICAgeC5zZWxlY3RlZCA9IHRvZ2dsZVZhbHVlID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdm0udG9nZ2xlU2hhcGVWaXNpYmlsaXR5ID0gZnVuY3Rpb24oc2hhcGUpIHtcclxuICAgICAgICB0cmFuc2Zvcm1lclN0b3JlLnJlbW92ZUFsbCgpO1xyXG4gICAgICAgIHNoYXBlLnZpc2libGUoIXNoYXBlLnZpc2libGUoKSk7XHJcbiAgICAgICAgYmFzZUxheWVyLmRyYXcoKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHZtLmNhbGlicmF0b3IgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBkcmF3U3RhdGUuc2V0KFwibWVhc3VyZW1lbnQuY2FsaWJyYXRvclwiKTtcclxuICAgICAgICBjYWxpYnJhdG9yID0gc2hhcGVzVlBGYWN0b3J5LmNhbGlicmF0b3Ioc3RhZ2UsIGJhc2VMYXllcik7XHJcbiAgICAgICAgYmFzZUxheWVyRXZlbnQucmVnaXN0ZXIoXCJjbGljay5jYWxpYnJhdG9yXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKGRyYXdTdGF0ZS5jaGVjayhcIm1lYXN1cmVtZW50LmNhbGlicmF0b3JcIikpIHtcclxuICAgICAgICAgICAgY2FsaWJyYXRvcihcclxuICAgICAgICAgICAgICBjb21tb25WUEZhY3RvcnkuZHJhZ09mZnNldChcclxuICAgICAgICAgICAgICAgIHN0YWdlLmdldFBvaW50ZXJQb3NpdGlvbigpLFxyXG4gICAgICAgICAgICAgICAgYmFzZUxheWVyLmdldFBvc2l0aW9uKCksXHJcbiAgICAgICAgICAgICAgICBiYXNlTGF5ZXIuc2NhbGUoKVxyXG4gICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgdHJ1ZVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBiYXNlTGF5ZXJFdmVudC5yZWdpc3RlcihcIm1vdXNlbW92ZS5jYWxpYnJhdG9yXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKGRyYXdTdGF0ZS5jaGVjayhcIm1lYXN1cmVtZW50LmNhbGlicmF0b3JcIikpIHtcclxuICAgICAgICAgICAgY2FsaWJyYXRvcihcclxuICAgICAgICAgICAgICBjb21tb25WUEZhY3RvcnkuZHJhZ09mZnNldChcclxuICAgICAgICAgICAgICAgIHN0YWdlLmdldFBvaW50ZXJQb3NpdGlvbigpLFxyXG4gICAgICAgICAgICAgICAgYmFzZUxheWVyLmdldFBvc2l0aW9uKCksXHJcbiAgICAgICAgICAgICAgICBiYXNlTGF5ZXIuc2NhbGUoKVxyXG4gICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgZmFsc2VcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8qIENhbGlicmF0aW9uIGhhbmRsaW5nICovXHJcblxyXG4gICAgICAkc2NvcGUuJG9uKFwiY2FsaWJyYXRlZFwiLCBmdW5jdGlvbihlLCBjYWxpYnJhdGVkTGluZSkge1xyXG4gICAgICAgIC8vIHZhciB2YWx1ZSA9IHdpbmRvdy5wcm9tcHQoJ1BsZWFzZSBlbnRlciBhIHNjYWxlJyk7XHJcbiAgICAgICAgdmFyIHZhbHVlO1xyXG4gICAgICAgICQoXCIjY2FsaWJyYXRlTW9kYWxcIikubW9kYWwoXCJzaG93XCIpO1xyXG5cclxuICAgICAgICAvKiBEaXN0YW5jZSBvZiB0aGUgbGluZSAqL1xyXG4gICAgICAgIHZhciBwb2ludHMgPSBjYWxpYnJhdGVkTGluZS5wb2ludHMoKTtcclxuICAgICAgICB2YXIgZGlzdGFuY2UgPSBNYXRoLnNxcnQoXHJcbiAgICAgICAgICBNYXRoLnBvdyhwb2ludHNbMF0gLSBwb2ludHNbMl0sIDIpICtcclxuICAgICAgICAgICAgTWF0aC5wb3cocG9pbnRzWzFdIC0gcG9pbnRzWzNdLCAyKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHZtLmNhbGlicmF0aW9uRGlzdGFuY2UgPSBkaXN0YW5jZTtcclxuICAgICAgICB2bS5zYXZlQ2FsaWJyYXRpb24gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHZhciB2YWx1ZSA9IHZtLmNhbGlicmF0aW9uU2NhbGUudmFsdWU7XHJcblxyXG4gICAgICAgICAgdmFyIHNjYWxlO1xyXG5cclxuICAgICAgICAgIHNjYWxlID0gcGFyc2VJbnQodmFsdWUpIC8gZGlzdGFuY2U7XHJcblxyXG4gICAgICAgICAgLyogU2V0dGluZyBjYWxpYnJhdGlvbiB2YWx1ZSB0byB0aGF0IGl0IGNhbiBiZSBmZXRjaGVkIGdsb2JhbGx5ICovXHJcbiAgICAgICAgICBjYWxpYnJhdGlvblN0YXRlLnNldCh7XHJcbiAgICAgICAgICAgIHZhbHVlOiBzY2FsZSxcclxuICAgICAgICAgICAgdW5pdDogdm0uY2FsaWJyYXRpb25TY2FsZS51bml0XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICB2bS5jYWxpYnJhdGlvbkRhdGEgPSBjYWxpYnJhdGlvblN0YXRlLmdldCgpO1xyXG5cclxuICAgICAgICAgIHZtLnNob3dQYW5lbCA9IHRydWU7XHJcbiAgICAgICAgICB2bS5zaGFwZUluZm8gPSBtZXRyaWNzLmdldFNoYXBlSW5mbygpO1xyXG4gICAgICAgICAgY2FsaWJyYXRlZExpbmUuZGVzdHJveSgpO1xyXG4gICAgICAgICAgYmFzZUxheWVyLmRyYXcoKTtcclxuXHJcbiAgICAgICAgICAkKFwiI2NhbGlicmF0ZU1vZGFsXCIpLm1vZGFsKFwiaGlkZVwiKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkKFwiI2NhbGlicmF0ZU1vZGFsXCIpLm9uKFwiaGlkZS5icy5tb2RhbFwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICBjYWxpYnJhdGVkTGluZS5kZXN0cm95KCk7XHJcbiAgICAgICAgICBiYXNlTGF5ZXIuZHJhdygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHZtLmRlbGV0ZVNoYXBlID0gZnVuY3Rpb24oc2hhcGVPYmopIHtcclxuICAgICAgICB2YXIgc2hhcGUgPSBzaGFwZU9iaiA/IHNoYXBlT2JqIDogc2VsZWN0ZWRTaGFwZS5nZXQoKTtcclxuICAgICAgICBpZiAoc2hhcGUpIHtcclxuICAgICAgICAgIHRyYW5zZm9ybWVyU3RvcmUucmVtb3ZlQWxsKCk7XHJcbiAgICAgICAgICBhY3Rpb25TdGF0ZXMucHVzaChcclxuICAgICAgICAgICAgY29tbW9uVlBGYWN0b3J5LmFjdGlvbkhhbmRsZXIoXHJcbiAgICAgICAgICAgICAgc3RhZ2UsXHJcbiAgICAgICAgICAgICAgc2hhcGUsXHJcbiAgICAgICAgICAgICAgc2hhcGUuZ2V0UGFyZW50KCksXHJcbiAgICAgICAgICAgICAgXCJkZWxldGVcIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgc2hhcGUucmVtb3ZlKCk7XHJcbiAgICAgICAgICBiYXNlTGF5ZXIuZHJhdygpO1xyXG4gICAgICAgICAgdm0uY2xvc2VJbmZvV2lkZ2V0KCk7XHJcbiAgICAgICAgICB2bS5jbG9zZVRleHRJbmZvV2lkZ2V0KCk7XHJcbiAgICAgICAgICBzZWxlY3RlZFNoYXBlLnJlc2V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgdm0ub3BlbkluZm9XaWRnZXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgc2hhcGUgPSBzZWxlY3RlZFNoYXBlLmdldCgpO1xyXG4gICAgICAgIHZtLmluZm9XaWRnZXRQcm9wcyA9IHtcclxuICAgICAgICAgIG5hbWU6IHNoYXBlLm5hbWUoKSxcclxuICAgICAgICAgIGNvbG9yVHlwZTogXCJzdHJva2VcIixcclxuICAgICAgICAgIHN0cm9rZTogc2hhcGUuc3Ryb2tlKCksXHJcbiAgICAgICAgICBmaWxsOiBzaGFwZS5maWxsKCksXHJcbiAgICAgICAgICBzdHJva2VXaWR0aDogc2hhcGUuc3Ryb2tlV2lkdGgoKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdm0uc2hhcGVJbmZvV2lkZ2V0ID0gdHJ1ZTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHZtLmNvbG9yVHlwZXMgPSBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdHlwZTogXCJTdHJva2VcIixcclxuICAgICAgICAgIHZhbHVlOiBcInN0cm9rZVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICB0eXBlOiBcIkZpbGxcIixcclxuICAgICAgICAgIHZhbHVlOiBcImZpbGxcIlxyXG4gICAgICAgIH1cclxuICAgICAgXTtcclxuXHJcbiAgICAgIHZtLnRleHRDb2xvclR5cGVzID0gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIHR5cGU6IFwiQmFja2dyb3VuZFwiLFxyXG4gICAgICAgICAgdmFsdWU6IFwic3Ryb2tlXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHR5cGU6IFwiRm9udFwiLFxyXG4gICAgICAgICAgdmFsdWU6IFwiZmlsbFwiXHJcbiAgICAgICAgfVxyXG4gICAgICBdO1xyXG5cclxuICAgICAgdm0uZm9udFN0eWxlcyA9IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICB0eXBlOiBcIk5vcm1hbFwiLFxyXG4gICAgICAgICAgdmFsdWU6IFwibm9ybWFsXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHR5cGU6IFwiQm9sZFwiLFxyXG4gICAgICAgICAgdmFsdWU6IFwiYm9sZFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICB0eXBlOiBcIkl0YWxpY1wiLFxyXG4gICAgICAgICAgdmFsdWU6IFwiaXRhbGljXCJcclxuICAgICAgICB9XHJcbiAgICAgIF07XHJcblxyXG4gICAgICB2bS53ZWJTYWZlRm9udHMgPSBbXHJcbiAgICAgICAgXCJBcmlhbFwiLFxyXG4gICAgICAgIFwiQ2FsaWJyaVwiLFxyXG4gICAgICAgIFwiSGVsdmV0aWNhXCIsXHJcbiAgICAgICAgXCJUaW1lcyBOZXcgUm9tYW5cIixcclxuICAgICAgICBcIlRpbWVzXCIsXHJcbiAgICAgICAgXCJDb3VyaWVyIE5ld1wiLFxyXG4gICAgICAgIFwiQ291cmllclwiLFxyXG4gICAgICAgIFwiVmVyZGFuYVwiLFxyXG4gICAgICAgIFwiR2VvcmdpYVwiLFxyXG4gICAgICAgIFwiUGFsYXRpbm9cIixcclxuICAgICAgICBcIkdhcmFtb25kXCIsXHJcbiAgICAgICAgXCJCb29rbWFuXCIsXHJcbiAgICAgICAgXCJDb21pYyBTYW5zIE1TXCIsXHJcbiAgICAgICAgXCJUcmVidWNoZXQgTVNcIixcclxuICAgICAgICBcIkFyaWFsIEJsYWNrXCIsXHJcbiAgICAgICAgXCJJbXBhY3RcIlxyXG4gICAgICBdO1xyXG5cclxuICAgICAgdm0ub3BlblRleHRJbmZvV2lkZ2V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHNoYXBlID0gc2VsZWN0ZWRTaGFwZS5nZXQoKTtcclxuICAgICAgICB2bS50ZXh0SW5mb1dpZGdldFByb3BzID0ge1xyXG4gICAgICAgICAgY29sb3JUeXBlOiBcInN0cm9rZVwiLFxyXG4gICAgICAgICAgdGV4dDogc2hhcGUudGV4dCgpLFxyXG4gICAgICAgICAgZm9udFNpemU6IHNoYXBlLmZvbnRTaXplKCksXHJcbiAgICAgICAgICBmb250U3R5bGU6IHNoYXBlLmZvbnRTdHlsZSgpLFxyXG4gICAgICAgICAgZm9udEZhbWlseTogc2hhcGUuZm9udEZhbWlseSgpLFxyXG4gICAgICAgICAgc3Ryb2tlOiBzaGFwZS5zdHJva2UoKSxcclxuICAgICAgICAgIGZpbGw6IHNoYXBlLmZpbGwoKSxcclxuICAgICAgICAgIHN0cm9rZVdpZHRoOiBzaGFwZS5zdHJva2VXaWR0aCgpXHJcbiAgICAgICAgfTtcclxuICAgICAgICB2bS50ZXh0SW5mb1dpZGdldCA9IHRydWU7XHJcbiAgICAgICAgJHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdm0uY2hhbmdlVGV4dEluZm8gPSBmdW5jdGlvbihwcm9wLCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciBzaGFwZSA9IHNlbGVjdGVkU2hhcGUuZ2V0KCk7XHJcbiAgICAgICAgc2hhcGVbcHJvcF0odmFsdWUpO1xyXG4gICAgICAgIGJhc2VMYXllci5kcmF3KCk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2bS5pbmZvV2lkZ2V0U3Ryb2tlID0gZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgICAgdmFyIHNoYXBlID0gc2VsZWN0ZWRTaGFwZS5nZXQoKTtcclxuICAgICAgICAvLyB2YXIgc3Ryb2tlSGlzdG9yeSA9IGNvbW1vblZQRmFjdG9yeS5zaGFwZVByb3BlcnR5SGlzdG9yeSgpXHJcbiAgICAgICAgLy8gdmFyIHByb3BzID0ge1xyXG4gICAgICAgIC8vICAgc3Ryb2tlOiBzaGFwZS5zdHJva2UoKSxcclxuICAgICAgICAvLyAgIGZpbGw6IHNoYXBlLmZpbGwoKSxcclxuICAgICAgICAvLyAgIHN0cm9rZVdpZHRoOiBzaGFwZS5zdHJva2VXaWR0aCgpXHJcbiAgICAgICAgLy8gfTtcclxuICAgICAgICAvLyBzdHJva2VIaXN0b3J5LmFkZChwcm9wcyk7XHJcbiAgICAgICAgLy8gdmFyIGRvbmUgPSBmYWxzZTtcclxuICAgICAgICAvLyAkdGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gICBpZihkb25lKSB7XHJcbiAgICAgICAgLy8gICAgIHJldHVybjtcclxuICAgICAgICAvLyAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gICAgIHZhciBlbmRQcm9wcyA9IHtcclxuICAgICAgICAvLyAgICAgICBzdHJva2U6IHNoYXBlLnN0cm9rZSgpLFxyXG4gICAgICAgIC8vICAgICAgIGZpbGw6IHNoYXBlLmZpbGwoKSxcclxuICAgICAgICAvLyAgICAgICBzdHJva2VXaWR0aDogc2hhcGUuc3Ryb2tlV2lkdGgoKVxyXG4gICAgICAgIC8vICAgICB9O1xyXG4gICAgICAgIC8vICAgICBhY3Rpb25TdGF0ZXMucHVzaChjb21tb25WUEZhY3RvcnkuYWN0aW9uSGFuZGxlcihzdGFnZSwgc2hhcGUsIHByb2Nlc3NTdG9yZS5nZXRDdXJyZW50KCksICdzaGFwZVByb3BzJywgc3Ryb2tlSGlzdG9yeS5hZGQoZW5kUHJvcHMpKSk7XHJcbiAgICAgICAgLy8gICAgIGRvbmUgPSB0cnVlO1xyXG4gICAgICAgIC8vICAgfVxyXG4gICAgICAgIC8vIH0sIDEwMDApO1xyXG5cclxuICAgICAgICBzaGFwZS5zdHJva2VXaWR0aCh2YWwpO1xyXG4gICAgICAgIGJhc2VMYXllci5kcmF3KCk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2YXIgc2hhcGVQcm9wSGlzdG9yeSA9IGNvbW1vblZQRmFjdG9yeS5zaGFwZVByb3BlcnR5SGlzdG9yeSgpO1xyXG5cclxuICAgICAgdm0uaW5mb1dpZGdldEV2ZW50cyA9IHtcclxuICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24oYXBpLCBjb2xvciwgJGV2ZW50KSB7XHJcbiAgICAgICAgICB2YXIgc2hhcGUgPSBzZWxlY3RlZFNoYXBlLmdldCgpO1xyXG4gICAgICAgICAgaWYgKHZtLmluZm9XaWRnZXRQcm9wcy5jb2xvclR5cGUgPT09IFwiZmlsbFwiKSB7XHJcbiAgICAgICAgICAgIHNoYXBlLmZpbGwoY29sb3IpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmICh2bS5pbmZvV2lkZ2V0UHJvcHMuY29sb3JUeXBlID09PSBcInN0cm9rZVwiKSB7XHJcbiAgICAgICAgICAgIHNoYXBlLnN0cm9rZShjb2xvcik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBiYXNlTGF5ZXIuZHJhdygpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLyogZm9yIHNoYXBlIHVuZG8gYW5kIHJlZG8gKi9cclxuICAgICAgICBvbk9wZW46IGZ1bmN0aW9uKGFwaSwgY29sb3IsICRldmVudCkge1xyXG4gICAgICAgICAgdmFyIHNoYXBlID0gc2VsZWN0ZWRTaGFwZS5nZXQoKTtcclxuICAgICAgICAgIHZhciBwcm9wcyA9IHtcclxuICAgICAgICAgICAgc3Ryb2tlOiBzaGFwZS5zdHJva2UoKSxcclxuICAgICAgICAgICAgZmlsbDogc2hhcGUuZmlsbCgpLFxyXG4gICAgICAgICAgICBzdHJva2VXaWR0aDogc2hhcGUuc3Ryb2tlV2lkdGgoKVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIHNoYXBlUHJvcEhpc3RvcnkuYWRkKHByb3BzKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uQ2xvc2U6IGZ1bmN0aW9uKGFwaSwgY29sb3IsICRldmVudCkge1xyXG4gICAgICAgICAgdmFyIHNoYXBlID0gc2VsZWN0ZWRTaGFwZS5nZXQoKTtcclxuICAgICAgICAgIHZhciBwcm9wcyA9IHtcclxuICAgICAgICAgICAgc3Ryb2tlOiBzaGFwZS5zdHJva2UoKSxcclxuICAgICAgICAgICAgZmlsbDogc2hhcGUuZmlsbCgpLFxyXG4gICAgICAgICAgICBzdHJva2VXaWR0aDogc2hhcGUuc3Ryb2tlV2lkdGgoKVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIGFjdGlvblN0YXRlcy5wdXNoKFxyXG4gICAgICAgICAgICBjb21tb25WUEZhY3RvcnkuYWN0aW9uSGFuZGxlcihcclxuICAgICAgICAgICAgICBzdGFnZSxcclxuICAgICAgICAgICAgICBzaGFwZSxcclxuICAgICAgICAgICAgICBwcm9jZXNzU3RvcmUuZ2V0Q3VycmVudCgpLFxyXG4gICAgICAgICAgICAgIFwic2hhcGVQcm9wc1wiLFxyXG4gICAgICAgICAgICAgIHNoYXBlUHJvcEhpc3RvcnkuYWRkKHByb3BzKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgLyogUmVzZXQgc2hhcGUgcHJvcHMgaGlzdG9yeSAqL1xyXG4gICAgICAgICAgc2hhcGVQcm9wSGlzdG9yeSA9IGNvbW1vblZQRmFjdG9yeS5zaGFwZVByb3BlcnR5SGlzdG9yeSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIHZtLnRleHRJbmZvV2lkZ2V0RXZlbnRzID0ge1xyXG4gICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbihhcGksIGNvbG9yLCAkZXZlbnQpIHtcclxuICAgICAgICAgIHZhciBzaGFwZSA9IHNlbGVjdGVkU2hhcGUuZ2V0KCk7XHJcbiAgICAgICAgICBpZiAodm0udGV4dEluZm9XaWRnZXRQcm9wcy5jb2xvclR5cGUgPT09IFwiZmlsbFwiKSB7XHJcbiAgICAgICAgICAgIHNoYXBlLmZpbGwoY29sb3IpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmICh2bS50ZXh0SW5mb1dpZGdldFByb3BzLmNvbG9yVHlwZSA9PT0gXCJzdHJva2VcIikge1xyXG4gICAgICAgICAgICB2YXIgd3JhcHBlciA9IHNoYXBlLmdldFBhcmVudCgpLmZpbmQoXCJMaW5lXCIpO1xyXG4gICAgICAgICAgICB3cmFwcGVyLmZpbGwoY29sb3IpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYmFzZUxheWVyLmRyYXcoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8qIGZvciBzaGFwZSB1bmRvIGFuZCByZWRvICovXHJcbiAgICAgICAgb25PcGVuOiBmdW5jdGlvbihhcGksIGNvbG9yLCAkZXZlbnQpIHtcclxuICAgICAgICAgIHZhciBzaGFwZSA9IHNlbGVjdGVkU2hhcGUuZ2V0KCk7XHJcbiAgICAgICAgICB2YXIgcHJvcHMgPSB7XHJcbiAgICAgICAgICAgIHN0cm9rZTogc2hhcGUuc3Ryb2tlKCksXHJcbiAgICAgICAgICAgIGZpbGw6IHNoYXBlLmZpbGwoKSxcclxuICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IHNoYXBlLnN0cm9rZVdpZHRoKClcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBzaGFwZVByb3BIaXN0b3J5LmFkZChwcm9wcyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbkNsb3NlOiBmdW5jdGlvbihhcGksIGNvbG9yLCAkZXZlbnQpIHtcclxuICAgICAgICAgIHZhciBzaGFwZSA9IHNlbGVjdGVkU2hhcGUuZ2V0KCk7XHJcbiAgICAgICAgICB2YXIgcHJvcHMgPSB7XHJcbiAgICAgICAgICAgIHN0cm9rZTogc2hhcGUuc3Ryb2tlKCksXHJcbiAgICAgICAgICAgIGZpbGw6IHNoYXBlLmZpbGwoKSxcclxuICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IHNoYXBlLnN0cm9rZVdpZHRoKClcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBhY3Rpb25TdGF0ZXMucHVzaChcclxuICAgICAgICAgICAgY29tbW9uVlBGYWN0b3J5LmFjdGlvbkhhbmRsZXIoXHJcbiAgICAgICAgICAgICAgc3RhZ2UsXHJcbiAgICAgICAgICAgICAgc2hhcGUsXHJcbiAgICAgICAgICAgICAgcHJvY2Vzc1N0b3JlLmdldEN1cnJlbnQoKSxcclxuICAgICAgICAgICAgICBcInNoYXBlUHJvcHNcIixcclxuICAgICAgICAgICAgICBzaGFwZVByb3BIaXN0b3J5LmFkZChwcm9wcylcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIC8qIFJlc2V0IHNoYXBlIHByb3BzIGhpc3RvcnkgKi9cclxuICAgICAgICAgIHNoYXBlUHJvcEhpc3RvcnkgPSBjb21tb25WUEZhY3Rvcnkuc2hhcGVQcm9wZXJ0eUhpc3RvcnkoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2bS5jbG9zZUluZm9XaWRnZXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2bS5zaGFwZUluZm9XaWRnZXQgPSBmYWxzZTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHZtLmNsb3NlVGV4dEluZm9XaWRnZXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgdGV4dCA9IHNlbGVjdGVkU2hhcGUuZ2V0KCk7XHJcbiAgICAgICAgaWYgKHRleHQgJiYgdGV4dC5uYW1lKCkgPT09IFwidGV4dFwiKSB7XHJcbiAgICAgICAgICB2YXIgZ3JvdXAgPSB0ZXh0LmdldFBhcmVudCgpO1xyXG4gICAgICAgICAgdmFyIHdyYXBwZXIgPSBncm91cC5maW5kKFwiTGluZVwiKVswXTtcclxuICAgICAgICAgIHdyYXBwZXIuc3Ryb2tlKG51bGwpO1xyXG4gICAgICAgICAgYmFzZUxheWVyLmRyYXcoKTtcclxuICAgICAgICAgIHRyYW5zZm9ybWVyU3RvcmUucmVtb3ZlQWxsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZtLnRleHRJbmZvV2lkZ2V0ID0gZmFsc2U7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvKiBFbmQgb2Ygc2hhcGUgZXZlbnRzICovXHJcblxyXG4gICAgICAvKiBQYW4gaW1hZ2UgKi9cclxuICAgICAgdm0uY3VycmVudFBhblN0YXRlID0gdHJ1ZTtcclxuICAgICAgdm0ucGFuSW1hZ2UgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2bS5jdXJyZW50UGFuU3RhdGUgPSBiYXNlTGF5ZXIuZHJhZ2dhYmxlKCk7XHJcbiAgICAgICAgdm0uY3VycmVudFBhblN0YXRlXHJcbiAgICAgICAgICA/IChkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9IFwiZGVmYXVsdFwiKVxyXG4gICAgICAgICAgOiAoZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSBcIm1vdmVcIik7XHJcbiAgICAgICAgYmFzZUxheWVyLmRyYWdnYWJsZSghdm0uY3VycmVudFBhblN0YXRlKTtcclxuICAgICAgICBiYXNlTGF5ZXIuZHJhdygpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgLyogVW5kby9SZWRvICovXHJcblxyXG4gICAgICB2bS51bmRvT3JSZWRvID0gZnVuY3Rpb24odHlwZSkge1xyXG4gICAgICAgIC8qIHR5cGUgMCAtIHVuZG8gLCAxIC0gcmVkbyAqL1xyXG4gICAgICAgIHRyYW5zZm9ybWVyU3RvcmUucmVtb3ZlQWxsKCk7XHJcbiAgICAgICAgdHlwZSA9PT0gMSA/IGFjdGlvblN0YXRlcy5yZWRvKCkgOiBhY3Rpb25TdGF0ZXMudW5kbygpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgLyogRG93bmxvYWRzICovXHJcblxyXG4gICAgICB2bS5kb3dubG9hZEltYWdlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGRhdGFVUkwgPSBzdGFnZS50b0RhdGFVUkwoKTtcclxuICAgICAgICB2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xyXG4gICAgICAgIGxpbmsuZG93bmxvYWQgPSBcInJvb2ZwbGFuX2ltYWdlX1wiICsgRGF0ZS5ub3coKTtcclxuICAgICAgICBsaW5rLmhyZWYgPSBkYXRhVVJMO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7XHJcbiAgICAgICAgbGluay5jbGljaygpO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2bS5kb3dubG9hZEZpbGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIganNvbiA9IHN0YWdlLnRvSlNPTigpO1xyXG4gICAgICAgIHZhciBmaWxlID0gbmV3IEJsb2IoW2pzb25dLCB7XHJcbiAgICAgICAgICB0eXBlOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcbiAgICAgICAgbGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcclxuICAgICAgICBsaW5rLmRvd25sb2FkID0gXCJyb29mcGxhbl9qc29uX1wiICsgRGF0ZS5ub3coKTtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspO1xyXG4gICAgICAgIGxpbmsuY2xpY2soKTtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdm0uc2F2ZVJvb2ZQbGFuID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdHJhbnNmb3JtZXJTdG9yZS5yZW1vdmVBbGwoKTtcclxuICAgICAgICB2YXIganNvbiA9IHN0YWdlLnRvSlNPTigpO1xyXG5cclxuICAgICAgICAvKiBHZXQgYXNzb2NpYXRpb25zIGFuZCBwcm9jZXNzIHRoZW0gYmVmb3JlIHNhdmluZyAqL1xyXG5cclxuICAgICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgICAuc2F2ZVJvb2ZQbGFuKHJvb2ZQbGFuLl9pZCwge1xyXG4gICAgICAgICAgICBqc29uU3RyaW5nOiBqc29uLFxyXG4gICAgICAgICAgICBjYWxpYnJhdGlvbjogY2FsaWJyYXRpb25TdGF0ZS5nZXQoKSxcclxuICAgICAgICAgICAgY291bnREYXRhOiBzaGFwZXNWUEZhY3RvcnkuZ2V0U2hhcGVJZCgpLFxyXG4gICAgICAgICAgICBhc3NvY2lhdGlvbnM6IHZtLmFzc29jaWF0aW9ucy5nZXRBc3NvY2lhdGlvbnNGb3JTYXZlKClcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgTm90aWZpY2F0aW9uLnN1Y2Nlc3MocmVzcC5kYXRhLm1lc3NhZ2UpO1xyXG5cclxuICAgICAgICAgICAgYXBpRmFjdG9yeVxyXG4gICAgICAgICAgICAgIC5nZXRQcm9qZWN0Um9vZlBsYW5zKGxvY2FsU3RvcmFnZVNlcnZpY2UuZ2V0KFwicm9vZlBsYW5Qcm9qZWN0XCIpKVxyXG4gICAgICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlU2VydmljZS5zZXQoXCJyb29mUGxhbnNcIiwgcmVzcC5kYXRhLmRhdGEpO1xyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgLyogUHJvY2VzcyBtZXRob2RzICovXHJcblxyXG4gICAgICB2bS5oaWRlUHJvY2VzcyA9IGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgdHJhbnNmb3JtZXJTdG9yZS5yZW1vdmVBbGwoKTtcclxuICAgICAgICBwcm9jZXNzU3RvcmUuaGlkZVByb2Nlc3MoaW5kZXgpO1xyXG4gICAgICB9O1xyXG4gICAgICB2bS5zaG93UHJvY2VzcyA9IGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgcHJvY2Vzc1N0b3JlLnNob3dQcm9jZXNzKGluZGV4KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHZtLmFkZFByb2Nlc3MgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBwcm9jZXNzU3RvcmUuY3JlYXRlUHJvY2VzcygpO1xyXG4gICAgICAgIHZtLnByb2Nlc3NlcyA9IHByb2Nlc3NTdG9yZS5nZXRQcm9jZXNzZXMoKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHZtLnNlbGVjdExheWVyID0gZnVuY3Rpb24oaSkge1xyXG4gICAgICAgIHZtLnNlbGVjdGVkSW5kZXggPSBpO1xyXG4gICAgICAgIHByb2Nlc3NTdG9yZS5zZXRDdXJyZW50KGkpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgLyogSW5pdGlhbGx5IGxvYWQgMXN0IGxheWVyICovXHJcbiAgICAgIHZtLnNlbGVjdExheWVyKDApO1xyXG5cclxuICAgICAgdm0uc2VsZWN0T3JVbnNlbGVjdCA9IGZ1bmN0aW9uKHNoYXBlKSB7XHJcbiAgICAgICAgc2hhcGUuc2VsZWN0ZWRcclxuICAgICAgICAgID8gc2VsZWN0aW9uU3RvcmUucHVzaChzaGFwZSlcclxuICAgICAgICAgIDogc2VsZWN0aW9uU3RvcmUucHVsbChzaGFwZS5uYW1lKCkpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdm0ubGF5ZXJJY29uTmFtZSA9IGZ1bmN0aW9uKHNoYXBlTmFtZSkge1xyXG4gICAgICAgIGlmICgvUmVjdCovLnRlc3Qoc2hhcGVOYW1lKSkge1xyXG4gICAgICAgICAgcmV0dXJuIFwic3F1YXJlXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgvRWxsaXBzZSovLnRlc3Qoc2hhcGVOYW1lKSkge1xyXG4gICAgICAgICAgcmV0dXJuIFwiY2lyY2xlXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgvcG9seWdvbiovLnRlc3Qoc2hhcGVOYW1lKSkge1xyXG4gICAgICAgICAgcmV0dXJuIFwicG9seWdvblwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoL2xpbmUqLy50ZXN0KHNoYXBlTmFtZSkpIHtcclxuICAgICAgICAgIHJldHVybiBcImxpbmVcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKC90ZXh0R3JvdXAqLy50ZXN0KHNoYXBlTmFtZSkpIHtcclxuICAgICAgICAgIHJldHVybiBcInRleHRcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKC9mcmVlSGFuZCovLnRlc3Qoc2hhcGVOYW1lKSkge1xyXG4gICAgICAgICAgcmV0dXJuIFwicGVuY2lsXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgdm0uaGlkZVNlbGVjdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBzZWxlY3RlZFNoYXBlcyA9IHNlbGVjdGlvblN0b3JlLmdldCgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHNlbGVjdGVkU2hhcGVzKTtcclxuICAgICAgICB0cmFuc2Zvcm1lclN0b3JlLnJlbW92ZUFsbCgpO1xyXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChzZWxlY3RlZFNoYXBlcywgZnVuY3Rpb24oc2hhcGUpIHtcclxuICAgICAgICAgIHNoYXBlLnZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGJhc2VMYXllci5kcmF3KCk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2bS5kZWxldGVTZWxlY3Rpb24gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgc2VsZWN0ZWRTaGFwZXMgPSBzZWxlY3Rpb25TdG9yZS5nZXQoKTtcclxuICAgICAgICB0cmFuc2Zvcm1lclN0b3JlLnJlbW92ZUFsbCgpO1xyXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChzZWxlY3RlZFNoYXBlcywgZnVuY3Rpb24oc2hhcGUpIHtcclxuICAgICAgICAgIGFjdGlvblN0YXRlcy5wdXNoKFxyXG4gICAgICAgICAgICBjb21tb25WUEZhY3RvcnkuYWN0aW9uSGFuZGxlcihcclxuICAgICAgICAgICAgICBzdGFnZSxcclxuICAgICAgICAgICAgICBzaGFwZSxcclxuICAgICAgICAgICAgICBzaGFwZS5nZXRQYXJlbnQoKSxcclxuICAgICAgICAgICAgICBcImRlbGV0ZVwiXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBzaGFwZS5yZW1vdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBiYXNlTGF5ZXIuZHJhdygpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdm0ubG9hZE1hdGVyaWFsID0gc2hhcGVQcm9wID0+IHtcclxuICAgICAgICAkKFwiI2xvYWRNYXRlcmlhbFwiKS5tb2RhbChcInNob3dcIik7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2bS5jcmVhdGVBc3NvY2lhdGlvbiA9IChzaGFwZUlkLCBlbnRpdHlJZCwgdHlwZSkgPT4ge1xyXG4gICAgICAgIHZtLmFzc29jaWF0aW9ucy5jcmVhdGVBc3NvY2lhdGlvbihzaGFwZUlkLCBlbnRpdHlJZCwgdHlwZSk7XHJcbiAgICAgICAgJChcIiNsb2FkTWF0ZXJpYWxcIikubW9kYWwoXCJoaWRlXCIpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgJHNjb3BlLiRvbihcInNlbGVjdGVkTWF0ZXJpYWxcIiwgKGUsIGRhdGEpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInNlbGVjdGVkTWF0ZXJpYWwtLS0tXCIsIGRhdGEpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIFxyXG4gICAgICAgICAgRW5kIG9mIHZpZXcgZnVuY3Rpb25zXHJcbiAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgICB9XHJcbiAgfVxyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmRpcmVjdGl2ZShcImNhbnZhc1BkZlwiLCBjYW52YXNQZGYpO1xyXG5cclxuICBmdW5jdGlvbiBjYW52YXNQZGYoJHJvb3RTY29wZSwgYXBpRmFjdG9yeSwgJHRpbWVvdXQsIGdsb2JhbHMsIE5vdGlmaWNhdGlvbikge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVzdHJpY3Q6IFwiQVwiLFxyXG4gICAgICBzY29wZToge1xyXG4gICAgICAgIGN1cnJlbnQ6IFwiPVwiXHJcbiAgICAgIH0sXHJcbiAgICAgIGxpbms6IGZ1bmN0aW9uKCRzY29wZSwgZWxlbSwgYXR0cnMpIHtcclxuICAgICAgICBnbG9iYWxzLnJlbmRlclBhZ2UoJHNjb3BlLmN1cnJlbnQsIGVsZW1bMF0pO1xyXG4gICAgICAgICR0aW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICRzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcbn0pKCk7XHJcbiIsIigoKSA9PiB7XHJcbiAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuZGlyZWN0aXZlKFwiZmlsZVBpY2tlclwiLCBmaWxlUGlja2VyKTtcclxuXHJcbiAgZnVuY3Rpb24gZmlsZVBpY2tlcigkcm9vdFNjb3BlLCBhcGlGYWN0b3J5LCAkdGltZW91dCwgZ2xvYmFscywgTm90aWZpY2F0aW9uKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN0cmljdDogXCJFXCIsXHJcbiAgICAgIHRlbXBsYXRlVXJsOiBcIi9wYXJ0aWFscy9maWxlUGlja2VyLmh0bWxcIixcclxuICAgICAgc2NvcGU6IHtcclxuICAgICAgICBmb2xkZXJzOiBcIj1cIixcclxuICAgICAgICBvcHRpb25zOiBcIj1cIixcclxuICAgICAgICBzb3VyY2U6IFwiPVwiLFxyXG4gICAgICAgIHNvdXJjZWZpbGU6IFwiPVwiLFxyXG4gICAgICAgIHNvdXJjZWRpcjogXCI9XCJcclxuICAgICAgfSxcclxuICAgICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCBlbGVtLCBhdHRycykge1xyXG4gICAgICAgIGxldCBmb2xkZXJQYXRocyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHsgcHJvamVjdFN0b3JlIH0gPSBnbG9iYWxzO1xyXG4gICAgICAgICRzY29wZS5maWxlcyA9IFtdO1xyXG4gICAgICAgICRzY29wZS5mb2xkZXJOYW1lID0gXCJSb290IEZvbGRlclwiO1xyXG4gICAgICAgICRzY29wZS5jdXJyZW50Rm9sZGVyID0gXCJcIjtcclxuICAgICAgICAkc2NvcGUuc2VsZWN0ZWRGb2xkZXIgPSBudWxsO1xyXG4gICAgICAgICRzY29wZS5iYWNrQnRuVmlldyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAkc2NvcGUudmlld0ZvbGRlciA9IGZvbGRlciA9PiB7XHJcbiAgICAgICAgICBsZXQgbmFtZSA9IGZvbGRlci5uYW1lO1xyXG4gICAgICAgICAgZm9sZGVyUGF0aHMucHVzaChmb2xkZXIpO1xyXG4gICAgICAgICAgJHNjb3BlLnNlbGVjdGVkRm9sZGVyO1xyXG4gICAgICAgICAgYXBpRmFjdG9yeVxyXG4gICAgICAgICAgICAudmlld0hpZXJhcmNoeShmb2xkZXIuX2lkKVxyXG4gICAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRGb2xkZXIgPSBmb2xkZXI7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRGb2xkZXIgPSBmb2xkZXIubmFtZTtcclxuICAgICAgICAgICAgICAkc2NvcGUuZm9sZGVycyA9IHJlc3AuZGF0YS5mb2xkZXJzO1xyXG4gICAgICAgICAgICAgICRzY29wZS5maWxlcyA9IHJlc3AuZGF0YS5maWxlcztcclxuICAgICAgICAgICAgICAkc2NvcGUuYnJlYWRDcnVtYnMgPSByZXNwLmRhdGEuYnJlYWRjcnVtYnM7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmZvbGRlck5hbWUgPSBuYW1lO1xyXG4gICAgICAgICAgICAgIGlmICgkc2NvcGUuZm9sZGVyTmFtZSA9PSBcIlJvb3QgRm9sZGVyXCIpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5iYWNrQnRuVmlldyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5iYWNrQnRuVmlldyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuc2VsZWN0RmlsZSA9IChmaWxlLCBicmVhZENydW1icykgPT4ge1xyXG4gICAgICAgICAgZmlsZS5icmVhZENydW1icyA9IGJyZWFkQ3J1bWJzO1xyXG4gICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KFwibG9hZGVyXCIsIHRydWUpO1xyXG4gICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KFwic2VsZWN0ZWRSb29mUGxhbkRvY1wiLCBmaWxlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuYmFjayA9ICgpID0+IHtcclxuICAgICAgICAgIGZvbGRlclBhdGhzLnBvcCgpO1xyXG5cclxuICAgICAgICAgIGNvbnN0IHByZXZpb3VzID0gZm9sZGVyUGF0aHNbZm9sZGVyUGF0aHMubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICBjb25zdCBhcGlOYW1lID0gcHJldmlvdXMgPyBcInZpZXdIaWVyYXJjaHlcIiA6IFwiZ2V0SGllcmFyY2h5XCI7XHJcbiAgICAgICAgICBjb25zdCBwYXJhbSA9IHByZXZpb3VzID8gcHJldmlvdXMuX2lkIDogcHJvamVjdFN0b3JlLmdldCgpLl9pZDtcclxuXHJcbiAgICAgICAgICBhcGlGYWN0b3J5W2FwaU5hbWVdKHBhcmFtKVxyXG4gICAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRGb2xkZXIgPSBwcmV2aW91cyB8fCBudWxsO1xyXG4gICAgICAgICAgICAgICRzY29wZS5jdXJyZW50Rm9sZGVyID0gcHJldmlvdXMgPyBwcmV2aW91cy5uYW1lIDogbnVsbDtcclxuICAgICAgICAgICAgICAkc2NvcGUuZm9sZGVycyA9IHByZXZpb3VzXHJcbiAgICAgICAgICAgICAgICA/IHJlc3AuZGF0YS5mb2xkZXJzXHJcbiAgICAgICAgICAgICAgICA6IHJlc3AuZGF0YS5kYXRhLmhpZXJhcmNoaWVzO1xyXG4gICAgICAgICAgICAgICRzY29wZS5maWxlcyA9IHByZXZpb3VzID8gcmVzcC5kYXRhLmZpbGVzIDogW107XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmZvbGRlck5hbWUgPSBwcmV2aW91cyA/IHByZXZpb3VzLm5hbWUgOiBcIlJvb3QgRm9sZGVyXCI7XHJcblxyXG4gICAgICAgICAgICAgIGlmICgkc2NvcGUuZm9sZGVyTmFtZSA9PSBcIlJvb3QgRm9sZGVyXCIpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5iYWNrQnRuVmlldyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5iYWNrQnRuVmlldyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUubW92ZVRvID0gKGZvbGRlciwgc291cmNlKSA9PiB7XHJcbiAgICAgICAgICBpZiAoIWZvbGRlcikge1xyXG4gICAgICAgICAgICAvKiByZXR1cm4gaWYgbm8gZm9sZGVyIGlzIHNlbGVjdGVkICovXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBsZXQgcGF5bG9hZCA9IHtcclxuICAgICAgICAgICAgYXNzZXRJZDogJHNjb3BlLnNvdXJjZWZpbGUuX2lkLFxyXG4gICAgICAgICAgICBzb3VyY2VJZDogc291cmNlLiRtb2RlbFZhbHVlLl9pZCxcclxuICAgICAgICAgICAgZGVzdElkOiBmb2xkZXIuX2lkXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgLyogU3RlcCAxOiBNb3ZlIGFzc2V0ICovXHJcbiAgICAgICAgICBhcGlGYWN0b3J5XHJcbiAgICAgICAgICAgIC5tb3ZlQXNzZXRzKHBheWxvYWQpXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgIC8qIFN0ZXAgMjogcmVtb3ZlIGZpbGUgZnJvbSB0aGUgc291cmNlIGRpciBpZiBzdWNjZXNzZnVsICovXHJcbiAgICAgICAgICAgICAgaWYgKCRzY29wZS5zb3VyY2VkaXIpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zb3VyY2VkaXIgPSAkc2NvcGUuc291cmNlZGlyLmZpbHRlcihcclxuICAgICAgICAgICAgICAgICAgeCA9PiB4Ll9pZCAhPT0gJHNjb3BlLnNvdXJjZWZpbGUuX2lkXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBOb3RpZmljYXRpb24uc3VjY2VzcyhcIkZpbGUgTW92ZWQgU3VjY2Vzc2Z1bGx5XCIpO1xyXG4gICAgICAgICAgICAgICQoXCIjbW92ZVRvXCIpLm1vZGFsKFwiaGlkZVwiKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxufSkoKTtcclxuIiwiKCgpID0+IHtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5kaXJlY3RpdmUoJ2F1dG9Db21wbGV0ZScsIGZ1bmN0aW9uKCR0aW1lb3V0KSB7XHJcbiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgaUVsZW1lbnQsIGlBdHRycykge1xyXG4gICAgICAgICAgICAgIGlFbGVtZW50LmF1dG9jb21wbGV0ZSh7XHJcbiAgICAgICAgICAgICAgICAgIHNvdXJjZTogc2NvcGVbaUF0dHJzLnVpSXRlbXNdLFxyXG4gICAgICAgICAgICAgICAgICBzZWxlY3Q6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlFbGVtZW50LnRyaWdnZXIoJ2lucHV0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcbiAgfSkoKTtcclxuICBcclxuICAoKCkgPT4ge1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmRpcmVjdGl2ZSgnZXJyU3JjJywgZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgICBlbGVtZW50LmJpbmQoJ2Vycm9yJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAoYXR0cnMuc3JjICE9IGF0dHJzLmVyclNyYykge1xyXG4gICAgICAgICAgICBhdHRycy4kc2V0KCdzcmMnLCBhdHRycy5lcnJTcmMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgXHJcbn0pKCk7IiwiKCgpID0+IHtcclxuICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5kaXJlY3RpdmUoXCJtYXRlcmlhbFBpY2tlclwiLCBtYXRlcmlhbFBpY2tlcik7XHJcblxyXG4gIGZ1bmN0aW9uIG1hdGVyaWFsUGlja2VyKFxyXG4gICAgJHJvb3RTY29wZSxcclxuICAgIGFwaUZhY3RvcnksXHJcbiAgICAkdGltZW91dCxcclxuICAgIGdsb2JhbHMsXHJcbiAgICBOb3RpZmljYXRpb25cclxuICApIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlc3RyaWN0OiBcIkVcIixcclxuICAgICAgdGVtcGxhdGVVcmw6IFwiL3BhcnRpYWxzL21hdGVyaWFsUGlja2VyLmh0bWxcIixcclxuICAgICAgc2NvcGU6IHtcclxuICAgICAgICBtYXRlcmlhbFR5cGU6IFwiPVwiLFxyXG4gICAgICAgIHNlbGVjdGVkTWF0ZXJpYWw6IFwiPVwiLFxyXG4gICAgICAgIGN1cnJlbnRTaGFwZTogXCI9XCIsXHJcbiAgICAgICAgYXNzb2NpYXRpb25zOiBcIj1cIlxyXG4gICAgICB9LFxyXG4gICAgICBsaW5rOiBmdW5jdGlvbigkc2NvcGUsIGVsZW0sIGF0dHJzKSB7XHJcbiAgICAgICAgLy8gbGV0IG1hdGVyaWFsVHlwZSA9IGFuZ3VsYXIuY29weShtYXRlcmlhbFR5cGUudHlwZSk7XHJcblxyXG4gICAgICAgIC8qICRzY29wZS4kd2F0Y2goJ21hdGVyaWFsVHlwZScsKG5ld1ZhbCwgb2xkVmFsKSA9PiB7XHJcbiAgICAgICAgICBpZihvbGRWYWwudHlwZSA9PT0gbmV3VmFsLnR5cGUpIHJldHVybjtcclxuICAgICAgICAgIC8vIGdldCBNYXRlcmlhbCBMaXN0XHJcbiAgICAgICAgICBpZiAobmV3VmFsLnR5cGUgPT0gJ21hdGVyaWFsJykge1xyXG4gICAgICAgICAgICAkc2NvcGUubWF0ZXJpYWxMaXN0ID0gW11cclxuICAgICAgICAgICAgYXBpRmFjdG9yeS5saXN0QWxsTWF0ZXJpYWxzKCkudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgICAkc2NvcGUubWF0ZXJpYWxMaXN0ID0gcmVzcC5kYXRhLmxpc3Q7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGUgPT4geyB9KTtcclxuXHJcbiAgICAgICAgICB9IGVsc2UgaWYgKG5ld1ZhbC50eXBlID09ICdEQ1AnKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5tYXRlcmlhbExpc3QgPSBbXVxyXG4gICAgICAgICAgICBhcGlGYWN0b3J5Lmxpc3RBbGxDb21ib01hdGVyaWFscygpLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLm1hdGVyaWFsTGlzdCA9IHJlc3AuZGF0YS5saXN0O1xyXG4gICAgICAgICAgICB9KS5jYXRjaChlID0+IHsgfSk7XHJcblxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJHNjb3BlLm1hdGVyaWFsTGlzdCA9IFtdXHJcbiAgICAgICAgICAgIGFwaUZhY3RvcnkubGlzdEFsbEVxdWlwbWVudHMoKS50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgICRzY29wZS5tYXRlcmlhbExpc3QgPSByZXNwLmRhdGEubGlzdDtcclxuICAgICAgICAgICAgfSkuY2F0Y2goZSA9PiB7IH0pO1xyXG5cclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCB0cnVlKSAqL1xyXG5cclxuICAgICAgICAvLyBnZXQgTWF0ZXJpYWwgTGlzdFxyXG4gICAgICAgICRzY29wZS5tYXRlcmlhbExpc3QgPSBbXTtcclxuICAgICAgICAkc2NvcGUuZW50aXR5VHlwZSA9IDE7XHJcbiAgICAgICAgYXBpRmFjdG9yeVxyXG4gICAgICAgICAgLmxpc3RBbGxNYXRlcmlhbHMoKVxyXG4gICAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgICRzY29wZS5tYXRlcmlhbExpc3QgPSByZXNwLmRhdGEubGlzdDtcclxuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkTWF0ZXJpYWwgPSBhbmd1bGFyLmNvcHkoJHNjb3BlLm1hdGVyaWFsTGlzdFswXSk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKGUgPT4ge30pO1xyXG5cclxuICAgICAgICAvLyBnZXQgRENQIExpc3RcclxuICAgICAgICAkc2NvcGUuZGNwTGlzdCA9IFtdO1xyXG4gICAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAgIC5saXN0QWxsQ29tYm9NYXRlcmlhbHMoKVxyXG4gICAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgICRzY29wZS5kY3BMaXN0ID0gcmVzcC5kYXRhLmxpc3Q7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKGUgPT4ge30pO1xyXG5cclxuICAgICAgICAvLyBnZXQgRXF1aW9tZW50IExpc3RcclxuICAgICAgICAkc2NvcGUuZXF1aXBtZW50TGlzdCA9IFtdO1xyXG4gICAgICAgIGFwaUZhY3RvcnlcclxuICAgICAgICAgIC5saXN0QWxsRXF1aXBtZW50cygpXHJcbiAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgJHNjb3BlLmVxdWlwbWVudExpc3QgPSByZXNwLmRhdGEubGlzdDtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goZSA9PiB7fSk7XHJcblxyXG4gICAgICAgICRzY29wZS5zZWxlY3RlZE1hdGVyaWFsSW5mbyA9IG1hdGVyaWFsID0+IHtcclxuICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdChcInNlbGVjdGVkTWF0ZXJpYWxcIiwgbWF0ZXJpYWwpO1xyXG4gICAgICAgICAgY29uc29sZS5sb2cobWF0ZXJpYWwpO1xyXG4gICAgICAgICAgJHNjb3BlLm1hdGVyaWFsSW1hZ2VzID0gbWF0ZXJpYWw7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLm1hdGVyaWFsU2VsZWN0aW9uID0gaXRlbSA9PiB7XHJcbiAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRNYXRlcmlhbCA9IGl0ZW07XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnJlc2V0U2VsZWN0ZWRNYXRlcmlhbCA9IHZhbCA9PiB7XHJcbiAgICAgICAgICBpZiAoISRzY29wZS5zZWxlY3RlZE1hdGVyaWFsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5jdXJyZW50U2hhcGUpO1xyXG4gICAgICAgICAgaWYgKHZhbCA9PSAwKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZE1hdGVyaWFsID0gYW5ndWxhci5jb3B5KCRzY29wZS5tYXRlcmlhbExpc3RbMF0pO1xyXG4gICAgICAgICAgICAkc2NvcGUuZW50aXR5VHlwZSA9IHZhbCArIDE7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHZhbCA9PSAxKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZE1hdGVyaWFsID0gYW5ndWxhci5jb3B5KCRzY29wZS5kY3BMaXN0WzBdKTtcclxuICAgICAgICAgICAgJHNjb3BlLmVudGl0eVR5cGUgPSB2YWwgKyAxO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkTWF0ZXJpYWwgPSBhbmd1bGFyLmNvcHkoJHNjb3BlLmVxdWlwbWVudExpc3RbMF0pO1xyXG4gICAgICAgICAgICAkc2NvcGUuZW50aXR5VHlwZSA9IHZhbCArIDE7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmFzc2lnbk1hdGVyaWFsID0gKHNoYXBlSWQsIGVudGl0eUlkLCB0eXBlKSA9PiB7XHJcbiAgICAgICAgICAkKFwiI2xvYWRNYXRlcmlhbFwiKS5tb2RhbChcImhpZGVcIik7XHJcbiAgICAgICAgICAkc2NvcGUuYXNzb2NpYXRpb25zLmNyZWF0ZUFzc29jaWF0aW9uKHNoYXBlSWQsIGVudGl0eUlkLCB0eXBlKTtcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxufSkoKTtcclxuIiwiKCgpID0+IHtcclxuICAvKiBDdXJyZW50eSBjb252ZXJ0b3IgKi9cclxuICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5maWx0ZXIoXCJjb252ZXJ0Q3VycmVuY3lcIiwgY29udmVydEN1cnJlbmN5KTtcclxuXHJcbiAgZnVuY3Rpb24gY29udmVydEN1cnJlbmN5KCkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0LCBjb252ZXJzaW9uUmF0ZSkge1xyXG4gICAgICBpZiAoIWlucHV0KSB7XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGlucHV0ICogY29udmVyc2lvblJhdGU7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKiBSb3VuZCBudW1iZXIgKi9cclxuXHJcbiAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuZmlsdGVyKFwicm91bmROdW1cIiwgcm91bmROdW0pO1xyXG4gIFxyXG5cclxuICBmdW5jdGlvbiByb3VuZE51bSgpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbihpbnB1dCwgcGxhY2UpIHtcclxuICAgICAgaWYgKCFpbnB1dCkge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBOdW1iZXIoaW5wdXQpLnRvRml4ZWQocGxhY2UpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyogRmV0Y2ggdGh1bWJuYWlsICovXHJcblxyXG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmZpbHRlcihcImZldGNoVGh1bWJuYWlsXCIsIGZldGNoVGh1bWJuYWlsKTtcclxuXHJcbiAgZnVuY3Rpb24gZmV0Y2hUaHVtYm5haWwoKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQpIHtcclxuICAgICAgaWYgKCFpbnB1dCkgcmV0dXJuO1xyXG4gICAgICByZXR1cm4gL2Nsb3VkaW5hcnkvLnRlc3QoaW5wdXQuc2VjdXJlX3VybClcclxuICAgICAgICA/IGlucHV0LnNlY3VyZV91cmwucmVwbGFjZSgvXFwucGRmLywgXCIucG5nXCIpXHJcbiAgICAgICAgOiBpbnB1dC50aHVtYm5haWw7XHJcbiAgICB9O1xyXG4gIH1cclxufSkoKTtcclxuIl19
