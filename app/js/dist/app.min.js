"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var app=angular.module("app",["ui.router","routesModule","LocalStorageModule","uiGmapgoogle-maps","ngProgress","ui-notification","ngMap","ui.select","ui.select2","ngSanitize","color.picker","ui.bootstrap","datatables","ngTagsInput","ngFileUpload","infinite-scroll","ui.tree","btorfs.multiselect","htmlToPdfSave","dndLists","angular.chips","ui.bootstrap.contextMenu","cloudinary"]);function config(NotificationProvider,uiGmapGoogleMapApiProvider,treeConfig,cloudinaryProvider){uiGmapGoogleMapApiProvider.configure({key:"AIzaSyA3MIA-mKWq_60q1K0zOHguraxT-1QPxNU",v:"3.exp",libraries:"places,weather,geometry,visualization"}),NotificationProvider.setOptions({delay:3e3,startTop:20,startRight:10,verticalSpacing:20,horizontalSpacing:20,positionX:"right",positionY:"top"}),treeConfig.defaultCollapsed=!0,cloudinaryProvider.set("cloud_name","dktnhmsjx").set("upload_preset","cloudes_frontend")}function routeConfig($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/"),$stateProvider.state("3dViewer",{url:"/",templateUrl:"/partials/3d-viewer.html",controller:"_3dViewerCtrl as vm"})}app.config(config),angular.module("routesModule",[]).config(routeConfig),function(){angular.module("app").factory("apiFactory",function($http,$state,$location,localStorageService,globals,Upload,Notification){var _ref,url="https://api.staging.cloudes.eu",headers=function(method,token){return{"Content-Type":"GET"===method?void 0:"application/json","x-access-token":token?localStorageService.get("access-token"):void 0,platform:JSON.stringify({source:"web"})}},progress=globals.progress,logout=(globals.userStore,globals.logout);return _defineProperty(_ref={login:function(payload){var promise=this.progressify($http({url:url+"/authenticate",method:"POST",headers:headers("POST"),data:payload}));return promise},forgotPassword:function(payload){var promise=this.progressify($http({url:url+"/forgetPassword",method:"POST",headers:headers("POST"),data:payload}));return promise},registration:function(payload){var promise=this.progressify($http({url:url+"/dashboardRegistration",method:"POST",headers:headers("POST"),data:payload}));return promise},subscribe:function(payload){var promise=this.progressify($http({url:url+"/subscribe",method:"POST",headers:headers("POST"),data:payload}));return promise},getCompanyById:function(companyId){var promise=this.progressify($http({url:url+"/api/getCompanyById/"+companyId,method:"GET",headers:headers("GET",!0)}));return promise},listAllUsers:function(){var promise=this.progressify($http({url:url+"/api/getadminusers",method:"GET",headers:headers("GET",!0)}));return promise},listAllProjects:function(queryObj){var query=queryObj?Object.keys(queryObj).reduce(function(acc,v){var str=v+"="+queryObj[v]+"&";return acc+=str},"?"):"";query=query.slice(0,-1);var promise=this.progressify($http({url:url+"/api/listAllProjects"+query,method:"GET",headers:headers("GET",!0)}));return promise},listAllClients:function(queryObj){var query=queryObj?Object.keys(queryObj).reduce(function(acc,v){var str=v+"="+queryObj[v]+"&";return acc+=str},"?"):"";query=query.slice(0,-1);var promise=this.progressify($http({url:url+"/api/listAllClients"+query,method:"GET",headers:headers("GET",!0)}));return promise},listAllRoofers:function(){var promise=this.progressify($http({url:url+"/api/listAllRoofers",method:"GET",headers:headers("GET",!0)}));return promise},createProject:function(payload){var promise=this.progressify($http({url:url+"/api/createProject",method:"POST",headers:headers("POST",!0),data:payload}));return promise},createIssue:function(issueobj){var promise=this.progressify(Upload.upload({url:url+"/api/createIssue",method:"POST",data:issueobj,headers:headers("POST",!0)}));return promise},updateIssue:function(issueobj,id){console.log("At apifactory update obj:",issueobj),console.log("At ID:",id);var promise=this.progressify(Upload.upload({url:url+"/api/updateIssue/"+id,method:"PUT",data:issueobj,headers:headers("PUT",!0)}));return promise},getProjectRoofPlans:function(projectId){var promise=this.progressify($http({url:url+"/api/getProjectRoofPlans/"+projectId,method:"GET",headers:headers("GET",!0)}));return promise},saveRoofPlan:function(roofPlanId,payload){var promise=this.progressify($http({url:url+"/api/saveRoofPlan/"+roofPlanId,method:"PUT",headers:headers("PUT",!0),data:payload}));return promise},createMaterials:function(payload){var promise=this.progressify(Upload.upload({url:url+"/api/createMaterial",data:payload,headers:headers("POST",!0)}));return promise},createEquipment:function(payload){var promise=this.progressify(Upload.upload({url:url+"/api/createEquipment",data:payload,headers:headers("POST",!0)}));return promise},listAllMaterials:function(queryObj){var query=queryObj?Object.keys(queryObj).reduce(function(acc,v){var str=v+"="+queryObj[v]+"&";return acc+=str},"?"):"";query=query.slice(0,-1);var promise=this.progressify($http({url:url+"/api/listAllMaterials"+query,method:"GET",headers:headers("GET",!0)}));return promise},listAllComboMaterials:function(queryObj){var query=queryObj?Object.keys(queryObj).reduce(function(acc,v){var str=v+"="+queryObj[v]+"&";return acc+=str},"?"):"";query=query.slice(0,-1);var promise=this.progressify($http({url:url+"/api/listComboMaterials"+query,method:"GET",headers:headers("GET",!0)}));return promise},listAllEquipments:function(queryObj){var query=queryObj?Object.keys(queryObj).reduce(function(acc,v){var str=v+"="+queryObj[v]+"&";return acc+=str},"?"):"";query=query.slice(0,-1);var promise=this.progressify($http({url:url+"/api/listAllEquipments"+query,method:"GET",headers:headers("GET",!0)}));return promise},updateMaterialById:function(id,payload){var promise=this.progressify(Upload.upload({url:url+"/api/updateMaterialById/"+id,method:"PUT",headers:headers("PUT",!0),data:payload}));return promise},getMaterialById:function(materialID){var promise=this.progressify($http({url:url+"/api/getMaterialById/"+materialID,method:"GET",headers:headers("GET",!0)}));return promise},getComboMaterialById:function(comboId){var promise=this.progressify($http({url:url+"/api/getComboMaterialById/"+comboId,method:"GET",headers:headers("GET",!0)}));return promise},createComboMaterial:function(payload){var promise=this.progressify(Upload.upload({url:url+"/api/createComboMaterial",method:"POST",headers:headers("POST",!0),data:payload}));return promise},updateComboMaterialList:function(id,payload){var promise=this.progressify($http({url:url+"/api/updateComboMaterialList/"+id,method:"PUT",headers:headers("POST",!0),data:payload}));return promise},updateComboMaterial:function(id,payload){var promise=this.progressify(Upload.upload({url:url+"/api/updateComboMaterial/"+id,method:"PUT",headers:headers("POST",!0),data:payload}));return promise},showConversionRate:function(payload){var promise=this.progressify($http({url:url+"/api/showConversionRate",method:"POST",headers:headers("POST",!0),data:payload}));return promise}},"getMaterialById",function(id){var promise=this.progressify($http({url:url+"/api/getMaterialById/"+id,method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"progressify",function(promise){return new Promise(function(resolve,reject){progress.start(),promise.then(function(resp){progress.complete(),resolve(resp)}).catch(function(err){progress.complete(),401===err.status&&logout(),reject(err)})})}),_defineProperty(_ref,"listAllIssues",function(queryObj){var query=queryObj?Object.keys(queryObj).reduce(function(acc,v){var str=v+"="+queryObj[v]+"&";return acc+=str},"?"):"";query=query.slice(0,-1);var promise=this.progressify($http({url:url+"/api/listAllIssues"+query,method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"getIssuesList",function(){var promise=this.progressify($http({url:url+"/api/allIssues",method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"isTokenValid",function(payload){var promise=this.progressify($http({url:url+"/isTokenValid",method:"POST",headers:headers("POST",!0),data:payload}));return promise}),_defineProperty(_ref,"setPassword",function(payload){var promise=this.progressify($http({url:url+"/resetPasswordAdmin",method:"PUT",headers:headers("PUT",!0),data:payload}));return promise}),_defineProperty(_ref,"updateRoleBasedAccess",function(payload){var promise=this.progressify($http({url:url+"/api/updateRoleBasedAccess",method:"PUT",headers:headers("PUT",!0),data:payload}));return promise}),_defineProperty(_ref,"addHierarchy",function(payload){var promise=this.progressify($http({url:url+"/api/addHierarchy",method:"POST",headers:headers("POST",!0),data:payload}));return promise}),_defineProperty(_ref,"getHierarchyChildren",function(hierarchyId){var promise=this.progressify($http({url:url+"/api/getHierarchyChildren/"+hierarchyId,method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"getHierarchy",function(projectId){var promise=this.progressify($http({url:url+"/api/getHierarchy/"+projectId+"?depth=2",method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"viewProjectAssets",function(projectId){var promise=this.progressify($http({url:url+"/api/viewProjectAssets/"+projectId,method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"addFileToHierarchy",function(payload){var promise=this.progressify($http({url:url+"/api/addFileToHierarchy",method:"PUT",headers:headers("PUT",!0),data:payload}));return promise}),_defineProperty(_ref,"viewHierarchy",function(hierarchyId){var promise=this.progressify($http({url:url+"/api/viewHierarchy/"+hierarchyId,method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"cloneAssets",function(payload){var promise=this.progressify($http({url:url+"/api/cloneAssets",method:"PUT",headers:headers("PUT",!0),data:payload}));return promise}),_defineProperty(_ref,"uploadFileInFileManager",function(payload){var promise=this.progressify(Upload.upload({url:url+"/api/uploadFileInFileManager",method:"POST",data:payload,headers:headers("POST",!0)}));return promise}),_defineProperty(_ref,"dragMoveNodes",function(payload){var promise=this.progressify($http({url:url+"/api/dragMoveNodes",method:"PUT",data:payload,headers:headers("POST",!0)}));return promise}),_defineProperty(_ref,"moveAssets",function(payload){var promise=this.progressify($http({url:url+"/api/moveAssets",method:"PUT",data:payload,headers:headers("POST",!0)}));return promise}),_defineProperty(_ref,"deleteAssets",function(payload){var promise=this.progressify($http({url:url+"/api/deleteAssets",method:"PUT",data:payload,headers:headers("POST",!0)}));return promise}),_defineProperty(_ref,"get3DPage",function(){var token=localStorageService.get("access-token"),Data3D={"x-access-token":token,projectId:"5b697c030a7e97056835a94a"},promise=this.progressify($http({url:"https://cloudes-3d.com",method:"POST",data:Data3D}));return promise}),_defineProperty(_ref,"createClient",function(client){console.log("client in api factory",client);var promise=this.progressify($http({url:url+"/api/createClient",method:"POST",headers:headers("POST",!0),data:client}));return promise}),_defineProperty(_ref,"saveHierarchyTree",function(projectId,name){var promise=this.progressify($http({url:url+"/api/saveHierarchyTree/"+projectId,method:"PUT",headers:headers("POST",!0),data:name}));return promise}),_defineProperty(_ref,"getSystemTag",function(){var promise=this.progressify($http({url:url+"/api/getComboSystemTag",method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"bookMarkProject",function(id,added){var promise=this.progressify($http({url:url+"/api/bookMarkProject",method:"PUT",data:{projectId:id,added:added},headers:headers("POST",!0)}));return promise}),_defineProperty(_ref,"getBookmarks",function(){var promise=this.progressify($http({url:url+"/api/getBookmarks",method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"getHierarchyTemplate",function(){var promise=this.progressify($http({url:url+"/api/getHierarchyTemplate",method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"loadHierarchyTree",function(payload){var promise=this.progressify($http({url:url+"/api/loadHierarchyTree",method:"POST",data:payload,headers:headers("POST",!0)}));return promise}),_defineProperty(_ref,"newFileUpload",function(payload){var promise=this.progressify($http({url:url+"/api/newFileUpload",method:"POST",data:payload,headers:headers("POST",!0)}));return promise}),_defineProperty(_ref,"showProjectFiles",function(queryObj){var query=queryObj?Object.keys(queryObj).reduce(function(acc,v){var str=v+"="+queryObj[v]+"&";return acc+=str},"?"):"";query=query.slice(0,-1);var promise=this.progressify($http({url:url+"/api/showProjectFiles"+query,method:"GET",headers:headers("GET",!0)}));return promise}),_defineProperty(_ref,"changeProjectTemplate",function(payload){var promise=this.progressify($http({url:url+"/api/changeProjectTemplate",method:"POST",data:payload,headers:headers("POST",!0)}));return promise}),_ref})}(),function(){angular.module("app").factory("authFactory",function($http,$location,localStorageService){return{checkUser:function(){var token=localStorageService.get("access-token");return!(!token||""==token)},checkPrivilege:function(type,subType){var _localStorageService$=localStorageService.get("userData"),privilege=_localStorageService$.privilege,_localStorageService$2=localStorageService.get("companyData"),privileges=_localStorageService$2.privileges;return privilege<=privileges[type][subType]}}})}(),function(){angular.module("app").factory("fileManagerFactory",function(apiFactory,Notification){return{clipBoard:(items={type:0,data:[],source:null},{copy:function(item){items.source=null,items.type=0,items.data=[item]},cut:function(item,source){items.source=source,items.type=1,items.data=[item]},paste:function(destId){return new Promise(function(resolve,reject){if(items.data.length<1)return Notification.warning("Clipboard is empty"),void resolve(!1);var apiType=0===items.type?"cloneAssets":"moveAssets",payload={assetId:items.data.map(function(x){return x._id}),sourceId:0===items.type?void 0:items.source,destId:0===items.type?void 0:destId,hierarchyId:0===items.type?destId:void 0};apiFactory[apiType](payload).then(function(resp){Notification.success(resp.data.message),items={type:0,data:[],source:null},resolve(!0)}).catch(function(e){reject(e)})})}}),navigationStack:function(){var stack=[],head=stack.length-1;return{push:function(item){stack.splice(head+1,stack.length,item),head=stack.length-1},forward:function(){if(stack.length&&head!==stack.length-1)return stack[++head]?(stack[head].toggle(),stack[head]):void 0},backward:function(){if(stack.length&&!(head<0))return stack[head]?(stack[head].toggle(),stack[--head]):void 0}}},breadCrumb:function(){var breadCrumbs=[];return{set:function(val){breadCrumbs.push(val)},get:function(){return breadCrumbs}}},splitDestination:function(filesArray){return filesArray.reduce(function(acc,x){return x.size<2e7&&("application/pdf"===x.type||/image*/.test(x.type))?acc.cloudinary.push(x):acc.s3.push(x),acc},{s3:[],cloudinary:[]})},resolveDestType:function(file){return file.size<15e7&&("application/pdf"===file.type||/image*/.test(file.type))?2:1},checkUploadCompletion:function(files){var bool=!0;return files.s3.forEach(function(x){x.completed||x.aborted||!bool||(bool=!1)}),files.cloudinary.forEach(function(x){x.completed||x.aborted||!bool||(bool=!1)}),bool}};var items})}(),function(){angular.module("app").factory("globals",function($http,$state,$location,ngProgressFactory,Notification,localStorageService){enabled=!0;var enabled;return{progress:(progressbar=ngProgressFactory.createInstance(),progressbar),logout:function(){localStorageService.remove("access-token"),localStorageService.remove("userData"),localStorageService.remove("companyData"),localStorageService.remove("currentProject"),localStorageService.remove("inventoryState"),$state.go("preLogin")},userStore:(userData=localStorageService.get("userData")||{},{set:function(data){return data.privilege=["admin","manager","sub_contractor","team_leader","worker"].indexOf(data.designation),localStorageService.set("userData",data),userData=data},get:function(){return userData},reset:function(){localStorageService.remove("userData"),userData={}}}),companyStore:(companyData=localStorageService.get("companyData")||null,{set:function(data){return localStorageService.set("companyData",data),companyData=data},get:function(){return companyData},refetch:function(id){$http({method:"GET",headers:{"x-access-token":localStorageService.get("access-token"),platform:JSON.stringify({source:"web"})},url:"https://api.staging.cloudes.eu/api/getCompanyById/"+id}).then(function(resp){localStorageService.set("companyData",resp.data)}).catch(function(e){console.log(e)})},reset:function(){localStorageService.remove("companyData"),companyData={}}}),projectStore:(currentProject=localStorageService.get("currentProject")||null,{set:function(data){return localStorageService.set("currentProject",data),currentProject=data},get:function(){return currentProject},reset:function(){localStorageService.remove("currentProject"),currentProject=null}}),inventoryState:function(){var state=localStorageService.get("inventoryState")||{tab:0,page:{material:1,combo:1}};return{setPage:function(type,value){state.page[type]=value,localStorageService.set("inventoryState",state)},setTab:function(val){state.tab=val,localStorageService.set("inventoryState",state)},get:function(){return state}}},mUnits:[{name:"mt",value:"mt"},{name:"sq.mt",value:"sq.mt"},{value:"cu.mt",name:"cu.mt"},{name:"ft",value:"ft"},{name:"sq.ft",value:"sq.ft"},{value:"cu.ft",name:"cu.ft"},{value:"unit",name:"unit"}],getCurrency:function(){return $http.get("/data/currencies.json")},getCountryCode:function(){return $http.get("/data/CountryCode.json")},getIndustry:function(){return $http.get("/data/industry.json")},debounce:function(rate){var timer=void 0;return function(fn,args){clearTimeout(timer),timer=setTimeout(function(){fn.apply(null,args)},rate)}},genericStore:function(){var item=void 0;return{store:function(val){item=val},get:function(){return item}}}};var currentProject;var companyData;var userData;var progressbar})}(),function(){angular.module("app").factory("uploadFactory",function($http,$location,localStorageService,apiFactory,Upload,cloudinary,Notification){var config={signerUrl:"https://api.staging.cloudes.eu/signv4_auth",aws_key:"AKIAJMO3YJTPKYV5DN5A",bucket:"3dfilesdata/test",awsRegion:"ap-south-1",computeContentMd5:!0,allowS3ExistenceOptimization:!0,cryptoMd5Method:function(data){return AWS.util.crypto.md5(data,"base64")},cryptoHexEncodedHash256:function(data){return AWS.util.crypto.sha256(data,"hex")}};return{init:function(){return Evaporate.create(config)},start:function(handler){var fileUpload=this.init();fileUpload.then(handler).catch(function(e){console.log(e)})},pause:function(file){this.pause("3dfilesdata/test/"+file.name,{force:!0}).then(function(){file.isPaused=!0,console.log("Paused!")}).catch(function(e){console.log(e)})},resume:function(file){this.resume("3dfilesdata/test/"+file.name).then(function(){file.isPaused=!1,console.log("Resumed!")}).catch(function(e){console.log(e)})},abort:function(file){this.cancel("3dfilesdata/test/"+file.name).then(function(){console.log("Canceled!")}).catch(function(e){console.log(e)})}}})}(),function(){angular.module("app").controller("_3dViewerCtrl",function($scope,$timeout,authFactory,$state,apiFactory,Notification,localStorageService,globals,NgMap){this.loggedIn=!0;var logout=globals.logout;globals.userStore,globals.throttler;if(!authFactory.checkUser())return logout(),void(this.loggedIn=!1);this.logout=function(){logout()}})}(),function(){angular.module("app").filter("convertCurrency",function(){return function(input,conversionRate){return input?input*conversionRate:0}}),angular.module("app").filter("roundNum",function(){return function(input,place){return input?Number(input).toFixed(place):0}})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJyb3V0ZXMubW9kdWxlLmpzIiwiYXBpLmZhY3RvcnkuanMiLCJhdXRoLmZhY3RvcnkuanMiLCJmaWxlTWFuYWdlci5mYWN0b3J5LmpzIiwiZ2xvYmFscy5mYWN0b3J5LmpzIiwiczN3cmFwcGVyLmZhY3RvcnkuanMiLCIzZC12aWV3ZXIuY29udHJvbGxlci5qcyIsImluZGV4LmZpbHRlci5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiTm90aWZpY2F0aW9uUHJvdmlkZXIiLCJ1aUdtYXBHb29nbGVNYXBBcGlQcm92aWRlciIsInRyZWVDb25maWciLCJjbG91ZGluYXJ5UHJvdmlkZXIiLCJjb25maWd1cmUiLCJrZXkiLCJ2IiwibGlicmFyaWVzIiwic2V0T3B0aW9ucyIsImRlbGF5Iiwic3RhcnRUb3AiLCJzdGFydFJpZ2h0IiwidmVydGljYWxTcGFjaW5nIiwiaG9yaXpvbnRhbFNwYWNpbmciLCJwb3NpdGlvblgiLCJwb3NpdGlvblkiLCJkZWZhdWx0Q29sbGFwc2VkIiwic2V0Iiwicm91dGVDb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIm90aGVyd2lzZSIsInN0YXRlIiwidXJsIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiZmFjdG9yeSIsIiRodHRwIiwiJHN0YXRlIiwiJGxvY2F0aW9uIiwibG9jYWxTdG9yYWdlU2VydmljZSIsImdsb2JhbHMiLCJVcGxvYWQiLCJOb3RpZmljYXRpb24iLCJfcmVmIiwiaGVhZGVycyIsIm1ldGhvZCIsInRva2VuIiwiQ29udGVudC1UeXBlIiwidW5kZWZpbmVkIiwieC1hY2Nlc3MtdG9rZW4iLCJnZXQiLCJwbGF0Zm9ybSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzb3VyY2UiLCJwcm9ncmVzcyIsImxvZ291dCIsInVzZXJTdG9yZSIsIl9kZWZpbmVQcm9wZXJ0eSIsImxvZ2luIiwicGF5bG9hZCIsInByb21pc2UiLCJ0aGlzIiwicHJvZ3Jlc3NpZnkiLCJkYXRhIiwiZm9yZ290UGFzc3dvcmQiLCJyZWdpc3RyYXRpb24iLCJzdWJzY3JpYmUiLCJnZXRDb21wYW55QnlJZCIsImNvbXBhbnlJZCIsImxpc3RBbGxVc2VycyIsImxpc3RBbGxQcm9qZWN0cyIsInF1ZXJ5T2JqIiwicXVlcnkiLCJPYmplY3QiLCJrZXlzIiwicmVkdWNlIiwiYWNjIiwic3RyIiwic2xpY2UiLCJsaXN0QWxsQ2xpZW50cyIsImxpc3RBbGxSb29mZXJzIiwiY3JlYXRlUHJvamVjdCIsImNyZWF0ZUlzc3VlIiwiaXNzdWVvYmoiLCJ1cGxvYWQiLCJ1cGRhdGVJc3N1ZSIsImlkIiwiY29uc29sZSIsImxvZyIsImdldFByb2plY3RSb29mUGxhbnMiLCJwcm9qZWN0SWQiLCJzYXZlUm9vZlBsYW4iLCJyb29mUGxhbklkIiwiY3JlYXRlTWF0ZXJpYWxzIiwiY3JlYXRlRXF1aXBtZW50IiwibGlzdEFsbE1hdGVyaWFscyIsImxpc3RBbGxDb21ib01hdGVyaWFscyIsImxpc3RBbGxFcXVpcG1lbnRzIiwidXBkYXRlTWF0ZXJpYWxCeUlkIiwiZ2V0TWF0ZXJpYWxCeUlkIiwibWF0ZXJpYWxJRCIsImdldENvbWJvTWF0ZXJpYWxCeUlkIiwiY29tYm9JZCIsImNyZWF0ZUNvbWJvTWF0ZXJpYWwiLCJ1cGRhdGVDb21ib01hdGVyaWFsTGlzdCIsInVwZGF0ZUNvbWJvTWF0ZXJpYWwiLCJzaG93Q29udmVyc2lvblJhdGUiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInN0YXJ0IiwidGhlbiIsInJlc3AiLCJjb21wbGV0ZSIsImNhdGNoIiwiZXJyIiwic3RhdHVzIiwiaGllcmFyY2h5SWQiLCJEYXRhM0QiLCJjbGllbnQiLCJuYW1lIiwiYWRkZWQiLCJjaGVja1VzZXIiLCJjaGVja1ByaXZpbGVnZSIsInR5cGUiLCJzdWJUeXBlIiwiX2xvY2FsU3RvcmFnZVNlcnZpY2UkIiwicHJpdmlsZWdlIiwiX2xvY2FsU3RvcmFnZVNlcnZpY2UkMiIsInByaXZpbGVnZXMiLCJhcGlGYWN0b3J5IiwiY2xpcEJvYXJkIiwiaXRlbXMiLCJjb3B5IiwiaXRlbSIsImN1dCIsInBhc3RlIiwiZGVzdElkIiwibGVuZ3RoIiwid2FybmluZyIsImFwaVR5cGUiLCJhc3NldElkIiwibWFwIiwieCIsIl9pZCIsInNvdXJjZUlkIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJlIiwibmF2aWdhdGlvblN0YWNrIiwic3RhY2siLCJoZWFkIiwicHVzaCIsInNwbGljZSIsImZvcndhcmQiLCJ0b2dnbGUiLCJiYWNrd2FyZCIsImJyZWFkQ3J1bWIiLCJicmVhZENydW1icyIsInZhbCIsInNwbGl0RGVzdGluYXRpb24iLCJmaWxlc0FycmF5Iiwic2l6ZSIsInRlc3QiLCJjbG91ZGluYXJ5IiwiczMiLCJyZXNvbHZlRGVzdFR5cGUiLCJmaWxlIiwiY2hlY2tVcGxvYWRDb21wbGV0aW9uIiwiZmlsZXMiLCJib29sIiwiZm9yRWFjaCIsImNvbXBsZXRlZCIsImFib3J0ZWQiLCJuZ1Byb2dyZXNzRmFjdG9yeSIsImVuYWJsZWQiLCJwcm9ncmVzc2JhciIsImNyZWF0ZUluc3RhbmNlIiwicmVtb3ZlIiwiZ28iLCJ1c2VyRGF0YSIsImluZGV4T2YiLCJkZXNpZ25hdGlvbiIsInJlc2V0IiwiY29tcGFueVN0b3JlIiwiY29tcGFueURhdGEiLCJyZWZldGNoIiwicHJvamVjdFN0b3JlIiwiY3VycmVudFByb2plY3QiLCJpbnZlbnRvcnlTdGF0ZSIsInRhYiIsInBhZ2UiLCJtYXRlcmlhbCIsImNvbWJvIiwic2V0UGFnZSIsInZhbHVlIiwic2V0VGFiIiwibVVuaXRzIiwiZ2V0Q3VycmVuY3kiLCJnZXRDb3VudHJ5Q29kZSIsImdldEluZHVzdHJ5IiwiZGVib3VuY2UiLCJyYXRlIiwidGltZXIiLCJmbiIsImFyZ3MiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiYXBwbHkiLCJnZW5lcmljU3RvcmUiLCJzdG9yZSIsInNpZ25lclVybCIsImF3c19rZXkiLCJidWNrZXQiLCJhd3NSZWdpb24iLCJjb21wdXRlQ29udGVudE1kNSIsImFsbG93UzNFeGlzdGVuY2VPcHRpbWl6YXRpb24iLCJjcnlwdG9NZDVNZXRob2QiLCJBV1MiLCJ1dGlsIiwiY3J5cHRvIiwibWQ1IiwiY3J5cHRvSGV4RW5jb2RlZEhhc2gyNTYiLCJzaGEyNTYiLCJpbml0IiwiRXZhcG9yYXRlIiwiY3JlYXRlIiwiaGFuZGxlciIsImZpbGVVcGxvYWQiLCJwYXVzZSIsImZvcmNlIiwiaXNQYXVzZWQiLCJyZXN1bWUiLCJhYm9ydCIsImNhbmNlbCIsIiRzY29wZSIsIiR0aW1lb3V0IiwiYXV0aEZhY3RvcnkiLCJOZ01hcCIsImxvZ2dlZEluIiwidGhyb3R0bGVyIiwiZmlsdGVyIiwiaW5wdXQiLCJjb252ZXJzaW9uUmF0ZSIsInBsYWNlIiwiTnVtYmVyIiwidG9GaXhlZCJdLCJtYXBwaW5ncyI6ImlMQUFBLElBQUFBLElBQUFDLFFBQUFDLE9BQUEsTUFBQSxDQUNBLFlBQ0EsZUFDQSxxQkFDQSxvQkFDQSxhQUNBLGtCQUNBLFFBQ0EsWUFDQSxhQUNBLGFBQ0EsZUFDQSxlQUNBLGFBQ0EsY0FDQSxlQUNBLGtCQUNBLFVBQ0EscUJBQ0EsZ0JBQ0EsV0FDQSxnQkFDQSwyQkFDQSxlQUlBLFNBQUFDLE9BQ0FDLHFCQUNBQywyQkFDQUMsV0FDQUMsb0JBSUFGLDJCQUFBRyxVQUFBLENBQ0FDLElBQUEsMENBQ0FDLEVBQUEsUUFDQUMsVUFBQSwwQ0FLQVAscUJBQUFRLFdBQUEsQ0FDQUMsTUFBQSxJQUNBQyxTQUFBLEdBQ0FDLFdBQUEsR0FDQUMsZ0JBQUEsR0FDQUMsa0JBQUEsR0FDQUMsVUFBQSxRQUNBQyxVQUFBLFFBSUFiLFdBQUFjLGtCQUFBLEVBR0FiLG1CQUNBYyxJQUFBLGFBQUEsYUFDQUEsSUFBQSxnQkFBQSxvQkN6REEsU0FBQUMsWUFBQUMsZUFBQUMsb0JBQ0FBLG1CQUFBQyxVQUFBLEtBQ0FGLGVBQUFHLE1BQUEsV0FBQSxDQUNBQyxJQUFBLElBQ0FDLFlBQUEsMkJBQ0FDLFdBQUEsd0JEa0JBN0IsSUFBQUcsT0FBQUEs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QSxXQUNBLE9BQUEsU0FBQUMsTUFBQUUsT0FDQSxPQUFBRixNQUdBRyxPQUFBSCxPQUFBSSxRQUFBRixPQUZBLEtBbEJBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBhcHAgPSBhbmd1bGFyLm1vZHVsZShcImFwcFwiLCBbXHJcbiAgXCJ1aS5yb3V0ZXJcIixcclxuICBcInJvdXRlc01vZHVsZVwiLFxyXG4gIFwiTG9jYWxTdG9yYWdlTW9kdWxlXCIsXHJcbiAgXCJ1aUdtYXBnb29nbGUtbWFwc1wiLFxyXG4gIFwibmdQcm9ncmVzc1wiLFxyXG4gIFwidWktbm90aWZpY2F0aW9uXCIsXHJcbiAgXCJuZ01hcFwiLFxyXG4gIFwidWkuc2VsZWN0XCIsXHJcbiAgJ3VpLnNlbGVjdDInLFxyXG4gIFwibmdTYW5pdGl6ZVwiLFxyXG4gIFwiY29sb3IucGlja2VyXCIsXHJcbiAgXCJ1aS5ib290c3RyYXBcIixcclxuICBcImRhdGF0YWJsZXNcIixcclxuICBcIm5nVGFnc0lucHV0XCIsXHJcbiAgXCJuZ0ZpbGVVcGxvYWRcIixcclxuICBcImluZmluaXRlLXNjcm9sbFwiLFxyXG4gIFwidWkudHJlZVwiLFxyXG4gIFwiYnRvcmZzLm11bHRpc2VsZWN0XCIsXHJcbiAgXCJodG1sVG9QZGZTYXZlXCIsXHJcbiAgXCJkbmRMaXN0c1wiLFxyXG4gIFwiYW5ndWxhci5jaGlwc1wiLFxyXG4gIFwidWkuYm9vdHN0cmFwLmNvbnRleHRNZW51XCIsXHJcbiAgXCJjbG91ZGluYXJ5XCJcclxuXSk7XHJcbmFwcC5jb25maWcoY29uZmlnKTtcclxuXHJcbmZ1bmN0aW9uIGNvbmZpZyhcclxuICBOb3RpZmljYXRpb25Qcm92aWRlcixcclxuICB1aUdtYXBHb29nbGVNYXBBcGlQcm92aWRlcixcclxuICB0cmVlQ29uZmlnLFxyXG4gIGNsb3VkaW5hcnlQcm92aWRlclxyXG4pIHtcclxuICAvKiBHb29nbGUgbWFwIGNvbmZpZyAqL1xyXG5cclxuICB1aUdtYXBHb29nbGVNYXBBcGlQcm92aWRlci5jb25maWd1cmUoe1xyXG4gICAga2V5OiBcIkFJemFTeUEzTUlBLW1LV3FfNjBxMUswek9IZ3VyYXhULTFRUHhOVVwiLFxyXG4gICAgdjogXCIzLmV4cFwiLFxyXG4gICAgbGlicmFyaWVzOiBcInBsYWNlcyx3ZWF0aGVyLGdlb21ldHJ5LHZpc3VhbGl6YXRpb25cIlxyXG4gIH0pO1xyXG5cclxuICAvKiBOb3RpZmljYXRpb24gY29uZmlnICovXHJcblxyXG4gIE5vdGlmaWNhdGlvblByb3ZpZGVyLnNldE9wdGlvbnMoe1xyXG4gICAgZGVsYXk6IDMwMDAsXHJcbiAgICBzdGFydFRvcDogMjAsXHJcbiAgICBzdGFydFJpZ2h0OiAxMCxcclxuICAgIHZlcnRpY2FsU3BhY2luZzogMjAsXHJcbiAgICBob3Jpem9udGFsU3BhY2luZzogMjAsXHJcbiAgICBwb3NpdGlvblg6IFwicmlnaHRcIixcclxuICAgIHBvc2l0aW9uWTogXCJ0b3BcIlxyXG4gIH0pO1xyXG5cclxuICAvKiBUcmVlIGNvbmZpZ3VyYXRpb24gKi9cclxuICB0cmVlQ29uZmlnLmRlZmF1bHRDb2xsYXBzZWQgPSB0cnVlO1xyXG5cclxuICAvKiBDbG91ZGluYXJ5IGNvbmZpZyAqL1xyXG4gIGNsb3VkaW5hcnlQcm92aWRlclxyXG4gICAgLnNldChcImNsb3VkX25hbWVcIiwgXCJka3RuaG1zanhcIilcclxuICAgIC5zZXQoXCJ1cGxvYWRfcHJlc2V0XCIsIFwiY2xvdWRlc19mcm9udGVuZFwiKTtcclxufVxyXG4iLCJhbmd1bGFyLm1vZHVsZShcInJvdXRlc01vZHVsZVwiLCBbXSkuY29uZmlnKHJvdXRlQ29uZmlnKTtcclxuXHJcbmZ1bmN0aW9uIHJvdXRlQ29uZmlnKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcclxuICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKFwiL1wiKTtcclxuICAkc3RhdGVQcm92aWRlci5zdGF0ZShcIjNkVmlld2VyXCIsIHtcclxuICAgIHVybDogXCIvXCIsXHJcbiAgICB0ZW1wbGF0ZVVybDogXCIvcGFydGlhbHMvM2Qtdmlld2VyLmh0bWxcIixcclxuICAgIGNvbnRyb2xsZXI6IFwiXzNkVmlld2VyQ3RybCBhcyB2bVwiXHJcbiAgfSk7XHJcbn1cclxuIiwiKCgpID0+IHtcclxuICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5mYWN0b3J5KFwiYXBpRmFjdG9yeVwiLCBhcGlGYWN0b3J5KTtcclxuXHJcbiAgZnVuY3Rpb24gYXBpRmFjdG9yeShcclxuICAgICRodHRwLFxyXG4gICAgJHN0YXRlLFxyXG4gICAgJGxvY2F0aW9uLFxyXG4gICAgbG9jYWxTdG9yYWdlU2VydmljZSxcclxuICAgIGdsb2JhbHMsXHJcbiAgICBVcGxvYWQsXHJcbiAgICBOb3RpZmljYXRpb25cclxuICApIHtcclxuICAgICAgY29uc3QgdXJsID0gXCJodHRwczovL2FwaS5zdGFnaW5nLmNsb3VkZXMuZXVcIixcclxuICAgICAgLy9jb25zdCB1cmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6NDIwMFwiLFxyXG4gICAgICAvL2NvbnN0IHVybCA9IFwiaHR0cDovL2xvY2FsaG9zdDoxMzM3XCIsXHJcbiAgICAgIGhlYWRlcnMgPSAobWV0aG9kLCB0b2tlbikgPT4ge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBtZXRob2QgPT09IFwiR0VUXCIgPyB1bmRlZmluZWQgOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgICAgIFwieC1hY2Nlc3MtdG9rZW5cIjogdG9rZW5cclxuICAgICAgICAgICAgPyBsb2NhbFN0b3JhZ2VTZXJ2aWNlLmdldChcImFjY2Vzcy10b2tlblwiKVxyXG4gICAgICAgICAgICA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgIHBsYXRmb3JtOiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgIHNvdXJjZTogXCJ3ZWJcIlxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG4gICAgICB9LFxyXG4gICAgICBoZWFkZXJzM0QgPSAobWV0aG9kLCB0b2tlbikgPT4ge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBtZXRob2QgPT09IFwiR0VUXCIgPyB1bmRlZmluZWQgOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgICAgIFwieC1hY2Nlc3MtdG9rZW5cIjogdG9rZW5cclxuICAgICAgICAgICAgPyBsb2NhbFN0b3JhZ2VTZXJ2aWNlLmdldChcImFjY2Vzcy10b2tlblwiKVxyXG4gICAgICAgICAgICA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgIGtleTogXCJmYXZ5QDEyM1wiXHJcbiAgICAgICAgfTtcclxuICAgICAgfSxcclxuICAgICAgeyBwcm9ncmVzcywgdXNlclN0b3JlLCBsb2dvdXQgfSA9IGdsb2JhbHM7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbG9naW46IGZ1bmN0aW9uKHBheWxvYWQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hdXRoZW50aWNhdGVcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBPU1RcIiksXHJcbiAgICAgICAgICAgIGRhdGE6IHBheWxvYWRcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuICAgICAgZm9yZ290UGFzc3dvcmQ6IGZ1bmN0aW9uKHBheWxvYWQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9mb3JnZXRQYXNzd29yZFwiLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUE9TVFwiKSxcclxuICAgICAgICAgICAgZGF0YTogcGF5bG9hZFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgcmVnaXN0cmF0aW9uOiBmdW5jdGlvbihwYXlsb2FkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvZGFzaGJvYXJkUmVnaXN0cmF0aW9uXCIsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJQT1NUXCIpLFxyXG4gICAgICAgICAgICBkYXRhOiBwYXlsb2FkXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBzdWJzY3JpYmU6IGZ1bmN0aW9uKHBheWxvYWQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9zdWJzY3JpYmVcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBPU1RcIiksXHJcbiAgICAgICAgICAgIGRhdGE6IHBheWxvYWRcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGdldENvbXBhbnlCeUlkOiBmdW5jdGlvbihjb21wYW55SWQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiBgJHt1cmx9L2FwaS9nZXRDb21wYW55QnlJZC8ke2NvbXBhbnlJZH1gLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJHRVRcIiwgdHJ1ZSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGxpc3RBbGxVc2VyczogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL2dldGFkbWludXNlcnNcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiR0VUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvLyBsaXN0QWxsQ291bnRyeUNvZGUgPSBmdW5jdGlvbiAoY2IpIHtcclxuICAgICAgLy8gICAkcm9vdFNjb3BlLmFwaVdhaXQgPSB0cnVlO1xyXG4gICAgICAvLyAgICRodHRwXHJcbiAgICAgIC8vICAgICAuZ2V0KFwiYXBwL2RhdGEvY29tbW9uLWFwaS9Db3VudHJ5Q29kZS5qc29uXCIsIHZtLmdldENvbmZpZygpKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgLy8gICAgICAgJHJvb3RTY29wZS5hcGlXYWl0ID0gZmFsc2U7XHJcbiAgICAgIC8vICAgICAgIGNiKHJlcy5kYXRhKTtcclxuICAgICAgLy8gICAgIH0sXHJcbiAgICAgIC8vICAgICBmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgIC8vICAgICAgICRyb290U2NvcGUuYXBpV2FpdCA9IGZhbHNlO1xyXG4gICAgICAvLyAgICAgICBpZiAoZXJyLnN0YXR1cykge1xyXG4gICAgICAvLyAgICAgICAgIHZtLnNob3dBbGVydCh0aGlzLCBlcnIpO1xyXG4gICAgICAvLyAgICAgICB9XHJcbiAgICAgIC8vICAgICAgIGVsc2Uge1xyXG4gICAgICAvLyAgICAgICAgIGNiKGVyci5kYXRhKTtcclxuICAgICAgLy8gICAgICAgfVxyXG4gICAgICAvLyAgICAgfSlcclxuICAgICAgLy99LFxyXG5cclxuICAgICAgbGlzdEFsbFByb2plY3RzOiBmdW5jdGlvbihxdWVyeU9iaikge1xyXG4gICAgICAgIGxldCBxdWVyeSA9ICFxdWVyeU9iaiAvLyBidWlsZGluZyBxdWVyeSBzdHJpbmdcclxuICAgICAgICAgID8gXCJcIlxyXG4gICAgICAgICAgOiBPYmplY3Qua2V5cyhxdWVyeU9iaikucmVkdWNlKChhY2MsIHYpID0+IHtcclxuICAgICAgICAgICAgICBsZXQgc3RyID0gYCR7dn09JHtxdWVyeU9ialt2XX0mYDtcclxuICAgICAgICAgICAgICBhY2MgKz0gc3RyO1xyXG4gICAgICAgICAgICAgIHJldHVybiBhY2M7XHJcbiAgICAgICAgICAgIH0sIFwiP1wiKTtcclxuICAgICAgICBxdWVyeSA9IHF1ZXJ5LnNsaWNlKDAsIC0xKTsgLy8gcmVtb3ZlIHRyYWlsaW5nICZcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvbGlzdEFsbFByb2plY3RzXCIgKyBxdWVyeSxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiR0VUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBsaXN0QWxsQ2xpZW50czogZnVuY3Rpb24ocXVlcnlPYmopIHtcclxuICAgICAgICAvLyBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAvLyAgICRodHRwKHtcclxuICAgICAgICAvLyAgICAgdXJsOiB1cmwgKyBcIlwiLFxyXG4gICAgICAgIC8vICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgLy8gICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJHRVRcIiwgdHJ1ZSlcclxuICAgICAgICAvLyAgIH0pXHJcbiAgICAgICAgLy8gKTtcclxuICAgICAgICAvLyByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgICBsZXQgcXVlcnkgPSAhcXVlcnlPYmogLy8gYnVpbGRpbmcgcXVlcnkgc3RyaW5nXHJcbiAgICAgICAgICA/IFwiXCJcclxuICAgICAgICAgIDogT2JqZWN0LmtleXMocXVlcnlPYmopLnJlZHVjZSgoYWNjLCB2KSA9PiB7XHJcbiAgICAgICAgICAgICAgbGV0IHN0ciA9IGAke3Z9PSR7cXVlcnlPYmpbdl19JmA7XHJcbiAgICAgICAgICAgICAgYWNjICs9IHN0cjtcclxuICAgICAgICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICAgICAgICB9LCBcIj9cIik7XHJcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5zbGljZSgwLCAtMSk7IC8vIHJlbW92ZSB0cmFpbGluZyAmXHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL2xpc3RBbGxDbGllbnRzXCIgKyBxdWVyeSxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiR0VUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBsaXN0QWxsUm9vZmVyczogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL2xpc3RBbGxSb29mZXJzXCIsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIkdFVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgY3JlYXRlUHJvamVjdDogZnVuY3Rpb24ocGF5bG9hZCkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9jcmVhdGVQcm9qZWN0XCIsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJQT1NUXCIsIHRydWUpLFxyXG4gICAgICAgICAgICBkYXRhOiBwYXlsb2FkXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBjcmVhdGVJc3N1ZTogZnVuY3Rpb24oaXNzdWVvYmopIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgIFVwbG9hZC51cGxvYWQoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9jcmVhdGVJc3N1ZVwiLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICBkYXRhOiBpc3N1ZW9iaixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBPU1RcIiwgdHJ1ZSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIHVwZGF0ZUlzc3VlOiBmdW5jdGlvbihpc3N1ZW9iaiwgaWQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkF0IGFwaWZhY3RvcnkgdXBkYXRlIG9iajpcIiwgaXNzdWVvYmopO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQXQgSUQ6XCIsIGlkKTtcclxuXHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICBVcGxvYWQudXBsb2FkKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvdXBkYXRlSXNzdWUvXCIgKyBpZCxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgICAgICBkYXRhOiBpc3N1ZW9iaixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBVVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgZ2V0UHJvamVjdFJvb2ZQbGFuczogZnVuY3Rpb24ocHJvamVjdElkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL2dldFByb2plY3RSb29mUGxhbnMvXCIgKyBwcm9qZWN0SWQsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIkdFVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgc2F2ZVJvb2ZQbGFuOiBmdW5jdGlvbihyb29mUGxhbklkLCBwYXlsb2FkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL3NhdmVSb29mUGxhbi9cIiArIHJvb2ZQbGFuSWQsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBVVFwiLCB0cnVlKSxcclxuICAgICAgICAgICAgZGF0YTogcGF5bG9hZFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgY3JlYXRlTWF0ZXJpYWxzOiBmdW5jdGlvbihwYXlsb2FkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICBVcGxvYWQudXBsb2FkKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvY3JlYXRlTWF0ZXJpYWxcIixcclxuICAgICAgICAgICAgZGF0YTogcGF5bG9hZCxcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBPU1RcIiwgdHJ1ZSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGNyZWF0ZUVxdWlwbWVudDogZnVuY3Rpb24ocGF5bG9hZCkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgVXBsb2FkLnVwbG9hZCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL2NyZWF0ZUVxdWlwbWVudFwiLFxyXG4gICAgICAgICAgICBkYXRhOiBwYXlsb2FkLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUE9TVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgbGlzdEFsbE1hdGVyaWFsczogZnVuY3Rpb24ocXVlcnlPYmopIHtcclxuICAgICAgICBsZXQgcXVlcnkgPSAhcXVlcnlPYmogLy8gYnVpbGRpbmcgcXVlcnkgc3RyaW5nXHJcbiAgICAgICAgICA/IFwiXCJcclxuICAgICAgICAgIDogT2JqZWN0LmtleXMocXVlcnlPYmopLnJlZHVjZSgoYWNjLCB2KSA9PiB7XHJcbiAgICAgICAgICAgICAgbGV0IHN0ciA9IGAke3Z9PSR7cXVlcnlPYmpbdl19JmA7XHJcbiAgICAgICAgICAgICAgYWNjICs9IHN0cjtcclxuICAgICAgICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICAgICAgICB9LCBcIj9cIik7XHJcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5zbGljZSgwLCAtMSk7IC8vIHJlbW92ZSB0cmFpbGluZyAmXHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL2xpc3RBbGxNYXRlcmlhbHNcIiArIHF1ZXJ5LFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJHRVRcIiwgdHJ1ZSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGxpc3RBbGxDb21ib01hdGVyaWFsczogZnVuY3Rpb24ocXVlcnlPYmopIHtcclxuICAgICAgICBsZXQgcXVlcnkgPSAhcXVlcnlPYmogLy8gYnVpbGRpbmcgcXVlcnkgc3RyaW5nXHJcbiAgICAgICAgICA/IFwiXCJcclxuICAgICAgICAgIDogT2JqZWN0LmtleXMocXVlcnlPYmopLnJlZHVjZSgoYWNjLCB2KSA9PiB7XHJcbiAgICAgICAgICAgICAgbGV0IHN0ciA9IGAke3Z9PSR7cXVlcnlPYmpbdl19JmA7XHJcbiAgICAgICAgICAgICAgYWNjICs9IHN0cjtcclxuICAgICAgICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICAgICAgICB9LCBcIj9cIik7XHJcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5zbGljZSgwLCAtMSk7IC8vIHJlbW92ZSB0cmFpbGluZyAmXHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL2xpc3RDb21ib01hdGVyaWFsc1wiICsgcXVlcnksXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIkdFVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgbGlzdEFsbEVxdWlwbWVudHM6IGZ1bmN0aW9uKHF1ZXJ5T2JqKSB7XHJcbiAgICAgICAgbGV0IHF1ZXJ5ID0gIXF1ZXJ5T2JqIC8vIGJ1aWxkaW5nIHF1ZXJ5IHN0cmluZ1xyXG4gICAgICAgICAgPyBcIlwiXHJcbiAgICAgICAgICA6IE9iamVjdC5rZXlzKHF1ZXJ5T2JqKS5yZWR1Y2UoKGFjYywgdikgPT4ge1xyXG4gICAgICAgICAgICAgIGxldCBzdHIgPSBgJHt2fT0ke3F1ZXJ5T2JqW3ZdfSZgO1xyXG4gICAgICAgICAgICAgIGFjYyArPSBzdHI7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGFjYztcclxuICAgICAgICAgICAgfSwgXCI/XCIpO1xyXG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkuc2xpY2UoMCwgLTEpOyAvLyByZW1vdmUgdHJhaWxpbmcgJlxyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9saXN0QWxsRXF1aXBtZW50c1wiICsgcXVlcnksXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIkdFVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgdXBkYXRlTWF0ZXJpYWxCeUlkOiBmdW5jdGlvbihpZCwgcGF5bG9hZCkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgVXBsb2FkLnVwbG9hZCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL3VwZGF0ZU1hdGVyaWFsQnlJZC9cIiArIGlkLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJQVVRcIiwgdHJ1ZSksXHJcbiAgICAgICAgICAgIGRhdGE6IHBheWxvYWRcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGdldE1hdGVyaWFsQnlJZDogZnVuY3Rpb24obWF0ZXJpYWxJRCkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IGAke3VybH0vYXBpL2dldE1hdGVyaWFsQnlJZC8ke21hdGVyaWFsSUR9YCxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiR0VUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBnZXRDb21ib01hdGVyaWFsQnlJZDogZnVuY3Rpb24oY29tYm9JZCkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IGAke3VybH0vYXBpL2dldENvbWJvTWF0ZXJpYWxCeUlkLyR7Y29tYm9JZH1gLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJHRVRcIiwgdHJ1ZSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuICAgICAgY3JlYXRlQ29tYm9NYXRlcmlhbDogZnVuY3Rpb24ocGF5bG9hZCkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgVXBsb2FkLnVwbG9hZCh7XHJcbiAgICAgICAgICAgIHVybDogYCR7dXJsfS9hcGkvY3JlYXRlQ29tYm9NYXRlcmlhbGAsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJQT1NUXCIsIHRydWUpLFxyXG4gICAgICAgICAgICBkYXRhOiBwYXlsb2FkXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcbiAgICAgIHVwZGF0ZUNvbWJvTWF0ZXJpYWxMaXN0OiBmdW5jdGlvbihpZCwgcGF5bG9hZCkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IGAke3VybH0vYXBpL3VwZGF0ZUNvbWJvTWF0ZXJpYWxMaXN0LyR7aWR9YCxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUE9TVFwiLCB0cnVlKSxcclxuICAgICAgICAgICAgZGF0YTogcGF5bG9hZFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgdXBkYXRlQ29tYm9NYXRlcmlhbDogZnVuY3Rpb24oaWQsIHBheWxvYWQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgIFVwbG9hZC51cGxvYWQoe1xyXG4gICAgICAgICAgICB1cmw6IGAke3VybH0vYXBpL3VwZGF0ZUNvbWJvTWF0ZXJpYWwvJHtpZH1gLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJQT1NUXCIsIHRydWUpLFxyXG4gICAgICAgICAgICBkYXRhOiBwYXlsb2FkXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcbiAgICAgIHNob3dDb252ZXJzaW9uUmF0ZTogZnVuY3Rpb24ocGF5bG9hZCkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9zaG93Q29udmVyc2lvblJhdGVcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBPU1RcIiwgdHJ1ZSksXHJcbiAgICAgICAgICAgIGRhdGE6IHBheWxvYWRcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8vIGdldEN1cnJlbmN5QmFzZWRPbkNhbGN1bGF0aW9uRGF0ZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgIC8vICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgIC8vICAgICAkaHR0cCh7XHJcbiAgICAgIC8vICAgICAgIHVybDogdXJsICsgXCIvYXBpL2dldEN1cnJlbmN5QmFzZWRPbkNhbGN1bGF0aW9uRGF0ZVwiLFxyXG4gICAgICAvLyAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAvLyAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUE9TVFwiLCB0cnVlKSxcclxuICAgICAgLy8gICAgICAgZGF0YToge1xyXG4gICAgICAvLyAgICAgICAgIGRhdGU6IG5ldyBEYXRlKClcclxuICAgICAgLy8gICAgICAgfVxyXG4gICAgICAvLyAgICAgfSlcclxuICAgICAgLy8gICApO1xyXG4gICAgICAvLyAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICAvLyB9LFxyXG4gICAgICBnZXRNYXRlcmlhbEJ5SWQ6IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL2dldE1hdGVyaWFsQnlJZC9cIiArIGlkLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJHRVRcIiwgdHJ1ZSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuICAgICAgLyogRGVjb3JhdGUgYWpheCBjYWxscyB3aXRoIHByb2dyZXNzIGJhciAqL1xyXG4gICAgICBwcm9ncmVzc2lmeTogcHJvbWlzZSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgIHByb2dyZXNzLnN0YXJ0KCk7XHJcbiAgICAgICAgICBwcm9taXNlXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgIHByb2dyZXNzLmNvbXBsZXRlKCk7XHJcbiAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgcHJvZ3Jlc3MuY29tcGxldGUoKTtcclxuICAgICAgICAgICAgICBpZiAoZXJyLnN0YXR1cyA9PT0gNDAxKSB7XHJcbiAgICAgICAgICAgICAgICBsb2dvdXQoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgbGlzdEFsbElzc3VlczogZnVuY3Rpb24ocXVlcnlPYmopIHtcclxuICAgICAgICBsZXQgcXVlcnkgPSAhcXVlcnlPYmogLy8gYnVpbGRpbmcgcXVlcnkgc3RyaW5nXHJcbiAgICAgICAgICA/IFwiXCJcclxuICAgICAgICAgIDogT2JqZWN0LmtleXMocXVlcnlPYmopLnJlZHVjZSgoYWNjLCB2KSA9PiB7XHJcbiAgICAgICAgICAgICAgbGV0IHN0ciA9IGAke3Z9PSR7cXVlcnlPYmpbdl19JmA7XHJcbiAgICAgICAgICAgICAgYWNjICs9IHN0cjtcclxuICAgICAgICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICAgICAgICB9LCBcIj9cIik7XHJcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5zbGljZSgwLCAtMSk7IC8vIHJlbW92ZSB0cmFpbGluZyAmXHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL2xpc3RBbGxJc3N1ZXNcIiArIHF1ZXJ5LFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJHRVRcIiwgdHJ1ZSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGdldElzc3Vlc0xpc3Q6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9hbGxJc3N1ZXNcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiR0VUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcbiAgICAgIGlzVG9rZW5WYWxpZDogZnVuY3Rpb24ocGF5bG9hZCkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2lzVG9rZW5WYWxpZFwiLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUE9TVFwiLCB0cnVlKSxcclxuICAgICAgICAgICAgZGF0YTogcGF5bG9hZFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgc2V0UGFzc3dvcmQ6IGZ1bmN0aW9uKHBheWxvYWQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9yZXNldFBhc3N3b3JkQWRtaW5cIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUFVUXCIsIHRydWUpLFxyXG4gICAgICAgICAgICBkYXRhOiBwYXlsb2FkXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICB1cGRhdGVSb2xlQmFzZWRBY2Nlc3M6IGZ1bmN0aW9uKHBheWxvYWQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvdXBkYXRlUm9sZUJhc2VkQWNjZXNzXCIsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBVVFwiLCB0cnVlKSxcclxuICAgICAgICAgICAgZGF0YTogcGF5bG9hZFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyogRmlsZSBNYW5hZ2VyIEFQSXMgKi9cclxuICAgICAgYWRkSGllcmFyY2h5OiBmdW5jdGlvbihwYXlsb2FkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL2FkZEhpZXJhcmNoeVwiLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUE9TVFwiLCB0cnVlKSxcclxuICAgICAgICAgICAgZGF0YTogcGF5bG9hZFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG4gICAgICBnZXRIaWVyYXJjaHlDaGlsZHJlbjogZnVuY3Rpb24oaGllcmFyY2h5SWQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvZ2V0SGllcmFyY2h5Q2hpbGRyZW4vXCIgKyBoaWVyYXJjaHlJZCxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiR0VUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcbiAgICAgIGdldEhpZXJhcmNoeTogZnVuY3Rpb24ocHJvamVjdElkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL2dldEhpZXJhcmNoeS9cIiArIHByb2plY3RJZCArIFwiP2RlcHRoPTJcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiR0VUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcbiAgICAgIHZpZXdQcm9qZWN0QXNzZXRzOiBmdW5jdGlvbihwcm9qZWN0SWQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvdmlld1Byb2plY3RBc3NldHMvXCIgKyBwcm9qZWN0SWQsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIkdFVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgYWRkRmlsZVRvSGllcmFyY2h5OiBmdW5jdGlvbihwYXlsb2FkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL2FkZEZpbGVUb0hpZXJhcmNoeVwiLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJQVVRcIiwgdHJ1ZSksXHJcbiAgICAgICAgICAgIGRhdGE6IHBheWxvYWRcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIHZpZXdIaWVyYXJjaHk6IGZ1bmN0aW9uKGhpZXJhcmNoeUlkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL3ZpZXdIaWVyYXJjaHkvXCIgKyBoaWVyYXJjaHlJZCxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiR0VUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBjbG9uZUFzc2V0czogZnVuY3Rpb24ocGF5bG9hZCkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9jbG9uZUFzc2V0c1wiLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJQVVRcIiwgdHJ1ZSksXHJcbiAgICAgICAgICAgIGRhdGE6IHBheWxvYWRcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuICAgICAgXHJcbiAgICAgIHVwbG9hZEZpbGVJbkZpbGVNYW5hZ2VyOiBmdW5jdGlvbihwYXlsb2FkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICBVcGxvYWQudXBsb2FkKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvdXBsb2FkRmlsZUluRmlsZU1hbmFnZXJcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgZGF0YTogcGF5bG9hZCxcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBPU1RcIiwgdHJ1ZSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGRyYWdNb3ZlTm9kZXM6IGZ1bmN0aW9uKHBheWxvYWQpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvZHJhZ01vdmVOb2Rlc1wiLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgICAgIGRhdGE6IHBheWxvYWQsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJQT1NUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBtb3ZlQXNzZXRzOiBmdW5jdGlvbihwYXlsb2FkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL21vdmVBc3NldHNcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgICAgICBkYXRhOiBwYXlsb2FkLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUE9TVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgZGVsZXRlQXNzZXRzOiBmdW5jdGlvbihwYXlsb2FkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL2RlbGV0ZUFzc2V0c1wiLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgICAgIGRhdGE6IHBheWxvYWQsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoXCJQT1NUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcbiAgICAgIC8vM0Qtc2l0ZSByZWRpcmVjdGlvbiBhcGkgY2FsbFxyXG5cclxuICAgICAgZ2V0M0RQYWdlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBsZXQgdG9rZW4gPSBsb2NhbFN0b3JhZ2VTZXJ2aWNlLmdldChcImFjY2Vzcy10b2tlblwiKTtcclxuXHJcbiAgICAgICAgdmFyIERhdGEzRCA9IHtcclxuICAgICAgICAgIFwieC1hY2Nlc3MtdG9rZW5cIjogdG9rZW4sXHJcbiAgICAgICAgICBwcm9qZWN0SWQ6IFwiNWI2OTdjMDMwYTdlOTcwNTY4MzVhOTRhXCJcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9jbG91ZGVzLTNkLmNvbVwiLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICBkYXRhOiBEYXRhM0RcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8vY3JlYXRlIG5ldyBjbGllbnRcclxuICAgICAgY3JlYXRlQ2xpZW50OiBmdW5jdGlvbihjbGllbnQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImNsaWVudCBpbiBhcGkgZmFjdG9yeVwiLCBjbGllbnQpO1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9jcmVhdGVDbGllbnRcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBPU1RcIiwgdHJ1ZSksXHJcbiAgICAgICAgICAgIGRhdGE6IGNsaWVudFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgc2F2ZUhpZXJhcmNoeVRyZWU6IGZ1bmN0aW9uKHByb2plY3RJZCwgbmFtZSkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9zYXZlSGllcmFyY2h5VHJlZS9cIiArIHByb2plY3RJZCxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUE9TVFwiLCB0cnVlKSxcclxuICAgICAgICAgICAgZGF0YTogbmFtZVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgZ2V0U3lzdGVtVGFnOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvZ2V0Q29tYm9TeXN0ZW1UYWdcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiR0VUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcbiAgICAgIGJvb2tNYXJrUHJvamVjdDogZnVuY3Rpb24oaWQsIGFkZGVkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL2Jvb2tNYXJrUHJvamVjdFwiLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICBwcm9qZWN0SWQ6IGlkLFxyXG4gICAgICAgICAgICAgIGFkZGVkOiBhZGRlZFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUE9TVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG4gICAgICBnZXRCb29rbWFya3M6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9nZXRCb29rbWFya3NcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiR0VUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcbiAgICAgIGdldEhpZXJhcmNoeVRlbXBsYXRlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmVzc2lmeShcclxuICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwgKyBcIi9hcGkvZ2V0SGllcmFyY2h5VGVtcGxhdGVcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiR0VUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBsb2FkSGllcmFyY2h5VHJlZTogZnVuY3Rpb24ocGF5bG9hZCkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9sb2FkSGllcmFyY2h5VHJlZVwiLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICBkYXRhOiBwYXlsb2FkLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiUE9TVFwiLCB0cnVlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9LFxyXG4gICAgICBuZXdGaWxlVXBsb2FkOiBmdW5jdGlvbihwYXlsb2FkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucHJvZ3Jlc3NpZnkoXHJcbiAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsICsgXCIvYXBpL25ld0ZpbGVVcGxvYWRcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgZGF0YTogcGF5bG9hZCxcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBPU1RcIiwgdHJ1ZSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIHNob3dQcm9qZWN0RmlsZXM6IGZ1bmN0aW9uKHF1ZXJ5T2JqKSB7XHJcbiAgICAgICAgbGV0IHF1ZXJ5ID0gIXF1ZXJ5T2JqIC8vIGJ1aWxkaW5nIHF1ZXJ5IHN0cmluZ1xyXG4gICAgICAgICAgPyBcIlwiXHJcbiAgICAgICAgICA6IE9iamVjdC5rZXlzKHF1ZXJ5T2JqKS5yZWR1Y2UoKGFjYywgdikgPT4ge1xyXG4gICAgICAgICAgICAgIGxldCBzdHIgPSBgJHt2fT0ke3F1ZXJ5T2JqW3ZdfSZgO1xyXG4gICAgICAgICAgICAgIGFjYyArPSBzdHI7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGFjYztcclxuICAgICAgICAgICAgfSwgXCI/XCIpO1xyXG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkuc2xpY2UoMCwgLTEpOyAvLyByZW1vdmUgdHJhaWxpbmcgJlxyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9zaG93UHJvamVjdEZpbGVzXCIgKyBxdWVyeSxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKFwiR0VUXCIsIHRydWUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH0sXHJcbiAgICAgIGNoYW5nZVByb2plY3RUZW1wbGF0ZTogZnVuY3Rpb24ocGF5bG9hZCkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb2dyZXNzaWZ5KFxyXG4gICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCArIFwiL2FwaS9jaGFuZ2VQcm9qZWN0VGVtcGxhdGVcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgZGF0YTogcGF5bG9hZCxcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyhcIlBPU1RcIiwgdHJ1ZSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcbn0pKCk7XHJcbiIsIigoKSA9PiB7XHJcbiAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuZmFjdG9yeShcImF1dGhGYWN0b3J5XCIsIGF1dGhGYWN0b3J5KTtcclxuXHJcbiAgZnVuY3Rpb24gYXV0aEZhY3RvcnkoJGh0dHAsICRsb2NhdGlvbiwgbG9jYWxTdG9yYWdlU2VydmljZSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgY2hlY2tVc2VyOiAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2VTZXJ2aWNlLmdldChcImFjY2Vzcy10b2tlblwiKTtcclxuICAgICAgICBpZiAodG9rZW4gJiYgdG9rZW4gIT0gXCJcIikge1xyXG4gICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGNoZWNrUHJpdmlsZWdlOiAodHlwZSwgc3ViVHlwZSkgPT4ge1xyXG4gICAgICAgIGxldCB7IHByaXZpbGVnZSB9ID0gbG9jYWxTdG9yYWdlU2VydmljZS5nZXQoXCJ1c2VyRGF0YVwiKTtcclxuICAgICAgICBsZXQgeyBwcml2aWxlZ2VzIH0gPSBsb2NhbFN0b3JhZ2VTZXJ2aWNlLmdldChcImNvbXBhbnlEYXRhXCIpO1xyXG5cclxuICAgICAgICBpZiAocHJpdmlsZWdlIDw9IHByaXZpbGVnZXNbdHlwZV1bc3ViVHlwZV0pIHtcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxufSkoKTtcclxuIiwiKCgpID0+IHtcclxuICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5mYWN0b3J5KFwiZmlsZU1hbmFnZXJGYWN0b3J5XCIsIGZpbGVNYW5hZ2VyRmFjdG9yeSk7XHJcblxyXG4gIGZ1bmN0aW9uIGZpbGVNYW5hZ2VyRmFjdG9yeShhcGlGYWN0b3J5LCBOb3RpZmljYXRpb24pIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGNsaXBCb2FyZDogKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8qICAqL1xyXG4gICAgICAgIGxldCBpdGVtcyA9IHtcclxuICAgICAgICAgIHR5cGU6IDAsXHJcbiAgICAgICAgICBkYXRhOiBbXSxcclxuICAgICAgICAgIHNvdXJjZTogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGNvcHk6IGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICAgICAgaXRlbXMuc291cmNlID0gbnVsbDtcclxuICAgICAgICAgICAgaXRlbXMudHlwZSA9IDA7XHJcbiAgICAgICAgICAgIGl0ZW1zLmRhdGEgPSBbaXRlbV07XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgY3V0OiBmdW5jdGlvbihpdGVtLCBzb3VyY2UpIHtcclxuICAgICAgICAgICAgaXRlbXMuc291cmNlID0gc291cmNlO1xyXG4gICAgICAgICAgICBpdGVtcy50eXBlID0gMTtcclxuICAgICAgICAgICAgaXRlbXMuZGF0YSA9IFtpdGVtXTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBwYXN0ZTogZnVuY3Rpb24oZGVzdElkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgaWYgKGl0ZW1zLmRhdGEubGVuZ3RoIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgTm90aWZpY2F0aW9uLndhcm5pbmcoXCJDbGlwYm9hcmQgaXMgZW1wdHlcIik7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGNvbnN0IGFwaVR5cGUgPSBpdGVtcy50eXBlID09PSAwID8gXCJjbG9uZUFzc2V0c1wiIDogXCJtb3ZlQXNzZXRzXCI7XHJcblxyXG4gICAgICAgICAgICAgIC8qIENoYW5nZSBwYXlsb2FkIGRlcGVuZGluZyB1cG9uIGN1dCBvciBjb3B5ICovXHJcbiAgICAgICAgICAgICAgbGV0IHBheWxvYWQgPSB7XHJcbiAgICAgICAgICAgICAgICBhc3NldElkOiBpdGVtcy5kYXRhLm1hcCh4ID0+IHguX2lkKSxcclxuICAgICAgICAgICAgICAgIHNvdXJjZUlkOiBpdGVtcy50eXBlID09PSAwID8gdW5kZWZpbmVkIDogaXRlbXMuc291cmNlLFxyXG4gICAgICAgICAgICAgICAgZGVzdElkOiBpdGVtcy50eXBlID09PSAwID8gdW5kZWZpbmVkIDogZGVzdElkLFxyXG4gICAgICAgICAgICAgICAgaGllcmFyY2h5SWQ6IGl0ZW1zLnR5cGUgPT09IDAgPyBkZXN0SWQgOiB1bmRlZmluZWRcclxuICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICBhcGlGYWN0b3J5W2FwaVR5cGVdKHBheWxvYWQpXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgICAgICAgTm90aWZpY2F0aW9uLnN1Y2Nlc3MocmVzcC5kYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAvKiBDbGVhciBjbGlwYm9hcmQgYWZ0ZXIgcGFzdGluZyAqL1xyXG4gICAgICAgICAgICAgICAgICBpdGVtcyA9IHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogbnVsbFxyXG4gICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIH0pKCksXHJcblxyXG4gICAgICBuYXZpZ2F0aW9uU3RhY2s6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGxldCBzdGFjayA9IFtdLFxyXG4gICAgICAgICAgaGVhZCA9IHN0YWNrLmxlbmd0aCAtIDEsXHJcbiAgICAgICAgICAvLyBUT0RPOiBubyBhY3Rpb24gaGFuZGxlciByZXF1aXJlZCBmb3Igbm93XHJcbiAgICAgICAgICBhdHRhY2hIYW5kbGVyID0gYWN0aW9uID0+IHtcclxuICAgICAgICAgICAgbGV0IG9iaiA9IHt9O1xyXG4gICAgICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgcHVzaDogaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHN0YWNrLnNwbGljZShoZWFkICsgMSwgc3RhY2subGVuZ3RoLCBpdGVtKTtcclxuICAgICAgICAgICAgaGVhZCA9IHN0YWNrLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZm9yd2FyZDogKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgb2JqO1xyXG4gICAgICAgICAgICBpZiAoIXN0YWNrLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgIC8qIElnbm9yZSBmb3IgZW1wdHkgc3RhY2sgKi9cclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGhlYWQgPT09IHN0YWNrLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAvKiBJZ25vcmUgZm9yIGVuZCBvZiB0aGUgc3RhY2sgKi9cclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGhlYWQrKztcclxuICAgICAgICAgICAgaWYgKHN0YWNrW2hlYWRdKSB7XHJcbiAgICAgICAgICAgICAgc3RhY2tbaGVhZF0udG9nZ2xlKCk7XHJcbiAgICAgICAgICAgICAgb2JqID0gc3RhY2tbaGVhZF07XHJcbiAgICAgICAgICAgICAgcmV0dXJuIG9iajtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGJhY2t3YXJkOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBvYmo7XHJcbiAgICAgICAgICAgIGlmICghc3RhY2subGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgLyogSWdub3JlIGZvciBlbXB0eSBzdGFjayAqL1xyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGhlYWQgPCAwKSB7XHJcbiAgICAgICAgICAgICAgLyogSWdub3JlIGZvciBlbmQgb2YgdGhlIHN0YWNrICovXHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzdGFja1toZWFkXSkge1xyXG4gICAgICAgICAgICAgIHN0YWNrW2hlYWRdLnRvZ2dsZSgpO1xyXG4gICAgICAgICAgICAgIGhlYWQtLTtcclxuICAgICAgICAgICAgICBvYmogPSBzdGFja1toZWFkXTtcclxuICAgICAgICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGJyZWFkQ3J1bWI6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGxldCBicmVhZENydW1icyA9IFtdO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBzZXQ6IHZhbCA9PiB7XHJcbiAgICAgICAgICAgIGJyZWFkQ3J1bWJzLnB1c2godmFsKTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBnZXQ6ICgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGJyZWFkQ3J1bWJzO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQHBhcmFtIHtPYmplY3R9IGZpbGVPYmpcclxuICAgICAgICogQHJldHVybnMge09iamVjdH0gIHsgczM6IFtmaWxlc10sIGNsb3VkaW5hcnk6IFtmaWxlc10gfVxyXG4gICAgICAgKi9cclxuXHJcbiAgICAgIHNwbGl0RGVzdGluYXRpb246IGZpbGVzQXJyYXkgPT4ge1xyXG4gICAgICAgIHJldHVybiBmaWxlc0FycmF5LnJlZHVjZShcclxuICAgICAgICAgIChhY2MsIHgpID0+IHtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgIHguc2l6ZSA8IDIwMDAwMDAwICYmXHJcbiAgICAgICAgICAgICAgKHgudHlwZSA9PT0gXCJhcHBsaWNhdGlvbi9wZGZcIiB8fCAvaW1hZ2UqLy50ZXN0KHgudHlwZSkpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgIGFjYy5jbG91ZGluYXJ5LnB1c2goeCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgYWNjLnMzLnB1c2goeCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGFjYztcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB7IHMzOiBbXSwgY2xvdWRpbmFyeTogW10gfVxyXG4gICAgICAgICk7XHJcbiAgICAgIH0sXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gZmlsZVNpemVcclxuICAgICAgICogQHJldHVybnMge051bWJlcn0gIDEgLSBkaXJlY3QgczMsIDIgLSBzMyAtPiBjbG91ZGluYXJ5XHJcbiAgICAgICAqL1xyXG5cclxuICAgICAgcmVzb2x2ZURlc3RUeXBlOiBmaWxlID0+IHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBmaWxlLnNpemUgPCAxNTAwMDAwMDAgJiZcclxuICAgICAgICAgIChmaWxlLnR5cGUgPT09IFwiYXBwbGljYXRpb24vcGRmXCIgfHwgL2ltYWdlKi8udGVzdChmaWxlLnR5cGUpKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgcmV0dXJuIDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAxO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgY2hlY2tVcGxvYWRDb21wbGV0aW9uOiBmaWxlcyA9PiB7XHJcbiAgICAgICAgbGV0IGJvb2wgPSB0cnVlO1xyXG4gICAgICAgIGZpbGVzLnMzLmZvckVhY2goeCA9PiB7XHJcbiAgICAgICAgICBpZiAoIXguY29tcGxldGVkICYmICF4LmFib3J0ZWQgJiYgYm9vbCkge1xyXG4gICAgICAgICAgICBib29sID0gZmFsc2U7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZmlsZXMuY2xvdWRpbmFyeS5mb3JFYWNoKHggPT4ge1xyXG4gICAgICAgICAgaWYgKCF4LmNvbXBsZXRlZCAmJiAheC5hYm9ydGVkICYmIGJvb2wpIHtcclxuICAgICAgICAgICAgYm9vbCA9IGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBib29sO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxufSkoKTtcclxuIiwiKCgpID0+IHtcclxuICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5mYWN0b3J5KFwiZ2xvYmFsc1wiLCBnbG9iYWxzKTtcclxuXHJcbiAgZnVuY3Rpb24gZ2xvYmFscyhcclxuICAgICRodHRwLFxyXG4gICAgJHN0YXRlLFxyXG4gICAgJGxvY2F0aW9uLFxyXG4gICAgbmdQcm9ncmVzc0ZhY3RvcnksXHJcbiAgICBOb3RpZmljYXRpb24sXHJcbiAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlXHJcbiAgKSB7XHJcbiAgICAvKiBUbyBhdm9pZCByZWR1bmRhbnQgZnVuY3Rpb24gY2FsbHMgb2YgdGhlIHNhbWUgdHlwZSAoRWcuIG11bHRpcGxlIHRva2VuIGV4cGlyZWQgbWVzc2FnZXMpICovXHJcbiAgICBsZXQgdGhyb3R0bGVyID0gKCgpID0+IHtcclxuICAgICAgbGV0IGVuYWJsZWQgPSB0cnVlO1xyXG4gICAgICByZXR1cm4gZm4gPT4ge1xyXG4gICAgICAgIGlmIChlbmFibGVkKSB7XHJcbiAgICAgICAgICBlbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgZW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGZuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgfSkoKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBwcm9ncmVzczogKCgpID0+IHtcclxuICAgICAgICBsZXQgcHJvZ3Jlc3NiYXIgPSBuZ1Byb2dyZXNzRmFjdG9yeS5jcmVhdGVJbnN0YW5jZSgpO1xyXG4gICAgICAgIHJldHVybiBwcm9ncmVzc2JhcjtcclxuICAgICAgfSkoKSxcclxuICAgICAgbG9nb3V0OiAoKSA9PiB7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlU2VydmljZS5yZW1vdmUoXCJhY2Nlc3MtdG9rZW5cIik7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlU2VydmljZS5yZW1vdmUoXCJ1c2VyRGF0YVwiKTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLnJlbW92ZShcImNvbXBhbnlEYXRhXCIpO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZVNlcnZpY2UucmVtb3ZlKFwiY3VycmVudFByb2plY3RcIik7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlU2VydmljZS5yZW1vdmUoXCJpbnZlbnRvcnlTdGF0ZVwiKTtcclxuXHJcbiAgICAgICAgJHN0YXRlLmdvKFwicHJlTG9naW5cIik7XHJcbiAgICAgICAgLy90aHJvdHRsZXIoKCkgPT4gTm90aWZpY2F0aW9uLmVycm9yKFwiUGxlYXNlIGxvZ2luXCIpKTtcclxuICAgICAgfSxcclxuICAgICAgLyogQWNjZXNzIHVzZXIgaW5mbyBnbG9iYWxseSAqL1xyXG4gICAgICB1c2VyU3RvcmU6ICgoKSA9PiB7XHJcbiAgICAgICAgbGV0IHVzZXJEYXRhID0gbG9jYWxTdG9yYWdlU2VydmljZS5nZXQoXCJ1c2VyRGF0YVwiKSB8fCB7fTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHNldDogZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVzZXJSb2xlcyA9IFtcclxuICAgICAgICAgICAgICBcImFkbWluXCIsXHJcbiAgICAgICAgICAgICAgXCJtYW5hZ2VyXCIsXHJcbiAgICAgICAgICAgICAgXCJzdWJfY29udHJhY3RvclwiLFxyXG4gICAgICAgICAgICAgIFwidGVhbV9sZWFkZXJcIixcclxuICAgICAgICAgICAgICBcIndvcmtlclwiXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIGRhdGEucHJpdmlsZWdlID0gdXNlclJvbGVzLmluZGV4T2YoZGF0YS5kZXNpZ25hdGlvbik7XHJcblxyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldChcInVzZXJEYXRhXCIsIGRhdGEpO1xyXG4gICAgICAgICAgICB1c2VyRGF0YSA9IGRhdGE7XHJcbiAgICAgICAgICAgIHJldHVybiB1c2VyRGF0YTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBnZXQ6ICgpID0+IHVzZXJEYXRhLFxyXG4gICAgICAgICAgcmVzZXQ6ICgpID0+IHtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlU2VydmljZS5yZW1vdmUoXCJ1c2VyRGF0YVwiKTtcclxuICAgICAgICAgICAgdXNlckRhdGEgPSB7fTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICB9KSgpLFxyXG5cclxuICAgICAgY29tcGFueVN0b3JlOiAoKCkgPT4ge1xyXG4gICAgICAgIGxldCBjb21wYW55RGF0YSA9IGxvY2FsU3RvcmFnZVNlcnZpY2UuZ2V0KFwiY29tcGFueURhdGFcIikgfHwgbnVsbDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHNldDogZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZVNlcnZpY2Uuc2V0KFwiY29tcGFueURhdGFcIiwgZGF0YSk7XHJcbiAgICAgICAgICAgIGNvbXBhbnlEYXRhID0gZGF0YTtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbXBhbnlEYXRhO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGdldDogKCkgPT4gY29tcGFueURhdGEsXHJcbiAgICAgICAgICAvKiBDYWxsIHJlZmV0Y2ggd2hlbiBjb21wYW55IGRlcGVuZGFudCBkYXRhIGlzIG1vZGlmaWVkICovXHJcbiAgICAgICAgICByZWZldGNoOiBpZCA9PiB7XHJcbiAgICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgXCJ4LWFjY2Vzcy10b2tlblwiOiBsb2NhbFN0b3JhZ2VTZXJ2aWNlLmdldChcImFjY2Vzcy10b2tlblwiKSxcclxuICAgICAgICAgICAgICAgIHBsYXRmb3JtOiBKU09OLnN0cmluZ2lmeSh7IHNvdXJjZTogXCJ3ZWJcIiB9KVxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgdXJsOiBgaHR0cHM6Ly9hcGkuc3RhZ2luZy5jbG91ZGVzLmV1L2FwaS9nZXRDb21wYW55QnlJZC8ke2lkfWBcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZVNlcnZpY2Uuc2V0KFwiY29tcGFueURhdGFcIiwgcmVzcC5kYXRhKTtcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHJlc2V0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZVNlcnZpY2UucmVtb3ZlKFwiY29tcGFueURhdGFcIik7XHJcbiAgICAgICAgICAgIGNvbXBhbnlEYXRhID0ge307XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfSkoKSxcclxuXHJcbiAgICAgIHByb2plY3RTdG9yZTogKCgpID0+IHtcclxuICAgICAgICBsZXQgY3VycmVudFByb2plY3QgPSBsb2NhbFN0b3JhZ2VTZXJ2aWNlLmdldChcImN1cnJlbnRQcm9qZWN0XCIpIHx8IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHNldDogZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZVNlcnZpY2Uuc2V0KFwiY3VycmVudFByb2plY3RcIiwgZGF0YSk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRQcm9qZWN0ID0gZGF0YTtcclxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRQcm9qZWN0O1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGdldDogKCkgPT4gY3VycmVudFByb2plY3QsXHJcbiAgICAgICAgICByZXNldDogKCkgPT4ge1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLnJlbW92ZShcImN1cnJlbnRQcm9qZWN0XCIpO1xyXG4gICAgICAgICAgICBjdXJyZW50UHJvamVjdCA9IG51bGw7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfSkoKSxcclxuXHJcbiAgICAgIGludmVudG9yeVN0YXRlOiAoKSA9PiB7XHJcbiAgICAgICAgbGV0IHN0YXRlID0gbG9jYWxTdG9yYWdlU2VydmljZS5nZXQoXCJpbnZlbnRvcnlTdGF0ZVwiKSB8fCB7XHJcbiAgICAgICAgICB0YWI6IDAsXHJcbiAgICAgICAgICBwYWdlOiB7XHJcbiAgICAgICAgICAgIG1hdGVyaWFsOiAxLFxyXG4gICAgICAgICAgICBjb21ibzogMVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBzZXRQYWdlOiAodHlwZSwgdmFsdWUpID0+IHtcclxuICAgICAgICAgICAgc3RhdGUucGFnZVt0eXBlXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldChcImludmVudG9yeVN0YXRlXCIsIHN0YXRlKTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBzZXRUYWI6IHZhbCA9PiB7XHJcbiAgICAgICAgICAgIHN0YXRlLnRhYiA9IHZhbDtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlU2VydmljZS5zZXQoXCJpbnZlbnRvcnlTdGF0ZVwiLCBzdGF0ZSk7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZ2V0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgbVVuaXRzOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbmFtZTogXCJtdFwiLFxyXG4gICAgICAgICAgdmFsdWU6IFwibXRcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbmFtZTogXCJzcS5tdFwiLFxyXG4gICAgICAgICAgdmFsdWU6IFwic3EubXRcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdmFsdWU6IFwiY3UubXRcIixcclxuICAgICAgICAgIG5hbWU6IFwiY3UubXRcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbmFtZTogXCJmdFwiLFxyXG4gICAgICAgICAgdmFsdWU6IFwiZnRcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbmFtZTogXCJzcS5mdFwiLFxyXG4gICAgICAgICAgdmFsdWU6IFwic3EuZnRcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdmFsdWU6IFwiY3UuZnRcIixcclxuICAgICAgICAgIG5hbWU6IFwiY3UuZnRcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdmFsdWU6IFwidW5pdFwiLFxyXG4gICAgICAgICAgbmFtZTogXCJ1bml0XCJcclxuICAgICAgICB9XHJcbiAgICAgIF0sXHJcblxyXG4gICAgICBnZXRDdXJyZW5jeTogKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiAkaHR0cC5nZXQoXCIvZGF0YS9jdXJyZW5jaWVzLmpzb25cIik7XHJcbiAgICAgIH0sXHJcbiAgICAgIGdldENvdW50cnlDb2RlOiAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuICRodHRwLmdldChcIi9kYXRhL0NvdW50cnlDb2RlLmpzb25cIik7XHJcbiAgICAgIH0sXHJcbiAgICAgIGdldEluZHVzdHJ5OiAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuICRodHRwLmdldChcIi9kYXRhL2luZHVzdHJ5Lmpzb25cIik7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBkZWJvdW5jZTogcmF0ZSA9PiB7XHJcbiAgICAgICAgbGV0IHRpbWVyO1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihmbiwgYXJncykge1xyXG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcclxuICAgICAgICAgIHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGZuLmFwcGx5KG51bGwsIGFyZ3MpO1xyXG4gICAgICAgICAgfSwgcmF0ZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGdlbmVyaWNTdG9yZTogKCkgPT4ge1xyXG4gICAgICAgIGxldCBpdGVtO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBzdG9yZTogdmFsID0+IHtcclxuICAgICAgICAgICAgaXRlbSA9IHZhbDtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBnZXQ6ICgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcbn0pKCk7XHJcbiIsIigoKSA9PiB7XHJcbiAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuZmFjdG9yeShcInVwbG9hZEZhY3RvcnlcIiwgdXBsb2FkRmFjdG9yeSk7XHJcblxyXG4gIGZ1bmN0aW9uIHVwbG9hZEZhY3RvcnkoXHJcbiAgICAkaHR0cCxcclxuICAgICRsb2NhdGlvbixcclxuICAgIGxvY2FsU3RvcmFnZVNlcnZpY2UsXHJcbiAgICBhcGlGYWN0b3J5LFxyXG4gICAgVXBsb2FkLFxyXG4gICAgY2xvdWRpbmFyeSxcclxuICAgIE5vdGlmaWNhdGlvblxyXG4gICkge1xyXG4gICAgLyogQVdTIENPTkZJRyAqL1xyXG4gICAgY29uc3QgYnVja2V0TmFtZSA9IFwiM2RmaWxlc2RhdGFcIjtcclxuICAgIGNvbnN0IGJ1Y2tldFJlZ2lvbiA9IFwiYXAtc291dGgtMVwiO1xyXG4gICAgbGV0IGNvbmZpZyA9IHtcclxuICAgICAgc2lnbmVyVXJsOiBgaHR0cHM6Ly9hcGkuc3RhZ2luZy5jbG91ZGVzLmV1L3NpZ252NF9hdXRoYCxcclxuICAgICAgYXdzX2tleTogXCJBS0lBSk1PM1lKVFBLWVY1RE41QVwiLFxyXG4gICAgICBidWNrZXQ6IFwiM2RmaWxlc2RhdGEvdGVzdFwiLFxyXG4gICAgICBhd3NSZWdpb246IGJ1Y2tldFJlZ2lvbixcclxuICAgICAgY29tcHV0ZUNvbnRlbnRNZDU6IHRydWUsXHJcbiAgICAgIGFsbG93UzNFeGlzdGVuY2VPcHRpbWl6YXRpb246IHRydWUsXHJcbiAgICAgIGNyeXB0b01kNU1ldGhvZDogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIHJldHVybiBBV1MudXRpbC5jcnlwdG8ubWQ1KGRhdGEsIFwiYmFzZTY0XCIpO1xyXG4gICAgICB9LFxyXG4gICAgICBjcnlwdG9IZXhFbmNvZGVkSGFzaDI1NjogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIHJldHVybiBBV1MudXRpbC5jcnlwdG8uc2hhMjU2KGRhdGEsIFwiaGV4XCIpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGluaXQ6ICgpID0+IHtcclxuICAgICAgICByZXR1cm4gRXZhcG9yYXRlLmNyZWF0ZShjb25maWcpO1xyXG4gICAgICB9LFxyXG4gICAgICBzdGFydDogZnVuY3Rpb24oaGFuZGxlcikge1xyXG4gICAgICAgIGxldCBmaWxlVXBsb2FkID0gdGhpcy5pbml0KCk7XHJcblxyXG4gICAgICAgIGZpbGVVcGxvYWQudGhlbihoYW5kbGVyKS5jYXRjaChlID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG4gICAgICBwYXVzZTogZnVuY3Rpb24oZmlsZSkge1xyXG4gICAgICAgIHRoaXMucGF1c2UoYDNkZmlsZXNkYXRhL3Rlc3QvJHtmaWxlLm5hbWV9YCwgeyBmb3JjZTogdHJ1ZSB9KVxyXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGZpbGUuaXNQYXVzZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlBhdXNlZCFcIik7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG4gICAgICByZXN1bWU6IGZ1bmN0aW9uKGZpbGUpIHtcclxuICAgICAgICB0aGlzLnJlc3VtZShgM2RmaWxlc2RhdGEvdGVzdC8ke2ZpbGUubmFtZX1gKVxyXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGZpbGUuaXNQYXVzZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZXN1bWVkIVwiKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGFib3J0OiBmdW5jdGlvbihmaWxlKSB7XHJcbiAgICAgICAgdGhpcy5jYW5jZWwoYDNkZmlsZXNkYXRhL3Rlc3QvJHtmaWxlLm5hbWV9YClcclxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvL2ZpbGUuYWJvcnRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2FuY2VsZWQhXCIpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICAvLyB1cGxvYWQ6IGZpbGUgPT4ge1xyXG4gICAgICAvLyAgIGNvbnNvbGUubG9nKFwiZmlsZSEhXCIsIGZpbGUpO1xyXG4gICAgICAvLyAgIC8qIENoZWNrIGZpbGUgc2l6ZSAqL1xyXG4gICAgICAvLyAgIGlmIChmaWxlLnNpemUgPiAxMDAwMDAwMCkge1xyXG4gICAgICAvLyAgICAgLyogczMgZm9yIGZpbGVzIGxhcmdlciB0aGFuIDEwbWIgKi9cclxuICAgICAgLy8gICAgIGNvbnN0IHBhcmFtcyA9IHsgS2V5OiBmaWxlLm5hbWUsIENvbnRlbnRUeXBlOiBmaWxlLnR5cGUsIEJvZHk6IGZpbGUgfTtcclxuICAgICAgLy8gICAgIHMzLnB1dE9iamVjdChwYXJhbXMpXHJcbiAgICAgIC8vICAgICAgIC5vbihcImh0dHBVcGxvYWRQcm9ncmVzc1wiLCBwcm9ncmVzcyA9PiB7XHJcbiAgICAgIC8vICAgICAgICAgLyogVE9ETzogR3JhYmJpbmcgcHJvZ3Jlc3MgZXZlbnQgKi9cclxuICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZyhcInByb2dyZXNcIiwgcHJvZ3Jlc3MpO1xyXG4gICAgICAvLyAgICAgICB9KVxyXG4gICAgICAvLyAgICAgICAuc2VuZCgoZXJyLCBkYXRhKSA9PiB7XHJcbiAgICAgIC8vICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAvLyAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgLy8gICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAvLyAgICAgICAgICAgY29uc29sZS5sb2coXCJkb25lXCIsIGRhdGEpO1xyXG4gICAgICAvLyAgICAgICAgIH1cclxuICAgICAgLy8gICAgICAgfSk7XHJcbiAgICAgIC8vICAgfSBlbHNlIHtcclxuICAgICAgLy8gICAgIC8qIFNlbmQgdG8gY2xvdWRpbmFyeSAqL1xyXG4gICAgICAvLyAgICAgVXBsb2FkLnVwbG9hZCh7XHJcbiAgICAgIC8vICAgICAgIHVybDpcclxuICAgICAgLy8gICAgICAgICBcImh0dHBzOi8vYXBpLmNsb3VkaW5hcnkuY29tL3YxXzEvXCIgK1xyXG4gICAgICAvLyAgICAgICAgIGNsb3VkaW5hcnkuY29uZmlnKCkuY2xvdWRfbmFtZSArXHJcbiAgICAgIC8vICAgICAgICAgXCIvdXBsb2FkXCIsXHJcbiAgICAgIC8vICAgICAgIGRhdGE6IHtcclxuICAgICAgLy8gICAgICAgICB1cGxvYWRfcHJlc2V0OiBjbG91ZGluYXJ5LmNvbmZpZygpLnVwbG9hZF9wcmVzZXQsXHJcbiAgICAgIC8vICAgICAgICAgdGFnczogZmlsZS5uYW1lLFxyXG4gICAgICAvLyAgICAgICAgIGNvbnRleHQ6IFwicGhvdG89XCIgKyBEYXRlLm5vdygpLFxyXG4gICAgICAvLyAgICAgICAgIGZpbGU6IGZpbGVcclxuICAgICAgLy8gICAgICAgfVxyXG4gICAgICAvLyAgICAgfSlcclxuICAgICAgLy8gICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coXCJyZXNwISFcIiwgcmVzcCk7XHJcbiAgICAgIC8vICAgICAgIH0pXHJcbiAgICAgIC8vICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZyhcImVyclwiLCBlKTtcclxuICAgICAgLy8gICAgICAgfSk7XHJcbiAgICAgIC8vICAgfVxyXG4gICAgICAvLyB9XHJcbiAgICB9O1xyXG4gIH1cclxufSkoKTtcclxuIiwiKCgpID0+IHtcclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJfM2RWaWV3ZXJDdHJsXCIsIF8zZFZpZXdlckN0cmwpO1xyXG5cclxuICAgIGZ1bmN0aW9uIF8zZFZpZXdlckN0cmwoXHJcbiAgICAkc2NvcGUsXHJcbiAgICAkdGltZW91dCxcclxuICAgIGF1dGhGYWN0b3J5LFxyXG4gICAgJHN0YXRlLFxyXG4gICAgYXBpRmFjdG9yeSxcclxuICAgIE5vdGlmaWNhdGlvbixcclxuICAgIGxvY2FsU3RvcmFnZVNlcnZpY2UsXHJcbiAgICBnbG9iYWxzLFxyXG4gICAgTmdNYXBcclxuICApIHtcclxuICAgIC8qIFJlcXVpcmluZyB2YXJzICovXHJcblxyXG4gICAgbGV0IHZtID0gdGhpcztcclxuICAgICAgdm0ubG9nZ2VkSW4gPSB0cnVlXHJcbiAgICBjb25zdCB7IGxvZ291dCwgdXNlclN0b3JlLCB0aHJvdHRsZXIgfSA9IGdsb2JhbHM7XHJcblxyXG4gICAgaWYgKCFhdXRoRmFjdG9yeS5jaGVja1VzZXIoKSkge1xyXG4gICAgICBsb2dvdXQoKTtcclxuICAgICAgdm0ubG9nZ2VkSW4gPSBmYWxzZVxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdm0ubG9nb3V0ID0gKCkgPT4ge1xyXG4gICAgICBsb2dvdXQoKTtcclxuICAgIH07XHJcbiAgfVxyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmZpbHRlcihcImNvbnZlcnRDdXJyZW5jeVwiLCBjb252ZXJ0Q3VycmVuY3kpO1xyXG5cclxuICBmdW5jdGlvbiBjb252ZXJ0Q3VycmVuY3koKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQsIGNvbnZlcnNpb25SYXRlKSB7XHJcbiAgICAgIGlmICghaW5wdXQpIHtcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gaW5wdXQgKiBjb252ZXJzaW9uUmF0ZTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmZpbHRlcihcInJvdW5kTnVtXCIsIHJvdW5kTnVtKTtcclxuXHJcbiAgZnVuY3Rpb24gcm91bmROdW0oKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQsIHBsYWNlKSB7XHJcbiAgICAgIGlmICghaW5wdXQpIHtcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gTnVtYmVyKGlucHV0KS50b0ZpeGVkKHBsYWNlKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIFxyXG4gIFxyXG5cclxufSkoKTtcclxuIl19
