<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" crossorigin="anonymous">
<div ng-include="'/partials/header.html'"></div>
<section class="subcontractor-detail sectionbg heightfull">
        <div class="container-fluid">
          <div class="row">
            <div class="col-12">
              <div class="outlineblock animated fadeInUp" data-wow-delay="0.3s">
                <div class="d-md-flex">
                  <div class="col-lg-4 col-md-5 pad0">
                      <button data-target="#update_modal" style="float: right;" class="btn edit_btn transition ripple border-0" data-toggle="modal">
                          <img src="assets/images/edit.png" />
                        </button>
                    <img src="assets/images/curvebg.png" class="img-fluid w-100 animated zoomIn wow" data-wow-delay="0.6s" alt="curve-bg">
                    
                    <div class="tree_logo d-flex align-items-center justify-content-center mx-auto spaceup2 animated zoomIn wow" data-wow-delay="0.6s">
                      <div class="d-flex align-items-center justify-content-center animated zoomIn wow" data-wow-delay="0.7s">
                        <img src="{{vm.subcontractorData.profilePic}}" class="subcontractractor-profile img-fluid animated zoomIn wow"
                          data-wow-delay="0.8s">
                      </div>
                    </div>
                    <div class="space40"></div>
                    <div class="animated fadeInDown wow" data-wow-delay="0.9s">
                      <h2 class="headThree text-center" style="text-transform:capitalize;">{{vm.subcontractorData.name}}</h2>
                      <p class="f500 txtgrey mb-0 small_tag text-center">{{vm.subcontractorData.created | date : 'MMM dd, yyyy'}}</p>                  
                    </div>                          
                    <div class="sidespacing2 animated fadeInDown wow" data-wow-delay=".9s">
                      <div class="input-group input_form">
                        <div class="input-group-prepend">
                          <div class="input-group-text">
                            <img src="assets/images/suppliers/call.png" class="img-fluid" alt="call">
                          </div>
                        </div>
                        <input type="text" class="form-control" placeholder="{{vm.subcontractorData.contact.dialCode}}{{vm.subcontractorData.contact.phoneNumber}}">
                      </div>
                      <div class="input-group input_form spaceup">
                        <div class="input-group-prepend">
                          <div class="input-group-text">
                            <img src="assets/images/suppliers/mail.png" class="img-fluid" alt="mail">
                          </div>
                        </div>
                        <input type="text" class="form-control" placeholder="{{vm.subcontractorData.email}}">
                      </div>
                      <div class="input-group input_form spaceup">
                        <div class="input-group-prepend">
                          <div class="input-group-text">
                            <img src="assets/images/suppliers/building.png" class="img-fluid" alt="building">
                          </div>
                        </div>
                        <input type="text" class="form-control" placeholder="{{vm.subcontractorData.address}}">
                      </div>
                      <!-- <div class="space40"></div> -->
                     
                    </div>            
                  </div>
                  <div class="col-lg-8 col-md-7 pad0">
                      <ul class="nav nav-tabs" id="myTab" role="tablist">
                          <li class="nav-item">
                            <a class="nav-link active ripple ripple2" id="supplier-tab" data-toggle="tab" data-target="#supplier" role="tab" aria-controls="home" aria-selected="true">
                              Attributes
                              <span class="lbl_stat low transition staff_num">{{vm.subcontractorData.attributes.length}}</span>
                            </a>
                          </li>
                          <li class="nav-item">
                            <a class="nav-link ripple ripple2" id="staff-tab" data-toggle="tab" data-target="#staff" role="tab" aria-controls="profile" aria-selected="false">
                                Staff Members
                              <span class="lbl_stat low transition staff_num">{{vm.subcontractorData.staff.length}}</span>
                            </a>
                          </li>
                          
                        </ul>
                        <div class="tab-content" id="myTabContent">
                            <div class="tab-pane fade show active" id="supplier" role="tabpanel" aria-labelledby="supplier-tab">
                               <div class="sidespacing2">
                                <ul class="list-unstyled member_list animated fadeIn wow" data-wow-delay="1.0s">
                                    <li ng-repeat=" member in vm.subcontractorData.attributes">{{member.tagName}}</li>
                                  </ul> 
                              </div>              
                            </div>
                            <div class="tab-pane fade " id="staff" role="tabpanel" aria-labelledby="staff-tab">
                              <div class="sidespacing2">
                                <ul class="list-unstyled member_list animated fadeIn wow" data-wow-delay="1.0s">
                                    <li ng-repeat=" staff in vm.subcontractorData.staff">{{staff.name}}</li>
                                  </ul>
                              </div>  
                            </div>
                        </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      


      <!--update subcontractor modal popup-->
      <!-- Modal Contractor -->
<div class="modal fade popup2 contract_supply" id="update_modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <div class="d-flex align-items-center justify-content-between w-100">
            <h5 class="modal-title f500 txtwhite">Edit Subcontractor</h5>            
          </div>
        </div>
        <div class="modal-body pad0">
           <div id="navigation">
          <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
              <a class="nav-link active ripple ripple2" id="home-tab" data-toggle="tab" data-target="#home" role="tab" aria-controls="home" aria-selected="true">Subcontractor</a>
            </li>
            <li class="nav-item">
              <a class="nav-link ripple ripple2" id="profile-tab" data-toggle="tab" data-target="#profile" role="tab" aria-controls="profile" aria-selected="false">Attributes</a>
            </li>
            <li class="nav-item">
              <a class="nav-link ripple ripple2" id="contact-tab" data-toggle="tab" data-target="#contact" role="tab" aria-controls="contact" aria-selected="false">Staff Members</a>
            </li>
          </ul>
          </div>
          <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
              <div class="sidespacing">
                <div class="tree_logo d-flex align-items-center justify-content-center position-relative mx-auto">
                  <div class="d-flex align-items-center justify-content-center">
                    <img src="{{FILEIMG}}" id="fileimage" class="addprofilelogo img-fluid" alt="logo">
                  </div>
                  <button class="btn btn_addon ripple"
                   ngf-select ng-model="vm.subcontractorData.file" name="file"
                   ngf-change="onChange($files)"
                   aria-invalid="false" data-wow-delay="0.7s">
                    <img src="assets/images/suppliers/plus3.png" class="img-fluid" alt="plus">
                  </button>
                </div>
                <div class="f_block">
                  <p class="fsize18 f500 txtgrey c_space space15">Subcontractor Name</p>
                  <input type="text" class="form-control animated zoomIn wow" ng-model="vm.subcontractorData.name">
                </div>
                <div class="f_block">
                    <p class="fsize18 f500 txtgrey c_space space15">Contact</p>
                    <div class="row">
                        <div class="col-6">
                          <p class="fsize18 f500 txtgrey c_space space15">Dial Code</p>
                          <select ui-select2 ng-model="vm.subcontractorData.contact.dialCode" id="editdial" class="form-control"
                          placeholder="dial Code">
                          <option ng-repeat="currency in vm.getCountryCode" value="{{currency.dialCode}}">{{currency.dialCode}} - {{currency.name}}</option>
                         </select>
                        </div>
                        <div class="col-6">
                            <p class="fsize18 f500 txtgrey c_space space15">Phone Number</p>
                          <input type="text" ng-model="vm.subcontractorData.contact.phoneNumber" class="form-control animated zoomIn wow" >
                        </div>
                    </div>
                    
                  </div>                 
                <div class="f_block">
                  <p class="fsize18 f500 txtgrey c_space space15">Email Address</p>
                  <input type="email" class="form-control animated zoomIn wow" ng-model="vm.subcontractorData.email">
                </div>
                <div class="f_block">
                  <p class="fsize18 f500 txtgrey c_space space15">Address</p>
                  <input type="text" class="form-control mapicon animated zoomIn wow" ng-model="vm.subcontractorData.address">
                </div>
                <div class="space30"></div>              
              </div> 
              <div class="modal-footer">
                <button type="button" class="btn btn_create_issue ripple" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn_create_issue yello_clr ripple"
                 ng-click="vm.editSubcontractorNext()">Next</button>
              </div>
            </div>
            <div class="tab-pane fade " id="profile" role="tabpanel" aria-labelledby="profile-tab">
                <div class="sidespacing">
                    <h5 class="fsize18 f500 c_space txtgrey">Attributes</h5>
                    <ul class="list-unstyled mb-0 supplies_list" ng-if="vm.subcontractorData.attributes.length>0">
                      <li ng-repeat="member in vm.subcontractorData.attributes">
                        <div class="row f_block">                    
                         <div class="col 6"style="padding-left:100px;">
                           <p style="font-size:16px;">{{member.tagName}}</p>
                         </div>
                         
                        </div>
                        <button class=" btn cross_icon ml-auto animated wobble-vertical" ng-click="deleteStaff($index,vm.subcontractorData.attributes)">
                          <img src="assets/images/suppliers/cross3.png" width="16" class="img-fluid" ></button>
                      </li>
                    </ul>
                    <div><br></div>
                   
                        <div class="f_block">
                            <select multiple ui-select2 ng-model="attribute" id="tagselect" class="form-control animated zoomIn wow" data-wow-delay="0.7s"
                            ng-options="cc.tagName for cc in vm.AllTags"></select>
                        </div>
                       
                            
                  </div> 
              <div class="modal-footer">
                <button type="button" class="btn btn_create_issue ripple" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn_create_issue yello_clr ripple"
                ng-click="vm.editSubcontractorPrevious()">Previous</button>
               <button type="button" class="btn btn_create_issue yello_clr ripple"
                ng-click="vm.editSubcontractorNext()">Next</button>
              </div>
            </div>
            <div class="tab-pane fade " id="contact" role="tabpanel" aria-labelledby="contact-tab">
                <div class="sidespacing">
                    <h5 class="fsize18 f500 c_space txtgrey">Staff Members</h5>
                    <ul class="list-unstyled mb-0 supplies_list" ng-if="vm.subcontractorData.staff.length>0">
                      <li ng-repeat="member in vm.subcontractorData.staff">
                        <div class="row f_block">                    
                         <div class="col 4">
                           <p style="font-size:16px;">{{member.name}}</p>
                         </div>
                         <div class="col 4">
                            <p style="font-size:16px;">{{member.email}}</p>
                          </div>
                          <div class="col 4">
                              <p style="font-size:16px;">{{member.contact.dialCode}}-{{member.contact.phoneNumber}}</p>
                          </div>
                          
                        </div>
                        <button class=" btn cross_icon ml-auto animated wobble-vertical" ng-click="deleteStaff($index,vm.editSubcontractor.staff)">
                          <img src="assets/images/suppliers/cross3.png" width="16" class="img-fluid" ></button>
                      </li>
                    </ul>
                    <br><br>
                    <div class="row">
                        <div class="col 6 f_block">
                          <input type="text" id="membername" class="form-control animated zoomIn wow" placeholder="Enter Name" ng-model="membername">
                        </div>
                        <div class="col 6 f_block">
                            <input type="email" id="memberemail" class="form-control animated zoomIn wow" placeholder="Email id" ng-model="memberemail">
                          </div>
                    </div><br>
                  
                    <div class="row">
                         <div class="col 4 f_block">
                             <select ui-select2 ng-model="memberdialCode" class="form-control" id="memberdialCode"
                             placeholder="dial Code">
                             <option ng-repeat="currency in vm.getCountryCode" value="{{currency.dialCode}}">{{currency.dialCode}} - {{currency.name}}</option>
                            </select>
                         </div>
                         <div class="col 6 f_block">
                             <input type="text" id="memberphoneNumber" class="form-control animated zoomIn wow" placeholder="Contat number" ng-model="memberphoneNumber" 
                             min="1" max="10" />
                         </div>

                          <div class="col 2 f_block">
                              <button class="btn yellow task_tag2" ng-click="vm.addMember(membername,memberemail,memberdialCode,memberphoneNumber);"
                              style="padding-top: 0px;margin-top: 10px;">+Add</button>
                          </div>
                    </div> 
                    <!-- <button class="btn yellow task_tag2">+ Add Another</button>             -->
                  </div> 
              <div class="modal-footer">
                <button type="button" class="btn btn_create_issue ripple" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn_create_issue yello_clr ripple"
                ng-click="vm.editSubcontractorPrevious()">Previous</button>
                <button type="button" class="btn btn_create_issue ripple"ng-click="updateSubcontractor(vm.subcontractorData,attribute)">Update</button>
              </div>
            </div>
          </div>
        </div> 
      </div>
    </div>
  </div>